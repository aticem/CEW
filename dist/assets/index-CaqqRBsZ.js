(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const o of u)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(u){const o={};return u.integrity&&(o.integrity=u.integrity),u.referrerPolicy&&(o.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?o.credentials="include":u.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(u){if(u.ep)return;u.ep=!0;const o=t(u);fetch(u.href,o)}})();var dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jg(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var bg={exports:{}},Xp={};var _b;function Uv(){if(_b)return Xp;_b=1;var m=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function t(s,u,o){var r=null;if(o!==void 0&&(r=""+o),u.key!==void 0&&(r=""+u.key),"key"in u){o={};for(var c in u)c!=="key"&&(o[c]=u[c])}else o=u;return u=o.ref,{$$typeof:m,type:s,key:r,ref:u!==void 0?u:null,props:o}}return Xp.Fragment=a,Xp.jsx=t,Xp.jsxs=t,Xp}var wb;function Hv(){return wb||(wb=1,bg.exports=Uv()),bg.exports}var q=Hv(),yg={exports:{}},rr={};var Sb;function Vv(){if(Sb)return rr;Sb=1;var m=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),r=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),n=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),p=Symbol.iterator;function g(P){return P===null||typeof P!="object"?null:(P=p&&P[p]||P["@@iterator"],typeof P=="function"?P:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function w(P,H,et){this.props=P,this.context=H,this.refs=y,this.updater=et||v}w.prototype.isReactComponent={},w.prototype.setState=function(P,H){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,H,"setState")},w.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function S(){}S.prototype=w.prototype;function E(P,H,et){this.props=P,this.context=H,this.refs=y,this.updater=et||v}var I=E.prototype=new S;I.constructor=E,x(I,w.prototype),I.isPureReactComponent=!0;var D=Array.isArray;function Z(){}var K={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function W(P,H,et){var it=et.ref;return{$$typeof:m,type:P,key:H,ref:it!==void 0?it:null,props:et}}function Q(P,H){return W(P.type,H,P.props)}function rt(P){return typeof P=="object"&&P!==null&&P.$$typeof===m}function tt(P){var H={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(et){return H[et]})}var j=/\/+/g;function F(P,H){return typeof P=="object"&&P!==null&&P.key!=null?tt(""+P.key):H.toString(36)}function R(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Z,Z):(P.status="pending",P.then(function(H){P.status==="pending"&&(P.status="fulfilled",P.value=H)},function(H){P.status==="pending"&&(P.status="rejected",P.reason=H)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function T(P,H,et,it,pt){var X=typeof P;(X==="undefined"||X==="boolean")&&(P=null);var ut=!1;if(P===null)ut=!0;else switch(X){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(P.$$typeof){case m:case a:ut=!0;break;case f:return ut=P._init,T(ut(P._payload),H,et,it,pt)}}if(ut)return pt=pt(P),ut=it===""?"."+F(P,0):it,D(pt)?(et="",ut!=null&&(et=ut.replace(j,"$&/")+"/"),T(pt,H,et,"",function(st){return st})):pt!=null&&(rt(pt)&&(pt=Q(pt,et+(pt.key==null||P&&P.key===pt.key?"":(""+pt.key).replace(j,"$&/")+"/")+ut)),H.push(pt)),1;ut=0;var G=it===""?".":it+":";if(D(P))for(var U=0;U<P.length;U++)it=P[U],X=G+F(it,U),ut+=T(it,H,et,X,pt);else if(U=g(P),typeof U=="function")for(P=U.call(P),U=0;!(it=P.next()).done;)it=it.value,X=G+F(it,U++),ut+=T(it,H,et,X,pt);else if(X==="object"){if(typeof P.then=="function")return T(R(P),H,et,it,pt);throw H=String(P),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return ut}function C(P,H,et){if(P==null)return P;var it=[],pt=0;return T(P,it,"","",function(X){return H.call(et,X,pt++)}),it}function k(P){if(P._status===-1){var H=P._result;H=H(),H.then(function(et){(P._status===0||P._status===-1)&&(P._status=1,P._result=et)},function(et){(P._status===0||P._status===-1)&&(P._status=2,P._result=et)}),P._status===-1&&(P._status=0,P._result=H)}if(P._status===1)return P._result.default;throw P._result}var M=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},O={map:C,forEach:function(P,H,et){C(P,function(){H.apply(this,arguments)},et)},count:function(P){var H=0;return C(P,function(){H++}),H},toArray:function(P){return C(P,function(H){return H})||[]},only:function(P){if(!rt(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return rr.Activity=h,rr.Children=O,rr.Component=w,rr.Fragment=t,rr.Profiler=u,rr.PureComponent=E,rr.StrictMode=s,rr.Suspense=l,rr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,rr.__COMPILER_RUNTIME={__proto__:null,c:function(P){return K.H.useMemoCache(P)}},rr.cache=function(P){return function(){return P.apply(null,arguments)}},rr.cacheSignal=function(){return null},rr.cloneElement=function(P,H,et){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var it=x({},P.props),pt=P.key;if(H!=null)for(X in H.key!==void 0&&(pt=""+H.key),H)!z.call(H,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&H.ref===void 0||(it[X]=H[X]);var X=arguments.length-2;if(X===1)it.children=et;else if(1<X){for(var ut=Array(X),G=0;G<X;G++)ut[G]=arguments[G+2];it.children=ut}return W(P.type,pt,it)},rr.createContext=function(P){return P={$$typeof:r,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:o,_context:P},P},rr.createElement=function(P,H,et){var it,pt={},X=null;if(H!=null)for(it in H.key!==void 0&&(X=""+H.key),H)z.call(H,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(pt[it]=H[it]);var ut=arguments.length-2;if(ut===1)pt.children=et;else if(1<ut){for(var G=Array(ut),U=0;U<ut;U++)G[U]=arguments[U+2];pt.children=G}if(P&&P.defaultProps)for(it in ut=P.defaultProps,ut)pt[it]===void 0&&(pt[it]=ut[it]);return W(P,X,pt)},rr.createRef=function(){return{current:null}},rr.forwardRef=function(P){return{$$typeof:c,render:P}},rr.isValidElement=rt,rr.lazy=function(P){return{$$typeof:f,_payload:{_status:-1,_result:P},_init:k}},rr.memo=function(P,H){return{$$typeof:n,type:P,compare:H===void 0?null:H}},rr.startTransition=function(P){var H=K.T,et={};K.T=et;try{var it=P(),pt=K.S;pt!==null&&pt(et,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(Z,M)}catch(X){M(X)}finally{H!==null&&et.types!==null&&(H.types=et.types),K.T=H}},rr.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},rr.use=function(P){return K.H.use(P)},rr.useActionState=function(P,H,et){return K.H.useActionState(P,H,et)},rr.useCallback=function(P,H){return K.H.useCallback(P,H)},rr.useContext=function(P){return K.H.useContext(P)},rr.useDebugValue=function(){},rr.useDeferredValue=function(P,H){return K.H.useDeferredValue(P,H)},rr.useEffect=function(P,H){return K.H.useEffect(P,H)},rr.useEffectEvent=function(P){return K.H.useEffectEvent(P)},rr.useId=function(){return K.H.useId()},rr.useImperativeHandle=function(P,H,et){return K.H.useImperativeHandle(P,H,et)},rr.useInsertionEffect=function(P,H){return K.H.useInsertionEffect(P,H)},rr.useLayoutEffect=function(P,H){return K.H.useLayoutEffect(P,H)},rr.useMemo=function(P,H){return K.H.useMemo(P,H)},rr.useOptimistic=function(P,H){return K.H.useOptimistic(P,H)},rr.useReducer=function(P,H,et){return K.H.useReducer(P,H,et)},rr.useRef=function(P){return K.H.useRef(P)},rr.useState=function(P){return K.H.useState(P)},rr.useSyncExternalStore=function(P,H,et){return K.H.useSyncExternalStore(P,H,et)},rr.useTransition=function(){return K.H.useTransition()},rr.version="19.2.1",rr}var Tb;function tb(){return Tb||(Tb=1,yg.exports=Vv()),yg.exports}var ot=tb(),vg={exports:{}},Yp={},xg={exports:{}},_g={};var Cb;function $v(){return Cb||(Cb=1,(function(m){function a(T,C){var k=T.length;T.push(C);t:for(;0<k;){var M=k-1>>>1,O=T[M];if(0<u(O,C))T[M]=C,T[k]=O,k=M;else break t}}function t(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var C=T[0],k=T.pop();if(k!==C){T[0]=k;t:for(var M=0,O=T.length,P=O>>>1;M<P;){var H=2*(M+1)-1,et=T[H],it=H+1,pt=T[it];if(0>u(et,k))it<O&&0>u(pt,et)?(T[M]=pt,T[it]=k,M=it):(T[M]=et,T[H]=k,M=H);else if(it<O&&0>u(pt,k))T[M]=pt,T[it]=k,M=it;else break t}}return C}function u(T,C){var k=T.sortIndex-C.sortIndex;return k!==0?k:T.id-C.id}if(m.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;m.unstable_now=function(){return o.now()}}else{var r=Date,c=r.now();m.unstable_now=function(){return r.now()-c}}var l=[],n=[],f=1,h=null,p=3,g=!1,v=!1,x=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function I(T){for(var C=t(n);C!==null;){if(C.callback===null)s(n);else if(C.startTime<=T)s(n),C.sortIndex=C.expirationTime,a(l,C);else break;C=t(n)}}function D(T){if(x=!1,I(T),!v)if(t(l)!==null)v=!0,Z||(Z=!0,tt());else{var C=t(n);C!==null&&R(D,C.startTime-T)}}var Z=!1,K=-1,z=5,W=-1;function Q(){return y?!0:!(m.unstable_now()-W<z)}function rt(){if(y=!1,Z){var T=m.unstable_now();W=T;var C=!0;try{t:{v=!1,x&&(x=!1,S(K),K=-1),g=!0;var k=p;try{e:{for(I(T),h=t(l);h!==null&&!(h.expirationTime>T&&Q());){var M=h.callback;if(typeof M=="function"){h.callback=null,p=h.priorityLevel;var O=M(h.expirationTime<=T);if(T=m.unstable_now(),typeof O=="function"){h.callback=O,I(T),C=!0;break e}h===t(l)&&s(l),I(T)}else s(l);h=t(l)}if(h!==null)C=!0;else{var P=t(n);P!==null&&R(D,P.startTime-T),C=!1}}break t}finally{h=null,p=k,g=!1}C=void 0}}finally{C?tt():Z=!1}}}var tt;if(typeof E=="function")tt=function(){E(rt)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,F=j.port2;j.port1.onmessage=rt,tt=function(){F.postMessage(null)}}else tt=function(){w(rt,0)};function R(T,C){K=w(function(){T(m.unstable_now())},C)}m.unstable_IdlePriority=5,m.unstable_ImmediatePriority=1,m.unstable_LowPriority=4,m.unstable_NormalPriority=3,m.unstable_Profiling=null,m.unstable_UserBlockingPriority=2,m.unstable_cancelCallback=function(T){T.callback=null},m.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<T?Math.floor(1e3/T):5},m.unstable_getCurrentPriorityLevel=function(){return p},m.unstable_next=function(T){switch(p){case 1:case 2:case 3:var C=3;break;default:C=p}var k=p;p=C;try{return T()}finally{p=k}},m.unstable_requestPaint=function(){y=!0},m.unstable_runWithPriority=function(T,C){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var k=p;p=T;try{return C()}finally{p=k}},m.unstable_scheduleCallback=function(T,C,k){var M=m.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?M+k:M):k=M,T){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=k+O,T={id:f++,callback:C,priorityLevel:T,startTime:k,expirationTime:O,sortIndex:-1},k>M?(T.sortIndex=k,a(n,T),t(l)===null&&T===t(n)&&(x?(S(K),K=-1):x=!0,R(D,k-M))):(T.sortIndex=O,a(l,T),v||g||(v=!0,Z||(Z=!0,tt()))),T},m.unstable_shouldYield=Q,m.unstable_wrapCallback=function(T){var C=p;return function(){var k=p;p=C;try{return T.apply(this,arguments)}finally{p=k}}}})(_g)),_g}var kb;function Wv(){return kb||(kb=1,xg.exports=$v()),xg.exports}var wg={exports:{}},po={};var Mb;function qv(){if(Mb)return po;Mb=1;var m=tb();function a(l){var n="https://react.dev/errors/"+l;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)n+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(a(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},u=Symbol.for("react.portal");function o(l,n,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:h==null?null:""+h,children:l,containerInfo:n,implementation:f}}var r=m.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(l,n){if(l==="font")return"";if(typeof n=="string")return n==="use-credentials"?n:""}return po.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,po.createPortal=function(l,n){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)throw Error(a(299));return o(l,n,null,f)},po.flushSync=function(l){var n=r.T,f=s.p;try{if(r.T=null,s.p=2,l)return l()}finally{r.T=n,s.p=f,s.d.f()}},po.preconnect=function(l,n){typeof l=="string"&&(n?(n=n.crossOrigin,n=typeof n=="string"?n==="use-credentials"?n:"":void 0):n=null,s.d.C(l,n))},po.prefetchDNS=function(l){typeof l=="string"&&s.d.D(l)},po.preinit=function(l,n){if(typeof l=="string"&&n&&typeof n.as=="string"){var f=n.as,h=c(f,n.crossOrigin),p=typeof n.integrity=="string"?n.integrity:void 0,g=typeof n.fetchPriority=="string"?n.fetchPriority:void 0;f==="style"?s.d.S(l,typeof n.precedence=="string"?n.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):f==="script"&&s.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof n.nonce=="string"?n.nonce:void 0})}},po.preinitModule=function(l,n){if(typeof l=="string")if(typeof n=="object"&&n!==null){if(n.as==null||n.as==="script"){var f=c(n.as,n.crossOrigin);s.d.M(l,{crossOrigin:f,integrity:typeof n.integrity=="string"?n.integrity:void 0,nonce:typeof n.nonce=="string"?n.nonce:void 0})}}else n==null&&s.d.M(l)},po.preload=function(l,n){if(typeof l=="string"&&typeof n=="object"&&n!==null&&typeof n.as=="string"){var f=n.as,h=c(f,n.crossOrigin);s.d.L(l,f,{crossOrigin:h,integrity:typeof n.integrity=="string"?n.integrity:void 0,nonce:typeof n.nonce=="string"?n.nonce:void 0,type:typeof n.type=="string"?n.type:void 0,fetchPriority:typeof n.fetchPriority=="string"?n.fetchPriority:void 0,referrerPolicy:typeof n.referrerPolicy=="string"?n.referrerPolicy:void 0,imageSrcSet:typeof n.imageSrcSet=="string"?n.imageSrcSet:void 0,imageSizes:typeof n.imageSizes=="string"?n.imageSizes:void 0,media:typeof n.media=="string"?n.media:void 0})}},po.preloadModule=function(l,n){if(typeof l=="string")if(n){var f=c(n.as,n.crossOrigin);s.d.m(l,{as:typeof n.as=="string"&&n.as!=="script"?n.as:void 0,crossOrigin:f,integrity:typeof n.integrity=="string"?n.integrity:void 0})}else s.d.m(l)},po.requestFormReset=function(l){s.d.r(l)},po.unstable_batchedUpdates=function(l,n){return l(n)},po.useFormState=function(l,n,f){return r.H.useFormState(l,n,f)},po.useFormStatus=function(){return r.H.useHostTransitionStatus()},po.version="19.2.1",po}var Eb;function Gv(){if(Eb)return wg.exports;Eb=1;function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(a){console.error(a)}}return m(),wg.exports=qv(),wg.exports}var Nb;function Zv(){if(Nb)return Yp;Nb=1;var m=Wv(),a=tb(),t=Gv();function s(i){var d="https://react.dev/errors/"+i;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)d+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+i+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var d=i,_=i;if(i.alternate)for(;d.return;)d=d.return;else{i=d;do d=i,(d.flags&4098)!==0&&(_=d.return),i=d.return;while(i)}return d.tag===3?_:null}function r(i){if(i.tag===13){var d=i.memoizedState;if(d===null&&(i=i.alternate,i!==null&&(d=i.memoizedState)),d!==null)return d.dehydrated}return null}function c(i){if(i.tag===31){var d=i.memoizedState;if(d===null&&(i=i.alternate,i!==null&&(d=i.memoizedState)),d!==null)return d.dehydrated}return null}function l(i){if(o(i)!==i)throw Error(s(188))}function n(i){var d=i.alternate;if(!d){if(d=o(i),d===null)throw Error(s(188));return d!==i?null:i}for(var _=i,A=d;;){var V=_.return;if(V===null)break;var Y=V.alternate;if(Y===null){if(A=V.return,A!==null){_=A;continue}break}if(V.child===Y.child){for(Y=V.child;Y;){if(Y===_)return l(V),i;if(Y===A)return l(V),d;Y=Y.sibling}throw Error(s(188))}if(_.return!==A.return)_=V,A=Y;else{for(var ct=!1,kt=V.child;kt;){if(kt===_){ct=!0,_=V,A=Y;break}if(kt===A){ct=!0,A=V,_=Y;break}kt=kt.sibling}if(!ct){for(kt=Y.child;kt;){if(kt===_){ct=!0,_=Y,A=V;break}if(kt===A){ct=!0,A=Y,_=V;break}kt=kt.sibling}if(!ct)throw Error(s(189))}}if(_.alternate!==A)throw Error(s(190))}if(_.tag!==3)throw Error(s(188));return _.stateNode.current===_?i:d}function f(i){var d=i.tag;if(d===5||d===26||d===27||d===6)return i;for(i=i.child;i!==null;){if(d=f(i),d!==null)return d;i=i.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),rt=Symbol.iterator;function tt(i){return i===null||typeof i!="object"?null:(i=rt&&i[rt]||i["@@iterator"],typeof i=="function"?i:null)}var j=Symbol.for("react.client.reference");function F(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===j?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case x:return"Fragment";case w:return"Profiler";case y:return"StrictMode";case D:return"Suspense";case Z:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case E:return i.displayName||"Context";case S:return(i._context.displayName||"Context")+".Consumer";case I:var d=i.render;return i=i.displayName,i||(i=d.displayName||d.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case K:return d=i.displayName||null,d!==null?d:F(i.type)||"Memo";case z:d=i._payload,i=i._init;try{return F(i(d))}catch{}}return null}var R=Array.isArray,T=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},M=[],O=-1;function P(i){return{current:i}}function H(i){0>O||(i.current=M[O],M[O]=null,O--)}function et(i,d){O++,M[O]=i.current,i.current=d}var it=P(null),pt=P(null),X=P(null),ut=P(null);function G(i,d){switch(et(X,d),et(pt,i),et(it,null),d.nodeType){case 9:case 11:i=(i=d.documentElement)&&(i=i.namespaceURI)?e0(i):0;break;default:if(i=d.tagName,d=d.namespaceURI)d=e0(d),i=n0(d,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}H(it),et(it,i)}function U(){H(it),H(pt),H(X)}function st(i){i.memoizedState!==null&&et(ut,i);var d=it.current,_=n0(d,i.type);d!==_&&(et(pt,i),et(it,_))}function gt(i){pt.current===i&&(H(it),H(pt)),ut.current===i&&(H(ut),Rt._currentValue=k)}var zt,St;function Bt(i){if(zt===void 0)try{throw Error()}catch(_){var d=_.stack.trim().match(/\n( *(at )?)/);zt=d&&d[1]||"",St=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zt+i+St}var ie=!1;function re(i,d){if(!i||ie)return"";ie=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(d){var Ie=function(){throw Error()};if(Object.defineProperty(Ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ie,[])}catch(ke){var _e=ke}Reflect.construct(i,[],Ie)}else{try{Ie.call()}catch(ke){_e=ke}i.call(Ie.prototype)}}else{try{throw Error()}catch(ke){_e=ke}(Ie=i())&&typeof Ie.catch=="function"&&Ie.catch(function(){})}}catch(ke){if(ke&&_e&&typeof ke.stack=="string")return[ke.stack,_e.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var V=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");V&&V.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Y=A.DetermineComponentFrameRoot(),ct=Y[0],kt=Y[1];if(ct&&kt){var ee=ct.split(`
`),pe=kt.split(`
`);for(V=A=0;A<ee.length&&!ee[A].includes("DetermineComponentFrameRoot");)A++;for(;V<pe.length&&!pe[V].includes("DetermineComponentFrameRoot");)V++;if(A===ee.length||V===pe.length)for(A=ee.length-1,V=pe.length-1;1<=A&&0<=V&&ee[A]!==pe[V];)V--;for(;1<=A&&0<=V;A--,V--)if(ee[A]!==pe[V]){if(A!==1||V!==1)do if(A--,V--,0>V||ee[A]!==pe[V]){var Re=`
`+ee[A].replace(" at new "," at ");return i.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",i.displayName)),Re}while(1<=A&&0<=V);break}}}finally{ie=!1,Error.prepareStackTrace=_}return(_=i?i.displayName||i.name:"")?Bt(_):""}function Ct(i,d){switch(i.tag){case 26:case 27:case 5:return Bt(i.type);case 16:return Bt("Lazy");case 13:return i.child!==d&&d!==null?Bt("Suspense Fallback"):Bt("Suspense");case 19:return Bt("SuspenseList");case 0:case 15:return re(i.type,!1);case 11:return re(i.type.render,!1);case 1:return re(i.type,!0);case 31:return Bt("Activity");default:return""}}function Yt(i){try{var d="",_=null;do d+=Ct(i,_),_=i,i=i.return;while(i);return d}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}var Qt=Object.prototype.hasOwnProperty,Ht=m.unstable_scheduleCallback,Jt=m.unstable_cancelCallback,ne=m.unstable_shouldYield,ae=m.unstable_requestPaint,me=m.unstable_now,Le=m.unstable_getCurrentPriorityLevel,Pe=m.unstable_ImmediatePriority,Be=m.unstable_UserBlockingPriority,He=m.unstable_NormalPriority,Je=m.unstable_LowPriority,sn=m.unstable_IdlePriority,un=m.log,an=m.unstable_setDisableYieldValue,ge=null,Ve=null;function Ke(i){if(typeof un=="function"&&an(i),Ve&&typeof Ve.setStrictMode=="function")try{Ve.setStrictMode(ge,i)}catch{}}var dn=Math.clz32?Math.clz32:hr,ln=Math.log,$n=Math.LN2;function hr(i){return i>>>=0,i===0?32:31-(ln(i)/$n|0)|0}var Ye=256,Xn=262144,Wn=4194304;function Cn(i){var d=i&42;if(d!==0)return d;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function br(i,d,_){var A=i.pendingLanes;if(A===0)return 0;var V=0,Y=i.suspendedLanes,ct=i.pingedLanes;i=i.warmLanes;var kt=A&134217727;return kt!==0?(A=kt&~Y,A!==0?V=Cn(A):(ct&=kt,ct!==0?V=Cn(ct):_||(_=kt&~i,_!==0&&(V=Cn(_))))):(kt=A&~Y,kt!==0?V=Cn(kt):ct!==0?V=Cn(ct):_||(_=A&~i,_!==0&&(V=Cn(_)))),V===0?0:d!==0&&d!==V&&(d&Y)===0&&(Y=V&-V,_=d&-d,Y>=_||Y===32&&(_&4194048)!==0)?d:V}function Ge(i,d){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&d)===0}function Ln(i,d){switch(i){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ir(){var i=Wn;return Wn<<=1,(Wn&62914560)===0&&(Wn=4194304),i}function Zn(i){for(var d=[],_=0;31>_;_++)d.push(i);return d}function cn(i,d){i.pendingLanes|=d,d!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Qn(i,d,_,A,V,Y){var ct=i.pendingLanes;i.pendingLanes=_,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=_,i.entangledLanes&=_,i.errorRecoveryDisabledLanes&=_,i.shellSuspendCounter=0;var kt=i.entanglements,ee=i.expirationTimes,pe=i.hiddenUpdates;for(_=ct&~_;0<_;){var Re=31-dn(_),Ie=1<<Re;kt[Re]=0,ee[Re]=-1;var _e=pe[Re];if(_e!==null)for(pe[Re]=null,Re=0;Re<_e.length;Re++){var ke=_e[Re];ke!==null&&(ke.lane&=-536870913)}_&=~Ie}A!==0&&qn(i,A,0),Y!==0&&V===0&&i.tag!==0&&(i.suspendedLanes|=Y&~(ct&~d))}function qn(i,d,_){i.pendingLanes|=d,i.suspendedLanes&=~d;var A=31-dn(d);i.entangledLanes|=d,i.entanglements[A]=i.entanglements[A]|1073741824|_&261930}function jn(i,d){var _=i.entangledLanes|=d;for(i=i.entanglements;_;){var A=31-dn(_),V=1<<A;V&d|i[A]&d&&(i[A]|=d),_&=~V}}function ue(i,d){var _=d&-d;return _=(_&42)!==0?1:ye(_),(_&(i.suspendedLanes|d))!==0?0:_}function ye(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function be(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Qe(){var i=C.p;return i!==0?i:(i=window.event,i===void 0?32:Zt(i.type))}function yn(i,d){var _=C.p;try{return C.p=i,d()}finally{C.p=_}}var qe=Math.random().toString(36).slice(2),fn="__reactFiber$"+qe,gn="__reactProps$"+qe,wn="__reactContainer$"+qe,bn="__reactEvents$"+qe,Sn="__reactListeners$"+qe,Fn="__reactHandles$"+qe,pr="__reactResources$"+qe,Gn="__reactMarker$"+qe;function Nr(i){delete i[fn],delete i[gn],delete i[bn],delete i[Sn],delete i[Fn]}function Cr(i){var d=i[fn];if(d)return d;for(var _=i.parentNode;_;){if(d=_[wn]||_[fn]){if(_=d.alternate,d.child!==null||_!==null&&_.child!==null)for(i=l0(i);i!==null;){if(_=i[fn])return _;i=l0(i)}return d}i=_,_=i.parentNode}return null}function oi(i){if(i=i[fn]||i[wn]){var d=i.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return i}return null}function Kt(i){var d=i.tag;if(d===5||d===26||d===27||d===6)return i.stateNode;throw Error(s(33))}function we(i){var d=i[pr];return d||(d=i[pr]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function De(i){i[Gn]=!0}var $e=new Set,Tn={};function Ze(i,d){Xe(i,d),Xe(i+"Capture",d)}function Xe(i,d){for(Tn[i]=d,i=0;i<d.length;i++)$e.add(d[i])}var vn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dn={},Bn={};function kn(i){return Qt.call(Bn,i)?!0:Qt.call(Dn,i)?!1:vn.test(i)?Bn[i]=!0:(Dn[i]=!0,!1)}function xn(i,d,_){if(kn(d))if(_===null)i.removeAttribute(d);else{switch(typeof _){case"undefined":case"function":case"symbol":i.removeAttribute(d);return;case"boolean":var A=d.toLowerCase().slice(0,5);if(A!=="data-"&&A!=="aria-"){i.removeAttribute(d);return}}i.setAttribute(d,""+_)}}function En(i,d,_){if(_===null)i.removeAttribute(d);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(d);return}i.setAttribute(d,""+_)}}function Un(i,d,_,A){if(A===null)i.removeAttribute(_);else{switch(typeof A){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(_);return}i.setAttributeNS(d,_,""+A)}}function Vn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ar(i){var d=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Vr(i,d,_){var A=Object.getOwnPropertyDescriptor(i.constructor.prototype,d);if(!i.hasOwnProperty(d)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var V=A.get,Y=A.set;return Object.defineProperty(i,d,{configurable:!0,get:function(){return V.call(this)},set:function(ct){_=""+ct,Y.call(this,ct)}}),Object.defineProperty(i,d,{enumerable:A.enumerable}),{getValue:function(){return _},setValue:function(ct){_=""+ct},stopTracking:function(){i._valueTracker=null,delete i[d]}}}}function In(i){if(!i._valueTracker){var d=Ar(i)?"checked":"value";i._valueTracker=Vr(i,d,""+i[d])}}function mr(i){if(!i)return!1;var d=i._valueTracker;if(!d)return!0;var _=d.getValue(),A="";return i&&(A=Ar(i)?i.checked?"true":"false":i.value),i=A,i!==_?(d.setValue(i),!0):!1}function ps(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var di=/[\n"\\]/g;function lr(i){return i.replace(di,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function yr(i,d,_,A,V,Y,ct,kt){i.name="",ct!=null&&typeof ct!="function"&&typeof ct!="symbol"&&typeof ct!="boolean"?i.type=ct:i.removeAttribute("type"),d!=null?ct==="number"?(d===0&&i.value===""||i.value!=d)&&(i.value=""+Vn(d)):i.value!==""+Vn(d)&&(i.value=""+Vn(d)):ct!=="submit"&&ct!=="reset"||i.removeAttribute("value"),d!=null?ai(i,ct,Vn(d)):_!=null?ai(i,ct,Vn(_)):A!=null&&i.removeAttribute("value"),V==null&&Y!=null&&(i.defaultChecked=!!Y),V!=null&&(i.checked=V&&typeof V!="function"&&typeof V!="symbol"),kt!=null&&typeof kt!="function"&&typeof kt!="symbol"&&typeof kt!="boolean"?i.name=""+Vn(kt):i.removeAttribute("name")}function er(i,d,_,A,V,Y,ct,kt){if(Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(i.type=Y),d!=null||_!=null){if(!(Y!=="submit"&&Y!=="reset"||d!=null)){In(i);return}_=_!=null?""+Vn(_):"",d=d!=null?""+Vn(d):_,kt||d===i.value||(i.value=d),i.defaultValue=d}A=A??V,A=typeof A!="function"&&typeof A!="symbol"&&!!A,i.checked=kt?i.checked:!!A,i.defaultChecked=!!A,ct!=null&&typeof ct!="function"&&typeof ct!="symbol"&&typeof ct!="boolean"&&(i.name=ct),In(i)}function ai(i,d,_){d==="number"&&ps(i.ownerDocument)===i||i.defaultValue===""+_||(i.defaultValue=""+_)}function wr(i,d,_,A){if(i=i.options,d){d={};for(var V=0;V<_.length;V++)d["$"+_[V]]=!0;for(_=0;_<i.length;_++)V=d.hasOwnProperty("$"+i[_].value),i[_].selected!==V&&(i[_].selected=V),V&&A&&(i[_].defaultSelected=!0)}else{for(_=""+Vn(_),d=null,V=0;V<i.length;V++){if(i[V].value===_){i[V].selected=!0,A&&(i[V].defaultSelected=!0);return}d!==null||i[V].disabled||(d=i[V])}d!==null&&(d.selected=!0)}}function ns(i,d,_){if(d!=null&&(d=""+Vn(d),d!==i.value&&(i.value=d),_==null)){i.defaultValue!==d&&(i.defaultValue=d);return}i.defaultValue=_!=null?""+Vn(_):""}function Or(i,d,_,A){if(d==null){if(A!=null){if(_!=null)throw Error(s(92));if(R(A)){if(1<A.length)throw Error(s(93));A=A[0]}_=A}_==null&&(_=""),d=_}_=Vn(d),i.defaultValue=_,A=i.textContent,A===_&&A!==""&&A!==null&&(i.value=A),In(i)}function kr(i,d){if(d){var _=i.firstChild;if(_&&_===i.lastChild&&_.nodeType===3){_.nodeValue=d;return}}i.textContent=d}var ms=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wo(i,d,_){var A=d.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?A?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="":A?i.setProperty(d,_):typeof _!="number"||_===0||ms.has(d)?d==="float"?i.cssFloat=_:i[d]=(""+_).trim():i[d]=_+"px"}function Vs(i,d,_){if(d!=null&&typeof d!="object")throw Error(s(62));if(i=i.style,_!=null){for(var A in _)!_.hasOwnProperty(A)||d!=null&&d.hasOwnProperty(A)||(A.indexOf("--")===0?i.setProperty(A,""):A==="float"?i.cssFloat="":i[A]="");for(var V in d)A=d[V],d.hasOwnProperty(V)&&_[V]!==A&&wo(i,V,A)}else for(var Y in d)d.hasOwnProperty(Y)&&wo(i,Y,d[Y])}function li(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ao(i){return gs.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Rr(){}var rs=null;function bs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var xi=null,Nn=null;function ci(i){var d=oi(i);if(d&&(i=d.stateNode)){var _=i[gn]||null;t:switch(i=d.stateNode,d.type){case"input":if(yr(i,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),d=_.name,_.type==="radio"&&d!=null){for(_=i;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+lr(""+d)+'"][type="radio"]'),d=0;d<_.length;d++){var A=_[d];if(A!==i&&A.form===i.form){var V=A[gn]||null;if(!V)throw Error(s(90));yr(A,V.value,V.defaultValue,V.defaultValue,V.checked,V.defaultChecked,V.type,V.name)}}for(d=0;d<_.length;d++)A=_[d],A.form===i.form&&mr(A)}break t;case"textarea":ns(i,_.value,_.defaultValue);break t;case"select":d=_.value,d!=null&&wr(i,!!_.multiple,d,!1)}}}var jr=!1;function Yf(i,d,_){if(jr)return i(d,_);jr=!0;try{var A=i(d);return A}finally{if(jr=!1,(xi!==null||Nn!==null)&&(Nh(),xi&&(d=xi,i=Nn,Nn=xi=null,ci(d),i)))for(d=0;d<i.length;d++)ci(i[d])}}function al(i,d){var _=i.stateNode;if(_===null)return null;var A=_[gn]||null;if(A===null)return null;_=A[d];t:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(i=i.type,A=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!A;break t;default:i=!1}if(i)return null;if(_&&typeof _!="function")throw Error(s(231,d,typeof _));return _}var So=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Du=!1;if(So)try{var is={};Object.defineProperty(is,"passive",{get:function(){Du=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{Du=!1}var Bi=null,ss=null,Xr=null;function _i(){if(Xr)return Xr;var i,d=ss,_=d.length,A,V="value"in Bi?Bi.value:Bi.textContent,Y=V.length;for(i=0;i<_&&d[i]===V[i];i++);var ct=_-i;for(A=1;A<=ct&&d[_-A]===V[Y-A];A++);return Xr=V.slice(i,1<A?1-A:void 0)}function To(i){var d=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&d===13&&(i=13)):i=d,i===10&&(i=13),32<=i||i===13?i:0}function Es(){return!0}function Jh(){return!1}function zi(i){function d(_,A,V,Y,ct){this._reactName=_,this._targetInst=V,this.type=A,this.nativeEvent=Y,this.target=ct,this.currentTarget=null;for(var kt in i)i.hasOwnProperty(kt)&&(_=i[kt],this[kt]=_?_(Y):Y[kt]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?Es:Jh,this.isPropagationStopped=Jh,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),d}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pa=zi(Fi),$s=h({},Fi,{view:0,detail:0}),Kn=zi($s),Bc,Ii,Ns,Zl=h({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cl,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ns&&(Ns&&i.type==="mousemove"?(Bc=i.screenX-Ns.screenX,Ii=i.screenY-Ns.screenY):Ii=Bc=0,Ns=i),Bc)},movementY:function(i){return"movementY"in i?i.movementY:Ii}}),Ui=zi(Zl),Lr=h({},Zl,{dataTransfer:0}),Bu=zi(Lr),La=h({},$s,{relatedTarget:0}),Co=zi(La),ll=h({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Go=zi(ll),ma=h({},Fi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),lo=zi(ma),Pa=h({},Fi,{data:0}),zu=zi(Pa),ga={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Da={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kf(i){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(i):(i=Da[i])?!!d[i]:!1}function cl(){return Kf}var ep=h({},$s,{key:function(i){if(i.key){var d=ga[i.key]||i.key;if(d!=="Unidentified")return d}return i.type==="keypress"?(i=To(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?tp[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cl,charCode:function(i){return i.type==="keypress"?To(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?To(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Jd=zi(ep),Fu=h({},Zl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zo=zi(Fu),ul=h({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cl}),zc=zi(ul),ba=h({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xl=zi(ba),Yl=h({},Zl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ya=zi(Yl),Sm=h({},Fi,{newState:0,oldState:0}),fl=zi(Sm),os=[9,13,27,32],Fc=So&&"CompositionEvent"in window,Ba=null;So&&"documentMode"in document&&(Ba=document.documentMode);var dl=So&&"TextEvent"in window&&!Ba,za=So&&(!Fc||Ba&&8<Ba&&11>=Ba),ko=" ",Kl=!1;function Uu(i,d){switch(i){case"keyup":return os.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ws=!1;function as(i,d){switch(i){case"compositionend":return Qf(d);case"keypress":return d.which!==32?null:(Kl=!0,ko);case"textInput":return i=d.data,i===ko&&Kl?null:i;default:return null}}function As(i,d){if(Ws)return i==="compositionend"||!Fc&&Uu(i,d)?(i=_i(),Xr=ss=Bi=null,Ws=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return za&&d.locale!=="ko"?null:d.data;default:return null}}var Uc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qs(i){var d=i&&i.nodeName&&i.nodeName.toLowerCase();return d==="input"?!!Uc[i.type]:d==="textarea"}function Hu(i,d,_,A){xi?Nn?Nn.push(A):Nn=[A]:xi=A,d=Ph(d,"onChange"),0<d.length&&(_=new pa("onChange","change",null,_,A),i.push({event:_,listeners:d}))}var Mo=null,Ql=null;function va(i){jh(i,0)}function Jl(i){var d=Kt(i);if(mr(d))return i}function tc(i,d){if(i==="change")return d}var Jf=!1;if(So){var xa;if(So){var hl="oninput"in document;if(!hl){var Hc=document.createElement("div");Hc.setAttribute("oninput","return;"),hl=typeof Hc.oninput=="function"}xa=hl}else xa=!1;Jf=xa&&(!document.documentMode||9<document.documentMode)}function ys(){Mo&&(Mo.detachEvent("onpropertychange",co),Ql=Mo=null)}function co(i){if(i.propertyName==="value"&&Jl(Ql)){var d=[];Hu(d,Ql,i,bs(i)),Yf(va,d)}}function ls(i,d,_){i==="focusin"?(ys(),Mo=d,Ql=_,Mo.attachEvent("onpropertychange",co)):i==="focusout"&&ys()}function Vc(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Jl(Ql)}function Eo(i,d){if(i==="click")return Jl(d)}function pl(i,d){if(i==="input"||i==="change")return Jl(d)}function Gs(i,d){return i===d&&(i!==0||1/i===1/d)||i!==i&&d!==d}var wi=typeof Object.is=="function"?Object.is:Gs;function Xo(i,d){if(wi(i,d))return!0;if(typeof i!="object"||i===null||typeof d!="object"||d===null)return!1;var _=Object.keys(i),A=Object.keys(d);if(_.length!==A.length)return!1;for(A=0;A<_.length;A++){var V=_[A];if(!Qt.call(d,V)||!wi(i[V],d[V]))return!1}return!0}function ec(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function $c(i,d){var _=ec(i);i=0;for(var A;_;){if(_.nodeType===3){if(A=i+_.textContent.length,i<=d&&A>=d)return{node:_,offset:d-i};i=A}t:{for(;_;){if(_.nextSibling){_=_.nextSibling;break t}_=_.parentNode}_=void 0}_=ec(_)}}function Wc(i,d){return i&&d?i===d?!0:i&&i.nodeType===3?!1:d&&d.nodeType===3?Wc(i,d.parentNode):"contains"in i?i.contains(d):i.compareDocumentPosition?!!(i.compareDocumentPosition(d)&16):!1:!1}function qc(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var d=ps(i.document);d instanceof i.HTMLIFrameElement;){try{var _=typeof d.contentWindow.location.href=="string"}catch{_=!1}if(_)i=d.contentWindow;else break;d=ps(i.document)}return d}function _a(i){var d=i&&i.nodeName&&i.nodeName.toLowerCase();return d&&(d==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||d==="textarea"||i.contentEditable==="true")}var Vu=So&&"documentMode"in document&&11>=document.documentMode,cs=null,Oi=null,Fa=null,Yo=!1;function ml(i,d,_){var A=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;Yo||cs==null||cs!==ps(A)||(A=cs,"selectionStart"in A&&_a(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),Fa&&Xo(Fa,A)||(Fa=A,A=Ph(Oi,"onSelect"),0<A.length&&(d=new pa("onSelect","select",null,d,_),i.push({event:d,listeners:A}),d.target=cs)))}function Ko(i,d){var _={};return _[i.toLowerCase()]=d.toLowerCase(),_["Webkit"+i]="webkit"+d,_["Moz"+i]="moz"+d,_}var No={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionrun:Ko("Transition","TransitionRun"),transitionstart:Ko("Transition","TransitionStart"),transitioncancel:Ko("Transition","TransitionCancel"),transitionend:Ko("Transition","TransitionEnd")},nc={},td={};So&&(td=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function Hi(i){if(nc[i])return nc[i];if(!No[i])return i;var d=No[i],_;for(_ in d)if(d.hasOwnProperty(_)&&_ in td)return nc[i]=d[_];return i}var Ua=Hi("animationend"),th=Hi("animationiteration"),Ha=Hi("animationstart"),np=Hi("transitionrun"),wa=Hi("transitionstart"),Va=Hi("transitioncancel"),rc=Hi("transitionend"),gl=new Map,Zs="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zs.push("scrollEnd");function vs(i,d){gl.set(i,d),Ze(d,[i])}var Qo=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Rs=[],Si=0,ic=0;function Ao(){for(var i=Si,d=ic=Si=0;d<i;){var _=Rs[d];Rs[d++]=null;var A=Rs[d];Rs[d++]=null;var V=Rs[d];Rs[d++]=null;var Y=Rs[d];if(Rs[d++]=null,A!==null&&V!==null){var ct=A.pending;ct===null?V.next=V:(V.next=ct.next,ct.next=V),A.pending=V}Y!==0&&bl(_,V,Y)}}function $a(i,d,_,A){Rs[Si++]=i,Rs[Si++]=d,Rs[Si++]=_,Rs[Si++]=A,ic|=A,i.lanes|=A,i=i.alternate,i!==null&&(i.lanes|=A)}function $u(i,d,_,A){return $a(i,d,_,A),Jo(i)}function uo(i,d){return $a(i,null,null,d),Jo(i)}function bl(i,d,_){i.lanes|=_;var A=i.alternate;A!==null&&(A.lanes|=_);for(var V=!1,Y=i.return;Y!==null;)Y.childLanes|=_,A=Y.alternate,A!==null&&(A.childLanes|=_),Y.tag===22&&(i=Y.stateNode,i===null||i._visibility&1||(V=!0)),i=Y,Y=Y.return;return i.tag===3?(Y=i.stateNode,V&&d!==null&&(V=31-dn(_),i=Y.hiddenUpdates,A=i[V],A===null?i[V]=[d]:A.push(d),d.lane=_|536870912),Y):null}function Jo(i){if(50<Ad)throw Ad=0,Ap=null,Error(s(185));for(var d=i.return;d!==null;)i=d,d=i.return;return i.tag===3?i.stateNode:null}var Vi={};function ed(i,d,_,A){this.tag=i,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(i,d,_,A){return new ed(i,d,_,A)}function Sa(i){return i=i.prototype,!(!i||!i.isReactComponent)}function sr(i,d){var _=i.alternate;return _===null?(_=$i(i.tag,d,i.key,i.mode),_.elementType=i.elementType,_.type=i.type,_.stateNode=i.stateNode,_.alternate=i,i.alternate=_):(_.pendingProps=d,_.type=i.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=i.flags&65011712,_.childLanes=i.childLanes,_.lanes=i.lanes,_.child=i.child,_.memoizedProps=i.memoizedProps,_.memoizedState=i.memoizedState,_.updateQueue=i.updateQueue,d=i.dependencies,_.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},_.sibling=i.sibling,_.index=i.index,_.ref=i.ref,_.refCleanup=i.refCleanup,_}function sc(i,d){i.flags&=65011714;var _=i.alternate;return _===null?(i.childLanes=0,i.lanes=d,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=_.childLanes,i.lanes=_.lanes,i.child=_.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=_.memoizedProps,i.memoizedState=_.memoizedState,i.updateQueue=_.updateQueue,i.type=_.type,d=_.dependencies,i.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),i}function Wa(i,d,_,A,V,Y){var ct=0;if(A=i,typeof i=="function")Sa(i)&&(ct=1);else if(typeof i=="string")ct=lt(i,_,it.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case W:return i=$i(31,_,d,V),i.elementType=W,i.lanes=Y,i;case x:return $r(_.children,V,Y,d);case y:ct=8,V|=24;break;case w:return i=$i(12,_,d,V|2),i.elementType=w,i.lanes=Y,i;case D:return i=$i(13,_,d,V),i.elementType=D,i.lanes=Y,i;case Z:return i=$i(19,_,d,V),i.elementType=Z,i.lanes=Y,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:ct=10;break t;case S:ct=9;break t;case I:ct=11;break t;case K:ct=14;break t;case z:ct=16,A=null;break t}ct=29,_=Error(s(130,i===null?"null":typeof i,"")),A=null}return d=$i(ct,_,d,V),d.elementType=i,d.type=A,d.lanes=Y,d}function $r(i,d,_,A){return i=$i(7,i,A,d),i.lanes=_,i}function oc(i,d,_){return i=$i(6,i,null,d),i.lanes=_,i}function Wu(i){var d=$i(18,null,null,0);return d.stateNode=i,d}function eh(i,d,_){return d=$i(4,i.children!==null?i.children:[],i.key,d),d.lanes=_,d.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},d}var b=new WeakMap;function N(i,d){if(typeof i=="object"&&i!==null){var _=b.get(i);return _!==void 0?_:(d={value:i,source:d,stack:Yt(d)},b.set(i,d),d)}return{value:i,source:d,stack:Yt(d)}}var $=[],nt=0,ft=null,At=0,oe=[],ce=0,Ne=null,Ue=1,on="";function On(i,d){$[nt++]=At,$[nt++]=ft,ft=i,At=d}function Hn(i,d,_){oe[ce++]=Ue,oe[ce++]=on,oe[ce++]=Ne,Ne=i;var A=Ue;i=on;var V=32-dn(A)-1;A&=~(1<<V),_+=1;var Y=32-dn(d)+V;if(30<Y){var ct=V-V%5;Y=(A&(1<<ct)-1).toString(32),A>>=ct,V-=ct,Ue=1<<32-dn(d)+V|_<<V|A,on=Y+i}else Ue=1<<Y|_<<V|A,on=i}function Wi(i){i.return!==null&&(On(i,1),Hn(i,1,0))}function Ti(i){for(;i===ft;)ft=$[--nt],$[nt]=null,At=$[--nt],$[nt]=null;for(;i===Ne;)Ne=oe[--ce],oe[ce]=null,on=oe[--ce],oe[ce]=null,Ue=oe[--ce],oe[ce]=null}function xs(i,d){oe[ce++]=Ue,oe[ce++]=on,oe[ce++]=Ne,Ue=d.id,on=d.overflow,Ne=i}var Mr=null,Tr=null,nr=!1,ta=null,Wr=!1,ac=Error(s(519));function us(i){var d=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Is(N(d,i)),ac}function ea(i){var d=i.stateNode,_=i.type,A=i.memoizedProps;switch(d[fn]=i,d[gn]=A,_){case"dialog":hn("cancel",d),hn("close",d);break;case"iframe":case"object":case"embed":hn("load",d);break;case"video":case"audio":for(_=0;_<ks.length;_++)hn(ks[_],d);break;case"source":hn("error",d);break;case"img":case"image":case"link":hn("error",d),hn("load",d);break;case"details":hn("toggle",d);break;case"input":hn("invalid",d),er(d,A.value,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name,!0);break;case"select":hn("invalid",d);break;case"textarea":hn("invalid",d),Or(d,A.value,A.defaultValue,A.children)}_=A.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||d.textContent===""+_||A.suppressHydrationWarning===!0||Jm(d.textContent,_)?(A.popover!=null&&(hn("beforetoggle",d),hn("toggle",d)),A.onScroll!=null&&hn("scroll",d),A.onScrollEnd!=null&&hn("scrollend",d),A.onClick!=null&&(d.onclick=Rr),d=!0):d=!1,d||us(i,!0)}function hi(i){for(Mr=i.return;Mr;)switch(Mr.tag){case 5:case 31:case 13:Wr=!1;return;case 27:case 3:Wr=!0;return;default:Mr=Mr.return}}function Xs(i){if(i!==Mr)return!1;if(!nr)return hi(i),nr=!0,!1;var d=i.tag,_;if((_=d!==3&&d!==27)&&((_=d===5)&&(_=i.type,_=!(_!=="form"&&_!=="button")||Vp(i.type,i.memoizedProps)),_=!_),_&&Tr&&us(i),hi(i),d===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Tr=a0(i)}else if(d===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));Tr=a0(i)}else d===27?(d=Tr,$l(i.type)?(i=Of,Of=null,Tr=i):Tr=d):Tr=Mr?ua(i.stateNode.nextSibling):null;return!0}function qa(){Tr=Mr=null,nr=!1}function yl(){var i=ta;return i!==null&&(Us===null?Us=i:Us.push.apply(Us,i),ta=null),i}function Is(i){ta===null?ta=[i]:ta.push(i)}var Ga=P(null),Ro=null,Ys=null;function na(i,d,_){et(Ga,d._currentValue),d._currentValue=_}function Za(i){i._currentValue=Ga.current,H(Ga)}function nd(i,d,_){for(;i!==null;){var A=i.alternate;if((i.childLanes&d)!==d?(i.childLanes|=d,A!==null&&(A.childLanes|=d)):A!==null&&(A.childLanes&d)!==d&&(A.childLanes|=d),i===_)break;i=i.return}}function Gc(i,d,_,A){var V=i.child;for(V!==null&&(V.return=i);V!==null;){var Y=V.dependencies;if(Y!==null){var ct=V.child;Y=Y.firstContext;t:for(;Y!==null;){var kt=Y;Y=V;for(var ee=0;ee<d.length;ee++)if(kt.context===d[ee]){Y.lanes|=_,kt=Y.alternate,kt!==null&&(kt.lanes|=_),nd(Y.return,_,i),A||(ct=null);break t}Y=kt.next}}else if(V.tag===18){if(ct=V.return,ct===null)throw Error(s(341));ct.lanes|=_,Y=ct.alternate,Y!==null&&(Y.lanes|=_),nd(ct,_,i),ct=null}else ct=V.child;if(ct!==null)ct.return=V;else for(ct=V;ct!==null;){if(ct===i){ct=null;break}if(V=ct.sibling,V!==null){V.return=ct.return,ct=V;break}ct=ct.return}V=ct}}function Zc(i,d,_,A){i=null;for(var V=d,Y=!1;V!==null;){if(!Y){if((V.flags&524288)!==0)Y=!0;else if((V.flags&262144)!==0)break}if(V.tag===10){var ct=V.alternate;if(ct===null)throw Error(s(387));if(ct=ct.memoizedProps,ct!==null){var kt=V.type;wi(V.pendingProps.value,ct.value)||(i!==null?i.push(kt):i=[kt])}}else if(V===ut.current){if(ct=V.alternate,ct===null)throw Error(s(387));ct.memoizedState.memoizedState!==V.memoizedState.memoizedState&&(i!==null?i.push(Rt):i=[Rt])}V=V.return}i!==null&&Gc(d,i,_,A),d.flags|=262144}function Xc(i){for(i=i.firstContext;i!==null;){if(!wi(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function vl(i){Ro=i,Ys=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Ni(i){return Io(Ro,i)}function qu(i,d){return Ro===null&&vl(i),Io(i,d)}function Io(i,d){var _=d._currentValue;if(d={context:d,memoizedValue:_,next:null},Ys===null){if(i===null)throw Error(s(308));Ys=d,i.dependencies={lanes:0,firstContext:d},i.flags|=524288}else Ys=Ys.next=d;return _}var Gu=typeof AbortController<"u"?AbortController:function(){var i=[],d=this.signal={aborted:!1,addEventListener:function(_,A){i.push(A)}};this.abort=function(){d.aborted=!0,i.forEach(function(_){return _()})}},rp=m.unstable_scheduleCallback,Yc=m.unstable_NormalPriority,Ai={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xl(){return{controller:new Gu,data:new Map,refCount:0}}function lc(i){i.refCount--,i.refCount===0&&rp(Yc,function(){i.controller.abort()})}var _l=null,Zu=0,Xu=0,wl=null;function qi(i,d){if(_l===null){var _=_l=[];Zu=0,Xu=Nf(),wl={status:"pending",value:void 0,then:function(A){_.push(A)}}}return Zu++,d.then(Sl,Sl),d}function Sl(){if(--Zu===0&&_l!==null){wl!==null&&(wl.status="fulfilled");var i=_l;_l=null,Xu=0,wl=null;for(var d=0;d<i.length;d++)(0,i[d])()}}function ip(i,d){var _=[],A={status:"pending",value:null,reason:null,then:function(V){_.push(V)}};return i.then(function(){A.status="fulfilled",A.value=d;for(var V=0;V<_.length;V++)(0,_[V])(d)},function(V){for(A.status="rejected",A.reason=V,V=0;V<_.length;V++)(0,_[V])(void 0)}),A}var cc=T.S;T.S=function(i,d){gu=me(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&qi(i,d),cc!==null&&cc(i,d)};var Xa=P(null);function Tl(){var i=Xa.current;return i!==null?i:Ur.pooledCache}function Cl(i,d){d===null?et(Xa,Xa.current):et(Xa,d.pool)}function kl(){var i=Tl();return i===null?null:{parent:Ai._currentValue,pool:i}}var Ml=Error(s(460)),Ya=Error(s(474)),Yu=Error(s(542)),Kc={then:function(){}};function sp(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Ku(i,d,_){switch(_=i[_],_===void 0?i.push(d):_!==d&&(d.then(Rr,Rr),d=_),d.status){case"fulfilled":return d.value;case"rejected":throw i=d.reason,El(i),i;default:if(typeof d.status=="string")d.then(Rr,Rr);else{if(i=Ur,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=d,i.status="pending",i.then(function(A){if(d.status==="pending"){var V=d;V.status="fulfilled",V.value=A}},function(A){if(d.status==="pending"){var V=d;V.status="rejected",V.reason=A}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw i=d.reason,El(i),i}throw _s=d,Ml}}function uc(i){try{var d=i._init;return d(i._payload)}catch(_){throw _!==null&&typeof _=="object"&&typeof _.then=="function"?(_s=_,Ml):_}}var _s=null;function Qu(){if(_s===null)throw Error(s(459));var i=_s;return _s=null,i}function El(i){if(i===Ml||i===Yu)throw Error(s(483))}var Ju=null,rd=0;function nh(i){var d=rd;return rd+=1,Ju===null&&(Ju=[]),Ku(Ju,i,d)}function Ka(i,d){d=d.props.ref,i.ref=d!==void 0?d:null}function rh(i,d){throw d.$$typeof===p?Error(s(525)):(i=Object.prototype.toString.call(d),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":i)))}function op(i){function d(xe,de){if(i){var Te=xe.deletions;Te===null?(xe.deletions=[de],xe.flags|=16):Te.push(de)}}function _(xe,de){if(!i)return null;for(;de!==null;)d(xe,de),de=de.sibling;return null}function A(xe){for(var de=new Map;xe!==null;)xe.key!==null?de.set(xe.key,xe):de.set(xe.index,xe),xe=xe.sibling;return de}function V(xe,de){return xe=sr(xe,de),xe.index=0,xe.sibling=null,xe}function Y(xe,de,Te){return xe.index=Te,i?(Te=xe.alternate,Te!==null?(Te=Te.index,Te<de?(xe.flags|=67108866,de):Te):(xe.flags|=67108866,de)):(xe.flags|=1048576,de)}function ct(xe){return i&&xe.alternate===null&&(xe.flags|=67108866),xe}function kt(xe,de,Te,ze){return de===null||de.tag!==6?(de=oc(Te,xe.mode,ze),de.return=xe,de):(de=V(de,Te),de.return=xe,de)}function ee(xe,de,Te,ze){var Pn=Te.type;return Pn===x?Re(xe,de,Te.props.children,ze,Te.key):de!==null&&(de.elementType===Pn||typeof Pn=="object"&&Pn!==null&&Pn.$$typeof===z&&uc(Pn)===de.type)?(de=V(de,Te.props),Ka(de,Te),de.return=xe,de):(de=Wa(Te.type,Te.key,Te.props,null,xe.mode,ze),Ka(de,Te),de.return=xe,de)}function pe(xe,de,Te,ze){return de===null||de.tag!==4||de.stateNode.containerInfo!==Te.containerInfo||de.stateNode.implementation!==Te.implementation?(de=eh(Te,xe.mode,ze),de.return=xe,de):(de=V(de,Te.children||[]),de.return=xe,de)}function Re(xe,de,Te,ze,Pn){return de===null||de.tag!==7?(de=$r(Te,xe.mode,ze,Pn),de.return=xe,de):(de=V(de,Te),de.return=xe,de)}function Ie(xe,de,Te){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return de=oc(""+de,xe.mode,Te),de.return=xe,de;if(typeof de=="object"&&de!==null){switch(de.$$typeof){case g:return Te=Wa(de.type,de.key,de.props,null,xe.mode,Te),Ka(Te,de),Te.return=xe,Te;case v:return de=eh(de,xe.mode,Te),de.return=xe,de;case z:return de=uc(de),Ie(xe,de,Te)}if(R(de)||tt(de))return de=$r(de,xe.mode,Te,null),de.return=xe,de;if(typeof de.then=="function")return Ie(xe,nh(de),Te);if(de.$$typeof===E)return Ie(xe,qu(xe,de),Te);rh(xe,de)}return null}function _e(xe,de,Te,ze){var Pn=de!==null?de.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Pn!==null?null:kt(xe,de,""+Te,ze);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:return Te.key===Pn?ee(xe,de,Te,ze):null;case v:return Te.key===Pn?pe(xe,de,Te,ze):null;case z:return Te=uc(Te),_e(xe,de,Te,ze)}if(R(Te)||tt(Te))return Pn!==null?null:Re(xe,de,Te,ze,null);if(typeof Te.then=="function")return _e(xe,de,nh(Te),ze);if(Te.$$typeof===E)return _e(xe,de,qu(xe,Te),ze);rh(xe,Te)}return null}function ke(xe,de,Te,ze,Pn){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return xe=xe.get(Te)||null,kt(de,xe,""+ze,Pn);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case g:return xe=xe.get(ze.key===null?Te:ze.key)||null,ee(de,xe,ze,Pn);case v:return xe=xe.get(ze.key===null?Te:ze.key)||null,pe(de,xe,ze,Pn);case z:return ze=uc(ze),ke(xe,de,Te,ze,Pn)}if(R(ze)||tt(ze))return xe=xe.get(Te)||null,Re(de,xe,ze,Pn,null);if(typeof ze.then=="function")return ke(xe,de,Te,nh(ze),Pn);if(ze.$$typeof===E)return ke(xe,de,Te,qu(de,ze),Pn);rh(de,ze)}return null}function mn(xe,de,Te,ze){for(var Pn=null,Er=null,Rn=de,Jn=de=0,fr=null;Rn!==null&&Jn<Te.length;Jn++){Rn.index>Jn?(fr=Rn,Rn=null):fr=Rn.sibling;var Dr=_e(xe,Rn,Te[Jn],ze);if(Dr===null){Rn===null&&(Rn=fr);break}i&&Rn&&Dr.alternate===null&&d(xe,Rn),de=Y(Dr,de,Jn),Er===null?Pn=Dr:Er.sibling=Dr,Er=Dr,Rn=fr}if(Jn===Te.length)return _(xe,Rn),nr&&On(xe,Jn),Pn;if(Rn===null){for(;Jn<Te.length;Jn++)Rn=Ie(xe,Te[Jn],ze),Rn!==null&&(de=Y(Rn,de,Jn),Er===null?Pn=Rn:Er.sibling=Rn,Er=Rn);return nr&&On(xe,Jn),Pn}for(Rn=A(Rn);Jn<Te.length;Jn++)fr=ke(Rn,xe,Jn,Te[Jn],ze),fr!==null&&(i&&fr.alternate!==null&&Rn.delete(fr.key===null?Jn:fr.key),de=Y(fr,de,Jn),Er===null?Pn=fr:Er.sibling=fr,Er=fr);return i&&Rn.forEach(function(Bf){return d(xe,Bf)}),nr&&On(xe,Jn),Pn}function _n(xe,de,Te,ze){if(Te==null)throw Error(s(151));for(var Pn=null,Er=null,Rn=de,Jn=de=0,fr=null,Dr=Te.next();Rn!==null&&!Dr.done;Jn++,Dr=Te.next()){Rn.index>Jn?(fr=Rn,Rn=null):fr=Rn.sibling;var Bf=_e(xe,Rn,Dr.value,ze);if(Bf===null){Rn===null&&(Rn=fr);break}i&&Rn&&Bf.alternate===null&&d(xe,Rn),de=Y(Bf,de,Jn),Er===null?Pn=Bf:Er.sibling=Bf,Er=Bf,Rn=fr}if(Dr.done)return _(xe,Rn),nr&&On(xe,Jn),Pn;if(Rn===null){for(;!Dr.done;Jn++,Dr=Te.next())Dr=Ie(xe,Dr.value,ze),Dr!==null&&(de=Y(Dr,de,Jn),Er===null?Pn=Dr:Er.sibling=Dr,Er=Dr);return nr&&On(xe,Jn),Pn}for(Rn=A(Rn);!Dr.done;Jn++,Dr=Te.next())Dr=ke(Rn,xe,Jn,Dr.value,ze),Dr!==null&&(i&&Dr.alternate!==null&&Rn.delete(Dr.key===null?Jn:Dr.key),de=Y(Dr,de,Jn),Er===null?Pn=Dr:Er.sibling=Dr,Er=Dr);return i&&Rn.forEach(function(Fv){return d(xe,Fv)}),nr&&On(xe,Jn),Pn}function or(xe,de,Te,ze){if(typeof Te=="object"&&Te!==null&&Te.type===x&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case g:t:{for(var Pn=Te.key;de!==null;){if(de.key===Pn){if(Pn=Te.type,Pn===x){if(de.tag===7){_(xe,de.sibling),ze=V(de,Te.props.children),ze.return=xe,xe=ze;break t}}else if(de.elementType===Pn||typeof Pn=="object"&&Pn!==null&&Pn.$$typeof===z&&uc(Pn)===de.type){_(xe,de.sibling),ze=V(de,Te.props),Ka(ze,Te),ze.return=xe,xe=ze;break t}_(xe,de);break}else d(xe,de);de=de.sibling}Te.type===x?(ze=$r(Te.props.children,xe.mode,ze,Te.key),ze.return=xe,xe=ze):(ze=Wa(Te.type,Te.key,Te.props,null,xe.mode,ze),Ka(ze,Te),ze.return=xe,xe=ze)}return ct(xe);case v:t:{for(Pn=Te.key;de!==null;){if(de.key===Pn)if(de.tag===4&&de.stateNode.containerInfo===Te.containerInfo&&de.stateNode.implementation===Te.implementation){_(xe,de.sibling),ze=V(de,Te.children||[]),ze.return=xe,xe=ze;break t}else{_(xe,de);break}else d(xe,de);de=de.sibling}ze=eh(Te,xe.mode,ze),ze.return=xe,xe=ze}return ct(xe);case z:return Te=uc(Te),or(xe,de,Te,ze)}if(R(Te))return mn(xe,de,Te,ze);if(tt(Te)){if(Pn=tt(Te),typeof Pn!="function")throw Error(s(150));return Te=Pn.call(Te),_n(xe,de,Te,ze)}if(typeof Te.then=="function")return or(xe,de,nh(Te),ze);if(Te.$$typeof===E)return or(xe,de,qu(xe,Te),ze);rh(xe,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint"?(Te=""+Te,de!==null&&de.tag===6?(_(xe,de.sibling),ze=V(de,Te),ze.return=xe,xe=ze):(_(xe,de),ze=oc(Te,xe.mode,ze),ze.return=xe,xe=ze),ct(xe)):_(xe,de)}return function(xe,de,Te,ze){try{rd=0;var Pn=or(xe,de,Te,ze);return Ju=null,Pn}catch(Rn){if(Rn===Ml||Rn===Yu)throw Rn;var Er=$i(29,Rn,null,xe.mode);return Er.lanes=ze,Er.return=xe,Er}finally{}}}var Nl=op(!0),Tm=op(!1),fc=!1;function ap(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lp(i,d){i=i.updateQueue,d.updateQueue===i&&(d.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ci(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Oo(i,d,_){var A=i.updateQueue;if(A===null)return null;if(A=A.shared,(cr&2)!==0){var V=A.pending;return V===null?d.next=d:(d.next=V.next,V.next=d),A.pending=d,d=Jo(i),bl(i,null,_),d}return $a(i,A,d,_),Jo(i)}function id(i,d,_){if(d=d.updateQueue,d!==null&&(d=d.shared,(_&4194048)!==0)){var A=d.lanes;A&=i.pendingLanes,_|=A,d.lanes=_,jn(i,_)}}function si(i,d){var _=i.updateQueue,A=i.alternate;if(A!==null&&(A=A.updateQueue,_===A)){var V=null,Y=null;if(_=_.firstBaseUpdate,_!==null){do{var ct={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};Y===null?V=Y=ct:Y=Y.next=ct,_=_.next}while(_!==null);Y===null?V=Y=d:Y=Y.next=d}else V=Y=d;_={baseState:A.baseState,firstBaseUpdate:V,lastBaseUpdate:Y,shared:A.shared,callbacks:A.callbacks},i.updateQueue=_;return}i=_.lastBaseUpdate,i===null?_.firstBaseUpdate=d:i.next=d,_.lastBaseUpdate=d}var dc=!1;function Al(){if(dc){var i=wl;if(i!==null)throw i}}function Rl(i,d,_,A){dc=!1;var V=i.updateQueue;fc=!1;var Y=V.firstBaseUpdate,ct=V.lastBaseUpdate,kt=V.shared.pending;if(kt!==null){V.shared.pending=null;var ee=kt,pe=ee.next;ee.next=null,ct===null?Y=pe:ct.next=pe,ct=ee;var Re=i.alternate;Re!==null&&(Re=Re.updateQueue,kt=Re.lastBaseUpdate,kt!==ct&&(kt===null?Re.firstBaseUpdate=pe:kt.next=pe,Re.lastBaseUpdate=ee))}if(Y!==null){var Ie=V.baseState;ct=0,Re=pe=ee=null,kt=Y;do{var _e=kt.lane&-536870913,ke=_e!==kt.lane;if(ke?(ur&_e)===_e:(A&_e)===_e){_e!==0&&_e===Xu&&(dc=!0),Re!==null&&(Re=Re.next={lane:0,tag:kt.tag,payload:kt.payload,callback:null,next:null});t:{var mn=i,_n=kt;_e=d;var or=_;switch(_n.tag){case 1:if(mn=_n.payload,typeof mn=="function"){Ie=mn.call(or,Ie,_e);break t}Ie=mn;break t;case 3:mn.flags=mn.flags&-65537|128;case 0:if(mn=_n.payload,_e=typeof mn=="function"?mn.call(or,Ie,_e):mn,_e==null)break t;Ie=h({},Ie,_e);break t;case 2:fc=!0}}_e=kt.callback,_e!==null&&(i.flags|=64,ke&&(i.flags|=8192),ke=V.callbacks,ke===null?V.callbacks=[_e]:ke.push(_e))}else ke={lane:_e,tag:kt.tag,payload:kt.payload,callback:kt.callback,next:null},Re===null?(pe=Re=ke,ee=Ie):Re=Re.next=ke,ct|=_e;if(kt=kt.next,kt===null){if(kt=V.shared.pending,kt===null)break;ke=kt,kt=ke.next,ke.next=null,V.lastBaseUpdate=ke,V.shared.pending=null}}while(!0);Re===null&&(ee=Ie),V.baseState=ee,V.firstBaseUpdate=pe,V.lastBaseUpdate=Re,Y===null&&(V.shared.lanes=0),Mc|=ct,i.lanes=ct,i.memoizedState=Ie}}function cp(i,d){if(typeof i!="function")throw Error(s(191,i));i.call(d)}function sd(i,d){var _=i.callbacks;if(_!==null)for(i.callbacks=null,i=0;i<_.length;i++)cp(_[i],d)}var Ta=P(null),hc=P(0);function tf(i,d){i=Fs,et(hc,i),et(Ta,d),Fs=i|d.baseLanes}function ih(){et(hc,Fs),et(Ta,Ta.current)}function ef(){Fs=hc.current,H(Ta),H(hc)}var fs=P(null),Os=null;function jo(i){var d=i.alternate;et(ui,ui.current&1),et(fs,i),Os===null&&(d===null||Ta.current!==null||d.memoizedState!==null)&&(Os=i)}function sh(i){et(ui,ui.current),et(fs,i),Os===null&&(Os=i)}function od(i){i.tag===22?(et(ui,ui.current),et(fs,i),Os===null&&(Os=i)):fo()}function fo(){et(ui,ui.current),et(fs,fs.current)}function ra(i){H(fs),Os===i&&(Os=null),H(ui)}var ui=P(0);function Qa(i){for(var d=i;d!==null;){if(d.tag===13){var _=d.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||ei(_)||If(_)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break;for(;d.sibling===null;){if(d.return===null||d.return===i)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var pc=0,Yn=null,Pr=null,qr=null,nf=!1,Ca=!1,mc=!1,ad=0,ld=0,Qc=null,gc=0;function Yr(){throw Error(s(321))}function ka(i,d){if(d===null)return!1;for(var _=0;_<d.length&&_<i.length;_++)if(!wi(i[_],d[_]))return!1;return!0}function Il(i,d,_,A,V,Y){return pc=Y,Yn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,T.H=i===null||i.memoizedState===null?mh:ff,mc=!1,Y=_(A,V),mc=!1,Ca&&(Y=Ol(d,_,A,V)),up(i),Y}function up(i){T.H=su;var d=Pr!==null&&Pr.next!==null;if(pc=0,qr=Pr=Yn=null,nf=!1,ld=0,Qc=null,d)throw Error(s(300));i===null||Mi||(i=i.dependencies,i!==null&&Xc(i)&&(Mi=!0))}function Ol(i,d,_,A){Yn=i;var V=0;do{if(Ca&&(Qc=null),ld=0,Ca=!1,25<=V)throw Error(s(301));if(V+=1,qr=Pr=null,i.updateQueue!=null){var Y=i.updateQueue;Y.lastEffect=null,Y.events=null,Y.stores=null,Y.memoCache!=null&&(Y.memoCache.index=0)}T.H=gh,Y=d(_,A)}while(Ca);return Y}function Cm(){var i=T.H,d=i.useState()[0];return d=typeof d.then=="function"?Jc(d):d,i=i.useState()[0],(Pr!==null?Pr.memoizedState:null)!==i&&(Yn.flags|=1024),d}function Ja(){var i=ad!==0;return ad=0,i}function rf(i,d,_){d.updateQueue=i.updateQueue,d.flags&=-2053,i.lanes&=~_}function Ma(i){if(nf){for(i=i.memoizedState;i!==null;){var d=i.queue;d!==null&&(d.pending=null),i=i.next}nf=!1}pc=0,qr=Pr=Yn=null,Ca=!1,ld=ad=0,Qc=null}function js(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?Yn.memoizedState=qr=i:qr=qr.next=i,qr}function zr(){if(Pr===null){var i=Yn.alternate;i=i!==null?i.memoizedState:null}else i=Pr.next;var d=qr===null?Yn.memoizedState:qr.next;if(d!==null)qr=d,Pr=i;else{if(i===null)throw Yn.alternate===null?Error(s(467)):Error(s(310));Pr=i,i={memoizedState:Pr.memoizedState,baseState:Pr.baseState,baseQueue:Pr.baseQueue,queue:Pr.queue,next:null},qr===null?Yn.memoizedState=qr=i:qr=qr.next=i}return qr}function cd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jc(i){var d=ld;return ld+=1,Qc===null&&(Qc=[]),i=Ku(Qc,i,d),d=Yn,(qr===null?d.memoizedState:qr.next)===null&&(d=d.alternate,T.H=d===null||d.memoizedState===null?mh:ff),i}function jl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Jc(i);if(i.$$typeof===E)return Ni(i)}throw Error(s(438,String(i)))}function sf(i){var d=null,_=Yn.updateQueue;if(_!==null&&(d=_.memoCache),d==null){var A=Yn.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(d={data:A.data.map(function(V){return V.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),_===null&&(_=cd(),Yn.updateQueue=_),_.memoCache=d,_=d.data[d.index],_===void 0)for(_=d.data[d.index]=Array(i),A=0;A<i;A++)_[A]=Q;return d.index++,_}function Ks(i,d){return typeof d=="function"?d(i):d}function fp(i){var d=zr();return of(d,Pr,i)}function of(i,d,_){var A=i.queue;if(A===null)throw Error(s(311));A.lastRenderedReducer=_;var V=i.baseQueue,Y=A.pending;if(Y!==null){if(V!==null){var ct=V.next;V.next=Y.next,Y.next=ct}d.baseQueue=V=Y,A.pending=null}if(Y=i.baseState,V===null)i.memoizedState=Y;else{d=V.next;var kt=ct=null,ee=null,pe=d,Re=!1;do{var Ie=pe.lane&-536870913;if(Ie!==pe.lane?(ur&Ie)===Ie:(pc&Ie)===Ie){var _e=pe.revertLane;if(_e===0)ee!==null&&(ee=ee.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Ie===Xu&&(Re=!0);else if((pc&_e)===_e){pe=pe.next,_e===Xu&&(Re=!0);continue}else Ie={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},ee===null?(kt=ee=Ie,ct=Y):ee=ee.next=Ie,Yn.lanes|=_e,Mc|=_e;Ie=pe.action,mc&&_(Y,Ie),Y=pe.hasEagerState?pe.eagerState:_(Y,Ie)}else _e={lane:Ie,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},ee===null?(kt=ee=_e,ct=Y):ee=ee.next=_e,Yn.lanes|=Ie,Mc|=Ie;pe=pe.next}while(pe!==null&&pe!==d);if(ee===null?ct=Y:ee.next=kt,!wi(Y,i.memoizedState)&&(Mi=!0,Re&&(_=wl,_!==null)))throw _;i.memoizedState=Y,i.baseState=ct,i.baseQueue=ee,A.lastRenderedState=Y}return V===null&&(A.lanes=0),[i.memoizedState,A.dispatch]}function ki(i){var d=zr(),_=d.queue;if(_===null)throw Error(s(311));_.lastRenderedReducer=i;var A=_.dispatch,V=_.pending,Y=d.memoizedState;if(V!==null){_.pending=null;var ct=V=V.next;do Y=i(Y,ct.action),ct=ct.next;while(ct!==V);wi(Y,d.memoizedState)||(Mi=!0),d.memoizedState=Y,d.baseQueue===null&&(d.baseState=Y),_.lastRenderedState=Y}return[Y,A]}function Lo(i,d,_){var A=Yn,V=zr(),Y=nr;if(Y){if(_===void 0)throw Error(s(407));_=_()}else _=d();var ct=!wi((Pr||V).memoizedState,_);if(ct&&(V.memoizedState=_,Mi=!0),V=V.queue,bp(oh.bind(null,A,V,i),[i]),V.getSnapshot!==d||ct||qr!==null&&qr.memoizedState.tag&1){if(A.flags|=2048,eu(9,{destroy:void 0},Ll.bind(null,A,V,_,d),null),Ur===null)throw Error(s(349));Y||(pc&127)!==0||tu(A,d,_)}return _}function tu(i,d,_){i.flags|=16384,i={getSnapshot:d,value:_},d=Yn.updateQueue,d===null?(d=cd(),Yn.updateQueue=d,d.stores=[i]):(_=d.stores,_===null?d.stores=[i]:_.push(i))}function Ll(i,d,_,A){d.value=_,d.getSnapshot=A,dp(d)&&hp(i)}function oh(i,d,_){return _(function(){dp(d)&&hp(i)})}function dp(i){var d=i.getSnapshot;i=i.value;try{var _=d();return!wi(i,_)}catch{return!0}}function hp(i){var d=uo(i,2);d!==null&&ts(d,i,2)}function ah(i){var d=js();if(typeof i=="function"){var _=i;if(i=_(),mc){Ke(!0);try{_()}finally{Ke(!1)}}}return d.memoizedState=d.baseState=i,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:i},d}function lh(i,d,_,A){return i.baseState=_,of(i,Pr,typeof A=="function"?A:Ks)}function pp(i,d,_,A,V){if(vc(i))throw Error(s(485));if(i=d.action,i!==null){var Y={payload:V,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ct){Y.listeners.push(ct)}};T.T!==null?_(!0):Y.isTransition=!1,A(Y),_=d.pending,_===null?(Y.next=d.pending=Y,ch(d,Y)):(Y.next=_.next,d.pending=_.next=Y)}}function ch(i,d){var _=d.action,A=d.payload,V=i.state;if(d.isTransition){var Y=T.T,ct={};T.T=ct;try{var kt=_(V,A),ee=T.S;ee!==null&&ee(ct,kt),uh(i,d,kt)}catch(pe){Pl(i,d,pe)}finally{Y!==null&&ct.types!==null&&(Y.types=ct.types),T.T=Y}}else try{Y=_(V,A),uh(i,d,Y)}catch(pe){Pl(i,d,pe)}}function uh(i,d,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(A){fh(i,d,A)},function(A){return Pl(i,d,A)}):fh(i,d,_)}function fh(i,d,_){d.status="fulfilled",d.value=_,mp(d),i.state=_,d=i.pending,d!==null&&(_=d.next,_===d?i.pending=null:(_=_.next,d.next=_,ch(i,_)))}function Pl(i,d,_){var A=i.pending;if(i.pending=null,A!==null){A=A.next;do d.status="rejected",d.reason=_,mp(d),d=d.next;while(d!==A)}i.action=null}function mp(i){i=i.listeners;for(var d=0;d<i.length;d++)(0,i[d])()}function bc(i,d){return d}function Ir(i,d){if(nr){var _=Ur.formState;if(_!==null){t:{var A=Yn;if(nr){if(Tr){e:{for(var V=Tr,Y=Wr;V.nodeType!==8;){if(!Y){V=null;break e}if(V=ua(V.nextSibling),V===null){V=null;break e}}Y=V.data,V=Y==="F!"||Y==="F"?V:null}if(V){Tr=ua(V.nextSibling),A=V.data==="F!";break t}}us(A)}A=!1}A&&(d=_[0])}}return _=js(),_.memoizedState=_.baseState=d,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:d},_.queue=A,_=gd.bind(null,Yn,A),A.dispatch=_,A=ah(!1),Y=zo.bind(null,Yn,!1,A.queue),A=js(),V={state:d,dispatch:null,action:i,pending:null},A.queue=V,_=pp.bind(null,Yn,V,Y,_),V.dispatch=_,A.memoizedState=i,[d,_,!1]}function ud(i){var d=zr();return ws(d,Pr,i)}function ws(i,d,_){if(d=of(i,d,bc)[0],i=fp(Ks)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var A=Jc(d)}catch(ct){throw ct===Ml?Yu:ct}else A=d;d=zr();var V=d.queue,Y=V.dispatch;return _!==d.memoizedState&&(Yn.flags|=2048,eu(9,{destroy:void 0},gp.bind(null,V,_),null)),[A,Y,i]}function gp(i,d){i.action=d}function fd(i){var d=zr(),_=Pr;if(_!==null)return ws(d,_,i);zr(),d=d.memoizedState,_=zr();var A=_.queue.dispatch;return _.memoizedState=i,[d,A,!1]}function eu(i,d,_,A){return i={tag:i,create:_,deps:A,inst:d,next:null},d=Yn.updateQueue,d===null&&(d=cd(),Yn.updateQueue=d),_=d.lastEffect,_===null?d.lastEffect=i.next=i:(A=_.next,_.next=i,i.next=A,d.lastEffect=i),i}function dd(){return zr().memoizedState}function Qs(i,d,_,A){var V=js();Yn.flags|=i,V.memoizedState=eu(1|d,{destroy:void 0},_,A===void 0?null:A)}function Po(i,d,_,A){var V=zr();A=A===void 0?null:A;var Y=V.memoizedState.inst;Pr!==null&&A!==null&&ka(A,Pr.memoizedState.deps)?V.memoizedState=eu(d,Y,_,A):(Yn.flags|=i,V.memoizedState=eu(1|d,Y,_,A))}function af(i,d){Qs(8390656,8,i,d)}function bp(i,d){Po(2048,8,i,d)}function ng(i){Yn.flags|=4;var d=Yn.updateQueue;if(d===null)d=cd(),Yn.updateQueue=d,d.events=[i];else{var _=d.events;_===null?d.events=[i]:_.push(i)}}function dh(i){var d=zr().memoizedState;return ng({ref:d,nextImpl:i}),function(){if((cr&2)!==0)throw Error(s(440));return d.impl.apply(void 0,arguments)}}function yc(i,d){return Po(4,2,i,d)}function hd(i,d){return Po(4,4,i,d)}function lf(i,d){if(typeof d=="function"){i=i();var _=d(i);return function(){typeof _=="function"?_():d(null)}}if(d!=null)return i=i(),d.current=i,function(){d.current=null}}function rg(i,d,_){_=_!=null?_.concat([i]):null,Po(4,4,lf.bind(null,d,i),_)}function pd(){}function Do(i,d){var _=zr();d=d===void 0?null:d;var A=_.memoizedState;return d!==null&&ka(d,A[1])?A[0]:(_.memoizedState=[i,d],i)}function Bo(i,d){var _=zr();d=d===void 0?null:d;var A=_.memoizedState;if(d!==null&&ka(d,A[1]))return A[0];if(A=i(),mc){Ke(!0);try{i()}finally{Ke(!1)}}return _.memoizedState=[A,d],A}function nu(i,d,_){return _===void 0||(pc&1073741824)!==0&&(ur&261930)===0?i.memoizedState=d:(i.memoizedState=_,i=Rp(),Yn.lanes|=i,Mc|=i,_)}function hh(i,d,_,A){return wi(_,d)?_:Ta.current!==null?(i=nu(i,_,A),wi(i,d)||(Mi=!0),i):(pc&42)===0||(pc&1073741824)!==0&&(ur&261930)===0?(Mi=!0,i.memoizedState=_):(i=Rp(),Yn.lanes|=i,Mc|=i,d)}function ru(i,d,_,A,V){var Y=C.p;C.p=Y!==0&&8>Y?Y:8;var ct=T.T,kt={};T.T=kt,zo(i,!1,d,_);try{var ee=V(),pe=T.S;if(pe!==null&&pe(kt,ee),ee!==null&&typeof ee=="object"&&typeof ee.then=="function"){var Re=ip(ee,A);Js(i,d,Re,ho(i))}else Js(i,d,A,ho(i))}catch(Ie){Js(i,d,{then:function(){},status:"rejected",reason:Ie},ho())}finally{C.p=Y,ct!==null&&kt.types!==null&&(ct.types=kt.types),T.T=ct}}function km(){}function yp(i,d,_,A){if(i.tag!==5)throw Error(s(476));var V=md(i).queue;ru(i,V,d,k,_===null?km:function(){return ph(i),_(A)})}function md(i){var d=i.memoizedState;if(d!==null)return d;d={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:k},next:null};var _={};return d.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:_},next:null},i.memoizedState=d,i=i.alternate,i!==null&&(i.memoizedState=d),d}function ph(i){var d=md(i);d.next===null&&(d=i.alternate.memoizedState),Js(i,d.next.queue,{},ho())}function Dl(){return Ni(Rt)}function cf(){return zr().memoizedState}function uf(){return zr().memoizedState}function vb(i){for(var d=i.return;d!==null;){switch(d.tag){case 24:case 3:var _=ho();i=Ci(_);var A=Oo(d,i,_);A!==null&&(ts(A,d,_),id(A,d,_)),d={cache:xl()},i.payload=d;return}d=d.return}}function vp(i,d,_){var A=ho();_={lane:A,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null},vc(i)?iu(d,_):(_=$u(i,d,_,A),_!==null&&(ts(_,i,A),ig(_,d,A)))}function gd(i,d,_){var A=ho();Js(i,d,_,A)}function Js(i,d,_,A){var V={lane:A,revertLane:0,gesture:null,action:_,hasEagerState:!1,eagerState:null,next:null};if(vc(i))iu(d,V);else{var Y=i.alternate;if(i.lanes===0&&(Y===null||Y.lanes===0)&&(Y=d.lastRenderedReducer,Y!==null))try{var ct=d.lastRenderedState,kt=Y(ct,_);if(V.hasEagerState=!0,V.eagerState=kt,wi(kt,ct))return $a(i,d,V,0),Ur===null&&Ao(),!1}catch{}finally{}if(_=$u(i,d,V,A),_!==null)return ts(_,i,A),ig(_,d,A),!0}return!1}function zo(i,d,_,A){if(A={lane:2,revertLane:Nf(),gesture:null,action:A,hasEagerState:!1,eagerState:null,next:null},vc(i)){if(d)throw Error(s(479))}else d=$u(i,_,A,2),d!==null&&ts(d,i,2)}function vc(i){var d=i.alternate;return i===Yn||d!==null&&d===Yn}function iu(i,d){Ca=nf=!0;var _=i.pending;_===null?d.next=d:(d.next=_.next,_.next=d),i.pending=d}function ig(i,d,_){if((_&4194048)!==0){var A=d.lanes;A&=i.pendingLanes,_|=A,d.lanes=_,jn(i,_)}}var su={readContext:Ni,use:jl,useCallback:Yr,useContext:Yr,useEffect:Yr,useImperativeHandle:Yr,useLayoutEffect:Yr,useInsertionEffect:Yr,useMemo:Yr,useReducer:Yr,useRef:Yr,useState:Yr,useDebugValue:Yr,useDeferredValue:Yr,useTransition:Yr,useSyncExternalStore:Yr,useId:Yr,useHostTransitionStatus:Yr,useFormState:Yr,useActionState:Yr,useOptimistic:Yr,useMemoCache:Yr,useCacheRefresh:Yr};su.useEffectEvent=Yr;var mh={readContext:Ni,use:jl,useCallback:function(i,d){return js().memoizedState=[i,d===void 0?null:d],i},useContext:Ni,useEffect:af,useImperativeHandle:function(i,d,_){_=_!=null?_.concat([i]):null,Qs(4194308,4,lf.bind(null,d,i),_)},useLayoutEffect:function(i,d){return Qs(4194308,4,i,d)},useInsertionEffect:function(i,d){Qs(4,2,i,d)},useMemo:function(i,d){var _=js();d=d===void 0?null:d;var A=i();if(mc){Ke(!0);try{i()}finally{Ke(!1)}}return _.memoizedState=[A,d],A},useReducer:function(i,d,_){var A=js();if(_!==void 0){var V=_(d);if(mc){Ke(!0);try{_(d)}finally{Ke(!1)}}}else V=d;return A.memoizedState=A.baseState=V,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:V},A.queue=i,i=i.dispatch=vp.bind(null,Yn,i),[A.memoizedState,i]},useRef:function(i){var d=js();return i={current:i},d.memoizedState=i},useState:function(i){i=ah(i);var d=i.queue,_=gd.bind(null,Yn,d);return d.dispatch=_,[i.memoizedState,_]},useDebugValue:pd,useDeferredValue:function(i,d){var _=js();return nu(_,i,d)},useTransition:function(){var i=ah(!1);return i=ru.bind(null,Yn,i.queue,!0,!1),js().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,d,_){var A=Yn,V=js();if(nr){if(_===void 0)throw Error(s(407));_=_()}else{if(_=d(),Ur===null)throw Error(s(349));(ur&127)!==0||tu(A,d,_)}V.memoizedState=_;var Y={value:_,getSnapshot:d};return V.queue=Y,af(oh.bind(null,A,Y,i),[i]),A.flags|=2048,eu(9,{destroy:void 0},Ll.bind(null,A,Y,_,d),null),_},useId:function(){var i=js(),d=Ur.identifierPrefix;if(nr){var _=on,A=Ue;_=(A&~(1<<32-dn(A)-1)).toString(32)+_,d="_"+d+"R_"+_,_=ad++,0<_&&(d+="H"+_.toString(32)),d+="_"}else _=gc++,d="_"+d+"r_"+_.toString(32)+"_";return i.memoizedState=d},useHostTransitionStatus:Dl,useFormState:Ir,useActionState:Ir,useOptimistic:function(i){var d=js();d.memoizedState=d.baseState=i;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=_,d=zo.bind(null,Yn,!0,_),_.dispatch=d,[i,d]},useMemoCache:sf,useCacheRefresh:function(){return js().memoizedState=vb.bind(null,Yn)},useEffectEvent:function(i){var d=js(),_={impl:i};return d.memoizedState=_,function(){if((cr&2)!==0)throw Error(s(440));return _.impl.apply(void 0,arguments)}}},ff={readContext:Ni,use:jl,useCallback:Do,useContext:Ni,useEffect:bp,useImperativeHandle:rg,useInsertionEffect:yc,useLayoutEffect:hd,useMemo:Bo,useReducer:fp,useRef:dd,useState:function(){return fp(Ks)},useDebugValue:pd,useDeferredValue:function(i,d){var _=zr();return hh(_,Pr.memoizedState,i,d)},useTransition:function(){var i=fp(Ks)[0],d=zr().memoizedState;return[typeof i=="boolean"?i:Jc(i),d]},useSyncExternalStore:Lo,useId:cf,useHostTransitionStatus:Dl,useFormState:ud,useActionState:ud,useOptimistic:function(i,d){var _=zr();return lh(_,Pr,i,d)},useMemoCache:sf,useCacheRefresh:uf};ff.useEffectEvent=dh;var gh={readContext:Ni,use:jl,useCallback:Do,useContext:Ni,useEffect:bp,useImperativeHandle:rg,useInsertionEffect:yc,useLayoutEffect:hd,useMemo:Bo,useReducer:ki,useRef:dd,useState:function(){return ki(Ks)},useDebugValue:pd,useDeferredValue:function(i,d){var _=zr();return Pr===null?nu(_,i,d):hh(_,Pr.memoizedState,i,d)},useTransition:function(){var i=ki(Ks)[0],d=zr().memoizedState;return[typeof i=="boolean"?i:Jc(i),d]},useSyncExternalStore:Lo,useId:cf,useHostTransitionStatus:Dl,useFormState:fd,useActionState:fd,useOptimistic:function(i,d){var _=zr();return Pr!==null?lh(_,Pr,i,d):(_.baseState=i,[i,_.queue.dispatch])},useMemoCache:sf,useCacheRefresh:uf};gh.useEffectEvent=dh;function Bl(i,d,_,A){d=i.memoizedState,_=_(A,d),_=_==null?d:h({},d,_),i.memoizedState=_,i.lanes===0&&(i.updateQueue.baseState=_)}var ou={enqueueSetState:function(i,d,_){i=i._reactInternals;var A=ho(),V=Ci(A);V.payload=d,_!=null&&(V.callback=_),d=Oo(i,V,A),d!==null&&(ts(d,i,A),id(d,i,A))},enqueueReplaceState:function(i,d,_){i=i._reactInternals;var A=ho(),V=Ci(A);V.tag=1,V.payload=d,_!=null&&(V.callback=_),d=Oo(i,V,A),d!==null&&(ts(d,i,A),id(d,i,A))},enqueueForceUpdate:function(i,d){i=i._reactInternals;var _=ho(),A=Ci(_);A.tag=2,d!=null&&(A.callback=d),d=Oo(i,A,_),d!==null&&(ts(d,i,_),id(d,i,_))}};function df(i,d,_,A,V,Y,ct){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(A,Y,ct):d.prototype&&d.prototype.isPureReactComponent?!Xo(_,A)||!Xo(V,Y):!0}function sg(i,d,_,A){i=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(_,A),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(_,A),d.state!==i&&ou.enqueueReplaceState(d,d.state,null)}function zl(i,d){var _=d;if("ref"in d){_={};for(var A in d)A!=="ref"&&(_[A]=d[A])}if(i=i.defaultProps){_===d&&(_=h({},_));for(var V in i)_[V]===void 0&&(_[V]=i[V])}return _}function bd(i){Qo(i)}function yd(i){console.error(i)}function ia(i){Qo(i)}function Fo(i,d){try{var _=i.onUncaughtError;_(d.value,{componentStack:d.stack})}catch(A){setTimeout(function(){throw A})}}function hf(i,d,_){try{var A=i.onCaughtError;A(_.value,{componentStack:_.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(V){setTimeout(function(){throw V})}}function xc(i,d,_){return _=Ci(_),_.tag=3,_.payload={element:null},_.callback=function(){Fo(i,d)},_}function Uo(i){return i=Ci(i),i.tag=3,i}function vd(i,d,_,A){var V=_.type.getDerivedStateFromError;if(typeof V=="function"){var Y=A.value;i.payload=function(){return V(Y)},i.callback=function(){hf(d,_,A)}}var ct=_.stateNode;ct!==null&&typeof ct.componentDidCatch=="function"&&(i.callback=function(){hf(d,_,A),typeof V!="function"&&(Wo===null?Wo=new Set([this]):Wo.add(this));var kt=A.stack;this.componentDidCatch(A.value,{componentStack:kt!==null?kt:""})})}function pf(i,d,_,A,V){if(_.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(d=_.alternate,d!==null&&Zc(d,_,V,!0),_=fs.current,_!==null){switch(_.tag){case 31:case 13:return Os===null?Rd():_.alternate===null&&pi===0&&(pi=3),_.flags&=-257,_.flags|=65536,_.lanes=V,A===Kc?_.flags|=16384:(d=_.updateQueue,d===null?_.updateQueue=new Set([A]):d.add(A),Ah(i,A,V)),!1;case 22:return _.flags|=65536,A===Kc?_.flags|=16384:(d=_.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([A])},_.updateQueue=d):(_=d.retryQueue,_===null?d.retryQueue=new Set([A]):_.add(A)),Ah(i,A,V)),!1}throw Error(s(435,_.tag))}return Ah(i,A,V),Rd(),!1}if(nr)return d=fs.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=V,A!==ac&&(i=Error(s(422),{cause:A}),Is(N(i,_)))):(A!==ac&&(d=Error(s(423),{cause:A}),Is(N(d,_))),i=i.current.alternate,i.flags|=65536,V&=-V,i.lanes|=V,A=N(A,_),V=xc(i.stateNode,A,V),si(i,V),pi!==4&&(pi=2)),!1;var Y=Error(s(520),{cause:A});if(Y=N(Y,_),rl===null?rl=[Y]:rl.push(Y),pi!==4&&(pi=2),d===null)return!0;A=N(A,_),_=d;do{switch(_.tag){case 3:return _.flags|=65536,i=V&-V,_.lanes|=i,i=xc(_.stateNode,A,i),si(_,i),!1;case 1:if(d=_.type,Y=_.stateNode,(_.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Wo===null||!Wo.has(Y))))return _.flags|=65536,V&=-V,_.lanes|=V,V=Uo(V),vd(V,i,_,A),si(_,V),!1}_=_.return}while(_!==null);return!1}var xd=Error(s(461)),Mi=!1;function Ss(i,d,_,A){d.child=i===null?Tm(d,null,_,A):Nl(d,i.child,_,A)}function xp(i,d,_,A,V){_=_.render;var Y=d.ref;if("ref"in A){var ct={};for(var kt in A)kt!=="ref"&&(ct[kt]=A[kt])}else ct=A;return vl(d),A=Il(i,d,_,ct,Y,V),kt=Ja(),i!==null&&!Mi?(rf(i,d,V),sa(i,d,V)):(nr&&kt&&Wi(d),d.flags|=1,Ss(i,d,A,V),d.child)}function bh(i,d,_,A,V){if(i===null){var Y=_.type;return typeof Y=="function"&&!Sa(Y)&&Y.defaultProps===void 0&&_.compare===null?(d.tag=15,d.type=Y,yh(i,d,Y,A,V)):(i=Wa(_.type,null,A,d,d.mode,V),i.ref=d.ref,i.return=d,d.child=i)}if(Y=i.child,!Td(i,V)){var ct=Y.memoizedProps;if(_=_.compare,_=_!==null?_:Xo,_(ct,A)&&i.ref===d.ref)return sa(i,d,V)}return d.flags|=1,i=sr(Y,A),i.ref=d.ref,i.return=d,d.child=i}function yh(i,d,_,A,V){if(i!==null){var Y=i.memoizedProps;if(Xo(Y,A)&&i.ref===d.ref)if(Mi=!1,d.pendingProps=A=Y,Td(i,V))(i.flags&131072)!==0&&(Mi=!0);else return d.lanes=i.lanes,sa(i,d,V)}return wd(i,d,_,A,V)}function vh(i,d,_,A){var V=A.children,Y=i!==null?i.memoizedState:null;if(i===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),A.mode==="hidden"){if((d.flags&128)!==0){if(Y=Y!==null?Y.baseLanes|_:_,i!==null){for(A=d.child=i.child,V=0;A!==null;)V=V|A.lanes|A.childLanes,A=A.sibling;A=V&~Y}else A=0,d.child=null;return mf(i,d,Y,_,A)}if((_&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},i!==null&&Cl(d,Y!==null?Y.cachePool:null),Y!==null?tf(d,Y):ih(),od(d);else return A=d.lanes=536870912,mf(i,d,Y!==null?Y.baseLanes|_:_,_,A)}else Y!==null?(Cl(d,Y.cachePool),tf(d,Y),fo(),d.memoizedState=null):(i!==null&&Cl(d,null),ih(),fo());return Ss(i,d,V,_),d.child}function Ea(i,d){return i!==null&&i.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function mf(i,d,_,A,V){var Y=Tl();return Y=Y===null?null:{parent:Ai._currentValue,pool:Y},d.memoizedState={baseLanes:_,cachePool:Y},i!==null&&Cl(d,null),ih(),od(d),i!==null&&Zc(i,d,A,!0),d.childLanes=V,null}function _c(i,d){return d=Sd({mode:d.mode,children:d.children},i.mode),d.ref=i.ref,i.child=d,d.return=i,d}function og(i,d,_){return Nl(d,i.child,null,_),i=_c(d,d.pendingProps),i.flags|=2,ra(d),d.memoizedState=null,i}function _p(i,d,_){var A=d.pendingProps,V=(d.flags&128)!==0;if(d.flags&=-129,i===null){if(nr){if(A.mode==="hidden")return i=_c(d,A),d.lanes=536870912,Ea(null,i);if(sh(d),(i=Tr)?(i=ri(i,Wr),i=i!==null&&i.data==="&"?i:null,i!==null&&(d.memoizedState={dehydrated:i,treeContext:Ne!==null?{id:Ue,overflow:on}:null,retryLane:536870912,hydrationErrors:null},_=Wu(i),_.return=d,d.child=_,Mr=d,Tr=null)):i=null,i===null)throw us(d);return d.lanes=536870912,null}return _c(d,A)}var Y=i.memoizedState;if(Y!==null){var ct=Y.dehydrated;if(sh(d),V)if(d.flags&256)d.flags&=-257,d=og(i,d,_);else if(d.memoizedState!==null)d.child=i.child,d.flags|=128,d=null;else throw Error(s(558));else if(Mi||Zc(i,d,_,!1),V=(_&i.childLanes)!==0,Mi||V){if(A=Ur,A!==null&&(ct=ue(A,_),ct!==0&&ct!==Y.retryLane))throw Y.retryLane=ct,uo(i,ct),ts(A,i,ct),xd;Rd(),d=og(i,d,_)}else i=Y.treeContext,Tr=ua(ct.nextSibling),Mr=d,nr=!0,ta=null,Wr=!1,i!==null&&xs(d,i),d=_c(d,A),d.flags|=4096;return d}return i=sr(i.child,{mode:A.mode,children:A.children}),i.ref=d.ref,d.child=i,i.return=d,i}function _d(i,d){var _=d.ref;if(_===null)i!==null&&i.ref!==null&&(d.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(s(284));(i===null||i.ref!==_)&&(d.flags|=4194816)}}function wd(i,d,_,A,V){return vl(d),_=Il(i,d,_,A,void 0,V),A=Ja(),i!==null&&!Mi?(rf(i,d,V),sa(i,d,V)):(nr&&A&&Wi(d),d.flags|=1,Ss(i,d,_,V),d.child)}function wp(i,d,_,A,V,Y){return vl(d),d.updateQueue=null,_=Ol(d,A,_,V),up(i),A=Ja(),i!==null&&!Mi?(rf(i,d,Y),sa(i,d,Y)):(nr&&A&&Wi(d),d.flags|=1,Ss(i,d,_,Y),d.child)}function Mm(i,d,_,A,V){if(vl(d),d.stateNode===null){var Y=Vi,ct=_.contextType;typeof ct=="object"&&ct!==null&&(Y=Ni(ct)),Y=new _(A,Y),d.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Y.updater=ou,d.stateNode=Y,Y._reactInternals=d,Y=d.stateNode,Y.props=A,Y.state=d.memoizedState,Y.refs={},ap(d),ct=_.contextType,Y.context=typeof ct=="object"&&ct!==null?Ni(ct):Vi,Y.state=d.memoizedState,ct=_.getDerivedStateFromProps,typeof ct=="function"&&(Bl(d,_,ct,A),Y.state=d.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(ct=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),ct!==Y.state&&ou.enqueueReplaceState(Y,Y.state,null),Rl(d,A,Y,V),Al(),Y.state=d.memoizedState),typeof Y.componentDidMount=="function"&&(d.flags|=4194308),A=!0}else if(i===null){Y=d.stateNode;var kt=d.memoizedProps,ee=zl(_,kt);Y.props=ee;var pe=Y.context,Re=_.contextType;ct=Vi,typeof Re=="object"&&Re!==null&&(ct=Ni(Re));var Ie=_.getDerivedStateFromProps;Re=typeof Ie=="function"||typeof Y.getSnapshotBeforeUpdate=="function",kt=d.pendingProps!==kt,Re||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(kt||pe!==ct)&&sg(d,Y,A,ct),fc=!1;var _e=d.memoizedState;Y.state=_e,Rl(d,A,Y,V),Al(),pe=d.memoizedState,kt||_e!==pe||fc?(typeof Ie=="function"&&(Bl(d,_,Ie,A),pe=d.memoizedState),(ee=fc||df(d,_,ee,A,_e,pe,ct))?(Re||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(d.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=A,d.memoizedState=pe),Y.props=A,Y.state=pe,Y.context=ct,A=ee):(typeof Y.componentDidMount=="function"&&(d.flags|=4194308),A=!1)}else{Y=d.stateNode,lp(i,d),ct=d.memoizedProps,Re=zl(_,ct),Y.props=Re,Ie=d.pendingProps,_e=Y.context,pe=_.contextType,ee=Vi,typeof pe=="object"&&pe!==null&&(ee=Ni(pe)),kt=_.getDerivedStateFromProps,(pe=typeof kt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ct!==Ie||_e!==ee)&&sg(d,Y,A,ee),fc=!1,_e=d.memoizedState,Y.state=_e,Rl(d,A,Y,V),Al();var ke=d.memoizedState;ct!==Ie||_e!==ke||fc||i!==null&&i.dependencies!==null&&Xc(i.dependencies)?(typeof kt=="function"&&(Bl(d,_,kt,A),ke=d.memoizedState),(Re=fc||df(d,_,Re,A,_e,ke,ee)||i!==null&&i.dependencies!==null&&Xc(i.dependencies))?(pe||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(A,ke,ee),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(A,ke,ee)),typeof Y.componentDidUpdate=="function"&&(d.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ct===i.memoizedProps&&_e===i.memoizedState||(d.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ct===i.memoizedProps&&_e===i.memoizedState||(d.flags|=1024),d.memoizedProps=A,d.memoizedState=ke),Y.props=A,Y.state=ke,Y.context=ee,A=Re):(typeof Y.componentDidUpdate!="function"||ct===i.memoizedProps&&_e===i.memoizedState||(d.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ct===i.memoizedProps&&_e===i.memoizedState||(d.flags|=1024),A=!1)}return Y=A,_d(i,d),A=(d.flags&128)!==0,Y||A?(Y=d.stateNode,_=A&&typeof _.getDerivedStateFromError!="function"?null:Y.render(),d.flags|=1,i!==null&&A?(d.child=Nl(d,i.child,null,V),d.child=Nl(d,null,_,V)):Ss(i,d,_,V),d.memoizedState=Y.state,i=d.child):i=sa(i,d,V),i}function xh(i,d,_,A){return qa(),d.flags|=256,Ss(i,d,_,A),d.child}var Ri={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ji(i){return{baseLanes:i,cachePool:kl()}}function Em(i,d,_){return i=i!==null?i.childLanes&~_:0,d&&(i|=Ei),i}function wc(i,d,_){var A=d.pendingProps,V=!1,Y=(d.flags&128)!==0,ct;if((ct=Y)||(ct=i!==null&&i.memoizedState===null?!1:(ui.current&2)!==0),ct&&(V=!0,d.flags&=-129),ct=(d.flags&32)!==0,d.flags&=-33,i===null){if(nr){if(V?jo(d):fo(),(i=Tr)?(i=ri(i,Wr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(d.memoizedState={dehydrated:i,treeContext:Ne!==null?{id:Ue,overflow:on}:null,retryLane:536870912,hydrationErrors:null},_=Wu(i),_.return=d,d.child=_,Mr=d,Tr=null)):i=null,i===null)throw us(d);return If(i)?d.lanes=32:d.lanes=536870912,null}var kt=A.children;return A=A.fallback,V?(fo(),V=d.mode,kt=Sd({mode:"hidden",children:kt},V),A=$r(A,V,_,null),kt.return=d,A.return=d,kt.sibling=A,d.child=kt,A=d.child,A.memoizedState=ji(_),A.childLanes=Em(i,ct,_),d.memoizedState=Ri,Ea(null,A)):(jo(d),Sp(d,kt))}var ee=i.memoizedState;if(ee!==null&&(kt=ee.dehydrated,kt!==null)){if(Y)d.flags&256?(jo(d),d.flags&=-257,d=_h(i,d,_)):d.memoizedState!==null?(fo(),d.child=i.child,d.flags|=128,d=null):(fo(),kt=A.fallback,V=d.mode,A=Sd({mode:"visible",children:A.children},V),kt=$r(kt,V,_,null),kt.flags|=2,A.return=d,kt.return=d,A.sibling=kt,d.child=A,Nl(d,i.child,null,_),A=d.child,A.memoizedState=ji(_),A.childLanes=Em(i,ct,_),d.memoizedState=Ri,d=Ea(null,A));else if(jo(d),If(kt)){if(ct=kt.nextSibling&&kt.nextSibling.dataset,ct)var pe=ct.dgst;ct=pe,A=Error(s(419)),A.stack="",A.digest=ct,Is({value:A,source:null,stack:null}),d=_h(i,d,_)}else if(Mi||Zc(i,d,_,!1),ct=(_&i.childLanes)!==0,Mi||ct){if(ct=Ur,ct!==null&&(A=ue(ct,_),A!==0&&A!==ee.retryLane))throw ee.retryLane=A,uo(i,A),ts(ct,i,A),xd;ei(kt)||Rd(),d=_h(i,d,_)}else ei(kt)?(d.flags|=192,d.child=i.child,d=null):(i=ee.treeContext,Tr=ua(kt.nextSibling),Mr=d,nr=!0,ta=null,Wr=!1,i!==null&&xs(d,i),d=Sp(d,A.children),d.flags|=4096);return d}return V?(fo(),kt=A.fallback,V=d.mode,ee=i.child,pe=ee.sibling,A=sr(ee,{mode:"hidden",children:A.children}),A.subtreeFlags=ee.subtreeFlags&65011712,pe!==null?kt=sr(pe,kt):(kt=$r(kt,V,_,null),kt.flags|=2),kt.return=d,A.return=d,A.sibling=kt,d.child=A,Ea(null,A),A=d.child,kt=i.child.memoizedState,kt===null?kt=ji(_):(V=kt.cachePool,V!==null?(ee=Ai._currentValue,V=V.parent!==ee?{parent:ee,pool:ee}:V):V=kl(),kt={baseLanes:kt.baseLanes|_,cachePool:V}),A.memoizedState=kt,A.childLanes=Em(i,ct,_),d.memoizedState=Ri,Ea(i.child,A)):(jo(d),_=i.child,i=_.sibling,_=sr(_,{mode:"visible",children:A.children}),_.return=d,_.sibling=null,i!==null&&(ct=d.deletions,ct===null?(d.deletions=[i],d.flags|=16):ct.push(i)),d.child=_,d.memoizedState=null,_)}function Sp(i,d){return d=Sd({mode:"visible",children:d},i.mode),d.return=i,i.child=d}function Sd(i,d){return i=$i(22,i,null,d),i.lanes=0,i}function _h(i,d,_){return Nl(d,i.child,null,_),i=Sp(d,d.pendingProps.children),i.flags|=2,d.memoizedState=null,i}function wh(i,d,_){i.lanes|=d;var A=i.alternate;A!==null&&(A.lanes|=d),nd(i.return,d,_)}function au(i,d,_,A,V,Y){var ct=i.memoizedState;ct===null?i.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:A,tail:_,tailMode:V,treeForkCount:Y}:(ct.isBackwards=d,ct.rendering=null,ct.renderingStartTime=0,ct.last=A,ct.tail=_,ct.tailMode=V,ct.treeForkCount=Y)}function Sh(i,d,_){var A=d.pendingProps,V=A.revealOrder,Y=A.tail;A=A.children;var ct=ui.current,kt=(ct&2)!==0;if(kt?(ct=ct&1|2,d.flags|=128):ct&=1,et(ui,ct),Ss(i,d,A,_),A=nr?At:0,!kt&&i!==null&&(i.flags&128)!==0)t:for(i=d.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wh(i,_,d);else if(i.tag===19)wh(i,_,d);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===d)break t;for(;i.sibling===null;){if(i.return===null||i.return===d)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(V){case"forwards":for(_=d.child,V=null;_!==null;)i=_.alternate,i!==null&&Qa(i)===null&&(V=_),_=_.sibling;_=V,_===null?(V=d.child,d.child=null):(V=_.sibling,_.sibling=null),au(d,!1,V,_,Y,A);break;case"backwards":case"unstable_legacy-backwards":for(_=null,V=d.child,d.child=null;V!==null;){if(i=V.alternate,i!==null&&Qa(i)===null){d.child=V;break}i=V.sibling,V.sibling=_,_=V,V=i}au(d,!0,_,null,Y,A);break;case"together":au(d,!1,null,null,void 0,A);break;default:d.memoizedState=null}return d.child}function sa(i,d,_){if(i!==null&&(d.dependencies=i.dependencies),Mc|=d.lanes,(_&d.childLanes)===0)if(i!==null){if(Zc(i,d,_,!1),(_&d.childLanes)===0)return null}else return null;if(i!==null&&d.child!==i.child)throw Error(s(153));if(d.child!==null){for(i=d.child,_=sr(i,i.pendingProps),d.child=_,_.return=d;i.sibling!==null;)i=i.sibling,_=_.sibling=sr(i,i.pendingProps),_.return=d;_.sibling=null}return d.child}function Td(i,d){return(i.lanes&d)!==0?!0:(i=i.dependencies,!!(i!==null&&Xc(i)))}function Th(i,d,_){switch(d.tag){case 3:G(d,d.stateNode.containerInfo),na(d,Ai,i.memoizedState.cache),qa();break;case 27:case 5:st(d);break;case 4:G(d,d.stateNode.containerInfo);break;case 10:na(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,sh(d),null;break;case 13:var A=d.memoizedState;if(A!==null)return A.dehydrated!==null?(jo(d),d.flags|=128,null):(_&d.child.childLanes)!==0?wc(i,d,_):(jo(d),i=sa(i,d,_),i!==null?i.sibling:null);jo(d);break;case 19:var V=(i.flags&128)!==0;if(A=(_&d.childLanes)!==0,A||(Zc(i,d,_,!1),A=(_&d.childLanes)!==0),V){if(A)return Sh(i,d,_);d.flags|=128}if(V=d.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),et(ui,ui.current),A)break;return null;case 22:return d.lanes=0,vh(i,d,_,d.pendingProps);case 24:na(d,Ai,i.memoizedState.cache)}return sa(i,d,_)}function Na(i,d,_){if(i!==null)if(i.memoizedProps!==d.pendingProps)Mi=!0;else{if(!Td(i,_)&&(d.flags&128)===0)return Mi=!1,Th(i,d,_);Mi=(i.flags&131072)!==0}else Mi=!1,nr&&(d.flags&1048576)!==0&&Hn(d,At,d.index);switch(d.lanes=0,d.tag){case 16:t:{var A=d.pendingProps;if(i=uc(d.elementType),d.type=i,typeof i=="function")Sa(i)?(A=zl(i,A),d.tag=1,d=Mm(null,d,i,A,_)):(d.tag=0,d=wd(null,d,i,A,_));else{if(i!=null){var V=i.$$typeof;if(V===I){d.tag=11,d=xp(null,d,i,A,_);break t}else if(V===K){d.tag=14,d=bh(null,d,i,A,_);break t}}throw d=F(i)||i,Error(s(306,d,""))}}return d;case 0:return wd(i,d,d.type,d.pendingProps,_);case 1:return A=d.type,V=zl(A,d.pendingProps),Mm(i,d,A,V,_);case 3:t:{if(G(d,d.stateNode.containerInfo),i===null)throw Error(s(387));A=d.pendingProps;var Y=d.memoizedState;V=Y.element,lp(i,d),Rl(d,A,null,_);var ct=d.memoizedState;if(A=ct.cache,na(d,Ai,A),A!==Y.cache&&Gc(d,[Ai],_,!0),Al(),A=ct.element,Y.isDehydrated)if(Y={element:A,isDehydrated:!1,cache:ct.cache},d.updateQueue.baseState=Y,d.memoizedState=Y,d.flags&256){d=xh(i,d,A,_);break t}else if(A!==V){V=N(Error(s(424)),d),Is(V),d=xh(i,d,A,_);break t}else{switch(i=d.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Tr=ua(i.firstChild),Mr=d,nr=!0,ta=null,Wr=!0,_=Tm(d,null,A,_),d.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(qa(),A===V){d=sa(i,d,_);break t}Ss(i,d,A,_)}d=d.child}return d;case 26:return _d(i,d),i===null?(_=zd(d.type,null,d.pendingProps,null))?d.memoizedState=_:nr||(_=d.type,i=d.pendingProps,A=Bh(X.current).createElement(_),A[fn]=d,A[gn]=i,ti(A,_,i),De(A),d.stateNode=A):d.memoizedState=zd(d.type,i.memoizedProps,d.pendingProps,i.memoizedState),null;case 27:return st(d),i===null&&nr&&(A=d.stateNode=qp(d.type,d.pendingProps,X.current),Mr=d,Wr=!0,V=Tr,$l(d.type)?(Of=V,Tr=ua(A.firstChild)):Tr=V),Ss(i,d,d.pendingProps.children,_),_d(i,d),i===null&&(d.flags|=4194304),d.child;case 5:return i===null&&nr&&((V=A=Tr)&&(A=xr(A,d.type,d.pendingProps,Wr),A!==null?(d.stateNode=A,Mr=d,Tr=ua(A.firstChild),Wr=!1,V=!0):V=!1),V||us(d)),st(d),V=d.type,Y=d.pendingProps,ct=i!==null?i.memoizedProps:null,A=Y.children,Vp(V,Y)?A=null:ct!==null&&Vp(V,ct)&&(d.flags|=32),d.memoizedState!==null&&(V=Il(i,d,Cm,null,null,_),Rt._currentValue=V),_d(i,d),Ss(i,d,A,_),d.child;case 6:return i===null&&nr&&((i=_=Tr)&&(_=_r(_,d.pendingProps,Wr),_!==null?(d.stateNode=_,Mr=d,Tr=null,i=!0):i=!1),i||us(d)),null;case 13:return wc(i,d,_);case 4:return G(d,d.stateNode.containerInfo),A=d.pendingProps,i===null?d.child=Nl(d,null,A,_):Ss(i,d,A,_),d.child;case 11:return xp(i,d,d.type,d.pendingProps,_);case 7:return Ss(i,d,d.pendingProps,_),d.child;case 8:return Ss(i,d,d.pendingProps.children,_),d.child;case 12:return Ss(i,d,d.pendingProps.children,_),d.child;case 10:return A=d.pendingProps,na(d,d.type,A.value),Ss(i,d,A.children,_),d.child;case 9:return V=d.type._context,A=d.pendingProps.children,vl(d),V=Ni(V),A=A(V),d.flags|=1,Ss(i,d,A,_),d.child;case 14:return bh(i,d,d.type,d.pendingProps,_);case 15:return yh(i,d,d.type,d.pendingProps,_);case 19:return Sh(i,d,_);case 31:return _p(i,d,_);case 22:return vh(i,d,_,d.pendingProps);case 24:return vl(d),A=Ni(Ai),i===null?(V=Tl(),V===null&&(V=Ur,Y=xl(),V.pooledCache=Y,Y.refCount++,Y!==null&&(V.pooledCacheLanes|=_),V=Y),d.memoizedState={parent:A,cache:V},ap(d),na(d,Ai,V)):((i.lanes&_)!==0&&(lp(i,d),Rl(d,null,null,_),Al()),V=i.memoizedState,Y=d.memoizedState,V.parent!==A?(V={parent:A,cache:A},d.memoizedState=V,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=V),na(d,Ai,A)):(A=Y.cache,na(d,Ai,A),A!==V.cache&&Gc(d,[Ai],_,!0))),Ss(i,d,d.pendingProps.children,_),d.child;case 29:throw d.pendingProps}throw Error(s(156,d.tag))}function Ts(i){i.flags|=4}function gf(i,d,_,A,V){if((d=(i.mode&32)!==0)&&(d=!1),d){if(i.flags|=16777216,(V&335544128)===V)if(i.stateNode.complete)i.flags|=8192;else if(Lm())i.flags|=8192;else throw _s=Kc,Ya}else i.flags&=-16777217}function Cd(i,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!dt(d))if(Lm())i.flags|=8192;else throw _s=Kc,Ya}function bf(i,d){d!==null&&(i.flags|=4),i.flags&16384&&(d=i.tag!==22?ir():536870912,i.lanes|=d,no|=d)}function lu(i,d){if(!nr)switch(i.tailMode){case"hidden":d=i.tail;for(var _=null;d!==null;)d.alternate!==null&&(_=d),d=d.sibling;_===null?i.tail=null:_.sibling=null;break;case"collapsed":_=i.tail;for(var A=null;_!==null;)_.alternate!==null&&(A=_),_=_.sibling;A===null?d||i.tail===null?i.tail=null:i.tail.sibling=null:A.sibling=null}}function Kr(i){var d=i.alternate!==null&&i.alternate.child===i.child,_=0,A=0;if(d)for(var V=i.child;V!==null;)_|=V.lanes|V.childLanes,A|=V.subtreeFlags&65011712,A|=V.flags&65011712,V.return=i,V=V.sibling;else for(V=i.child;V!==null;)_|=V.lanes|V.childLanes,A|=V.subtreeFlags,A|=V.flags,V.return=i,V=V.sibling;return i.subtreeFlags|=A,i.childLanes=_,d}function yf(i,d,_){var A=d.pendingProps;switch(Ti(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(d),null;case 1:return Kr(d),null;case 3:return _=d.stateNode,A=null,i!==null&&(A=i.memoizedState.cache),d.memoizedState.cache!==A&&(d.flags|=2048),Za(Ai),U(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(i===null||i.child===null)&&(Xs(d)?Ts(d):i===null||i.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,yl())),Kr(d),null;case 26:var V=d.type,Y=d.memoizedState;return i===null?(Ts(d),Y!==null?(Kr(d),Cd(d,Y)):(Kr(d),gf(d,V,null,A,_))):Y?Y!==i.memoizedState?(Ts(d),Kr(d),Cd(d,Y)):(Kr(d),d.flags&=-16777217):(i=i.memoizedProps,i!==A&&Ts(d),Kr(d),gf(d,V,i,A,_)),null;case 27:if(gt(d),_=X.current,V=d.type,i!==null&&d.stateNode!=null)i.memoizedProps!==A&&Ts(d);else{if(!A){if(d.stateNode===null)throw Error(s(166));return Kr(d),null}i=it.current,Xs(d)?ea(d):(i=qp(V,A,_),d.stateNode=i,Ts(d))}return Kr(d),null;case 5:if(gt(d),V=d.type,i!==null&&d.stateNode!=null)i.memoizedProps!==A&&Ts(d);else{if(!A){if(d.stateNode===null)throw Error(s(166));return Kr(d),null}if(Y=it.current,Xs(d))ea(d);else{var ct=Bh(X.current);switch(Y){case 1:Y=ct.createElementNS("http://www.w3.org/2000/svg",V);break;case 2:Y=ct.createElementNS("http://www.w3.org/1998/Math/MathML",V);break;default:switch(V){case"svg":Y=ct.createElementNS("http://www.w3.org/2000/svg",V);break;case"math":Y=ct.createElementNS("http://www.w3.org/1998/Math/MathML",V);break;case"script":Y=ct.createElement("div"),Y.innerHTML="<script><\/script>",Y=Y.removeChild(Y.firstChild);break;case"select":Y=typeof A.is=="string"?ct.createElement("select",{is:A.is}):ct.createElement("select"),A.multiple?Y.multiple=!0:A.size&&(Y.size=A.size);break;default:Y=typeof A.is=="string"?ct.createElement(V,{is:A.is}):ct.createElement(V)}}Y[fn]=d,Y[gn]=A;t:for(ct=d.child;ct!==null;){if(ct.tag===5||ct.tag===6)Y.appendChild(ct.stateNode);else if(ct.tag!==4&&ct.tag!==27&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===d)break t;for(;ct.sibling===null;){if(ct.return===null||ct.return===d)break t;ct=ct.return}ct.sibling.return=ct.return,ct=ct.sibling}d.stateNode=Y;t:switch(ti(Y,V,A),V){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break t;case"img":A=!0;break t;default:A=!1}A&&Ts(d)}}return Kr(d),gf(d,d.type,i===null?null:i.memoizedProps,d.pendingProps,_),null;case 6:if(i&&d.stateNode!=null)i.memoizedProps!==A&&Ts(d);else{if(typeof A!="string"&&d.stateNode===null)throw Error(s(166));if(i=X.current,Xs(d)){if(i=d.stateNode,_=d.memoizedProps,A=null,V=Mr,V!==null)switch(V.tag){case 27:case 5:A=V.memoizedProps}i[fn]=d,i=!!(i.nodeValue===_||A!==null&&A.suppressHydrationWarning===!0||Jm(i.nodeValue,_)),i||us(d,!0)}else i=Bh(i).createTextNode(A),i[fn]=d,d.stateNode=i}return Kr(d),null;case 31:if(_=d.memoizedState,i===null||i.memoizedState!==null){if(A=Xs(d),_!==null){if(i===null){if(!A)throw Error(s(318));if(i=d.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[fn]=d}else qa(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Kr(d),i=!1}else _=yl(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=_),i=!0;if(!i)return d.flags&256?(ra(d),d):(ra(d),null);if((d.flags&128)!==0)throw Error(s(558))}return Kr(d),null;case 13:if(A=d.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(V=Xs(d),A!==null&&A.dehydrated!==null){if(i===null){if(!V)throw Error(s(318));if(V=d.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(s(317));V[fn]=d}else qa(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Kr(d),V=!1}else V=yl(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=V),V=!0;if(!V)return d.flags&256?(ra(d),d):(ra(d),null)}return ra(d),(d.flags&128)!==0?(d.lanes=_,d):(_=A!==null,i=i!==null&&i.memoizedState!==null,_&&(A=d.child,V=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(V=A.alternate.memoizedState.cachePool.pool),Y=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(Y=A.memoizedState.cachePool.pool),Y!==V&&(A.flags|=2048)),_!==i&&_&&(d.child.flags|=8192),bf(d,d.updateQueue),Kr(d),null);case 4:return U(),i===null&&Rf(d.stateNode.containerInfo),Kr(d),null;case 10:return Za(d.type),Kr(d),null;case 19:if(H(ui),A=d.memoizedState,A===null)return Kr(d),null;if(V=(d.flags&128)!==0,Y=A.rendering,Y===null)if(V)lu(A,!1);else{if(pi!==0||i!==null&&(i.flags&128)!==0)for(i=d.child;i!==null;){if(Y=Qa(i),Y!==null){for(d.flags|=128,lu(A,!1),i=Y.updateQueue,d.updateQueue=i,bf(d,i),d.subtreeFlags=0,i=_,_=d.child;_!==null;)sc(_,i),_=_.sibling;return et(ui,ui.current&1|2),nr&&On(d,A.treeForkCount),d.child}i=i.sibling}A.tail!==null&&me()>Jr&&(d.flags|=128,V=!0,lu(A,!1),d.lanes=4194304)}else{if(!V)if(i=Qa(Y),i!==null){if(d.flags|=128,V=!0,i=i.updateQueue,d.updateQueue=i,bf(d,i),lu(A,!0),A.tail===null&&A.tailMode==="hidden"&&!Y.alternate&&!nr)return Kr(d),null}else 2*me()-A.renderingStartTime>Jr&&_!==536870912&&(d.flags|=128,V=!0,lu(A,!1),d.lanes=4194304);A.isBackwards?(Y.sibling=d.child,d.child=Y):(i=A.last,i!==null?i.sibling=Y:d.child=Y,A.last=Y)}return A.tail!==null?(i=A.tail,A.rendering=i,A.tail=i.sibling,A.renderingStartTime=me(),i.sibling=null,_=ui.current,et(ui,V?_&1|2:_&1),nr&&On(d,A.treeForkCount),i):(Kr(d),null);case 22:case 23:return ra(d),ef(),A=d.memoizedState!==null,i!==null?i.memoizedState!==null!==A&&(d.flags|=8192):A&&(d.flags|=8192),A?(_&536870912)!==0&&(d.flags&128)===0&&(Kr(d),d.subtreeFlags&6&&(d.flags|=8192)):Kr(d),_=d.updateQueue,_!==null&&bf(d,_.retryQueue),_=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(_=i.memoizedState.cachePool.pool),A=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(A=d.memoizedState.cachePool.pool),A!==_&&(d.flags|=2048),i!==null&&H(Xa),null;case 24:return _=null,i!==null&&(_=i.memoizedState.cache),d.memoizedState.cache!==_&&(d.flags|=2048),Za(Ai),Kr(d),null;case 25:return null;case 30:return null}throw Error(s(156,d.tag))}function Ch(i,d){switch(Ti(d),d.tag){case 1:return i=d.flags,i&65536?(d.flags=i&-65537|128,d):null;case 3:return Za(Ai),U(),i=d.flags,(i&65536)!==0&&(i&128)===0?(d.flags=i&-65537|128,d):null;case 26:case 27:case 5:return gt(d),null;case 31:if(d.memoizedState!==null){if(ra(d),d.alternate===null)throw Error(s(340));qa()}return i=d.flags,i&65536?(d.flags=i&-65537|128,d):null;case 13:if(ra(d),i=d.memoizedState,i!==null&&i.dehydrated!==null){if(d.alternate===null)throw Error(s(340));qa()}return i=d.flags,i&65536?(d.flags=i&-65537|128,d):null;case 19:return H(ui),null;case 4:return U(),null;case 10:return Za(d.type),null;case 22:case 23:return ra(d),ef(),i!==null&&H(Xa),i=d.flags,i&65536?(d.flags=i&-65537|128,d):null;case 24:return Za(Ai),null;case 25:return null;default:return null}}function cu(i,d){switch(Ti(d),d.tag){case 3:Za(Ai),U();break;case 26:case 27:case 5:gt(d);break;case 4:U();break;case 31:d.memoizedState!==null&&ra(d);break;case 13:ra(d);break;case 19:H(ui);break;case 10:Za(d.type);break;case 22:case 23:ra(d),ef(),i!==null&&H(Xa);break;case 24:Za(Ai)}}function Sc(i,d){try{var _=d.updateQueue,A=_!==null?_.lastEffect:null;if(A!==null){var V=A.next;_=V;do{if((_.tag&i)===i){A=void 0;var Y=_.create,ct=_.inst;A=Y(),ct.destroy=A}_=_.next}while(_!==V)}}catch(kt){Hr(d,d.return,kt)}}function to(i,d,_){try{var A=d.updateQueue,V=A!==null?A.lastEffect:null;if(V!==null){var Y=V.next;A=Y;do{if((A.tag&i)===i){var ct=A.inst,kt=ct.destroy;if(kt!==void 0){ct.destroy=void 0,V=d;var ee=_,pe=kt;try{pe()}catch(Re){Hr(V,ee,Re)}}}A=A.next}while(A!==Y)}}catch(Re){Hr(d,d.return,Re)}}function Tc(i){var d=i.updateQueue;if(d!==null){var _=i.stateNode;try{sd(d,_)}catch(A){Hr(i,i.return,A)}}}function vf(i,d,_){_.props=zl(i.type,i.memoizedProps),_.state=i.memoizedState;try{_.componentWillUnmount()}catch(A){Hr(i,d,A)}}function kd(i,d){try{var _=i.ref;if(_!==null){switch(i.tag){case 26:case 27:case 5:var A=i.stateNode;break;case 30:A=i.stateNode;break;default:A=i.stateNode}typeof _=="function"?i.refCleanup=_(A):_.current=A}}catch(V){Hr(i,d,V)}}function Ls(i,d){var _=i.ref,A=i.refCleanup;if(_!==null)if(typeof A=="function")try{A()}catch(V){Hr(i,d,V)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(V){Hr(i,d,V)}else _.current=null}function Tp(i){var d=i.type,_=i.memoizedProps,A=i.stateNode;try{t:switch(d){case"button":case"input":case"select":case"textarea":_.autoFocus&&A.focus();break t;case"img":_.src?A.src=_.src:_.srcSet&&(A.srcset=_.srcSet)}}catch(V){Hr(i,i.return,V)}}function uu(i,d,_){try{var A=i.stateNode;Ra(A,i.type,_,d),A[gn]=d}catch(V){Hr(i,i.return,V)}}function xf(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&$l(i.type)||i.tag===4}function Li(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||xf(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&$l(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Gi(i,d,_){var A=i.tag;if(A===5||A===6)i=i.stateNode,d?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(i,d):(d=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,d.appendChild(i),_=_._reactRootContainer,_!=null||d.onclick!==null||(d.onclick=Rr));else if(A!==4&&(A===27&&$l(i.type)&&(_=i.stateNode,d=null),i=i.child,i!==null))for(Gi(i,d,_),i=i.sibling;i!==null;)Gi(i,d,_),i=i.sibling}function ds(i,d,_){var A=i.tag;if(A===5||A===6)i=i.stateNode,d?_.insertBefore(i,d):_.appendChild(i);else if(A!==4&&(A===27&&$l(i.type)&&(_=i.stateNode),i=i.child,i!==null))for(ds(i,d,_),i=i.sibling;i!==null;)ds(i,d,_),i=i.sibling}function Zi(i){var d=i.stateNode,_=i.memoizedProps;try{for(var A=i.type,V=d.attributes;V.length;)d.removeAttributeNode(V[0]);ti(d,A,_),d[fn]=i,d[gn]=_}catch(Y){Hr(i,i.return,Y)}}var Ps=!1,Fr=!1,Nm=!1,Cp=typeof WeakSet=="function"?WeakSet:Set,Pi=null;function kh(i,d){if(i=i.containerInfo,Dh=Et,i=qc(i),_a(i)){if("selectionStart"in i)var _={start:i.selectionStart,end:i.selectionEnd};else t:{_=(_=i.ownerDocument)&&_.defaultView||window;var A=_.getSelection&&_.getSelection();if(A&&A.rangeCount!==0){_=A.anchorNode;var V=A.anchorOffset,Y=A.focusNode;A=A.focusOffset;try{_.nodeType,Y.nodeType}catch{_=null;break t}var ct=0,kt=-1,ee=-1,pe=0,Re=0,Ie=i,_e=null;e:for(;;){for(var ke;Ie!==_||V!==0&&Ie.nodeType!==3||(kt=ct+V),Ie!==Y||A!==0&&Ie.nodeType!==3||(ee=ct+A),Ie.nodeType===3&&(ct+=Ie.nodeValue.length),(ke=Ie.firstChild)!==null;)_e=Ie,Ie=ke;for(;;){if(Ie===i)break e;if(_e===_&&++pe===V&&(kt=ct),_e===Y&&++Re===A&&(ee=ct),(ke=Ie.nextSibling)!==null)break;Ie=_e,_e=Ie.parentNode}Ie=ke}_=kt===-1||ee===-1?null:{start:kt,end:ee}}else _=null}_=_||{start:0,end:0}}else _=null;for(Tu={focusedElem:i,selectionRange:_},Et=!1,Pi=d;Pi!==null;)if(d=Pi,i=d.child,(d.subtreeFlags&1028)!==0&&i!==null)i.return=d,Pi=i;else for(;Pi!==null;){switch(d=Pi,Y=d.alternate,i=d.flags,d.tag){case 0:if((i&4)!==0&&(i=d.updateQueue,i=i!==null?i.events:null,i!==null))for(_=0;_<i.length;_++)V=i[_],V.ref.impl=V.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&Y!==null){i=void 0,_=d,V=Y.memoizedProps,Y=Y.memoizedState,A=_.stateNode;try{var mn=zl(_.type,V);i=A.getSnapshotBeforeUpdate(mn,Y),A.__reactInternalSnapshotBeforeUpdate=i}catch(_n){Hr(_,_.return,_n)}}break;case 3:if((i&1024)!==0){if(i=d.stateNode.containerInfo,_=i.nodeType,_===9)Fh(i);else if(_===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Fh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=d.sibling,i!==null){i.return=d.return,Pi=i;break}Pi=d.return}}function _f(i,d,_){var A=_.flags;switch(_.tag){case 0:case 11:case 15:zs(i,_),A&4&&Sc(5,_);break;case 1:if(zs(i,_),A&4)if(i=_.stateNode,d===null)try{i.componentDidMount()}catch(ct){Hr(_,_.return,ct)}else{var V=zl(_.type,d.memoizedProps);d=d.memoizedState;try{i.componentDidUpdate(V,d,i.__reactInternalSnapshotBeforeUpdate)}catch(ct){Hr(_,_.return,ct)}}A&64&&Tc(_),A&512&&kd(_,_.return);break;case 3:if(zs(i,_),A&64&&(i=_.updateQueue,i!==null)){if(d=null,_.child!==null)switch(_.child.tag){case 27:case 5:d=_.child.stateNode;break;case 1:d=_.child.stateNode}try{sd(i,d)}catch(ct){Hr(_,_.return,ct)}}break;case 27:d===null&&A&4&&Zi(_);case 26:case 5:zs(i,_),d===null&&A&4&&Tp(_),A&512&&kd(_,_.return);break;case 12:zs(i,_);break;case 31:zs(i,_),A&4&&fu(i,_);break;case 13:zs(i,_),A&4&&Ed(i,_),A&64&&(i=_.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(_=lg.bind(null,_),Uh(i,_))));break;case 22:if(A=_.memoizedState!==null||Ps,!A){d=d!==null&&d.memoizedState!==null||Fr,V=Ps;var Y=Fr;Ps=A,(Fr=d)&&!Y?Vo(i,_,(_.subtreeFlags&8772)!==0):zs(i,_),Ps=V,Fr=Y}break;case 30:break;default:zs(i,_)}}function Md(i){var d=i.alternate;d!==null&&(i.alternate=null,Md(d)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(d=i.stateNode,d!==null&&Nr(d)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ni=null,Cs=!1;function Xi(i,d,_){for(_=_.child;_!==null;)oa(i,d,_),_=_.sibling}function oa(i,d,_){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount(ge,_)}catch{}switch(_.tag){case 26:Fr||Ls(_,d),Xi(i,d,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:Fr||Ls(_,d);var A=ni,V=Cs;$l(_.type)&&(ni=_.stateNode,Cs=!1),Xi(i,d,_),jf(_.stateNode),ni=A,Cs=V;break;case 5:Fr||Ls(_,d);case 6:if(A=ni,V=Cs,ni=null,Xi(i,d,_),ni=A,Cs=V,ni!==null)if(Cs)try{(ni.nodeType===9?ni.body:ni.nodeName==="HTML"?ni.ownerDocument.body:ni).removeChild(_.stateNode)}catch(Y){Hr(_,d,Y)}else try{ni.removeChild(_.stateNode)}catch(Y){Hr(_,d,Y)}break;case 18:ni!==null&&(Cs?(i=ni,zh(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,_.stateNode),Fe(i)):zh(ni,_.stateNode));break;case 4:A=ni,V=Cs,ni=_.stateNode.containerInfo,Cs=!0,Xi(i,d,_),ni=A,Cs=V;break;case 0:case 11:case 14:case 15:to(2,_,d),Fr||to(4,_,d),Xi(i,d,_);break;case 1:Fr||(Ls(_,d),A=_.stateNode,typeof A.componentWillUnmount=="function"&&vf(_,d,A)),Xi(i,d,_);break;case 21:Xi(i,d,_);break;case 22:Fr=(A=Fr)||_.memoizedState!==null,Xi(i,d,_),Fr=A;break;default:Xi(i,d,_)}}function fu(i,d){if(d.memoizedState===null&&(i=d.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Fe(i)}catch(_){Hr(d,d.return,_)}}}function Ed(i,d){if(d.memoizedState===null&&(i=d.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Fe(i)}catch(_){Hr(d,d.return,_)}}function kp(i){switch(i.tag){case 31:case 13:case 19:var d=i.stateNode;return d===null&&(d=i.stateNode=new Cp),d;case 22:return i=i.stateNode,d=i._retryCache,d===null&&(d=i._retryCache=new Cp),d;default:throw Error(s(435,i.tag))}}function wf(i,d){var _=kp(i);d.forEach(function(A){if(!_.has(A)){_.add(A);var V=Zm.bind(null,i,A);A.then(V,V)}})}function Ds(i,d){var _=d.deletions;if(_!==null)for(var A=0;A<_.length;A++){var V=_[A],Y=i,ct=d,kt=ct;t:for(;kt!==null;){switch(kt.tag){case 27:if($l(kt.type)){ni=kt.stateNode,Cs=!1;break t}break;case 5:ni=kt.stateNode,Cs=!1;break t;case 3:case 4:ni=kt.stateNode.containerInfo,Cs=!0;break t}kt=kt.return}if(ni===null)throw Error(s(160));oa(Y,ct,V),ni=null,Cs=!1,Y=V.alternate,Y!==null&&(Y.return=null),V.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Cc(d,i),d=d.sibling}var Bs=null;function Cc(i,d){var _=i.alternate,A=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ds(d,i),Qr(i),A&4&&(to(3,i,i.return),Sc(3,i),to(5,i,i.return));break;case 1:Ds(d,i),Qr(i),A&512&&(Fr||_===null||Ls(_,_.return)),A&64&&Ps&&(i=i.updateQueue,i!==null&&(A=i.callbacks,A!==null&&(_=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=_===null?A:_.concat(A))));break;case 26:var V=Bs;if(Ds(d,i),Qr(i),A&512&&(Fr||_===null||Ls(_,_.return)),A&4){var Y=_!==null?_.memoizedState:null;if(A=i.memoizedState,_===null)if(A===null)if(i.stateNode===null){t:{A=i.type,_=i.memoizedProps,V=V.ownerDocument||V;e:switch(A){case"title":Y=V.getElementsByTagName("title")[0],(!Y||Y[Gn]||Y[fn]||Y.namespaceURI==="http://www.w3.org/2000/svg"||Y.hasAttribute("itemprop"))&&(Y=V.createElement(A),V.head.insertBefore(Y,V.querySelector("head > title"))),ti(Y,A,_),Y[fn]=i,De(Y),A=Y;break t;case"link":var ct=J("link","href",V).get(A+(_.href||""));if(ct){for(var kt=0;kt<ct.length;kt++)if(Y=ct[kt],Y.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&Y.getAttribute("rel")===(_.rel==null?null:_.rel)&&Y.getAttribute("title")===(_.title==null?null:_.title)&&Y.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){ct.splice(kt,1);break e}}Y=V.createElement(A),ti(Y,A,_),V.head.appendChild(Y);break;case"meta":if(ct=J("meta","content",V).get(A+(_.content||""))){for(kt=0;kt<ct.length;kt++)if(Y=ct[kt],Y.getAttribute("content")===(_.content==null?null:""+_.content)&&Y.getAttribute("name")===(_.name==null?null:_.name)&&Y.getAttribute("property")===(_.property==null?null:_.property)&&Y.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&Y.getAttribute("charset")===(_.charSet==null?null:_.charSet)){ct.splice(kt,1);break e}}Y=V.createElement(A),ti(Y,A,_),V.head.appendChild(Y);break;default:throw Error(s(468,A))}Y[fn]=i,De(Y),A=Y}i.stateNode=A}else at(V,i.type,i.stateNode);else i.stateNode=Zp(V,A,i.memoizedProps);else Y!==A?(Y===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):Y.count--,A===null?at(V,i.type,i.stateNode):Zp(V,A,i.memoizedProps)):A===null&&i.stateNode!==null&&uu(i,i.memoizedProps,_.memoizedProps)}break;case 27:Ds(d,i),Qr(i),A&512&&(Fr||_===null||Ls(_,_.return)),_!==null&&A&4&&uu(i,i.memoizedProps,_.memoizedProps);break;case 5:if(Ds(d,i),Qr(i),A&512&&(Fr||_===null||Ls(_,_.return)),i.flags&32){V=i.stateNode;try{kr(V,"")}catch(mn){Hr(i,i.return,mn)}}A&4&&i.stateNode!=null&&(V=i.memoizedProps,uu(i,V,_!==null?_.memoizedProps:V)),A&1024&&(Nm=!0);break;case 6:if(Ds(d,i),Qr(i),A&4){if(i.stateNode===null)throw Error(s(162));A=i.memoizedProps,_=i.stateNode;try{_.nodeValue=A}catch(mn){Hr(i,i.return,mn)}}break;case 3:if(B=null,V=Bs,Bs=Lf(d.containerInfo),Ds(d,i),Bs=V,Qr(i),A&4&&_!==null&&_.memoizedState.isDehydrated)try{Fe(d.containerInfo)}catch(mn){Hr(i,i.return,mn)}Nm&&(Nm=!1,Nd(i));break;case 4:A=Bs,Bs=Lf(i.stateNode.containerInfo),Ds(d,i),Qr(i),Bs=A;break;case 12:Ds(d,i),Qr(i);break;case 31:Ds(d,i),Qr(i),A&4&&(A=i.updateQueue,A!==null&&(i.updateQueue=null,wf(i,A)));break;case 13:Ds(d,i),Qr(i),i.child.flags&8192&&i.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(Eh=me()),A&4&&(A=i.updateQueue,A!==null&&(i.updateQueue=null,wf(i,A)));break;case 22:V=i.memoizedState!==null;var ee=_!==null&&_.memoizedState!==null,pe=Ps,Re=Fr;if(Ps=pe||V,Fr=Re||ee,Ds(d,i),Fr=Re,Ps=pe,Qr(i),A&8192)t:for(d=i.stateNode,d._visibility=V?d._visibility&-2:d._visibility|1,V&&(_===null||ee||Ps||Fr||Ho(i)),_=null,d=i;;){if(d.tag===5||d.tag===26){if(_===null){ee=_=d;try{if(Y=ee.stateNode,V)ct=Y.style,typeof ct.setProperty=="function"?ct.setProperty("display","none","important"):ct.display="none";else{kt=ee.stateNode;var Ie=ee.memoizedProps.style,_e=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null;kt.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(mn){Hr(ee,ee.return,mn)}}}else if(d.tag===6){if(_===null){ee=d;try{ee.stateNode.nodeValue=V?"":ee.memoizedProps}catch(mn){Hr(ee,ee.return,mn)}}}else if(d.tag===18){if(_===null){ee=d;try{var ke=ee.stateNode;V?o0(ke,!0):o0(ee.stateNode,!1)}catch(mn){Hr(ee,ee.return,mn)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===i)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break t;for(;d.sibling===null;){if(d.return===null||d.return===i)break t;_===d&&(_=null),d=d.return}_===d&&(_=null),d.sibling.return=d.return,d=d.sibling}A&4&&(A=i.updateQueue,A!==null&&(_=A.retryQueue,_!==null&&(A.retryQueue=null,wf(i,_))));break;case 19:Ds(d,i),Qr(i),A&4&&(A=i.updateQueue,A!==null&&(i.updateQueue=null,wf(i,A)));break;case 30:break;case 21:break;default:Ds(d,i),Qr(i)}}function Qr(i){var d=i.flags;if(d&2){try{for(var _,A=i.return;A!==null;){if(xf(A)){_=A;break}A=A.return}if(_==null)throw Error(s(160));switch(_.tag){case 27:var V=_.stateNode,Y=Li(i);ds(i,Y,V);break;case 5:var ct=_.stateNode;_.flags&32&&(kr(ct,""),_.flags&=-33);var kt=Li(i);ds(i,kt,ct);break;case 3:case 4:var ee=_.stateNode.containerInfo,pe=Li(i);Gi(i,pe,ee);break;default:throw Error(s(161))}}catch(Re){Hr(i,i.return,Re)}i.flags&=-3}d&4096&&(i.flags&=-4097)}function Nd(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var d=i;Nd(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),i=i.sibling}}function zs(i,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)_f(i,d.alternate,d),d=d.sibling}function Ho(i){for(i=i.child;i!==null;){var d=i;switch(d.tag){case 0:case 11:case 14:case 15:to(4,d,d.return),Ho(d);break;case 1:Ls(d,d.return);var _=d.stateNode;typeof _.componentWillUnmount=="function"&&vf(d,d.return,_),Ho(d);break;case 27:jf(d.stateNode);case 26:case 5:Ls(d,d.return),Ho(d);break;case 22:d.memoizedState===null&&Ho(d);break;case 30:Ho(d);break;default:Ho(d)}i=i.sibling}}function Vo(i,d,_){for(_=_&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var A=d.alternate,V=i,Y=d,ct=Y.flags;switch(Y.tag){case 0:case 11:case 15:Vo(V,Y,_),Sc(4,Y);break;case 1:if(Vo(V,Y,_),A=Y,V=A.stateNode,typeof V.componentDidMount=="function")try{V.componentDidMount()}catch(pe){Hr(A,A.return,pe)}if(A=Y,V=A.updateQueue,V!==null){var kt=A.stateNode;try{var ee=V.shared.hiddenCallbacks;if(ee!==null)for(V.shared.hiddenCallbacks=null,V=0;V<ee.length;V++)cp(ee[V],kt)}catch(pe){Hr(A,A.return,pe)}}_&&ct&64&&Tc(Y),kd(Y,Y.return);break;case 27:Zi(Y);case 26:case 5:Vo(V,Y,_),_&&A===null&&ct&4&&Tp(Y),kd(Y,Y.return);break;case 12:Vo(V,Y,_);break;case 31:Vo(V,Y,_),_&&ct&4&&fu(V,Y);break;case 13:Vo(V,Y,_),_&&ct&4&&Ed(V,Y);break;case 22:Y.memoizedState===null&&Vo(V,Y,_),kd(Y,Y.return);break;case 30:break;default:Vo(V,Y,_)}d=d.sibling}}function Mp(i,d){var _=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(_=i.memoizedState.cachePool.pool),i=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(i=d.memoizedState.cachePool.pool),i!==_&&(i!=null&&i.refCount++,_!=null&&lc(_))}function tl(i,d){i=null,d.alternate!==null&&(i=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==i&&(d.refCount++,i!=null&&lc(i))}function $o(i,d,_,A){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)du(i,d,_,A),d=d.sibling}function du(i,d,_,A){var V=d.flags;switch(d.tag){case 0:case 11:case 15:$o(i,d,_,A),V&2048&&Sc(9,d);break;case 1:$o(i,d,_,A);break;case 3:$o(i,d,_,A),V&2048&&(i=null,d.alternate!==null&&(i=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==i&&(d.refCount++,i!=null&&lc(i)));break;case 12:if(V&2048){$o(i,d,_,A),i=d.stateNode;try{var Y=d.memoizedProps,ct=Y.id,kt=Y.onPostCommit;typeof kt=="function"&&kt(ct,d.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ee){Hr(d,d.return,ee)}}else $o(i,d,_,A);break;case 31:$o(i,d,_,A);break;case 13:$o(i,d,_,A);break;case 23:break;case 22:Y=d.stateNode,ct=d.alternate,d.memoizedState!==null?Y._visibility&2?$o(i,d,_,A):hu(i,d):Y._visibility&2?$o(i,d,_,A):(Y._visibility|=2,el(i,d,_,A,(d.subtreeFlags&10256)!==0||!1)),V&2048&&Mp(ct,d);break;case 24:$o(i,d,_,A),V&2048&&tl(d.alternate,d);break;default:$o(i,d,_,A)}}function el(i,d,_,A,V){for(V=V&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var Y=i,ct=d,kt=_,ee=A,pe=ct.flags;switch(ct.tag){case 0:case 11:case 15:el(Y,ct,kt,ee,V),Sc(8,ct);break;case 23:break;case 22:var Re=ct.stateNode;ct.memoizedState!==null?Re._visibility&2?el(Y,ct,kt,ee,V):hu(Y,ct):(Re._visibility|=2,el(Y,ct,kt,ee,V)),V&&pe&2048&&Mp(ct.alternate,ct);break;case 24:el(Y,ct,kt,ee,V),V&&pe&2048&&tl(ct.alternate,ct);break;default:el(Y,ct,kt,ee,V)}d=d.sibling}}function hu(i,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var _=i,A=d,V=A.flags;switch(A.tag){case 22:hu(_,A),V&2048&&Mp(A.alternate,A);break;case 24:hu(_,A),V&2048&&tl(A.alternate,A);break;default:hu(_,A)}d=d.sibling}}var aa=8192;function nl(i,d,_){if(i.subtreeFlags&aa)for(i=i.child;i!==null;)Sf(i,d,_),i=i.sibling}function Sf(i,d,_){switch(i.tag){case 26:nl(i,d,_),i.flags&aa&&i.memoizedState!==null&&xt(_,Bs,i.memoizedState,i.memoizedProps);break;case 5:nl(i,d,_);break;case 3:case 4:var A=Bs;Bs=Lf(i.stateNode.containerInfo),nl(i,d,_),Bs=A;break;case 22:i.memoizedState===null&&(A=i.alternate,A!==null&&A.memoizedState!==null?(A=aa,aa=16777216,nl(i,d,_),aa=A):nl(i,d,_));break;default:nl(i,d,_)}}function Ep(i){var d=i.alternate;if(d!==null&&(i=d.child,i!==null)){d.child=null;do d=i.sibling,i.sibling=null,i=d;while(i!==null)}}function Yi(i){var d=i.deletions;if((i.flags&16)!==0){if(d!==null)for(var _=0;_<d.length;_++){var A=d[_];Pi=A,Am(A,i)}Ep(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Aa(i),i=i.sibling}function Aa(i){switch(i.tag){case 0:case 11:case 15:Yi(i),i.flags&2048&&to(9,i,i.return);break;case 3:Yi(i);break;case 12:Yi(i);break;case 22:var d=i.stateNode;i.memoizedState!==null&&d._visibility&2&&(i.return===null||i.return.tag!==13)?(d._visibility&=-3,kc(i)):Yi(i);break;default:Yi(i)}}function kc(i){var d=i.deletions;if((i.flags&16)!==0){if(d!==null)for(var _=0;_<d.length;_++){var A=d[_];Pi=A,Am(A,i)}Ep(i)}for(i=i.child;i!==null;){switch(d=i,d.tag){case 0:case 11:case 15:to(8,d,d.return),kc(d);break;case 22:_=d.stateNode,_._visibility&2&&(_._visibility&=-3,kc(d));break;default:kc(d)}i=i.sibling}}function Am(i,d){for(;Pi!==null;){var _=Pi;switch(_.tag){case 0:case 11:case 15:to(8,_,d);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var A=_.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:lc(_.memoizedState.cache)}if(A=_.child,A!==null)A.return=_,Pi=A;else t:for(_=i;Pi!==null;){A=Pi;var V=A.sibling,Y=A.return;if(Md(A),A===_){Pi=null;break t}if(V!==null){V.return=Y,Pi=V;break t}Pi=Y}}}var Rm={getCacheForType:function(i){var d=Ni(Ai),_=d.data.get(i);return _===void 0&&(_=i(),d.data.set(i,_)),_},cacheSignal:function(){return Ni(Ai).controller.signal}},Tf=typeof WeakMap=="function"?WeakMap:Map,cr=0,Ur=null,vr=null,ur=0,gr=0,Ki=null,eo=!1,pu=!1,Qi=!1,Fs=0,pi=0,Mc=0,mu=0,Mh=0,Ei=0,no=0,rl=null,Us=null,Np=!1,Eh=0,gu=0,Jr=1/0,bu=null,Wo=null,Ji=0,Ec=null,yu=null,il=0,vu=0,Cf=null,kf=null,Ad=0,Ap=null;function ho(){return(cr&2)!==0&&ur!==0?ur&-ur:T.T!==null?Nf():Qe()}function Rp(){if(Ei===0)if((ur&536870912)===0||nr){var i=Xn;Xn<<=1,(Xn&3932160)===0&&(Xn=262144),Ei=i}else Ei=536870912;return i=fs.current,i!==null&&(i.flags|=32),Ei}function ts(i,d,_){(i===Ur&&(gr===2||gr===9)||i.cancelPendingCommit!==null)&&(xu(i,0),Fl(i,ur,Ei,!1)),cn(i,_),((cr&2)===0||i!==Ur)&&(i===Ur&&((cr&2)===0&&(mu|=_),pi===4&&Fl(i,ur,Ei,!1)),qo(i))}function Im(i,d,_){if((cr&6)!==0)throw Error(s(327));var A=!_&&(d&127)===0&&(d&i.expiredLanes)===0||Ge(i,d),V=A?Dm(i,d):Lp(i,d,!0),Y=A;do{if(V===0){pu&&!A&&Fl(i,d,0,!1);break}else{if(_=i.current.alternate,Y&&!jm(_)){V=Lp(i,d,!1),Y=!1;continue}if(V===2){if(Y=d,i.errorRecoveryDisabledLanes&Y)var ct=0;else ct=i.pendingLanes&-536870913,ct=ct!==0?ct:ct&536870912?536870912:0;if(ct!==0){d=ct;t:{var kt=i;V=rl;var ee=kt.current.memoizedState.isDehydrated;if(ee&&(xu(kt,ct).flags|=256),ct=Lp(kt,ct,!1),ct!==2){if(Qi&&!ee){kt.errorRecoveryDisabledLanes|=Y,mu|=Y,V=4;break t}Y=Us,Us=V,Y!==null&&(Us===null?Us=Y:Us.push.apply(Us,Y))}V=ct}if(Y=!1,V!==2)continue}}if(V===1){xu(i,0),Fl(i,d,0,!0);break}t:{switch(A=i,Y=V,Y){case 0:case 1:throw Error(s(345));case 4:if((d&4194048)!==d)break;case 6:Fl(A,d,Ei,!eo);break t;case 2:Us=null;break;case 3:case 5:break;default:throw Error(s(329))}if((d&62914560)===d&&(V=Eh+300-me(),10<V)){if(Fl(A,d,Ei,!eo),br(A,0,!0)!==0)break t;il=d,A.timeoutHandle=Wp(Om.bind(null,A,_,Us,bu,Np,d,Ei,mu,no,eo,Y,"Throttled",-0,0),V);break t}Om(A,_,Us,bu,Np,d,Ei,mu,no,eo,Y,null,-0,0)}}break}while(!0);qo(i)}function Om(i,d,_,A,V,Y,ct,kt,ee,pe,Re,Ie,_e,ke){if(i.timeoutHandle=-1,Ie=d.subtreeFlags,Ie&8192||(Ie&16785408)===16785408){Ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rr},Sf(d,Y,Ie);var mn=(Y&62914560)===Y?Eh-me():(Y&4194048)===Y?gu-me():0;if(mn=ht(Ie,mn),mn!==null){il=Y,i.cancelPendingCommit=mn(Hm.bind(null,i,d,Y,_,A,V,ct,kt,ee,Re,Ie,null,_e,ke)),Fl(i,Y,ct,!pe);return}}Hm(i,d,Y,_,A,V,ct,kt,ee)}function jm(i){for(var d=i;;){var _=d.tag;if((_===0||_===11||_===15)&&d.flags&16384&&(_=d.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var A=0;A<_.length;A++){var V=_[A],Y=V.getSnapshot;V=V.value;try{if(!wi(Y(),V))return!1}catch{return!1}}if(_=d.child,d.subtreeFlags&16384&&_!==null)_.return=d,d=_;else{if(d===i)break;for(;d.sibling===null;){if(d.return===null||d.return===i)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Fl(i,d,_,A){d&=~Mh,d&=~mu,i.suspendedLanes|=d,i.pingedLanes&=~d,A&&(i.warmLanes|=d),A=i.expirationTimes;for(var V=d;0<V;){var Y=31-dn(V),ct=1<<Y;A[Y]=-1,V&=~ct}_!==0&&qn(i,_,d)}function Nh(){return(cr&6)===0?(Nc(0),!1):!0}function Ip(){if(vr!==null){if(gr===0)var i=vr.return;else i=vr,Ys=Ro=null,Ma(i),Ju=null,rd=0,i=vr;for(;i!==null;)cu(i.alternate,i),i=i.return;vr=null}}function xu(i,d){var _=i.timeoutHandle;_!==-1&&(i.timeoutHandle=-1,i0(_)),_=i.cancelPendingCommit,_!==null&&(i.cancelPendingCommit=null,_()),il=0,Ip(),Ur=i,vr=_=sr(i.current,null),ur=d,gr=0,Ki=null,eo=!1,pu=Ge(i,d),Qi=!1,no=Ei=Mh=mu=Mc=pi=0,Us=rl=null,Np=!1,(d&8)!==0&&(d|=d&32);var A=i.entangledLanes;if(A!==0)for(i=i.entanglements,A&=d;0<A;){var V=31-dn(A),Y=1<<V;d|=i[V],A&=~Y}return Fs=d,Ao(),_}function Op(i,d){Yn=null,T.H=su,d===Ml||d===Yu?(d=Qu(),gr=3):d===Ya?(d=Qu(),gr=4):gr=d===xd?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Ki=d,vr===null&&(pi=1,Fo(i,N(d,i.current)))}function Lm(){var i=fs.current;return i===null?!0:(ur&4194048)===ur?Os===null:(ur&62914560)===ur||(ur&536870912)!==0?i===Os:!1}function Pm(){var i=T.H;return T.H=su,i===null?su:i}function jp(){var i=T.A;return T.A=Rm,i}function Rd(){pi=4,eo||(ur&4194048)!==ur&&fs.current!==null||(pu=!0),(Mc&134217727)===0&&(mu&134217727)===0||Ur===null||Fl(Ur,ur,Ei,!1)}function Lp(i,d,_){var A=cr;cr|=2;var V=Pm(),Y=jp();(Ur!==i||ur!==d)&&(bu=null,xu(i,d)),d=!1;var ct=pi;t:do try{if(gr!==0&&vr!==null){var kt=vr,ee=Ki;switch(gr){case 8:Ip(),ct=6;break t;case 3:case 2:case 9:case 6:fs.current===null&&(d=!0);var pe=gr;if(gr=0,Ki=null,_u(i,kt,ee,pe),_&&pu){ct=0;break t}break;default:pe=gr,gr=0,Ki=null,_u(i,kt,ee,pe)}}ag(),ct=pi;break}catch(Re){Op(i,Re)}while(!0);return d&&i.shellSuspendCounter++,Ys=Ro=null,cr=A,T.H=V,T.A=Y,vr===null&&(Ur=null,ur=0,Ao()),ct}function ag(){for(;vr!==null;)zm(vr)}function Dm(i,d){var _=cr;cr|=2;var A=Pm(),V=jp();Ur!==i||ur!==d?(bu=null,Jr=me()+500,xu(i,d)):pu=Ge(i,d);t:do try{if(gr!==0&&vr!==null){d=vr;var Y=Ki;e:switch(gr){case 1:gr=0,Ki=null,_u(i,d,Y,1);break;case 2:case 9:if(sp(Y)){gr=0,Ki=null,Fm(d);break}d=function(){gr!==2&&gr!==9||Ur!==i||(gr=7),qo(i)},Y.then(d,d);break t;case 3:gr=7;break t;case 4:gr=5;break t;case 7:sp(Y)?(gr=0,Ki=null,Fm(d)):(gr=0,Ki=null,_u(i,d,Y,7));break;case 5:var ct=null;switch(vr.tag){case 26:ct=vr.memoizedState;case 5:case 27:var kt=vr;if(ct?dt(ct):kt.stateNode.complete){gr=0,Ki=null;var ee=kt.sibling;if(ee!==null)vr=ee;else{var pe=kt.return;pe!==null?(vr=pe,Id(pe)):vr=null}break e}}gr=0,Ki=null,_u(i,d,Y,5);break;case 6:gr=0,Ki=null,_u(i,d,Y,6);break;case 8:Ip(),pi=6;break t;default:throw Error(s(462))}}Bm();break}catch(Re){Op(i,Re)}while(!0);return Ys=Ro=null,T.H=A,T.A=V,cr=_,vr!==null?0:(Ur=null,ur=0,Ao(),pi)}function Bm(){for(;vr!==null&&!ne();)zm(vr)}function zm(i){var d=Na(i.alternate,i,Fs);i.memoizedProps=i.pendingProps,d===null?Id(i):vr=d}function Fm(i){var d=i,_=d.alternate;switch(d.tag){case 15:case 0:d=wp(_,d,d.pendingProps,d.type,void 0,ur);break;case 11:d=wp(_,d,d.pendingProps,d.type.render,d.ref,ur);break;case 5:Ma(d);default:cu(_,d),d=vr=sc(d,Fs),d=Na(_,d,Fs)}i.memoizedProps=i.pendingProps,d===null?Id(i):vr=d}function _u(i,d,_,A){Ys=Ro=null,Ma(d),Ju=null,rd=0;var V=d.return;try{if(pf(i,V,d,_,ur)){pi=1,Fo(i,N(_,i.current)),vr=null;return}}catch(Y){if(V!==null)throw vr=V,Y;pi=1,Fo(i,N(_,i.current)),vr=null;return}d.flags&32768?(nr||A===1?i=!0:pu||(ur&536870912)!==0?i=!1:(eo=i=!0,(A===2||A===9||A===3||A===6)&&(A=fs.current,A!==null&&A.tag===13&&(A.flags|=16384))),Um(d,i)):Id(d)}function Id(i){var d=i;do{if((d.flags&32768)!==0){Um(d,eo);return}i=d.return;var _=yf(d.alternate,d,Fs);if(_!==null){vr=_;return}if(d=d.sibling,d!==null){vr=d;return}vr=d=i}while(d!==null);pi===0&&(pi=5)}function Um(i,d){do{var _=Ch(i.alternate,i);if(_!==null){_.flags&=32767,vr=_;return}if(_=i.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!d&&(i=i.sibling,i!==null)){vr=i;return}vr=i=_}while(i!==null);pi=6,vr=null}function Hm(i,d,_,A,V,Y,ct,kt,ee){i.cancelPendingCommit=null;do Od();while(Ji!==0);if((cr&6)!==0)throw Error(s(327));if(d!==null){if(d===i.current)throw Error(s(177));if(Y=d.lanes|d.childLanes,Y|=ic,Qn(i,_,Y,ct,kt,ee),i===Ur&&(vr=Ur=null,ur=0),yu=d,Ec=i,il=_,vu=Y,Cf=V,kf=A,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Xm(He,function(){return Bp(),null})):(i.callbackNode=null,i.callbackPriority=0),A=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||A){A=T.T,T.T=null,V=C.p,C.p=2,ct=cr,cr|=4;try{kh(i,d,_)}finally{cr=ct,C.p=V,T.T=A}}Ji=1,Pp(),Dp(),Vm()}}function Pp(){if(Ji===1){Ji=0;var i=Ec,d=yu,_=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||_){_=T.T,T.T=null;var A=C.p;C.p=2;var V=cr;cr|=4;try{Cc(d,i);var Y=Tu,ct=qc(i.containerInfo),kt=Y.focusedElem,ee=Y.selectionRange;if(ct!==kt&&kt&&kt.ownerDocument&&Wc(kt.ownerDocument.documentElement,kt)){if(ee!==null&&_a(kt)){var pe=ee.start,Re=ee.end;if(Re===void 0&&(Re=pe),"selectionStart"in kt)kt.selectionStart=pe,kt.selectionEnd=Math.min(Re,kt.value.length);else{var Ie=kt.ownerDocument||document,_e=Ie&&Ie.defaultView||window;if(_e.getSelection){var ke=_e.getSelection(),mn=kt.textContent.length,_n=Math.min(ee.start,mn),or=ee.end===void 0?_n:Math.min(ee.end,mn);!ke.extend&&_n>or&&(ct=or,or=_n,_n=ct);var xe=$c(kt,_n),de=$c(kt,or);if(xe&&de&&(ke.rangeCount!==1||ke.anchorNode!==xe.node||ke.anchorOffset!==xe.offset||ke.focusNode!==de.node||ke.focusOffset!==de.offset)){var Te=Ie.createRange();Te.setStart(xe.node,xe.offset),ke.removeAllRanges(),_n>or?(ke.addRange(Te),ke.extend(de.node,de.offset)):(Te.setEnd(de.node,de.offset),ke.addRange(Te))}}}}for(Ie=[],ke=kt;ke=ke.parentNode;)ke.nodeType===1&&Ie.push({element:ke,left:ke.scrollLeft,top:ke.scrollTop});for(typeof kt.focus=="function"&&kt.focus(),kt=0;kt<Ie.length;kt++){var ze=Ie[kt];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}Et=!!Dh,Tu=Dh=null}finally{cr=V,C.p=A,T.T=_}}i.current=d,Ji=2}}function Dp(){if(Ji===2){Ji=0;var i=Ec,d=yu,_=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||_){_=T.T,T.T=null;var A=C.p;C.p=2;var V=cr;cr|=4;try{_f(i,d.alternate,d)}finally{cr=V,C.p=A,T.T=_}}Ji=3}}function Vm(){if(Ji===4||Ji===3){Ji=0,ae();var i=Ec,d=yu,_=il,A=kf;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Ji=5:(Ji=0,yu=Ec=null,$m(i,i.pendingLanes));var V=i.pendingLanes;if(V===0&&(Wo=null),be(_),d=d.stateNode,Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot(ge,d,void 0,(d.current.flags&128)===128)}catch{}if(A!==null){d=T.T,V=C.p,C.p=2,T.T=null;try{for(var Y=i.onRecoverableError,ct=0;ct<A.length;ct++){var kt=A[ct];Y(kt.value,{componentStack:kt.stack})}}finally{T.T=d,C.p=V}}(il&3)!==0&&Od(),qo(i),V=i.pendingLanes,(_&261930)!==0&&(V&42)!==0?i===Ap?Ad++:(Ad=0,Ap=i):Ad=0,Nc(0)}}function $m(i,d){(i.pooledCacheLanes&=d)===0&&(d=i.pooledCache,d!=null&&(i.pooledCache=null,lc(d)))}function Od(){return Pp(),Dp(),Vm(),Bp()}function Bp(){if(Ji!==5)return!1;var i=Ec,d=vu;vu=0;var _=be(il),A=T.T,V=C.p;try{C.p=32>_?32:_,T.T=null,_=Cf,Cf=null;var Y=Ec,ct=il;if(Ji=0,yu=Ec=null,il=0,(cr&6)!==0)throw Error(s(331));var kt=cr;if(cr|=4,Aa(Y.current),du(Y,Y.current,ct,_),cr=kt,Nc(0,!1),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot(ge,Y)}catch{}return!0}finally{C.p=V,T.T=A,$m(i,d)}}function Wm(i,d,_){d=N(_,d),d=xc(i.stateNode,d,2),i=Oo(i,d,2),i!==null&&(cn(i,2),qo(i))}function Hr(i,d,_){if(i.tag===3)Wm(i,i,_);else for(;d!==null;){if(d.tag===3){Wm(d,i,_);break}else if(d.tag===1){var A=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Wo===null||!Wo.has(A))){i=N(_,i),_=Uo(2),A=Oo(d,_,2),A!==null&&(vd(_,A,d,i),cn(A,2),qo(A));break}}d=d.return}}function Ah(i,d,_){var A=i.pingCache;if(A===null){A=i.pingCache=new Tf;var V=new Set;A.set(d,V)}else V=A.get(d),V===void 0&&(V=new Set,A.set(d,V));V.has(_)||(Qi=!0,V.add(_),i=qm.bind(null,i,d,_),d.then(i,i))}function qm(i,d,_){var A=i.pingCache;A!==null&&A.delete(d),i.pingedLanes|=i.suspendedLanes&_,i.warmLanes&=~_,Ur===i&&(ur&_)===_&&(pi===4||pi===3&&(ur&62914560)===ur&&300>me()-Eh?(cr&2)===0&&xu(i,0):Mh|=_,no===ur&&(no=0)),qo(i)}function Gm(i,d){d===0&&(d=ir()),i=uo(i,d),i!==null&&(cn(i,d),qo(i))}function lg(i){var d=i.memoizedState,_=0;d!==null&&(_=d.retryLane),Gm(i,_)}function Zm(i,d){var _=0;switch(i.tag){case 31:case 13:var A=i.stateNode,V=i.memoizedState;V!==null&&(_=V.retryLane);break;case 19:A=i.stateNode;break;case 22:A=i.stateNode._retryCache;break;default:throw Error(s(314))}A!==null&&A.delete(d),Gm(i,_)}function Xm(i,d){return Ht(i,d)}var Rh=null,Mf=null,jd=!1,Ef=!1,wu=!1,la=0;function qo(i){i!==Mf&&i.next===null&&(Mf===null?Rh=Mf=i:Mf=Mf.next=i),Ef=!0,jd||(jd=!0,cg())}function Nc(i,d){if(!wu&&Ef){wu=!0;do for(var _=!1,A=Rh;A!==null;){if(i!==0){var V=A.pendingLanes;if(V===0)var Y=0;else{var ct=A.suspendedLanes,kt=A.pingedLanes;Y=(1<<31-dn(42|i)+1)-1,Y&=V&~(ct&~kt),Y=Y&201326741?Y&201326741|1:Y?Y|2:0}Y!==0&&(_=!0,Ym(A,Y))}else Y=ur,Y=br(A,A===Ur?Y:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),(Y&3)===0||Ge(A,Y)||(_=!0,Ym(A,Y));A=A.next}while(_);wu=!1}}function Ih(){Ld()}function Ld(){Ef=jd=!1;var i=0;la!==0&&r0()&&(i=la);for(var d=me(),_=null,A=Rh;A!==null;){var V=A.next,Y=Pd(A,d);Y===0?(A.next=null,_===null?Rh=V:_.next=V,V===null&&(Mf=_)):(_=A,(i!==0||(Y&3)!==0)&&(Ef=!0)),A=V}Ji!==0&&Ji!==5||Nc(i),la!==0&&(la=0)}function Pd(i,d){for(var _=i.suspendedLanes,A=i.pingedLanes,V=i.expirationTimes,Y=i.pendingLanes&-62914561;0<Y;){var ct=31-dn(Y),kt=1<<ct,ee=V[ct];ee===-1?((kt&_)===0||(kt&A)!==0)&&(V[ct]=Ln(kt,d)):ee<=d&&(i.expiredLanes|=kt),Y&=~kt}if(d=Ur,_=ur,_=br(i,i===d?_:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),A=i.callbackNode,_===0||i===d&&(gr===2||gr===9)||i.cancelPendingCommit!==null)return A!==null&&A!==null&&Jt(A),i.callbackNode=null,i.callbackPriority=0;if((_&3)===0||Ge(i,_)){if(d=_&-_,d===i.callbackPriority)return d;switch(A!==null&&Jt(A),be(_)){case 2:case 8:_=Be;break;case 32:_=He;break;case 268435456:_=sn;break;default:_=He}return A=zp.bind(null,i),_=Ht(_,A),i.callbackPriority=d,i.callbackNode=_,d}return A!==null&&A!==null&&Jt(A),i.callbackPriority=2,i.callbackNode=null,2}function zp(i,d){if(Ji!==0&&Ji!==5)return i.callbackNode=null,i.callbackPriority=0,null;var _=i.callbackNode;if(Od()&&i.callbackNode!==_)return null;var A=ur;return A=br(i,i===Ur?A:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),A===0?null:(Im(i,A,d),Pd(i,me()),i.callbackNode!=null&&i.callbackNode===_?zp.bind(null,i):null)}function Ym(i,d){if(Od())return null;Im(i,d,!0)}function cg(){ca(function(){(cr&6)!==0?Ht(Pe,Ih):Ld()})}function Nf(){if(la===0){var i=Xu;i===0&&(i=Ye,Ye<<=1,(Ye&261888)===0&&(Ye=256)),la=i}return la}function Oh(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ao(""+i)}function Km(i,d){var _=d.ownerDocument.createElement("input");return _.name=d.name,_.value=d.value,i.id&&_.setAttribute("form",i.id),d.parentNode.insertBefore(_,d),i=new FormData(i),_.parentNode.removeChild(_),i}function Ul(i,d,_,A,V){if(d==="submit"&&_&&_.stateNode===V){var Y=Oh((V[gn]||null).action),ct=A.submitter;ct&&(d=(d=ct[gn]||null)?Oh(d.formAction):ct.getAttribute("formAction"),d!==null&&(Y=d,ct=null));var kt=new pa("action","action",null,A,V);i.push({event:kt,listeners:[{instance:null,listener:function(){if(A.defaultPrevented){if(la!==0){var ee=ct?Km(V,ct):new FormData(V);yp(_,{pending:!0,data:ee,method:V.method,action:Y},null,ee)}}else typeof Y=="function"&&(kt.preventDefault(),ee=ct?Km(V,ct):new FormData(V),yp(_,{pending:!0,data:ee,method:V.method,action:Y},Y,ee))},currentTarget:V}]})}}for(var Hl=0;Hl<Zs.length;Hl++){var Vl=Zs[Hl],Af=Vl.toLowerCase(),Ac=Vl[0].toUpperCase()+Vl.slice(1);vs(Af,"on"+Ac)}vs(Ua,"onAnimationEnd"),vs(th,"onAnimationIteration"),vs(Ha,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(np,"onTransitionRun"),vs(wa,"onTransitionStart"),vs(Va,"onTransitionCancel"),vs(rc,"onTransitionEnd"),Xe("onMouseEnter",["mouseout","mouseover"]),Xe("onMouseLeave",["mouseout","mouseover"]),Xe("onPointerEnter",["pointerout","pointerover"]),Xe("onPointerLeave",["pointerout","pointerover"]),Ze("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ze("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ze("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ze("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ze("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ze("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fi=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ks));function jh(i,d){d=(d&4)!==0;for(var _=0;_<i.length;_++){var A=i[_],V=A.event;A=A.listeners;t:{var Y=void 0;if(d)for(var ct=A.length-1;0<=ct;ct--){var kt=A[ct],ee=kt.instance,pe=kt.currentTarget;if(kt=kt.listener,ee!==Y&&V.isPropagationStopped())break t;Y=kt,V.currentTarget=pe;try{Y(V)}catch(Re){Qo(Re)}V.currentTarget=null,Y=ee}else for(ct=0;ct<A.length;ct++){if(kt=A[ct],ee=kt.instance,pe=kt.currentTarget,kt=kt.listener,ee!==Y&&V.isPropagationStopped())break t;Y=kt,V.currentTarget=pe;try{Y(V)}catch(Re){Qo(Re)}V.currentTarget=null,Y=ee}}}}function hn(i,d){var _=d[bn];_===void 0&&(_=d[bn]=new Set);var A=i+"__bubble";_.has(A)||(Fp(d,i,2,!1),_.add(A))}function Rc(i,d,_){var A=0;d&&(A|=4),Fp(_,i,A,d)}var Su="_reactListening"+Math.random().toString(36).slice(2);function Rf(i){if(!i[Su]){i[Su]=!0,$e.forEach(function(_){_!=="selectionchange"&&(fi.has(_)||Rc(_,!1,i),Rc(_,!0,i))});var d=i.nodeType===9?i:i.ownerDocument;d===null||d[Su]||(d[Su]=!0,Rc("selectionchange",!1,d))}}function Fp(i,d,_,A){switch(Zt(d)){case 2:var V=Pt;break;case 8:V=Dt;break;default:V=Ft}_=V.bind(null,d,_,i),V=void 0,!Du||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(V=!0),A?V!==void 0?i.addEventListener(d,_,{capture:!0,passive:V}):i.addEventListener(d,_,!0):V!==void 0?i.addEventListener(d,_,{passive:V}):i.addEventListener(d,_,!1)}function Lh(i,d,_,A,V){var Y=A;if((d&1)===0&&(d&2)===0&&A!==null)t:for(;;){if(A===null)return;var ct=A.tag;if(ct===3||ct===4){var kt=A.stateNode.containerInfo;if(kt===V)break;if(ct===4)for(ct=A.return;ct!==null;){var ee=ct.tag;if((ee===3||ee===4)&&ct.stateNode.containerInfo===V)return;ct=ct.return}for(;kt!==null;){if(ct=Cr(kt),ct===null)return;if(ee=ct.tag,ee===5||ee===6||ee===26||ee===27){A=Y=ct;continue t}kt=kt.parentNode}}A=A.return}Yf(function(){var pe=Y,Re=bs(_),Ie=[];t:{var _e=gl.get(i);if(_e!==void 0){var ke=pa,mn=i;switch(i){case"keypress":if(To(_)===0)break t;case"keydown":case"keyup":ke=Jd;break;case"focusin":mn="focus",ke=Co;break;case"focusout":mn="blur",ke=Co;break;case"beforeblur":case"afterblur":ke=Co;break;case"click":if(_.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ke=Ui;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ke=Bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ke=zc;break;case Ua:case th:case Ha:ke=Go;break;case rc:ke=Xl;break;case"scroll":case"scrollend":ke=Kn;break;case"wheel":ke=ya;break;case"copy":case"cut":case"paste":ke=lo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ke=Zo;break;case"toggle":case"beforetoggle":ke=fl}var _n=(d&4)!==0,or=!_n&&(i==="scroll"||i==="scrollend"),xe=_n?_e!==null?_e+"Capture":null:_e;_n=[];for(var de=pe,Te;de!==null;){var ze=de;if(Te=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||Te===null||xe===null||(ze=al(de,xe),ze!=null&&_n.push(Dd(de,ze,Te))),or)break;de=de.return}0<_n.length&&(_e=new ke(_e,mn,null,_,Re),Ie.push({event:_e,listeners:_n}))}}if((d&7)===0){t:{if(_e=i==="mouseover"||i==="pointerover",ke=i==="mouseout"||i==="pointerout",_e&&_!==rs&&(mn=_.relatedTarget||_.fromElement)&&(Cr(mn)||mn[wn]))break t;if((ke||_e)&&(_e=Re.window===Re?Re:(_e=Re.ownerDocument)?_e.defaultView||_e.parentWindow:window,ke?(mn=_.relatedTarget||_.toElement,ke=pe,mn=mn?Cr(mn):null,mn!==null&&(or=o(mn),_n=mn.tag,mn!==or||_n!==5&&_n!==27&&_n!==6)&&(mn=null)):(ke=null,mn=pe),ke!==mn)){if(_n=Ui,ze="onMouseLeave",xe="onMouseEnter",de="mouse",(i==="pointerout"||i==="pointerover")&&(_n=Zo,ze="onPointerLeave",xe="onPointerEnter",de="pointer"),or=ke==null?_e:Kt(ke),Te=mn==null?_e:Kt(mn),_e=new _n(ze,de+"leave",ke,_,Re),_e.target=or,_e.relatedTarget=Te,ze=null,Cr(Re)===pe&&(_n=new _n(xe,de+"enter",mn,_,Re),_n.target=Te,_n.relatedTarget=or,ze=_n),or=ze,ke&&mn)e:{for(_n=ug,xe=ke,de=mn,Te=0,ze=xe;ze;ze=_n(ze))Te++;ze=0;for(var Pn=de;Pn;Pn=_n(Pn))ze++;for(;0<Te-ze;)xe=_n(xe),Te--;for(;0<ze-Te;)de=_n(de),ze--;for(;Te--;){if(xe===de||de!==null&&xe===de.alternate){_n=xe;break e}xe=_n(xe),de=_n(de)}_n=null}else _n=null;ke!==null&&Qm(Ie,_e,ke,_n,!1),mn!==null&&or!==null&&Qm(Ie,or,mn,_n,!0)}}t:{if(_e=pe?Kt(pe):window,ke=_e.nodeName&&_e.nodeName.toLowerCase(),ke==="select"||ke==="input"&&_e.type==="file")var Er=tc;else if(qs(_e))if(Jf)Er=pl;else{Er=Vc;var Rn=ls}else ke=_e.nodeName,!ke||ke.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?pe&&li(pe.elementType)&&(Er=tc):Er=Eo;if(Er&&(Er=Er(i,pe))){Hu(Ie,Er,_,Re);break t}Rn&&Rn(i,_e,pe),i==="focusout"&&pe&&_e.type==="number"&&pe.memoizedProps.value!=null&&ai(_e,"number",_e.value)}switch(Rn=pe?Kt(pe):window,i){case"focusin":(qs(Rn)||Rn.contentEditable==="true")&&(cs=Rn,Oi=pe,Fa=null);break;case"focusout":Fa=Oi=cs=null;break;case"mousedown":Yo=!0;break;case"contextmenu":case"mouseup":case"dragend":Yo=!1,ml(Ie,_,Re);break;case"selectionchange":if(Vu)break;case"keydown":case"keyup":ml(Ie,_,Re)}var Jn;if(Fc)t:{switch(i){case"compositionstart":var fr="onCompositionStart";break t;case"compositionend":fr="onCompositionEnd";break t;case"compositionupdate":fr="onCompositionUpdate";break t}fr=void 0}else Ws?Uu(i,_)&&(fr="onCompositionEnd"):i==="keydown"&&_.keyCode===229&&(fr="onCompositionStart");fr&&(za&&_.locale!=="ko"&&(Ws||fr!=="onCompositionStart"?fr==="onCompositionEnd"&&Ws&&(Jn=_i()):(Bi=Re,ss="value"in Bi?Bi.value:Bi.textContent,Ws=!0)),Rn=Ph(pe,fr),0<Rn.length&&(fr=new zu(fr,i,null,_,Re),Ie.push({event:fr,listeners:Rn}),Jn?fr.data=Jn:(Jn=Qf(_),Jn!==null&&(fr.data=Jn)))),(Jn=dl?as(i,_):As(i,_))&&(fr=Ph(pe,"onBeforeInput"),0<fr.length&&(Rn=new zu("onBeforeInput","beforeinput",null,_,Re),Ie.push({event:Rn,listeners:fr}),Rn.data=Jn)),Ul(Ie,i,pe,_,Re)}jh(Ie,d)})}function Dd(i,d,_){return{instance:i,listener:d,currentTarget:_}}function Ph(i,d){for(var _=d+"Capture",A=[];i!==null;){var V=i,Y=V.stateNode;if(V=V.tag,V!==5&&V!==26&&V!==27||Y===null||(V=al(i,_),V!=null&&A.unshift(Dd(i,V,Y)),V=al(i,d),V!=null&&A.push(Dd(i,V,Y))),i.tag===3)return A;i=i.return}return[]}function ug(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Qm(i,d,_,A,V){for(var Y=d._reactName,ct=[];_!==null&&_!==A;){var kt=_,ee=kt.alternate,pe=kt.stateNode;if(kt=kt.tag,ee!==null&&ee===A)break;kt!==5&&kt!==26&&kt!==27||pe===null||(ee=pe,V?(pe=al(_,Y),pe!=null&&ct.unshift(Dd(_,pe,ee))):V||(pe=al(_,Y),pe!=null&&ct.push(Dd(_,pe,ee)))),_=_.return}ct.length!==0&&i.push({event:d,listeners:ct})}var Ic=/\r\n?/g,fg=/\u0000|\uFFFD/g;function Up(i){return(typeof i=="string"?i:""+i).replace(Ic,`
`).replace(fg,"")}function Jm(i,d){return d=Up(d),Up(i)===d}function Gr(i,d,_,A,V,Y){switch(_){case"children":typeof A=="string"?d==="body"||d==="textarea"&&A===""||kr(i,A):(typeof A=="number"||typeof A=="bigint")&&d!=="body"&&kr(i,""+A);break;case"className":En(i,"class",A);break;case"tabIndex":En(i,"tabindex",A);break;case"dir":case"role":case"viewBox":case"width":case"height":En(i,_,A);break;case"style":Vs(i,A,Y);break;case"data":if(d!=="object"){En(i,"data",A);break}case"src":case"href":if(A===""&&(d!=="a"||_!=="href")){i.removeAttribute(_);break}if(A==null||typeof A=="function"||typeof A=="symbol"||typeof A=="boolean"){i.removeAttribute(_);break}A=ao(""+A),i.setAttribute(_,A);break;case"action":case"formAction":if(typeof A=="function"){i.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof Y=="function"&&(_==="formAction"?(d!=="input"&&Gr(i,d,"name",V.name,V,null),Gr(i,d,"formEncType",V.formEncType,V,null),Gr(i,d,"formMethod",V.formMethod,V,null),Gr(i,d,"formTarget",V.formTarget,V,null)):(Gr(i,d,"encType",V.encType,V,null),Gr(i,d,"method",V.method,V,null),Gr(i,d,"target",V.target,V,null)));if(A==null||typeof A=="symbol"||typeof A=="boolean"){i.removeAttribute(_);break}A=ao(""+A),i.setAttribute(_,A);break;case"onClick":A!=null&&(i.onclick=Rr);break;case"onScroll":A!=null&&hn("scroll",i);break;case"onScrollEnd":A!=null&&hn("scrollend",i);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(s(61));if(_=A.__html,_!=null){if(V.children!=null)throw Error(s(60));i.innerHTML=_}}break;case"multiple":i.multiple=A&&typeof A!="function"&&typeof A!="symbol";break;case"muted":i.muted=A&&typeof A!="function"&&typeof A!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(A==null||typeof A=="function"||typeof A=="boolean"||typeof A=="symbol"){i.removeAttribute("xlink:href");break}_=ao(""+A),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":A!=null&&typeof A!="function"&&typeof A!="symbol"?i.setAttribute(_,""+A):i.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":A&&typeof A!="function"&&typeof A!="symbol"?i.setAttribute(_,""):i.removeAttribute(_);break;case"capture":case"download":A===!0?i.setAttribute(_,""):A!==!1&&A!=null&&typeof A!="function"&&typeof A!="symbol"?i.setAttribute(_,A):i.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":A!=null&&typeof A!="function"&&typeof A!="symbol"&&!isNaN(A)&&1<=A?i.setAttribute(_,A):i.removeAttribute(_);break;case"rowSpan":case"start":A==null||typeof A=="function"||typeof A=="symbol"||isNaN(A)?i.removeAttribute(_):i.setAttribute(_,A);break;case"popover":hn("beforetoggle",i),hn("toggle",i),xn(i,"popover",A);break;case"xlinkActuate":Un(i,"http://www.w3.org/1999/xlink","xlink:actuate",A);break;case"xlinkArcrole":Un(i,"http://www.w3.org/1999/xlink","xlink:arcrole",A);break;case"xlinkRole":Un(i,"http://www.w3.org/1999/xlink","xlink:role",A);break;case"xlinkShow":Un(i,"http://www.w3.org/1999/xlink","xlink:show",A);break;case"xlinkTitle":Un(i,"http://www.w3.org/1999/xlink","xlink:title",A);break;case"xlinkType":Un(i,"http://www.w3.org/1999/xlink","xlink:type",A);break;case"xmlBase":Un(i,"http://www.w3.org/XML/1998/namespace","xml:base",A);break;case"xmlLang":Un(i,"http://www.w3.org/XML/1998/namespace","xml:lang",A);break;case"xmlSpace":Un(i,"http://www.w3.org/XML/1998/namespace","xml:space",A);break;case"is":xn(i,"is",A);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=vi.get(_)||_,xn(i,_,A))}}function Hp(i,d,_,A,V,Y){switch(_){case"style":Vs(i,A,Y);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(s(61));if(_=A.__html,_!=null){if(V.children!=null)throw Error(s(60));i.innerHTML=_}}break;case"children":typeof A=="string"?kr(i,A):(typeof A=="number"||typeof A=="bigint")&&kr(i,""+A);break;case"onScroll":A!=null&&hn("scroll",i);break;case"onScrollEnd":A!=null&&hn("scrollend",i);break;case"onClick":A!=null&&(i.onclick=Rr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tn.hasOwnProperty(_))t:{if(_[0]==="o"&&_[1]==="n"&&(V=_.endsWith("Capture"),d=_.slice(2,V?_.length-7:void 0),Y=i[gn]||null,Y=Y!=null?Y[_]:null,typeof Y=="function"&&i.removeEventListener(d,Y,V),typeof A=="function")){typeof Y!="function"&&Y!==null&&(_ in i?i[_]=null:i.hasAttribute(_)&&i.removeAttribute(_)),i.addEventListener(d,A,V);break t}_ in i?i[_]=A:A===!0?i.setAttribute(_,""):xn(i,_,A)}}}function ti(i,d,_){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":hn("error",i),hn("load",i);var A=!1,V=!1,Y;for(Y in _)if(_.hasOwnProperty(Y)){var ct=_[Y];if(ct!=null)switch(Y){case"src":A=!0;break;case"srcSet":V=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,d));default:Gr(i,d,Y,ct,_,null)}}V&&Gr(i,d,"srcSet",_.srcSet,_,null),A&&Gr(i,d,"src",_.src,_,null);return;case"input":hn("invalid",i);var kt=Y=ct=V=null,ee=null,pe=null;for(A in _)if(_.hasOwnProperty(A)){var Re=_[A];if(Re!=null)switch(A){case"name":V=Re;break;case"type":ct=Re;break;case"checked":ee=Re;break;case"defaultChecked":pe=Re;break;case"value":Y=Re;break;case"defaultValue":kt=Re;break;case"children":case"dangerouslySetInnerHTML":if(Re!=null)throw Error(s(137,d));break;default:Gr(i,d,A,Re,_,null)}}er(i,Y,kt,ee,pe,ct,V,!1);return;case"select":hn("invalid",i),A=ct=Y=null;for(V in _)if(_.hasOwnProperty(V)&&(kt=_[V],kt!=null))switch(V){case"value":Y=kt;break;case"defaultValue":ct=kt;break;case"multiple":A=kt;default:Gr(i,d,V,kt,_,null)}d=Y,_=ct,i.multiple=!!A,d!=null?wr(i,!!A,d,!1):_!=null&&wr(i,!!A,_,!0);return;case"textarea":hn("invalid",i),Y=V=A=null;for(ct in _)if(_.hasOwnProperty(ct)&&(kt=_[ct],kt!=null))switch(ct){case"value":A=kt;break;case"defaultValue":V=kt;break;case"children":Y=kt;break;case"dangerouslySetInnerHTML":if(kt!=null)throw Error(s(91));break;default:Gr(i,d,ct,kt,_,null)}Or(i,A,V,Y);return;case"option":for(ee in _)if(_.hasOwnProperty(ee)&&(A=_[ee],A!=null))switch(ee){case"selected":i.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:Gr(i,d,ee,A,_,null)}return;case"dialog":hn("beforetoggle",i),hn("toggle",i),hn("cancel",i),hn("close",i);break;case"iframe":case"object":hn("load",i);break;case"video":case"audio":for(A=0;A<ks.length;A++)hn(ks[A],i);break;case"image":hn("error",i),hn("load",i);break;case"details":hn("toggle",i);break;case"embed":case"source":case"link":hn("error",i),hn("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in _)if(_.hasOwnProperty(pe)&&(A=_[pe],A!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,d));default:Gr(i,d,pe,A,_,null)}return;default:if(li(d)){for(Re in _)_.hasOwnProperty(Re)&&(A=_[Re],A!==void 0&&Hp(i,d,Re,A,_,void 0));return}}for(kt in _)_.hasOwnProperty(kt)&&(A=_[kt],A!=null&&Gr(i,d,kt,A,_,null))}function Ra(i,d,_,A){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var V=null,Y=null,ct=null,kt=null,ee=null,pe=null,Re=null;for(ke in _){var Ie=_[ke];if(_.hasOwnProperty(ke)&&Ie!=null)switch(ke){case"checked":break;case"value":break;case"defaultValue":ee=Ie;default:A.hasOwnProperty(ke)||Gr(i,d,ke,null,A,Ie)}}for(var _e in A){var ke=A[_e];if(Ie=_[_e],A.hasOwnProperty(_e)&&(ke!=null||Ie!=null))switch(_e){case"type":Y=ke;break;case"name":V=ke;break;case"checked":pe=ke;break;case"defaultChecked":Re=ke;break;case"value":ct=ke;break;case"defaultValue":kt=ke;break;case"children":case"dangerouslySetInnerHTML":if(ke!=null)throw Error(s(137,d));break;default:ke!==Ie&&Gr(i,d,_e,ke,A,Ie)}}yr(i,ct,kt,ee,pe,Re,Y,V);return;case"select":ke=ct=kt=_e=null;for(Y in _)if(ee=_[Y],_.hasOwnProperty(Y)&&ee!=null)switch(Y){case"value":break;case"multiple":ke=ee;default:A.hasOwnProperty(Y)||Gr(i,d,Y,null,A,ee)}for(V in A)if(Y=A[V],ee=_[V],A.hasOwnProperty(V)&&(Y!=null||ee!=null))switch(V){case"value":_e=Y;break;case"defaultValue":kt=Y;break;case"multiple":ct=Y;default:Y!==ee&&Gr(i,d,V,Y,A,ee)}d=kt,_=ct,A=ke,_e!=null?wr(i,!!_,_e,!1):!!A!=!!_&&(d!=null?wr(i,!!_,d,!0):wr(i,!!_,_?[]:"",!1));return;case"textarea":ke=_e=null;for(kt in _)if(V=_[kt],_.hasOwnProperty(kt)&&V!=null&&!A.hasOwnProperty(kt))switch(kt){case"value":break;case"children":break;default:Gr(i,d,kt,null,A,V)}for(ct in A)if(V=A[ct],Y=_[ct],A.hasOwnProperty(ct)&&(V!=null||Y!=null))switch(ct){case"value":_e=V;break;case"defaultValue":ke=V;break;case"children":break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(91));break;default:V!==Y&&Gr(i,d,ct,V,A,Y)}ns(i,_e,ke);return;case"option":for(var mn in _)if(_e=_[mn],_.hasOwnProperty(mn)&&_e!=null&&!A.hasOwnProperty(mn))switch(mn){case"selected":i.selected=!1;break;default:Gr(i,d,mn,null,A,_e)}for(ee in A)if(_e=A[ee],ke=_[ee],A.hasOwnProperty(ee)&&_e!==ke&&(_e!=null||ke!=null))switch(ee){case"selected":i.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:Gr(i,d,ee,_e,A,ke)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _n in _)_e=_[_n],_.hasOwnProperty(_n)&&_e!=null&&!A.hasOwnProperty(_n)&&Gr(i,d,_n,null,A,_e);for(pe in A)if(_e=A[pe],ke=_[pe],A.hasOwnProperty(pe)&&_e!==ke&&(_e!=null||ke!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(s(137,d));break;default:Gr(i,d,pe,_e,A,ke)}return;default:if(li(d)){for(var or in _)_e=_[or],_.hasOwnProperty(or)&&_e!==void 0&&!A.hasOwnProperty(or)&&Hp(i,d,or,void 0,A,_e);for(Re in A)_e=A[Re],ke=_[Re],!A.hasOwnProperty(Re)||_e===ke||_e===void 0&&ke===void 0||Hp(i,d,Re,_e,A,ke);return}}for(var xe in _)_e=_[xe],_.hasOwnProperty(xe)&&_e!=null&&!A.hasOwnProperty(xe)&&Gr(i,d,xe,null,A,_e);for(Ie in A)_e=A[Ie],ke=_[Ie],!A.hasOwnProperty(Ie)||_e===ke||_e==null&&ke==null||Gr(i,d,Ie,_e,A,ke)}function t0(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dg(){if(typeof performance.getEntriesByType=="function"){for(var i=0,d=0,_=performance.getEntriesByType("resource"),A=0;A<_.length;A++){var V=_[A],Y=V.transferSize,ct=V.initiatorType,kt=V.duration;if(Y&&kt&&t0(ct)){for(ct=0,kt=V.responseEnd,A+=1;A<_.length;A++){var ee=_[A],pe=ee.startTime;if(pe>kt)break;var Re=ee.transferSize,Ie=ee.initiatorType;Re&&t0(Ie)&&(ee=ee.responseEnd,ct+=Re*(ee<kt?1:(kt-pe)/(ee-pe)))}if(--A,d+=8*(Y+ct)/(V.duration/1e3),i++,10<i)break}}if(0<i)return d/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Dh=null,Tu=null;function Bh(i){return i.nodeType===9?i:i.ownerDocument}function e0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function n0(i,d){if(i===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&d==="foreignObject"?0:i}function Vp(i,d){return i==="textarea"||i==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var $p=null;function r0(){var i=window.event;return i&&i.type==="popstate"?i===$p?!1:($p=i,!0):($p=null,!1)}var Wp=typeof setTimeout=="function"?setTimeout:void 0,i0=typeof clearTimeout=="function"?clearTimeout:void 0,s0=typeof Promise=="function"?Promise:void 0,ca=typeof queueMicrotask=="function"?queueMicrotask:typeof s0<"u"?function(i){return s0.resolve(null).then(i).catch(hg)}:Wp;function hg(i){setTimeout(function(){throw i})}function $l(i){return i==="head"}function zh(i,d){var _=d,A=0;do{var V=_.nextSibling;if(i.removeChild(_),V&&V.nodeType===8)if(_=V.data,_==="/$"||_==="/&"){if(A===0){i.removeChild(V),Fe(d);return}A--}else if(_==="$"||_==="$?"||_==="$~"||_==="$!"||_==="&")A++;else if(_==="html")jf(i.ownerDocument.documentElement);else if(_==="head"){_=i.ownerDocument.head,jf(_);for(var Y=_.firstChild;Y;){var ct=Y.nextSibling,kt=Y.nodeName;Y[Gn]||kt==="SCRIPT"||kt==="STYLE"||kt==="LINK"&&Y.rel.toLowerCase()==="stylesheet"||_.removeChild(Y),Y=ct}}else _==="body"&&jf(i.ownerDocument.body);_=V}while(_);Fe(d)}function o0(i,d){var _=i;i=0;do{var A=_.nextSibling;if(_.nodeType===1?d?(_._stashedDisplay=_.style.display,_.style.display="none"):(_.style.display=_._stashedDisplay||"",_.getAttribute("style")===""&&_.removeAttribute("style")):_.nodeType===3&&(d?(_._stashedText=_.nodeValue,_.nodeValue=""):_.nodeValue=_._stashedText||""),A&&A.nodeType===8)if(_=A.data,_==="/$"){if(i===0)break;i--}else _!=="$"&&_!=="$?"&&_!=="$~"&&_!=="$!"||i++;_=A}while(_)}function Fh(i){var d=i.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var _=d;switch(d=d.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":Fh(_),Nr(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}i.removeChild(_)}}function xr(i,d,_,A){for(;i.nodeType===1;){var V=_;if(i.nodeName.toLowerCase()!==d.toLowerCase()){if(!A&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(A){if(!i[Gn])switch(d){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(Y=i.getAttribute("rel"),Y==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(Y!==V.rel||i.getAttribute("href")!==(V.href==null||V.href===""?null:V.href)||i.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin)||i.getAttribute("title")!==(V.title==null?null:V.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(Y=i.getAttribute("src"),(Y!==(V.src==null?null:V.src)||i.getAttribute("type")!==(V.type==null?null:V.type)||i.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin))&&Y&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(d==="input"&&i.type==="hidden"){var Y=V.name==null?null:""+V.name;if(V.type==="hidden"&&i.getAttribute("name")===Y)return i}else return i;if(i=ua(i.nextSibling),i===null)break}return null}function _r(i,d,_){if(d==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!_||(i=ua(i.nextSibling),i===null))return null;return i}function ri(i,d){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!d||(i=ua(i.nextSibling),i===null))return null;return i}function ei(i){return i.data==="$?"||i.data==="$~"}function If(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function Uh(i,d){var _=i.ownerDocument;if(i.data==="$~")i._reactRetry=d;else if(i.data!=="$?"||_.readyState!=="loading")d();else{var A=function(){d(),_.removeEventListener("DOMContentLoaded",A)};_.addEventListener("DOMContentLoaded",A),i._reactRetry=A}}function ua(i){for(;i!=null;i=i.nextSibling){var d=i.nodeType;if(d===1||d===3)break;if(d===8){if(d=i.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return i}var Of=null;function a0(i){i=i.nextSibling;for(var d=0;i;){if(i.nodeType===8){var _=i.data;if(_==="/$"||_==="/&"){if(d===0)return ua(i.nextSibling);d--}else _!=="$"&&_!=="$!"&&_!=="$?"&&_!=="$~"&&_!=="&"||d++}i=i.nextSibling}return null}function l0(i){i=i.previousSibling;for(var d=0;i;){if(i.nodeType===8){var _=i.data;if(_==="$"||_==="$!"||_==="$?"||_==="$~"||_==="&"){if(d===0)return i;d--}else _!=="/$"&&_!=="/&"||d++}i=i.previousSibling}return null}function qp(i,d,_){switch(d=Bh(_),i){case"html":if(i=d.documentElement,!i)throw Error(s(452));return i;case"head":if(i=d.head,!i)throw Error(s(453));return i;case"body":if(i=d.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function jf(i){for(var d=i.attributes;d.length;)i.removeAttributeNode(d[0]);Nr(i)}var ro=new Map,Bd=new Set;function Lf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Wl=C.d;C.d={f:pg,r:Gp,D:ku,C:Oc,L:mg,m:c0,X:xb,S:u0,M:gg};function pg(){var i=Wl.f(),d=Nh();return i||d}function Gp(i){var d=oi(i);d!==null&&d.tag===5&&d.type==="form"?ph(d):Wl.r(i)}var Cu=typeof document>"u"?null:document;function Hh(i,d,_){var A=Cu;if(A&&typeof d=="string"&&d){var V=lr(d);V='link[rel="'+i+'"][href="'+V+'"]',typeof _=="string"&&(V+='[crossorigin="'+_+'"]'),Bd.has(V)||(Bd.add(V),i={rel:i,crossOrigin:_,href:d},A.querySelector(V)===null&&(d=A.createElement("link"),ti(d,"link",i),De(d),A.head.appendChild(d)))}}function ku(i){Wl.D(i),Hh("dns-prefetch",i,null)}function Oc(i,d){Wl.C(i,d),Hh("preconnect",i,d)}function mg(i,d,_){Wl.L(i,d,_);var A=Cu;if(A&&i&&d){var V='link[rel="preload"][as="'+lr(d)+'"]';d==="image"&&_&&_.imageSrcSet?(V+='[imagesrcset="'+lr(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(V+='[imagesizes="'+lr(_.imageSizes)+'"]')):V+='[href="'+lr(i)+'"]';var Y=V;switch(d){case"style":Y=Pf(i);break;case"script":Y=Df(i)}ro.has(Y)||(i=h({rel:"preload",href:d==="image"&&_&&_.imageSrcSet?void 0:i,as:d},_),ro.set(Y,i),A.querySelector(V)!==null||d==="style"&&A.querySelector(ql(Y))||d==="script"&&A.querySelector(Ud(Y))||(d=A.createElement("link"),ti(d,"link",i),De(d),A.head.appendChild(d)))}}function c0(i,d){Wl.m(i,d);var _=Cu;if(_&&i){var A=d&&typeof d.as=="string"?d.as:"script",V='link[rel="modulepreload"][as="'+lr(A)+'"][href="'+lr(i)+'"]',Y=V;switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":Y=Df(i)}if(!ro.has(Y)&&(i=h({rel:"modulepreload",href:i},d),ro.set(Y,i),_.querySelector(V)===null)){switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(Ud(Y)))return}A=_.createElement("link"),ti(A,"link",i),De(A),_.head.appendChild(A)}}}function u0(i,d,_){Wl.S(i,d,_);var A=Cu;if(A&&i){var V=we(A).hoistableStyles,Y=Pf(i);d=d||"default";var ct=V.get(Y);if(!ct){var kt={loading:0,preload:null};if(ct=A.querySelector(ql(Y)))kt.loading=5;else{i=h({rel:"stylesheet",href:i,"data-precedence":d},_),(_=ro.get(Y))&&$h(i,_);var ee=ct=A.createElement("link");De(ee),ti(ee,"link",i),ee._p=new Promise(function(pe,Re){ee.onload=pe,ee.onerror=Re}),ee.addEventListener("load",function(){kt.loading|=1}),ee.addEventListener("error",function(){kt.loading|=2}),kt.loading|=4,Vh(ct,d,A)}ct={type:"stylesheet",instance:ct,count:1,state:kt},V.set(Y,ct)}}}function xb(i,d){Wl.X(i,d);var _=Cu;if(_&&i){var A=we(_).hoistableScripts,V=Df(i),Y=A.get(V);Y||(Y=_.querySelector(Ud(V)),Y||(i=h({src:i,async:!0},d),(d=ro.get(V))&&Wh(i,d),Y=_.createElement("script"),De(Y),ti(Y,"link",i),_.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},A.set(V,Y))}}function gg(i,d){Wl.M(i,d);var _=Cu;if(_&&i){var A=we(_).hoistableScripts,V=Df(i),Y=A.get(V);Y||(Y=_.querySelector(Ud(V)),Y||(i=h({src:i,async:!0,type:"module"},d),(d=ro.get(V))&&Wh(i,d),Y=_.createElement("script"),De(Y),ti(Y,"link",i),_.head.appendChild(Y)),Y={type:"script",instance:Y,count:1,state:null},A.set(V,Y))}}function zd(i,d,_,A){var V=(V=X.current)?Lf(V):null;if(!V)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(d=Pf(_.href),_=we(V).hoistableStyles,A=_.get(d),A||(A={type:"style",instance:null,count:0,state:null},_.set(d,A)),A):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){i=Pf(_.href);var Y=we(V).hoistableStyles,ct=Y.get(i);if(ct||(V=V.ownerDocument||V,ct={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},Y.set(i,ct),(Y=V.querySelector(ql(i)))&&!Y._p&&(ct.instance=Y,ct.state.loading=5),ro.has(i)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},ro.set(i,_),Y||Fd(V,i,_,ct.state))),d&&A===null)throw Error(s(528,""));return ct}if(d&&A!==null)throw Error(s(529,""));return null;case"script":return d=_.async,_=_.src,typeof _=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=Df(_),_=we(V).hoistableScripts,A=_.get(d),A||(A={type:"script",instance:null,count:0,state:null},_.set(d,A)),A):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Pf(i){return'href="'+lr(i)+'"'}function ql(i){return'link[rel="stylesheet"]['+i+"]"}function f0(i){return h({},i,{"data-precedence":i.precedence,precedence:null})}function Fd(i,d,_,A){i.querySelector('link[rel="preload"][as="style"]['+d+"]")?A.loading=1:(d=i.createElement("link"),A.preload=d,d.addEventListener("load",function(){return A.loading|=1}),d.addEventListener("error",function(){return A.loading|=2}),ti(d,"link",_),De(d),i.head.appendChild(d))}function Df(i){return'[src="'+lr(i)+'"]'}function Ud(i){return"script[async]"+i}function Zp(i,d,_){if(d.count++,d.instance===null)switch(d.type){case"style":var A=i.querySelector('style[data-href~="'+lr(_.href)+'"]');if(A)return d.instance=A,De(A),A;var V=h({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return A=(i.ownerDocument||i).createElement("style"),De(A),ti(A,"style",V),Vh(A,_.precedence,i),d.instance=A;case"stylesheet":V=Pf(_.href);var Y=i.querySelector(ql(V));if(Y)return d.state.loading|=4,d.instance=Y,De(Y),Y;A=f0(_),(V=ro.get(V))&&$h(A,V),Y=(i.ownerDocument||i).createElement("link"),De(Y);var ct=Y;return ct._p=new Promise(function(kt,ee){ct.onload=kt,ct.onerror=ee}),ti(Y,"link",A),d.state.loading|=4,Vh(Y,_.precedence,i),d.instance=Y;case"script":return Y=Df(_.src),(V=i.querySelector(Ud(Y)))?(d.instance=V,De(V),V):(A=_,(V=ro.get(Y))&&(A=h({},_),Wh(A,V)),i=i.ownerDocument||i,V=i.createElement("script"),De(V),ti(V,"link",A),i.head.appendChild(V),d.instance=V);case"void":return null;default:throw Error(s(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(A=d.instance,d.state.loading|=4,Vh(A,_.precedence,i));return d.instance}function Vh(i,d,_){for(var A=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),V=A.length?A[A.length-1]:null,Y=V,ct=0;ct<A.length;ct++){var kt=A[ct];if(kt.dataset.precedence===d)Y=kt;else if(Y!==V)break}Y?Y.parentNode.insertBefore(i,Y.nextSibling):(d=_.nodeType===9?_.head:_,d.insertBefore(i,d.firstChild))}function $h(i,d){i.crossOrigin==null&&(i.crossOrigin=d.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=d.referrerPolicy),i.title==null&&(i.title=d.title)}function Wh(i,d){i.crossOrigin==null&&(i.crossOrigin=d.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=d.referrerPolicy),i.integrity==null&&(i.integrity=d.integrity)}var B=null;function J(i,d,_){if(B===null){var A=new Map,V=B=new Map;V.set(_,A)}else V=B,A=V.get(_),A||(A=new Map,V.set(_,A));if(A.has(i))return A;for(A.set(i,null),_=_.getElementsByTagName(i),V=0;V<_.length;V++){var Y=_[V];if(!(Y[Gn]||Y[fn]||i==="link"&&Y.getAttribute("rel")==="stylesheet")&&Y.namespaceURI!=="http://www.w3.org/2000/svg"){var ct=Y.getAttribute(d)||"";ct=i+ct;var kt=A.get(ct);kt?kt.push(Y):A.set(ct,[Y])}}return A}function at(i,d,_){i=i.ownerDocument||i,i.head.insertBefore(_,d==="title"?i.querySelector("head > title"):null)}function lt(i,d,_){if(_===1||d.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return i=d.disabled,typeof d.precedence=="string"&&i==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function dt(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function xt(i,d,_,A){if(_.type==="stylesheet"&&(typeof A.media!="string"||matchMedia(A.media).matches!==!1)&&(_.state.loading&4)===0){if(_.instance===null){var V=Pf(A.href),Y=d.querySelector(ql(V));if(Y){d=Y._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(i.count++,i=mt.bind(i),d.then(i,i)),_.state.loading|=4,_.instance=Y,De(Y);return}Y=d.ownerDocument||d,A=f0(A),(V=ro.get(V))&&$h(A,V),Y=Y.createElement("link"),De(Y);var ct=Y;ct._p=new Promise(function(kt,ee){ct.onload=kt,ct.onerror=ee}),ti(Y,"link",A),_.instance=Y}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(_,d),(d=_.state.preload)&&(_.state.loading&3)===0&&(i.count++,_=mt.bind(i),d.addEventListener("load",_),d.addEventListener("error",_))}}var yt=0;function ht(i,d){return i.stylesheets&&i.count===0&&wt(i,i.stylesheets),0<i.count||0<i.imgCount?function(_){var A=setTimeout(function(){if(i.stylesheets&&wt(i,i.stylesheets),i.unsuspend){var Y=i.unsuspend;i.unsuspend=null,Y()}},6e4+d);0<i.imgBytes&&yt===0&&(yt=62500*dg());var V=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&wt(i,i.stylesheets),i.unsuspend)){var Y=i.unsuspend;i.unsuspend=null,Y()}},(i.imgBytes>yt?50:800)+d);return i.unsuspend=_,function(){i.unsuspend=null,clearTimeout(A),clearTimeout(V)}}:null}function mt(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wt(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var vt=null;function wt(i,d){i.stylesheets=null,i.unsuspend!==null&&(i.count++,vt=new Map,d.forEach(Nt,i),vt=null,mt.call(i))}function Nt(i,d){if(!(d.state.loading&4)){var _=vt.get(i);if(_)var A=_.get(null);else{_=new Map,vt.set(i,_);for(var V=i.querySelectorAll("link[data-precedence],style[data-precedence]"),Y=0;Y<V.length;Y++){var ct=V[Y];(ct.nodeName==="LINK"||ct.getAttribute("media")!=="not all")&&(_.set(ct.dataset.precedence,ct),A=ct)}A&&_.set(null,A)}V=d.instance,ct=V.getAttribute("data-precedence"),Y=_.get(ct)||A,Y===A&&_.set(null,V),_.set(ct,V),this.count++,A=mt.bind(this),V.addEventListener("load",A),V.addEventListener("error",A),Y?Y.parentNode.insertBefore(V,Y.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(V,i.firstChild)),d.state.loading|=4}}var Rt={$$typeof:E,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function qt(i,d,_,A,V,Y,ct,kt,ee){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zn(0),this.hiddenUpdates=Zn(null),this.identifierPrefix=A,this.onUncaughtError=V,this.onCaughtError=Y,this.onRecoverableError=ct,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ee,this.incompleteTransitions=new Map}function jt(i,d,_,A,V,Y,ct,kt,ee,pe,Re,Ie){return i=new qt(i,d,_,ct,ee,pe,Re,Ie,kt),d=1,Y===!0&&(d|=24),Y=$i(3,null,null,d),i.current=Y,Y.stateNode=i,d=xl(),d.refCount++,i.pooledCache=d,d.refCount++,Y.memoizedState={element:A,isDehydrated:_,cache:d},ap(Y),i}function Lt(i){return i?(i=Vi,i):Vi}function Tt(i,d,_,A,V,Y){V=Lt(V),A.context===null?A.context=V:A.pendingContext=V,A=Ci(d),A.payload={element:_},Y=Y===void 0?null:Y,Y!==null&&(A.callback=Y),_=Oo(i,A,d),_!==null&&(ts(_,i,d),id(_,i,d))}function Ot(i,d){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var _=i.retryLane;i.retryLane=_!==0&&_<d?_:d}}function It(i,d){Ot(i,d),(i=i.alternate)&&Ot(i,d)}function Mt(i){if(i.tag===13||i.tag===31){var d=uo(i,67108864);d!==null&&ts(d,i,67108864),It(i,67108864)}}function _t(i){if(i.tag===13||i.tag===31){var d=ho();d=ye(d);var _=uo(i,d);_!==null&&ts(_,i,d),It(i,d)}}var Et=!0;function Pt(i,d,_,A){var V=T.T;T.T=null;var Y=C.p;try{C.p=2,Ft(i,d,_,A)}finally{C.p=Y,T.T=V}}function Dt(i,d,_,A){var V=T.T;T.T=null;var Y=C.p;try{C.p=8,Ft(i,d,_,A)}finally{C.p=Y,T.T=V}}function Ft(i,d,_,A){if(Et){var V=Xt(A);if(V===null)Lh(i,d,A,Wt,_),te(i,A);else if(Me(V,i,d,_,A))A.stopPropagation();else if(te(i,A),d&4&&-1<je.indexOf(i)){for(;V!==null;){var Y=oi(V);if(Y!==null)switch(Y.tag){case 3:if(Y=Y.stateNode,Y.current.memoizedState.isDehydrated){var ct=Cn(Y.pendingLanes);if(ct!==0){var kt=Y;for(kt.pendingLanes|=2,kt.entangledLanes|=2;ct;){var ee=1<<31-dn(ct);kt.entanglements[1]|=ee,ct&=~ee}qo(Y),(cr&6)===0&&(Jr=me()+500,Nc(0))}}break;case 31:case 13:kt=uo(Y,2),kt!==null&&ts(kt,Y,2),Nh(),It(Y,2)}if(Y=Xt(A),Y===null&&Lh(i,d,A,Wt,_),Y===V)break;V=Y}V!==null&&A.stopPropagation()}else Lh(i,d,A,null,_)}}function Xt(i){return i=bs(i),Vt(i)}var Wt=null;function Vt(i){if(Wt=null,i=Cr(i),i!==null){var d=o(i);if(d===null)i=null;else{var _=d.tag;if(_===13){if(i=r(d),i!==null)return i;i=null}else if(_===31){if(i=c(d),i!==null)return i;i=null}else if(_===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;i=null}else d!==i&&(i=null)}}return Wt=i,null}function Zt(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case Pe:return 2;case Be:return 8;case He:case Je:return 32;case sn:return 268435456;default:return 32}default:return 32}}var Ut=!1,$t=null,Gt=null,se=null,fe=new Map,bt=new Map,ve=[],je="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function te(i,d){switch(i){case"focusin":case"focusout":$t=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":se=null;break;case"pointerover":case"pointerout":fe.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":bt.delete(d.pointerId)}}function Oe(i,d,_,A,V,Y){return i===null||i.nativeEvent!==Y?(i={blockedOn:d,domEventName:_,eventSystemFlags:A,nativeEvent:Y,targetContainers:[V]},d!==null&&(d=oi(d),d!==null&&Mt(d)),i):(i.eventSystemFlags|=A,d=i.targetContainers,V!==null&&d.indexOf(V)===-1&&d.push(V),i)}function Me(i,d,_,A,V){switch(d){case"focusin":return $t=Oe($t,i,d,_,A,V),!0;case"dragenter":return Gt=Oe(Gt,i,d,_,A,V),!0;case"mouseover":return se=Oe(se,i,d,_,A,V),!0;case"pointerover":var Y=V.pointerId;return fe.set(Y,Oe(fe.get(Y)||null,i,d,_,A,V)),!0;case"gotpointercapture":return Y=V.pointerId,bt.set(Y,Oe(bt.get(Y)||null,i,d,_,A,V)),!0}return!1}function Se(i){var d=Cr(i.target);if(d!==null){var _=o(d);if(_!==null){if(d=_.tag,d===13){if(d=r(_),d!==null){i.blockedOn=d,yn(i.priority,function(){_t(_)});return}}else if(d===31){if(d=c(_),d!==null){i.blockedOn=d,yn(i.priority,function(){_t(_)});return}}else if(d===3&&_.stateNode.current.memoizedState.isDehydrated){i.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}i.blockedOn=null}function he(i){if(i.blockedOn!==null)return!1;for(var d=i.targetContainers;0<d.length;){var _=Xt(i.nativeEvent);if(_===null){_=i.nativeEvent;var A=new _.constructor(_.type,_);rs=A,_.target.dispatchEvent(A),rs=null}else return d=oi(_),d!==null&&Mt(d),i.blockedOn=_,!1;d.shift()}return!0}function le(i,d,_){he(i)&&_.delete(d)}function Ee(){Ut=!1,$t!==null&&he($t)&&($t=null),Gt!==null&&he(Gt)&&(Gt=null),se!==null&&he(se)&&(se=null),fe.forEach(le),bt.forEach(le)}function Ae(i,d){i.blockedOn===d&&(i.blockedOn=null,Ut||(Ut=!0,m.unstable_scheduleCallback(m.unstable_NormalPriority,Ee)))}var We=null;function nn(i){We!==i&&(We=i,m.unstable_scheduleCallback(m.unstable_NormalPriority,function(){We===i&&(We=null);for(var d=0;d<i.length;d+=3){var _=i[d],A=i[d+1],V=i[d+2];if(typeof A!="function"){if(Vt(A||_)===null)continue;break}var Y=oi(_);Y!==null&&(i.splice(d,3),d-=3,yp(Y,{pending:!0,data:V,method:_.method,action:A},A,V))}}))}function Fe(i){function d(ee){return Ae(ee,i)}$t!==null&&Ae($t,i),Gt!==null&&Ae(Gt,i),se!==null&&Ae(se,i),fe.forEach(d),bt.forEach(d);for(var _=0;_<ve.length;_++){var A=ve[_];A.blockedOn===i&&(A.blockedOn=null)}for(;0<ve.length&&(_=ve[0],_.blockedOn===null);)Se(_),_.blockedOn===null&&ve.shift();if(_=(i.ownerDocument||i).$$reactFormReplay,_!=null)for(A=0;A<_.length;A+=3){var V=_[A],Y=_[A+1],ct=V[gn]||null;if(typeof Y=="function")ct||nn(_);else if(ct){var kt=null;if(Y&&Y.hasAttribute("formAction")){if(V=Y,ct=Y[gn]||null)kt=ct.formAction;else if(Vt(V)!==null)continue}else kt=ct.action;typeof kt=="function"?_[A+1]=kt:(_.splice(A,3),A-=3),nn(_)}}}function rn(){function i(Y){Y.canIntercept&&Y.info==="react-transition"&&Y.intercept({handler:function(){return new Promise(function(ct){return V=ct})},focusReset:"manual",scroll:"manual"})}function d(){V!==null&&(V(),V=null),A||setTimeout(_,20)}function _(){if(!A&&!navigation.transition){var Y=navigation.currentEntry;Y&&Y.url!=null&&navigation.navigate(Y.url,{state:Y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var A=!1,V=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(_,100),function(){A=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),V!==null&&(V(),V=null)}}}function pn(i){this._internalRoot=i}An.prototype.render=pn.prototype.render=function(i){var d=this._internalRoot;if(d===null)throw Error(s(409));var _=d.current,A=ho();Tt(_,A,i,d,null,null)},An.prototype.unmount=pn.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var d=i.containerInfo;Tt(i.current,2,null,i,null,null),Nh(),d[wn]=null}};function An(i){this._internalRoot=i}An.prototype.unstable_scheduleHydration=function(i){if(i){var d=Qe();i={blockedOn:null,target:i,priority:d};for(var _=0;_<ve.length&&d!==0&&d<ve[_].priority;_++);ve.splice(_,0,i),_===0&&Se(i)}};var zn=a.version;if(zn!=="19.2.1")throw Error(s(527,zn,"19.2.1"));C.findDOMNode=function(i){var d=i._reactInternals;if(d===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=n(d),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var en={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tn.isDisabled&&tn.supportsFiber)try{ge=tn.inject(en),Ve=tn}catch{}}return Yp.createRoot=function(i,d){if(!u(i))throw Error(s(299));var _=!1,A="",V=bd,Y=yd,ct=ia;return d!=null&&(d.unstable_strictMode===!0&&(_=!0),d.identifierPrefix!==void 0&&(A=d.identifierPrefix),d.onUncaughtError!==void 0&&(V=d.onUncaughtError),d.onCaughtError!==void 0&&(Y=d.onCaughtError),d.onRecoverableError!==void 0&&(ct=d.onRecoverableError)),d=jt(i,1,!1,null,null,_,A,null,V,Y,ct,rn),i[wn]=d.current,Rf(i),new pn(d)},Yp.hydrateRoot=function(i,d,_){if(!u(i))throw Error(s(299));var A=!1,V="",Y=bd,ct=yd,kt=ia,ee=null;return _!=null&&(_.unstable_strictMode===!0&&(A=!0),_.identifierPrefix!==void 0&&(V=_.identifierPrefix),_.onUncaughtError!==void 0&&(Y=_.onUncaughtError),_.onCaughtError!==void 0&&(ct=_.onCaughtError),_.onRecoverableError!==void 0&&(kt=_.onRecoverableError),_.formState!==void 0&&(ee=_.formState)),d=jt(i,1,!0,d,_??null,A,V,ee,Y,ct,kt,rn),d.context=Lt(null),_=d.current,A=ho(),A=ye(A),V=Ci(A),V.callback=null,Oo(_,V,A),_=A,d.current.lanes=_,cn(d,_),qo(d),i[wn]=d.current,Rf(i),new An(d)},Yp.version="19.2.1",Yp}var Ab;function Xv(){if(Ab)return vg.exports;Ab=1;function m(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(m)}catch(a){console.error(a)}}return m(),vg.exports=Zv(),vg.exports}var Yv=Xv(),sm={exports:{}};var Kv=sm.exports,Rb;function Qv(){return Rb||(Rb=1,(function(m,a){(function(t,s){s(a)})(Kv,(function(t){var s="1.9.4";function u(b){var N,$,nt,ft;for($=1,nt=arguments.length;$<nt;$++){ft=arguments[$];for(N in ft)b[N]=ft[N]}return b}var o=Object.create||(function(){function b(){}return function(N){return b.prototype=N,new b}})();function r(b,N){var $=Array.prototype.slice;if(b.bind)return b.bind.apply(b,$.call(arguments,1));var nt=$.call(arguments,2);return function(){return b.apply(N,nt.length?nt.concat($.call(arguments)):arguments)}}var c=0;function l(b){return"_leaflet_id"in b||(b._leaflet_id=++c),b._leaflet_id}function n(b,N,$){var nt,ft,At,oe;return oe=function(){nt=!1,ft&&(At.apply($,ft),ft=!1)},At=function(){nt?ft=arguments:(b.apply($,arguments),setTimeout(oe,N),nt=!0)},At}function f(b,N,$){var nt=N[1],ft=N[0],At=nt-ft;return b===nt&&$?b:((b-ft)%At+At)%At+ft}function h(){return!1}function p(b,N){if(N===!1)return b;var $=Math.pow(10,N===void 0?6:N);return Math.round(b*$)/$}function g(b){return b.trim?b.trim():b.replace(/^\s+|\s+$/g,"")}function v(b){return g(b).split(/\s+/)}function x(b,N){Object.prototype.hasOwnProperty.call(b,"options")||(b.options=b.options?o(b.options):{});for(var $ in N)b.options[$]=N[$];return b.options}function y(b,N,$){var nt=[];for(var ft in b)nt.push(encodeURIComponent($?ft.toUpperCase():ft)+"="+encodeURIComponent(b[ft]));return(!N||N.indexOf("?")===-1?"?":"&")+nt.join("&")}var w=/\{ *([\w_ -]+) *\}/g;function S(b,N){return b.replace(w,function($,nt){var ft=N[nt];if(ft===void 0)throw new Error("No value provided for variable "+$);return typeof ft=="function"&&(ft=ft(N)),ft})}var E=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"};function I(b,N){for(var $=0;$<b.length;$++)if(b[$]===N)return $;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(b){return window["webkit"+b]||window["moz"+b]||window["ms"+b]}var K=0;function z(b){var N=+new Date,$=Math.max(0,16-(N-K));return K=N+$,window.setTimeout(b,$)}var W=window.requestAnimationFrame||Z("RequestAnimationFrame")||z,Q=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(b){window.clearTimeout(b)};function rt(b,N,$){if($&&W===z)b.call(N);else return W.call(window,r(b,N))}function tt(b){b&&Q.call(window,b)}var j={__proto__:null,extend:u,create:o,bind:r,get lastId(){return c},stamp:l,throttle:n,wrapNum:f,falseFn:h,formatNum:p,trim:g,splitWords:v,setOptions:x,getParamString:y,template:S,isArray:E,indexOf:I,emptyImageUrl:D,requestFn:W,cancelFn:Q,requestAnimFrame:rt,cancelAnimFrame:tt};function F(){}F.extend=function(b){var N=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},$=N.__super__=this.prototype,nt=o($);nt.constructor=N,N.prototype=nt;for(var ft in this)Object.prototype.hasOwnProperty.call(this,ft)&&ft!=="prototype"&&ft!=="__super__"&&(N[ft]=this[ft]);return b.statics&&u(N,b.statics),b.includes&&(R(b.includes),u.apply(null,[nt].concat(b.includes))),u(nt,b),delete nt.statics,delete nt.includes,nt.options&&(nt.options=$.options?o($.options):{},u(nt.options,b.options)),nt._initHooks=[],nt.callInitHooks=function(){if(!this._initHooksCalled){$.callInitHooks&&$.callInitHooks.call(this),this._initHooksCalled=!0;for(var At=0,oe=nt._initHooks.length;At<oe;At++)nt._initHooks[At].call(this)}},N},F.include=function(b){var N=this.prototype.options;return u(this.prototype,b),b.options&&(this.prototype.options=N,this.mergeOptions(b.options)),this},F.mergeOptions=function(b){return u(this.prototype.options,b),this},F.addInitHook=function(b){var N=Array.prototype.slice.call(arguments,1),$=typeof b=="function"?b:function(){this[b].apply(this,N)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push($),this};function R(b){if(!(typeof L>"u"||!L||!L.Mixin)){b=E(b)?b:[b];for(var N=0;N<b.length;N++)b[N]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var T={on:function(b,N,$){if(typeof b=="object")for(var nt in b)this._on(nt,b[nt],N);else{b=v(b);for(var ft=0,At=b.length;ft<At;ft++)this._on(b[ft],N,$)}return this},off:function(b,N,$){if(!arguments.length)delete this._events;else if(typeof b=="object")for(var nt in b)this._off(nt,b[nt],N);else{b=v(b);for(var ft=arguments.length===1,At=0,oe=b.length;At<oe;At++)ft?this._off(b[At]):this._off(b[At],N,$)}return this},_on:function(b,N,$,nt){if(typeof N!="function"){console.warn("wrong listener type: "+typeof N);return}if(this._listens(b,N,$)===!1){$===this&&($=void 0);var ft={fn:N,ctx:$};nt&&(ft.once=!0),this._events=this._events||{},this._events[b]=this._events[b]||[],this._events[b].push(ft)}},_off:function(b,N,$){var nt,ft,At;if(this._events&&(nt=this._events[b],!!nt)){if(arguments.length===1){if(this._firingCount)for(ft=0,At=nt.length;ft<At;ft++)nt[ft].fn=h;delete this._events[b];return}if(typeof N!="function"){console.warn("wrong listener type: "+typeof N);return}var oe=this._listens(b,N,$);if(oe!==!1){var ce=nt[oe];this._firingCount&&(ce.fn=h,this._events[b]=nt=nt.slice()),nt.splice(oe,1)}}},fire:function(b,N,$){if(!this.listens(b,$))return this;var nt=u({},N,{type:b,target:this,sourceTarget:N&&N.sourceTarget||this});if(this._events){var ft=this._events[b];if(ft){this._firingCount=this._firingCount+1||1;for(var At=0,oe=ft.length;At<oe;At++){var ce=ft[At],Ne=ce.fn;ce.once&&this.off(b,Ne,ce.ctx),Ne.call(ce.ctx||this,nt)}this._firingCount--}}return $&&this._propagateEvent(nt),this},listens:function(b,N,$,nt){typeof b!="string"&&console.warn('"string" type argument expected');var ft=N;typeof N!="function"&&(nt=!!N,ft=void 0,$=void 0);var At=this._events&&this._events[b];if(At&&At.length&&this._listens(b,ft,$)!==!1)return!0;if(nt){for(var oe in this._eventParents)if(this._eventParents[oe].listens(b,N,$,nt))return!0}return!1},_listens:function(b,N,$){if(!this._events)return!1;var nt=this._events[b]||[];if(!N)return!!nt.length;$===this&&($=void 0);for(var ft=0,At=nt.length;ft<At;ft++)if(nt[ft].fn===N&&nt[ft].ctx===$)return ft;return!1},once:function(b,N,$){if(typeof b=="object")for(var nt in b)this._on(nt,b[nt],N,!0);else{b=v(b);for(var ft=0,At=b.length;ft<At;ft++)this._on(b[ft],N,$,!0)}return this},addEventParent:function(b){return this._eventParents=this._eventParents||{},this._eventParents[l(b)]=b,this},removeEventParent:function(b){return this._eventParents&&delete this._eventParents[l(b)],this},_propagateEvent:function(b){for(var N in this._eventParents)this._eventParents[N].fire(b.type,u({layer:b.target,propagatedFrom:b.target},b),!0)}};T.addEventListener=T.on,T.removeEventListener=T.clearAllEventListeners=T.off,T.addOneTimeEventListener=T.once,T.fireEvent=T.fire,T.hasEventListeners=T.listens;var C=F.extend(T);function k(b,N,$){this.x=$?Math.round(b):b,this.y=$?Math.round(N):N}var M=Math.trunc||function(b){return b>0?Math.floor(b):Math.ceil(b)};k.prototype={clone:function(){return new k(this.x,this.y)},add:function(b){return this.clone()._add(O(b))},_add:function(b){return this.x+=b.x,this.y+=b.y,this},subtract:function(b){return this.clone()._subtract(O(b))},_subtract:function(b){return this.x-=b.x,this.y-=b.y,this},divideBy:function(b){return this.clone()._divideBy(b)},_divideBy:function(b){return this.x/=b,this.y/=b,this},multiplyBy:function(b){return this.clone()._multiplyBy(b)},_multiplyBy:function(b){return this.x*=b,this.y*=b,this},scaleBy:function(b){return new k(this.x*b.x,this.y*b.y)},unscaleBy:function(b){return new k(this.x/b.x,this.y/b.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=M(this.x),this.y=M(this.y),this},distanceTo:function(b){b=O(b);var N=b.x-this.x,$=b.y-this.y;return Math.sqrt(N*N+$*$)},equals:function(b){return b=O(b),b.x===this.x&&b.y===this.y},contains:function(b){return b=O(b),Math.abs(b.x)<=Math.abs(this.x)&&Math.abs(b.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function O(b,N,$){return b instanceof k?b:E(b)?new k(b[0],b[1]):b==null?b:typeof b=="object"&&"x"in b&&"y"in b?new k(b.x,b.y):new k(b,N,$)}function P(b,N){if(b)for(var $=N?[b,N]:b,nt=0,ft=$.length;nt<ft;nt++)this.extend($[nt])}P.prototype={extend:function(b){var N,$;if(!b)return this;if(b instanceof k||typeof b[0]=="number"||"x"in b)N=$=O(b);else if(b=H(b),N=b.min,$=b.max,!N||!$)return this;return!this.min&&!this.max?(this.min=N.clone(),this.max=$.clone()):(this.min.x=Math.min(N.x,this.min.x),this.max.x=Math.max($.x,this.max.x),this.min.y=Math.min(N.y,this.min.y),this.max.y=Math.max($.y,this.max.y)),this},getCenter:function(b){return O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,b)},getBottomLeft:function(){return O(this.min.x,this.max.y)},getTopRight:function(){return O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(b){var N,$;return typeof b[0]=="number"||b instanceof k?b=O(b):b=H(b),b instanceof P?(N=b.min,$=b.max):N=$=b,N.x>=this.min.x&&$.x<=this.max.x&&N.y>=this.min.y&&$.y<=this.max.y},intersects:function(b){b=H(b);var N=this.min,$=this.max,nt=b.min,ft=b.max,At=ft.x>=N.x&&nt.x<=$.x,oe=ft.y>=N.y&&nt.y<=$.y;return At&&oe},overlaps:function(b){b=H(b);var N=this.min,$=this.max,nt=b.min,ft=b.max,At=ft.x>N.x&&nt.x<$.x,oe=ft.y>N.y&&nt.y<$.y;return At&&oe},isValid:function(){return!!(this.min&&this.max)},pad:function(b){var N=this.min,$=this.max,nt=Math.abs(N.x-$.x)*b,ft=Math.abs(N.y-$.y)*b;return H(O(N.x-nt,N.y-ft),O($.x+nt,$.y+ft))},equals:function(b){return b?(b=H(b),this.min.equals(b.getTopLeft())&&this.max.equals(b.getBottomRight())):!1}};function H(b,N){return!b||b instanceof P?b:new P(b,N)}function et(b,N){if(b)for(var $=N?[b,N]:b,nt=0,ft=$.length;nt<ft;nt++)this.extend($[nt])}et.prototype={extend:function(b){var N=this._southWest,$=this._northEast,nt,ft;if(b instanceof pt)nt=b,ft=b;else if(b instanceof et){if(nt=b._southWest,ft=b._northEast,!nt||!ft)return this}else return b?this.extend(X(b)||it(b)):this;return!N&&!$?(this._southWest=new pt(nt.lat,nt.lng),this._northEast=new pt(ft.lat,ft.lng)):(N.lat=Math.min(nt.lat,N.lat),N.lng=Math.min(nt.lng,N.lng),$.lat=Math.max(ft.lat,$.lat),$.lng=Math.max(ft.lng,$.lng)),this},pad:function(b){var N=this._southWest,$=this._northEast,nt=Math.abs(N.lat-$.lat)*b,ft=Math.abs(N.lng-$.lng)*b;return new et(new pt(N.lat-nt,N.lng-ft),new pt($.lat+nt,$.lng+ft))},getCenter:function(){return new pt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new pt(this.getNorth(),this.getWest())},getSouthEast:function(){return new pt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(b){typeof b[0]=="number"||b instanceof pt||"lat"in b?b=X(b):b=it(b);var N=this._southWest,$=this._northEast,nt,ft;return b instanceof et?(nt=b.getSouthWest(),ft=b.getNorthEast()):nt=ft=b,nt.lat>=N.lat&&ft.lat<=$.lat&&nt.lng>=N.lng&&ft.lng<=$.lng},intersects:function(b){b=it(b);var N=this._southWest,$=this._northEast,nt=b.getSouthWest(),ft=b.getNorthEast(),At=ft.lat>=N.lat&&nt.lat<=$.lat,oe=ft.lng>=N.lng&&nt.lng<=$.lng;return At&&oe},overlaps:function(b){b=it(b);var N=this._southWest,$=this._northEast,nt=b.getSouthWest(),ft=b.getNorthEast(),At=ft.lat>N.lat&&nt.lat<$.lat,oe=ft.lng>N.lng&&nt.lng<$.lng;return At&&oe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(b,N){return b?(b=it(b),this._southWest.equals(b.getSouthWest(),N)&&this._northEast.equals(b.getNorthEast(),N)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function it(b,N){return b instanceof et?b:new et(b,N)}function pt(b,N,$){if(isNaN(b)||isNaN(N))throw new Error("Invalid LatLng object: ("+b+", "+N+")");this.lat=+b,this.lng=+N,$!==void 0&&(this.alt=+$)}pt.prototype={equals:function(b,N){if(!b)return!1;b=X(b);var $=Math.max(Math.abs(this.lat-b.lat),Math.abs(this.lng-b.lng));return $<=(N===void 0?1e-9:N)},toString:function(b){return"LatLng("+p(this.lat,b)+", "+p(this.lng,b)+")"},distanceTo:function(b){return G.distance(this,X(b))},wrap:function(){return G.wrapLatLng(this)},toBounds:function(b){var N=180*b/40075017,$=N/Math.cos(Math.PI/180*this.lat);return it([this.lat-N,this.lng-$],[this.lat+N,this.lng+$])},clone:function(){return new pt(this.lat,this.lng,this.alt)}};function X(b,N,$){return b instanceof pt?b:E(b)&&typeof b[0]!="object"?b.length===3?new pt(b[0],b[1],b[2]):b.length===2?new pt(b[0],b[1]):null:b==null?b:typeof b=="object"&&"lat"in b?new pt(b.lat,"lng"in b?b.lng:b.lon,b.alt):N===void 0?null:new pt(b,N,$)}var ut={latLngToPoint:function(b,N){var $=this.projection.project(b),nt=this.scale(N);return this.transformation._transform($,nt)},pointToLatLng:function(b,N){var $=this.scale(N),nt=this.transformation.untransform(b,$);return this.projection.unproject(nt)},project:function(b){return this.projection.project(b)},unproject:function(b){return this.projection.unproject(b)},scale:function(b){return 256*Math.pow(2,b)},zoom:function(b){return Math.log(b/256)/Math.LN2},getProjectedBounds:function(b){if(this.infinite)return null;var N=this.projection.bounds,$=this.scale(b),nt=this.transformation.transform(N.min,$),ft=this.transformation.transform(N.max,$);return new P(nt,ft)},infinite:!1,wrapLatLng:function(b){var N=this.wrapLng?f(b.lng,this.wrapLng,!0):b.lng,$=this.wrapLat?f(b.lat,this.wrapLat,!0):b.lat,nt=b.alt;return new pt($,N,nt)},wrapLatLngBounds:function(b){var N=b.getCenter(),$=this.wrapLatLng(N),nt=N.lat-$.lat,ft=N.lng-$.lng;if(nt===0&&ft===0)return b;var At=b.getSouthWest(),oe=b.getNorthEast(),ce=new pt(At.lat-nt,At.lng-ft),Ne=new pt(oe.lat-nt,oe.lng-ft);return new et(ce,Ne)}},G=u({},ut,{wrapLng:[-180,180],R:6371e3,distance:function(b,N){var $=Math.PI/180,nt=b.lat*$,ft=N.lat*$,At=Math.sin((N.lat-b.lat)*$/2),oe=Math.sin((N.lng-b.lng)*$/2),ce=At*At+Math.cos(nt)*Math.cos(ft)*oe*oe,Ne=2*Math.atan2(Math.sqrt(ce),Math.sqrt(1-ce));return this.R*Ne}}),U=6378137,st={R:U,MAX_LATITUDE:85.0511287798,project:function(b){var N=Math.PI/180,$=this.MAX_LATITUDE,nt=Math.max(Math.min($,b.lat),-$),ft=Math.sin(nt*N);return new k(this.R*b.lng*N,this.R*Math.log((1+ft)/(1-ft))/2)},unproject:function(b){var N=180/Math.PI;return new pt((2*Math.atan(Math.exp(b.y/this.R))-Math.PI/2)*N,b.x*N/this.R)},bounds:(function(){var b=U*Math.PI;return new P([-b,-b],[b,b])})()};function gt(b,N,$,nt){if(E(b)){this._a=b[0],this._b=b[1],this._c=b[2],this._d=b[3];return}this._a=b,this._b=N,this._c=$,this._d=nt}gt.prototype={transform:function(b,N){return this._transform(b.clone(),N)},_transform:function(b,N){return N=N||1,b.x=N*(this._a*b.x+this._b),b.y=N*(this._c*b.y+this._d),b},untransform:function(b,N){return N=N||1,new k((b.x/N-this._b)/this._a,(b.y/N-this._d)/this._c)}};function zt(b,N,$,nt){return new gt(b,N,$,nt)}var St=u({},G,{code:"EPSG:3857",projection:st,transformation:(function(){var b=.5/(Math.PI*st.R);return zt(b,.5,-b,.5)})()}),Bt=u({},St,{code:"EPSG:900913"});function ie(b){return document.createElementNS("http://www.w3.org/2000/svg",b)}function re(b,N){var $="",nt,ft,At,oe,ce,Ne;for(nt=0,At=b.length;nt<At;nt++){for(ce=b[nt],ft=0,oe=ce.length;ft<oe;ft++)Ne=ce[ft],$+=(ft?"L":"M")+Ne.x+" "+Ne.y;$+=N?be.svg?"z":"x":""}return $||"M0 0"}var Ct=document.documentElement.style,Yt="ActiveXObject"in window,Qt=Yt&&!document.addEventListener,Ht="msLaunchUri"in navigator&&!("documentMode"in document),Jt=ye("webkit"),ne=ye("android"),ae=ye("android 2")||ye("android 3"),me=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Le=ne&&ye("Google")&&me<537&&!("AudioNode"in window),Pe=!!window.opera,Be=!Ht&&ye("chrome"),He=ye("gecko")&&!Jt&&!Pe&&!Yt,Je=!Be&&ye("safari"),sn=ye("phantom"),un="OTransition"in Ct,an=navigator.platform.indexOf("Win")===0,ge=Yt&&"transition"in Ct,Ve="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ae,Ke="MozPerspective"in Ct,dn=!window.L_DISABLE_3D&&(ge||Ve||Ke)&&!un&&!sn,ln=typeof orientation<"u"||ye("mobile"),$n=ln&&Jt,hr=ln&&Ve,Ye=!window.PointerEvent&&window.MSPointerEvent,Xn=!!(window.PointerEvent||Ye),Wn="ontouchstart"in window||!!window.TouchEvent,Cn=!window.L_NO_TOUCH&&(Wn||Xn),br=ln&&Pe,Ge=ln&&He,Ln=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ir=(function(){var b=!1;try{var N=Object.defineProperty({},"passive",{get:function(){b=!0}});window.addEventListener("testPassiveEventSupport",h,N),window.removeEventListener("testPassiveEventSupport",h,N)}catch{}return b})(),Zn=(function(){return!!document.createElement("canvas").getContext})(),cn=!!(document.createElementNS&&ie("svg").createSVGRect),Qn=!!cn&&(function(){var b=document.createElement("div");return b.innerHTML="<svg/>",(b.firstChild&&b.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),qn=!cn&&(function(){try{var b=document.createElement("div");b.innerHTML='<v:shape adj="1"/>';var N=b.firstChild;return N.style.behavior="url(#default#VML)",N&&typeof N.adj=="object"}catch{return!1}})(),jn=navigator.platform.indexOf("Mac")===0,ue=navigator.platform.indexOf("Linux")===0;function ye(b){return navigator.userAgent.toLowerCase().indexOf(b)>=0}var be={ie:Yt,ielt9:Qt,edge:Ht,webkit:Jt,android:ne,android23:ae,androidStock:Le,opera:Pe,chrome:Be,gecko:He,safari:Je,phantom:sn,opera12:un,win:an,ie3d:ge,webkit3d:Ve,gecko3d:Ke,any3d:dn,mobile:ln,mobileWebkit:$n,mobileWebkit3d:hr,msPointer:Ye,pointer:Xn,touch:Cn,touchNative:Wn,mobileOpera:br,mobileGecko:Ge,retina:Ln,passiveEvents:ir,canvas:Zn,svg:cn,vml:qn,inlineSvg:Qn,mac:jn,linux:ue},Qe=be.msPointer?"MSPointerDown":"pointerdown",yn=be.msPointer?"MSPointerMove":"pointermove",qe=be.msPointer?"MSPointerUp":"pointerup",fn=be.msPointer?"MSPointerCancel":"pointercancel",gn={touchstart:Qe,touchmove:yn,touchend:qe,touchcancel:fn},wn={touchstart:we,touchmove:Kt,touchend:Kt,touchcancel:Kt},bn={},Sn=!1;function Fn(b,N,$){return N==="touchstart"&&oi(),wn[N]?($=wn[N].bind(this,$),b.addEventListener(gn[N],$,!1),$):(console.warn("wrong event specified:",N),h)}function pr(b,N,$){if(!gn[N]){console.warn("wrong event specified:",N);return}b.removeEventListener(gn[N],$,!1)}function Gn(b){bn[b.pointerId]=b}function Nr(b){bn[b.pointerId]&&(bn[b.pointerId]=b)}function Cr(b){delete bn[b.pointerId]}function oi(){Sn||(document.addEventListener(Qe,Gn,!0),document.addEventListener(yn,Nr,!0),document.addEventListener(qe,Cr,!0),document.addEventListener(fn,Cr,!0),Sn=!0)}function Kt(b,N){if(N.pointerType!==(N.MSPOINTER_TYPE_MOUSE||"mouse")){N.touches=[];for(var $ in bn)N.touches.push(bn[$]);N.changedTouches=[N],b(N)}}function we(b,N){N.MSPOINTER_TYPE_TOUCH&&N.pointerType===N.MSPOINTER_TYPE_TOUCH&&Xr(N),Kt(b,N)}function De(b){var N={},$,nt;for(nt in b)$=b[nt],N[nt]=$&&$.bind?$.bind(b):$;return b=N,N.type="dblclick",N.detail=2,N.isTrusted=!1,N._simulated=!0,N}var $e=200;function Tn(b,N){b.addEventListener("dblclick",N);var $=0,nt;function ft(At){if(At.detail!==1){nt=At.detail;return}if(!(At.pointerType==="mouse"||At.sourceCapabilities&&!At.sourceCapabilities.firesTouchEvents)){var oe=To(At);if(!(oe.some(function(Ne){return Ne instanceof HTMLLabelElement&&Ne.attributes.for})&&!oe.some(function(Ne){return Ne instanceof HTMLInputElement||Ne instanceof HTMLSelectElement}))){var ce=Date.now();ce-$<=$e?(nt++,nt===2&&N(De(At))):nt=1,$=ce}}}return b.addEventListener("click",ft),{dblclick:N,simDblclick:ft}}function Ze(b,N){b.removeEventListener("dblclick",N.dblclick),b.removeEventListener("click",N.simDblclick)}var Xe=er(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),vn=er(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Dn=vn==="webkitTransition"||vn==="OTransition"?vn+"End":"transitionend";function Bn(b){return typeof b=="string"?document.getElementById(b):b}function kn(b,N){var $=b.style[N]||b.currentStyle&&b.currentStyle[N];if((!$||$==="auto")&&document.defaultView){var nt=document.defaultView.getComputedStyle(b,null);$=nt?nt[N]:null}return $==="auto"?null:$}function xn(b,N,$){var nt=document.createElement(b);return nt.className=N||"",$&&$.appendChild(nt),nt}function En(b){var N=b.parentNode;N&&N.removeChild(b)}function Un(b){for(;b.firstChild;)b.removeChild(b.firstChild)}function Vn(b){var N=b.parentNode;N&&N.lastChild!==b&&N.appendChild(b)}function Ar(b){var N=b.parentNode;N&&N.firstChild!==b&&N.insertBefore(b,N.firstChild)}function Vr(b,N){if(b.classList!==void 0)return b.classList.contains(N);var $=di(b);return $.length>0&&new RegExp("(^|\\s)"+N+"(\\s|$)").test($)}function In(b,N){if(b.classList!==void 0)for(var $=v(N),nt=0,ft=$.length;nt<ft;nt++)b.classList.add($[nt]);else if(!Vr(b,N)){var At=di(b);ps(b,(At?At+" ":"")+N)}}function mr(b,N){b.classList!==void 0?b.classList.remove(N):ps(b,g((" "+di(b)+" ").replace(" "+N+" "," ")))}function ps(b,N){b.className.baseVal===void 0?b.className=N:b.className.baseVal=N}function di(b){return b.correspondingElement&&(b=b.correspondingElement),b.className.baseVal===void 0?b.className:b.className.baseVal}function lr(b,N){"opacity"in b.style?b.style.opacity=N:"filter"in b.style&&yr(b,N)}function yr(b,N){var $=!1,nt="DXImageTransform.Microsoft.Alpha";try{$=b.filters.item(nt)}catch{if(N===1)return}N=Math.round(N*100),$?($.Enabled=N!==100,$.Opacity=N):b.style.filter+=" progid:"+nt+"(opacity="+N+")"}function er(b){for(var N=document.documentElement.style,$=0;$<b.length;$++)if(b[$]in N)return b[$];return!1}function ai(b,N,$){var nt=N||new k(0,0);b.style[Xe]=(be.ie3d?"translate("+nt.x+"px,"+nt.y+"px)":"translate3d("+nt.x+"px,"+nt.y+"px,0)")+($?" scale("+$+")":"")}function wr(b,N){b._leaflet_pos=N,be.any3d?ai(b,N):(b.style.left=N.x+"px",b.style.top=N.y+"px")}function ns(b){return b._leaflet_pos||new k(0,0)}var Or,kr,ms;if("onselectstart"in document)Or=function(){Nn(window,"selectstart",Xr)},kr=function(){jr(window,"selectstart",Xr)};else{var wo=er(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Or=function(){if(wo){var b=document.documentElement.style;ms=b[wo],b[wo]="none"}},kr=function(){wo&&(document.documentElement.style[wo]=ms,ms=void 0)}}function Vs(){Nn(window,"dragstart",Xr)}function li(){jr(window,"dragstart",Xr)}var vi,gs;function ao(b){for(;b.tabIndex===-1;)b=b.parentNode;b.style&&(Rr(),vi=b,gs=b.style.outlineStyle,b.style.outlineStyle="none",Nn(window,"keydown",Rr))}function Rr(){vi&&(vi.style.outlineStyle=gs,vi=void 0,gs=void 0,jr(window,"keydown",Rr))}function rs(b){do b=b.parentNode;while((!b.offsetWidth||!b.offsetHeight)&&b!==document.body);return b}function bs(b){var N=b.getBoundingClientRect();return{x:N.width/b.offsetWidth||1,y:N.height/b.offsetHeight||1,boundingClientRect:N}}var xi={__proto__:null,TRANSFORM:Xe,TRANSITION:vn,TRANSITION_END:Dn,get:Bn,getStyle:kn,create:xn,remove:En,empty:Un,toFront:Vn,toBack:Ar,hasClass:Vr,addClass:In,removeClass:mr,setClass:ps,getClass:di,setOpacity:lr,testProp:er,setTransform:ai,setPosition:wr,getPosition:ns,get disableTextSelection(){return Or},get enableTextSelection(){return kr},disableImageDrag:Vs,enableImageDrag:li,preventOutline:ao,restoreOutline:Rr,getSizedParentNode:rs,getScale:bs};function Nn(b,N,$,nt){if(N&&typeof N=="object")for(var ft in N)So(b,ft,N[ft],$);else{N=v(N);for(var At=0,oe=N.length;At<oe;At++)So(b,N[At],$,nt)}return this}var ci="_leaflet_events";function jr(b,N,$,nt){if(arguments.length===1)Yf(b),delete b[ci];else if(N&&typeof N=="object")for(var ft in N)Du(b,ft,N[ft],$);else if(N=v(N),arguments.length===2)Yf(b,function(ce){return I(N,ce)!==-1});else for(var At=0,oe=N.length;At<oe;At++)Du(b,N[At],$,nt);return this}function Yf(b,N){for(var $ in b[ci]){var nt=$.split(/\d/)[0];(!N||N(nt))&&Du(b,nt,null,null,$)}}var al={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function So(b,N,$,nt){var ft=N+l($)+(nt?"_"+l(nt):"");if(b[ci]&&b[ci][ft])return this;var At=function(ce){return $.call(nt||b,ce||window.event)},oe=At;!be.touchNative&&be.pointer&&N.indexOf("touch")===0?At=Fn(b,N,At):be.touch&&N==="dblclick"?At=Tn(b,At):"addEventListener"in b?N==="touchstart"||N==="touchmove"||N==="wheel"||N==="mousewheel"?b.addEventListener(al[N]||N,At,be.passiveEvents?{passive:!1}:!1):N==="mouseenter"||N==="mouseleave"?(At=function(ce){ce=ce||window.event,Fi(b,ce)&&oe(ce)},b.addEventListener(al[N],At,!1)):b.addEventListener(N,oe,!1):b.attachEvent("on"+N,At),b[ci]=b[ci]||{},b[ci][ft]=At}function Du(b,N,$,nt,ft){ft=ft||N+l($)+(nt?"_"+l(nt):"");var At=b[ci]&&b[ci][ft];if(!At)return this;!be.touchNative&&be.pointer&&N.indexOf("touch")===0?pr(b,N,At):be.touch&&N==="dblclick"?Ze(b,At):"removeEventListener"in b?b.removeEventListener(al[N]||N,At,!1):b.detachEvent("on"+N,At),b[ci][ft]=null}function is(b){return b.stopPropagation?b.stopPropagation():b.originalEvent?b.originalEvent._stopped=!0:b.cancelBubble=!0,this}function Bi(b){return So(b,"wheel",is),this}function ss(b){return Nn(b,"mousedown touchstart dblclick contextmenu",is),b._leaflet_disable_click=!0,this}function Xr(b){return b.preventDefault?b.preventDefault():b.returnValue=!1,this}function _i(b){return Xr(b),is(b),this}function To(b){if(b.composedPath)return b.composedPath();for(var N=[],$=b.target;$;)N.push($),$=$.parentNode;return N}function Es(b,N){if(!N)return new k(b.clientX,b.clientY);var $=bs(N),nt=$.boundingClientRect;return new k((b.clientX-nt.left)/$.x-N.clientLeft,(b.clientY-nt.top)/$.y-N.clientTop)}var Jh=be.linux&&be.chrome?window.devicePixelRatio:be.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function zi(b){return be.edge?b.wheelDeltaY/2:b.deltaY&&b.deltaMode===0?-b.deltaY/Jh:b.deltaY&&b.deltaMode===1?-b.deltaY*20:b.deltaY&&b.deltaMode===2?-b.deltaY*60:b.deltaX||b.deltaZ?0:b.wheelDelta?(b.wheelDeltaY||b.wheelDelta)/2:b.detail&&Math.abs(b.detail)<32765?-b.detail*20:b.detail?b.detail/-32765*60:0}function Fi(b,N){var $=N.relatedTarget;if(!$)return!0;try{for(;$&&$!==b;)$=$.parentNode}catch{return!1}return $!==b}var pa={__proto__:null,on:Nn,off:jr,stopPropagation:is,disableScrollPropagation:Bi,disableClickPropagation:ss,preventDefault:Xr,stop:_i,getPropagationPath:To,getMousePosition:Es,getWheelDelta:zi,isExternalTarget:Fi,addListener:Nn,removeListener:jr},$s=C.extend({run:function(b,N,$,nt){this.stop(),this._el=b,this._inProgress=!0,this._duration=$||.25,this._easeOutPower=1/Math.max(nt||.5,.2),this._startPos=ns(b),this._offset=N.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=rt(this._animate,this),this._step()},_step:function(b){var N=+new Date-this._startTime,$=this._duration*1e3;N<$?this._runFrame(this._easeOut(N/$),b):(this._runFrame(1),this._complete())},_runFrame:function(b,N){var $=this._startPos.add(this._offset.multiplyBy(b));N&&$._round(),wr(this._el,$),this.fire("step")},_complete:function(){tt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(b){return 1-Math.pow(1-b,this._easeOutPower)}}),Kn=C.extend({options:{crs:St,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(b,N){N=x(this,N),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(b),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),N.maxBounds&&this.setMaxBounds(N.maxBounds),N.zoom!==void 0&&(this._zoom=this._limitZoom(N.zoom)),N.center&&N.zoom!==void 0&&this.setView(X(N.center),N.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=vn&&be.any3d&&!be.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Nn(this._proxy,Dn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(b,N,$){if(N=N===void 0?this._zoom:this._limitZoom(N),b=this._limitCenter(X(b),N,this.options.maxBounds),$=$||{},this._stop(),this._loaded&&!$.reset&&$!==!0){$.animate!==void 0&&($.zoom=u({animate:$.animate},$.zoom),$.pan=u({animate:$.animate,duration:$.duration},$.pan));var nt=this._zoom!==N?this._tryAnimatedZoom&&this._tryAnimatedZoom(b,N,$.zoom):this._tryAnimatedPan(b,$.pan);if(nt)return clearTimeout(this._sizeTimer),this}return this._resetView(b,N,$.pan&&$.pan.noMoveStart),this},setZoom:function(b,N){return this._loaded?this.setView(this.getCenter(),b,{zoom:N}):(this._zoom=b,this)},zoomIn:function(b,N){return b=b||(be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+b,N)},zoomOut:function(b,N){return b=b||(be.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-b,N)},setZoomAround:function(b,N,$){var nt=this.getZoomScale(N),ft=this.getSize().divideBy(2),At=b instanceof k?b:this.latLngToContainerPoint(b),oe=At.subtract(ft).multiplyBy(1-1/nt),ce=this.containerPointToLatLng(ft.add(oe));return this.setView(ce,N,{zoom:$})},_getBoundsCenterZoom:function(b,N){N=N||{},b=b.getBounds?b.getBounds():it(b);var $=O(N.paddingTopLeft||N.padding||[0,0]),nt=O(N.paddingBottomRight||N.padding||[0,0]),ft=this.getBoundsZoom(b,!1,$.add(nt));if(ft=typeof N.maxZoom=="number"?Math.min(N.maxZoom,ft):ft,ft===1/0)return{center:b.getCenter(),zoom:ft};var At=nt.subtract($).divideBy(2),oe=this.project(b.getSouthWest(),ft),ce=this.project(b.getNorthEast(),ft),Ne=this.unproject(oe.add(ce).divideBy(2).add(At),ft);return{center:Ne,zoom:ft}},fitBounds:function(b,N){if(b=it(b),!b.isValid())throw new Error("Bounds are not valid.");var $=this._getBoundsCenterZoom(b,N);return this.setView($.center,$.zoom,N)},fitWorld:function(b){return this.fitBounds([[-90,-180],[90,180]],b)},panTo:function(b,N){return this.setView(b,this._zoom,{pan:N})},panBy:function(b,N){if(b=O(b).round(),N=N||{},!b.x&&!b.y)return this.fire("moveend");if(N.animate!==!0&&!this.getSize().contains(b))return this._resetView(this.unproject(this.project(this.getCenter()).add(b)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new $s,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),N.noMoveStart||this.fire("movestart"),N.animate!==!1){In(this._mapPane,"leaflet-pan-anim");var $=this._getMapPanePos().subtract(b).round();this._panAnim.run(this._mapPane,$,N.duration||.25,N.easeLinearity)}else this._rawPanBy(b),this.fire("move").fire("moveend");return this},flyTo:function(b,N,$){if($=$||{},$.animate===!1||!be.any3d)return this.setView(b,N,$);this._stop();var nt=this.project(this.getCenter()),ft=this.project(b),At=this.getSize(),oe=this._zoom;b=X(b),N=N===void 0?oe:N;var ce=Math.max(At.x,At.y),Ne=ce*this.getZoomScale(oe,N),Ue=ft.distanceTo(nt)||1,on=1.42,On=on*on;function Hn(hi){var Xs=hi?-1:1,qa=hi?Ne:ce,yl=Ne*Ne-ce*ce+Xs*On*On*Ue*Ue,Is=2*qa*On*Ue,Ga=yl/Is,Ro=Math.sqrt(Ga*Ga+1)-Ga,Ys=Ro<1e-9?-18:Math.log(Ro);return Ys}function Wi(hi){return(Math.exp(hi)-Math.exp(-hi))/2}function Ti(hi){return(Math.exp(hi)+Math.exp(-hi))/2}function xs(hi){return Wi(hi)/Ti(hi)}var Mr=Hn(0);function Tr(hi){return ce*(Ti(Mr)/Ti(Mr+on*hi))}function nr(hi){return ce*(Ti(Mr)*xs(Mr+on*hi)-Wi(Mr))/On}function ta(hi){return 1-Math.pow(1-hi,1.5)}var Wr=Date.now(),ac=(Hn(1)-Mr)/on,us=$.duration?1e3*$.duration:1e3*ac*.8;function ea(){var hi=(Date.now()-Wr)/us,Xs=ta(hi)*ac;hi<=1?(this._flyToFrame=rt(ea,this),this._move(this.unproject(nt.add(ft.subtract(nt).multiplyBy(nr(Xs)/Ue)),oe),this.getScaleZoom(ce/Tr(Xs),oe),{flyTo:!0})):this._move(b,N)._moveEnd(!0)}return this._moveStart(!0,$.noMoveStart),ea.call(this),this},flyToBounds:function(b,N){var $=this._getBoundsCenterZoom(b,N);return this.flyTo($.center,$.zoom,N)},setMaxBounds:function(b){return b=it(b),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),b.isValid()?(this.options.maxBounds=b,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(b){var N=this.options.minZoom;return this.options.minZoom=b,this._loaded&&N!==b&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(b):this},setMaxZoom:function(b){var N=this.options.maxZoom;return this.options.maxZoom=b,this._loaded&&N!==b&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(b):this},panInsideBounds:function(b,N){this._enforcingBounds=!0;var $=this.getCenter(),nt=this._limitCenter($,this._zoom,it(b));return $.equals(nt)||this.panTo(nt,N),this._enforcingBounds=!1,this},panInside:function(b,N){N=N||{};var $=O(N.paddingTopLeft||N.padding||[0,0]),nt=O(N.paddingBottomRight||N.padding||[0,0]),ft=this.project(this.getCenter()),At=this.project(b),oe=this.getPixelBounds(),ce=H([oe.min.add($),oe.max.subtract(nt)]),Ne=ce.getSize();if(!ce.contains(At)){this._enforcingBounds=!0;var Ue=At.subtract(ce.getCenter()),on=ce.extend(At).getSize().subtract(Ne);ft.x+=Ue.x<0?-on.x:on.x,ft.y+=Ue.y<0?-on.y:on.y,this.panTo(this.unproject(ft),N),this._enforcingBounds=!1}return this},invalidateSize:function(b){if(!this._loaded)return this;b=u({animate:!1,pan:!0},b===!0?{animate:!0}:b);var N=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var $=this.getSize(),nt=N.divideBy(2).round(),ft=$.divideBy(2).round(),At=nt.subtract(ft);return!At.x&&!At.y?this:(b.animate&&b.pan?this.panBy(At):(b.pan&&this._rawPanBy(At),this.fire("move"),b.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:N,newSize:$}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(b){if(b=this._locateOptions=u({timeout:1e4,watch:!1},b),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var N=r(this._handleGeolocationResponse,this),$=r(this._handleGeolocationError,this);return b.watch?this._locationWatchId=navigator.geolocation.watchPosition(N,$,b):navigator.geolocation.getCurrentPosition(N,$,b),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(b){if(this._container._leaflet_id){var N=b.code,$=b.message||(N===1?"permission denied":N===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:N,message:"Geolocation error: "+$+"."})}},_handleGeolocationResponse:function(b){if(this._container._leaflet_id){var N=b.coords.latitude,$=b.coords.longitude,nt=new pt(N,$),ft=nt.toBounds(b.coords.accuracy*2),At=this._locateOptions;if(At.setView){var oe=this.getBoundsZoom(ft);this.setView(nt,At.maxZoom?Math.min(oe,At.maxZoom):oe)}var ce={latlng:nt,bounds:ft,timestamp:b.timestamp};for(var Ne in b.coords)typeof b.coords[Ne]=="number"&&(ce[Ne]=b.coords[Ne]);this.fire("locationfound",ce)}},addHandler:function(b,N){if(!N)return this;var $=this[b]=new N(this);return this._handlers.push($),this.options[b]&&$.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),En(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(tt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var b;for(b in this._layers)this._layers[b].remove();for(b in this._panes)En(this._panes[b]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(b,N){var $="leaflet-pane"+(b?" leaflet-"+b.replace("Pane","")+"-pane":""),nt=xn("div",$,N||this._mapPane);return b&&(this._panes[b]=nt),nt},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var b=this.getPixelBounds(),N=this.unproject(b.getBottomLeft()),$=this.unproject(b.getTopRight());return new et(N,$)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(b,N,$){b=it(b),$=O($||[0,0]);var nt=this.getZoom()||0,ft=this.getMinZoom(),At=this.getMaxZoom(),oe=b.getNorthWest(),ce=b.getSouthEast(),Ne=this.getSize().subtract($),Ue=H(this.project(ce,nt),this.project(oe,nt)).getSize(),on=be.any3d?this.options.zoomSnap:1,On=Ne.x/Ue.x,Hn=Ne.y/Ue.y,Wi=N?Math.max(On,Hn):Math.min(On,Hn);return nt=this.getScaleZoom(Wi,nt),on&&(nt=Math.round(nt/(on/100))*(on/100),nt=N?Math.ceil(nt/on)*on:Math.floor(nt/on)*on),Math.max(ft,Math.min(At,nt))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new k(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(b,N){var $=this._getTopLeftPoint(b,N);return new P($,$.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(b){return this.options.crs.getProjectedBounds(b===void 0?this.getZoom():b)},getPane:function(b){return typeof b=="string"?this._panes[b]:b},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(b,N){var $=this.options.crs;return N=N===void 0?this._zoom:N,$.scale(b)/$.scale(N)},getScaleZoom:function(b,N){var $=this.options.crs;N=N===void 0?this._zoom:N;var nt=$.zoom(b*$.scale(N));return isNaN(nt)?1/0:nt},project:function(b,N){return N=N===void 0?this._zoom:N,this.options.crs.latLngToPoint(X(b),N)},unproject:function(b,N){return N=N===void 0?this._zoom:N,this.options.crs.pointToLatLng(O(b),N)},layerPointToLatLng:function(b){var N=O(b).add(this.getPixelOrigin());return this.unproject(N)},latLngToLayerPoint:function(b){var N=this.project(X(b))._round();return N._subtract(this.getPixelOrigin())},wrapLatLng:function(b){return this.options.crs.wrapLatLng(X(b))},wrapLatLngBounds:function(b){return this.options.crs.wrapLatLngBounds(it(b))},distance:function(b,N){return this.options.crs.distance(X(b),X(N))},containerPointToLayerPoint:function(b){return O(b).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(b){return O(b).add(this._getMapPanePos())},containerPointToLatLng:function(b){var N=this.containerPointToLayerPoint(O(b));return this.layerPointToLatLng(N)},latLngToContainerPoint:function(b){return this.layerPointToContainerPoint(this.latLngToLayerPoint(X(b)))},mouseEventToContainerPoint:function(b){return Es(b,this._container)},mouseEventToLayerPoint:function(b){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(b))},mouseEventToLatLng:function(b){return this.layerPointToLatLng(this.mouseEventToLayerPoint(b))},_initContainer:function(b){var N=this._container=Bn(b);if(N){if(N._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Nn(N,"scroll",this._onScroll,this),this._containerId=l(N)},_initLayout:function(){var b=this._container;this._fadeAnimated=this.options.fadeAnimation&&be.any3d,In(b,"leaflet-container"+(be.touch?" leaflet-touch":"")+(be.retina?" leaflet-retina":"")+(be.ielt9?" leaflet-oldie":"")+(be.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var N=kn(b,"position");N!=="absolute"&&N!=="relative"&&N!=="fixed"&&N!=="sticky"&&(b.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var b=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),wr(this._mapPane,new k(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(In(b.markerPane,"leaflet-zoom-hide"),In(b.shadowPane,"leaflet-zoom-hide"))},_resetView:function(b,N,$){wr(this._mapPane,new k(0,0));var nt=!this._loaded;this._loaded=!0,N=this._limitZoom(N),this.fire("viewprereset");var ft=this._zoom!==N;this._moveStart(ft,$)._move(b,N)._moveEnd(ft),this.fire("viewreset"),nt&&this.fire("load")},_moveStart:function(b,N){return b&&this.fire("zoomstart"),N||this.fire("movestart"),this},_move:function(b,N,$,nt){N===void 0&&(N=this._zoom);var ft=this._zoom!==N;return this._zoom=N,this._lastCenter=b,this._pixelOrigin=this._getNewPixelOrigin(b),nt?$&&$.pinch&&this.fire("zoom",$):((ft||$&&$.pinch)&&this.fire("zoom",$),this.fire("move",$)),this},_moveEnd:function(b){return b&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return tt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(b){wr(this._mapPane,this._getMapPanePos().subtract(b))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(b){this._targets={},this._targets[l(this._container)]=this;var N=b?jr:Nn;N(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&N(window,"resize",this._onResize,this),be.any3d&&this.options.transform3DLimit&&(b?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){tt(this._resizeRequest),this._resizeRequest=rt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var b=this._getMapPanePos();Math.max(Math.abs(b.x),Math.abs(b.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(b,N){for(var $=[],nt,ft=N==="mouseout"||N==="mouseover",At=b.target||b.srcElement,oe=!1;At;){if(nt=this._targets[l(At)],nt&&(N==="click"||N==="preclick")&&this._draggableMoved(nt)){oe=!0;break}if(nt&&nt.listens(N,!0)&&(ft&&!Fi(At,b)||($.push(nt),ft))||At===this._container)break;At=At.parentNode}return!$.length&&!oe&&!ft&&this.listens(N,!0)&&($=[this]),$},_isClickDisabled:function(b){for(;b&&b!==this._container;){if(b._leaflet_disable_click)return!0;b=b.parentNode}},_handleDOMEvent:function(b){var N=b.target||b.srcElement;if(!(!this._loaded||N._leaflet_disable_events||b.type==="click"&&this._isClickDisabled(N))){var $=b.type;$==="mousedown"&&ao(N),this._fireDOMEvent(b,$)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(b,N,$){if(b.type==="click"){var nt=u({},b);nt.type="preclick",this._fireDOMEvent(nt,nt.type,$)}var ft=this._findEventTargets(b,N);if($){for(var At=[],oe=0;oe<$.length;oe++)$[oe].listens(N,!0)&&At.push($[oe]);ft=At.concat(ft)}if(ft.length){N==="contextmenu"&&Xr(b);var ce=ft[0],Ne={originalEvent:b};if(b.type!=="keypress"&&b.type!=="keydown"&&b.type!=="keyup"){var Ue=ce.getLatLng&&(!ce._radius||ce._radius<=10);Ne.containerPoint=Ue?this.latLngToContainerPoint(ce.getLatLng()):this.mouseEventToContainerPoint(b),Ne.layerPoint=this.containerPointToLayerPoint(Ne.containerPoint),Ne.latlng=Ue?ce.getLatLng():this.layerPointToLatLng(Ne.layerPoint)}for(oe=0;oe<ft.length;oe++)if(ft[oe].fire(N,Ne,!0),Ne.originalEvent._stopped||ft[oe].options.bubblingMouseEvents===!1&&I(this._mouseEvents,N)!==-1)return}},_draggableMoved:function(b){return b=b.dragging&&b.dragging.enabled()?b:this,b.dragging&&b.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var b=0,N=this._handlers.length;b<N;b++)this._handlers[b].disable()},whenReady:function(b,N){return this._loaded?b.call(N||this,{target:this}):this.on("load",b,N),this},_getMapPanePos:function(){return ns(this._mapPane)||new k(0,0)},_moved:function(){var b=this._getMapPanePos();return b&&!b.equals([0,0])},_getTopLeftPoint:function(b,N){var $=b&&N!==void 0?this._getNewPixelOrigin(b,N):this.getPixelOrigin();return $.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(b,N){var $=this.getSize()._divideBy(2);return this.project(b,N)._subtract($)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(b,N,$){var nt=this._getNewPixelOrigin($,N);return this.project(b,N)._subtract(nt)},_latLngBoundsToNewLayerBounds:function(b,N,$){var nt=this._getNewPixelOrigin($,N);return H([this.project(b.getSouthWest(),N)._subtract(nt),this.project(b.getNorthWest(),N)._subtract(nt),this.project(b.getSouthEast(),N)._subtract(nt),this.project(b.getNorthEast(),N)._subtract(nt)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(b){return this.latLngToLayerPoint(b).subtract(this._getCenterLayerPoint())},_limitCenter:function(b,N,$){if(!$)return b;var nt=this.project(b,N),ft=this.getSize().divideBy(2),At=new P(nt.subtract(ft),nt.add(ft)),oe=this._getBoundsOffset(At,$,N);return Math.abs(oe.x)<=1&&Math.abs(oe.y)<=1?b:this.unproject(nt.add(oe),N)},_limitOffset:function(b,N){if(!N)return b;var $=this.getPixelBounds(),nt=new P($.min.add(b),$.max.add(b));return b.add(this._getBoundsOffset(nt,N))},_getBoundsOffset:function(b,N,$){var nt=H(this.project(N.getNorthEast(),$),this.project(N.getSouthWest(),$)),ft=nt.min.subtract(b.min),At=nt.max.subtract(b.max),oe=this._rebound(ft.x,-At.x),ce=this._rebound(ft.y,-At.y);return new k(oe,ce)},_rebound:function(b,N){return b+N>0?Math.round(b-N)/2:Math.max(0,Math.ceil(b))-Math.max(0,Math.floor(N))},_limitZoom:function(b){var N=this.getMinZoom(),$=this.getMaxZoom(),nt=be.any3d?this.options.zoomSnap:1;return nt&&(b=Math.round(b/nt)*nt),Math.max(N,Math.min($,b))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){mr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(b,N){var $=this._getCenterOffset(b)._trunc();return(N&&N.animate)!==!0&&!this.getSize().contains($)?!1:(this.panBy($,N),!0)},_createAnimProxy:function(){var b=this._proxy=xn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(b),this.on("zoomanim",function(N){var $=Xe,nt=this._proxy.style[$];ai(this._proxy,this.project(N.center,N.zoom),this.getZoomScale(N.zoom,1)),nt===this._proxy.style[$]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){En(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var b=this.getCenter(),N=this.getZoom();ai(this._proxy,this.project(b,N),this.getZoomScale(N,1))},_catchTransitionEnd:function(b){this._animatingZoom&&b.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(b,N,$){if(this._animatingZoom)return!0;if($=$||{},!this._zoomAnimated||$.animate===!1||this._nothingToAnimate()||Math.abs(N-this._zoom)>this.options.zoomAnimationThreshold)return!1;var nt=this.getZoomScale(N),ft=this._getCenterOffset(b)._divideBy(1-1/nt);return $.animate!==!0&&!this.getSize().contains(ft)?!1:(rt(function(){this._moveStart(!0,$.noMoveStart||!1)._animateZoom(b,N,!0)},this),!0)},_animateZoom:function(b,N,$,nt){this._mapPane&&($&&(this._animatingZoom=!0,this._animateToCenter=b,this._animateToZoom=N,In(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:b,zoom:N,noUpdate:nt}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&mr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Bc(b,N){return new Kn(b,N)}var Ii=F.extend({options:{position:"topright"},initialize:function(b){x(this,b)},getPosition:function(){return this.options.position},setPosition:function(b){var N=this._map;return N&&N.removeControl(this),this.options.position=b,N&&N.addControl(this),this},getContainer:function(){return this._container},addTo:function(b){this.remove(),this._map=b;var N=this._container=this.onAdd(b),$=this.getPosition(),nt=b._controlCorners[$];return In(N,"leaflet-control"),$.indexOf("bottom")!==-1?nt.insertBefore(N,nt.firstChild):nt.appendChild(N),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(En(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(b){this._map&&b&&b.screenX>0&&b.screenY>0&&this._map.getContainer().focus()}}),Ns=function(b){return new Ii(b)};Kn.include({addControl:function(b){return b.addTo(this),this},removeControl:function(b){return b.remove(),this},_initControlPos:function(){var b=this._controlCorners={},N="leaflet-",$=this._controlContainer=xn("div",N+"control-container",this._container);function nt(ft,At){var oe=N+ft+" "+N+At;b[ft+At]=xn("div",oe,$)}nt("top","left"),nt("top","right"),nt("bottom","left"),nt("bottom","right")},_clearControlPos:function(){for(var b in this._controlCorners)En(this._controlCorners[b]);En(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Zl=Ii.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(b,N,$,nt){return $<nt?-1:nt<$?1:0}},initialize:function(b,N,$){x(this,$),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var nt in b)this._addLayer(b[nt],nt);for(nt in N)this._addLayer(N[nt],nt,!0)},onAdd:function(b){this._initLayout(),this._update(),this._map=b,b.on("zoomend",this._checkDisabledLayers,this);for(var N=0;N<this._layers.length;N++)this._layers[N].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(b){return Ii.prototype.addTo.call(this,b),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var b=0;b<this._layers.length;b++)this._layers[b].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(b,N){return this._addLayer(b,N),this._map?this._update():this},addOverlay:function(b,N){return this._addLayer(b,N,!0),this._map?this._update():this},removeLayer:function(b){b.off("add remove",this._onLayerChange,this);var N=this._getLayer(l(b));return N&&this._layers.splice(this._layers.indexOf(N),1),this._map?this._update():this},expand:function(){In(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var b=this._map.getSize().y-(this._container.offsetTop+50);return b<this._section.clientHeight?(In(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=b+"px"):mr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return mr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var b="leaflet-control-layers",N=this._container=xn("div",b),$=this.options.collapsed;N.setAttribute("aria-haspopup",!0),ss(N),Bi(N);var nt=this._section=xn("section",b+"-list");$&&(this._map.on("click",this.collapse,this),Nn(N,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ft=this._layersLink=xn("a",b+"-toggle",N);ft.href="#",ft.title="Layers",ft.setAttribute("role","button"),Nn(ft,{keydown:function(At){At.keyCode===13&&this._expandSafely()},click:function(At){Xr(At),this._expandSafely()}},this),$||this.expand(),this._baseLayersList=xn("div",b+"-base",nt),this._separator=xn("div",b+"-separator",nt),this._overlaysList=xn("div",b+"-overlays",nt),N.appendChild(nt)},_getLayer:function(b){for(var N=0;N<this._layers.length;N++)if(this._layers[N]&&l(this._layers[N].layer)===b)return this._layers[N]},_addLayer:function(b,N,$){this._map&&b.on("add remove",this._onLayerChange,this),this._layers.push({layer:b,name:N,overlay:$}),this.options.sortLayers&&this._layers.sort(r(function(nt,ft){return this.options.sortFunction(nt.layer,ft.layer,nt.name,ft.name)},this)),this.options.autoZIndex&&b.setZIndex&&(this._lastZIndex++,b.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Un(this._baseLayersList),Un(this._overlaysList),this._layerControlInputs=[];var b,N,$,nt,ft=0;for($=0;$<this._layers.length;$++)nt=this._layers[$],this._addItem(nt),N=N||nt.overlay,b=b||!nt.overlay,ft+=nt.overlay?0:1;return this.options.hideSingleBase&&(b=b&&ft>1,this._baseLayersList.style.display=b?"":"none"),this._separator.style.display=N&&b?"":"none",this},_onLayerChange:function(b){this._handlingClick||this._update();var N=this._getLayer(l(b.target)),$=N.overlay?b.type==="add"?"overlayadd":"overlayremove":b.type==="add"?"baselayerchange":null;$&&this._map.fire($,N)},_createRadioElement:function(b,N){var $='<input type="radio" class="leaflet-control-layers-selector" name="'+b+'"'+(N?' checked="checked"':"")+"/>",nt=document.createElement("div");return nt.innerHTML=$,nt.firstChild},_addItem:function(b){var N=document.createElement("label"),$=this._map.hasLayer(b.layer),nt;b.overlay?(nt=document.createElement("input"),nt.type="checkbox",nt.className="leaflet-control-layers-selector",nt.defaultChecked=$):nt=this._createRadioElement("leaflet-base-layers_"+l(this),$),this._layerControlInputs.push(nt),nt.layerId=l(b.layer),Nn(nt,"click",this._onInputClick,this);var ft=document.createElement("span");ft.innerHTML=" "+b.name;var At=document.createElement("span");N.appendChild(At),At.appendChild(nt),At.appendChild(ft);var oe=b.overlay?this._overlaysList:this._baseLayersList;return oe.appendChild(N),this._checkDisabledLayers(),N},_onInputClick:function(){if(!this._preventClick){var b=this._layerControlInputs,N,$,nt=[],ft=[];this._handlingClick=!0;for(var At=b.length-1;At>=0;At--)N=b[At],$=this._getLayer(N.layerId).layer,N.checked?nt.push($):N.checked||ft.push($);for(At=0;At<ft.length;At++)this._map.hasLayer(ft[At])&&this._map.removeLayer(ft[At]);for(At=0;At<nt.length;At++)this._map.hasLayer(nt[At])||this._map.addLayer(nt[At]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var b=this._layerControlInputs,N,$,nt=this._map.getZoom(),ft=b.length-1;ft>=0;ft--)N=b[ft],$=this._getLayer(N.layerId).layer,N.disabled=$.options.minZoom!==void 0&&nt<$.options.minZoom||$.options.maxZoom!==void 0&&nt>$.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var b=this._section;this._preventClick=!0,Nn(b,"click",Xr),this.expand();var N=this;setTimeout(function(){jr(b,"click",Xr),N._preventClick=!1})}}),Ui=function(b,N,$){return new Zl(b,N,$)},Lr=Ii.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(b){var N="leaflet-control-zoom",$=xn("div",N+" leaflet-bar"),nt=this.options;return this._zoomInButton=this._createButton(nt.zoomInText,nt.zoomInTitle,N+"-in",$,this._zoomIn),this._zoomOutButton=this._createButton(nt.zoomOutText,nt.zoomOutTitle,N+"-out",$,this._zoomOut),this._updateDisabled(),b.on("zoomend zoomlevelschange",this._updateDisabled,this),$},onRemove:function(b){b.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(b){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(b.shiftKey?3:1))},_zoomOut:function(b){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(b.shiftKey?3:1))},_createButton:function(b,N,$,nt,ft){var At=xn("a",$,nt);return At.innerHTML=b,At.href="#",At.title=N,At.setAttribute("role","button"),At.setAttribute("aria-label",N),ss(At),Nn(At,"click",_i),Nn(At,"click",ft,this),Nn(At,"click",this._refocusOnMap,this),At},_updateDisabled:function(){var b=this._map,N="leaflet-disabled";mr(this._zoomInButton,N),mr(this._zoomOutButton,N),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||b._zoom===b.getMinZoom())&&(In(this._zoomOutButton,N),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||b._zoom===b.getMaxZoom())&&(In(this._zoomInButton,N),this._zoomInButton.setAttribute("aria-disabled","true"))}});Kn.mergeOptions({zoomControl:!0}),Kn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Lr,this.addControl(this.zoomControl))});var Bu=function(b){return new Lr(b)},La=Ii.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(b){var N="leaflet-control-scale",$=xn("div",N),nt=this.options;return this._addScales(nt,N+"-line",$),b.on(nt.updateWhenIdle?"moveend":"move",this._update,this),b.whenReady(this._update,this),$},onRemove:function(b){b.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(b,N,$){b.metric&&(this._mScale=xn("div",N,$)),b.imperial&&(this._iScale=xn("div",N,$))},_update:function(){var b=this._map,N=b.getSize().y/2,$=b.distance(b.containerPointToLatLng([0,N]),b.containerPointToLatLng([this.options.maxWidth,N]));this._updateScales($)},_updateScales:function(b){this.options.metric&&b&&this._updateMetric(b),this.options.imperial&&b&&this._updateImperial(b)},_updateMetric:function(b){var N=this._getRoundNum(b),$=N<1e3?N+" m":N/1e3+" km";this._updateScale(this._mScale,$,N/b)},_updateImperial:function(b){var N=b*3.2808399,$,nt,ft;N>5280?($=N/5280,nt=this._getRoundNum($),this._updateScale(this._iScale,nt+" mi",nt/$)):(ft=this._getRoundNum(N),this._updateScale(this._iScale,ft+" ft",ft/N))},_updateScale:function(b,N,$){b.style.width=Math.round(this.options.maxWidth*$)+"px",b.innerHTML=N},_getRoundNum:function(b){var N=Math.pow(10,(Math.floor(b)+"").length-1),$=b/N;return $=$>=10?10:$>=5?5:$>=3?3:$>=2?2:1,N*$}}),Co=function(b){return new La(b)},ll='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Go=Ii.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(be.inlineSvg?ll+" ":"")+"Leaflet</a>"},initialize:function(b){x(this,b),this._attributions={}},onAdd:function(b){b.attributionControl=this,this._container=xn("div","leaflet-control-attribution"),ss(this._container);for(var N in b._layers)b._layers[N].getAttribution&&this.addAttribution(b._layers[N].getAttribution());return this._update(),b.on("layeradd",this._addAttribution,this),this._container},onRemove:function(b){b.off("layeradd",this._addAttribution,this)},_addAttribution:function(b){b.layer.getAttribution&&(this.addAttribution(b.layer.getAttribution()),b.layer.once("remove",function(){this.removeAttribution(b.layer.getAttribution())},this))},setPrefix:function(b){return this.options.prefix=b,this._update(),this},addAttribution:function(b){return b?(this._attributions[b]||(this._attributions[b]=0),this._attributions[b]++,this._update(),this):this},removeAttribution:function(b){return b?(this._attributions[b]&&(this._attributions[b]--,this._update()),this):this},_update:function(){if(this._map){var b=[];for(var N in this._attributions)this._attributions[N]&&b.push(N);var $=[];this.options.prefix&&$.push(this.options.prefix),b.length&&$.push(b.join(", ")),this._container.innerHTML=$.join(' <span aria-hidden="true">|</span> ')}}});Kn.mergeOptions({attributionControl:!0}),Kn.addInitHook(function(){this.options.attributionControl&&new Go().addTo(this)});var ma=function(b){return new Go(b)};Ii.Layers=Zl,Ii.Zoom=Lr,Ii.Scale=La,Ii.Attribution=Go,Ns.layers=Ui,Ns.zoom=Bu,Ns.scale=Co,Ns.attribution=ma;var lo=F.extend({initialize:function(b){this._map=b},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});lo.addTo=function(b,N){return b.addHandler(N,this),this};var Pa={Events:T},zu=be.touch?"touchstart mousedown":"mousedown",ga=C.extend({options:{clickTolerance:3},initialize:function(b,N,$,nt){x(this,nt),this._element=b,this._dragStartTarget=N||b,this._preventOutline=$},enable:function(){this._enabled||(Nn(this._dragStartTarget,zu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ga._dragging===this&&this.finishDrag(!0),jr(this._dragStartTarget,zu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(b){if(this._enabled&&(this._moved=!1,!Vr(this._element,"leaflet-zoom-anim"))){if(b.touches&&b.touches.length!==1){ga._dragging===this&&this.finishDrag();return}if(!(ga._dragging||b.shiftKey||b.which!==1&&b.button!==1&&!b.touches)&&(ga._dragging=this,this._preventOutline&&ao(this._element),Vs(),Or(),!this._moving)){this.fire("down");var N=b.touches?b.touches[0]:b,$=rs(this._element);this._startPoint=new k(N.clientX,N.clientY),this._startPos=ns(this._element),this._parentScale=bs($);var nt=b.type==="mousedown";Nn(document,nt?"mousemove":"touchmove",this._onMove,this),Nn(document,nt?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(b){if(this._enabled){if(b.touches&&b.touches.length>1){this._moved=!0;return}var N=b.touches&&b.touches.length===1?b.touches[0]:b,$=new k(N.clientX,N.clientY)._subtract(this._startPoint);!$.x&&!$.y||Math.abs($.x)+Math.abs($.y)<this.options.clickTolerance||($.x/=this._parentScale.x,$.y/=this._parentScale.y,Xr(b),this._moved||(this.fire("dragstart"),this._moved=!0,In(document.body,"leaflet-dragging"),this._lastTarget=b.target||b.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),In(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add($),this._moving=!0,this._lastEvent=b,this._updatePosition())}},_updatePosition:function(){var b={originalEvent:this._lastEvent};this.fire("predrag",b),wr(this._element,this._newPos),this.fire("drag",b)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(b){mr(document.body,"leaflet-dragging"),this._lastTarget&&(mr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),jr(document,"mousemove touchmove",this._onMove,this),jr(document,"mouseup touchend touchcancel",this._onUp,this),li(),kr();var N=this._moved&&this._moving;this._moving=!1,ga._dragging=!1,N&&this.fire("dragend",{noInertia:b,distance:this._newPos.distanceTo(this._startPos)})}});function tp(b,N,$){var nt,ft=[1,4,2,8],At,oe,ce,Ne,Ue,on,On,Hn;for(At=0,on=b.length;At<on;At++)b[At]._code=ya(b[At],N);for(ce=0;ce<4;ce++){for(On=ft[ce],nt=[],At=0,on=b.length,oe=on-1;At<on;oe=At++)Ne=b[At],Ue=b[oe],Ne._code&On?Ue._code&On||(Hn=Yl(Ue,Ne,On,N,$),Hn._code=ya(Hn,N),nt.push(Hn)):(Ue._code&On&&(Hn=Yl(Ue,Ne,On,N,$),Hn._code=ya(Hn,N),nt.push(Hn)),nt.push(Ne));b=nt}return b}function Da(b,N){var $,nt,ft,At,oe,ce,Ne,Ue,on;if(!b||b.length===0)throw new Error("latlngs not passed");os(b)||(console.warn("latlngs are not flat! Only the first ring will be used"),b=b[0]);var On=X([0,0]),Hn=it(b),Wi=Hn.getNorthWest().distanceTo(Hn.getSouthWest())*Hn.getNorthEast().distanceTo(Hn.getNorthWest());Wi<1700&&(On=Kf(b));var Ti=b.length,xs=[];for($=0;$<Ti;$++){var Mr=X(b[$]);xs.push(N.project(X([Mr.lat-On.lat,Mr.lng-On.lng])))}for(ce=Ne=Ue=0,$=0,nt=Ti-1;$<Ti;nt=$++)ft=xs[$],At=xs[nt],oe=ft.y*At.x-At.y*ft.x,Ne+=(ft.x+At.x)*oe,Ue+=(ft.y+At.y)*oe,ce+=oe*3;ce===0?on=xs[0]:on=[Ne/ce,Ue/ce];var Tr=N.unproject(O(on));return X([Tr.lat+On.lat,Tr.lng+On.lng])}function Kf(b){for(var N=0,$=0,nt=0,ft=0;ft<b.length;ft++){var At=X(b[ft]);N+=At.lat,$+=At.lng,nt++}return X([N/nt,$/nt])}var cl={__proto__:null,clipPolygon:tp,polygonCenter:Da,centroid:Kf};function ep(b,N){if(!N||!b.length)return b.slice();var $=N*N;return b=zc(b,$),b=Zo(b,$),b}function Jd(b,N,$){return Math.sqrt(fl(b,N,$,!0))}function Fu(b,N,$){return fl(b,N,$)}function Zo(b,N){var $=b.length,nt=typeof Uint8Array<"u"?Uint8Array:Array,ft=new nt($);ft[0]=ft[$-1]=1,ul(b,ft,N,0,$-1);var At,oe=[];for(At=0;At<$;At++)ft[At]&&oe.push(b[At]);return oe}function ul(b,N,$,nt,ft){var At=0,oe,ce,Ne;for(ce=nt+1;ce<=ft-1;ce++)Ne=fl(b[ce],b[nt],b[ft],!0),Ne>At&&(oe=ce,At=Ne);At>$&&(N[oe]=1,ul(b,N,$,nt,oe),ul(b,N,$,oe,ft))}function zc(b,N){for(var $=[b[0]],nt=1,ft=0,At=b.length;nt<At;nt++)Sm(b[nt],b[ft])>N&&($.push(b[nt]),ft=nt);return ft<At-1&&$.push(b[At-1]),$}var ba;function Xl(b,N,$,nt,ft){var At=nt?ba:ya(b,$),oe=ya(N,$),ce,Ne,Ue;for(ba=oe;;){if(!(At|oe))return[b,N];if(At&oe)return!1;ce=At||oe,Ne=Yl(b,N,ce,$,ft),Ue=ya(Ne,$),ce===At?(b=Ne,At=Ue):(N=Ne,oe=Ue)}}function Yl(b,N,$,nt,ft){var At=N.x-b.x,oe=N.y-b.y,ce=nt.min,Ne=nt.max,Ue,on;return $&8?(Ue=b.x+At*(Ne.y-b.y)/oe,on=Ne.y):$&4?(Ue=b.x+At*(ce.y-b.y)/oe,on=ce.y):$&2?(Ue=Ne.x,on=b.y+oe*(Ne.x-b.x)/At):$&1&&(Ue=ce.x,on=b.y+oe*(ce.x-b.x)/At),new k(Ue,on,ft)}function ya(b,N){var $=0;return b.x<N.min.x?$|=1:b.x>N.max.x&&($|=2),b.y<N.min.y?$|=4:b.y>N.max.y&&($|=8),$}function Sm(b,N){var $=N.x-b.x,nt=N.y-b.y;return $*$+nt*nt}function fl(b,N,$,nt){var ft=N.x,At=N.y,oe=$.x-ft,ce=$.y-At,Ne=oe*oe+ce*ce,Ue;return Ne>0&&(Ue=((b.x-ft)*oe+(b.y-At)*ce)/Ne,Ue>1?(ft=$.x,At=$.y):Ue>0&&(ft+=oe*Ue,At+=ce*Ue)),oe=b.x-ft,ce=b.y-At,nt?oe*oe+ce*ce:new k(ft,At)}function os(b){return!E(b[0])||typeof b[0][0]!="object"&&typeof b[0][0]<"u"}function Fc(b){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),os(b)}function Ba(b,N){var $,nt,ft,At,oe,ce,Ne,Ue;if(!b||b.length===0)throw new Error("latlngs not passed");os(b)||(console.warn("latlngs are not flat! Only the first ring will be used"),b=b[0]);var on=X([0,0]),On=it(b),Hn=On.getNorthWest().distanceTo(On.getSouthWest())*On.getNorthEast().distanceTo(On.getNorthWest());Hn<1700&&(on=Kf(b));var Wi=b.length,Ti=[];for($=0;$<Wi;$++){var xs=X(b[$]);Ti.push(N.project(X([xs.lat-on.lat,xs.lng-on.lng])))}for($=0,nt=0;$<Wi-1;$++)nt+=Ti[$].distanceTo(Ti[$+1])/2;if(nt===0)Ue=Ti[0];else for($=0,At=0;$<Wi-1;$++)if(oe=Ti[$],ce=Ti[$+1],ft=oe.distanceTo(ce),At+=ft,At>nt){Ne=(At-nt)/ft,Ue=[ce.x-Ne*(ce.x-oe.x),ce.y-Ne*(ce.y-oe.y)];break}var Mr=N.unproject(O(Ue));return X([Mr.lat+on.lat,Mr.lng+on.lng])}var dl={__proto__:null,simplify:ep,pointToSegmentDistance:Jd,closestPointOnSegment:Fu,clipSegment:Xl,_getEdgeIntersection:Yl,_getBitCode:ya,_sqClosestPointOnSegment:fl,isFlat:os,_flat:Fc,polylineCenter:Ba},za={project:function(b){return new k(b.lng,b.lat)},unproject:function(b){return new pt(b.y,b.x)},bounds:new P([-180,-90],[180,90])},ko={R:6378137,R_MINOR:6356752314245179e-9,bounds:new P([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(b){var N=Math.PI/180,$=this.R,nt=b.lat*N,ft=this.R_MINOR/$,At=Math.sqrt(1-ft*ft),oe=At*Math.sin(nt),ce=Math.tan(Math.PI/4-nt/2)/Math.pow((1-oe)/(1+oe),At/2);return nt=-$*Math.log(Math.max(ce,1e-10)),new k(b.lng*N*$,nt)},unproject:function(b){for(var N=180/Math.PI,$=this.R,nt=this.R_MINOR/$,ft=Math.sqrt(1-nt*nt),At=Math.exp(-b.y/$),oe=Math.PI/2-2*Math.atan(At),ce=0,Ne=.1,Ue;ce<15&&Math.abs(Ne)>1e-7;ce++)Ue=ft*Math.sin(oe),Ue=Math.pow((1-Ue)/(1+Ue),ft/2),Ne=Math.PI/2-2*Math.atan(At*Ue)-oe,oe+=Ne;return new pt(oe*N,b.x*N/$)}},Kl={__proto__:null,LonLat:za,Mercator:ko,SphericalMercator:st},Uu=u({},G,{code:"EPSG:3395",projection:ko,transformation:(function(){var b=.5/(Math.PI*ko.R);return zt(b,.5,-b,.5)})()}),Qf=u({},G,{code:"EPSG:4326",projection:za,transformation:zt(1/180,1,-1/180,.5)}),Ws=u({},ut,{projection:za,transformation:zt(1,0,-1,0),scale:function(b){return Math.pow(2,b)},zoom:function(b){return Math.log(b)/Math.LN2},distance:function(b,N){var $=N.lng-b.lng,nt=N.lat-b.lat;return Math.sqrt($*$+nt*nt)},infinite:!0});ut.Earth=G,ut.EPSG3395=Uu,ut.EPSG3857=St,ut.EPSG900913=Bt,ut.EPSG4326=Qf,ut.Simple=Ws;var as=C.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(b){return b.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(b){return b&&b.removeLayer(this),this},getPane:function(b){return this._map.getPane(b?this.options[b]||b:this.options.pane)},addInteractiveTarget:function(b){return this._map._targets[l(b)]=this,this},removeInteractiveTarget:function(b){return delete this._map._targets[l(b)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(b){var N=b.target;if(N.hasLayer(this)){if(this._map=N,this._zoomAnimated=N._zoomAnimated,this.getEvents){var $=this.getEvents();N.on($,this),this.once("remove",function(){N.off($,this)},this)}this.onAdd(N),this.fire("add"),N.fire("layeradd",{layer:this})}}});Kn.include({addLayer:function(b){if(!b._layerAdd)throw new Error("The provided object is not a Layer.");var N=l(b);return this._layers[N]?this:(this._layers[N]=b,b._mapToAdd=this,b.beforeAdd&&b.beforeAdd(this),this.whenReady(b._layerAdd,b),this)},removeLayer:function(b){var N=l(b);return this._layers[N]?(this._loaded&&b.onRemove(this),delete this._layers[N],this._loaded&&(this.fire("layerremove",{layer:b}),b.fire("remove")),b._map=b._mapToAdd=null,this):this},hasLayer:function(b){return l(b)in this._layers},eachLayer:function(b,N){for(var $ in this._layers)b.call(N,this._layers[$]);return this},_addLayers:function(b){b=b?E(b)?b:[b]:[];for(var N=0,$=b.length;N<$;N++)this.addLayer(b[N])},_addZoomLimit:function(b){(!isNaN(b.options.maxZoom)||!isNaN(b.options.minZoom))&&(this._zoomBoundLayers[l(b)]=b,this._updateZoomLevels())},_removeZoomLimit:function(b){var N=l(b);this._zoomBoundLayers[N]&&(delete this._zoomBoundLayers[N],this._updateZoomLevels())},_updateZoomLevels:function(){var b=1/0,N=-1/0,$=this._getZoomSpan();for(var nt in this._zoomBoundLayers){var ft=this._zoomBoundLayers[nt].options;b=ft.minZoom===void 0?b:Math.min(b,ft.minZoom),N=ft.maxZoom===void 0?N:Math.max(N,ft.maxZoom)}this._layersMaxZoom=N===-1/0?void 0:N,this._layersMinZoom=b===1/0?void 0:b,$!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var As=as.extend({initialize:function(b,N){x(this,N),this._layers={};var $,nt;if(b)for($=0,nt=b.length;$<nt;$++)this.addLayer(b[$])},addLayer:function(b){var N=this.getLayerId(b);return this._layers[N]=b,this._map&&this._map.addLayer(b),this},removeLayer:function(b){var N=b in this._layers?b:this.getLayerId(b);return this._map&&this._layers[N]&&this._map.removeLayer(this._layers[N]),delete this._layers[N],this},hasLayer:function(b){var N=typeof b=="number"?b:this.getLayerId(b);return N in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(b){var N=Array.prototype.slice.call(arguments,1),$,nt;for($ in this._layers)nt=this._layers[$],nt[b]&&nt[b].apply(nt,N);return this},onAdd:function(b){this.eachLayer(b.addLayer,b)},onRemove:function(b){this.eachLayer(b.removeLayer,b)},eachLayer:function(b,N){for(var $ in this._layers)b.call(N,this._layers[$]);return this},getLayer:function(b){return this._layers[b]},getLayers:function(){var b=[];return this.eachLayer(b.push,b),b},setZIndex:function(b){return this.invoke("setZIndex",b)},getLayerId:function(b){return l(b)}}),Uc=function(b,N){return new As(b,N)},qs=As.extend({addLayer:function(b){return this.hasLayer(b)?this:(b.addEventParent(this),As.prototype.addLayer.call(this,b),this.fire("layeradd",{layer:b}))},removeLayer:function(b){return this.hasLayer(b)?(b in this._layers&&(b=this._layers[b]),b.removeEventParent(this),As.prototype.removeLayer.call(this,b),this.fire("layerremove",{layer:b})):this},setStyle:function(b){return this.invoke("setStyle",b)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var b=new et;for(var N in this._layers){var $=this._layers[N];b.extend($.getBounds?$.getBounds():$.getLatLng())}return b}}),Hu=function(b,N){return new qs(b,N)},Mo=F.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(b){x(this,b)},createIcon:function(b){return this._createIcon("icon",b)},createShadow:function(b){return this._createIcon("shadow",b)},_createIcon:function(b,N){var $=this._getIconUrl(b);if(!$){if(b==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var nt=this._createImg($,N&&N.tagName==="IMG"?N:null);return this._setIconStyles(nt,b),(this.options.crossOrigin||this.options.crossOrigin==="")&&(nt.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),nt},_setIconStyles:function(b,N){var $=this.options,nt=$[N+"Size"];typeof nt=="number"&&(nt=[nt,nt]);var ft=O(nt),At=O(N==="shadow"&&$.shadowAnchor||$.iconAnchor||ft&&ft.divideBy(2,!0));b.className="leaflet-marker-"+N+" "+($.className||""),At&&(b.style.marginLeft=-At.x+"px",b.style.marginTop=-At.y+"px"),ft&&(b.style.width=ft.x+"px",b.style.height=ft.y+"px")},_createImg:function(b,N){return N=N||document.createElement("img"),N.src=b,N},_getIconUrl:function(b){return be.retina&&this.options[b+"RetinaUrl"]||this.options[b+"Url"]}});function Ql(b){return new Mo(b)}var va=Mo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(b){return typeof va.imagePath!="string"&&(va.imagePath=this._detectIconPath()),(this.options.imagePath||va.imagePath)+Mo.prototype._getIconUrl.call(this,b)},_stripUrl:function(b){var N=function($,nt,ft){var At=nt.exec($);return At&&At[ft]};return b=N(b,/^url\((['"])?(.+)\1\)$/,2),b&&N(b,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var b=xn("div","leaflet-default-icon-path",document.body),N=kn(b,"background-image")||kn(b,"backgroundImage");if(document.body.removeChild(b),N=this._stripUrl(N),N)return N;var $=document.querySelector('link[href$="leaflet.css"]');return $?$.href.substring(0,$.href.length-11-1):""}}),Jl=lo.extend({initialize:function(b){this._marker=b},addHooks:function(){var b=this._marker._icon;this._draggable||(this._draggable=new ga(b,b,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),In(b,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&mr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(b){var N=this._marker,$=N._map,nt=this._marker.options.autoPanSpeed,ft=this._marker.options.autoPanPadding,At=ns(N._icon),oe=$.getPixelBounds(),ce=$.getPixelOrigin(),Ne=H(oe.min._subtract(ce).add(ft),oe.max._subtract(ce).subtract(ft));if(!Ne.contains(At)){var Ue=O((Math.max(Ne.max.x,At.x)-Ne.max.x)/(oe.max.x-Ne.max.x)-(Math.min(Ne.min.x,At.x)-Ne.min.x)/(oe.min.x-Ne.min.x),(Math.max(Ne.max.y,At.y)-Ne.max.y)/(oe.max.y-Ne.max.y)-(Math.min(Ne.min.y,At.y)-Ne.min.y)/(oe.min.y-Ne.min.y)).multiplyBy(nt);$.panBy(Ue,{animate:!1}),this._draggable._newPos._add(Ue),this._draggable._startPos._add(Ue),wr(N._icon,this._draggable._newPos),this._onDrag(b),this._panRequest=rt(this._adjustPan.bind(this,b))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(b){this._marker.options.autoPan&&(tt(this._panRequest),this._panRequest=rt(this._adjustPan.bind(this,b)))},_onDrag:function(b){var N=this._marker,$=N._shadow,nt=ns(N._icon),ft=N._map.layerPointToLatLng(nt);$&&wr($,nt),N._latlng=ft,b.latlng=ft,b.oldLatLng=this._oldLatLng,N.fire("move",b).fire("drag",b)},_onDragEnd:function(b){tt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",b)}}),tc=as.extend({options:{icon:new va,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(b,N){x(this,N),this._latlng=X(b)},onAdd:function(b){this._zoomAnimated=this._zoomAnimated&&b.options.markerZoomAnimation,this._zoomAnimated&&b.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(b){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&b.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(b){var N=this._latlng;return this._latlng=X(b),this.update(),this.fire("move",{oldLatLng:N,latlng:this._latlng})},setZIndexOffset:function(b){return this.options.zIndexOffset=b,this.update()},getIcon:function(){return this.options.icon},setIcon:function(b){return this.options.icon=b,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var b=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(b)}return this},_initIcon:function(){var b=this.options,N="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),$=b.icon.createIcon(this._icon),nt=!1;$!==this._icon&&(this._icon&&this._removeIcon(),nt=!0,b.title&&($.title=b.title),$.tagName==="IMG"&&($.alt=b.alt||"")),In($,N),b.keyboard&&($.tabIndex="0",$.setAttribute("role","button")),this._icon=$,b.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Nn($,"focus",this._panOnFocus,this);var ft=b.icon.createShadow(this._shadow),At=!1;ft!==this._shadow&&(this._removeShadow(),At=!0),ft&&(In(ft,N),ft.alt=""),this._shadow=ft,b.opacity<1&&this._updateOpacity(),nt&&this.getPane().appendChild(this._icon),this._initInteraction(),ft&&At&&this.getPane(b.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&jr(this._icon,"focus",this._panOnFocus,this),En(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&En(this._shadow),this._shadow=null},_setPos:function(b){this._icon&&wr(this._icon,b),this._shadow&&wr(this._shadow,b),this._zIndex=b.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(b){this._icon&&(this._icon.style.zIndex=this._zIndex+b)},_animateZoom:function(b){var N=this._map._latLngToNewLayerPoint(this._latlng,b.zoom,b.center).round();this._setPos(N)},_initInteraction:function(){if(this.options.interactive&&(In(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Jl)){var b=this.options.draggable;this.dragging&&(b=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Jl(this),b&&this.dragging.enable()}},setOpacity:function(b){return this.options.opacity=b,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var b=this.options.opacity;this._icon&&lr(this._icon,b),this._shadow&&lr(this._shadow,b)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var b=this._map;if(b){var N=this.options.icon.options,$=N.iconSize?O(N.iconSize):O(0,0),nt=N.iconAnchor?O(N.iconAnchor):O(0,0);b.panInside(this._latlng,{paddingTopLeft:nt,paddingBottomRight:$.subtract(nt)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Jf(b,N){return new tc(b,N)}var xa=as.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(b){this._renderer=b.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(b){return x(this,b),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&b&&Object.prototype.hasOwnProperty.call(b,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),hl=xa.extend({options:{fill:!0,radius:10},initialize:function(b,N){x(this,N),this._latlng=X(b),this._radius=this.options.radius},setLatLng:function(b){var N=this._latlng;return this._latlng=X(b),this.redraw(),this.fire("move",{oldLatLng:N,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(b){return this.options.radius=this._radius=b,this.redraw()},getRadius:function(){return this._radius},setStyle:function(b){var N=b&&b.radius||this._radius;return xa.prototype.setStyle.call(this,b),this.setRadius(N),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var b=this._radius,N=this._radiusY||b,$=this._clickTolerance(),nt=[b+$,N+$];this._pxBounds=new P(this._point.subtract(nt),this._point.add(nt))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(b){return b.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Hc(b,N){return new hl(b,N)}var ys=hl.extend({initialize:function(b,N,$){if(typeof N=="number"&&(N=u({},$,{radius:N})),x(this,N),this._latlng=X(b),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(b){return this._mRadius=b,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var b=[this._radius,this._radiusY||this._radius];return new et(this._map.layerPointToLatLng(this._point.subtract(b)),this._map.layerPointToLatLng(this._point.add(b)))},setStyle:xa.prototype.setStyle,_project:function(){var b=this._latlng.lng,N=this._latlng.lat,$=this._map,nt=$.options.crs;if(nt.distance===G.distance){var ft=Math.PI/180,At=this._mRadius/G.R/ft,oe=$.project([N+At,b]),ce=$.project([N-At,b]),Ne=oe.add(ce).divideBy(2),Ue=$.unproject(Ne).lat,on=Math.acos((Math.cos(At*ft)-Math.sin(N*ft)*Math.sin(Ue*ft))/(Math.cos(N*ft)*Math.cos(Ue*ft)))/ft;(isNaN(on)||on===0)&&(on=At/Math.cos(Math.PI/180*N)),this._point=Ne.subtract($.getPixelOrigin()),this._radius=isNaN(on)?0:Ne.x-$.project([Ue,b-on]).x,this._radiusY=Ne.y-oe.y}else{var On=nt.unproject(nt.project(this._latlng).subtract([this._mRadius,0]));this._point=$.latLngToLayerPoint(this._latlng),this._radius=this._point.x-$.latLngToLayerPoint(On).x}this._updateBounds()}});function co(b,N,$){return new ys(b,N,$)}var ls=xa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(b,N){x(this,N),this._setLatLngs(b)},getLatLngs:function(){return this._latlngs},setLatLngs:function(b){return this._setLatLngs(b),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(b){for(var N=1/0,$=null,nt=fl,ft,At,oe=0,ce=this._parts.length;oe<ce;oe++)for(var Ne=this._parts[oe],Ue=1,on=Ne.length;Ue<on;Ue++){ft=Ne[Ue-1],At=Ne[Ue];var On=nt(b,ft,At,!0);On<N&&(N=On,$=nt(b,ft,At))}return $&&($.distance=Math.sqrt(N)),$},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ba(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(b,N){return N=N||this._defaultShape(),b=X(b),N.push(b),this._bounds.extend(b),this.redraw()},_setLatLngs:function(b){this._bounds=new et,this._latlngs=this._convertLatLngs(b)},_defaultShape:function(){return os(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(b){for(var N=[],$=os(b),nt=0,ft=b.length;nt<ft;nt++)$?(N[nt]=X(b[nt]),this._bounds.extend(N[nt])):N[nt]=this._convertLatLngs(b[nt]);return N},_project:function(){var b=new P;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,b),this._bounds.isValid()&&b.isValid()&&(this._rawPxBounds=b,this._updateBounds())},_updateBounds:function(){var b=this._clickTolerance(),N=new k(b,b);this._rawPxBounds&&(this._pxBounds=new P([this._rawPxBounds.min.subtract(N),this._rawPxBounds.max.add(N)]))},_projectLatlngs:function(b,N,$){var nt=b[0]instanceof pt,ft=b.length,At,oe;if(nt){for(oe=[],At=0;At<ft;At++)oe[At]=this._map.latLngToLayerPoint(b[At]),$.extend(oe[At]);N.push(oe)}else for(At=0;At<ft;At++)this._projectLatlngs(b[At],N,$)},_clipPoints:function(){var b=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(b))){if(this.options.noClip){this._parts=this._rings;return}var N=this._parts,$,nt,ft,At,oe,ce,Ne;for($=0,ft=0,At=this._rings.length;$<At;$++)for(Ne=this._rings[$],nt=0,oe=Ne.length;nt<oe-1;nt++)ce=Xl(Ne[nt],Ne[nt+1],b,nt,!0),ce&&(N[ft]=N[ft]||[],N[ft].push(ce[0]),(ce[1]!==Ne[nt+1]||nt===oe-2)&&(N[ft].push(ce[1]),ft++))}},_simplifyPoints:function(){for(var b=this._parts,N=this.options.smoothFactor,$=0,nt=b.length;$<nt;$++)b[$]=ep(b[$],N)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(b,N){var $,nt,ft,At,oe,ce,Ne=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(b))return!1;for($=0,At=this._parts.length;$<At;$++)for(ce=this._parts[$],nt=0,oe=ce.length,ft=oe-1;nt<oe;ft=nt++)if(!(!N&&nt===0)&&Jd(b,ce[ft],ce[nt])<=Ne)return!0;return!1}});function Vc(b,N){return new ls(b,N)}ls._flat=Fc;var Eo=ls.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Da(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(b){var N=ls.prototype._convertLatLngs.call(this,b),$=N.length;return $>=2&&N[0]instanceof pt&&N[0].equals(N[$-1])&&N.pop(),N},_setLatLngs:function(b){ls.prototype._setLatLngs.call(this,b),os(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return os(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var b=this._renderer._bounds,N=this.options.weight,$=new k(N,N);if(b=new P(b.min.subtract($),b.max.add($)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(b))){if(this.options.noClip){this._parts=this._rings;return}for(var nt=0,ft=this._rings.length,At;nt<ft;nt++)At=tp(this._rings[nt],b,!0),At.length&&this._parts.push(At)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(b){var N=!1,$,nt,ft,At,oe,ce,Ne,Ue;if(!this._pxBounds||!this._pxBounds.contains(b))return!1;for(At=0,Ne=this._parts.length;At<Ne;At++)for($=this._parts[At],oe=0,Ue=$.length,ce=Ue-1;oe<Ue;ce=oe++)nt=$[oe],ft=$[ce],nt.y>b.y!=ft.y>b.y&&b.x<(ft.x-nt.x)*(b.y-nt.y)/(ft.y-nt.y)+nt.x&&(N=!N);return N||ls.prototype._containsPoint.call(this,b,!0)}});function pl(b,N){return new Eo(b,N)}var Gs=qs.extend({initialize:function(b,N){x(this,N),this._layers={},b&&this.addData(b)},addData:function(b){var N=E(b)?b:b.features,$,nt,ft;if(N){for($=0,nt=N.length;$<nt;$++)ft=N[$],(ft.geometries||ft.geometry||ft.features||ft.coordinates)&&this.addData(ft);return this}var At=this.options;if(At.filter&&!At.filter(b))return this;var oe=wi(b,At);return oe?(oe.feature=Vu(b),oe.defaultOptions=oe.options,this.resetStyle(oe),At.onEachFeature&&At.onEachFeature(b,oe),this.addLayer(oe)):this},resetStyle:function(b){return b===void 0?this.eachLayer(this.resetStyle,this):(b.options=u({},b.defaultOptions),this._setLayerStyle(b,this.options.style),this)},setStyle:function(b){return this.eachLayer(function(N){this._setLayerStyle(N,b)},this)},_setLayerStyle:function(b,N){b.setStyle&&(typeof N=="function"&&(N=N(b.feature)),b.setStyle(N))}});function wi(b,N){var $=b.type==="Feature"?b.geometry:b,nt=$?$.coordinates:null,ft=[],At=N&&N.pointToLayer,oe=N&&N.coordsToLatLng||ec,ce,Ne,Ue,on;if(!nt&&!$)return null;switch($.type){case"Point":return ce=oe(nt),Xo(At,b,ce,N);case"MultiPoint":for(Ue=0,on=nt.length;Ue<on;Ue++)ce=oe(nt[Ue]),ft.push(Xo(At,b,ce,N));return new qs(ft);case"LineString":case"MultiLineString":return Ne=$c(nt,$.type==="LineString"?0:1,oe),new ls(Ne,N);case"Polygon":case"MultiPolygon":return Ne=$c(nt,$.type==="Polygon"?1:2,oe),new Eo(Ne,N);case"GeometryCollection":for(Ue=0,on=$.geometries.length;Ue<on;Ue++){var On=wi({geometry:$.geometries[Ue],type:"Feature",properties:b.properties},N);On&&ft.push(On)}return new qs(ft);case"FeatureCollection":for(Ue=0,on=$.features.length;Ue<on;Ue++){var Hn=wi($.features[Ue],N);Hn&&ft.push(Hn)}return new qs(ft);default:throw new Error("Invalid GeoJSON object.")}}function Xo(b,N,$,nt){return b?b(N,$):new tc($,nt&&nt.markersInheritOptions&&nt)}function ec(b){return new pt(b[1],b[0],b[2])}function $c(b,N,$){for(var nt=[],ft=0,At=b.length,oe;ft<At;ft++)oe=N?$c(b[ft],N-1,$):($||ec)(b[ft]),nt.push(oe);return nt}function Wc(b,N){return b=X(b),b.alt!==void 0?[p(b.lng,N),p(b.lat,N),p(b.alt,N)]:[p(b.lng,N),p(b.lat,N)]}function qc(b,N,$,nt){for(var ft=[],At=0,oe=b.length;At<oe;At++)ft.push(N?qc(b[At],os(b[At])?0:N-1,$,nt):Wc(b[At],nt));return!N&&$&&ft.length>0&&ft.push(ft[0].slice()),ft}function _a(b,N){return b.feature?u({},b.feature,{geometry:N}):Vu(N)}function Vu(b){return b.type==="Feature"||b.type==="FeatureCollection"?b:{type:"Feature",properties:{},geometry:b}}var cs={toGeoJSON:function(b){return _a(this,{type:"Point",coordinates:Wc(this.getLatLng(),b)})}};tc.include(cs),ys.include(cs),hl.include(cs),ls.include({toGeoJSON:function(b){var N=!os(this._latlngs),$=qc(this._latlngs,N?1:0,!1,b);return _a(this,{type:(N?"Multi":"")+"LineString",coordinates:$})}}),Eo.include({toGeoJSON:function(b){var N=!os(this._latlngs),$=N&&!os(this._latlngs[0]),nt=qc(this._latlngs,$?2:N?1:0,!0,b);return N||(nt=[nt]),_a(this,{type:($?"Multi":"")+"Polygon",coordinates:nt})}}),As.include({toMultiPoint:function(b){var N=[];return this.eachLayer(function($){N.push($.toGeoJSON(b).geometry.coordinates)}),_a(this,{type:"MultiPoint",coordinates:N})},toGeoJSON:function(b){var N=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(N==="MultiPoint")return this.toMultiPoint(b);var $=N==="GeometryCollection",nt=[];return this.eachLayer(function(ft){if(ft.toGeoJSON){var At=ft.toGeoJSON(b);if($)nt.push(At.geometry);else{var oe=Vu(At);oe.type==="FeatureCollection"?nt.push.apply(nt,oe.features):nt.push(oe)}}}),$?_a(this,{geometries:nt,type:"GeometryCollection"}):{type:"FeatureCollection",features:nt}}});function Oi(b,N){return new Gs(b,N)}var Fa=Oi,Yo=as.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(b,N,$){this._url=b,this._bounds=it(N),x(this,$)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(In(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){En(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(b){return this.options.opacity=b,this._image&&this._updateOpacity(),this},setStyle:function(b){return b.opacity&&this.setOpacity(b.opacity),this},bringToFront:function(){return this._map&&Vn(this._image),this},bringToBack:function(){return this._map&&Ar(this._image),this},setUrl:function(b){return this._url=b,this._image&&(this._image.src=b),this},setBounds:function(b){return this._bounds=it(b),this._map&&this._reset(),this},getEvents:function(){var b={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(b.zoomanim=this._animateZoom),b},setZIndex:function(b){return this.options.zIndex=b,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var b=this._url.tagName==="IMG",N=this._image=b?this._url:xn("img");if(In(N,"leaflet-image-layer"),this._zoomAnimated&&In(N,"leaflet-zoom-animated"),this.options.className&&In(N,this.options.className),N.onselectstart=h,N.onmousemove=h,N.onload=r(this.fire,this,"load"),N.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(N.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),b){this._url=N.src;return}N.src=this._url,N.alt=this.options.alt},_animateZoom:function(b){var N=this._map.getZoomScale(b.zoom),$=this._map._latLngBoundsToNewLayerBounds(this._bounds,b.zoom,b.center).min;ai(this._image,$,N)},_reset:function(){var b=this._image,N=new P(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),$=N.getSize();wr(b,N.min),b.style.width=$.x+"px",b.style.height=$.y+"px"},_updateOpacity:function(){lr(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var b=this.options.errorOverlayUrl;b&&this._url!==b&&(this._url=b,this._image.src=b)},getCenter:function(){return this._bounds.getCenter()}}),ml=function(b,N,$){return new Yo(b,N,$)},Ko=Yo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var b=this._url.tagName==="VIDEO",N=this._image=b?this._url:xn("video");if(In(N,"leaflet-image-layer"),this._zoomAnimated&&In(N,"leaflet-zoom-animated"),this.options.className&&In(N,this.options.className),N.onselectstart=h,N.onmousemove=h,N.onloadeddata=r(this.fire,this,"load"),b){for(var $=N.getElementsByTagName("source"),nt=[],ft=0;ft<$.length;ft++)nt.push($[ft].src);this._url=$.length>0?nt:[N.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(N.style,"objectFit")&&(N.style.objectFit="fill"),N.autoplay=!!this.options.autoplay,N.loop=!!this.options.loop,N.muted=!!this.options.muted,N.playsInline=!!this.options.playsInline;for(var At=0;At<this._url.length;At++){var oe=xn("source");oe.src=this._url[At],N.appendChild(oe)}}});function No(b,N,$){return new Ko(b,N,$)}var nc=Yo.extend({_initImage:function(){var b=this._image=this._url;In(b,"leaflet-image-layer"),this._zoomAnimated&&In(b,"leaflet-zoom-animated"),this.options.className&&In(b,this.options.className),b.onselectstart=h,b.onmousemove=h}});function td(b,N,$){return new nc(b,N,$)}var Hi=as.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(b,N){b&&(b instanceof pt||E(b))?(this._latlng=X(b),x(this,N)):(x(this,b),this._source=N),this.options.content&&(this._content=this.options.content)},openOn:function(b){return b=arguments.length?b:this._source._map,b.hasLayer(this)||b.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(b){return this._map?this.close():(arguments.length?this._source=b:b=this._source,this._prepareOpen(),this.openOn(b._map)),this},onAdd:function(b){this._zoomAnimated=b._zoomAnimated,this._container||this._initLayout(),b._fadeAnimated&&lr(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),b._fadeAnimated&&lr(this._container,1),this.bringToFront(),this.options.interactive&&(In(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(b){b._fadeAnimated?(lr(this._container,0),this._removeTimeout=setTimeout(r(En,void 0,this._container),200)):En(this._container),this.options.interactive&&(mr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(b){return this._latlng=X(b),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(b){return this._content=b,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var b={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(b.zoomanim=this._animateZoom),b},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Vn(this._container),this},bringToBack:function(){return this._map&&Ar(this._container),this},_prepareOpen:function(b){var N=this._source;if(!N._map)return!1;if(N instanceof qs){N=null;var $=this._source._layers;for(var nt in $)if($[nt]._map){N=$[nt];break}if(!N)return!1;this._source=N}if(!b)if(N.getCenter)b=N.getCenter();else if(N.getLatLng)b=N.getLatLng();else if(N.getBounds)b=N.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(b),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var b=this._contentNode,N=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof N=="string")b.innerHTML=N;else{for(;b.hasChildNodes();)b.removeChild(b.firstChild);b.appendChild(N)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var b=this._map.latLngToLayerPoint(this._latlng),N=O(this.options.offset),$=this._getAnchor();this._zoomAnimated?wr(this._container,b.add($)):N=N.add(b).add($);var nt=this._containerBottom=-N.y,ft=this._containerLeft=-Math.round(this._containerWidth/2)+N.x;this._container.style.bottom=nt+"px",this._container.style.left=ft+"px"}},_getAnchor:function(){return[0,0]}});Kn.include({_initOverlay:function(b,N,$,nt){var ft=N;return ft instanceof b||(ft=new b(nt).setContent(N)),$&&ft.setLatLng($),ft}}),as.include({_initOverlay:function(b,N,$,nt){var ft=$;return ft instanceof b?(x(ft,nt),ft._source=this):(ft=N&&!nt?N:new b(nt,this),ft.setContent($)),ft}});var Ua=Hi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(b){return b=arguments.length?b:this._source._map,!b.hasLayer(this)&&b._popup&&b._popup.options.autoClose&&b.removeLayer(b._popup),b._popup=this,Hi.prototype.openOn.call(this,b)},onAdd:function(b){Hi.prototype.onAdd.call(this,b),b.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xa||this._source.on("preclick",is))},onRemove:function(b){Hi.prototype.onRemove.call(this,b),b.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xa||this._source.off("preclick",is))},getEvents:function(){var b=Hi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(b.preclick=this.close),this.options.keepInView&&(b.moveend=this._adjustPan),b},_initLayout:function(){var b="leaflet-popup",N=this._container=xn("div",b+" "+(this.options.className||"")+" leaflet-zoom-animated"),$=this._wrapper=xn("div",b+"-content-wrapper",N);if(this._contentNode=xn("div",b+"-content",$),ss(N),Bi(this._contentNode),Nn(N,"contextmenu",is),this._tipContainer=xn("div",b+"-tip-container",N),this._tip=xn("div",b+"-tip",this._tipContainer),this.options.closeButton){var nt=this._closeButton=xn("a",b+"-close-button",N);nt.setAttribute("role","button"),nt.setAttribute("aria-label","Close popup"),nt.href="#close",nt.innerHTML='<span aria-hidden="true">&#215;</span>',Nn(nt,"click",function(ft){Xr(ft),this.close()},this)}},_updateLayout:function(){var b=this._contentNode,N=b.style;N.width="",N.whiteSpace="nowrap";var $=b.offsetWidth;$=Math.min($,this.options.maxWidth),$=Math.max($,this.options.minWidth),N.width=$+1+"px",N.whiteSpace="",N.height="";var nt=b.offsetHeight,ft=this.options.maxHeight,At="leaflet-popup-scrolled";ft&&nt>ft?(N.height=ft+"px",In(b,At)):mr(b,At),this._containerWidth=this._container.offsetWidth},_animateZoom:function(b){var N=this._map._latLngToNewLayerPoint(this._latlng,b.zoom,b.center),$=this._getAnchor();wr(this._container,N.add($))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var b=this._map,N=parseInt(kn(this._container,"marginBottom"),10)||0,$=this._container.offsetHeight+N,nt=this._containerWidth,ft=new k(this._containerLeft,-$-this._containerBottom);ft._add(ns(this._container));var At=b.layerPointToContainerPoint(ft),oe=O(this.options.autoPanPadding),ce=O(this.options.autoPanPaddingTopLeft||oe),Ne=O(this.options.autoPanPaddingBottomRight||oe),Ue=b.getSize(),on=0,On=0;At.x+nt+Ne.x>Ue.x&&(on=At.x+nt-Ue.x+Ne.x),At.x-on-ce.x<0&&(on=At.x-ce.x),At.y+$+Ne.y>Ue.y&&(On=At.y+$-Ue.y+Ne.y),At.y-On-ce.y<0&&(On=At.y-ce.y),(on||On)&&(this.options.keepInView&&(this._autopanning=!0),b.fire("autopanstart").panBy([on,On]))}},_getAnchor:function(){return O(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),th=function(b,N){return new Ua(b,N)};Kn.mergeOptions({closePopupOnClick:!0}),Kn.include({openPopup:function(b,N,$){return this._initOverlay(Ua,b,N,$).openOn(this),this},closePopup:function(b){return b=arguments.length?b:this._popup,b&&b.close(),this}}),as.include({bindPopup:function(b,N){return this._popup=this._initOverlay(Ua,this._popup,b,N),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(b){return this._popup&&(this instanceof qs||(this._popup._source=this),this._popup._prepareOpen(b||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(b){return this._popup&&this._popup.setContent(b),this},getPopup:function(){return this._popup},_openPopup:function(b){if(!(!this._popup||!this._map)){_i(b);var N=b.layer||b.target;if(this._popup._source===N&&!(N instanceof xa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(b.latlng);return}this._popup._source=N,this.openPopup(b.latlng)}},_movePopup:function(b){this._popup.setLatLng(b.latlng)},_onKeyPress:function(b){b.originalEvent.keyCode===13&&this._openPopup(b)}});var Ha=Hi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(b){Hi.prototype.onAdd.call(this,b),this.setOpacity(this.options.opacity),b.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(b){Hi.prototype.onRemove.call(this,b),b.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var b=Hi.prototype.getEvents.call(this);return this.options.permanent||(b.preclick=this.close),b},_initLayout:function(){var b="leaflet-tooltip",N=b+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xn("div",N),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(b){var N,$,nt=this._map,ft=this._container,At=nt.latLngToContainerPoint(nt.getCenter()),oe=nt.layerPointToContainerPoint(b),ce=this.options.direction,Ne=ft.offsetWidth,Ue=ft.offsetHeight,on=O(this.options.offset),On=this._getAnchor();ce==="top"?(N=Ne/2,$=Ue):ce==="bottom"?(N=Ne/2,$=0):ce==="center"?(N=Ne/2,$=Ue/2):ce==="right"?(N=0,$=Ue/2):ce==="left"?(N=Ne,$=Ue/2):oe.x<At.x?(ce="right",N=0,$=Ue/2):(ce="left",N=Ne+(on.x+On.x)*2,$=Ue/2),b=b.subtract(O(N,$,!0)).add(on).add(On),mr(ft,"leaflet-tooltip-right"),mr(ft,"leaflet-tooltip-left"),mr(ft,"leaflet-tooltip-top"),mr(ft,"leaflet-tooltip-bottom"),In(ft,"leaflet-tooltip-"+ce),wr(ft,b)},_updatePosition:function(){var b=this._map.latLngToLayerPoint(this._latlng);this._setPosition(b)},setOpacity:function(b){this.options.opacity=b,this._container&&lr(this._container,b)},_animateZoom:function(b){var N=this._map._latLngToNewLayerPoint(this._latlng,b.zoom,b.center);this._setPosition(N)},_getAnchor:function(){return O(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),np=function(b,N){return new Ha(b,N)};Kn.include({openTooltip:function(b,N,$){return this._initOverlay(Ha,b,N,$).openOn(this),this},closeTooltip:function(b){return b.close(),this}}),as.include({bindTooltip:function(b,N){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ha,this._tooltip,b,N),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(b){if(!(!b&&this._tooltipHandlersAdded)){var N=b?"off":"on",$={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?$.add=this._openTooltip:($.mouseover=this._openTooltip,$.mouseout=this.closeTooltip,$.click=this._openTooltip,this._map?this._addFocusListeners():$.add=this._addFocusListeners),this._tooltip.options.sticky&&($.mousemove=this._moveTooltip),this[N]($),this._tooltipHandlersAdded=!b}},openTooltip:function(b){return this._tooltip&&(this instanceof qs||(this._tooltip._source=this),this._tooltip._prepareOpen(b)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(b){return this._tooltip&&this._tooltip.setContent(b),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(b){var N=typeof b.getElement=="function"&&b.getElement();N&&(Nn(N,"focus",function(){this._tooltip._source=b,this.openTooltip()},this),Nn(N,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(b){var N=typeof b.getElement=="function"&&b.getElement();N&&N.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(b){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var N=this;this._map.once("moveend",function(){N._openOnceFlag=!1,N._openTooltip(b)});return}this._tooltip._source=b.layer||b.target,this.openTooltip(this._tooltip.options.sticky?b.latlng:void 0)}},_moveTooltip:function(b){var N=b.latlng,$,nt;this._tooltip.options.sticky&&b.originalEvent&&($=this._map.mouseEventToContainerPoint(b.originalEvent),nt=this._map.containerPointToLayerPoint($),N=this._map.layerPointToLatLng(nt)),this._tooltip.setLatLng(N)}});var wa=Mo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(b){var N=b&&b.tagName==="DIV"?b:document.createElement("div"),$=this.options;if($.html instanceof Element?(Un(N),N.appendChild($.html)):N.innerHTML=$.html!==!1?$.html:"",$.bgPos){var nt=O($.bgPos);N.style.backgroundPosition=-nt.x+"px "+-nt.y+"px"}return this._setIconStyles(N,"icon"),N},createShadow:function(){return null}});function Va(b){return new wa(b)}Mo.Default=va;var rc=as.extend({options:{tileSize:256,opacity:1,updateWhenIdle:be.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(b){x(this,b)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(b){b._addZoomLimit(this)},onRemove:function(b){this._removeAllTiles(),En(this._container),b._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Vn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ar(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(b){return this.options.opacity=b,this._updateOpacity(),this},setZIndex:function(b){return this.options.zIndex=b,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var b=this._clampZoom(this._map.getZoom());b!==this._tileZoom&&(this._tileZoom=b,this._updateLevels()),this._update()}return this},getEvents:function(){var b={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=n(this._onMoveEnd,this.options.updateInterval,this)),b.move=this._onMove),this._zoomAnimated&&(b.zoomanim=this._animateZoom),b},createTile:function(){return document.createElement("div")},getTileSize:function(){var b=this.options.tileSize;return b instanceof k?b:new k(b,b)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(b){for(var N=this.getPane().children,$=-b(-1/0,1/0),nt=0,ft=N.length,At;nt<ft;nt++)At=N[nt].style.zIndex,N[nt]!==this._container&&At&&($=b($,+At));isFinite($)&&(this.options.zIndex=$+b(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!be.ielt9){lr(this._container,this.options.opacity);var b=+new Date,N=!1,$=!1;for(var nt in this._tiles){var ft=this._tiles[nt];if(!(!ft.current||!ft.loaded)){var At=Math.min(1,(b-ft.loaded)/200);lr(ft.el,At),At<1?N=!0:(ft.active?$=!0:this._onOpaqueTile(ft),ft.active=!0)}}$&&!this._noPrune&&this._pruneTiles(),N&&(tt(this._fadeFrame),this._fadeFrame=rt(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=xn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var b=this._tileZoom,N=this.options.maxZoom;if(b!==void 0){for(var $ in this._levels)$=Number($),this._levels[$].el.children.length||$===b?(this._levels[$].el.style.zIndex=N-Math.abs(b-$),this._onUpdateLevel($)):(En(this._levels[$].el),this._removeTilesAtZoom($),this._onRemoveLevel($),delete this._levels[$]);var nt=this._levels[b],ft=this._map;return nt||(nt=this._levels[b]={},nt.el=xn("div","leaflet-tile-container leaflet-zoom-animated",this._container),nt.el.style.zIndex=N,nt.origin=ft.project(ft.unproject(ft.getPixelOrigin()),b).round(),nt.zoom=b,this._setZoomTransform(nt,ft.getCenter(),ft.getZoom()),h(nt.el.offsetWidth),this._onCreateLevel(nt)),this._level=nt,nt}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var b,N,$=this._map.getZoom();if($>this.options.maxZoom||$<this.options.minZoom){this._removeAllTiles();return}for(b in this._tiles)N=this._tiles[b],N.retain=N.current;for(b in this._tiles)if(N=this._tiles[b],N.current&&!N.active){var nt=N.coords;this._retainParent(nt.x,nt.y,nt.z,nt.z-5)||this._retainChildren(nt.x,nt.y,nt.z,nt.z+2)}for(b in this._tiles)this._tiles[b].retain||this._removeTile(b)}},_removeTilesAtZoom:function(b){for(var N in this._tiles)this._tiles[N].coords.z===b&&this._removeTile(N)},_removeAllTiles:function(){for(var b in this._tiles)this._removeTile(b)},_invalidateAll:function(){for(var b in this._levels)En(this._levels[b].el),this._onRemoveLevel(Number(b)),delete this._levels[b];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(b,N,$,nt){var ft=Math.floor(b/2),At=Math.floor(N/2),oe=$-1,ce=new k(+ft,+At);ce.z=+oe;var Ne=this._tileCoordsToKey(ce),Ue=this._tiles[Ne];return Ue&&Ue.active?(Ue.retain=!0,!0):(Ue&&Ue.loaded&&(Ue.retain=!0),oe>nt?this._retainParent(ft,At,oe,nt):!1)},_retainChildren:function(b,N,$,nt){for(var ft=2*b;ft<2*b+2;ft++)for(var At=2*N;At<2*N+2;At++){var oe=new k(ft,At);oe.z=$+1;var ce=this._tileCoordsToKey(oe),Ne=this._tiles[ce];if(Ne&&Ne.active){Ne.retain=!0;continue}else Ne&&Ne.loaded&&(Ne.retain=!0);$+1<nt&&this._retainChildren(ft,At,$+1,nt)}},_resetView:function(b){var N=b&&(b.pinch||b.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),N,N)},_animateZoom:function(b){this._setView(b.center,b.zoom,!0,b.noUpdate)},_clampZoom:function(b){var N=this.options;return N.minNativeZoom!==void 0&&b<N.minNativeZoom?N.minNativeZoom:N.maxNativeZoom!==void 0&&N.maxNativeZoom<b?N.maxNativeZoom:b},_setView:function(b,N,$,nt){var ft=Math.round(N);this.options.maxZoom!==void 0&&ft>this.options.maxZoom||this.options.minZoom!==void 0&&ft<this.options.minZoom?ft=void 0:ft=this._clampZoom(ft);var At=this.options.updateWhenZooming&&ft!==this._tileZoom;(!nt||At)&&(this._tileZoom=ft,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ft!==void 0&&this._update(b),$||this._pruneTiles(),this._noPrune=!!$),this._setZoomTransforms(b,N)},_setZoomTransforms:function(b,N){for(var $ in this._levels)this._setZoomTransform(this._levels[$],b,N)},_setZoomTransform:function(b,N,$){var nt=this._map.getZoomScale($,b.zoom),ft=b.origin.multiplyBy(nt).subtract(this._map._getNewPixelOrigin(N,$)).round();be.any3d?ai(b.el,ft,nt):wr(b.el,ft)},_resetGrid:function(){var b=this._map,N=b.options.crs,$=this._tileSize=this.getTileSize(),nt=this._tileZoom,ft=this._map.getPixelWorldBounds(this._tileZoom);ft&&(this._globalTileRange=this._pxBoundsToTileRange(ft)),this._wrapX=N.wrapLng&&!this.options.noWrap&&[Math.floor(b.project([0,N.wrapLng[0]],nt).x/$.x),Math.ceil(b.project([0,N.wrapLng[1]],nt).x/$.y)],this._wrapY=N.wrapLat&&!this.options.noWrap&&[Math.floor(b.project([N.wrapLat[0],0],nt).y/$.x),Math.ceil(b.project([N.wrapLat[1],0],nt).y/$.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(b){var N=this._map,$=N._animatingZoom?Math.max(N._animateToZoom,N.getZoom()):N.getZoom(),nt=N.getZoomScale($,this._tileZoom),ft=N.project(b,this._tileZoom).floor(),At=N.getSize().divideBy(nt*2);return new P(ft.subtract(At),ft.add(At))},_update:function(b){var N=this._map;if(N){var $=this._clampZoom(N.getZoom());if(b===void 0&&(b=N.getCenter()),this._tileZoom!==void 0){var nt=this._getTiledPixelBounds(b),ft=this._pxBoundsToTileRange(nt),At=ft.getCenter(),oe=[],ce=this.options.keepBuffer,Ne=new P(ft.getBottomLeft().subtract([ce,-ce]),ft.getTopRight().add([ce,-ce]));if(!(isFinite(ft.min.x)&&isFinite(ft.min.y)&&isFinite(ft.max.x)&&isFinite(ft.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ue in this._tiles){var on=this._tiles[Ue].coords;(on.z!==this._tileZoom||!Ne.contains(new k(on.x,on.y)))&&(this._tiles[Ue].current=!1)}if(Math.abs($-this._tileZoom)>1){this._setView(b,$);return}for(var On=ft.min.y;On<=ft.max.y;On++)for(var Hn=ft.min.x;Hn<=ft.max.x;Hn++){var Wi=new k(Hn,On);if(Wi.z=this._tileZoom,!!this._isValidTile(Wi)){var Ti=this._tiles[this._tileCoordsToKey(Wi)];Ti?Ti.current=!0:oe.push(Wi)}}if(oe.sort(function(Mr,Tr){return Mr.distanceTo(At)-Tr.distanceTo(At)}),oe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xs=document.createDocumentFragment();for(Hn=0;Hn<oe.length;Hn++)this._addTile(oe[Hn],xs);this._level.el.appendChild(xs)}}}},_isValidTile:function(b){var N=this._map.options.crs;if(!N.infinite){var $=this._globalTileRange;if(!N.wrapLng&&(b.x<$.min.x||b.x>$.max.x)||!N.wrapLat&&(b.y<$.min.y||b.y>$.max.y))return!1}if(!this.options.bounds)return!0;var nt=this._tileCoordsToBounds(b);return it(this.options.bounds).overlaps(nt)},_keyToBounds:function(b){return this._tileCoordsToBounds(this._keyToTileCoords(b))},_tileCoordsToNwSe:function(b){var N=this._map,$=this.getTileSize(),nt=b.scaleBy($),ft=nt.add($),At=N.unproject(nt,b.z),oe=N.unproject(ft,b.z);return[At,oe]},_tileCoordsToBounds:function(b){var N=this._tileCoordsToNwSe(b),$=new et(N[0],N[1]);return this.options.noWrap||($=this._map.wrapLatLngBounds($)),$},_tileCoordsToKey:function(b){return b.x+":"+b.y+":"+b.z},_keyToTileCoords:function(b){var N=b.split(":"),$=new k(+N[0],+N[1]);return $.z=+N[2],$},_removeTile:function(b){var N=this._tiles[b];N&&(En(N.el),delete this._tiles[b],this.fire("tileunload",{tile:N.el,coords:this._keyToTileCoords(b)}))},_initTile:function(b){In(b,"leaflet-tile");var N=this.getTileSize();b.style.width=N.x+"px",b.style.height=N.y+"px",b.onselectstart=h,b.onmousemove=h,be.ielt9&&this.options.opacity<1&&lr(b,this.options.opacity)},_addTile:function(b,N){var $=this._getTilePos(b),nt=this._tileCoordsToKey(b),ft=this.createTile(this._wrapCoords(b),r(this._tileReady,this,b));this._initTile(ft),this.createTile.length<2&&rt(r(this._tileReady,this,b,null,ft)),wr(ft,$),this._tiles[nt]={el:ft,coords:b,current:!0},N.appendChild(ft),this.fire("tileloadstart",{tile:ft,coords:b})},_tileReady:function(b,N,$){N&&this.fire("tileerror",{error:N,tile:$,coords:b});var nt=this._tileCoordsToKey(b);$=this._tiles[nt],$&&($.loaded=+new Date,this._map._fadeAnimated?(lr($.el,0),tt(this._fadeFrame),this._fadeFrame=rt(this._updateOpacity,this)):($.active=!0,this._pruneTiles()),N||(In($.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:$.el,coords:b})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),be.ielt9||!this._map._fadeAnimated?rt(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(b){return b.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(b){var N=new k(this._wrapX?f(b.x,this._wrapX):b.x,this._wrapY?f(b.y,this._wrapY):b.y);return N.z=b.z,N},_pxBoundsToTileRange:function(b){var N=this.getTileSize();return new P(b.min.unscaleBy(N).floor(),b.max.unscaleBy(N).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var b in this._tiles)if(!this._tiles[b].loaded)return!1;return!0}});function gl(b){return new rc(b)}var Zs=rc.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(b,N){this._url=b,N=x(this,N),N.detectRetina&&be.retina&&N.maxZoom>0?(N.tileSize=Math.floor(N.tileSize/2),N.zoomReverse?(N.zoomOffset--,N.minZoom=Math.min(N.maxZoom,N.minZoom+1)):(N.zoomOffset++,N.maxZoom=Math.max(N.minZoom,N.maxZoom-1)),N.minZoom=Math.max(0,N.minZoom)):N.zoomReverse?N.minZoom=Math.min(N.maxZoom,N.minZoom):N.maxZoom=Math.max(N.minZoom,N.maxZoom),typeof N.subdomains=="string"&&(N.subdomains=N.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(b,N){return this._url===b&&N===void 0&&(N=!0),this._url=b,N||this.redraw(),this},createTile:function(b,N){var $=document.createElement("img");return Nn($,"load",r(this._tileOnLoad,this,N,$)),Nn($,"error",r(this._tileOnError,this,N,$)),(this.options.crossOrigin||this.options.crossOrigin==="")&&($.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&($.referrerPolicy=this.options.referrerPolicy),$.alt="",$.src=this.getTileUrl(b),$},getTileUrl:function(b){var N={r:be.retina?"@2x":"",s:this._getSubdomain(b),x:b.x,y:b.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var $=this._globalTileRange.max.y-b.y;this.options.tms&&(N.y=$),N["-y"]=$}return S(this._url,u(N,this.options))},_tileOnLoad:function(b,N){be.ielt9?setTimeout(r(b,this,null,N),0):b(null,N)},_tileOnError:function(b,N,$){var nt=this.options.errorTileUrl;nt&&N.getAttribute("src")!==nt&&(N.src=nt),b($,N)},_onTileRemove:function(b){b.tile.onload=null},_getZoomForUrl:function(){var b=this._tileZoom,N=this.options.maxZoom,$=this.options.zoomReverse,nt=this.options.zoomOffset;return $&&(b=N-b),b+nt},_getSubdomain:function(b){var N=Math.abs(b.x+b.y)%this.options.subdomains.length;return this.options.subdomains[N]},_abortLoading:function(){var b,N;for(b in this._tiles)if(this._tiles[b].coords.z!==this._tileZoom&&(N=this._tiles[b].el,N.onload=h,N.onerror=h,!N.complete)){N.src=D;var $=this._tiles[b].coords;En(N),delete this._tiles[b],this.fire("tileabort",{tile:N,coords:$})}},_removeTile:function(b){var N=this._tiles[b];if(N)return N.el.setAttribute("src",D),rc.prototype._removeTile.call(this,b)},_tileReady:function(b,N,$){if(!(!this._map||$&&$.getAttribute("src")===D))return rc.prototype._tileReady.call(this,b,N,$)}});function vs(b,N){return new Zs(b,N)}var Qo=Zs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(b,N){this._url=b;var $=u({},this.defaultWmsParams);for(var nt in N)nt in this.options||($[nt]=N[nt]);N=x(this,N);var ft=N.detectRetina&&be.retina?2:1,At=this.getTileSize();$.width=At.x*ft,$.height=At.y*ft,this.wmsParams=$},onAdd:function(b){this._crs=this.options.crs||b.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var N=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[N]=this._crs.code,Zs.prototype.onAdd.call(this,b)},getTileUrl:function(b){var N=this._tileCoordsToNwSe(b),$=this._crs,nt=H($.project(N[0]),$.project(N[1])),ft=nt.min,At=nt.max,oe=(this._wmsVersion>=1.3&&this._crs===Qf?[ft.y,ft.x,At.y,At.x]:[ft.x,ft.y,At.x,At.y]).join(","),ce=Zs.prototype.getTileUrl.call(this,b);return ce+y(this.wmsParams,ce,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+oe},setParams:function(b,N){return u(this.wmsParams,b),N||this.redraw(),this}});function Rs(b,N){return new Qo(b,N)}Zs.WMS=Qo,vs.wms=Rs;var Si=as.extend({options:{padding:.1},initialize:function(b){x(this,b),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),In(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var b={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(b.zoomanim=this._onAnimZoom),b},_onAnimZoom:function(b){this._updateTransform(b.center,b.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(b,N){var $=this._map.getZoomScale(N,this._zoom),nt=this._map.getSize().multiplyBy(.5+this.options.padding),ft=this._map.project(this._center,N),At=nt.multiplyBy(-$).add(ft).subtract(this._map._getNewPixelOrigin(b,N));be.any3d?ai(this._container,At,$):wr(this._container,At)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var b in this._layers)this._layers[b]._reset()},_onZoomEnd:function(){for(var b in this._layers)this._layers[b]._project()},_updatePaths:function(){for(var b in this._layers)this._layers[b]._update()},_update:function(){var b=this.options.padding,N=this._map.getSize(),$=this._map.containerPointToLayerPoint(N.multiplyBy(-b)).round();this._bounds=new P($,$.add(N.multiplyBy(1+b*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ic=Si.extend({options:{tolerance:0},getEvents:function(){var b=Si.prototype.getEvents.call(this);return b.viewprereset=this._onViewPreReset,b},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Si.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var b=this._container=document.createElement("canvas");Nn(b,"mousemove",this._onMouseMove,this),Nn(b,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Nn(b,"mouseout",this._handleMouseOut,this),b._leaflet_disable_events=!0,this._ctx=b.getContext("2d")},_destroyContainer:function(){tt(this._redrawRequest),delete this._ctx,En(this._container),jr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var b;this._redrawBounds=null;for(var N in this._layers)b=this._layers[N],b._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Si.prototype._update.call(this);var b=this._bounds,N=this._container,$=b.getSize(),nt=be.retina?2:1;wr(N,b.min),N.width=nt*$.x,N.height=nt*$.y,N.style.width=$.x+"px",N.style.height=$.y+"px",be.retina&&this._ctx.scale(2,2),this._ctx.translate(-b.min.x,-b.min.y),this.fire("update")}},_reset:function(){Si.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(b){this._updateDashArray(b),this._layers[l(b)]=b;var N=b._order={layer:b,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=N),this._drawLast=N,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(b){this._requestRedraw(b)},_removePath:function(b){var N=b._order,$=N.next,nt=N.prev;$?$.prev=nt:this._drawLast=nt,nt?nt.next=$:this._drawFirst=$,delete b._order,delete this._layers[l(b)],this._requestRedraw(b)},_updatePath:function(b){this._extendRedrawBounds(b),b._project(),b._update(),this._requestRedraw(b)},_updateStyle:function(b){this._updateDashArray(b),this._requestRedraw(b)},_updateDashArray:function(b){if(typeof b.options.dashArray=="string"){var N=b.options.dashArray.split(/[, ]+/),$=[],nt,ft;for(ft=0;ft<N.length;ft++){if(nt=Number(N[ft]),isNaN(nt))return;$.push(nt)}b.options._dashArray=$}else b.options._dashArray=b.options.dashArray},_requestRedraw:function(b){this._map&&(this._extendRedrawBounds(b),this._redrawRequest=this._redrawRequest||rt(this._redraw,this))},_extendRedrawBounds:function(b){if(b._pxBounds){var N=(b.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new P,this._redrawBounds.extend(b._pxBounds.min.subtract([N,N])),this._redrawBounds.extend(b._pxBounds.max.add([N,N]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var b=this._redrawBounds;if(b){var N=b.getSize();this._ctx.clearRect(b.min.x,b.min.y,N.x,N.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var b,N=this._redrawBounds;if(this._ctx.save(),N){var $=N.getSize();this._ctx.beginPath(),this._ctx.rect(N.min.x,N.min.y,$.x,$.y),this._ctx.clip()}this._drawing=!0;for(var nt=this._drawFirst;nt;nt=nt.next)b=nt.layer,(!N||b._pxBounds&&b._pxBounds.intersects(N))&&b._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(b,N){if(this._drawing){var $,nt,ft,At,oe=b._parts,ce=oe.length,Ne=this._ctx;if(ce){for(Ne.beginPath(),$=0;$<ce;$++){for(nt=0,ft=oe[$].length;nt<ft;nt++)At=oe[$][nt],Ne[nt?"lineTo":"moveTo"](At.x,At.y);N&&Ne.closePath()}this._fillStroke(Ne,b)}}},_updateCircle:function(b){if(!(!this._drawing||b._empty())){var N=b._point,$=this._ctx,nt=Math.max(Math.round(b._radius),1),ft=(Math.max(Math.round(b._radiusY),1)||nt)/nt;ft!==1&&($.save(),$.scale(1,ft)),$.beginPath(),$.arc(N.x,N.y/ft,nt,0,Math.PI*2,!1),ft!==1&&$.restore(),this._fillStroke($,b)}},_fillStroke:function(b,N){var $=N.options;$.fill&&(b.globalAlpha=$.fillOpacity,b.fillStyle=$.fillColor||$.color,b.fill($.fillRule||"evenodd")),$.stroke&&$.weight!==0&&(b.setLineDash&&b.setLineDash(N.options&&N.options._dashArray||[]),b.globalAlpha=$.opacity,b.lineWidth=$.weight,b.strokeStyle=$.color,b.lineCap=$.lineCap,b.lineJoin=$.lineJoin,b.stroke())},_onClick:function(b){for(var N=this._map.mouseEventToLayerPoint(b),$,nt,ft=this._drawFirst;ft;ft=ft.next)$=ft.layer,$.options.interactive&&$._containsPoint(N)&&(!(b.type==="click"||b.type==="preclick")||!this._map._draggableMoved($))&&(nt=$);this._fireEvent(nt?[nt]:!1,b)},_onMouseMove:function(b){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var N=this._map.mouseEventToLayerPoint(b);this._handleMouseHover(b,N)}},_handleMouseOut:function(b){var N=this._hoveredLayer;N&&(mr(this._container,"leaflet-interactive"),this._fireEvent([N],b,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(b,N){if(!this._mouseHoverThrottled){for(var $,nt,ft=this._drawFirst;ft;ft=ft.next)$=ft.layer,$.options.interactive&&$._containsPoint(N)&&(nt=$);nt!==this._hoveredLayer&&(this._handleMouseOut(b),nt&&(In(this._container,"leaflet-interactive"),this._fireEvent([nt],b,"mouseover"),this._hoveredLayer=nt)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,b),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(b,N,$){this._map._fireDOMEvent(N,$||N.type,b)},_bringToFront:function(b){var N=b._order;if(N){var $=N.next,nt=N.prev;if($)$.prev=nt;else return;nt?nt.next=$:$&&(this._drawFirst=$),N.prev=this._drawLast,this._drawLast.next=N,N.next=null,this._drawLast=N,this._requestRedraw(b)}},_bringToBack:function(b){var N=b._order;if(N){var $=N.next,nt=N.prev;if(nt)nt.next=$;else return;$?$.prev=nt:nt&&(this._drawLast=nt),N.prev=null,N.next=this._drawFirst,this._drawFirst.prev=N,this._drawFirst=N,this._requestRedraw(b)}}});function Ao(b){return be.canvas?new ic(b):null}var $a=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(b){return document.createElement("<lvml:"+b+' class="lvml">')}}catch{}return function(b){return document.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),$u={_initContainer:function(){this._container=xn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Si.prototype._update.call(this),this.fire("update"))},_initPath:function(b){var N=b._container=$a("shape");In(N,"leaflet-vml-shape "+(this.options.className||"")),N.coordsize="1 1",b._path=$a("path"),N.appendChild(b._path),this._updateStyle(b),this._layers[l(b)]=b},_addPath:function(b){var N=b._container;this._container.appendChild(N),b.options.interactive&&b.addInteractiveTarget(N)},_removePath:function(b){var N=b._container;En(N),b.removeInteractiveTarget(N),delete this._layers[l(b)]},_updateStyle:function(b){var N=b._stroke,$=b._fill,nt=b.options,ft=b._container;ft.stroked=!!nt.stroke,ft.filled=!!nt.fill,nt.stroke?(N||(N=b._stroke=$a("stroke")),ft.appendChild(N),N.weight=nt.weight+"px",N.color=nt.color,N.opacity=nt.opacity,nt.dashArray?N.dashStyle=E(nt.dashArray)?nt.dashArray.join(" "):nt.dashArray.replace(/( *, *)/g," "):N.dashStyle="",N.endcap=nt.lineCap.replace("butt","flat"),N.joinstyle=nt.lineJoin):N&&(ft.removeChild(N),b._stroke=null),nt.fill?($||($=b._fill=$a("fill")),ft.appendChild($),$.color=nt.fillColor||nt.color,$.opacity=nt.fillOpacity):$&&(ft.removeChild($),b._fill=null)},_updateCircle:function(b){var N=b._point.round(),$=Math.round(b._radius),nt=Math.round(b._radiusY||$);this._setPath(b,b._empty()?"M0 0":"AL "+N.x+","+N.y+" "+$+","+nt+" 0,"+65535*360)},_setPath:function(b,N){b._path.v=N},_bringToFront:function(b){Vn(b._container)},_bringToBack:function(b){Ar(b._container)}},uo=be.vml?$a:ie,bl=Si.extend({_initContainer:function(){this._container=uo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=uo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){En(this._container),jr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Si.prototype._update.call(this);var b=this._bounds,N=b.getSize(),$=this._container;(!this._svgSize||!this._svgSize.equals(N))&&(this._svgSize=N,$.setAttribute("width",N.x),$.setAttribute("height",N.y)),wr($,b.min),$.setAttribute("viewBox",[b.min.x,b.min.y,N.x,N.y].join(" ")),this.fire("update")}},_initPath:function(b){var N=b._path=uo("path");b.options.className&&In(N,b.options.className),b.options.interactive&&In(N,"leaflet-interactive"),this._updateStyle(b),this._layers[l(b)]=b},_addPath:function(b){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(b._path),b.addInteractiveTarget(b._path)},_removePath:function(b){En(b._path),b.removeInteractiveTarget(b._path),delete this._layers[l(b)]},_updatePath:function(b){b._project(),b._update()},_updateStyle:function(b){var N=b._path,$=b.options;N&&($.stroke?(N.setAttribute("stroke",$.color),N.setAttribute("stroke-opacity",$.opacity),N.setAttribute("stroke-width",$.weight),N.setAttribute("stroke-linecap",$.lineCap),N.setAttribute("stroke-linejoin",$.lineJoin),$.dashArray?N.setAttribute("stroke-dasharray",$.dashArray):N.removeAttribute("stroke-dasharray"),$.dashOffset?N.setAttribute("stroke-dashoffset",$.dashOffset):N.removeAttribute("stroke-dashoffset")):N.setAttribute("stroke","none"),$.fill?(N.setAttribute("fill",$.fillColor||$.color),N.setAttribute("fill-opacity",$.fillOpacity),N.setAttribute("fill-rule",$.fillRule||"evenodd")):N.setAttribute("fill","none"))},_updatePoly:function(b,N){this._setPath(b,re(b._parts,N))},_updateCircle:function(b){var N=b._point,$=Math.max(Math.round(b._radius),1),nt=Math.max(Math.round(b._radiusY),1)||$,ft="a"+$+","+nt+" 0 1,0 ",At=b._empty()?"M0 0":"M"+(N.x-$)+","+N.y+ft+$*2+",0 "+ft+-$*2+",0 ";this._setPath(b,At)},_setPath:function(b,N){b._path.setAttribute("d",N)},_bringToFront:function(b){Vn(b._path)},_bringToBack:function(b){Ar(b._path)}});be.vml&&bl.include($u);function Jo(b){return be.svg||be.vml?new bl(b):null}Kn.include({getRenderer:function(b){var N=b.options.renderer||this._getPaneRenderer(b.options.pane)||this.options.renderer||this._renderer;return N||(N=this._renderer=this._createRenderer()),this.hasLayer(N)||this.addLayer(N),N},_getPaneRenderer:function(b){if(b==="overlayPane"||b===void 0)return!1;var N=this._paneRenderers[b];return N===void 0&&(N=this._createRenderer({pane:b}),this._paneRenderers[b]=N),N},_createRenderer:function(b){return this.options.preferCanvas&&Ao(b)||Jo(b)}});var Vi=Eo.extend({initialize:function(b,N){Eo.prototype.initialize.call(this,this._boundsToLatLngs(b),N)},setBounds:function(b){return this.setLatLngs(this._boundsToLatLngs(b))},_boundsToLatLngs:function(b){return b=it(b),[b.getSouthWest(),b.getNorthWest(),b.getNorthEast(),b.getSouthEast()]}});function ed(b,N){return new Vi(b,N)}bl.create=uo,bl.pointsToPath=re,Gs.geometryToLayer=wi,Gs.coordsToLatLng=ec,Gs.coordsToLatLngs=$c,Gs.latLngToCoords=Wc,Gs.latLngsToCoords=qc,Gs.getFeature=_a,Gs.asFeature=Vu,Kn.mergeOptions({boxZoom:!0});var $i=lo.extend({initialize:function(b){this._map=b,this._container=b._container,this._pane=b._panes.overlayPane,this._resetStateTimeout=0,b.on("unload",this._destroy,this)},addHooks:function(){Nn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){jr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){En(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(b){if(!b.shiftKey||b.which!==1&&b.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Or(),Vs(),this._startPoint=this._map.mouseEventToContainerPoint(b),Nn(document,{contextmenu:_i,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(b){this._moved||(this._moved=!0,this._box=xn("div","leaflet-zoom-box",this._container),In(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(b);var N=new P(this._point,this._startPoint),$=N.getSize();wr(this._box,N.min),this._box.style.width=$.x+"px",this._box.style.height=$.y+"px"},_finish:function(){this._moved&&(En(this._box),mr(this._container,"leaflet-crosshair")),kr(),li(),jr(document,{contextmenu:_i,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(b){if(!(b.which!==1&&b.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var N=new et(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(N).fire("boxzoomend",{boxZoomBounds:N})}},_onKeyDown:function(b){b.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Kn.addInitHook("addHandler","boxZoom",$i),Kn.mergeOptions({doubleClickZoom:!0});var Sa=lo.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(b){var N=this._map,$=N.getZoom(),nt=N.options.zoomDelta,ft=b.originalEvent.shiftKey?$-nt:$+nt;N.options.doubleClickZoom==="center"?N.setZoom(ft):N.setZoomAround(b.containerPoint,ft)}});Kn.addInitHook("addHandler","doubleClickZoom",Sa),Kn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var sr=lo.extend({addHooks:function(){if(!this._draggable){var b=this._map;this._draggable=new ga(b._mapPane,b._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),b.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),b.on("zoomend",this._onZoomEnd,this),b.whenReady(this._onZoomEnd,this))}In(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){mr(this._map._container,"leaflet-grab"),mr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var b=this._map;if(b._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var N=it(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(N.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(N.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;b.fire("movestart").fire("dragstart"),b.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(b){if(this._map.options.inertia){var N=this._lastTime=+new Date,$=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push($),this._times.push(N),this._prunePositions(N)}this._map.fire("move",b).fire("drag",b)},_prunePositions:function(b){for(;this._positions.length>1&&b-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var b=this._map.getSize().divideBy(2),N=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=N.subtract(b).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(b,N){return b-(b-N)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var b=this._draggable._newPos.subtract(this._draggable._startPos),N=this._offsetLimit;b.x<N.min.x&&(b.x=this._viscousLimit(b.x,N.min.x)),b.y<N.min.y&&(b.y=this._viscousLimit(b.y,N.min.y)),b.x>N.max.x&&(b.x=this._viscousLimit(b.x,N.max.x)),b.y>N.max.y&&(b.y=this._viscousLimit(b.y,N.max.y)),this._draggable._newPos=this._draggable._startPos.add(b)}},_onPreDragWrap:function(){var b=this._worldWidth,N=Math.round(b/2),$=this._initialWorldOffset,nt=this._draggable._newPos.x,ft=(nt-N+$)%b+N-$,At=(nt+N+$)%b-N-$,oe=Math.abs(ft+$)<Math.abs(At+$)?ft:At;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=oe},_onDragEnd:function(b){var N=this._map,$=N.options,nt=!$.inertia||b.noInertia||this._times.length<2;if(N.fire("dragend",b),nt)N.fire("moveend");else{this._prunePositions(+new Date);var ft=this._lastPos.subtract(this._positions[0]),At=(this._lastTime-this._times[0])/1e3,oe=$.easeLinearity,ce=ft.multiplyBy(oe/At),Ne=ce.distanceTo([0,0]),Ue=Math.min($.inertiaMaxSpeed,Ne),on=ce.multiplyBy(Ue/Ne),On=Ue/($.inertiaDeceleration*oe),Hn=on.multiplyBy(-On/2).round();!Hn.x&&!Hn.y?N.fire("moveend"):(Hn=N._limitOffset(Hn,N.options.maxBounds),rt(function(){N.panBy(Hn,{duration:On,easeLinearity:oe,noMoveStart:!0,animate:!0})}))}}});Kn.addInitHook("addHandler","dragging",sr),Kn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var sc=lo.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(b){this._map=b,this._setPanDelta(b.options.keyboardPanDelta),this._setZoomDelta(b.options.zoomDelta)},addHooks:function(){var b=this._map._container;b.tabIndex<=0&&(b.tabIndex="0"),Nn(b,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),jr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var b=document.body,N=document.documentElement,$=b.scrollTop||N.scrollTop,nt=b.scrollLeft||N.scrollLeft;this._map._container.focus(),window.scrollTo(nt,$)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(b){var N=this._panKeys={},$=this.keyCodes,nt,ft;for(nt=0,ft=$.left.length;nt<ft;nt++)N[$.left[nt]]=[-1*b,0];for(nt=0,ft=$.right.length;nt<ft;nt++)N[$.right[nt]]=[b,0];for(nt=0,ft=$.down.length;nt<ft;nt++)N[$.down[nt]]=[0,b];for(nt=0,ft=$.up.length;nt<ft;nt++)N[$.up[nt]]=[0,-1*b]},_setZoomDelta:function(b){var N=this._zoomKeys={},$=this.keyCodes,nt,ft;for(nt=0,ft=$.zoomIn.length;nt<ft;nt++)N[$.zoomIn[nt]]=b;for(nt=0,ft=$.zoomOut.length;nt<ft;nt++)N[$.zoomOut[nt]]=-b},_addHooks:function(){Nn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){jr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(b){if(!(b.altKey||b.ctrlKey||b.metaKey)){var N=b.keyCode,$=this._map,nt;if(N in this._panKeys){if(!$._panAnim||!$._panAnim._inProgress)if(nt=this._panKeys[N],b.shiftKey&&(nt=O(nt).multiplyBy(3)),$.options.maxBounds&&(nt=$._limitOffset(O(nt),$.options.maxBounds)),$.options.worldCopyJump){var ft=$.wrapLatLng($.unproject($.project($.getCenter()).add(nt)));$.panTo(ft)}else $.panBy(nt)}else if(N in this._zoomKeys)$.setZoom($.getZoom()+(b.shiftKey?3:1)*this._zoomKeys[N]);else if(N===27&&$._popup&&$._popup.options.closeOnEscapeKey)$.closePopup();else return;_i(b)}}});Kn.addInitHook("addHandler","keyboard",sc),Kn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Wa=lo.extend({addHooks:function(){Nn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){jr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(b){var N=zi(b),$=this._map.options.wheelDebounceTime;this._delta+=N,this._lastMousePos=this._map.mouseEventToContainerPoint(b),this._startTime||(this._startTime=+new Date);var nt=Math.max($-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),nt),_i(b)},_performZoom:function(){var b=this._map,N=b.getZoom(),$=this._map.options.zoomSnap||0;b._stop();var nt=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ft=4*Math.log(2/(1+Math.exp(-Math.abs(nt))))/Math.LN2,At=$?Math.ceil(ft/$)*$:ft,oe=b._limitZoom(N+(this._delta>0?At:-At))-N;this._delta=0,this._startTime=null,oe&&(b.options.scrollWheelZoom==="center"?b.setZoom(N+oe):b.setZoomAround(this._lastMousePos,N+oe))}});Kn.addInitHook("addHandler","scrollWheelZoom",Wa);var $r=600;Kn.mergeOptions({tapHold:be.touchNative&&be.safari&&be.mobile,tapTolerance:15});var oc=lo.extend({addHooks:function(){Nn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){jr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(b){if(clearTimeout(this._holdTimeout),b.touches.length===1){var N=b.touches[0];this._startPos=this._newPos=new k(N.clientX,N.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Nn(document,"touchend",Xr),Nn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",N))},this),$r),Nn(document,"touchend touchcancel contextmenu",this._cancel,this),Nn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function b(){jr(document,"touchend",Xr),jr(document,"touchend touchcancel",b)},_cancel:function(){clearTimeout(this._holdTimeout),jr(document,"touchend touchcancel contextmenu",this._cancel,this),jr(document,"touchmove",this._onMove,this)},_onMove:function(b){var N=b.touches[0];this._newPos=new k(N.clientX,N.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(b,N){var $=new MouseEvent(b,{bubbles:!0,cancelable:!0,view:window,screenX:N.screenX,screenY:N.screenY,clientX:N.clientX,clientY:N.clientY});$._simulated=!0,N.target.dispatchEvent($)}});Kn.addInitHook("addHandler","tapHold",oc),Kn.mergeOptions({touchZoom:be.touch,bounceAtZoomLimits:!0});var Wu=lo.extend({addHooks:function(){In(this._map._container,"leaflet-touch-zoom"),Nn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){mr(this._map._container,"leaflet-touch-zoom"),jr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(b){var N=this._map;if(!(!b.touches||b.touches.length!==2||N._animatingZoom||this._zooming)){var $=N.mouseEventToContainerPoint(b.touches[0]),nt=N.mouseEventToContainerPoint(b.touches[1]);this._centerPoint=N.getSize()._divideBy(2),this._startLatLng=N.containerPointToLatLng(this._centerPoint),N.options.touchZoom!=="center"&&(this._pinchStartLatLng=N.containerPointToLatLng($.add(nt)._divideBy(2))),this._startDist=$.distanceTo(nt),this._startZoom=N.getZoom(),this._moved=!1,this._zooming=!0,N._stop(),Nn(document,"touchmove",this._onTouchMove,this),Nn(document,"touchend touchcancel",this._onTouchEnd,this),Xr(b)}},_onTouchMove:function(b){if(!(!b.touches||b.touches.length!==2||!this._zooming)){var N=this._map,$=N.mouseEventToContainerPoint(b.touches[0]),nt=N.mouseEventToContainerPoint(b.touches[1]),ft=$.distanceTo(nt)/this._startDist;if(this._zoom=N.getScaleZoom(ft,this._startZoom),!N.options.bounceAtZoomLimits&&(this._zoom<N.getMinZoom()&&ft<1||this._zoom>N.getMaxZoom()&&ft>1)&&(this._zoom=N._limitZoom(this._zoom)),N.options.touchZoom==="center"){if(this._center=this._startLatLng,ft===1)return}else{var At=$._add(nt)._divideBy(2)._subtract(this._centerPoint);if(ft===1&&At.x===0&&At.y===0)return;this._center=N.unproject(N.project(this._pinchStartLatLng,this._zoom).subtract(At),this._zoom)}this._moved||(N._moveStart(!0,!1),this._moved=!0),tt(this._animRequest);var oe=r(N._move,N,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=rt(oe,this,!0),Xr(b)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,tt(this._animRequest),jr(document,"touchmove",this._onTouchMove,this),jr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Kn.addInitHook("addHandler","touchZoom",Wu),Kn.BoxZoom=$i,Kn.DoubleClickZoom=Sa,Kn.Drag=sr,Kn.Keyboard=sc,Kn.ScrollWheelZoom=Wa,Kn.TapHold=oc,Kn.TouchZoom=Wu,t.Bounds=P,t.Browser=be,t.CRS=ut,t.Canvas=ic,t.Circle=ys,t.CircleMarker=hl,t.Class=F,t.Control=Ii,t.DivIcon=wa,t.DivOverlay=Hi,t.DomEvent=pa,t.DomUtil=xi,t.Draggable=ga,t.Evented=C,t.FeatureGroup=qs,t.GeoJSON=Gs,t.GridLayer=rc,t.Handler=lo,t.Icon=Mo,t.ImageOverlay=Yo,t.LatLng=pt,t.LatLngBounds=et,t.Layer=as,t.LayerGroup=As,t.LineUtil=dl,t.Map=Kn,t.Marker=tc,t.Mixin=Pa,t.Path=xa,t.Point=k,t.PolyUtil=cl,t.Polygon=Eo,t.Polyline=ls,t.Popup=Ua,t.PosAnimation=$s,t.Projection=Kl,t.Rectangle=Vi,t.Renderer=Si,t.SVG=bl,t.SVGOverlay=nc,t.TileLayer=Zs,t.Tooltip=Ha,t.Transformation=gt,t.Util=j,t.VideoOverlay=Ko,t.bind=r,t.bounds=H,t.canvas=Ao,t.circle=co,t.circleMarker=Hc,t.control=Ns,t.divIcon=Va,t.extend=u,t.featureGroup=Hu,t.geoJSON=Oi,t.geoJson=Fa,t.gridLayer=gl,t.icon=Ql,t.imageOverlay=ml,t.latLng=X,t.latLngBounds=it,t.layerGroup=Uc,t.map=Bc,t.marker=Jf,t.point=O,t.polygon=pl,t.polyline=Vc,t.popup=th,t.rectangle=ed,t.setOptions=x,t.stamp=l,t.svg=Jo,t.svgOverlay=td,t.tileLayer=vs,t.tooltip=np,t.transformation=zt,t.version=s,t.videoOverlay=No;var eh=window.L;t.noConflict=function(){return window.L=eh,this},window.L=t}))})(sm,sm.exports)),sm.exports}var Jv=Qv();const Ce=Jg(Jv);function tx({isOpen:m,onClose:a,onSubmit:t,moduleKey:s,moduleLabel:u,workAmount:o=0,workUnit:r="m",selectedPolygons:c=new Set}){const[l,n]=ot.useState(new Date().toISOString().split("T")[0]),[f,h]=ot.useState(""),[p,g]=ot.useState(1),[v,x]=ot.useState({x:0,y:0}),[y,w]=ot.useState(!1),S=ot.useRef({x:0,y:0}),E=I=>{if(I.preventDefault(),!l||!f||p<1){alert("Please fill all fields");return}const D={date:l,module_key:s||"",module_label:u||"",total_cable:Number(o)||0,unit:r||"m",subcontractor:f,workers:parseInt(p),selections:Array.from(c),timestamp:new Date().toISOString()};t(D),n(new Date().toISOString().split("T")[0]),h(""),g(1),x({x:0,y:0}),a()};return m?q.jsx(q.Fragment,{children:q.jsxs("div",{className:"submit-panel",style:{transform:`translate(${v.x}px, ${v.y}px)`,cursor:y?"grabbing":"default"},children:[q.jsxs("div",{className:"submit-panel-header",style:{cursor:y?"grabbing":"grab"},onMouseDown:I=>{I.target.closest("button")||(w(!0),S.current={x:I.clientX-v.x,y:I.clientY-v.y})},onTouchStart:I=>{if(I.target.closest("button"))return;const D=I.touches[0];w(!0),S.current={x:D.clientX-v.x,y:D.clientY-v.y}},children:[q.jsx("h2",{children:"Submit Daily Work"}),q.jsx("button",{className:"submit-panel-close",onClick:a,children:""})]}),y&&q.jsx("div",{style:{position:"fixed",inset:0,zIndex:99999,cursor:"grabbing"},onMouseMove:I=>{x({x:I.clientX-S.current.x,y:I.clientY-S.current.y})},onMouseUp:()=>w(!1),onTouchMove:I=>{const D=I.touches[0];x({x:D.clientX-S.current.x,y:D.clientY-S.current.y})},onTouchEnd:()=>w(!1)}),q.jsxs("form",{onSubmit:E,className:"submit-panel-form",children:[q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"Date"}),q.jsx("input",{type:"date",value:l,onChange:I=>n(I.target.value),required:!0})]}),q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"Subcontractor"}),q.jsx("input",{type:"text",value:f,onChange:I=>h(I.target.value),placeholder:"Enter subcontractor name",required:!0})]}),q.jsxs("div",{className:"form-group",children:[q.jsx("label",{children:"Workers"}),q.jsx("input",{type:"number",min:"1",value:p,onChange:I=>g(I.target.value),required:!0})]}),q.jsx("div",{className:"form-summary",children:q.jsxs("div",{className:"summary-row",children:[q.jsx("span",{children:"Amount of Work"}),q.jsxs("strong",{children:[(Number(o)||0).toFixed(0)," ",r]})]})}),q.jsxs("div",{className:"submit-panel-actions",children:[q.jsx("button",{type:"button",onClick:a,className:"btn-cancel",children:"Cancel"}),q.jsx("button",{type:"submit",className:"btn-submit",children:"Submit"})]})]})]})}):null}function ex(m="DC"){const[a,t]=ot.useState([]);return{dailyLog:a,addRecord:c=>{const l=`${c.date}_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,n={...c,id:l};t(f=>[...f,n])},updateRecord:(c,l)=>{t(n=>n.map(f=>f.id===c?{...f,...l}:f))},deleteRecord:c=>{t(l=>l.filter(n=>n.id!==c))},resetLog:()=>{window.confirm("Are you sure you want to clear all daily logs?")&&t([])}}}function _m(m){return m+.5|0}const Ff=(m,a,t)=>Math.max(Math.min(m,t),a);function om(m){return Ff(_m(m*2.55),0,255)}function $f(m){return Ff(_m(m*255),0,255)}function Ru(m){return Ff(_m(m/2.55)/100,0,1)}function Ib(m){return Ff(_m(m*100),0,100)}const sl={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ug=[..."0123456789ABCDEF"],nx=m=>Ug[m&15],rx=m=>Ug[(m&240)>>4]+Ug[m&15],d0=m=>(m&240)>>4===(m&15),ix=m=>d0(m.r)&&d0(m.g)&&d0(m.b)&&d0(m.a);function sx(m){var a=m.length,t;return m[0]==="#"&&(a===4||a===5?t={r:255&sl[m[1]]*17,g:255&sl[m[2]]*17,b:255&sl[m[3]]*17,a:a===5?sl[m[4]]*17:255}:(a===7||a===9)&&(t={r:sl[m[1]]<<4|sl[m[2]],g:sl[m[3]]<<4|sl[m[4]],b:sl[m[5]]<<4|sl[m[6]],a:a===9?sl[m[7]]<<4|sl[m[8]]:255})),t}const ox=(m,a)=>m<255?a(m):"";function ax(m){var a=ix(m)?nx:rx;return m?"#"+a(m.r)+a(m.g)+a(m.b)+ox(m.a,a):void 0}const lx=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function k1(m,a,t){const s=a*Math.min(t,1-t),u=(o,r=(o+m/30)%12)=>t-s*Math.max(Math.min(r-3,9-r,1),-1);return[u(0),u(8),u(4)]}function cx(m,a,t){const s=(u,o=(u+m/60)%6)=>t-t*a*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function ux(m,a,t){const s=k1(m,1,.5);let u;for(a+t>1&&(u=1/(a+t),a*=u,t*=u),u=0;u<3;u++)s[u]*=1-a-t,s[u]+=a;return s}function fx(m,a,t,s,u){return m===u?(a-t)/s+(a<t?6:0):a===u?(t-m)/s+2:(m-a)/s+4}function eb(m){const t=m.r/255,s=m.g/255,u=m.b/255,o=Math.max(t,s,u),r=Math.min(t,s,u),c=(o+r)/2;let l,n,f;return o!==r&&(f=o-r,n=c>.5?f/(2-o-r):f/(o+r),l=fx(t,s,u,f,o),l=l*60+.5),[l|0,n||0,c]}function nb(m,a,t,s){return(Array.isArray(a)?m(a[0],a[1],a[2]):m(a,t,s)).map($f)}function rb(m,a,t){return nb(k1,m,a,t)}function dx(m,a,t){return nb(ux,m,a,t)}function hx(m,a,t){return nb(cx,m,a,t)}function M1(m){return(m%360+360)%360}function px(m){const a=lx.exec(m);let t=255,s;if(!a)return;a[5]!==s&&(t=a[6]?om(+a[5]):$f(+a[5]));const u=M1(+a[2]),o=+a[3]/100,r=+a[4]/100;return a[1]==="hwb"?s=dx(u,o,r):a[1]==="hsv"?s=hx(u,o,r):s=rb(u,o,r),{r:s[0],g:s[1],b:s[2],a:t}}function mx(m,a){var t=eb(m);t[0]=M1(t[0]+a),t=rb(t),m.r=t[0],m.g=t[1],m.b=t[2]}function gx(m){if(!m)return;const a=eb(m),t=a[0],s=Ib(a[1]),u=Ib(a[2]);return m.a<255?`hsla(${t}, ${s}%, ${u}%, ${Ru(m.a)})`:`hsl(${t}, ${s}%, ${u}%)`}const Ob={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},jb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function bx(){const m={},a=Object.keys(jb),t=Object.keys(Ob);let s,u,o,r,c;for(s=0;s<a.length;s++){for(r=c=a[s],u=0;u<t.length;u++)o=t[u],c=c.replace(o,Ob[o]);o=parseInt(jb[r],16),m[c]=[o>>16&255,o>>8&255,o&255]}return m}let h0;function yx(m){h0||(h0=bx(),h0.transparent=[0,0,0,0]);const a=h0[m.toLowerCase()];return a&&{r:a[0],g:a[1],b:a[2],a:a.length===4?a[3]:255}}const vx=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function xx(m){const a=vx.exec(m);let t=255,s,u,o;if(a){if(a[7]!==s){const r=+a[7];t=a[8]?om(r):Ff(r*255,0,255)}return s=+a[1],u=+a[3],o=+a[5],s=255&(a[2]?om(s):Ff(s,0,255)),u=255&(a[4]?om(u):Ff(u,0,255)),o=255&(a[6]?om(o):Ff(o,0,255)),{r:s,g:u,b:o,a:t}}}function _x(m){return m&&(m.a<255?`rgba(${m.r}, ${m.g}, ${m.b}, ${Ru(m.a)})`:`rgb(${m.r}, ${m.g}, ${m.b})`)}const Sg=m=>m<=.0031308?m*12.92:Math.pow(m,1/2.4)*1.055-.055,qh=m=>m<=.04045?m/12.92:Math.pow((m+.055)/1.055,2.4);function wx(m,a,t){const s=qh(Ru(m.r)),u=qh(Ru(m.g)),o=qh(Ru(m.b));return{r:$f(Sg(s+t*(qh(Ru(a.r))-s))),g:$f(Sg(u+t*(qh(Ru(a.g))-u))),b:$f(Sg(o+t*(qh(Ru(a.b))-o))),a:m.a+t*(a.a-m.a)}}function p0(m,a,t){if(m){let s=eb(m);s[a]=Math.max(0,Math.min(s[a]+s[a]*t,a===0?360:1)),s=rb(s),m.r=s[0],m.g=s[1],m.b=s[2]}}function E1(m,a){return m&&Object.assign(a||{},m)}function Lb(m){var a={r:0,g:0,b:0,a:255};return Array.isArray(m)?m.length>=3&&(a={r:m[0],g:m[1],b:m[2],a:255},m.length>3&&(a.a=$f(m[3]))):(a=E1(m,{r:0,g:0,b:0,a:1}),a.a=$f(a.a)),a}function Sx(m){return m.charAt(0)==="r"?xx(m):px(m)}class mm{constructor(a){if(a instanceof mm)return a;const t=typeof a;let s;t==="object"?s=Lb(a):t==="string"&&(s=sx(a)||yx(a)||Sx(a)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var a=E1(this._rgb);return a&&(a.a=Ru(a.a)),a}set rgb(a){this._rgb=Lb(a)}rgbString(){return this._valid?_x(this._rgb):void 0}hexString(){return this._valid?ax(this._rgb):void 0}hslString(){return this._valid?gx(this._rgb):void 0}mix(a,t){if(a){const s=this.rgb,u=a.rgb;let o;const r=t===o?.5:t,c=2*r-1,l=s.a-u.a,n=((c*l===-1?c:(c+l)/(1+c*l))+1)/2;o=1-n,s.r=255&n*s.r+o*u.r+.5,s.g=255&n*s.g+o*u.g+.5,s.b=255&n*s.b+o*u.b+.5,s.a=r*s.a+(1-r)*u.a,this.rgb=s}return this}interpolate(a,t){return a&&(this._rgb=wx(this._rgb,a._rgb,t)),this}clone(){return new mm(this.rgb)}alpha(a){return this._rgb.a=$f(a),this}clearer(a){const t=this._rgb;return t.a*=1-a,this}greyscale(){const a=this._rgb,t=_m(a.r*.3+a.g*.59+a.b*.11);return a.r=a.g=a.b=t,this}opaquer(a){const t=this._rgb;return t.a*=1+a,this}negate(){const a=this._rgb;return a.r=255-a.r,a.g=255-a.g,a.b=255-a.b,this}lighten(a){return p0(this._rgb,2,a),this}darken(a){return p0(this._rgb,2,-a),this}saturate(a){return p0(this._rgb,1,a),this}desaturate(a){return p0(this._rgb,1,-a),this}rotate(a){return mx(this._rgb,a),this}}function Mu(){}const Tx=(()=>{let m=0;return()=>m++})();function ar(m){return m==null}function gi(m){if(Array.isArray&&Array.isArray(m))return!0;const a=Object.prototype.toString.call(m);return a.slice(0,7)==="[object"&&a.slice(-6)==="Array]"}function Sr(m){return m!==null&&Object.prototype.toString.call(m)==="[object Object]"}function Di(m){return(typeof m=="number"||m instanceof Number)&&isFinite(+m)}function ja(m,a){return Di(m)?m:a}function tr(m,a){return typeof m>"u"?a:m}const Cx=(m,a)=>typeof m=="string"&&m.endsWith("%")?parseFloat(m)/100:+m/a,N1=(m,a)=>typeof m=="string"&&m.endsWith("%")?parseFloat(m)/100*a:+m;function ii(m,a,t){if(m&&typeof m.call=="function")return m.apply(t,a)}function Zr(m,a,t,s){let u,o,r;if(gi(m))for(o=m.length,u=0;u<o;u++)a.call(t,m[u],u);else if(Sr(m))for(r=Object.keys(m),o=r.length,u=0;u<o;u++)a.call(t,m[r[u]],r[u])}function P0(m,a){let t,s,u,o;if(!m||!a||m.length!==a.length)return!1;for(t=0,s=m.length;t<s;++t)if(u=m[t],o=a[t],u.datasetIndex!==o.datasetIndex||u.index!==o.index)return!1;return!0}function D0(m){if(gi(m))return m.map(D0);if(Sr(m)){const a=Object.create(null),t=Object.keys(m),s=t.length;let u=0;for(;u<s;++u)a[t[u]]=D0(m[t[u]]);return a}return m}function A1(m){return["__proto__","prototype","constructor"].indexOf(m)===-1}function kx(m,a,t,s){if(!A1(m))return;const u=a[m],o=t[m];Sr(u)&&Sr(o)?Dc(u,o,s):a[m]=D0(o)}function Dc(m,a,t){const s=gi(a)?a:[a],u=s.length;if(!Sr(m))return m;t=t||{};const o=t.merger||kx;let r;for(let c=0;c<u;++c){if(r=s[c],!Sr(r))continue;const l=Object.keys(r);for(let n=0,f=l.length;n<f;++n)o(l[n],m,r,t)}return m}function cm(m,a){return Dc(m,a,{merger:Mx})}function Mx(m,a,t){if(!A1(m))return;const s=a[m],u=t[m];Sr(s)&&Sr(u)?cm(s,u):Object.prototype.hasOwnProperty.call(a,m)||(a[m]=D0(u))}const Pb={"":m=>m,x:m=>m.x,y:m=>m.y};function Ex(m){const a=m.split("."),t=[];let s="";for(const u of a)s+=u,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function Nx(m){const a=Ex(m);return t=>{for(const s of a){if(s==="")break;t=t&&t[s]}return t}}function Wf(m,a){return(Pb[a]||(Pb[a]=Nx(a)))(m)}function ib(m){return m.charAt(0).toUpperCase()+m.slice(1)}const gm=m=>typeof m<"u",qf=m=>typeof m=="function",Db=(m,a)=>{if(m.size!==a.size)return!1;for(const t of m)if(!a.has(t))return!1;return!0};function Ax(m){return m.type==="mouseup"||m.type==="click"||m.type==="contextmenu"}const Br=Math.PI,bi=2*Br,Rx=bi+Br,B0=Number.POSITIVE_INFINITY,Ix=Br/180,es=Br/2,Hd=Br/4,Bb=Br*2/3,Uf=Math.log10,Pc=Math.sign;function um(m,a,t){return Math.abs(m-a)<t}function zb(m){const a=Math.round(m);m=um(m,a,m/1e3)?a:m;const t=Math.pow(10,Math.floor(Uf(m))),s=m/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function Ox(m){const a=[],t=Math.sqrt(m);let s;for(s=1;s<t;s++)m%s===0&&(a.push(s),a.push(m/s));return t===(t|0)&&a.push(t),a.sort((u,o)=>u-o).pop(),a}function jx(m){return typeof m=="symbol"||typeof m=="object"&&m!==null&&!(Symbol.toPrimitive in m||"toString"in m||"valueOf"in m)}function Yh(m){return!jx(m)&&!isNaN(parseFloat(m))&&isFinite(m)}function Lx(m,a){const t=Math.round(m);return t-a<=m&&t+a>=m}function R1(m,a,t){let s,u,o;for(s=0,u=m.length;s<u;s++)o=m[s][t],isNaN(o)||(a.min=Math.min(a.min,o),a.max=Math.max(a.max,o))}function Gl(m){return m*(Br/180)}function sb(m){return m*(180/Br)}function Fb(m){if(!Di(m))return;let a=1,t=0;for(;Math.round(m*a)/a!==m;)a*=10,t++;return t}function I1(m,a){const t=a.x-m.x,s=a.y-m.y,u=Math.sqrt(t*t+s*s);let o=Math.atan2(s,t);return o<-.5*Br&&(o+=bi),{angle:o,distance:u}}function Hg(m,a){return Math.sqrt(Math.pow(a.x-m.x,2)+Math.pow(a.y-m.y,2))}function Px(m,a){return(m-a+Rx)%bi-Br}function yo(m){return(m%bi+bi)%bi}function bm(m,a,t,s){const u=yo(m),o=yo(a),r=yo(t),c=yo(o-u),l=yo(r-u),n=yo(u-o),f=yo(u-r);return u===o||u===r||s&&o===r||c>l&&n<f}function Hs(m,a,t){return Math.max(a,Math.min(t,m))}function Dx(m){return Hs(m,-32768,32767)}function Iu(m,a,t,s=1e-6){return m>=Math.min(a,t)-s&&m<=Math.max(a,t)+s}function ob(m,a,t){t=t||(r=>m[r]<a);let s=m.length-1,u=0,o;for(;s-u>1;)o=u+s>>1,t(o)?u=o:s=o;return{lo:u,hi:s}}const Ou=(m,a,t,s)=>ob(m,t,s?u=>{const o=m[u][a];return o<t||o===t&&m[u+1][a]===t}:u=>m[u][a]<t),Bx=(m,a,t)=>ob(m,t,s=>m[s][a]>=t);function zx(m,a,t){let s=0,u=m.length;for(;s<u&&m[s]<a;)s++;for(;u>s&&m[u-1]>t;)u--;return s>0||u<m.length?m.slice(s,u):m}const O1=["push","pop","shift","splice","unshift"];function Fx(m,a){if(m._chartjs){m._chartjs.listeners.push(a);return}Object.defineProperty(m,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[a]}}),O1.forEach(t=>{const s="_onData"+ib(t),u=m[t];Object.defineProperty(m,t,{configurable:!0,enumerable:!1,value(...o){const r=u.apply(this,o);return m._chartjs.listeners.forEach(c=>{typeof c[s]=="function"&&c[s](...o)}),r}})})}function Ub(m,a){const t=m._chartjs;if(!t)return;const s=t.listeners,u=s.indexOf(a);u!==-1&&s.splice(u,1),!(s.length>0)&&(O1.forEach(o=>{delete m[o]}),delete m._chartjs)}function j1(m){const a=new Set(m);return a.size===m.length?m:Array.from(a)}const L1=(function(){return typeof window>"u"?function(m){return m()}:window.requestAnimationFrame})();function P1(m,a){let t=[],s=!1;return function(...u){t=u,s||(s=!0,L1.call(window,()=>{s=!1,m.apply(a,t)}))}}function Ux(m,a){let t;return function(...s){return a?(clearTimeout(t),t=setTimeout(m,a,s)):m.apply(this,s),a}}const ab=m=>m==="start"?"left":m==="end"?"right":"center",bo=(m,a,t)=>m==="start"?a:m==="end"?t:(a+t)/2,Hx=(m,a,t,s)=>m===(s?"left":"right")?t:m==="center"?(a+t)/2:a;function D1(m,a,t){const s=a.length;let u=0,o=s;if(m._sorted){const{iScale:r,vScale:c,_parsed:l}=m,n=m.dataset&&m.dataset.options?m.dataset.options.spanGaps:null,f=r.axis,{min:h,max:p,minDefined:g,maxDefined:v}=r.getUserBounds();if(g){if(u=Math.min(Ou(l,f,h).lo,t?s:Ou(a,f,r.getPixelForValue(h)).lo),n){const x=l.slice(0,u+1).reverse().findIndex(y=>!ar(y[c.axis]));u-=Math.max(0,x)}u=Hs(u,0,s-1)}if(v){let x=Math.max(Ou(l,r.axis,p,!0).hi+1,t?0:Ou(a,f,r.getPixelForValue(p),!0).hi+1);if(n){const y=l.slice(x-1).findIndex(w=>!ar(w[c.axis]));x+=Math.max(0,y)}o=Hs(x,u,s)-u}else o=s-u}return{start:u,count:o}}function B1(m){const{xScale:a,yScale:t,_scaleRanges:s}=m,u={xmin:a.min,xmax:a.max,ymin:t.min,ymax:t.max};if(!s)return m._scaleRanges=u,!0;const o=s.xmin!==a.min||s.xmax!==a.max||s.ymin!==t.min||s.ymax!==t.max;return Object.assign(s,u),o}const m0=m=>m===0||m===1,Hb=(m,a,t)=>-(Math.pow(2,10*(m-=1))*Math.sin((m-a)*bi/t)),Vb=(m,a,t)=>Math.pow(2,-10*m)*Math.sin((m-a)*bi/t)+1,fm={linear:m=>m,easeInQuad:m=>m*m,easeOutQuad:m=>-m*(m-2),easeInOutQuad:m=>(m/=.5)<1?.5*m*m:-.5*(--m*(m-2)-1),easeInCubic:m=>m*m*m,easeOutCubic:m=>(m-=1)*m*m+1,easeInOutCubic:m=>(m/=.5)<1?.5*m*m*m:.5*((m-=2)*m*m+2),easeInQuart:m=>m*m*m*m,easeOutQuart:m=>-((m-=1)*m*m*m-1),easeInOutQuart:m=>(m/=.5)<1?.5*m*m*m*m:-.5*((m-=2)*m*m*m-2),easeInQuint:m=>m*m*m*m*m,easeOutQuint:m=>(m-=1)*m*m*m*m+1,easeInOutQuint:m=>(m/=.5)<1?.5*m*m*m*m*m:.5*((m-=2)*m*m*m*m+2),easeInSine:m=>-Math.cos(m*es)+1,easeOutSine:m=>Math.sin(m*es),easeInOutSine:m=>-.5*(Math.cos(Br*m)-1),easeInExpo:m=>m===0?0:Math.pow(2,10*(m-1)),easeOutExpo:m=>m===1?1:-Math.pow(2,-10*m)+1,easeInOutExpo:m=>m0(m)?m:m<.5?.5*Math.pow(2,10*(m*2-1)):.5*(-Math.pow(2,-10*(m*2-1))+2),easeInCirc:m=>m>=1?m:-(Math.sqrt(1-m*m)-1),easeOutCirc:m=>Math.sqrt(1-(m-=1)*m),easeInOutCirc:m=>(m/=.5)<1?-.5*(Math.sqrt(1-m*m)-1):.5*(Math.sqrt(1-(m-=2)*m)+1),easeInElastic:m=>m0(m)?m:Hb(m,.075,.3),easeOutElastic:m=>m0(m)?m:Vb(m,.075,.3),easeInOutElastic(m){return m0(m)?m:m<.5?.5*Hb(m*2,.1125,.45):.5+.5*Vb(m*2-1,.1125,.45)},easeInBack(m){return m*m*((1.70158+1)*m-1.70158)},easeOutBack(m){return(m-=1)*m*((1.70158+1)*m+1.70158)+1},easeInOutBack(m){let a=1.70158;return(m/=.5)<1?.5*(m*m*(((a*=1.525)+1)*m-a)):.5*((m-=2)*m*(((a*=1.525)+1)*m+a)+2)},easeInBounce:m=>1-fm.easeOutBounce(1-m),easeOutBounce(m){return m<1/2.75?7.5625*m*m:m<2/2.75?7.5625*(m-=1.5/2.75)*m+.75:m<2.5/2.75?7.5625*(m-=2.25/2.75)*m+.9375:7.5625*(m-=2.625/2.75)*m+.984375},easeInOutBounce:m=>m<.5?fm.easeInBounce(m*2)*.5:fm.easeOutBounce(m*2-1)*.5+.5};function lb(m){if(m&&typeof m=="object"){const a=m.toString();return a==="[object CanvasPattern]"||a==="[object CanvasGradient]"}return!1}function $b(m){return lb(m)?m:new mm(m)}function Tg(m){return lb(m)?m:new mm(m).saturate(.5).darken(.1).hexString()}const Vx=["x","y","borderWidth","radius","tension"],$x=["color","borderColor","backgroundColor"];function Wx(m){m.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),m.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:a=>a!=="onProgress"&&a!=="onComplete"&&a!=="fn"}),m.set("animations",{colors:{type:"color",properties:$x},numbers:{type:"number",properties:Vx}}),m.describe("animations",{_fallback:"animation"}),m.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:a=>a|0}}}})}function qx(m){m.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Wb=new Map;function Gx(m,a){a=a||{};const t=m+JSON.stringify(a);let s=Wb.get(t);return s||(s=new Intl.NumberFormat(m,a),Wb.set(t,s)),s}function wm(m,a,t){return Gx(a,t).format(m)}const z1={values(m){return gi(m)?m:""+m},numeric(m,a,t){if(m===0)return"0";const s=this.chart.options.locale;let u,o=m;if(t.length>1){const n=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(n<1e-4||n>1e15)&&(u="scientific"),o=Zx(m,t)}const r=Uf(Math.abs(o)),c=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:u,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(l,this.options.ticks.format),wm(m,s,l)},logarithmic(m,a,t){if(m===0)return"0";const s=t[a].significand||m/Math.pow(10,Math.floor(Uf(m)));return[1,2,3,5,10,15].includes(s)||a>.8*t.length?z1.numeric.call(this,m,a,t):""}};function Zx(m,a){let t=a.length>3?a[2].value-a[1].value:a[1].value-a[0].value;return Math.abs(t)>=1&&m!==Math.floor(m)&&(t=m-Math.floor(m)),t}var W0={formatters:z1};function Xx(m){m.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(a,t)=>t.lineWidth,tickColor:(a,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:W0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),m.route("scale.ticks","color","","color"),m.route("scale.grid","color","","borderColor"),m.route("scale.border","color","","borderColor"),m.route("scale.title","color","","color"),m.describe("scale",{_fallback:!1,_scriptable:a=>!a.startsWith("before")&&!a.startsWith("after")&&a!=="callback"&&a!=="parser",_indexable:a=>a!=="borderDash"&&a!=="tickBorderDash"&&a!=="dash"}),m.describe("scales",{_fallback:"scale"}),m.describe("scale.ticks",{_scriptable:a=>a!=="backdropPadding"&&a!=="callback",_indexable:a=>a!=="backdropPadding"})}const Yd=Object.create(null),Vg=Object.create(null);function dm(m,a){if(!a)return m;const t=a.split(".");for(let s=0,u=t.length;s<u;++s){const o=t[s];m=m[o]||(m[o]=Object.create(null))}return m}function Cg(m,a,t){return typeof a=="string"?Dc(dm(m,a),t):Dc(dm(m,""),a)}class Yx{constructor(a,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,u)=>Tg(u.backgroundColor),this.hoverBorderColor=(s,u)=>Tg(u.borderColor),this.hoverColor=(s,u)=>Tg(u.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(a),this.apply(t)}set(a,t){return Cg(this,a,t)}get(a){return dm(this,a)}describe(a,t){return Cg(Vg,a,t)}override(a,t){return Cg(Yd,a,t)}route(a,t,s,u){const o=dm(this,a),r=dm(this,s),c="_"+t;Object.defineProperties(o,{[c]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[c],n=r[u];return Sr(l)?Object.assign({},n,l):tr(l,n)},set(l){this[c]=l}}})}apply(a){a.forEach(t=>t(this))}}var yi=new Yx({_scriptable:m=>!m.startsWith("on"),_indexable:m=>m!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Wx,qx,Xx]);function Kx(m){return!m||ar(m.size)||ar(m.family)?null:(m.style?m.style+" ":"")+(m.weight?m.weight+" ":"")+m.size+"px "+m.family}function z0(m,a,t,s,u){let o=a[u];return o||(o=a[u]=m.measureText(u).width,t.push(u)),o>s&&(s=o),s}function Qx(m,a,t,s){s=s||{};let u=s.data=s.data||{},o=s.garbageCollect=s.garbageCollect||[];s.font!==a&&(u=s.data={},o=s.garbageCollect=[],s.font=a),m.save(),m.font=a;let r=0;const c=t.length;let l,n,f,h,p;for(l=0;l<c;l++)if(h=t[l],h!=null&&!gi(h))r=z0(m,u,o,r,h);else if(gi(h))for(n=0,f=h.length;n<f;n++)p=h[n],p!=null&&!gi(p)&&(r=z0(m,u,o,r,p));m.restore();const g=o.length/2;if(g>t.length){for(l=0;l<g;l++)delete u[o[l]];o.splice(0,g)}return r}function Vd(m,a,t){const s=m.currentDevicePixelRatio,u=t!==0?Math.max(t/2,.5):0;return Math.round((a-u)*s)/s+u}function qb(m,a){!a&&!m||(a=a||m.getContext("2d"),a.save(),a.resetTransform(),a.clearRect(0,0,m.width,m.height),a.restore())}function $g(m,a,t,s){F1(m,a,t,s,null)}function F1(m,a,t,s,u){let o,r,c,l,n,f,h,p;const g=a.pointStyle,v=a.rotation,x=a.radius;let y=(v||0)*Ix;if(g&&typeof g=="object"&&(o=g.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){m.save(),m.translate(t,s),m.rotate(y),m.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),m.restore();return}if(!(isNaN(x)||x<=0)){switch(m.beginPath(),g){default:u?m.ellipse(t,s,u/2,x,0,0,bi):m.arc(t,s,x,0,bi),m.closePath();break;case"triangle":f=u?u/2:x,m.moveTo(t+Math.sin(y)*f,s-Math.cos(y)*x),y+=Bb,m.lineTo(t+Math.sin(y)*f,s-Math.cos(y)*x),y+=Bb,m.lineTo(t+Math.sin(y)*f,s-Math.cos(y)*x),m.closePath();break;case"rectRounded":n=x*.516,l=x-n,r=Math.cos(y+Hd)*l,h=Math.cos(y+Hd)*(u?u/2-n:l),c=Math.sin(y+Hd)*l,p=Math.sin(y+Hd)*(u?u/2-n:l),m.arc(t-h,s-c,n,y-Br,y-es),m.arc(t+p,s-r,n,y-es,y),m.arc(t+h,s+c,n,y,y+es),m.arc(t-p,s+r,n,y+es,y+Br),m.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*x,f=u?u/2:l,m.rect(t-f,s-l,2*f,2*l);break}y+=Hd;case"rectRot":h=Math.cos(y)*(u?u/2:x),r=Math.cos(y)*x,c=Math.sin(y)*x,p=Math.sin(y)*(u?u/2:x),m.moveTo(t-h,s-c),m.lineTo(t+p,s-r),m.lineTo(t+h,s+c),m.lineTo(t-p,s+r),m.closePath();break;case"crossRot":y+=Hd;case"cross":h=Math.cos(y)*(u?u/2:x),r=Math.cos(y)*x,c=Math.sin(y)*x,p=Math.sin(y)*(u?u/2:x),m.moveTo(t-h,s-c),m.lineTo(t+h,s+c),m.moveTo(t+p,s-r),m.lineTo(t-p,s+r);break;case"star":h=Math.cos(y)*(u?u/2:x),r=Math.cos(y)*x,c=Math.sin(y)*x,p=Math.sin(y)*(u?u/2:x),m.moveTo(t-h,s-c),m.lineTo(t+h,s+c),m.moveTo(t+p,s-r),m.lineTo(t-p,s+r),y+=Hd,h=Math.cos(y)*(u?u/2:x),r=Math.cos(y)*x,c=Math.sin(y)*x,p=Math.sin(y)*(u?u/2:x),m.moveTo(t-h,s-c),m.lineTo(t+h,s+c),m.moveTo(t+p,s-r),m.lineTo(t-p,s+r);break;case"line":r=u?u/2:Math.cos(y)*x,c=Math.sin(y)*x,m.moveTo(t-r,s-c),m.lineTo(t+r,s+c);break;case"dash":m.moveTo(t,s),m.lineTo(t+Math.cos(y)*(u?u/2:x),s+Math.sin(y)*x);break;case!1:m.closePath();break}m.fill(),a.borderWidth>0&&m.stroke()}}function ju(m,a,t){return t=t||.5,!a||m&&m.x>a.left-t&&m.x<a.right+t&&m.y>a.top-t&&m.y<a.bottom+t}function q0(m,a){m.save(),m.beginPath(),m.rect(a.left,a.top,a.right-a.left,a.bottom-a.top),m.clip()}function G0(m){m.restore()}function Jx(m,a,t,s,u){if(!a)return m.lineTo(t.x,t.y);if(u==="middle"){const o=(a.x+t.x)/2;m.lineTo(o,a.y),m.lineTo(o,t.y)}else u==="after"!=!!s?m.lineTo(a.x,t.y):m.lineTo(t.x,a.y);m.lineTo(t.x,t.y)}function t2(m,a,t,s){if(!a)return m.lineTo(t.x,t.y);m.bezierCurveTo(s?a.cp1x:a.cp2x,s?a.cp1y:a.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function e2(m,a){a.translation&&m.translate(a.translation[0],a.translation[1]),ar(a.rotation)||m.rotate(a.rotation),a.color&&(m.fillStyle=a.color),a.textAlign&&(m.textAlign=a.textAlign),a.textBaseline&&(m.textBaseline=a.textBaseline)}function n2(m,a,t,s,u){if(u.strikethrough||u.underline){const o=m.measureText(s),r=a-o.actualBoundingBoxLeft,c=a+o.actualBoundingBoxRight,l=t-o.actualBoundingBoxAscent,n=t+o.actualBoundingBoxDescent,f=u.strikethrough?(l+n)/2:n;m.strokeStyle=m.fillStyle,m.beginPath(),m.lineWidth=u.decorationWidth||2,m.moveTo(r,f),m.lineTo(c,f),m.stroke()}}function r2(m,a){const t=m.fillStyle;m.fillStyle=a.color,m.fillRect(a.left,a.top,a.width,a.height),m.fillStyle=t}function Kd(m,a,t,s,u,o={}){const r=gi(a)?a:[a],c=o.strokeWidth>0&&o.strokeColor!=="";let l,n;for(m.save(),m.font=u.string,e2(m,o),l=0;l<r.length;++l)n=r[l],o.backdrop&&r2(m,o.backdrop),c&&(o.strokeColor&&(m.strokeStyle=o.strokeColor),ar(o.strokeWidth)||(m.lineWidth=o.strokeWidth),m.strokeText(n,t,s,o.maxWidth)),m.fillText(n,t,s,o.maxWidth),n2(m,t,s,n,o),s+=Number(u.lineHeight);m.restore()}function ym(m,a){const{x:t,y:s,w:u,h:o,radius:r}=a;m.arc(t+r.topLeft,s+r.topLeft,r.topLeft,1.5*Br,Br,!0),m.lineTo(t,s+o-r.bottomLeft),m.arc(t+r.bottomLeft,s+o-r.bottomLeft,r.bottomLeft,Br,es,!0),m.lineTo(t+u-r.bottomRight,s+o),m.arc(t+u-r.bottomRight,s+o-r.bottomRight,r.bottomRight,es,0,!0),m.lineTo(t+u,s+r.topRight),m.arc(t+u-r.topRight,s+r.topRight,r.topRight,0,-es,!0),m.lineTo(t+r.topLeft,s)}const i2=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,s2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function o2(m,a){const t=(""+m).match(i2);if(!t||t[1]==="normal")return a*1.2;switch(m=+t[2],t[3]){case"px":return m;case"%":m/=100;break}return a*m}const a2=m=>+m||0;function cb(m,a){const t={},s=Sr(a),u=s?Object.keys(a):a,o=Sr(m)?s?r=>tr(m[r],m[a[r]]):r=>m[r]:()=>m;for(const r of u)t[r]=a2(o(r));return t}function U1(m){return cb(m,{top:"y",right:"x",bottom:"y",left:"x"})}function Zd(m){return cb(m,["topLeft","topRight","bottomLeft","bottomRight"])}function so(m){const a=U1(m);return a.width=a.left+a.right,a.height=a.top+a.bottom,a}function hs(m,a){m=m||{},a=a||yi.font;let t=tr(m.size,a.size);typeof t=="string"&&(t=parseInt(t,10));let s=tr(m.style,a.style);s&&!(""+s).match(s2)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const u={family:tr(m.family,a.family),lineHeight:o2(tr(m.lineHeight,a.lineHeight),t),size:t,style:s,weight:tr(m.weight,a.weight),string:""};return u.string=Kx(u),u}function mi(m,a,t,s){let u,o,r;for(u=0,o=m.length;u<o;++u)if(r=m[u],r!==void 0&&(a!==void 0&&typeof r=="function"&&(r=r(a)),t!==void 0&&gi(r)&&(r=r[t%r.length]),r!==void 0))return r}function l2(m,a,t){const{min:s,max:u}=m,o=N1(a,(u-s)/2),r=(c,l)=>t&&c===0?0:c+l;return{min:r(s,-Math.abs(o)),max:r(u,o)}}function Zf(m,a){return Object.assign(Object.create(m),a)}function ub(m,a=[""],t,s,u=()=>m[0]){const o=t||m;typeof s>"u"&&(s=W1("_fallback",m));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:m,_rootScopes:o,_fallback:s,_getTarget:u,override:c=>ub([c,...m],a,o,s)};return new Proxy(r,{deleteProperty(c,l){return delete c[l],delete c._keys,delete m[0][l],!0},get(c,l){return V1(c,l,()=>g2(l,a,m,c))},getOwnPropertyDescriptor(c,l){return Reflect.getOwnPropertyDescriptor(c._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(m[0])},has(c,l){return Zb(c).includes(l)},ownKeys(c){return Zb(c)},set(c,l,n){const f=c._storage||(c._storage=u());return c[l]=f[l]=n,delete c._keys,!0}})}function Kh(m,a,t,s){const u={_cacheable:!1,_proxy:m,_context:a,_subProxy:t,_stack:new Set,_descriptors:H1(m,s),setContext:o=>Kh(m,o,t,s),override:o=>Kh(m.override(o),a,t,s)};return new Proxy(u,{deleteProperty(o,r){return delete o[r],delete m[r],!0},get(o,r,c){return V1(o,r,()=>u2(o,r,c))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(m,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(m,r)},getPrototypeOf(){return Reflect.getPrototypeOf(m)},has(o,r){return Reflect.has(m,r)},ownKeys(){return Reflect.ownKeys(m)},set(o,r,c){return m[r]=c,delete o[r],!0}})}function H1(m,a={scriptable:!0,indexable:!0}){const{_scriptable:t=a.scriptable,_indexable:s=a.indexable,_allKeys:u=a.allKeys}=m;return{allKeys:u,scriptable:t,indexable:s,isScriptable:qf(t)?t:()=>t,isIndexable:qf(s)?s:()=>s}}const c2=(m,a)=>m?m+ib(a):a,fb=(m,a)=>Sr(a)&&m!=="adapters"&&(Object.getPrototypeOf(a)===null||a.constructor===Object);function V1(m,a,t){if(Object.prototype.hasOwnProperty.call(m,a)||a==="constructor")return m[a];const s=t();return m[a]=s,s}function u2(m,a,t){const{_proxy:s,_context:u,_subProxy:o,_descriptors:r}=m;let c=s[a];return qf(c)&&r.isScriptable(a)&&(c=f2(a,c,m,t)),gi(c)&&c.length&&(c=d2(a,c,m,r.isIndexable)),fb(a,c)&&(c=Kh(c,u,o&&o[a],r)),c}function f2(m,a,t,s){const{_proxy:u,_context:o,_subProxy:r,_stack:c}=t;if(c.has(m))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+m);c.add(m);let l=a(o,r||s);return c.delete(m),fb(m,l)&&(l=db(u._scopes,u,m,l)),l}function d2(m,a,t,s){const{_proxy:u,_context:o,_subProxy:r,_descriptors:c}=t;if(typeof o.index<"u"&&s(m))return a[o.index%a.length];if(Sr(a[0])){const l=a,n=u._scopes.filter(f=>f!==l);a=[];for(const f of l){const h=db(n,u,m,f);a.push(Kh(h,o,r&&r[m],c))}}return a}function $1(m,a,t){return qf(m)?m(a,t):m}const h2=(m,a)=>m===!0?a:typeof m=="string"?Wf(a,m):void 0;function p2(m,a,t,s,u){for(const o of a){const r=h2(t,o);if(r){m.add(r);const c=$1(r._fallback,t,u);if(typeof c<"u"&&c!==t&&c!==s)return c}else if(r===!1&&typeof s<"u"&&t!==s)return null}return!1}function db(m,a,t,s){const u=a._rootScopes,o=$1(a._fallback,t,s),r=[...m,...u],c=new Set;c.add(s);let l=Gb(c,r,t,o||t,s);return l===null||typeof o<"u"&&o!==t&&(l=Gb(c,r,o,l,s),l===null)?!1:ub(Array.from(c),[""],u,o,()=>m2(a,t,s))}function Gb(m,a,t,s,u){for(;t;)t=p2(m,a,t,s,u);return t}function m2(m,a,t){const s=m._getTarget();a in s||(s[a]={});const u=s[a];return gi(u)&&Sr(t)?t:u||{}}function g2(m,a,t,s){let u;for(const o of a)if(u=W1(c2(o,m),t),typeof u<"u")return fb(m,u)?db(t,s,m,u):u}function W1(m,a){for(const t of a){if(!t)continue;const s=t[m];if(typeof s<"u")return s}}function Zb(m){let a=m._keys;return a||(a=m._keys=b2(m._scopes)),a}function b2(m){const a=new Set;for(const t of m)for(const s of Object.keys(t).filter(u=>!u.startsWith("_")))a.add(s);return Array.from(a)}function q1(m,a,t,s){const{iScale:u}=m,{key:o="r"}=this._parsing,r=new Array(s);let c,l,n,f;for(c=0,l=s;c<l;++c)n=c+t,f=a[n],r[c]={r:u.parse(Wf(f,o),n)};return r}const y2=Number.EPSILON||1e-14,Qh=(m,a)=>a<m.length&&!m[a].skip&&m[a],G1=m=>m==="x"?"y":"x";function v2(m,a,t,s){const u=m.skip?a:m,o=a,r=t.skip?a:t,c=Hg(o,u),l=Hg(r,o);let n=c/(c+l),f=l/(c+l);n=isNaN(n)?0:n,f=isNaN(f)?0:f;const h=s*n,p=s*f;return{previous:{x:o.x-h*(r.x-u.x),y:o.y-h*(r.y-u.y)},next:{x:o.x+p*(r.x-u.x),y:o.y+p*(r.y-u.y)}}}function x2(m,a,t){const s=m.length;let u,o,r,c,l,n=Qh(m,0);for(let f=0;f<s-1;++f)if(l=n,n=Qh(m,f+1),!(!l||!n)){if(um(a[f],0,y2)){t[f]=t[f+1]=0;continue}u=t[f]/a[f],o=t[f+1]/a[f],c=Math.pow(u,2)+Math.pow(o,2),!(c<=9)&&(r=3/Math.sqrt(c),t[f]=u*r*a[f],t[f+1]=o*r*a[f])}}function _2(m,a,t="x"){const s=G1(t),u=m.length;let o,r,c,l=Qh(m,0);for(let n=0;n<u;++n){if(r=c,c=l,l=Qh(m,n+1),!c)continue;const f=c[t],h=c[s];r&&(o=(f-r[t])/3,c[`cp1${t}`]=f-o,c[`cp1${s}`]=h-o*a[n]),l&&(o=(l[t]-f)/3,c[`cp2${t}`]=f+o,c[`cp2${s}`]=h+o*a[n])}}function w2(m,a="x"){const t=G1(a),s=m.length,u=Array(s).fill(0),o=Array(s);let r,c,l,n=Qh(m,0);for(r=0;r<s;++r)if(c=l,l=n,n=Qh(m,r+1),!!l){if(n){const f=n[a]-l[a];u[r]=f!==0?(n[t]-l[t])/f:0}o[r]=c?n?Pc(u[r-1])!==Pc(u[r])?0:(u[r-1]+u[r])/2:u[r-1]:u[r]}x2(m,u,o),_2(m,o,a)}function g0(m,a,t){return Math.max(Math.min(m,t),a)}function S2(m,a){let t,s,u,o,r,c=ju(m[0],a);for(t=0,s=m.length;t<s;++t)r=o,o=c,c=t<s-1&&ju(m[t+1],a),o&&(u=m[t],r&&(u.cp1x=g0(u.cp1x,a.left,a.right),u.cp1y=g0(u.cp1y,a.top,a.bottom)),c&&(u.cp2x=g0(u.cp2x,a.left,a.right),u.cp2y=g0(u.cp2y,a.top,a.bottom)))}function T2(m,a,t,s,u){let o,r,c,l;if(a.spanGaps&&(m=m.filter(n=>!n.skip)),a.cubicInterpolationMode==="monotone")w2(m,u);else{let n=s?m[m.length-1]:m[0];for(o=0,r=m.length;o<r;++o)c=m[o],l=v2(n,c,m[Math.min(o+1,r-(s?0:1))%r],a.tension),c.cp1x=l.previous.x,c.cp1y=l.previous.y,c.cp2x=l.next.x,c.cp2y=l.next.y,n=c}a.capBezierPoints&&S2(m,t)}function hb(){return typeof window<"u"&&typeof document<"u"}function pb(m){let a=m.parentNode;return a&&a.toString()==="[object ShadowRoot]"&&(a=a.host),a}function F0(m,a,t){let s;return typeof m=="string"?(s=parseInt(m,10),m.indexOf("%")!==-1&&(s=s/100*a.parentNode[t])):s=m,s}const Z0=m=>m.ownerDocument.defaultView.getComputedStyle(m,null);function C2(m,a){return Z0(m).getPropertyValue(a)}const k2=["top","right","bottom","left"];function Xd(m,a,t){const s={};t=t?"-"+t:"";for(let u=0;u<4;u++){const o=k2[u];s[o]=parseFloat(m[a+"-"+o+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const M2=(m,a,t)=>(m>0||a>0)&&(!t||!t.shadowRoot);function E2(m,a){const t=m.touches,s=t&&t.length?t[0]:m,{offsetX:u,offsetY:o}=s;let r=!1,c,l;if(M2(u,o,m.target))c=u,l=o;else{const n=a.getBoundingClientRect();c=s.clientX-n.left,l=s.clientY-n.top,r=!0}return{x:c,y:l,box:r}}function qd(m,a){if("native"in m)return m;const{canvas:t,currentDevicePixelRatio:s}=a,u=Z0(t),o=u.boxSizing==="border-box",r=Xd(u,"padding"),c=Xd(u,"border","width"),{x:l,y:n,box:f}=E2(m,t),h=r.left+(f&&c.left),p=r.top+(f&&c.top);let{width:g,height:v}=a;return o&&(g-=r.width+c.width,v-=r.height+c.height),{x:Math.round((l-h)/g*t.width/s),y:Math.round((n-p)/v*t.height/s)}}function N2(m,a,t){let s,u;if(a===void 0||t===void 0){const o=m&&pb(m);if(!o)a=m.clientWidth,t=m.clientHeight;else{const r=o.getBoundingClientRect(),c=Z0(o),l=Xd(c,"border","width"),n=Xd(c,"padding");a=r.width-n.width-l.width,t=r.height-n.height-l.height,s=F0(c.maxWidth,o,"clientWidth"),u=F0(c.maxHeight,o,"clientHeight")}}return{width:a,height:t,maxWidth:s||B0,maxHeight:u||B0}}const Hf=m=>Math.round(m*10)/10;function A2(m,a,t,s){const u=Z0(m),o=Xd(u,"margin"),r=F0(u.maxWidth,m,"clientWidth")||B0,c=F0(u.maxHeight,m,"clientHeight")||B0,l=N2(m,a,t);let{width:n,height:f}=l;if(u.boxSizing==="content-box"){const p=Xd(u,"border","width"),g=Xd(u,"padding");n-=g.width+p.width,f-=g.height+p.height}return n=Math.max(0,n-o.width),f=Math.max(0,s?n/s:f-o.height),n=Hf(Math.min(n,r,l.maxWidth)),f=Hf(Math.min(f,c,l.maxHeight)),n&&!f&&(f=Hf(n/2)),(a!==void 0||t!==void 0)&&s&&l.height&&f>l.height&&(f=l.height,n=Hf(Math.floor(f*s))),{width:n,height:f}}function Xb(m,a,t){const s=a||1,u=Hf(m.height*s),o=Hf(m.width*s);m.height=Hf(m.height),m.width=Hf(m.width);const r=m.canvas;return r.style&&(t||!r.style.height&&!r.style.width)&&(r.style.height=`${m.height}px`,r.style.width=`${m.width}px`),m.currentDevicePixelRatio!==s||r.height!==u||r.width!==o?(m.currentDevicePixelRatio=s,r.height=u,r.width=o,m.ctx.setTransform(s,0,0,s,0,0),!0):!1}const R2=(function(){let m=!1;try{const a={get passive(){return m=!0,!1}};hb()&&(window.addEventListener("test",null,a),window.removeEventListener("test",null,a))}catch{}return m})();function Yb(m,a){const t=C2(m,a),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Gd(m,a,t,s){return{x:m.x+t*(a.x-m.x),y:m.y+t*(a.y-m.y)}}function I2(m,a,t,s){return{x:m.x+t*(a.x-m.x),y:s==="middle"?t<.5?m.y:a.y:s==="after"?t<1?m.y:a.y:t>0?a.y:m.y}}function O2(m,a,t,s){const u={x:m.cp2x,y:m.cp2y},o={x:a.cp1x,y:a.cp1y},r=Gd(m,u,t),c=Gd(u,o,t),l=Gd(o,a,t),n=Gd(r,c,t),f=Gd(c,l,t);return Gd(n,f,t)}const j2=function(m,a){return{x(t){return m+m+a-t},setWidth(t){a=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,s){return t-s},leftForLtr(t,s){return t-s}}},L2=function(){return{x(m){return m},setWidth(m){},textAlign(m){return m},xPlus(m,a){return m+a},leftForLtr(m,a){return m}}};function Xh(m,a,t){return m?j2(a,t):L2()}function Z1(m,a){let t,s;(a==="ltr"||a==="rtl")&&(t=m.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",a,"important"),m.prevTextDirection=s)}function X1(m,a){a!==void 0&&(delete m.prevTextDirection,m.canvas.style.setProperty("direction",a[0],a[1]))}function Y1(m){return m==="angle"?{between:bm,compare:Px,normalize:yo}:{between:Iu,compare:(a,t)=>a-t,normalize:a=>a}}function Kb({start:m,end:a,count:t,loop:s,style:u}){return{start:m%t,end:a%t,loop:s&&(a-m+1)%t===0,style:u}}function P2(m,a,t){const{property:s,start:u,end:o}=t,{between:r,normalize:c}=Y1(s),l=a.length;let{start:n,end:f,loop:h}=m,p,g;if(h){for(n+=l,f+=l,p=0,g=l;p<g&&r(c(a[n%l][s]),u,o);++p)n--,f--;n%=l,f%=l}return f<n&&(f+=l),{start:n,end:f,loop:h,style:m.style}}function K1(m,a,t){if(!t)return[m];const{property:s,start:u,end:o}=t,r=a.length,{compare:c,between:l,normalize:n}=Y1(s),{start:f,end:h,loop:p,style:g}=P2(m,a,t),v=[];let x=!1,y=null,w,S,E;const I=()=>l(u,E,w)&&c(u,E)!==0,D=()=>c(o,w)===0||l(o,E,w),Z=()=>x||I(),K=()=>!x||D();for(let z=f,W=f;z<=h;++z)S=a[z%r],!S.skip&&(w=n(S[s]),w!==E&&(x=l(w,u,o),y===null&&Z()&&(y=c(w,u)===0?z:W),y!==null&&K()&&(v.push(Kb({start:y,end:z,loop:p,count:r,style:g})),y=null),W=z,E=w));return y!==null&&v.push(Kb({start:y,end:h,loop:p,count:r,style:g})),v}function Q1(m,a){const t=[],s=m.segments;for(let u=0;u<s.length;u++){const o=K1(s[u],m.points,a);o.length&&t.push(...o)}return t}function D2(m,a,t,s){let u=0,o=a-1;if(t&&!s)for(;u<a&&!m[u].skip;)u++;for(;u<a&&m[u].skip;)u++;for(u%=a,t&&(o+=u);o>u&&m[o%a].skip;)o--;return o%=a,{start:u,end:o}}function B2(m,a,t,s){const u=m.length,o=[];let r=a,c=m[a],l;for(l=a+1;l<=t;++l){const n=m[l%u];n.skip||n.stop?c.skip||(s=!1,o.push({start:a%u,end:(l-1)%u,loop:s}),a=r=n.stop?l:null):(r=l,c.skip&&(a=l)),c=n}return r!==null&&o.push({start:a%u,end:r%u,loop:s}),o}function z2(m,a){const t=m.points,s=m.options.spanGaps,u=t.length;if(!u)return[];const o=!!m._loop,{start:r,end:c}=D2(t,u,o,s);if(s===!0)return Qb(m,[{start:r,end:c,loop:o}],t,a);const l=c<r?c+u:c,n=!!m._fullLoop&&r===0&&c===u-1;return Qb(m,B2(t,r,l,n),t,a)}function Qb(m,a,t,s){return!s||!s.setContext||!t?a:F2(m,a,t,s)}function F2(m,a,t,s){const u=m._chart.getContext(),o=Jb(m.options),{_datasetIndex:r,options:{spanGaps:c}}=m,l=t.length,n=[];let f=o,h=a[0].start,p=h;function g(v,x,y,w){const S=c?-1:1;if(v!==x){for(v+=l;t[v%l].skip;)v-=S;for(;t[x%l].skip;)x+=S;v%l!==x%l&&(n.push({start:v%l,end:x%l,loop:y,style:w}),f=w,h=x%l)}}for(const v of a){h=c?h:v.start;let x=t[h%l],y;for(p=h+1;p<=v.end;p++){const w=t[p%l];y=Jb(s.setContext(Zf(u,{type:"segment",p0:x,p1:w,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:r}))),U2(y,f)&&g(h,p-1,v.loop,f),x=w,f=y}h<p-1&&g(h,p-1,v.loop,f)}return n}function Jb(m){return{backgroundColor:m.backgroundColor,borderCapStyle:m.borderCapStyle,borderDash:m.borderDash,borderDashOffset:m.borderDashOffset,borderJoinStyle:m.borderJoinStyle,borderWidth:m.borderWidth,borderColor:m.borderColor}}function U2(m,a){if(!a)return!1;const t=[],s=function(u,o){return lb(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(m,s)!==JSON.stringify(a,s)}function b0(m,a,t){return m.options.clip?m[t]:a[t]}function H2(m,a){const{xScale:t,yScale:s}=m;return t&&s?{left:b0(t,a,"left"),right:b0(t,a,"right"),top:b0(s,a,"top"),bottom:b0(s,a,"bottom")}:a}function J1(m,a){const t=a._clip;if(t.disabled)return!1;const s=H2(a,m.chartArea);return{left:t.left===!1?0:s.left-(t.left===!0?0:t.left),right:t.right===!1?m.width:s.right+(t.right===!0?0:t.right),top:t.top===!1?0:s.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?m.height:s.bottom+(t.bottom===!0?0:t.bottom)}}class V2{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(a,t,s,u){const o=t.listeners[u],r=t.duration;o.forEach(c=>c({chart:a,initial:t.initial,numSteps:r,currentStep:Math.min(s-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=L1.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(a=Date.now()){let t=0;this._charts.forEach((s,u)=>{if(!s.running||!s.items.length)return;const o=s.items;let r=o.length-1,c=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(a),c=!0):(o[r]=o[o.length-1],o.pop());c&&(u.draw(),this._notify(u,s,a,"progress")),o.length||(s.running=!1,this._notify(u,s,a,"complete"),s.initial=!1),t+=o.length}),this._lastDate=a,t===0&&(this._running=!1)}_getAnims(a){const t=this._charts;let s=t.get(a);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(a,s)),s}listen(a,t,s){this._getAnims(a).listeners[t].push(s)}add(a,t){!t||!t.length||this._getAnims(a).items.push(...t)}has(a){return this._getAnims(a).items.length>0}start(a){const t=this._charts.get(a);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,u)=>Math.max(s,u._duration),0),this._refresh())}running(a){if(!this._running)return!1;const t=this._charts.get(a);return!(!t||!t.running||!t.items.length)}stop(a){const t=this._charts.get(a);if(!t||!t.items.length)return;const s=t.items;let u=s.length-1;for(;u>=0;--u)s[u].cancel();t.items=[],this._notify(a,t,Date.now(),"complete")}remove(a){return this._charts.delete(a)}}var Nu=new V2;const ty="transparent",$2={boolean(m,a,t){return t>.5?a:m},color(m,a,t){const s=$b(m||ty),u=s.valid&&$b(a||ty);return u&&u.valid?u.mix(s,t).hexString():a},number(m,a,t){return m+(a-m)*t}};class W2{constructor(a,t,s,u){const o=t[s];u=mi([a.to,u,o,a.from]);const r=mi([a.from,o,u]);this._active=!0,this._fn=a.fn||$2[a.type||typeof r],this._easing=fm[a.easing]||fm.linear,this._start=Math.floor(Date.now()+(a.delay||0)),this._duration=this._total=Math.floor(a.duration),this._loop=!!a.loop,this._target=t,this._prop=s,this._from=r,this._to=u,this._promises=void 0}active(){return this._active}update(a,t,s){if(this._active){this._notify(!1);const u=this._target[this._prop],o=s-this._start,r=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(r,a.duration)),this._total+=o,this._loop=!!a.loop,this._to=mi([a.to,t,u,a.from]),this._from=mi([a.from,u,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(a){const t=a-this._start,s=this._duration,u=this._prop,o=this._from,r=this._loop,c=this._to;let l;if(this._active=o!==c&&(r||t<s),!this._active){this._target[u]=c,this._notify(!0);return}if(t<0){this._target[u]=o;return}l=t/s%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[u]=this._fn(o,c,l)}wait(){const a=this._promises||(this._promises=[]);return new Promise((t,s)=>{a.push({res:t,rej:s})})}_notify(a){const t=a?"res":"rej",s=this._promises||[];for(let u=0;u<s.length;u++)s[u][t]()}}class tv{constructor(a,t){this._chart=a,this._properties=new Map,this.configure(t)}configure(a){if(!Sr(a))return;const t=Object.keys(yi.animation),s=this._properties;Object.getOwnPropertyNames(a).forEach(u=>{const o=a[u];if(!Sr(o))return;const r={};for(const c of t)r[c]=o[c];(gi(o.properties)&&o.properties||[u]).forEach(c=>{(c===u||!s.has(c))&&s.set(c,r)})})}_animateOptions(a,t){const s=t.options,u=G2(a,s);if(!u)return[];const o=this._createAnimations(u,s);return s.$shared&&q2(a.options.$animations,s).then(()=>{a.options=s},()=>{}),o}_createAnimations(a,t){const s=this._properties,u=[],o=a.$animations||(a.$animations={}),r=Object.keys(t),c=Date.now();let l;for(l=r.length-1;l>=0;--l){const n=r[l];if(n.charAt(0)==="$")continue;if(n==="options"){u.push(...this._animateOptions(a,t));continue}const f=t[n];let h=o[n];const p=s.get(n);if(h)if(p&&h.active()){h.update(p,f,c);continue}else h.cancel();if(!p||!p.duration){a[n]=f;continue}o[n]=h=new W2(p,a,n,f),u.push(h)}return u}update(a,t){if(this._properties.size===0){Object.assign(a,t);return}const s=this._createAnimations(a,t);if(s.length)return Nu.add(this._chart,s),!0}}function q2(m,a){const t=[],s=Object.keys(a);for(let u=0;u<s.length;u++){const o=m[s[u]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function G2(m,a){if(!a)return;let t=m.options;if(!t){m.options=a;return}return t.$shared&&(m.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function ey(m,a){const t=m&&m.options||{},s=t.reverse,u=t.min===void 0?a:0,o=t.max===void 0?a:0;return{start:s?o:u,end:s?u:o}}function Z2(m,a,t){if(t===!1)return!1;const s=ey(m,t),u=ey(a,t);return{top:u.end,right:s.end,bottom:u.start,left:s.start}}function X2(m){let a,t,s,u;return Sr(m)?(a=m.top,t=m.right,s=m.bottom,u=m.left):a=t=s=u=m,{top:a,right:t,bottom:s,left:u,disabled:m===!1}}function ev(m,a){const t=[],s=m._getSortedDatasetMetas(a);let u,o;for(u=0,o=s.length;u<o;++u)t.push(s[u].index);return t}function ny(m,a,t,s={}){const u=m.keys,o=s.mode==="single";let r,c,l,n;if(a===null)return;let f=!1;for(r=0,c=u.length;r<c;++r){if(l=+u[r],l===t){if(f=!0,s.all)continue;break}n=m.values[l],Di(n)&&(o||a===0||Pc(a)===Pc(n))&&(a+=n)}return!f&&!s.all?0:a}function Y2(m,a){const{iScale:t,vScale:s}=a,u=t.axis==="x"?"x":"y",o=s.axis==="x"?"x":"y",r=Object.keys(m),c=new Array(r.length);let l,n,f;for(l=0,n=r.length;l<n;++l)f=r[l],c[l]={[u]:f,[o]:m[f]};return c}function kg(m,a){const t=m&&m.options.stacked;return t||t===void 0&&a.stack!==void 0}function K2(m,a,t){return`${m.id}.${a.id}.${t.stack||t.type}`}function Q2(m){const{min:a,max:t,minDefined:s,maxDefined:u}=m.getUserBounds();return{min:s?a:Number.NEGATIVE_INFINITY,max:u?t:Number.POSITIVE_INFINITY}}function J2(m,a,t){const s=m[a]||(m[a]={});return s[t]||(s[t]={})}function ry(m,a,t,s){for(const u of a.getMatchingVisibleMetas(s).reverse()){const o=m[u.index];if(t&&o>0||!t&&o<0)return u.index}return null}function iy(m,a){const{chart:t,_cachedMeta:s}=m,u=t._stacks||(t._stacks={}),{iScale:o,vScale:r,index:c}=s,l=o.axis,n=r.axis,f=K2(o,r,s),h=a.length;let p;for(let g=0;g<h;++g){const v=a[g],{[l]:x,[n]:y}=v,w=v._stacks||(v._stacks={});p=w[n]=J2(u,f,x),p[c]=y,p._top=ry(p,r,!0,s.type),p._bottom=ry(p,r,!1,s.type);const S=p._visualValues||(p._visualValues={});S[c]=y}}function Mg(m,a){const t=m.scales;return Object.keys(t).filter(s=>t[s].axis===a).shift()}function t_(m,a){return Zf(m,{active:!1,dataset:void 0,datasetIndex:a,index:a,mode:"default",type:"dataset"})}function e_(m,a,t){return Zf(m,{active:!1,dataIndex:a,parsed:void 0,raw:void 0,element:t,index:a,mode:"default",type:"data"})}function Kp(m,a){const t=m.controller.index,s=m.vScale&&m.vScale.axis;if(s){a=a||m._parsed;for(const u of a){const o=u._stacks;if(!o||o[s]===void 0||o[s][t]===void 0)return;delete o[s][t],o[s]._visualValues!==void 0&&o[s]._visualValues[t]!==void 0&&delete o[s]._visualValues[t]}}}const Eg=m=>m==="reset"||m==="none",sy=(m,a)=>a?m:Object.assign({},m),n_=(m,a,t)=>m&&!a.hidden&&a._stacked&&{keys:ev(t,!0),values:null};class Xf{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(a,t){this.chart=a,this._ctx=a.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const a=this._cachedMeta;this.configure(),this.linkScales(),a._stacked=kg(a.vScale,a),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(a){this.index!==a&&Kp(this._cachedMeta),this.index=a}linkScales(){const a=this.chart,t=this._cachedMeta,s=this.getDataset(),u=(h,p,g,v)=>h==="x"?p:h==="r"?v:g,o=t.xAxisID=tr(s.xAxisID,Mg(a,"x")),r=t.yAxisID=tr(s.yAxisID,Mg(a,"y")),c=t.rAxisID=tr(s.rAxisID,Mg(a,"r")),l=t.indexAxis,n=t.iAxisID=u(l,o,r,c),f=t.vAxisID=u(l,r,o,c);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(c),t.iScale=this.getScaleForId(n),t.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(a){return this.chart.scales[a]}_getOtherScale(a){const t=this._cachedMeta;return a===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const a=this._cachedMeta;this._data&&Ub(this._data,this),a._stacked&&Kp(a)}_dataCheck(){const a=this.getDataset(),t=a.data||(a.data=[]),s=this._data;if(Sr(t)){const u=this._cachedMeta;this._data=Y2(t,u)}else if(s!==t){if(s){Ub(s,this);const u=this._cachedMeta;Kp(u),u._parsed=[]}t&&Object.isExtensible(t)&&Fx(t,this),this._syncList=[],this._data=t}}addElements(){const a=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(a.dataset=new this.datasetElementType)}buildOrUpdateElements(a){const t=this._cachedMeta,s=this.getDataset();let u=!1;this._dataCheck();const o=t._stacked;t._stacked=kg(t.vScale,t),t.stack!==s.stack&&(u=!0,Kp(t),t.stack=s.stack),this._resyncElements(a),(u||o!==t._stacked)&&(iy(this,t._parsed),t._stacked=kg(t.vScale,t))}configure(){const a=this.chart.config,t=a.datasetScopeKeys(this._type),s=a.getOptionScopes(this.getDataset(),t,!0);this.options=a.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(a,t){const{_cachedMeta:s,_data:u}=this,{iScale:o,_stacked:r}=s,c=o.axis;let l=a===0&&t===u.length?!0:s._sorted,n=a>0&&s._parsed[a-1],f,h,p;if(this._parsing===!1)s._parsed=u,s._sorted=!0,p=u;else{gi(u[a])?p=this.parseArrayData(s,u,a,t):Sr(u[a])?p=this.parseObjectData(s,u,a,t):p=this.parsePrimitiveData(s,u,a,t);const g=()=>h[c]===null||n&&h[c]<n[c];for(f=0;f<t;++f)s._parsed[f+a]=h=p[f],l&&(g()&&(l=!1),n=h);s._sorted=l}r&&iy(this,p)}parsePrimitiveData(a,t,s,u){const{iScale:o,vScale:r}=a,c=o.axis,l=r.axis,n=o.getLabels(),f=o===r,h=new Array(u);let p,g,v;for(p=0,g=u;p<g;++p)v=p+s,h[p]={[c]:f||o.parse(n[v],v),[l]:r.parse(t[v],v)};return h}parseArrayData(a,t,s,u){const{xScale:o,yScale:r}=a,c=new Array(u);let l,n,f,h;for(l=0,n=u;l<n;++l)f=l+s,h=t[f],c[l]={x:o.parse(h[0],f),y:r.parse(h[1],f)};return c}parseObjectData(a,t,s,u){const{xScale:o,yScale:r}=a,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,n=new Array(u);let f,h,p,g;for(f=0,h=u;f<h;++f)p=f+s,g=t[p],n[f]={x:o.parse(Wf(g,c),p),y:r.parse(Wf(g,l),p)};return n}getParsed(a){return this._cachedMeta._parsed[a]}getDataElement(a){return this._cachedMeta.data[a]}applyStack(a,t,s){const u=this.chart,o=this._cachedMeta,r=t[a.axis],c={keys:ev(u,!0),values:t._stacks[a.axis]._visualValues};return ny(c,r,o.index,{mode:s})}updateRangeFromParsed(a,t,s,u){const o=s[t.axis];let r=o===null?NaN:o;const c=u&&s._stacks[t.axis];u&&c&&(u.values=c,r=ny(u,o,this._cachedMeta.index)),a.min=Math.min(a.min,r),a.max=Math.max(a.max,r)}getMinMax(a,t){const s=this._cachedMeta,u=s._parsed,o=s._sorted&&a===s.iScale,r=u.length,c=this._getOtherScale(a),l=n_(t,s,this.chart),n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:h}=Q2(c);let p,g;function v(){g=u[p];const x=g[c.axis];return!Di(g[a.axis])||f>x||h<x}for(p=0;p<r&&!(!v()&&(this.updateRangeFromParsed(n,a,g,l),o));++p);if(o){for(p=r-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(n,a,g,l);break}}return n}getAllParsedValues(a){const t=this._cachedMeta._parsed,s=[];let u,o,r;for(u=0,o=t.length;u<o;++u)r=t[u][a.axis],Di(r)&&s.push(r);return s}getMaxOverflow(){return!1}getLabelAndValue(a){const t=this._cachedMeta,s=t.iScale,u=t.vScale,o=this.getParsed(a);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:u?""+u.getLabelForValue(o[u.axis]):""}}_update(a){const t=this._cachedMeta;this.update(a||"default"),t._clip=X2(tr(this.options.clip,Z2(t.xScale,t.yScale,this.getMaxOverflow())))}update(a){}draw(){const a=this._ctx,t=this.chart,s=this._cachedMeta,u=s.data||[],o=t.chartArea,r=[],c=this._drawStart||0,l=this._drawCount||u.length-c,n=this.options.drawActiveElementsOnTop;let f;for(s.dataset&&s.dataset.draw(a,o,c,l),f=c;f<c+l;++f){const h=u[f];h.hidden||(h.active&&n?r.push(h):h.draw(a,o))}for(f=0;f<r.length;++f)r[f].draw(a,o)}getStyle(a,t){const s=t?"active":"default";return a===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(a||0,s)}getContext(a,t,s){const u=this.getDataset();let o;if(a>=0&&a<this._cachedMeta.data.length){const r=this._cachedMeta.data[a];o=r.$context||(r.$context=e_(this.getContext(),a,r)),o.parsed=this.getParsed(a),o.raw=u.data[a],o.index=o.dataIndex=a}else o=this.$context||(this.$context=t_(this.chart.getContext(),this.index)),o.dataset=u,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=s,o}resolveDatasetElementOptions(a){return this._resolveElementOptions(this.datasetElementType.id,a)}resolveDataElementOptions(a,t){return this._resolveElementOptions(this.dataElementType.id,t,a)}_resolveElementOptions(a,t="default",s){const u=t==="active",o=this._cachedDataOpts,r=a+"-"+t,c=o[r],l=this.enableOptionSharing&&gm(s);if(c)return sy(c,l);const n=this.chart.config,f=n.datasetElementScopeKeys(this._type,a),h=u?[`${a}Hover`,"hover",a,""]:[a,""],p=n.getOptionScopes(this.getDataset(),f),g=Object.keys(yi.elements[a]),v=()=>this.getContext(s,u,t),x=n.resolveNamedOptions(p,g,v,h);return x.$shared&&(x.$shared=l,o[r]=Object.freeze(sy(x,l))),x}_resolveAnimations(a,t,s){const u=this.chart,o=this._cachedDataOpts,r=`animation-${t}`,c=o[r];if(c)return c;let l;if(u.options.animation!==!1){const f=this.chart.config,h=f.datasetAnimationScopeKeys(this._type,t),p=f.getOptionScopes(this.getDataset(),h);l=f.createResolver(p,this.getContext(a,s,t))}const n=new tv(u,l&&l.animations);return l&&l._cacheable&&(o[r]=Object.freeze(n)),n}getSharedOptions(a){if(a.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},a))}includeOptions(a,t){return!t||Eg(a)||this.chart._animationsDisabled}_getSharedOptions(a,t){const s=this.resolveDataElementOptions(a,t),u=this._sharedOptions,o=this.getSharedOptions(s),r=this.includeOptions(t,o)||o!==u;return this.updateSharedOptions(o,t,s),{sharedOptions:o,includeOptions:r}}updateElement(a,t,s,u){Eg(u)?Object.assign(a,s):this._resolveAnimations(t,u).update(a,s)}updateSharedOptions(a,t,s){a&&!Eg(t)&&this._resolveAnimations(void 0,t).update(a,s)}_setStyle(a,t,s,u){a.active=u;const o=this.getStyle(t,u);this._resolveAnimations(t,s,u).update(a,{options:!u&&this.getSharedOptions(o)||o})}removeHoverStyle(a,t,s){this._setStyle(a,s,"active",!1)}setHoverStyle(a,t,s){this._setStyle(a,s,"active",!0)}_removeDatasetHoverStyle(){const a=this._cachedMeta.dataset;a&&this._setStyle(a,void 0,"active",!1)}_setDatasetHoverStyle(){const a=this._cachedMeta.dataset;a&&this._setStyle(a,void 0,"active",!0)}_resyncElements(a){const t=this._data,s=this._cachedMeta.data;for(const[c,l,n]of this._syncList)this[c](l,n);this._syncList=[];const u=s.length,o=t.length,r=Math.min(o,u);r&&this.parse(0,r),o>u?this._insertElements(u,o-u,a):o<u&&this._removeElements(o,u-o)}_insertElements(a,t,s=!0){const u=this._cachedMeta,o=u.data,r=a+t;let c;const l=n=>{for(n.length+=t,c=n.length-1;c>=r;c--)n[c]=n[c-t]};for(l(o),c=a;c<r;++c)o[c]=new this.dataElementType;this._parsing&&l(u._parsed),this.parse(a,t),s&&this.updateElements(o,a,t,"reset")}updateElements(a,t,s,u){}_removeElements(a,t){const s=this._cachedMeta;if(this._parsing){const u=s._parsed.splice(a,t);s._stacked&&Kp(s,u)}s.data.splice(a,t)}_sync(a){if(this._parsing)this._syncList.push(a);else{const[t,s,u]=a;this[t](s,u)}this.chart._dataChanges.push([this.index,...a])}_onDataPush(){const a=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-a,a])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(a,t){t&&this._sync(["_removeElements",a,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",a,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function r_(m,a){if(!m._cache.$bar){const t=m.getMatchingVisibleMetas(a);let s=[];for(let u=0,o=t.length;u<o;u++)s=s.concat(t[u].controller.getAllParsedValues(m));m._cache.$bar=j1(s.sort((u,o)=>u-o))}return m._cache.$bar}function i_(m){const a=m.iScale,t=r_(a,m.type);let s=a._length,u,o,r,c;const l=()=>{r===32767||r===-32768||(gm(c)&&(s=Math.min(s,Math.abs(r-c)||s)),c=r)};for(u=0,o=t.length;u<o;++u)r=a.getPixelForValue(t[u]),l();for(c=void 0,u=0,o=a.ticks.length;u<o;++u)r=a.getPixelForTick(u),l();return s}function s_(m,a,t,s){const u=t.barThickness;let o,r;return ar(u)?(o=a.min*t.categoryPercentage,r=t.barPercentage):(o=u*s,r=1),{chunk:o/s,ratio:r,start:a.pixels[m]-o/2}}function o_(m,a,t,s){const u=a.pixels,o=u[m];let r=m>0?u[m-1]:null,c=m<u.length-1?u[m+1]:null;const l=t.categoryPercentage;r===null&&(r=o-(c===null?a.end-a.start:c-o)),c===null&&(c=o+o-r);const n=o-(o-Math.min(r,c))/2*l;return{chunk:Math.abs(c-r)/2*l/s,ratio:t.barPercentage,start:n}}function a_(m,a,t,s){const u=t.parse(m[0],s),o=t.parse(m[1],s),r=Math.min(u,o),c=Math.max(u,o);let l=r,n=c;Math.abs(r)>Math.abs(c)&&(l=c,n=r),a[t.axis]=n,a._custom={barStart:l,barEnd:n,start:u,end:o,min:r,max:c}}function nv(m,a,t,s){return gi(m)?a_(m,a,t,s):a[t.axis]=t.parse(m,s),a}function oy(m,a,t,s){const u=m.iScale,o=m.vScale,r=u.getLabels(),c=u===o,l=[];let n,f,h,p;for(n=t,f=t+s;n<f;++n)p=a[n],h={},h[u.axis]=c||u.parse(r[n],n),l.push(nv(p,h,o,n));return l}function Ng(m){return m&&m.barStart!==void 0&&m.barEnd!==void 0}function l_(m,a,t){return m!==0?Pc(m):(a.isHorizontal()?1:-1)*(a.min>=t?1:-1)}function c_(m){let a,t,s,u,o;return m.horizontal?(a=m.base>m.x,t="left",s="right"):(a=m.base<m.y,t="bottom",s="top"),a?(u="end",o="start"):(u="start",o="end"),{start:t,end:s,reverse:a,top:u,bottom:o}}function u_(m,a,t,s){let u=a.borderSkipped;const o={};if(!u){m.borderSkipped=o;return}if(u===!0){m.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:c,reverse:l,top:n,bottom:f}=c_(m);u==="middle"&&t&&(m.enableBorderRadius=!0,(t._top||0)===s?u=n:(t._bottom||0)===s?u=f:(o[ay(f,r,c,l)]=!0,u=n)),o[ay(u,r,c,l)]=!0,m.borderSkipped=o}function ay(m,a,t,s){return s?(m=f_(m,a,t),m=ly(m,t,a)):m=ly(m,a,t),m}function f_(m,a,t){return m===a?t:m===t?a:m}function ly(m,a,t){return m==="start"?a:m==="end"?t:m}function d_(m,{inflateAmount:a},t){m.inflateAmount=a==="auto"?t===1?.33:0:a}class h_ extends Xf{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(a,t,s,u){return oy(a,t,s,u)}parseArrayData(a,t,s,u){return oy(a,t,s,u)}parseObjectData(a,t,s,u){const{iScale:o,vScale:r}=a,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,n=o.axis==="x"?c:l,f=r.axis==="x"?c:l,h=[];let p,g,v,x;for(p=s,g=s+u;p<g;++p)x=t[p],v={},v[o.axis]=o.parse(Wf(x,n),p),h.push(nv(Wf(x,f),v,r,p));return h}updateRangeFromParsed(a,t,s,u){super.updateRangeFromParsed(a,t,s,u);const o=s._custom;o&&t===this._cachedMeta.vScale&&(a.min=Math.min(a.min,o.min),a.max=Math.max(a.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(a){const t=this._cachedMeta,{iScale:s,vScale:u}=t,o=this.getParsed(a),r=o._custom,c=Ng(r)?"["+r.start+", "+r.end+"]":""+u.getLabelForValue(o[u.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const a=this._cachedMeta;a.stack=this.getDataset().stack}update(a){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,a)}updateElements(a,t,s,u){const o=u==="reset",{index:r,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),n=c.isHorizontal(),f=this._getRuler(),{sharedOptions:h,includeOptions:p}=this._getSharedOptions(t,u);for(let g=t;g<t+s;g++){const v=this.getParsed(g),x=o||ar(v[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),y=this._calculateBarIndexPixels(g,f),w=(v._stacks||{})[c.axis],S={horizontal:n,base:x.base,enableBorderRadius:!w||Ng(v._custom)||r===w._top||r===w._bottom,x:n?x.head:y.center,y:n?y.center:x.head,height:n?y.size:Math.abs(x.size),width:n?Math.abs(x.size):y.size};p&&(S.options=h||this.resolveDataElementOptions(g,a[g].active?"active":u));const E=S.options||a[g].options;u_(S,E,w,r),d_(S,E,f.ratio),this.updateElement(a[g],g,S,u)}}_getStacks(a,t){const{iScale:s}=this._cachedMeta,u=s.getMatchingVisibleMetas(this._type).filter(f=>f.controller.options.grouped),o=s.options.stacked,r=[],c=this._cachedMeta.controller.getParsed(t),l=c&&c[s.axis],n=f=>{const h=f._parsed.find(g=>g[s.axis]===l),p=h&&h[f.vScale.axis];if(ar(p)||isNaN(p))return!0};for(const f of u)if(!(t!==void 0&&n(f))&&((o===!1||r.indexOf(f.stack)===-1||o===void 0&&f.stack===void 0)&&r.push(f.stack),f.index===a))break;return r.length||r.push(void 0),r}_getStackCount(a){return this._getStacks(void 0,a).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const a=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(a).filter(s=>a[s].axis===t).shift()}_getAxis(){const a={},t=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)a[tr(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,t)]=!0;return Object.keys(a)}_getStackIndex(a,t,s){const u=this._getStacks(a,s),o=t!==void 0?u.indexOf(t):-1;return o===-1?u.length-1:o}_getRuler(){const a=this.options,t=this._cachedMeta,s=t.iScale,u=[];let o,r;for(o=0,r=t.data.length;o<r;++o)u.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const c=a.barThickness;return{min:c||i_(t),pixels:u,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:a.grouped,ratio:c?1:a.categoryPercentage*a.barPercentage}}_calculateBarValuePixels(a){const{_cachedMeta:{vScale:t,_stacked:s,index:u},options:{base:o,minBarLength:r}}=this,c=o||0,l=this.getParsed(a),n=l._custom,f=Ng(n);let h=l[t.axis],p=0,g=s?this.applyStack(t,l,s):h,v,x;g!==h&&(p=g-h,g=h),f&&(h=n.barStart,g=n.barEnd-n.barStart,h!==0&&Pc(h)!==Pc(n.barEnd)&&(p=0),p+=h);const y=!ar(o)&&!f?o:p;let w=t.getPixelForValue(y);if(this.chart.getDataVisibility(a)?v=t.getPixelForValue(p+g):v=w,x=v-w,Math.abs(x)<r){x=l_(x,t,c)*r,h===c&&(w-=x/2);const S=t.getPixelForDecimal(0),E=t.getPixelForDecimal(1),I=Math.min(S,E),D=Math.max(S,E);w=Math.max(Math.min(w,D),I),v=w+x,s&&!f&&(l._stacks[t.axis]._visualValues[u]=t.getValueForPixel(v)-t.getValueForPixel(w))}if(w===t.getPixelForValue(c)){const S=Pc(x)*t.getLineWidthForValue(c)/2;w+=S,x-=S}return{size:x,base:w,head:v,center:v+x/2}}_calculateBarIndexPixels(a,t){const s=t.scale,u=this.options,o=u.skipNull,r=tr(u.maxBarThickness,1/0);let c,l;const n=this._getAxisCount();if(t.grouped){const f=o?this._getStackCount(a):t.stackCount,h=u.barThickness==="flex"?o_(a,t,u,f*n):s_(a,t,u,f*n),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(tr(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,o?a:void 0)+g;c=h.start+h.chunk*v+h.chunk/2,l=Math.min(r,h.chunk*h.ratio)}else c=s.getPixelForValue(this.getParsed(a)[s.axis],a),l=Math.min(r,t.min*t.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){const a=this._cachedMeta,t=a.vScale,s=a.data,u=s.length;let o=0;for(;o<u;++o)this.getParsed(o)[t.axis]!==null&&!s[o].hidden&&s[o].draw(this._ctx)}}class p_ extends Xf{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(a,t,s,u){const o=super.parsePrimitiveData(a,t,s,u);for(let r=0;r<o.length;r++)o[r]._custom=this.resolveDataElementOptions(r+s).radius;return o}parseArrayData(a,t,s,u){const o=super.parseArrayData(a,t,s,u);for(let r=0;r<o.length;r++){const c=t[s+r];o[r]._custom=tr(c[2],this.resolveDataElementOptions(r+s).radius)}return o}parseObjectData(a,t,s,u){const o=super.parseObjectData(a,t,s,u);for(let r=0;r<o.length;r++){const c=t[s+r];o[r]._custom=tr(c&&c.r&&+c.r,this.resolveDataElementOptions(r+s).radius)}return o}getMaxOverflow(){const a=this._cachedMeta.data;let t=0;for(let s=a.length-1;s>=0;--s)t=Math.max(t,a[s].size(this.resolveDataElementOptions(s))/2);return t>0&&t}getLabelAndValue(a){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:u,yScale:o}=t,r=this.getParsed(a),c=u.getLabelForValue(r.x),l=o.getLabelForValue(r.y),n=r._custom;return{label:s[a]||"",value:"("+c+", "+l+(n?", "+n:"")+")"}}update(a){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,a)}updateElements(a,t,s,u){const o=u==="reset",{iScale:r,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:n}=this._getSharedOptions(t,u),f=r.axis,h=c.axis;for(let p=t;p<t+s;p++){const g=a[p],v=!o&&this.getParsed(p),x={},y=x[f]=o?r.getPixelForDecimal(.5):r.getPixelForValue(v[f]),w=x[h]=o?c.getBasePixel():c.getPixelForValue(v[h]);x.skip=isNaN(y)||isNaN(w),n&&(x.options=l||this.resolveDataElementOptions(p,g.active?"active":u),o&&(x.options.radius=0)),this.updateElement(g,p,x,u)}}resolveDataElementOptions(a,t){const s=this.getParsed(a);let u=super.resolveDataElementOptions(a,t);u.$shared&&(u=Object.assign({},u,{$shared:!1}));const o=u.radius;return t!=="active"&&(u.radius=0),u.radius+=tr(s&&s._custom,o),u}}function m_(m,a,t){let s=1,u=1,o=0,r=0;if(a<bi){const c=m,l=c+a,n=Math.cos(c),f=Math.sin(c),h=Math.cos(l),p=Math.sin(l),g=(E,I,D)=>bm(E,c,l,!0)?1:Math.max(I,I*t,D,D*t),v=(E,I,D)=>bm(E,c,l,!0)?-1:Math.min(I,I*t,D,D*t),x=g(0,n,h),y=g(es,f,p),w=v(Br,n,h),S=v(Br+es,f,p);s=(x-w)/2,u=(y-S)/2,o=-(x+w)/2,r=-(y+S)/2}return{ratioX:s,ratioY:u,offsetX:o,offsetY:r}}class mb extends Xf{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:a=>a!=="spacing",_indexable:a=>a!=="spacing"&&!a.startsWith("borderDash")&&!a.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(a){const t=a.data,{labels:{pointStyle:s,textAlign:u,color:o,useBorderRadius:r,borderRadius:c}}=a.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((l,n)=>{const h=a.getDatasetMeta(0).controller.getStyle(n);return{text:l,fillStyle:h.backgroundColor,fontColor:o,hidden:!a.getDataVisibility(n),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:u,pointStyle:s,borderRadius:r&&(c||h.borderRadius),index:n}}):[]}},onClick(a,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}};constructor(a,t){super(a,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(a,t){const s=this.getDataset().data,u=this._cachedMeta;if(this._parsing===!1)u._parsed=s;else{let o=l=>+s[l];if(Sr(s[a])){const{key:l="value"}=this._parsing;o=n=>+Wf(s[n],l)}let r,c;for(r=a,c=a+t;r<c;++r)u._parsed[r]=o(r)}}_getRotation(){return Gl(this.options.rotation-90)}_getCircumference(){return Gl(this.options.circumference)}_getRotationExtents(){let a=bi,t=-bi;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const u=this.chart.getDatasetMeta(s).controller,o=u._getRotation(),r=u._getCircumference();a=Math.min(a,o),t=Math.max(t,o+r)}return{rotation:a,circumference:t-a}}update(a){const t=this.chart,{chartArea:s}=t,u=this._cachedMeta,o=u.data,r=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(s.width,s.height)-r)/2,0),l=Math.min(Cx(this.options.cutout,c),1),n=this._getRingWeight(this.index),{circumference:f,rotation:h}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:v,offsetY:x}=m_(h,f,l),y=(s.width-r)/p,w=(s.height-r)/g,S=Math.max(Math.min(y,w)/2,0),E=N1(this.options.radius,S),I=Math.max(E*l,0),D=(E-I)/this._getVisibleDatasetWeightTotal();this.offsetX=v*E,this.offsetY=x*E,u.total=this.calculateTotal(),this.outerRadius=E-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*n,0),this.updateElements(o,0,o.length,a)}_circumference(a,t){const s=this.options,u=this._cachedMeta,o=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(a)||u._parsed[a]===null||u.data[a].hidden?0:this.calculateCircumference(u._parsed[a]*o/bi)}updateElements(a,t,s,u){const o=u==="reset",r=this.chart,c=r.chartArea,n=r.options.animation,f=(c.left+c.right)/2,h=(c.top+c.bottom)/2,p=o&&n.animateScale,g=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:x,includeOptions:y}=this._getSharedOptions(t,u);let w=this._getRotation(),S;for(S=0;S<t;++S)w+=this._circumference(S,o);for(S=t;S<t+s;++S){const E=this._circumference(S,o),I=a[S],D={x:f+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+E,circumference:E,outerRadius:v,innerRadius:g};y&&(D.options=x||this.resolveDataElementOptions(S,I.active?"active":u)),w+=E,this.updateElement(I,S,D,u)}}calculateTotal(){const a=this._cachedMeta,t=a.data;let s=0,u;for(u=0;u<t.length;u++){const o=a._parsed[u];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(u)&&!t[u].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(a){const t=this._cachedMeta.total;return t>0&&!isNaN(a)?bi*(Math.abs(a)/t):0}getLabelAndValue(a){const t=this._cachedMeta,s=this.chart,u=s.data.labels||[],o=wm(t._parsed[a],s.options.locale);return{label:u[a]||"",value:o}}getMaxBorderWidth(a){let t=0;const s=this.chart;let u,o,r,c,l;if(!a){for(u=0,o=s.data.datasets.length;u<o;++u)if(s.isDatasetVisible(u)){r=s.getDatasetMeta(u),a=r.data,c=r.controller;break}}if(!a)return 0;for(u=0,o=a.length;u<o;++u)l=c.resolveDataElementOptions(u),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(a){let t=0;for(let s=0,u=a.length;s<u;++s){const o=this.resolveDataElementOptions(s);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(a){let t=0;for(let s=0;s<a;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(a){return Math.max(tr(this.chart.data.datasets[a].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class g_ extends Xf{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(a){const t=this._cachedMeta,{dataset:s,data:u=[],_dataset:o}=t,r=this.chart._animationsDisabled;let{start:c,count:l}=D1(t,u,r);this._drawStart=c,this._drawCount=l,B1(t)&&(c=0,l=u.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=u;const n=this.resolveDatasetElementOptions(a);this.options.showLine||(n.borderWidth=0),n.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:n},a),this.updateElements(u,c,l,a)}updateElements(a,t,s,u){const o=u==="reset",{iScale:r,vScale:c,_stacked:l,_dataset:n}=this._cachedMeta,{sharedOptions:f,includeOptions:h}=this._getSharedOptions(t,u),p=r.axis,g=c.axis,{spanGaps:v,segment:x}=this.options,y=Yh(v)?v:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||u==="none",S=t+s,E=a.length;let I=t>0&&this.getParsed(t-1);for(let D=0;D<E;++D){const Z=a[D],K=w?Z:{};if(D<t||D>=S){K.skip=!0;continue}const z=this.getParsed(D),W=ar(z[g]),Q=K[p]=r.getPixelForValue(z[p],D),rt=K[g]=o||W?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,z,l):z[g],D);K.skip=isNaN(Q)||isNaN(rt)||W,K.stop=D>0&&Math.abs(z[p]-I[p])>y,x&&(K.parsed=z,K.raw=n.data[D]),h&&(K.options=f||this.resolveDataElementOptions(D,Z.active?"active":u)),w||this.updateElement(Z,D,K,u),I=z}}getMaxOverflow(){const a=this._cachedMeta,t=a.dataset,s=t.options&&t.options.borderWidth||0,u=a.data||[];if(!u.length)return s;const o=u[0].size(this.resolveDataElementOptions(0)),r=u[u.length-1].size(this.resolveDataElementOptions(u.length-1));return Math.max(s,o,r)/2}draw(){const a=this._cachedMeta;a.dataset.updateControlPoints(this.chart.chartArea,a.iScale.axis),super.draw()}}class rv extends Xf{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(a){const t=a.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:s,color:u}}=a.legend.options;return t.labels.map((o,r)=>{const l=a.getDatasetMeta(0).controller.getStyle(r);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:u,lineWidth:l.borderWidth,pointStyle:s,hidden:!a.getDataVisibility(r),index:r}})}return[]}},onClick(a,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(a,t){super(a,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(a){const t=this._cachedMeta,s=this.chart,u=s.data.labels||[],o=wm(t._parsed[a].r,s.options.locale);return{label:u[a]||"",value:o}}parseObjectData(a,t,s,u){return q1.bind(this)(a,t,s,u)}update(a){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,a)}getMinMax(){const a=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return a.data.forEach((s,u)=>{const o=this.getParsed(u).r;!isNaN(o)&&this.chart.getDataVisibility(u)&&(o<t.min&&(t.min=o),o>t.max&&(t.max=o))}),t}_updateRadius(){const a=this.chart,t=a.chartArea,s=a.options,u=Math.min(t.right-t.left,t.bottom-t.top),o=Math.max(u/2,0),r=Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0),c=(o-r)/a.getVisibleDatasetCount();this.outerRadius=o-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(a,t,s,u){const o=u==="reset",r=this.chart,l=r.options.animation,n=this._cachedMeta.rScale,f=n.xCenter,h=n.yCenter,p=n.getIndexAngle(0)-.5*Br;let g=p,v;const x=360/this.countVisibleElements();for(v=0;v<t;++v)g+=this._computeAngle(v,u,x);for(v=t;v<t+s;v++){const y=a[v];let w=g,S=g+this._computeAngle(v,u,x),E=r.getDataVisibility(v)?n.getDistanceFromCenterForValue(this.getParsed(v).r):0;g=S,o&&(l.animateScale&&(E=0),l.animateRotate&&(w=S=p));const I={x:f,y:h,innerRadius:0,outerRadius:E,startAngle:w,endAngle:S,options:this.resolveDataElementOptions(v,y.active?"active":u)};this.updateElement(y,v,I,u)}}countVisibleElements(){const a=this._cachedMeta;let t=0;return a.data.forEach((s,u)=>{!isNaN(this.getParsed(u).r)&&this.chart.getDataVisibility(u)&&t++}),t}_computeAngle(a,t,s){return this.chart.getDataVisibility(a)?Gl(this.resolveDataElementOptions(a,t).angle||s):0}}class b_ extends mb{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class y_ extends Xf{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(a){const t=this._cachedMeta.vScale,s=this.getParsed(a);return{label:t.getLabels()[a],value:""+t.getLabelForValue(s[t.axis])}}parseObjectData(a,t,s,u){return q1.bind(this)(a,t,s,u)}update(a){const t=this._cachedMeta,s=t.dataset,u=t.data||[],o=t.iScale.getLabels();if(s.points=u,a!=="resize"){const r=this.resolveDatasetElementOptions(a);this.options.showLine||(r.borderWidth=0);const c={_loop:!0,_fullLoop:o.length===u.length,options:r};this.updateElement(s,void 0,c,a)}this.updateElements(u,0,u.length,a)}updateElements(a,t,s,u){const o=this._cachedMeta.rScale,r=u==="reset";for(let c=t;c<t+s;c++){const l=a[c],n=this.resolveDataElementOptions(c,l.active?"active":u),f=o.getPointPositionForValue(c,this.getParsed(c).r),h=r?o.xCenter:f.x,p=r?o.yCenter:f.y,g={x:h,y:p,angle:f.angle,skip:isNaN(h)||isNaN(p),options:n};this.updateElement(l,c,g,u)}}}class v_ extends Xf{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(a){const t=this._cachedMeta,s=this.chart.data.labels||[],{xScale:u,yScale:o}=t,r=this.getParsed(a),c=u.getLabelForValue(r.x),l=o.getLabelForValue(r.y);return{label:s[a]||"",value:"("+c+", "+l+")"}}update(a){const t=this._cachedMeta,{data:s=[]}=t,u=this.chart._animationsDisabled;let{start:o,count:r}=D1(t,s,u);if(this._drawStart=o,this._drawCount=r,B1(t)&&(o=0,r=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:c,_dataset:l}=t;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=s;const n=this.resolveDatasetElementOptions(a);n.segment=this.options.segment,this.updateElement(c,void 0,{animated:!u,options:n},a)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(s,o,r,a)}addElements(){const{showLine:a}=this.options;!this.datasetElementType&&a&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(a,t,s,u){const o=u==="reset",{iScale:r,vScale:c,_stacked:l,_dataset:n}=this._cachedMeta,f=this.resolveDataElementOptions(t,u),h=this.getSharedOptions(f),p=this.includeOptions(u,h),g=r.axis,v=c.axis,{spanGaps:x,segment:y}=this.options,w=Yh(x)?x:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||o||u==="none";let E=t>0&&this.getParsed(t-1);for(let I=t;I<t+s;++I){const D=a[I],Z=this.getParsed(I),K=S?D:{},z=ar(Z[v]),W=K[g]=r.getPixelForValue(Z[g],I),Q=K[v]=o||z?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,Z,l):Z[v],I);K.skip=isNaN(W)||isNaN(Q)||z,K.stop=I>0&&Math.abs(Z[g]-E[g])>w,y&&(K.parsed=Z,K.raw=n.data[I]),p&&(K.options=h||this.resolveDataElementOptions(I,D.active?"active":u)),S||this.updateElement(D,I,K,u),E=Z}this.updateSharedOptions(h,u,f)}getMaxOverflow(){const a=this._cachedMeta,t=a.data||[];if(!this.options.showLine){let c=0;for(let l=t.length-1;l>=0;--l)c=Math.max(c,t[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}const s=a.dataset,u=s.options&&s.options.borderWidth||0;if(!t.length)return u;const o=t[0].size(this.resolveDataElementOptions(0)),r=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(u,o,r)/2}}var x_=Object.freeze({__proto__:null,BarController:h_,BubbleController:p_,DoughnutController:mb,LineController:g_,PieController:b_,PolarAreaController:rv,RadarController:y_,ScatterController:v_});function $d(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class gb{static override(a){Object.assign(gb.prototype,a)}options;constructor(a){this.options=a||{}}init(){}formats(){return $d()}parse(){return $d()}format(){return $d()}add(){return $d()}diff(){return $d()}startOf(){return $d()}endOf(){return $d()}}var __={_date:gb};function w_(m,a,t,s){const{controller:u,data:o,_sorted:r}=m,c=u._cachedMeta.iScale,l=m.dataset&&m.dataset.options?m.dataset.options.spanGaps:null;if(c&&a===c.axis&&a!=="r"&&r&&o.length){const n=c._reversePixels?Bx:Ou;if(s){if(u._sharedOptions){const f=o[0],h=typeof f.getRange=="function"&&f.getRange(a);if(h){const p=n(o,a,t-h),g=n(o,a,t+h);return{lo:p.lo,hi:g.hi}}}}else{const f=n(o,a,t);if(l){const{vScale:h}=u._cachedMeta,{_parsed:p}=m,g=p.slice(0,f.lo+1).reverse().findIndex(x=>!ar(x[h.axis]));f.lo-=Math.max(0,g);const v=p.slice(f.hi).findIndex(x=>!ar(x[h.axis]));f.hi+=Math.max(0,v)}return f}}return{lo:0,hi:o.length-1}}function X0(m,a,t,s,u){const o=m.getSortedVisibleDatasetMetas(),r=t[a];for(let c=0,l=o.length;c<l;++c){const{index:n,data:f}=o[c],{lo:h,hi:p}=w_(o[c],a,r,u);for(let g=h;g<=p;++g){const v=f[g];v.skip||s(v,n,g)}}}function S_(m){const a=m.indexOf("x")!==-1,t=m.indexOf("y")!==-1;return function(s,u){const o=a?Math.abs(s.x-u.x):0,r=t?Math.abs(s.y-u.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}function Ag(m,a,t,s,u){const o=[];return!u&&!m.isPointInArea(a)||X0(m,t,a,function(c,l,n){!u&&!ju(c,m.chartArea,0)||c.inRange(a.x,a.y,s)&&o.push({element:c,datasetIndex:l,index:n})},!0),o}function T_(m,a,t,s){let u=[];function o(r,c,l){const{startAngle:n,endAngle:f}=r.getProps(["startAngle","endAngle"],s),{angle:h}=I1(r,{x:a.x,y:a.y});bm(h,n,f)&&u.push({element:r,datasetIndex:c,index:l})}return X0(m,t,a,o),u}function C_(m,a,t,s,u,o){let r=[];const c=S_(t);let l=Number.POSITIVE_INFINITY;function n(f,h,p){const g=f.inRange(a.x,a.y,u);if(s&&!g)return;const v=f.getCenterPoint(u);if(!(!!o||m.isPointInArea(v))&&!g)return;const y=c(a,v);y<l?(r=[{element:f,datasetIndex:h,index:p}],l=y):y===l&&r.push({element:f,datasetIndex:h,index:p})}return X0(m,t,a,n),r}function Rg(m,a,t,s,u,o){return!o&&!m.isPointInArea(a)?[]:t==="r"&&!s?T_(m,a,t,u):C_(m,a,t,s,u,o)}function cy(m,a,t,s,u){const o=[],r=t==="x"?"inXRange":"inYRange";let c=!1;return X0(m,t,a,(l,n,f)=>{l[r]&&l[r](a[t],u)&&(o.push({element:l,datasetIndex:n,index:f}),c=c||l.inRange(a.x,a.y,u))}),s&&!c?[]:o}var k_={modes:{index(m,a,t,s){const u=qd(a,m),o=t.axis||"x",r=t.includeInvisible||!1,c=t.intersect?Ag(m,u,o,s,r):Rg(m,u,o,!1,s,r),l=[];return c.length?(m.getSortedVisibleDatasetMetas().forEach(n=>{const f=c[0].index,h=n.data[f];h&&!h.skip&&l.push({element:h,datasetIndex:n.index,index:f})}),l):[]},dataset(m,a,t,s){const u=qd(a,m),o=t.axis||"xy",r=t.includeInvisible||!1;let c=t.intersect?Ag(m,u,o,s,r):Rg(m,u,o,!1,s,r);if(c.length>0){const l=c[0].datasetIndex,n=m.getDatasetMeta(l).data;c=[];for(let f=0;f<n.length;++f)c.push({element:n[f],datasetIndex:l,index:f})}return c},point(m,a,t,s){const u=qd(a,m),o=t.axis||"xy",r=t.includeInvisible||!1;return Ag(m,u,o,s,r)},nearest(m,a,t,s){const u=qd(a,m),o=t.axis||"xy",r=t.includeInvisible||!1;return Rg(m,u,o,t.intersect,s,r)},x(m,a,t,s){const u=qd(a,m);return cy(m,u,"x",t.intersect,s)},y(m,a,t,s){const u=qd(a,m);return cy(m,u,"y",t.intersect,s)}}};const iv=["left","top","right","bottom"];function Qp(m,a){return m.filter(t=>t.pos===a)}function uy(m,a){return m.filter(t=>iv.indexOf(t.pos)===-1&&t.box.axis===a)}function Jp(m,a){return m.sort((t,s)=>{const u=a?s:t,o=a?t:s;return u.weight===o.weight?u.index-o.index:u.weight-o.weight})}function M_(m){const a=[];let t,s,u,o,r,c;for(t=0,s=(m||[]).length;t<s;++t)u=m[t],{position:o,options:{stack:r,stackWeight:c=1}}=u,a.push({index:t,box:u,pos:o,horizontal:u.isHorizontal(),weight:u.weight,stack:r&&o+r,stackWeight:c});return a}function E_(m){const a={};for(const t of m){const{stack:s,pos:u,stackWeight:o}=t;if(!s||!iv.includes(u))continue;const r=a[s]||(a[s]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return a}function N_(m,a){const t=E_(m),{vBoxMaxWidth:s,hBoxMaxHeight:u}=a;let o,r,c;for(o=0,r=m.length;o<r;++o){c=m[o];const{fullSize:l}=c.box,n=t[c.stack],f=n&&c.stackWeight/n.weight;c.horizontal?(c.width=f?f*s:l&&a.availableWidth,c.height=u):(c.width=s,c.height=f?f*u:l&&a.availableHeight)}return t}function A_(m){const a=M_(m),t=Jp(a.filter(n=>n.box.fullSize),!0),s=Jp(Qp(a,"left"),!0),u=Jp(Qp(a,"right")),o=Jp(Qp(a,"top"),!0),r=Jp(Qp(a,"bottom")),c=uy(a,"x"),l=uy(a,"y");return{fullSize:t,leftAndTop:s.concat(o),rightAndBottom:u.concat(l).concat(r).concat(c),chartArea:Qp(a,"chartArea"),vertical:s.concat(u).concat(l),horizontal:o.concat(r).concat(c)}}function fy(m,a,t,s){return Math.max(m[t],a[t])+Math.max(m[s],a[s])}function sv(m,a){m.top=Math.max(m.top,a.top),m.left=Math.max(m.left,a.left),m.bottom=Math.max(m.bottom,a.bottom),m.right=Math.max(m.right,a.right)}function R_(m,a,t,s){const{pos:u,box:o}=t,r=m.maxPadding;if(!Sr(u)){t.size&&(m[u]-=t.size);const h=s[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?o.height:o.width),t.size=h.size/h.count,m[u]+=t.size}o.getPadding&&sv(r,o.getPadding());const c=Math.max(0,a.outerWidth-fy(r,m,"left","right")),l=Math.max(0,a.outerHeight-fy(r,m,"top","bottom")),n=c!==m.w,f=l!==m.h;return m.w=c,m.h=l,t.horizontal?{same:n,other:f}:{same:f,other:n}}function I_(m){const a=m.maxPadding;function t(s){const u=Math.max(a[s]-m[s],0);return m[s]+=u,u}m.y+=t("top"),m.x+=t("left"),t("right"),t("bottom")}function O_(m,a){const t=a.maxPadding;function s(u){const o={left:0,top:0,right:0,bottom:0};return u.forEach(r=>{o[r]=Math.max(a[r],t[r])}),o}return s(m?["left","right"]:["top","bottom"])}function am(m,a,t,s){const u=[];let o,r,c,l,n,f;for(o=0,r=m.length,n=0;o<r;++o){c=m[o],l=c.box,l.update(c.width||a.w,c.height||a.h,O_(c.horizontal,a));const{same:h,other:p}=R_(a,t,c,s);n|=h&&u.length,f=f||p,l.fullSize||u.push(c)}return n&&am(u,a,t,s)||f}function y0(m,a,t,s,u){m.top=t,m.left=a,m.right=a+s,m.bottom=t+u,m.width=s,m.height=u}function dy(m,a,t,s){const u=t.padding;let{x:o,y:r}=a;for(const c of m){const l=c.box,n=s[c.stack]||{placed:0,weight:1},f=c.stackWeight/n.weight||1;if(c.horizontal){const h=a.w*f,p=n.size||l.height;gm(n.start)&&(r=n.start),l.fullSize?y0(l,u.left,r,t.outerWidth-u.right-u.left,p):y0(l,a.left+n.placed,r,h,p),n.start=r,n.placed+=h,r=l.bottom}else{const h=a.h*f,p=n.size||l.width;gm(n.start)&&(o=n.start),l.fullSize?y0(l,o,u.top,p,t.outerHeight-u.bottom-u.top):y0(l,o,a.top+n.placed,p,h),n.start=o,n.placed+=h,o=l.right}}a.x=o,a.y=r}var vo={addBox(m,a){m.boxes||(m.boxes=[]),a.fullSize=a.fullSize||!1,a.position=a.position||"top",a.weight=a.weight||0,a._layers=a._layers||function(){return[{z:0,draw(t){a.draw(t)}}]},m.boxes.push(a)},removeBox(m,a){const t=m.boxes?m.boxes.indexOf(a):-1;t!==-1&&m.boxes.splice(t,1)},configure(m,a,t){a.fullSize=t.fullSize,a.position=t.position,a.weight=t.weight},update(m,a,t,s){if(!m)return;const u=so(m.options.layout.padding),o=Math.max(a-u.width,0),r=Math.max(t-u.height,0),c=A_(m.boxes),l=c.vertical,n=c.horizontal;Zr(m.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const f=l.reduce((x,y)=>y.box.options&&y.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:a,outerHeight:t,padding:u,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/f,hBoxMaxHeight:r/2}),p=Object.assign({},u);sv(p,so(s));const g=Object.assign({maxPadding:p,w:o,h:r,x:u.left,y:u.top},u),v=N_(l.concat(n),h);am(c.fullSize,g,h,v),am(l,g,h,v),am(n,g,h,v)&&am(l,g,h,v),I_(g),dy(c.leftAndTop,g,h,v),g.x+=g.w,g.y+=g.h,dy(c.rightAndBottom,g,h,v),m.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Zr(c.chartArea,x=>{const y=x.box;Object.assign(y,m.chartArea),y.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class ov{acquireContext(a,t){}releaseContext(a){return!1}addEventListener(a,t,s){}removeEventListener(a,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(a,t,s,u){return t=Math.max(0,t||a.width),s=s||a.height,{width:t,height:Math.max(0,u?Math.floor(t/u):s)}}isAttached(a){return!0}updateConfig(a){}}class j_ extends ov{acquireContext(a){return a&&a.getContext&&a.getContext("2d")||null}updateConfig(a){a.options.animation=!1}}const I0="$chartjs",L_={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hy=m=>m===null||m==="";function P_(m,a){const t=m.style,s=m.getAttribute("height"),u=m.getAttribute("width");if(m[I0]={initial:{height:s,width:u,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",hy(u)){const o=Yb(m,"width");o!==void 0&&(m.width=o)}if(hy(s))if(m.style.height==="")m.height=m.width/(a||2);else{const o=Yb(m,"height");o!==void 0&&(m.height=o)}return m}const av=R2?{passive:!0}:!1;function D_(m,a,t){m&&m.addEventListener(a,t,av)}function B_(m,a,t){m&&m.canvas&&m.canvas.removeEventListener(a,t,av)}function z_(m,a){const t=L_[m.type]||m.type,{x:s,y:u}=qd(m,a);return{type:t,chart:a,native:m,x:s!==void 0?s:null,y:u!==void 0?u:null}}function U0(m,a){for(const t of m)if(t===a||t.contains(a))return!0}function F_(m,a,t){const s=m.canvas,u=new MutationObserver(o=>{let r=!1;for(const c of o)r=r||U0(c.addedNodes,s),r=r&&!U0(c.removedNodes,s);r&&t()});return u.observe(document,{childList:!0,subtree:!0}),u}function U_(m,a,t){const s=m.canvas,u=new MutationObserver(o=>{let r=!1;for(const c of o)r=r||U0(c.removedNodes,s),r=r&&!U0(c.addedNodes,s);r&&t()});return u.observe(document,{childList:!0,subtree:!0}),u}const vm=new Map;let py=0;function lv(){const m=window.devicePixelRatio;m!==py&&(py=m,vm.forEach((a,t)=>{t.currentDevicePixelRatio!==m&&a()}))}function H_(m,a){vm.size||window.addEventListener("resize",lv),vm.set(m,a)}function V_(m){vm.delete(m),vm.size||window.removeEventListener("resize",lv)}function $_(m,a,t){const s=m.canvas,u=s&&pb(s);if(!u)return;const o=P1((c,l)=>{const n=u.clientWidth;t(c,l),n<u.clientWidth&&t()},window),r=new ResizeObserver(c=>{const l=c[0],n=l.contentRect.width,f=l.contentRect.height;n===0&&f===0||o(n,f)});return r.observe(u),H_(m,o),r}function Ig(m,a,t){t&&t.disconnect(),a==="resize"&&V_(m)}function W_(m,a,t){const s=m.canvas,u=P1(o=>{m.ctx!==null&&t(z_(o,m))},m);return D_(s,a,u),u}class q_ extends ov{acquireContext(a,t){const s=a&&a.getContext&&a.getContext("2d");return s&&s.canvas===a?(P_(a,t),s):null}releaseContext(a){const t=a.canvas;if(!t[I0])return!1;const s=t[I0].initial;["height","width"].forEach(o=>{const r=s[o];ar(r)?t.removeAttribute(o):t.setAttribute(o,r)});const u=s.style||{};return Object.keys(u).forEach(o=>{t.style[o]=u[o]}),t.width=t.width,delete t[I0],!0}addEventListener(a,t,s){this.removeEventListener(a,t);const u=a.$proxies||(a.$proxies={}),r={attach:F_,detach:U_,resize:$_}[t]||W_;u[t]=r(a,t,s)}removeEventListener(a,t){const s=a.$proxies||(a.$proxies={}),u=s[t];if(!u)return;({attach:Ig,detach:Ig,resize:Ig}[t]||B_)(a,t,u),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(a,t,s,u){return A2(a,t,s,u)}isAttached(a){const t=a&&pb(a);return!!(t&&t.isConnected)}}function G_(m){return!hb()||typeof OffscreenCanvas<"u"&&m instanceof OffscreenCanvas?j_:q_}let Pu=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(a){const{x:t,y:s}=this.getProps(["x","y"],a);return{x:t,y:s}}hasValue(){return Yh(this.x)&&Yh(this.y)}getProps(a,t){const s=this.$animations;if(!t||!s)return this;const u={};return a.forEach(o=>{u[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),u}};function Z_(m,a){const t=m.options.ticks,s=X_(m),u=Math.min(t.maxTicksLimit||s,s),o=t.major.enabled?K_(a):[],r=o.length,c=o[0],l=o[r-1],n=[];if(r>u)return Q_(a,n,o,r/u),n;const f=Y_(o,a,u);if(r>0){let h,p;const g=r>1?Math.round((l-c)/(r-1)):null;for(v0(a,n,f,ar(g)?0:c-g,c),h=0,p=r-1;h<p;h++)v0(a,n,f,o[h],o[h+1]);return v0(a,n,f,l,ar(g)?a.length:l+g),n}return v0(a,n,f),n}function X_(m){const a=m.options.offset,t=m._tickSize(),s=m._length/t+(a?0:1),u=m._maxLength/t;return Math.floor(Math.min(s,u))}function Y_(m,a,t){const s=J_(m),u=a.length/t;if(!s)return Math.max(u,1);const o=Ox(s);for(let r=0,c=o.length-1;r<c;r++){const l=o[r];if(l>u)return l}return Math.max(u,1)}function K_(m){const a=[];let t,s;for(t=0,s=m.length;t<s;t++)m[t].major&&a.push(t);return a}function Q_(m,a,t,s){let u=0,o=t[0],r;for(s=Math.ceil(s),r=0;r<m.length;r++)r===o&&(a.push(m[r]),u++,o=t[u*s])}function v0(m,a,t,s,u){const o=tr(s,0),r=Math.min(tr(u,m.length),m.length);let c=0,l,n,f;for(t=Math.ceil(t),u&&(l=u-s,t=l/Math.floor(l/t)),f=o;f<0;)c++,f=Math.round(o+c*t);for(n=Math.max(o,0);n<r;n++)n===f&&(a.push(m[n]),c++,f=Math.round(o+c*t))}function J_(m){const a=m.length;let t,s;if(a<2)return!1;for(s=m[0],t=1;t<a;++t)if(m[t]-m[t-1]!==s)return!1;return s}const tw=m=>m==="left"?"right":m==="right"?"left":m,my=(m,a,t)=>a==="top"||a==="left"?m[a]+t:m[a]-t,gy=(m,a)=>Math.min(a||m,m);function by(m,a){const t=[],s=m.length/a,u=m.length;let o=0;for(;o<u;o+=s)t.push(m[Math.floor(o)]);return t}function ew(m,a,t){const s=m.ticks.length,u=Math.min(a,s-1),o=m._startPixel,r=m._endPixel,c=1e-6;let l=m.getPixelForTick(u),n;if(!(t&&(s===1?n=Math.max(l-o,r-l):a===0?n=(m.getPixelForTick(1)-l)/2:n=(l-m.getPixelForTick(u-1))/2,l+=u<a?n:-n,l<o-c||l>r+c)))return l}function nw(m,a){Zr(m,t=>{const s=t.gc,u=s.length/2;let o;if(u>a){for(o=0;o<u;++o)delete t.data[s[o]];s.splice(0,u)}})}function tm(m){return m.drawTicks?m.tickLength:0}function yy(m,a){if(!m.display)return 0;const t=hs(m.font,a),s=so(m.padding);return(gi(m.text)?m.text.length:1)*t.lineHeight+s.height}function rw(m,a){return Zf(m,{scale:a,type:"scale"})}function iw(m,a,t){return Zf(m,{tick:t,index:a,type:"tick"})}function sw(m,a,t){let s=ab(m);return(t&&a!=="right"||!t&&a==="right")&&(s=tw(s)),s}function ow(m,a,t,s){const{top:u,left:o,bottom:r,right:c,chart:l}=m,{chartArea:n,scales:f}=l;let h=0,p,g,v;const x=r-u,y=c-o;if(m.isHorizontal()){if(g=bo(s,o,c),Sr(t)){const w=Object.keys(t)[0],S=t[w];v=f[w].getPixelForValue(S)+x-a}else t==="center"?v=(n.bottom+n.top)/2+x-a:v=my(m,t,a);p=c-o}else{if(Sr(t)){const w=Object.keys(t)[0],S=t[w];g=f[w].getPixelForValue(S)-y+a}else t==="center"?g=(n.left+n.right)/2-y+a:g=my(m,t,a);v=bo(s,r,u),h=t==="left"?-es:es}return{titleX:g,titleY:v,maxWidth:p,rotation:h}}class Qd extends Pu{constructor(a){super(),this.id=a.id,this.type=a.type,this.options=void 0,this.ctx=a.ctx,this.chart=a.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(a){this.options=a.setContext(this.getContext()),this.axis=a.axis,this._userMin=this.parse(a.min),this._userMax=this.parse(a.max),this._suggestedMin=this.parse(a.suggestedMin),this._suggestedMax=this.parse(a.suggestedMax)}parse(a,t){return a}getUserBounds(){let{_userMin:a,_userMax:t,_suggestedMin:s,_suggestedMax:u}=this;return a=ja(a,Number.POSITIVE_INFINITY),t=ja(t,Number.NEGATIVE_INFINITY),s=ja(s,Number.POSITIVE_INFINITY),u=ja(u,Number.NEGATIVE_INFINITY),{min:ja(a,s),max:ja(t,u),minDefined:Di(a),maxDefined:Di(t)}}getMinMax(a){let{min:t,max:s,minDefined:u,maxDefined:o}=this.getUserBounds(),r;if(u&&o)return{min:t,max:s};const c=this.getMatchingVisibleMetas();for(let l=0,n=c.length;l<n;++l)r=c[l].controller.getMinMax(this,a),u||(t=Math.min(t,r.min)),o||(s=Math.max(s,r.max));return t=o&&t>s?s:t,s=u&&t>s?t:s,{min:ja(t,ja(s,t)),max:ja(s,ja(t,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const a=this.chart.data;return this.options.labels||(this.isHorizontal()?a.xLabels:a.yLabels)||a.labels||[]}getLabelItems(a=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(a))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ii(this.options.beforeUpdate,[this])}update(a,t,s){const{beginAtZero:u,grace:o,ticks:r}=this.options,c=r.sampleSize;this.beforeUpdate(),this.maxWidth=a,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=l2(this,o,u),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=c<this.ticks.length;this._convertTicksToLabels(l?by(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=Z_(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let a=this.options.reverse,t,s;this.isHorizontal()?(t=this.left,s=this.right):(t=this.top,s=this.bottom,a=!a),this._startPixel=t,this._endPixel=s,this._reversePixels=a,this._length=s-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ii(this.options.afterUpdate,[this])}beforeSetDimensions(){ii(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ii(this.options.afterSetDimensions,[this])}_callHooks(a){this.chart.notifyPlugins(a,this.getContext()),ii(this.options[a],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ii(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(a){const t=this.options.ticks;let s,u,o;for(s=0,u=a.length;s<u;s++)o=a[s],o.label=ii(t.callback,[o.value,s,a],this)}afterTickToLabelConversion(){ii(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ii(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const a=this.options,t=a.ticks,s=gy(this.ticks.length,a.ticks.maxTicksLimit),u=t.minRotation||0,o=t.maxRotation;let r=u,c,l,n;if(!this._isVisible()||!t.display||u>=o||s<=1||!this.isHorizontal()){this.labelRotation=u;return}const f=this._getLabelSizes(),h=f.widest.width,p=f.highest.height,g=Hs(this.chart.width-h,0,this.maxWidth);c=a.offset?this.maxWidth/s:g/(s-1),h+6>c&&(c=g/(s-(a.offset?.5:1)),l=this.maxHeight-tm(a.grid)-t.padding-yy(a.title,this.chart.options.font),n=Math.sqrt(h*h+p*p),r=sb(Math.min(Math.asin(Hs((f.highest.height+6)/c,-1,1)),Math.asin(Hs(l/n,-1,1))-Math.asin(Hs(p/n,-1,1)))),r=Math.max(u,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){ii(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ii(this.options.beforeFit,[this])}fit(){const a={width:0,height:0},{chart:t,options:{ticks:s,title:u,grid:o}}=this,r=this._isVisible(),c=this.isHorizontal();if(r){const l=yy(u,t.options.font);if(c?(a.width=this.maxWidth,a.height=tm(o)+l):(a.height=this.maxHeight,a.width=tm(o)+l),s.display&&this.ticks.length){const{first:n,last:f,widest:h,highest:p}=this._getLabelSizes(),g=s.padding*2,v=Gl(this.labelRotation),x=Math.cos(v),y=Math.sin(v);if(c){const w=s.mirror?0:y*h.width+x*p.height;a.height=Math.min(this.maxHeight,a.height+w+g)}else{const w=s.mirror?0:x*h.width+y*p.height;a.width=Math.min(this.maxWidth,a.width+w+g)}this._calculatePadding(n,f,y,x)}}this._handleMargins(),c?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=a.height):(this.width=a.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(a,t,s,u){const{ticks:{align:o,padding:r},position:c}=this.options,l=this.labelRotation!==0,n=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;l?n?(p=u*a.width,g=s*t.height):(p=s*a.height,g=u*t.width):o==="start"?g=t.width:o==="end"?p=a.width:o!=="inner"&&(p=a.width/2,g=t.width/2),this.paddingLeft=Math.max((p-f+r)*this.width/(this.width-f),0),this.paddingRight=Math.max((g-h+r)*this.width/(this.width-h),0)}else{let f=t.height/2,h=a.height/2;o==="start"?(f=0,h=a.height):o==="end"&&(f=t.height,h=0),this.paddingTop=f+r,this.paddingBottom=h+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ii(this.options.afterFit,[this])}isHorizontal(){const{axis:a,position:t}=this.options;return t==="top"||t==="bottom"||a==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(a){this.beforeTickToLabelConversion(),this.generateTickLabels(a);let t,s;for(t=0,s=a.length;t<s;t++)ar(a[t].label)&&(a.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let a=this._labelSizes;if(!a){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=by(s,t)),this._labelSizes=a=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return a}_computeLabelSizes(a,t,s){const{ctx:u,_longestTextCache:o}=this,r=[],c=[],l=Math.floor(t/gy(t,s));let n=0,f=0,h,p,g,v,x,y,w,S,E,I,D;for(h=0;h<t;h+=l){if(v=a[h].label,x=this._resolveTickFontOptions(h),u.font=y=x.string,w=o[y]=o[y]||{data:{},gc:[]},S=x.lineHeight,E=I=0,!ar(v)&&!gi(v))E=z0(u,w.data,w.gc,E,v),I=S;else if(gi(v))for(p=0,g=v.length;p<g;++p)D=v[p],!ar(D)&&!gi(D)&&(E=z0(u,w.data,w.gc,E,D),I+=S);r.push(E),c.push(I),n=Math.max(E,n),f=Math.max(I,f)}nw(o,t);const Z=r.indexOf(n),K=c.indexOf(f),z=W=>({width:r[W]||0,height:c[W]||0});return{first:z(0),last:z(t-1),widest:z(Z),highest:z(K),widths:r,heights:c}}getLabelForValue(a){return a}getPixelForValue(a,t){return NaN}getValueForPixel(a){}getPixelForTick(a){const t=this.ticks;return a<0||a>t.length-1?null:this.getPixelForValue(t[a].value)}getPixelForDecimal(a){this._reversePixels&&(a=1-a);const t=this._startPixel+a*this._length;return Dx(this._alignToPixels?Vd(this.chart,t,0):t)}getDecimalForPixel(a){const t=(a-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:a,max:t}=this;return a<0&&t<0?t:a>0&&t>0?a:0}getContext(a){const t=this.ticks||[];if(a>=0&&a<t.length){const s=t[a];return s.$context||(s.$context=iw(this.getContext(),a,s))}return this.$context||(this.$context=rw(this.chart.getContext(),this))}_tickSize(){const a=this.options.ticks,t=Gl(this.labelRotation),s=Math.abs(Math.cos(t)),u=Math.abs(Math.sin(t)),o=this._getLabelSizes(),r=a.autoSkipPadding||0,c=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*s>c*u?c/s:l/u:l*u<c*s?l/s:c/u}_isVisible(){const a=this.options.display;return a!=="auto"?!!a:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(a){const t=this.axis,s=this.chart,u=this.options,{grid:o,position:r,border:c}=u,l=o.offset,n=this.isHorizontal(),h=this.ticks.length+(l?1:0),p=tm(o),g=[],v=c.setContext(this.getContext()),x=v.display?v.width:0,y=x/2,w=function(T){return Vd(s,T,x)};let S,E,I,D,Z,K,z,W,Q,rt,tt,j;if(r==="top")S=w(this.bottom),K=this.bottom-p,W=S-y,rt=w(a.top)+y,j=a.bottom;else if(r==="bottom")S=w(this.top),rt=a.top,j=w(a.bottom)-y,K=S+y,W=this.top+p;else if(r==="left")S=w(this.right),Z=this.right-p,z=S-y,Q=w(a.left)+y,tt=a.right;else if(r==="right")S=w(this.left),Q=a.left,tt=w(a.right)-y,Z=S+y,z=this.left+p;else if(t==="x"){if(r==="center")S=w((a.top+a.bottom)/2+.5);else if(Sr(r)){const T=Object.keys(r)[0],C=r[T];S=w(this.chart.scales[T].getPixelForValue(C))}rt=a.top,j=a.bottom,K=S+y,W=K+p}else if(t==="y"){if(r==="center")S=w((a.left+a.right)/2);else if(Sr(r)){const T=Object.keys(r)[0],C=r[T];S=w(this.chart.scales[T].getPixelForValue(C))}Z=S-y,z=Z-p,Q=a.left,tt=a.right}const F=tr(u.ticks.maxTicksLimit,h),R=Math.max(1,Math.ceil(h/F));for(E=0;E<h;E+=R){const T=this.getContext(E),C=o.setContext(T),k=c.setContext(T),M=C.lineWidth,O=C.color,P=k.dash||[],H=k.dashOffset,et=C.tickWidth,it=C.tickColor,pt=C.tickBorderDash||[],X=C.tickBorderDashOffset;I=ew(this,E,l),I!==void 0&&(D=Vd(s,I,M),n?Z=z=Q=tt=D:K=W=rt=j=D,g.push({tx1:Z,ty1:K,tx2:z,ty2:W,x1:Q,y1:rt,x2:tt,y2:j,width:M,color:O,borderDash:P,borderDashOffset:H,tickWidth:et,tickColor:it,tickBorderDash:pt,tickBorderDashOffset:X}))}return this._ticksLength=h,this._borderValue=S,g}_computeLabelItems(a){const t=this.axis,s=this.options,{position:u,ticks:o}=s,r=this.isHorizontal(),c=this.ticks,{align:l,crossAlign:n,padding:f,mirror:h}=o,p=tm(s.grid),g=p+f,v=h?-f:g,x=-Gl(this.labelRotation),y=[];let w,S,E,I,D,Z,K,z,W,Q,rt,tt,j="middle";if(u==="top")Z=this.bottom-v,K=this._getXAxisLabelAlignment();else if(u==="bottom")Z=this.top+v,K=this._getXAxisLabelAlignment();else if(u==="left"){const R=this._getYAxisLabelAlignment(p);K=R.textAlign,D=R.x}else if(u==="right"){const R=this._getYAxisLabelAlignment(p);K=R.textAlign,D=R.x}else if(t==="x"){if(u==="center")Z=(a.top+a.bottom)/2+g;else if(Sr(u)){const R=Object.keys(u)[0],T=u[R];Z=this.chart.scales[R].getPixelForValue(T)+g}K=this._getXAxisLabelAlignment()}else if(t==="y"){if(u==="center")D=(a.left+a.right)/2-g;else if(Sr(u)){const R=Object.keys(u)[0],T=u[R];D=this.chart.scales[R].getPixelForValue(T)}K=this._getYAxisLabelAlignment(p).textAlign}t==="y"&&(l==="start"?j="top":l==="end"&&(j="bottom"));const F=this._getLabelSizes();for(w=0,S=c.length;w<S;++w){E=c[w],I=E.label;const R=o.setContext(this.getContext(w));z=this.getPixelForTick(w)+o.labelOffset,W=this._resolveTickFontOptions(w),Q=W.lineHeight,rt=gi(I)?I.length:1;const T=rt/2,C=R.color,k=R.textStrokeColor,M=R.textStrokeWidth;let O=K;r?(D=z,K==="inner"&&(w===S-1?O=this.options.reverse?"left":"right":w===0?O=this.options.reverse?"right":"left":O="center"),u==="top"?n==="near"||x!==0?tt=-rt*Q+Q/2:n==="center"?tt=-F.highest.height/2-T*Q+Q:tt=-F.highest.height+Q/2:n==="near"||x!==0?tt=Q/2:n==="center"?tt=F.highest.height/2-T*Q:tt=F.highest.height-rt*Q,h&&(tt*=-1),x!==0&&!R.showLabelBackdrop&&(D+=Q/2*Math.sin(x))):(Z=z,tt=(1-rt)*Q/2);let P;if(R.showLabelBackdrop){const H=so(R.backdropPadding),et=F.heights[w],it=F.widths[w];let pt=tt-H.top,X=0-H.left;switch(j){case"middle":pt-=et/2;break;case"bottom":pt-=et;break}switch(K){case"center":X-=it/2;break;case"right":X-=it;break;case"inner":w===S-1?X-=it:w>0&&(X-=it/2);break}P={left:X,top:pt,width:it+H.width,height:et+H.height,color:R.backdropColor}}y.push({label:I,font:W,textOffset:tt,options:{rotation:x,color:C,strokeColor:k,strokeWidth:M,textAlign:O,textBaseline:j,translation:[D,Z],backdrop:P}})}return y}_getXAxisLabelAlignment(){const{position:a,ticks:t}=this.options;if(-Gl(this.labelRotation))return a==="top"?"left":"right";let u="center";return t.align==="start"?u="left":t.align==="end"?u="right":t.align==="inner"&&(u="inner"),u}_getYAxisLabelAlignment(a){const{position:t,ticks:{crossAlign:s,mirror:u,padding:o}}=this.options,r=this._getLabelSizes(),c=a+o,l=r.widest.width;let n,f;return t==="left"?u?(f=this.right+o,s==="near"?n="left":s==="center"?(n="center",f+=l/2):(n="right",f+=l)):(f=this.right-c,s==="near"?n="right":s==="center"?(n="center",f-=l/2):(n="left",f=this.left)):t==="right"?u?(f=this.left+o,s==="near"?n="right":s==="center"?(n="center",f-=l/2):(n="left",f-=l)):(f=this.left+c,s==="near"?n="left":s==="center"?(n="center",f+=l/2):(n="right",f=this.right)):n="right",{textAlign:n,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const a=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:a.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:a.width}}drawBackground(){const{ctx:a,options:{backgroundColor:t},left:s,top:u,width:o,height:r}=this;t&&(a.save(),a.fillStyle=t,a.fillRect(s,u,o,r),a.restore())}getLineWidthForValue(a){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const u=this.ticks.findIndex(o=>o.value===a);return u>=0?t.setContext(this.getContext(u)).lineWidth:0}drawGrid(a){const t=this.options.grid,s=this.ctx,u=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(a));let o,r;const c=(l,n,f)=>{!f.width||!f.color||(s.save(),s.lineWidth=f.width,s.strokeStyle=f.color,s.setLineDash(f.borderDash||[]),s.lineDashOffset=f.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(n.x,n.y),s.stroke(),s.restore())};if(t.display)for(o=0,r=u.length;o<r;++o){const l=u[o];t.drawOnChartArea&&c({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&c({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:a,ctx:t,options:{border:s,grid:u}}=this,o=s.setContext(this.getContext()),r=s.display?o.width:0;if(!r)return;const c=u.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let n,f,h,p;this.isHorizontal()?(n=Vd(a,this.left,r)-r/2,f=Vd(a,this.right,c)+c/2,h=p=l):(h=Vd(a,this.top,r)-r/2,p=Vd(a,this.bottom,c)+c/2,n=f=l),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(n,h),t.lineTo(f,p),t.stroke(),t.restore()}drawLabels(a){if(!this.options.ticks.display)return;const s=this.ctx,u=this._computeLabelArea();u&&q0(s,u);const o=this.getLabelItems(a);for(const r of o){const c=r.options,l=r.font,n=r.label,f=r.textOffset;Kd(s,n,0,f,l,c)}u&&G0(s)}drawTitle(){const{ctx:a,options:{position:t,title:s,reverse:u}}=this;if(!s.display)return;const o=hs(s.font),r=so(s.padding),c=s.align;let l=o.lineHeight/2;t==="bottom"||t==="center"||Sr(t)?(l+=r.bottom,gi(s.text)&&(l+=o.lineHeight*(s.text.length-1))):l+=r.top;const{titleX:n,titleY:f,maxWidth:h,rotation:p}=ow(this,l,t,c);Kd(a,s.text,0,0,o,{color:s.color,maxWidth:h,rotation:p,textAlign:sw(c,t,u),textBaseline:"middle",translation:[n,f]})}draw(a){this._isVisible()&&(this.drawBackground(),this.drawGrid(a),this.drawBorder(),this.drawTitle(),this.drawLabels(a))}_layers(){const a=this.options,t=a.ticks&&a.ticks.z||0,s=tr(a.grid&&a.grid.z,-1),u=tr(a.border&&a.border.z,0);return!this._isVisible()||this.draw!==Qd.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:u,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(a){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",u=[];let o,r;for(o=0,r=t.length;o<r;++o){const c=t[o];c[s]===this.id&&(!a||c.type===a)&&u.push(c)}return u}_resolveTickFontOptions(a){const t=this.options.ticks.setContext(this.getContext(a));return hs(t.font)}_maxDigits(){const a=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/a}}class x0{constructor(a,t,s){this.type=a,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(a){return Object.prototype.isPrototypeOf.call(this.type.prototype,a.prototype)}register(a){const t=Object.getPrototypeOf(a);let s;cw(t)&&(s=this.register(t));const u=this.items,o=a.id,r=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+a);return o in u||(u[o]=a,aw(a,r,s),this.override&&yi.override(a.id,a.overrides)),r}get(a){return this.items[a]}unregister(a){const t=this.items,s=a.id,u=this.scope;s in t&&delete t[s],u&&s in yi[u]&&(delete yi[u][s],this.override&&delete Yd[s])}}function aw(m,a,t){const s=Dc(Object.create(null),[t?yi.get(t):{},yi.get(a),m.defaults]);yi.set(a,s),m.defaultRoutes&&lw(a,m.defaultRoutes),m.descriptors&&yi.describe(a,m.descriptors)}function lw(m,a){Object.keys(a).forEach(t=>{const s=t.split("."),u=s.pop(),o=[m].concat(s).join("."),r=a[t].split("."),c=r.pop(),l=r.join(".");yi.route(o,u,l,c)})}function cw(m){return"id"in m&&"defaults"in m}class uw{constructor(){this.controllers=new x0(Xf,"datasets",!0),this.elements=new x0(Pu,"elements"),this.plugins=new x0(Object,"plugins"),this.scales=new x0(Qd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...a){this._each("register",a)}remove(...a){this._each("unregister",a)}addControllers(...a){this._each("register",a,this.controllers)}addElements(...a){this._each("register",a,this.elements)}addPlugins(...a){this._each("register",a,this.plugins)}addScales(...a){this._each("register",a,this.scales)}getController(a){return this._get(a,this.controllers,"controller")}getElement(a){return this._get(a,this.elements,"element")}getPlugin(a){return this._get(a,this.plugins,"plugin")}getScale(a){return this._get(a,this.scales,"scale")}removeControllers(...a){this._each("unregister",a,this.controllers)}removeElements(...a){this._each("unregister",a,this.elements)}removePlugins(...a){this._each("unregister",a,this.plugins)}removeScales(...a){this._each("unregister",a,this.scales)}_each(a,t,s){[...t].forEach(u=>{const o=s||this._getRegistryForType(u);s||o.isForType(u)||o===this.plugins&&u.id?this._exec(a,o,u):Zr(u,r=>{const c=s||this._getRegistryForType(r);this._exec(a,c,r)})})}_exec(a,t,s){const u=ib(a);ii(s["before"+u],[],s),t[a](s),ii(s["after"+u],[],s)}_getRegistryForType(a){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(a))return s}return this.plugins}_get(a,t,s){const u=t.get(a);if(u===void 0)throw new Error('"'+a+'" is not a registered '+s+".");return u}}var Lc=new uw;class fw{constructor(){this._init=void 0}notify(a,t,s,u){if(t==="beforeInit"&&(this._init=this._createDescriptors(a,!0),this._notify(this._init,a,"install")),this._init===void 0)return;const o=u?this._descriptors(a).filter(u):this._descriptors(a),r=this._notify(o,a,t,s);return t==="afterDestroy"&&(this._notify(o,a,"stop"),this._notify(this._init,a,"uninstall"),this._init=void 0),r}_notify(a,t,s,u){u=u||{};for(const o of a){const r=o.plugin,c=r[s],l=[t,u,o.options];if(ii(c,l,r)===!1&&u.cancelable)return!1}return!0}invalidate(){ar(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(a){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(a);return this._notifyStateChanges(a),t}_createDescriptors(a,t){const s=a&&a.config,u=tr(s.options&&s.options.plugins,{}),o=dw(s);return u===!1&&!t?[]:pw(a,o,u,t)}_notifyStateChanges(a){const t=this._oldCache||[],s=this._cache,u=(o,r)=>o.filter(c=>!r.some(l=>c.plugin.id===l.plugin.id));this._notify(u(t,s),a,"stop"),this._notify(u(s,t),a,"start")}}function dw(m){const a={},t=[],s=Object.keys(Lc.plugins.items);for(let o=0;o<s.length;o++)t.push(Lc.getPlugin(s[o]));const u=m.plugins||[];for(let o=0;o<u.length;o++){const r=u[o];t.indexOf(r)===-1&&(t.push(r),a[r.id]=!0)}return{plugins:t,localIds:a}}function hw(m,a){return!a&&m===!1?null:m===!0?{}:m}function pw(m,{plugins:a,localIds:t},s,u){const o=[],r=m.getContext();for(const c of a){const l=c.id,n=hw(s[l],u);n!==null&&o.push({plugin:c,options:mw(m.config,{plugin:c,local:t[l]},n,r)})}return o}function mw(m,{plugin:a,local:t},s,u){const o=m.pluginScopeKeys(a),r=m.getOptionScopes(s,o);return t&&a.defaults&&r.push(a.defaults),m.createResolver(r,u,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wg(m,a){const t=yi.datasets[m]||{};return((a.datasets||{})[m]||{}).indexAxis||a.indexAxis||t.indexAxis||"x"}function gw(m,a){let t=m;return m==="_index_"?t=a:m==="_value_"&&(t=a==="x"?"y":"x"),t}function bw(m,a){return m===a?"_index_":"_value_"}function vy(m){if(m==="x"||m==="y"||m==="r")return m}function yw(m){if(m==="top"||m==="bottom")return"x";if(m==="left"||m==="right")return"y"}function qg(m,...a){if(vy(m))return m;for(const t of a){const s=t.axis||yw(t.position)||m.length>1&&vy(m[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${m}' axis. Please provide 'axis' or 'position' option.`)}function xy(m,a,t){if(t[a+"AxisID"]===m)return{axis:a}}function vw(m,a){if(a.data&&a.data.datasets){const t=a.data.datasets.filter(s=>s.xAxisID===m||s.yAxisID===m);if(t.length)return xy(m,"x",t[0])||xy(m,"y",t[0])}return{}}function xw(m,a){const t=Yd[m.type]||{scales:{}},s=a.scales||{},u=Wg(m.type,a),o=Object.create(null);return Object.keys(s).forEach(r=>{const c=s[r];if(!Sr(c))return console.error(`Invalid scale configuration for scale: ${r}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=qg(r,c,vw(r,m),yi.scales[c.type]),n=bw(l,u),f=t.scales||{};o[r]=cm(Object.create(null),[{axis:l},c,f[l],f[n]])}),m.data.datasets.forEach(r=>{const c=r.type||m.type,l=r.indexAxis||Wg(c,a),f=(Yd[c]||{}).scales||{};Object.keys(f).forEach(h=>{const p=gw(h,l),g=r[p+"AxisID"]||p;o[g]=o[g]||Object.create(null),cm(o[g],[{axis:p},s[g],f[h]])})}),Object.keys(o).forEach(r=>{const c=o[r];cm(c,[yi.scales[c.type],yi.scale])}),o}function cv(m){const a=m.options||(m.options={});a.plugins=tr(a.plugins,{}),a.scales=xw(m,a)}function uv(m){return m=m||{},m.datasets=m.datasets||[],m.labels=m.labels||[],m}function _w(m){return m=m||{},m.data=uv(m.data),cv(m),m}const _y=new Map,fv=new Set;function _0(m,a){let t=_y.get(m);return t||(t=a(),_y.set(m,t),fv.add(t)),t}const em=(m,a,t)=>{const s=Wf(a,t);s!==void 0&&m.add(s)};class ww{constructor(a){this._config=_w(a),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(a){this._config.type=a}get data(){return this._config.data}set data(a){this._config.data=uv(a)}get options(){return this._config.options}set options(a){this._config.options=a}get plugins(){return this._config.plugins}update(){const a=this._config;this.clearCache(),cv(a)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(a){return _0(a,()=>[[`datasets.${a}`,""]])}datasetAnimationScopeKeys(a,t){return _0(`${a}.transition.${t}`,()=>[[`datasets.${a}.transitions.${t}`,`transitions.${t}`],[`datasets.${a}`,""]])}datasetElementScopeKeys(a,t){return _0(`${a}-${t}`,()=>[[`datasets.${a}.elements.${t}`,`datasets.${a}`,`elements.${t}`,""]])}pluginScopeKeys(a){const t=a.id,s=this.type;return _0(`${s}-plugin-${t}`,()=>[[`plugins.${t}`,...a.additionalOptionScopes||[]]])}_cachedScopes(a,t){const s=this._scopeCache;let u=s.get(a);return(!u||t)&&(u=new Map,s.set(a,u)),u}getOptionScopes(a,t,s){const{options:u,type:o}=this,r=this._cachedScopes(a,s),c=r.get(t);if(c)return c;const l=new Set;t.forEach(f=>{a&&(l.add(a),f.forEach(h=>em(l,a,h))),f.forEach(h=>em(l,u,h)),f.forEach(h=>em(l,Yd[o]||{},h)),f.forEach(h=>em(l,yi,h)),f.forEach(h=>em(l,Vg,h))});const n=Array.from(l);return n.length===0&&n.push(Object.create(null)),fv.has(t)&&r.set(t,n),n}chartOptionScopes(){const{options:a,type:t}=this;return[a,Yd[t]||{},yi.datasets[t]||{},{type:t},yi,Vg]}resolveNamedOptions(a,t,s,u=[""]){const o={$shared:!0},{resolver:r,subPrefixes:c}=wy(this._resolverCache,a,u);let l=r;if(Tw(r,t)){o.$shared=!1,s=qf(s)?s():s;const n=this.createResolver(a,s,c);l=Kh(r,s,n)}for(const n of t)o[n]=l[n];return o}createResolver(a,t,s=[""],u){const{resolver:o}=wy(this._resolverCache,a,s);return Sr(t)?Kh(o,t,void 0,u):o}}function wy(m,a,t){let s=m.get(a);s||(s=new Map,m.set(a,s));const u=t.join();let o=s.get(u);return o||(o={resolver:ub(a,t),subPrefixes:t.filter(c=>!c.toLowerCase().includes("hover"))},s.set(u,o)),o}const Sw=m=>Sr(m)&&Object.getOwnPropertyNames(m).some(a=>qf(m[a]));function Tw(m,a){const{isScriptable:t,isIndexable:s}=H1(m);for(const u of a){const o=t(u),r=s(u),c=(r||o)&&m[u];if(o&&(qf(c)||Sw(c))||r&&gi(c))return!0}return!1}var Cw="4.5.1";const kw=["top","bottom","left","right","chartArea"];function Sy(m,a){return m==="top"||m==="bottom"||kw.indexOf(m)===-1&&a==="x"}function Ty(m,a){return function(t,s){return t[m]===s[m]?t[a]-s[a]:t[m]-s[m]}}function Cy(m){const a=m.chart,t=a.options.animation;a.notifyPlugins("afterRender"),ii(t&&t.onComplete,[m],a)}function Mw(m){const a=m.chart,t=a.options.animation;ii(t&&t.onProgress,[m],a)}function dv(m){return hb()&&typeof m=="string"?m=document.getElementById(m):m&&m.length&&(m=m[0]),m&&m.canvas&&(m=m.canvas),m}const O0={},ky=m=>{const a=dv(m);return Object.values(O0).filter(t=>t.canvas===a).pop()};function Ew(m,a,t){const s=Object.keys(m);for(const u of s){const o=+u;if(o>=a){const r=m[u];delete m[u],(t>0||o>a)&&(m[o+t]=r)}}}function Nw(m,a,t,s){return!t||m.type==="mouseout"?null:s?a:m}class Y0{static defaults=yi;static instances=O0;static overrides=Yd;static registry=Lc;static version=Cw;static getChart=ky;static register(...a){Lc.add(...a),My()}static unregister(...a){Lc.remove(...a),My()}constructor(a,t){const s=this.config=new ww(t),u=dv(a),o=ky(u);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const r=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||G_(u)),this.platform.updateConfig(s);const c=this.platform.acquireContext(u,r.aspectRatio),l=c&&c.canvas,n=l&&l.height,f=l&&l.width;if(this.id=Tx(),this.ctx=c,this.canvas=l,this.width=f,this.height=n,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new fw,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ux(h=>this.update(h),r.resizeDelay||0),this._dataChanges=[],O0[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Nu.listen(this,"complete",Cy),Nu.listen(this,"progress",Mw),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:a,maintainAspectRatio:t},width:s,height:u,_aspectRatio:o}=this;return ar(a)?t&&o?o:u?s/u:null:a}get data(){return this.config.data}set data(a){this.config.data=a}get options(){return this._options}set options(a){this.config.options=a}get registry(){return Lc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Xb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return qb(this.canvas,this.ctx),this}stop(){return Nu.stop(this),this}resize(a,t){Nu.running(this)?this._resizeBeforeDraw={width:a,height:t}:this._resize(a,t)}_resize(a,t){const s=this.options,u=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(u,a,t,o),c=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,Xb(this,c,!0)&&(this.notifyPlugins("resize",{size:r}),ii(s.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Zr(t,(s,u)=>{s.id=u})}buildOrUpdateScales(){const a=this.options,t=a.scales,s=this.scales,u=Object.keys(s).reduce((r,c)=>(r[c]=!1,r),{});let o=[];t&&(o=o.concat(Object.keys(t).map(r=>{const c=t[r],l=qg(r,c),n=l==="r",f=l==="x";return{options:c,dposition:n?"chartArea":f?"bottom":"left",dtype:n?"radialLinear":f?"category":"linear"}}))),Zr(o,r=>{const c=r.options,l=c.id,n=qg(l,c),f=tr(c.type,r.dtype);(c.position===void 0||Sy(c.position,n)!==Sy(r.dposition))&&(c.position=r.dposition),u[l]=!0;let h=null;if(l in s&&s[l].type===f)h=s[l];else{const p=Lc.getScale(f);h=new p({id:l,type:f,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(c,a)}),Zr(u,(r,c)=>{r||delete s[c]}),Zr(s,r=>{vo.configure(this,r,r.options),vo.addBox(this,r)})}_updateMetasets(){const a=this._metasets,t=this.data.datasets.length,s=a.length;if(a.sort((u,o)=>u.index-o.index),s>t){for(let u=t;u<s;++u)this._destroyDatasetMeta(u);a.splice(t,s-t)}this._sortedMetasets=a.slice(0).sort(Ty("order","index"))}_removeUnreferencedMetasets(){const{_metasets:a,data:{datasets:t}}=this;a.length>t.length&&delete this._stacks,a.forEach((s,u)=>{t.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(u)})}buildOrUpdateControllers(){const a=[],t=this.data.datasets;let s,u;for(this._removeUnreferencedMetasets(),s=0,u=t.length;s<u;s++){const o=t[s];let r=this.getDatasetMeta(s);const c=o.type||this.config.type;if(r.type&&r.type!==c&&(this._destroyDatasetMeta(s),r=this.getDatasetMeta(s)),r.type=c,r.indexAxis=o.indexAxis||Wg(c,this.options),r.order=o.order||0,r.index=s,r.label=""+o.label,r.visible=this.isDatasetVisible(s),r.controller)r.controller.updateIndex(s),r.controller.linkScales();else{const l=Lc.getController(c),{datasetElementType:n,dataElementType:f}=yi.datasets[c];Object.assign(l,{dataElementType:Lc.getElement(f),datasetElementType:n&&Lc.getElement(n)}),r.controller=new l(this,s),a.push(r.controller)}}return this._updateMetasets(),a}_resetElements(){Zr(this.data.datasets,(a,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(a){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),u=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:a,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let n=0,f=this.data.datasets.length;n<f;n++){const{controller:h}=this.getDatasetMeta(n),p=!u&&o.indexOf(h)===-1;h.buildOrUpdateElements(p),r=Math.max(+h.getMaxOverflow(),r)}r=this._minPadding=s.layout.autoPadding?r:0,this._updateLayout(r),u||Zr(o,n=>{n.reset()}),this._updateDatasets(a),this.notifyPlugins("afterUpdate",{mode:a}),this._layers.sort(Ty("z","_idx"));const{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){Zr(this.scales,a=>{vo.removeBox(this,a)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const a=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(a.events);(!Db(t,s)||!!this._responsiveListeners!==a.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:a}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:u,count:o}of t){const r=s==="_removeElements"?-o:o;Ew(a,u,r)}}_getUniformDataChanges(){const a=this._dataChanges;if(!a||!a.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=o=>new Set(a.filter(r=>r[0]===o).map((r,c)=>c+","+r.splice(1).join(","))),u=s(0);for(let o=1;o<t;o++)if(!Db(u,s(o)))return;return Array.from(u).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(a){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;vo.update(this,this.width,this.height,a);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],Zr(this.boxes,u=>{s&&u.position==="chartArea"||(u.configure&&u.configure(),this._layers.push(...u._layers()))},this),this._layers.forEach((u,o)=>{u._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(a){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:a,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,qf(a)?a({datasetIndex:t}):a);this.notifyPlugins("afterDatasetsUpdate",{mode:a})}}_updateDataset(a,t){const s=this.getDatasetMeta(a),u={meta:s,index:a,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",u)!==!1&&(s.controller._update(t),u.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",u))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Nu.has(this)?this.attached&&!Nu.running(this)&&Nu.start(this):(this.draw(),Cy({chart:this})))}draw(){let a;if(this._resizeBeforeDraw){const{width:s,height:u}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,u)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(a=0;a<t.length&&t[a].z<=0;++a)t[a].draw(this.chartArea);for(this._drawDatasets();a<t.length;++a)t[a].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(a){const t=this._sortedMetasets,s=[];let u,o;for(u=0,o=t.length;u<o;++u){const r=t[u];(!a||r.visible)&&s.push(r)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const a=this.getSortedVisibleDatasetMetas();for(let t=a.length-1;t>=0;--t)this._drawDataset(a[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(a){const t=this.ctx,s={meta:a,index:a.index,cancelable:!0},u=J1(this,a);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(u&&q0(t,u),a.controller.draw(),u&&G0(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(a){return ju(a,this.chartArea,this._minPadding)}getElementsAtEventForMode(a,t,s,u){const o=k_.modes[t];return typeof o=="function"?o(this,a,s,u):[]}getDatasetMeta(a){const t=this.data.datasets[a],s=this._metasets;let u=s.filter(o=>o&&o._dataset===t).pop();return u||(u={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:a,_dataset:t,_parsed:[],_sorted:!1},s.push(u)),u}getContext(){return this.$context||(this.$context=Zf(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(a){const t=this.data.datasets[a];if(!t)return!1;const s=this.getDatasetMeta(a);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(a,t){const s=this.getDatasetMeta(a);s.hidden=!t}toggleDataVisibility(a){this._hiddenIndices[a]=!this._hiddenIndices[a]}getDataVisibility(a){return!this._hiddenIndices[a]}_updateVisibility(a,t,s){const u=s?"show":"hide",o=this.getDatasetMeta(a),r=o.controller._resolveAnimations(void 0,u);gm(t)?(o.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(a,s),r.update(o,{visible:s}),this.update(c=>c.datasetIndex===a?u:void 0))}hide(a,t){this._updateVisibility(a,t,!1)}show(a,t){this._updateVisibility(a,t,!0)}_destroyDatasetMeta(a){const t=this._metasets[a];t&&t.controller&&t.controller._destroy(),delete this._metasets[a]}_stop(){let a,t;for(this.stop(),Nu.remove(this),a=0,t=this.data.datasets.length;a<t;++a)this._destroyDatasetMeta(a)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:a,ctx:t}=this;this._stop(),this.config.clearCache(),a&&(this.unbindEvents(),qb(a,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete O0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...a){return this.canvas.toDataURL(...a)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const a=this._listeners,t=this.platform,s=(o,r)=>{t.addEventListener(this,o,r),a[o]=r},u=(o,r,c)=>{o.offsetX=r,o.offsetY=c,this._eventHandler(o)};Zr(this.options.events,o=>s(o,u))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const a=this._responsiveListeners,t=this.platform,s=(l,n)=>{t.addEventListener(this,l,n),a[l]=n},u=(l,n)=>{a[l]&&(t.removeEventListener(this,l,n),delete a[l])},o=(l,n)=>{this.canvas&&this.resize(l,n)};let r;const c=()=>{u("attach",c),this.attached=!0,this.resize(),s("resize",o),s("detach",r)};r=()=>{this.attached=!1,u("resize",o),this._stop(),this._resize(0,0),s("attach",c)},t.isAttached(this.canvas)?c():r()}unbindEvents(){Zr(this._listeners,(a,t)=>{this.platform.removeEventListener(this,t,a)}),this._listeners={},Zr(this._responsiveListeners,(a,t)=>{this.platform.removeEventListener(this,t,a)}),this._responsiveListeners=void 0}updateHoverStyle(a,t,s){const u=s?"set":"remove";let o,r,c,l;for(t==="dataset"&&(o=this.getDatasetMeta(a[0].datasetIndex),o.controller["_"+u+"DatasetHoverStyle"]()),c=0,l=a.length;c<l;++c){r=a[c];const n=r&&this.getDatasetMeta(r.datasetIndex).controller;n&&n[u+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(a){const t=this._active||[],s=a.map(({datasetIndex:o,index:r})=>{const c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[r],index:r}});!P0(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(a,t,s){return this._plugins.notify(this,a,t,s)}isPluginEnabled(a){return this._plugins._cache.filter(t=>t.plugin.id===a).length===1}_updateHoverStyles(a,t,s){const u=this.options.hover,o=(l,n)=>l.filter(f=>!n.some(h=>f.datasetIndex===h.datasetIndex&&f.index===h.index)),r=o(t,a),c=s?a:o(a,t);r.length&&this.updateHoverStyle(r,u.mode,!1),c.length&&u.mode&&this.updateHoverStyle(c,u.mode,!0)}_eventHandler(a,t){const s={event:a,replay:t,cancelable:!0,inChartArea:this.isPointInArea(a)},u=r=>(r.options.events||this.options.events).includes(a.native.type);if(this.notifyPlugins("beforeEvent",s,u)===!1)return;const o=this._handleEvent(a,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,u),(o||s.changed)&&this.render(),this}_handleEvent(a,t,s){const{_active:u=[],options:o}=this,r=t,c=this._getActiveElements(a,u,s,r),l=Ax(a),n=Nw(a,this._lastEvent,s,l);s&&(this._lastEvent=null,ii(o.onHover,[a,c,this],this),l&&ii(o.onClick,[a,c,this],this));const f=!P0(c,u);return(f||t)&&(this._active=c,this._updateHoverStyles(c,u,t)),this._lastEvent=n,f}_getActiveElements(a,t,s,u){if(a.type==="mouseout")return[];if(!s)return t;const o=this.options.hover;return this.getElementsAtEventForMode(a,o.mode,o,u)}}function My(){return Zr(Y0.instances,m=>m._plugins.invalidate())}function Aw(m,a,t){const{startAngle:s,x:u,y:o,outerRadius:r,innerRadius:c,options:l}=a,{borderWidth:n,borderJoinStyle:f}=l,h=Math.min(n/r,yo(s-t));if(m.beginPath(),m.arc(u,o,r-n/2,s+h/2,t-h/2),c>0){const p=Math.min(n/c,yo(s-t));m.arc(u,o,c+n/2,t-p/2,s+p/2,!0)}else{const p=Math.min(n/2,r*yo(s-t));if(f==="round")m.arc(u,o,p,t-Br/2,s+Br/2,!0);else if(f==="bevel"){const g=2*p*p,v=-g*Math.cos(t+Br/2)+u,x=-g*Math.sin(t+Br/2)+o,y=g*Math.cos(s+Br/2)+u,w=g*Math.sin(s+Br/2)+o;m.lineTo(v,x),m.lineTo(y,w)}}m.closePath(),m.moveTo(0,0),m.rect(0,0,m.canvas.width,m.canvas.height),m.clip("evenodd")}function Rw(m,a,t){const{startAngle:s,pixelMargin:u,x:o,y:r,outerRadius:c,innerRadius:l}=a;let n=u/c;m.beginPath(),m.arc(o,r,c,s-n,t+n),l>u?(n=u/l,m.arc(o,r,l,t+n,s-n,!0)):m.arc(o,r,u,t+es,s-es),m.closePath(),m.clip()}function Iw(m){return cb(m,["outerStart","outerEnd","innerStart","innerEnd"])}function Ow(m,a,t,s){const u=Iw(m.options.borderRadius),o=(t-a)/2,r=Math.min(o,s*a/2),c=l=>{const n=(t-Math.min(o,l))*s/2;return Hs(l,0,Math.min(o,n))};return{outerStart:c(u.outerStart),outerEnd:c(u.outerEnd),innerStart:Hs(u.innerStart,0,r),innerEnd:Hs(u.innerEnd,0,r)}}function Gh(m,a,t,s){return{x:t+m*Math.cos(a),y:s+m*Math.sin(a)}}function H0(m,a,t,s,u,o){const{x:r,y:c,startAngle:l,pixelMargin:n,innerRadius:f}=a,h=Math.max(a.outerRadius+s+t-n,0),p=f>0?f+s+t+n:0;let g=0;const v=u-l;if(s){const R=f>0?f-s:0,T=h>0?h-s:0,C=(R+T)/2,k=C!==0?v*C/(C+s):v;g=(v-k)/2}const x=Math.max(.001,v*h-t/Br)/h,y=(v-x)/2,w=l+y+g,S=u-y-g,{outerStart:E,outerEnd:I,innerStart:D,innerEnd:Z}=Ow(a,p,h,S-w),K=h-E,z=h-I,W=w+E/K,Q=S-I/z,rt=p+D,tt=p+Z,j=w+D/rt,F=S-Z/tt;if(m.beginPath(),o){const R=(W+Q)/2;if(m.arc(r,c,h,W,R),m.arc(r,c,h,R,Q),I>0){const M=Gh(z,Q,r,c);m.arc(M.x,M.y,I,Q,S+es)}const T=Gh(tt,S,r,c);if(m.lineTo(T.x,T.y),Z>0){const M=Gh(tt,F,r,c);m.arc(M.x,M.y,Z,S+es,F+Math.PI)}const C=(S-Z/p+(w+D/p))/2;if(m.arc(r,c,p,S-Z/p,C,!0),m.arc(r,c,p,C,w+D/p,!0),D>0){const M=Gh(rt,j,r,c);m.arc(M.x,M.y,D,j+Math.PI,w-es)}const k=Gh(K,w,r,c);if(m.lineTo(k.x,k.y),E>0){const M=Gh(K,W,r,c);m.arc(M.x,M.y,E,w-es,W)}}else{m.moveTo(r,c);const R=Math.cos(W)*h+r,T=Math.sin(W)*h+c;m.lineTo(R,T);const C=Math.cos(Q)*h+r,k=Math.sin(Q)*h+c;m.lineTo(C,k)}m.closePath()}function jw(m,a,t,s,u){const{fullCircles:o,startAngle:r,circumference:c}=a;let l=a.endAngle;if(o){H0(m,a,t,s,l,u);for(let n=0;n<o;++n)m.fill();isNaN(c)||(l=r+(c%bi||bi))}return H0(m,a,t,s,l,u),m.fill(),l}function Lw(m,a,t,s,u){const{fullCircles:o,startAngle:r,circumference:c,options:l}=a,{borderWidth:n,borderJoinStyle:f,borderDash:h,borderDashOffset:p,borderRadius:g}=l,v=l.borderAlign==="inner";if(!n)return;m.setLineDash(h||[]),m.lineDashOffset=p,v?(m.lineWidth=n*2,m.lineJoin=f||"round"):(m.lineWidth=n,m.lineJoin=f||"bevel");let x=a.endAngle;if(o){H0(m,a,t,s,x,u);for(let y=0;y<o;++y)m.stroke();isNaN(c)||(x=r+(c%bi||bi))}v&&Rw(m,a,x),l.selfJoin&&x-r>=Br&&g===0&&f!=="miter"&&Aw(m,a,x),o||(H0(m,a,t,s,x,u),m.stroke())}class hv extends Pu{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:a=>a!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(a){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,a&&Object.assign(this,a)}inRange(a,t,s){const u=this.getProps(["x","y"],s),{angle:o,distance:r}=I1(u,{x:a,y:t}),{startAngle:c,endAngle:l,innerRadius:n,outerRadius:f,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,g=tr(h,l-c),v=bm(o,c,l)&&c!==l,x=g>=bi||v,y=Iu(r,n+p,f+p);return x&&y}getCenterPoint(a){const{x:t,y:s,startAngle:u,endAngle:o,innerRadius:r,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],a),{offset:l,spacing:n}=this.options,f=(u+o)/2,h=(r+c+n+l)/2;return{x:t+Math.cos(f)*h,y:s+Math.sin(f)*h}}tooltipPosition(a){return this.getCenterPoint(a)}draw(a){const{options:t,circumference:s}=this,u=(t.offset||0)/4,o=(t.spacing||0)/2,r=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=s>bi?Math.floor(s/bi):0,s===0||this.innerRadius<0||this.outerRadius<0)return;a.save();const c=(this.startAngle+this.endAngle)/2;a.translate(Math.cos(c)*u,Math.sin(c)*u);const l=1-Math.sin(Math.min(Br,s||0)),n=u*l;a.fillStyle=t.backgroundColor,a.strokeStyle=t.borderColor,jw(a,this,n,o,r),Lw(a,this,n,o,r),a.restore()}}function pv(m,a,t=a){m.lineCap=tr(t.borderCapStyle,a.borderCapStyle),m.setLineDash(tr(t.borderDash,a.borderDash)),m.lineDashOffset=tr(t.borderDashOffset,a.borderDashOffset),m.lineJoin=tr(t.borderJoinStyle,a.borderJoinStyle),m.lineWidth=tr(t.borderWidth,a.borderWidth),m.strokeStyle=tr(t.borderColor,a.borderColor)}function Pw(m,a,t){m.lineTo(t.x,t.y)}function Dw(m){return m.stepped?Jx:m.tension||m.cubicInterpolationMode==="monotone"?t2:Pw}function mv(m,a,t={}){const s=m.length,{start:u=0,end:o=s-1}=t,{start:r,end:c}=a,l=Math.max(u,r),n=Math.min(o,c),f=u<r&&o<r||u>c&&o>c;return{count:s,start:l,loop:a.loop,ilen:n<l&&!f?s+n-l:n-l}}function Bw(m,a,t,s){const{points:u,options:o}=a,{count:r,start:c,loop:l,ilen:n}=mv(u,t,s),f=Dw(o);let{move:h=!0,reverse:p}=s||{},g,v,x;for(g=0;g<=n;++g)v=u[(c+(p?n-g:g))%r],!v.skip&&(h?(m.moveTo(v.x,v.y),h=!1):f(m,x,v,p,o.stepped),x=v);return l&&(v=u[(c+(p?n:0))%r],f(m,x,v,p,o.stepped)),!!l}function zw(m,a,t,s){const u=a.points,{count:o,start:r,ilen:c}=mv(u,t,s),{move:l=!0,reverse:n}=s||{};let f=0,h=0,p,g,v,x,y,w;const S=I=>(r+(n?c-I:I))%o,E=()=>{x!==y&&(m.lineTo(f,y),m.lineTo(f,x),m.lineTo(f,w))};for(l&&(g=u[S(0)],m.moveTo(g.x,g.y)),p=0;p<=c;++p){if(g=u[S(p)],g.skip)continue;const I=g.x,D=g.y,Z=I|0;Z===v?(D<x?x=D:D>y&&(y=D),f=(h*f+I)/++h):(E(),m.lineTo(I,D),v=Z,h=0,x=y=D),w=D}E()}function Gg(m){const a=m.options,t=a.borderDash&&a.borderDash.length;return!m._decimated&&!m._loop&&!a.tension&&a.cubicInterpolationMode!=="monotone"&&!a.stepped&&!t?zw:Bw}function Fw(m){return m.stepped?I2:m.tension||m.cubicInterpolationMode==="monotone"?O2:Gd}function Uw(m,a,t,s){let u=a._path;u||(u=a._path=new Path2D,a.path(u,t,s)&&u.closePath()),pv(m,a.options),m.stroke(u)}function Hw(m,a,t,s){const{segments:u,options:o}=a,r=Gg(a);for(const c of u)pv(m,o,c.style),m.beginPath(),r(m,a,c,{start:t,end:t+s-1})&&m.closePath(),m.stroke()}const Vw=typeof Path2D=="function";function $w(m,a,t,s){Vw&&!a.options.segment?Uw(m,a,t,s):Hw(m,a,t,s)}class K0 extends Pu{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:a=>a!=="borderDash"&&a!=="fill"};constructor(a){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,a&&Object.assign(this,a)}updateControlPoints(a,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const u=s.spanGaps?this._loop:this._fullLoop;T2(this._points,s,a,u,t),this._pointsUpdated=!0}}set points(a){this._points=a,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=z2(this,this.options.segment))}first(){const a=this.segments,t=this.points;return a.length&&t[a[0].start]}last(){const a=this.segments,t=this.points,s=a.length;return s&&t[a[s-1].end]}interpolate(a,t){const s=this.options,u=a[t],o=this.points,r=Q1(this,{property:t,start:u,end:u});if(!r.length)return;const c=[],l=Fw(s);let n,f;for(n=0,f=r.length;n<f;++n){const{start:h,end:p}=r[n],g=o[h],v=o[p];if(g===v){c.push(g);continue}const x=Math.abs((u-g[t])/(v[t]-g[t])),y=l(g,v,x,s.stepped);y[t]=a[t],c.push(y)}return c.length===1?c[0]:c}pathSegment(a,t,s){return Gg(this)(a,this,t,s)}path(a,t,s){const u=this.segments,o=Gg(this);let r=this._loop;t=t||0,s=s||this.points.length-t;for(const c of u)r&=o(a,this,c,{start:t,end:t+s-1});return!!r}draw(a,t,s,u){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(a.save(),$w(a,this,s,u),a.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Ey(m,a,t,s){const u=m.options,{[t]:o}=m.getProps([t],s);return Math.abs(a-o)<u.radius+u.hitRadius}class gv extends Pu{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(a){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,a&&Object.assign(this,a)}inRange(a,t,s){const u=this.options,{x:o,y:r}=this.getProps(["x","y"],s);return Math.pow(a-o,2)+Math.pow(t-r,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(a,t){return Ey(this,a,"x",t)}inYRange(a,t){return Ey(this,a,"y",t)}getCenterPoint(a){const{x:t,y:s}=this.getProps(["x","y"],a);return{x:t,y:s}}size(a){a=a||this.options||{};let t=a.radius||0;t=Math.max(t,t&&a.hoverRadius||0);const s=t&&a.borderWidth||0;return(t+s)*2}draw(a,t){const s=this.options;this.skip||s.radius<.1||!ju(this,t,this.size(s)/2)||(a.strokeStyle=s.borderColor,a.lineWidth=s.borderWidth,a.fillStyle=s.backgroundColor,$g(a,s,this.x,this.y))}getRange(){const a=this.options||{};return a.radius+a.hitRadius}}function bv(m,a){const{x:t,y:s,base:u,width:o,height:r}=m.getProps(["x","y","base","width","height"],a);let c,l,n,f,h;return m.horizontal?(h=r/2,c=Math.min(t,u),l=Math.max(t,u),n=s-h,f=s+h):(h=o/2,c=t-h,l=t+h,n=Math.min(s,u),f=Math.max(s,u)),{left:c,top:n,right:l,bottom:f}}function Vf(m,a,t,s){return m?0:Hs(a,t,s)}function Ww(m,a,t){const s=m.options.borderWidth,u=m.borderSkipped,o=U1(s);return{t:Vf(u.top,o.top,0,t),r:Vf(u.right,o.right,0,a),b:Vf(u.bottom,o.bottom,0,t),l:Vf(u.left,o.left,0,a)}}function qw(m,a,t){const{enableBorderRadius:s}=m.getProps(["enableBorderRadius"]),u=m.options.borderRadius,o=Zd(u),r=Math.min(a,t),c=m.borderSkipped,l=s||Sr(u);return{topLeft:Vf(!l||c.top||c.left,o.topLeft,0,r),topRight:Vf(!l||c.top||c.right,o.topRight,0,r),bottomLeft:Vf(!l||c.bottom||c.left,o.bottomLeft,0,r),bottomRight:Vf(!l||c.bottom||c.right,o.bottomRight,0,r)}}function Gw(m){const a=bv(m),t=a.right-a.left,s=a.bottom-a.top,u=Ww(m,t/2,s/2),o=qw(m,t/2,s/2);return{outer:{x:a.left,y:a.top,w:t,h:s,radius:o},inner:{x:a.left+u.l,y:a.top+u.t,w:t-u.l-u.r,h:s-u.t-u.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(u.t,u.l)),topRight:Math.max(0,o.topRight-Math.max(u.t,u.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(u.b,u.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(u.b,u.r))}}}}function Og(m,a,t,s){const u=a===null,o=t===null,c=m&&!(u&&o)&&bv(m,s);return c&&(u||Iu(a,c.left,c.right))&&(o||Iu(t,c.top,c.bottom))}function Zw(m){return m.topLeft||m.topRight||m.bottomLeft||m.bottomRight}function Xw(m,a){m.rect(a.x,a.y,a.w,a.h)}function jg(m,a,t={}){const s=m.x!==t.x?-a:0,u=m.y!==t.y?-a:0,o=(m.x+m.w!==t.x+t.w?a:0)-s,r=(m.y+m.h!==t.y+t.h?a:0)-u;return{x:m.x+s,y:m.y+u,w:m.w+o,h:m.h+r,radius:m.radius}}class yv extends Pu{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(a){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,a&&Object.assign(this,a)}draw(a){const{inflateAmount:t,options:{borderColor:s,backgroundColor:u}}=this,{inner:o,outer:r}=Gw(this),c=Zw(r.radius)?ym:Xw;a.save(),(r.w!==o.w||r.h!==o.h)&&(a.beginPath(),c(a,jg(r,t,o)),a.clip(),c(a,jg(o,-t,r)),a.fillStyle=s,a.fill("evenodd")),a.beginPath(),c(a,jg(o,t)),a.fillStyle=u,a.fill(),a.restore()}inRange(a,t,s){return Og(this,a,t,s)}inXRange(a,t){return Og(this,a,null,t)}inYRange(a,t){return Og(this,null,a,t)}getCenterPoint(a){const{x:t,y:s,base:u,horizontal:o}=this.getProps(["x","y","base","horizontal"],a);return{x:o?(t+u)/2:t,y:o?s:(s+u)/2}}getRange(a){return a==="x"?this.width/2:this.height/2}}var Yw=Object.freeze({__proto__:null,ArcElement:hv,BarElement:yv,LineElement:K0,PointElement:gv});const Zg=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Ny=Zg.map(m=>m.replace("rgb(","rgba(").replace(")",", 0.5)"));function vv(m){return Zg[m%Zg.length]}function xv(m){return Ny[m%Ny.length]}function Kw(m,a){return m.borderColor=vv(a),m.backgroundColor=xv(a),++a}function Qw(m,a){return m.backgroundColor=m.data.map(()=>vv(a++)),a}function Jw(m,a){return m.backgroundColor=m.data.map(()=>xv(a++)),a}function t3(m){let a=0;return(t,s)=>{const u=m.getDatasetMeta(s).controller;u instanceof mb?a=Qw(t,a):u instanceof rv?a=Jw(t,a):u&&(a=Kw(t,a))}}function Ay(m){let a;for(a in m)if(m[a].borderColor||m[a].backgroundColor)return!0;return!1}function e3(m){return m&&(m.borderColor||m.backgroundColor)}function n3(){return yi.borderColor!=="rgba(0,0,0,0.1)"||yi.backgroundColor!=="rgba(0,0,0,0.1)"}var r3={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(m,a,t){if(!t.enabled)return;const{data:{datasets:s},options:u}=m.config,{elements:o}=u,r=Ay(s)||e3(u)||o&&Ay(o)||n3();if(!t.forceOverride&&r)return;const c=t3(m);s.forEach(c)}};function i3(m,a,t,s,u){const o=u.samples||s;if(o>=t)return m.slice(a,a+t);const r=[],c=(t-2)/(o-2);let l=0;const n=a+t-1;let f=a,h,p,g,v,x;for(r[l++]=m[f],h=0;h<o-2;h++){let y=0,w=0,S;const E=Math.floor((h+1)*c)+1+a,I=Math.min(Math.floor((h+2)*c)+1,t)+a,D=I-E;for(S=E;S<I;S++)y+=m[S].x,w+=m[S].y;y/=D,w/=D;const Z=Math.floor(h*c)+1+a,K=Math.min(Math.floor((h+1)*c)+1,t)+a,{x:z,y:W}=m[f];for(g=v=-1,S=Z;S<K;S++)v=.5*Math.abs((z-y)*(m[S].y-W)-(z-m[S].x)*(w-W)),v>g&&(g=v,p=m[S],x=S);r[l++]=p,f=x}return r[l++]=m[n],r}function s3(m,a,t,s){let u=0,o=0,r,c,l,n,f,h,p,g,v,x;const y=[],w=a+t-1,S=m[a].x,I=m[w].x-S;for(r=a;r<a+t;++r){c=m[r],l=(c.x-S)/I*s,n=c.y;const D=l|0;if(D===f)n<v?(v=n,h=r):n>x&&(x=n,p=r),u=(o*u+c.x)/++o;else{const Z=r-1;if(!ar(h)&&!ar(p)){const K=Math.min(h,p),z=Math.max(h,p);K!==g&&K!==Z&&y.push({...m[K],x:u}),z!==g&&z!==Z&&y.push({...m[z],x:u})}r>0&&Z!==g&&y.push(m[Z]),y.push(c),f=D,o=0,v=x=n,h=p=g=r}}return y}function _v(m){if(m._decimated){const a=m._data;delete m._decimated,delete m._data,Object.defineProperty(m,"data",{configurable:!0,enumerable:!0,writable:!0,value:a})}}function Ry(m){m.data.datasets.forEach(a=>{_v(a)})}function o3(m,a){const t=a.length;let s=0,u;const{iScale:o}=m,{min:r,max:c,minDefined:l,maxDefined:n}=o.getUserBounds();return l&&(s=Hs(Ou(a,o.axis,r).lo,0,t-1)),n?u=Hs(Ou(a,o.axis,c).hi+1,s,t)-s:u=t-s,{start:s,count:u}}var a3={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(m,a,t)=>{if(!t.enabled){Ry(m);return}const s=m.width;m.data.datasets.forEach((u,o)=>{const{_data:r,indexAxis:c}=u,l=m.getDatasetMeta(o),n=r||u.data;if(mi([c,m.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const f=m.scales[l.xAxisID];if(f.type!=="linear"&&f.type!=="time"||m.options.parsing)return;let{start:h,count:p}=o3(l,n);const g=t.threshold||4*s;if(p<=g){_v(u);return}ar(r)&&(u._data=n,delete u.data,Object.defineProperty(u,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}}));let v;switch(t.algorithm){case"lttb":v=i3(n,h,p,s,t);break;case"min-max":v=s3(n,h,p,s);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}u._decimated=v})},destroy(m){Ry(m)}};function l3(m,a,t){const s=m.segments,u=m.points,o=a.points,r=[];for(const c of s){let{start:l,end:n}=c;n=Q0(l,n,u);const f=Xg(t,u[l],u[n],c.loop);if(!a.segments){r.push({source:c,target:f,start:u[l],end:u[n]});continue}const h=Q1(a,f);for(const p of h){const g=Xg(t,o[p.start],o[p.end],p.loop),v=K1(c,u,g);for(const x of v)r.push({source:x,target:p,start:{[t]:Iy(f,g,"start",Math.max)},end:{[t]:Iy(f,g,"end",Math.min)}})}}return r}function Xg(m,a,t,s){if(s)return;let u=a[m],o=t[m];return m==="angle"&&(u=yo(u),o=yo(o)),{property:m,start:u,end:o}}function c3(m,a){const{x:t=null,y:s=null}=m||{},u=a.points,o=[];return a.segments.forEach(({start:r,end:c})=>{c=Q0(r,c,u);const l=u[r],n=u[c];s!==null?(o.push({x:l.x,y:s}),o.push({x:n.x,y:s})):t!==null&&(o.push({x:t,y:l.y}),o.push({x:t,y:n.y}))}),o}function Q0(m,a,t){for(;a>m;a--){const s=t[a];if(!isNaN(s.x)&&!isNaN(s.y))break}return a}function Iy(m,a,t,s){return m&&a?s(m[t],a[t]):m?m[t]:a?a[t]:0}function wv(m,a){let t=[],s=!1;return gi(m)?(s=!0,t=m):t=c3(m,a),t.length?new K0({points:t,options:{tension:0},_loop:s,_fullLoop:s}):null}function Oy(m){return m&&m.fill!==!1}function u3(m,a,t){let u=m[a].fill;const o=[a];let r;if(!t)return u;for(;u!==!1&&o.indexOf(u)===-1;){if(!Di(u))return u;if(r=m[u],!r)return!1;if(r.visible)return u;o.push(u),u=r.fill}return!1}function f3(m,a,t){const s=m3(m);if(Sr(s))return isNaN(s.value)?!1:s;let u=parseFloat(s);return Di(u)&&Math.floor(u)===u?d3(s[0],a,u,t):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function d3(m,a,t,s){return(m==="-"||m==="+")&&(t=a+t),t===a||t<0||t>=s?!1:t}function h3(m,a){let t=null;return m==="start"?t=a.bottom:m==="end"?t=a.top:Sr(m)?t=a.getPixelForValue(m.value):a.getBasePixel&&(t=a.getBasePixel()),t}function p3(m,a,t){let s;return m==="start"?s=t:m==="end"?s=a.options.reverse?a.min:a.max:Sr(m)?s=m.value:s=a.getBaseValue(),s}function m3(m){const a=m.options,t=a.fill;let s=tr(t&&t.target,t);return s===void 0&&(s=!!a.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function g3(m){const{scale:a,index:t,line:s}=m,u=[],o=s.segments,r=s.points,c=b3(a,t);c.push(wv({x:null,y:a.bottom},s));for(let l=0;l<o.length;l++){const n=o[l];for(let f=n.start;f<=n.end;f++)y3(u,r[f],c)}return new K0({points:u,options:{}})}function b3(m,a){const t=[],s=m.getMatchingVisibleMetas("line");for(let u=0;u<s.length;u++){const o=s[u];if(o.index===a)break;o.hidden||t.unshift(o.dataset)}return t}function y3(m,a,t){const s=[];for(let u=0;u<t.length;u++){const o=t[u],{first:r,last:c,point:l}=v3(o,a,"x");if(!(!l||r&&c)){if(r)s.unshift(l);else if(m.push(l),!c)break}}m.push(...s)}function v3(m,a,t){const s=m.interpolate(a,t);if(!s)return{};const u=s[t],o=m.segments,r=m.points;let c=!1,l=!1;for(let n=0;n<o.length;n++){const f=o[n],h=r[f.start][t],p=r[f.end][t];if(Iu(u,h,p)){c=u===h,l=u===p;break}}return{first:c,last:l,point:s}}class Sv{constructor(a){this.x=a.x,this.y=a.y,this.radius=a.radius}pathSegment(a,t,s){const{x:u,y:o,radius:r}=this;return t=t||{start:0,end:bi},a.arc(u,o,r,t.end,t.start,!0),!s.bounds}interpolate(a){const{x:t,y:s,radius:u}=this,o=a.angle;return{x:t+Math.cos(o)*u,y:s+Math.sin(o)*u,angle:o}}}function x3(m){const{chart:a,fill:t,line:s}=m;if(Di(t))return _3(a,t);if(t==="stack")return g3(m);if(t==="shape")return!0;const u=w3(m);return u instanceof Sv?u:wv(u,s)}function _3(m,a){const t=m.getDatasetMeta(a);return t&&m.isDatasetVisible(a)?t.dataset:null}function w3(m){return(m.scale||{}).getPointPositionForValue?T3(m):S3(m)}function S3(m){const{scale:a={},fill:t}=m,s=h3(t,a);if(Di(s)){const u=a.isHorizontal();return{x:u?s:null,y:u?null:s}}return null}function T3(m){const{scale:a,fill:t}=m,s=a.options,u=a.getLabels().length,o=s.reverse?a.max:a.min,r=p3(t,a,o),c=[];if(s.grid.circular){const l=a.getPointPositionForValue(0,o);return new Sv({x:l.x,y:l.y,radius:a.getDistanceFromCenterForValue(r)})}for(let l=0;l<u;++l)c.push(a.getPointPositionForValue(l,r));return c}function Lg(m,a,t){const s=x3(a),{chart:u,index:o,line:r,scale:c,axis:l}=a,n=r.options,f=n.fill,h=n.backgroundColor,{above:p=h,below:g=h}=f||{},v=u.getDatasetMeta(o),x=J1(u,v);s&&r.points.length&&(q0(m,t),C3(m,{line:r,target:s,above:p,below:g,area:t,scale:c,axis:l,clip:x}),G0(m))}function C3(m,a){const{line:t,target:s,above:u,below:o,area:r,scale:c,clip:l}=a,n=t._loop?"angle":a.axis;m.save();let f=o;o!==u&&(n==="x"?(jy(m,s,r.top),Pg(m,{line:t,target:s,color:u,scale:c,property:n,clip:l}),m.restore(),m.save(),jy(m,s,r.bottom)):n==="y"&&(Ly(m,s,r.left),Pg(m,{line:t,target:s,color:o,scale:c,property:n,clip:l}),m.restore(),m.save(),Ly(m,s,r.right),f=u)),Pg(m,{line:t,target:s,color:f,scale:c,property:n,clip:l}),m.restore()}function jy(m,a,t){const{segments:s,points:u}=a;let o=!0,r=!1;m.beginPath();for(const c of s){const{start:l,end:n}=c,f=u[l],h=u[Q0(l,n,u)];o?(m.moveTo(f.x,f.y),o=!1):(m.lineTo(f.x,t),m.lineTo(f.x,f.y)),r=!!a.pathSegment(m,c,{move:r}),r?m.closePath():m.lineTo(h.x,t)}m.lineTo(a.first().x,t),m.closePath(),m.clip()}function Ly(m,a,t){const{segments:s,points:u}=a;let o=!0,r=!1;m.beginPath();for(const c of s){const{start:l,end:n}=c,f=u[l],h=u[Q0(l,n,u)];o?(m.moveTo(f.x,f.y),o=!1):(m.lineTo(t,f.y),m.lineTo(f.x,f.y)),r=!!a.pathSegment(m,c,{move:r}),r?m.closePath():m.lineTo(t,h.y)}m.lineTo(t,a.first().y),m.closePath(),m.clip()}function Pg(m,a){const{line:t,target:s,property:u,color:o,scale:r,clip:c}=a,l=l3(t,s,u);for(const{source:n,target:f,start:h,end:p}of l){const{style:{backgroundColor:g=o}={}}=n,v=s!==!0;m.save(),m.fillStyle=g,k3(m,r,c,v&&Xg(u,h,p)),m.beginPath();const x=!!t.pathSegment(m,n);let y;if(v){x?m.closePath():Py(m,s,p,u);const w=!!s.pathSegment(m,f,{move:x,reverse:!0});y=x&&w,y||Py(m,s,h,u)}m.closePath(),m.fill(y?"evenodd":"nonzero"),m.restore()}}function k3(m,a,t,s){const u=a.chart.chartArea,{property:o,start:r,end:c}=s||{};if(o==="x"||o==="y"){let l,n,f,h;o==="x"?(l=r,n=u.top,f=c,h=u.bottom):(l=u.left,n=r,f=u.right,h=c),m.beginPath(),t&&(l=Math.max(l,t.left),f=Math.min(f,t.right),n=Math.max(n,t.top),h=Math.min(h,t.bottom)),m.rect(l,n,f-l,h-n),m.clip()}}function Py(m,a,t,s){const u=a.interpolate(t,s);u&&m.lineTo(u.x,u.y)}var M3={id:"filler",afterDatasetsUpdate(m,a,t){const s=(m.data.datasets||[]).length,u=[];let o,r,c,l;for(r=0;r<s;++r)o=m.getDatasetMeta(r),c=o.dataset,l=null,c&&c.options&&c instanceof K0&&(l={visible:m.isDatasetVisible(r),index:r,fill:f3(c,r,s),chart:m,axis:o.controller.options.indexAxis,scale:o.vScale,line:c}),o.$filler=l,u.push(l);for(r=0;r<s;++r)l=u[r],!(!l||l.fill===!1)&&(l.fill=u3(u,r,t.propagate))},beforeDraw(m,a,t){const s=t.drawTime==="beforeDraw",u=m.getSortedVisibleDatasetMetas(),o=m.chartArea;for(let r=u.length-1;r>=0;--r){const c=u[r].$filler;c&&(c.line.updateControlPoints(o,c.axis),s&&c.fill&&Lg(m.ctx,c,o))}},beforeDatasetsDraw(m,a,t){if(t.drawTime!=="beforeDatasetsDraw")return;const s=m.getSortedVisibleDatasetMetas();for(let u=s.length-1;u>=0;--u){const o=s[u].$filler;Oy(o)&&Lg(m.ctx,o,m.chartArea)}},beforeDatasetDraw(m,a,t){const s=a.meta.$filler;!Oy(s)||t.drawTime!=="beforeDatasetDraw"||Lg(m.ctx,s,m.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Dy=(m,a)=>{let{boxHeight:t=a,boxWidth:s=a}=m;return m.usePointStyle&&(t=Math.min(t,a),s=m.pointStyleWidth||Math.min(s,a)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(a,t)}},E3=(m,a)=>m!==null&&a!==null&&m.datasetIndex===a.datasetIndex&&m.index===a.index;class By extends Pu{constructor(a){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=a.chart,this.options=a.options,this.ctx=a.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(a,t,s){this.maxWidth=a,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const a=this.options.labels||{};let t=ii(a.generateLabels,[this.chart],this)||[];a.filter&&(t=t.filter(s=>a.filter(s,this.chart.data))),a.sort&&(t=t.sort((s,u)=>a.sort(s,u,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:a,ctx:t}=this;if(!a.display){this.width=this.height=0;return}const s=a.labels,u=hs(s.font),o=u.size,r=this._computeTitleHeight(),{boxWidth:c,itemHeight:l}=Dy(s,o);let n,f;t.font=u.string,this.isHorizontal()?(n=this.maxWidth,f=this._fitRows(r,o,c,l)+10):(f=this.maxHeight,n=this._fitCols(r,u,c,l)+10),this.width=Math.min(n,a.maxWidth||this.maxWidth),this.height=Math.min(f,a.maxHeight||this.maxHeight)}_fitRows(a,t,s,u){const{ctx:o,maxWidth:r,options:{labels:{padding:c}}}=this,l=this.legendHitBoxes=[],n=this.lineWidths=[0],f=u+c;let h=a;o.textAlign="left",o.textBaseline="middle";let p=-1,g=-f;return this.legendItems.forEach((v,x)=>{const y=s+t/2+o.measureText(v.text).width;(x===0||n[n.length-1]+y+2*c>r)&&(h+=f,n[n.length-(x>0?0:1)]=0,g+=f,p++),l[x]={left:0,top:g,row:p,width:y,height:u},n[n.length-1]+=y+c}),h}_fitCols(a,t,s,u){const{ctx:o,maxHeight:r,options:{labels:{padding:c}}}=this,l=this.legendHitBoxes=[],n=this.columnSizes=[],f=r-a;let h=c,p=0,g=0,v=0,x=0;return this.legendItems.forEach((y,w)=>{const{itemWidth:S,itemHeight:E}=N3(s,t,o,y,u);w>0&&g+E+2*c>f&&(h+=p+c,n.push({width:p,height:g}),v+=p+c,x++,p=g=0),l[w]={left:v,top:g,col:x,width:S,height:E},p=Math.max(p,S),g+=E+c}),h+=p,n.push({width:p,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;const a=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:u},rtl:o}}=this,r=Xh(o,this.left,this.width);if(this.isHorizontal()){let c=0,l=bo(s,this.left+u,this.right-this.lineWidths[c]);for(const n of t)c!==n.row&&(c=n.row,l=bo(s,this.left+u,this.right-this.lineWidths[c])),n.top+=this.top+a+u,n.left=r.leftForLtr(r.x(l),n.width),l+=n.width+u}else{let c=0,l=bo(s,this.top+a+u,this.bottom-this.columnSizes[c].height);for(const n of t)n.col!==c&&(c=n.col,l=bo(s,this.top+a+u,this.bottom-this.columnSizes[c].height)),n.top=l,n.left+=this.left+u,n.left=r.leftForLtr(r.x(n.left),n.width),l+=n.height+u}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const a=this.ctx;q0(a,this),this._draw(),G0(a)}}_draw(){const{options:a,columnSizes:t,lineWidths:s,ctx:u}=this,{align:o,labels:r}=a,c=yi.color,l=Xh(a.rtl,this.left,this.width),n=hs(r.font),{padding:f}=r,h=n.size,p=h/2;let g;this.drawTitle(),u.textAlign=l.textAlign("left"),u.textBaseline="middle",u.lineWidth=.5,u.font=n.string;const{boxWidth:v,boxHeight:x,itemHeight:y}=Dy(r,h),w=function(Z,K,z){if(isNaN(v)||v<=0||isNaN(x)||x<0)return;u.save();const W=tr(z.lineWidth,1);if(u.fillStyle=tr(z.fillStyle,c),u.lineCap=tr(z.lineCap,"butt"),u.lineDashOffset=tr(z.lineDashOffset,0),u.lineJoin=tr(z.lineJoin,"miter"),u.lineWidth=W,u.strokeStyle=tr(z.strokeStyle,c),u.setLineDash(tr(z.lineDash,[])),r.usePointStyle){const Q={radius:x*Math.SQRT2/2,pointStyle:z.pointStyle,rotation:z.rotation,borderWidth:W},rt=l.xPlus(Z,v/2),tt=K+p;F1(u,Q,rt,tt,r.pointStyleWidth&&v)}else{const Q=K+Math.max((h-x)/2,0),rt=l.leftForLtr(Z,v),tt=Zd(z.borderRadius);u.beginPath(),Object.values(tt).some(j=>j!==0)?ym(u,{x:rt,y:Q,w:v,h:x,radius:tt}):u.rect(rt,Q,v,x),u.fill(),W!==0&&u.stroke()}u.restore()},S=function(Z,K,z){Kd(u,z.text,Z,K+y/2,n,{strikethrough:z.hidden,textAlign:l.textAlign(z.textAlign)})},E=this.isHorizontal(),I=this._computeTitleHeight();E?g={x:bo(o,this.left+f,this.right-s[0]),y:this.top+f+I,line:0}:g={x:this.left+f,y:bo(o,this.top+I+f,this.bottom-t[0].height),line:0},Z1(this.ctx,a.textDirection);const D=y+f;this.legendItems.forEach((Z,K)=>{u.strokeStyle=Z.fontColor,u.fillStyle=Z.fontColor;const z=u.measureText(Z.text).width,W=l.textAlign(Z.textAlign||(Z.textAlign=r.textAlign)),Q=v+p+z;let rt=g.x,tt=g.y;l.setWidth(this.width),E?K>0&&rt+Q+f>this.right&&(tt=g.y+=D,g.line++,rt=g.x=bo(o,this.left+f,this.right-s[g.line])):K>0&&tt+D>this.bottom&&(rt=g.x=rt+t[g.line].width+f,g.line++,tt=g.y=bo(o,this.top+I+f,this.bottom-t[g.line].height));const j=l.x(rt);if(w(j,tt,Z),rt=Hx(W,rt+v+p,E?rt+Q:this.right,a.rtl),S(l.x(rt),tt,Z),E)g.x+=Q+f;else if(typeof Z.text!="string"){const F=n.lineHeight;g.y+=Tv(Z,F)+f}else g.y+=D}),X1(this.ctx,a.textDirection)}drawTitle(){const a=this.options,t=a.title,s=hs(t.font),u=so(t.padding);if(!t.display)return;const o=Xh(a.rtl,this.left,this.width),r=this.ctx,c=t.position,l=s.size/2,n=u.top+l;let f,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),f=this.top+n,h=bo(a.align,h,this.right-p);else{const v=this.columnSizes.reduce((x,y)=>Math.max(x,y.height),0);f=n+bo(a.align,this.top,this.bottom-v-a.labels.padding-this._computeTitleHeight())}const g=bo(c,h,h+p);r.textAlign=o.textAlign(ab(c)),r.textBaseline="middle",r.strokeStyle=t.color,r.fillStyle=t.color,r.font=s.string,Kd(r,t.text,g,f,s)}_computeTitleHeight(){const a=this.options.title,t=hs(a.font),s=so(a.padding);return a.display?t.lineHeight+s.height:0}_getLegendItemAt(a,t){let s,u,o;if(Iu(a,this.left,this.right)&&Iu(t,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(u=o[s],Iu(a,u.left,u.left+u.width)&&Iu(t,u.top,u.top+u.height))return this.legendItems[s]}return null}handleEvent(a){const t=this.options;if(!I3(a.type,t))return;const s=this._getLegendItemAt(a.x,a.y);if(a.type==="mousemove"||a.type==="mouseout"){const u=this._hoveredItem,o=E3(u,s);u&&!o&&ii(t.onLeave,[a,u,this],this),this._hoveredItem=s,s&&!o&&ii(t.onHover,[a,s,this],this)}else s&&ii(t.onClick,[a,s,this],this)}}function N3(m,a,t,s,u){const o=A3(s,m,a,t),r=R3(u,s,a.lineHeight);return{itemWidth:o,itemHeight:r}}function A3(m,a,t,s){let u=m.text;return u&&typeof u!="string"&&(u=u.reduce((o,r)=>o.length>r.length?o:r)),a+t.size/2+s.measureText(u).width}function R3(m,a,t){let s=m;return typeof a.text!="string"&&(s=Tv(a,t)),s}function Tv(m,a){const t=m.text?m.text.length:0;return a*t}function I3(m,a){return!!((m==="mousemove"||m==="mouseout")&&(a.onHover||a.onLeave)||a.onClick&&(m==="click"||m==="mouseup"))}var O3={id:"legend",_element:By,start(m,a,t){const s=m.legend=new By({ctx:m.ctx,options:t,chart:m});vo.configure(m,s,t),vo.addBox(m,s)},stop(m){vo.removeBox(m,m.legend),delete m.legend},beforeUpdate(m,a,t){const s=m.legend;vo.configure(m,s,t),s.options=t},afterUpdate(m){const a=m.legend;a.buildLabels(),a.adjustHitBoxes()},afterEvent(m,a){a.replay||m.legend.handleEvent(a.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(m,a,t){const s=a.datasetIndex,u=t.chart;u.isDatasetVisible(s)?(u.hide(s),a.hidden=!0):(u.show(s),a.hidden=!1)},onHover:null,onLeave:null,labels:{color:m=>m.chart.options.color,boxWidth:40,padding:10,generateLabels(m){const a=m.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:u,color:o,useBorderRadius:r,borderRadius:c}}=m.legend.options;return m._getSortedDatasetMetas().map(l=>{const n=l.controller.getStyle(t?0:void 0),f=so(n.borderWidth);return{text:a[l.index].label,fillStyle:n.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:(f.width+f.height)/4,strokeStyle:n.borderColor,pointStyle:s||n.pointStyle,rotation:n.rotation,textAlign:u||n.textAlign,borderRadius:r&&(c||n.borderRadius),datasetIndex:l.index}},this)}},title:{color:m=>m.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:m=>!m.startsWith("on"),labels:{_scriptable:m=>!["generateLabels","filter","sort"].includes(m)}}};class bb extends Pu{constructor(a){super(),this.chart=a.chart,this.options=a.options,this.ctx=a.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(a,t){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=a,this.height=this.bottom=t;const u=gi(s.text)?s.text.length:1;this._padding=so(s.padding);const o=u*hs(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const a=this.options.position;return a==="top"||a==="bottom"}_drawArgs(a){const{top:t,left:s,bottom:u,right:o,options:r}=this,c=r.align;let l=0,n,f,h;return this.isHorizontal()?(f=bo(c,s,o),h=t+a,n=o-s):(r.position==="left"?(f=s+a,h=bo(c,u,t),l=Br*-.5):(f=o-a,h=bo(c,t,u),l=Br*.5),n=u-t),{titleX:f,titleY:h,maxWidth:n,rotation:l}}draw(){const a=this.ctx,t=this.options;if(!t.display)return;const s=hs(t.font),o=s.lineHeight/2+this._padding.top,{titleX:r,titleY:c,maxWidth:l,rotation:n}=this._drawArgs(o);Kd(a,t.text,0,0,s,{color:t.color,maxWidth:l,rotation:n,textAlign:ab(t.align),textBaseline:"middle",translation:[r,c]})}}function j3(m,a){const t=new bb({ctx:m.ctx,options:a,chart:m});vo.configure(m,t,a),vo.addBox(m,t),m.titleBlock=t}var L3={id:"title",_element:bb,start(m,a,t){j3(m,t)},stop(m){const a=m.titleBlock;vo.removeBox(m,a),delete m.titleBlock},beforeUpdate(m,a,t){const s=m.titleBlock;vo.configure(m,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const w0=new WeakMap;var P3={id:"subtitle",start(m,a,t){const s=new bb({ctx:m.ctx,options:t,chart:m});vo.configure(m,s,t),vo.addBox(m,s),w0.set(m,s)},stop(m){vo.removeBox(m,w0.get(m)),w0.delete(m)},beforeUpdate(m,a,t){const s=w0.get(m);vo.configure(m,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const lm={average(m){if(!m.length)return!1;let a,t,s=new Set,u=0,o=0;for(a=0,t=m.length;a<t;++a){const c=m[a].element;if(c&&c.hasValue()){const l=c.tooltipPosition();s.add(l.x),u+=l.y,++o}}return o===0||s.size===0?!1:{x:[...s].reduce((c,l)=>c+l)/s.size,y:u/o}},nearest(m,a){if(!m.length)return!1;let t=a.x,s=a.y,u=Number.POSITIVE_INFINITY,o,r,c;for(o=0,r=m.length;o<r;++o){const l=m[o].element;if(l&&l.hasValue()){const n=l.getCenterPoint(),f=Hg(a,n);f<u&&(u=f,c=l)}}if(c){const l=c.tooltipPosition();t=l.x,s=l.y}return{x:t,y:s}}};function jc(m,a){return a&&(gi(a)?Array.prototype.push.apply(m,a):m.push(a)),m}function Au(m){return(typeof m=="string"||m instanceof String)&&m.indexOf(`
`)>-1?m.split(`
`):m}function D3(m,a){const{element:t,datasetIndex:s,index:u}=a,o=m.getDatasetMeta(s).controller,{label:r,value:c}=o.getLabelAndValue(u);return{chart:m,label:r,parsed:o.getParsed(u),raw:m.data.datasets[s].data[u],formattedValue:c,dataset:o.getDataset(),dataIndex:u,datasetIndex:s,element:t}}function zy(m,a){const t=m.chart.ctx,{body:s,footer:u,title:o}=m,{boxWidth:r,boxHeight:c}=a,l=hs(a.bodyFont),n=hs(a.titleFont),f=hs(a.footerFont),h=o.length,p=u.length,g=s.length,v=so(a.padding);let x=v.height,y=0,w=s.reduce((I,D)=>I+D.before.length+D.lines.length+D.after.length,0);if(w+=m.beforeBody.length+m.afterBody.length,h&&(x+=h*n.lineHeight+(h-1)*a.titleSpacing+a.titleMarginBottom),w){const I=a.displayColors?Math.max(c,l.lineHeight):l.lineHeight;x+=g*I+(w-g)*l.lineHeight+(w-1)*a.bodySpacing}p&&(x+=a.footerMarginTop+p*f.lineHeight+(p-1)*a.footerSpacing);let S=0;const E=function(I){y=Math.max(y,t.measureText(I).width+S)};return t.save(),t.font=n.string,Zr(m.title,E),t.font=l.string,Zr(m.beforeBody.concat(m.afterBody),E),S=a.displayColors?r+2+a.boxPadding:0,Zr(s,I=>{Zr(I.before,E),Zr(I.lines,E),Zr(I.after,E)}),S=0,t.font=f.string,Zr(m.footer,E),t.restore(),y+=v.width,{width:y,height:x}}function B3(m,a){const{y:t,height:s}=a;return t<s/2?"top":t>m.height-s/2?"bottom":"center"}function z3(m,a,t,s){const{x:u,width:o}=s,r=t.caretSize+t.caretPadding;if(m==="left"&&u+o+r>a.width||m==="right"&&u-o-r<0)return!0}function F3(m,a,t,s){const{x:u,width:o}=t,{width:r,chartArea:{left:c,right:l}}=m;let n="center";return s==="center"?n=u<=(c+l)/2?"left":"right":u<=o/2?n="left":u>=r-o/2&&(n="right"),z3(n,m,a,t)&&(n="center"),n}function Fy(m,a,t){const s=t.yAlign||a.yAlign||B3(m,t);return{xAlign:t.xAlign||a.xAlign||F3(m,a,t,s),yAlign:s}}function U3(m,a){let{x:t,width:s}=m;return a==="right"?t-=s:a==="center"&&(t-=s/2),t}function H3(m,a,t){let{y:s,height:u}=m;return a==="top"?s+=t:a==="bottom"?s-=u+t:s-=u/2,s}function Uy(m,a,t,s){const{caretSize:u,caretPadding:o,cornerRadius:r}=m,{xAlign:c,yAlign:l}=t,n=u+o,{topLeft:f,topRight:h,bottomLeft:p,bottomRight:g}=Zd(r);let v=U3(a,c);const x=H3(a,l,n);return l==="center"?c==="left"?v+=n:c==="right"&&(v-=n):c==="left"?v-=Math.max(f,p)+u:c==="right"&&(v+=Math.max(h,g)+u),{x:Hs(v,0,s.width-a.width),y:Hs(x,0,s.height-a.height)}}function S0(m,a,t){const s=so(t.padding);return a==="center"?m.x+m.width/2:a==="right"?m.x+m.width-s.right:m.x+s.left}function Hy(m){return jc([],Au(m))}function V3(m,a,t){return Zf(m,{tooltip:a,tooltipItems:t,type:"tooltip"})}function Vy(m,a){const t=a&&a.dataset&&a.dataset.tooltip&&a.dataset.tooltip.callbacks;return t?m.override(t):m}const Cv={beforeTitle:Mu,title(m){if(m.length>0){const a=m[0],t=a.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return a.dataset.label||"";if(a.label)return a.label;if(s>0&&a.dataIndex<s)return t[a.dataIndex]}return""},afterTitle:Mu,beforeBody:Mu,beforeLabel:Mu,label(m){if(this&&this.options&&this.options.mode==="dataset")return m.label+": "+m.formattedValue||m.formattedValue;let a=m.dataset.label||"";a&&(a+=": ");const t=m.formattedValue;return ar(t)||(a+=t),a},labelColor(m){const t=m.chart.getDatasetMeta(m.datasetIndex).controller.getStyle(m.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(m){const t=m.chart.getDatasetMeta(m.datasetIndex).controller.getStyle(m.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Mu,afterBody:Mu,beforeFooter:Mu,footer:Mu,afterFooter:Mu};function fa(m,a,t,s){const u=m[a].call(t,s);return typeof u>"u"?Cv[a].call(t,s):u}class $y extends Pu{static positioners=lm;constructor(a){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=a.chart,this.options=a.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(a){this.options=a,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const a=this._cachedAnimations;if(a)return a;const t=this.chart,s=this.options.setContext(this.getContext()),u=s.enabled&&t.options.animation&&s.animations,o=new tv(this.chart,u);return u._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=V3(this.chart.getContext(),this,this._tooltipItems))}getTitle(a,t){const{callbacks:s}=t,u=fa(s,"beforeTitle",this,a),o=fa(s,"title",this,a),r=fa(s,"afterTitle",this,a);let c=[];return c=jc(c,Au(u)),c=jc(c,Au(o)),c=jc(c,Au(r)),c}getBeforeBody(a,t){return Hy(fa(t.callbacks,"beforeBody",this,a))}getBody(a,t){const{callbacks:s}=t,u=[];return Zr(a,o=>{const r={before:[],lines:[],after:[]},c=Vy(s,o);jc(r.before,Au(fa(c,"beforeLabel",this,o))),jc(r.lines,fa(c,"label",this,o)),jc(r.after,Au(fa(c,"afterLabel",this,o))),u.push(r)}),u}getAfterBody(a,t){return Hy(fa(t.callbacks,"afterBody",this,a))}getFooter(a,t){const{callbacks:s}=t,u=fa(s,"beforeFooter",this,a),o=fa(s,"footer",this,a),r=fa(s,"afterFooter",this,a);let c=[];return c=jc(c,Au(u)),c=jc(c,Au(o)),c=jc(c,Au(r)),c}_createItems(a){const t=this._active,s=this.chart.data,u=[],o=[],r=[];let c=[],l,n;for(l=0,n=t.length;l<n;++l)c.push(D3(this.chart,t[l]));return a.filter&&(c=c.filter((f,h,p)=>a.filter(f,h,p,s))),a.itemSort&&(c=c.sort((f,h)=>a.itemSort(f,h,s))),Zr(c,f=>{const h=Vy(a.callbacks,f);u.push(fa(h,"labelColor",this,f)),o.push(fa(h,"labelPointStyle",this,f)),r.push(fa(h,"labelTextColor",this,f))}),this.labelColors=u,this.labelPointStyles=o,this.labelTextColors=r,this.dataPoints=c,c}update(a,t){const s=this.options.setContext(this.getContext()),u=this._active;let o,r=[];if(!u.length)this.opacity!==0&&(o={opacity:0});else{const c=lm[s.position].call(this,u,this._eventPosition);r=this._createItems(s),this.title=this.getTitle(r,s),this.beforeBody=this.getBeforeBody(r,s),this.body=this.getBody(r,s),this.afterBody=this.getAfterBody(r,s),this.footer=this.getFooter(r,s);const l=this._size=zy(this,s),n=Object.assign({},c,l),f=Fy(this.chart,s,n),h=Uy(s,n,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=r,this.$context=void 0,o&&this._resolveAnimations().update(this,o),a&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(a,t,s,u){const o=this.getCaretPosition(a,s,u);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(a,t,s){const{xAlign:u,yAlign:o}=this,{caretSize:r,cornerRadius:c}=s,{topLeft:l,topRight:n,bottomLeft:f,bottomRight:h}=Zd(c),{x:p,y:g}=a,{width:v,height:x}=t;let y,w,S,E,I,D;return o==="center"?(I=g+x/2,u==="left"?(y=p,w=y-r,E=I+r,D=I-r):(y=p+v,w=y+r,E=I-r,D=I+r),S=y):(u==="left"?w=p+Math.max(l,f)+r:u==="right"?w=p+v-Math.max(n,h)-r:w=this.caretX,o==="top"?(E=g,I=E-r,y=w-r,S=w+r):(E=g+x,I=E+r,y=w+r,S=w-r),D=E),{x1:y,x2:w,x3:S,y1:E,y2:I,y3:D}}drawTitle(a,t,s){const u=this.title,o=u.length;let r,c,l;if(o){const n=Xh(s.rtl,this.x,this.width);for(a.x=S0(this,s.titleAlign,s),t.textAlign=n.textAlign(s.titleAlign),t.textBaseline="middle",r=hs(s.titleFont),c=s.titleSpacing,t.fillStyle=s.titleColor,t.font=r.string,l=0;l<o;++l)t.fillText(u[l],n.x(a.x),a.y+r.lineHeight/2),a.y+=r.lineHeight+c,l+1===o&&(a.y+=s.titleMarginBottom-c)}}_drawColorBox(a,t,s,u,o){const r=this.labelColors[s],c=this.labelPointStyles[s],{boxHeight:l,boxWidth:n}=o,f=hs(o.bodyFont),h=S0(this,"left",o),p=u.x(h),g=l<f.lineHeight?(f.lineHeight-l)/2:0,v=t.y+g;if(o.usePointStyle){const x={radius:Math.min(n,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=u.leftForLtr(p,n)+n/2,w=v+l/2;a.strokeStyle=o.multiKeyBackground,a.fillStyle=o.multiKeyBackground,$g(a,x,y,w),a.strokeStyle=r.borderColor,a.fillStyle=r.backgroundColor,$g(a,x,y,w)}else{a.lineWidth=Sr(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,a.strokeStyle=r.borderColor,a.setLineDash(r.borderDash||[]),a.lineDashOffset=r.borderDashOffset||0;const x=u.leftForLtr(p,n),y=u.leftForLtr(u.xPlus(p,1),n-2),w=Zd(r.borderRadius);Object.values(w).some(S=>S!==0)?(a.beginPath(),a.fillStyle=o.multiKeyBackground,ym(a,{x,y:v,w:n,h:l,radius:w}),a.fill(),a.stroke(),a.fillStyle=r.backgroundColor,a.beginPath(),ym(a,{x:y,y:v+1,w:n-2,h:l-2,radius:w}),a.fill()):(a.fillStyle=o.multiKeyBackground,a.fillRect(x,v,n,l),a.strokeRect(x,v,n,l),a.fillStyle=r.backgroundColor,a.fillRect(y,v+1,n-2,l-2))}a.fillStyle=this.labelTextColors[s]}drawBody(a,t,s){const{body:u}=this,{bodySpacing:o,bodyAlign:r,displayColors:c,boxHeight:l,boxWidth:n,boxPadding:f}=s,h=hs(s.bodyFont);let p=h.lineHeight,g=0;const v=Xh(s.rtl,this.x,this.width),x=function(z){t.fillText(z,v.x(a.x+g),a.y+p/2),a.y+=p+o},y=v.textAlign(r);let w,S,E,I,D,Z,K;for(t.textAlign=r,t.textBaseline="middle",t.font=h.string,a.x=S0(this,y,s),t.fillStyle=s.bodyColor,Zr(this.beforeBody,x),g=c&&y!=="right"?r==="center"?n/2+f:n+2+f:0,I=0,Z=u.length;I<Z;++I){for(w=u[I],S=this.labelTextColors[I],t.fillStyle=S,Zr(w.before,x),E=w.lines,c&&E.length&&(this._drawColorBox(t,a,I,v,s),p=Math.max(h.lineHeight,l)),D=0,K=E.length;D<K;++D)x(E[D]),p=h.lineHeight;Zr(w.after,x)}g=0,p=h.lineHeight,Zr(this.afterBody,x),a.y-=o}drawFooter(a,t,s){const u=this.footer,o=u.length;let r,c;if(o){const l=Xh(s.rtl,this.x,this.width);for(a.x=S0(this,s.footerAlign,s),a.y+=s.footerMarginTop,t.textAlign=l.textAlign(s.footerAlign),t.textBaseline="middle",r=hs(s.footerFont),t.fillStyle=s.footerColor,t.font=r.string,c=0;c<o;++c)t.fillText(u[c],l.x(a.x),a.y+r.lineHeight/2),a.y+=r.lineHeight+s.footerSpacing}}drawBackground(a,t,s,u){const{xAlign:o,yAlign:r}=this,{x:c,y:l}=a,{width:n,height:f}=s,{topLeft:h,topRight:p,bottomLeft:g,bottomRight:v}=Zd(u.cornerRadius);t.fillStyle=u.backgroundColor,t.strokeStyle=u.borderColor,t.lineWidth=u.borderWidth,t.beginPath(),t.moveTo(c+h,l),r==="top"&&this.drawCaret(a,t,s,u),t.lineTo(c+n-p,l),t.quadraticCurveTo(c+n,l,c+n,l+p),r==="center"&&o==="right"&&this.drawCaret(a,t,s,u),t.lineTo(c+n,l+f-v),t.quadraticCurveTo(c+n,l+f,c+n-v,l+f),r==="bottom"&&this.drawCaret(a,t,s,u),t.lineTo(c+g,l+f),t.quadraticCurveTo(c,l+f,c,l+f-g),r==="center"&&o==="left"&&this.drawCaret(a,t,s,u),t.lineTo(c,l+h),t.quadraticCurveTo(c,l,c+h,l),t.closePath(),t.fill(),u.borderWidth>0&&t.stroke()}_updateAnimationTarget(a){const t=this.chart,s=this.$animations,u=s&&s.x,o=s&&s.y;if(u||o){const r=lm[a.position].call(this,this._active,this._eventPosition);if(!r)return;const c=this._size=zy(this,a),l=Object.assign({},r,this._size),n=Fy(t,a,l),f=Uy(a,l,n,t);(u._to!==f.x||o._to!==f.y)&&(this.xAlign=n.xAlign,this.yAlign=n.yAlign,this.width=c.width,this.height=c.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(a){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const u={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const r=so(t.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&c&&(a.save(),a.globalAlpha=s,this.drawBackground(o,a,u,t),Z1(a,t.textDirection),o.y+=r.top,this.drawTitle(o,a,t),this.drawBody(o,a,t),this.drawFooter(o,a,t),X1(a,t.textDirection),a.restore())}getActiveElements(){return this._active||[]}setActiveElements(a,t){const s=this._active,u=a.map(({datasetIndex:c,index:l})=>{const n=this.chart.getDatasetMeta(c);if(!n)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:n.data[l],index:l}}),o=!P0(s,u),r=this._positionChanged(u,t);(o||r)&&(this._active=u,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(a,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const u=this.options,o=this._active||[],r=this._getActiveElements(a,o,t,s),c=this._positionChanged(r,a),l=t||!P0(r,o)||c;return l&&(this._active=r,(u.enabled||u.external)&&(this._eventPosition={x:a.x,y:a.y},this.update(!0,t))),l}_getActiveElements(a,t,s,u){const o=this.options;if(a.type==="mouseout")return[];if(!u)return t.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const r=this.chart.getElementsAtEventForMode(a,o.mode,o,s);return o.reverse&&r.reverse(),r}_positionChanged(a,t){const{caretX:s,caretY:u,options:o}=this,r=lm[o.position].call(this,a,t);return r!==!1&&(s!==r.x||u!==r.y)}}var $3={id:"tooltip",_element:$y,positioners:lm,afterInit(m,a,t){t&&(m.tooltip=new $y({chart:m,options:t}))},beforeUpdate(m,a,t){m.tooltip&&m.tooltip.initialize(t)},reset(m,a,t){m.tooltip&&m.tooltip.initialize(t)},afterDraw(m){const a=m.tooltip;if(a&&a._willRender()){const t={tooltip:a};if(m.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;a.draw(m.ctx),m.notifyPlugins("afterTooltipDraw",t)}},afterEvent(m,a){if(m.tooltip){const t=a.replay;m.tooltip.handleEvent(a.event,t,a.inChartArea)&&(a.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(m,a)=>a.bodyFont.size,boxWidth:(m,a)=>a.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Cv},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:m=>m!=="filter"&&m!=="itemSort"&&m!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},W3=Object.freeze({__proto__:null,Colors:r3,Decimation:a3,Filler:M3,Legend:O3,SubTitle:P3,Title:L3,Tooltip:$3});const q3=(m,a,t,s)=>(typeof a=="string"?(t=m.push(a)-1,s.unshift({index:t,label:a})):isNaN(a)&&(t=null),t);function G3(m,a,t,s){const u=m.indexOf(a);if(u===-1)return q3(m,a,t,s);const o=m.lastIndexOf(a);return u!==o?t:u}const Z3=(m,a)=>m===null?null:Hs(Math.round(m),0,a);function Wy(m){const a=this.getLabels();return m>=0&&m<a.length?a[m]:m}class X3 extends Qd{static id="category";static defaults={ticks:{callback:Wy}};constructor(a){super(a),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(a){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:u,label:o}of t)s[u]===o&&s.splice(u,1);this._addedLabels=[]}super.init(a)}parse(a,t){if(ar(a))return null;const s=this.getLabels();return t=isFinite(t)&&s[t]===a?t:G3(s,a,tr(t,a),this._addedLabels),Z3(t,s.length-1)}determineDataLimits(){const{minDefined:a,maxDefined:t}=this.getUserBounds();let{min:s,max:u}=this.getMinMax(!0);this.options.bounds==="ticks"&&(a||(s=0),t||(u=this.getLabels().length-1)),this.min=s,this.max=u}buildTicks(){const a=this.min,t=this.max,s=this.options.offset,u=[];let o=this.getLabels();o=a===0&&t===o.length-1?o:o.slice(a,t+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let r=a;r<=t;r++)u.push({value:r});return u}getLabelForValue(a){return Wy.call(this,a)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(a){return typeof a!="number"&&(a=this.parse(a)),a===null?NaN:this.getPixelForDecimal((a-this._startValue)/this._valueRange)}getPixelForTick(a){const t=this.ticks;return a<0||a>t.length-1?null:this.getPixelForValue(t[a].value)}getValueForPixel(a){return Math.round(this._startValue+this.getDecimalForPixel(a)*this._valueRange)}getBasePixel(){return this.bottom}}function Y3(m,a){const t=[],{bounds:u,step:o,min:r,max:c,precision:l,count:n,maxTicks:f,maxDigits:h,includeBounds:p}=m,g=o||1,v=f-1,{min:x,max:y}=a,w=!ar(r),S=!ar(c),E=!ar(n),I=(y-x)/(h+1);let D=zb((y-x)/v/g)*g,Z,K,z,W;if(D<1e-14&&!w&&!S)return[{value:x},{value:y}];W=Math.ceil(y/D)-Math.floor(x/D),W>v&&(D=zb(W*D/v/g)*g),ar(l)||(Z=Math.pow(10,l),D=Math.ceil(D*Z)/Z),u==="ticks"?(K=Math.floor(x/D)*D,z=Math.ceil(y/D)*D):(K=x,z=y),w&&S&&o&&Lx((c-r)/o,D/1e3)?(W=Math.round(Math.min((c-r)/D,f)),D=(c-r)/W,K=r,z=c):E?(K=w?r:K,z=S?c:z,W=n-1,D=(z-K)/W):(W=(z-K)/D,um(W,Math.round(W),D/1e3)?W=Math.round(W):W=Math.ceil(W));const Q=Math.max(Fb(D),Fb(K));Z=Math.pow(10,ar(l)?Q:l),K=Math.round(K*Z)/Z,z=Math.round(z*Z)/Z;let rt=0;for(w&&(p&&K!==r?(t.push({value:r}),K<r&&rt++,um(Math.round((K+rt*D)*Z)/Z,r,qy(r,I,m))&&rt++):K<r&&rt++);rt<W;++rt){const tt=Math.round((K+rt*D)*Z)/Z;if(S&&tt>c)break;t.push({value:tt})}return S&&p&&z!==c?t.length&&um(t[t.length-1].value,c,qy(c,I,m))?t[t.length-1].value=c:t.push({value:c}):(!S||z===c)&&t.push({value:z}),t}function qy(m,a,{horizontal:t,minRotation:s}){const u=Gl(s),o=(t?Math.sin(u):Math.cos(u))||.001,r=.75*a*(""+m).length;return Math.min(a/o,r)}class V0 extends Qd{constructor(a){super(a),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(a,t){return ar(a)||(typeof a=="number"||a instanceof Number)&&!isFinite(+a)?null:+a}handleTickRangeOptions(){const{beginAtZero:a}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:u,max:o}=this;const r=l=>u=t?u:l,c=l=>o=s?o:l;if(a){const l=Pc(u),n=Pc(o);l<0&&n<0?c(0):l>0&&n>0&&r(0)}if(u===o){let l=o===0?1:Math.abs(o*.05);c(o+l),a||r(u-l)}this.min=u,this.max=o}getTickLimit(){const a=this.options.ticks;let{maxTicksLimit:t,stepSize:s}=a,u;return s?(u=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,u>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${u} ticks. Limiting to 1000.`),u=1e3)):(u=this.computeTickLimit(),t=t||11),t&&(u=Math.min(t,u)),u}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const a=this.options,t=a.ticks;let s=this.getTickLimit();s=Math.max(2,s);const u={maxTicks:s,bounds:a.bounds,min:a.min,max:a.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,r=Y3(u,o);return a.bounds==="ticks"&&R1(r,this,"value"),a.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const a=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&a.length){const u=(s-t)/Math.max(a.length-1,1)/2;t-=u,s+=u}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(a){return wm(a,this.chart.options.locale,this.options.ticks.format)}}class K3 extends V0{static id="linear";static defaults={ticks:{callback:W0.formatters.numeric}};determineDataLimits(){const{min:a,max:t}=this.getMinMax(!0);this.min=Di(a)?a:0,this.max=Di(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const a=this.isHorizontal(),t=a?this.width:this.height,s=Gl(this.options.ticks.minRotation),u=(a?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/u))}getPixelForValue(a){return a===null?NaN:this.getPixelForDecimal((a-this._startValue)/this._valueRange)}getValueForPixel(a){return this._startValue+this.getDecimalForPixel(a)*this._valueRange}}const xm=m=>Math.floor(Uf(m)),Wd=(m,a)=>Math.pow(10,xm(m)+a);function Gy(m){return m/Math.pow(10,xm(m))===1}function Zy(m,a,t){const s=Math.pow(10,t),u=Math.floor(m/s);return Math.ceil(a/s)-u}function Q3(m,a){const t=a-m;let s=xm(t);for(;Zy(m,a,s)>10;)s++;for(;Zy(m,a,s)<10;)s--;return Math.min(s,xm(m))}function J3(m,{min:a,max:t}){a=ja(m.min,a);const s=[],u=xm(a);let o=Q3(a,t),r=o<0?Math.pow(10,Math.abs(o)):1;const c=Math.pow(10,o),l=u>o?Math.pow(10,u):0,n=Math.round((a-l)*r)/r,f=Math.floor((a-l)/c/10)*c*10;let h=Math.floor((n-f)/Math.pow(10,o)),p=ja(m.min,Math.round((l+f+h*Math.pow(10,o))*r)/r);for(;p<t;)s.push({value:p,major:Gy(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,r=o>=0?1:r),p=Math.round((l+f+h*Math.pow(10,o))*r)/r;const g=ja(m.max,p);return s.push({value:g,major:Gy(g),significand:h}),s}class t4 extends Qd{static id="logarithmic";static defaults={ticks:{callback:W0.formatters.logarithmic,major:{enabled:!0}}};constructor(a){super(a),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(a,t){const s=V0.prototype.parse.apply(this,[a,t]);if(s===0){this._zero=!0;return}return Di(s)&&s>0?s:null}determineDataLimits(){const{min:a,max:t}=this.getMinMax(!0);this.min=Di(a)?Math.max(0,a):null,this.max=Di(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Di(this._userMin)&&(this.min=a===Wd(this.min,0)?Wd(this.min,-1):Wd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:a,maxDefined:t}=this.getUserBounds();let s=this.min,u=this.max;const o=c=>s=a?s:c,r=c=>u=t?u:c;s===u&&(s<=0?(o(1),r(10)):(o(Wd(s,-1)),r(Wd(u,1)))),s<=0&&o(Wd(u,-1)),u<=0&&r(Wd(s,1)),this.min=s,this.max=u}buildTicks(){const a=this.options,t={min:this._userMin,max:this._userMax},s=J3(t,this);return a.bounds==="ticks"&&R1(s,this,"value"),a.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(a){return a===void 0?"0":wm(a,this.chart.options.locale,this.options.ticks.format)}configure(){const a=this.min;super.configure(),this._startValue=Uf(a),this._valueRange=Uf(this.max)-Uf(a)}getPixelForValue(a){return(a===void 0||a===0)&&(a=this.min),a===null||isNaN(a)?NaN:this.getPixelForDecimal(a===this.min?0:(Uf(a)-this._startValue)/this._valueRange)}getValueForPixel(a){const t=this.getDecimalForPixel(a);return Math.pow(10,this._startValue+t*this._valueRange)}}function Yg(m){const a=m.ticks;if(a.display&&m.display){const t=so(a.backdropPadding);return tr(a.font&&a.font.size,yi.font.size)+t.height}return 0}function e4(m,a,t){return t=gi(t)?t:[t],{w:Qx(m,a.string,t),h:t.length*a.lineHeight}}function Xy(m,a,t,s,u){return m===s||m===u?{start:a-t/2,end:a+t/2}:m<s||m>u?{start:a-t,end:a}:{start:a,end:a+t}}function n4(m){const a={l:m.left+m._padding.left,r:m.right-m._padding.right,t:m.top+m._padding.top,b:m.bottom-m._padding.bottom},t=Object.assign({},a),s=[],u=[],o=m._pointLabels.length,r=m.options.pointLabels,c=r.centerPointLabels?Br/o:0;for(let l=0;l<o;l++){const n=r.setContext(m.getPointLabelContext(l));u[l]=n.padding;const f=m.getPointPosition(l,m.drawingArea+u[l],c),h=hs(n.font),p=e4(m.ctx,h,m._pointLabels[l]);s[l]=p;const g=yo(m.getIndexAngle(l)+c),v=Math.round(sb(g)),x=Xy(v,f.x,p.w,0,180),y=Xy(v,f.y,p.h,90,270);r4(t,a,g,x,y)}m.setCenterPoint(a.l-t.l,t.r-a.r,a.t-t.t,t.b-a.b),m._pointLabelItems=o4(m,s,u)}function r4(m,a,t,s,u){const o=Math.abs(Math.sin(t)),r=Math.abs(Math.cos(t));let c=0,l=0;s.start<a.l?(c=(a.l-s.start)/o,m.l=Math.min(m.l,a.l-c)):s.end>a.r&&(c=(s.end-a.r)/o,m.r=Math.max(m.r,a.r+c)),u.start<a.t?(l=(a.t-u.start)/r,m.t=Math.min(m.t,a.t-l)):u.end>a.b&&(l=(u.end-a.b)/r,m.b=Math.max(m.b,a.b+l))}function i4(m,a,t){const s=m.drawingArea,{extra:u,additionalAngle:o,padding:r,size:c}=t,l=m.getPointPosition(a,s+u+r,o),n=Math.round(sb(yo(l.angle+es))),f=c4(l.y,c.h,n),h=a4(n),p=l4(l.x,c.w,h);return{visible:!0,x:l.x,y:f,textAlign:h,left:p,top:f,right:p+c.w,bottom:f+c.h}}function s4(m,a){if(!a)return!0;const{left:t,top:s,right:u,bottom:o}=m;return!(ju({x:t,y:s},a)||ju({x:t,y:o},a)||ju({x:u,y:s},a)||ju({x:u,y:o},a))}function o4(m,a,t){const s=[],u=m._pointLabels.length,o=m.options,{centerPointLabels:r,display:c}=o.pointLabels,l={extra:Yg(o)/2,additionalAngle:r?Br/u:0};let n;for(let f=0;f<u;f++){l.padding=t[f],l.size=a[f];const h=i4(m,f,l);s.push(h),c==="auto"&&(h.visible=s4(h,n),h.visible&&(n=h))}return s}function a4(m){return m===0||m===180?"center":m<180?"left":"right"}function l4(m,a,t){return t==="right"?m-=a:t==="center"&&(m-=a/2),m}function c4(m,a,t){return t===90||t===270?m-=a/2:(t>270||t<90)&&(m-=a),m}function u4(m,a,t){const{left:s,top:u,right:o,bottom:r}=t,{backdropColor:c}=a;if(!ar(c)){const l=Zd(a.borderRadius),n=so(a.backdropPadding);m.fillStyle=c;const f=s-n.left,h=u-n.top,p=o-s+n.width,g=r-u+n.height;Object.values(l).some(v=>v!==0)?(m.beginPath(),ym(m,{x:f,y:h,w:p,h:g,radius:l}),m.fill()):m.fillRect(f,h,p,g)}}function f4(m,a){const{ctx:t,options:{pointLabels:s}}=m;for(let u=a-1;u>=0;u--){const o=m._pointLabelItems[u];if(!o.visible)continue;const r=s.setContext(m.getPointLabelContext(u));u4(t,r,o);const c=hs(r.font),{x:l,y:n,textAlign:f}=o;Kd(t,m._pointLabels[u],l,n+c.lineHeight/2,c,{color:r.color,textAlign:f,textBaseline:"middle"})}}function kv(m,a,t,s){const{ctx:u}=m;if(t)u.arc(m.xCenter,m.yCenter,a,0,bi);else{let o=m.getPointPosition(0,a);u.moveTo(o.x,o.y);for(let r=1;r<s;r++)o=m.getPointPosition(r,a),u.lineTo(o.x,o.y)}}function d4(m,a,t,s,u){const o=m.ctx,r=a.circular,{color:c,lineWidth:l}=a;!r&&!s||!c||!l||t<0||(o.save(),o.strokeStyle=c,o.lineWidth=l,o.setLineDash(u.dash||[]),o.lineDashOffset=u.dashOffset,o.beginPath(),kv(m,t,r,s),o.closePath(),o.stroke(),o.restore())}function h4(m,a,t){return Zf(m,{label:t,index:a,type:"pointLabel"})}class p4 extends V0{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:W0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(a){return a},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(a){super(a),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const a=this._padding=so(Yg(this.options)/2),t=this.width=this.maxWidth-a.width,s=this.height=this.maxHeight-a.height;this.xCenter=Math.floor(this.left+t/2+a.left),this.yCenter=Math.floor(this.top+s/2+a.top),this.drawingArea=Math.floor(Math.min(t,s)/2)}determineDataLimits(){const{min:a,max:t}=this.getMinMax(!1);this.min=Di(a)&&!isNaN(a)?a:0,this.max=Di(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Yg(this.options))}generateTickLabels(a){V0.prototype.generateTickLabels.call(this,a),this._pointLabels=this.getLabels().map((t,s)=>{const u=ii(this.options.pointLabels.callback,[t,s],this);return u||u===0?u:""}).filter((t,s)=>this.chart.getDataVisibility(s))}fit(){const a=this.options;a.display&&a.pointLabels.display?n4(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(a,t,s,u){this.xCenter+=Math.floor((a-t)/2),this.yCenter+=Math.floor((s-u)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(a,t,s,u))}getIndexAngle(a){const t=bi/(this._pointLabels.length||1),s=this.options.startAngle||0;return yo(a*t+Gl(s))}getDistanceFromCenterForValue(a){if(ar(a))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-a)*t:(a-this.min)*t}getValueForDistanceFromCenter(a){if(ar(a))return NaN;const t=a/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(a){const t=this._pointLabels||[];if(a>=0&&a<t.length){const s=t[a];return h4(this.getContext(),a,s)}}getPointPosition(a,t,s=0){const u=this.getIndexAngle(a)-es+s;return{x:Math.cos(u)*t+this.xCenter,y:Math.sin(u)*t+this.yCenter,angle:u}}getPointPositionForValue(a,t){return this.getPointPosition(a,this.getDistanceFromCenterForValue(t))}getBasePosition(a){return this.getPointPositionForValue(a||0,this.getBaseValue())}getPointLabelPosition(a){const{left:t,top:s,right:u,bottom:o}=this._pointLabelItems[a];return{left:t,top:s,right:u,bottom:o}}drawBackground(){const{backgroundColor:a,grid:{circular:t}}=this.options;if(a){const s=this.ctx;s.save(),s.beginPath(),kv(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),s.closePath(),s.fillStyle=a,s.fill(),s.restore()}}drawGrid(){const a=this.ctx,t=this.options,{angleLines:s,grid:u,border:o}=t,r=this._pointLabels.length;let c,l,n;if(t.pointLabels.display&&f4(this,r),u.display&&this.ticks.forEach((f,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(f.value);const p=this.getContext(h),g=u.setContext(p),v=o.setContext(p);d4(this,g,l,r,v)}}),s.display){for(a.save(),c=r-1;c>=0;c--){const f=s.setContext(this.getPointLabelContext(c)),{color:h,lineWidth:p}=f;!p||!h||(a.lineWidth=p,a.strokeStyle=h,a.setLineDash(f.borderDash),a.lineDashOffset=f.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),n=this.getPointPosition(c,l),a.beginPath(),a.moveTo(this.xCenter,this.yCenter),a.lineTo(n.x,n.y),a.stroke())}a.restore()}}drawBorder(){}drawLabels(){const a=this.ctx,t=this.options,s=t.ticks;if(!s.display)return;const u=this.getIndexAngle(0);let o,r;a.save(),a.translate(this.xCenter,this.yCenter),a.rotate(u),a.textAlign="center",a.textBaseline="middle",this.ticks.forEach((c,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const n=s.setContext(this.getContext(l)),f=hs(n.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),n.showLabelBackdrop){a.font=f.string,r=a.measureText(c.label).width,a.fillStyle=n.backdropColor;const h=so(n.backdropPadding);a.fillRect(-r/2-h.left,-o-f.size/2-h.top,r+h.width,f.size+h.height)}Kd(a,c.label,0,-o,f,{color:n.color,strokeColor:n.textStrokeColor,strokeWidth:n.textStrokeWidth})}),a.restore()}drawTitle(){}}const J0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ha=Object.keys(J0);function Yy(m,a){return m-a}function Ky(m,a){if(ar(a))return null;const t=m._adapter,{parser:s,round:u,isoWeekday:o}=m._parseOpts;let r=a;return typeof s=="function"&&(r=s(r)),Di(r)||(r=typeof s=="string"?t.parse(r,s):t.parse(r)),r===null?null:(u&&(r=u==="week"&&(Yh(o)||o===!0)?t.startOf(r,"isoWeek",o):t.startOf(r,u)),+r)}function Qy(m,a,t,s){const u=ha.length;for(let o=ha.indexOf(m);o<u-1;++o){const r=J0[ha[o]],c=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((t-a)/(c*r.size))<=s)return ha[o]}return ha[u-1]}function m4(m,a,t,s,u){for(let o=ha.length-1;o>=ha.indexOf(t);o--){const r=ha[o];if(J0[r].common&&m._adapter.diff(u,s,r)>=a-1)return r}return ha[t?ha.indexOf(t):0]}function g4(m){for(let a=ha.indexOf(m)+1,t=ha.length;a<t;++a)if(J0[ha[a]].common)return ha[a]}function Jy(m,a,t){if(!t)m[a]=!0;else if(t.length){const{lo:s,hi:u}=ob(t,a),o=t[s]>=a?t[s]:t[u];m[o]=!0}}function b4(m,a,t,s){const u=m._adapter,o=+u.startOf(a[0].value,s),r=a[a.length-1].value;let c,l;for(c=o;c<=r;c=+u.add(c,1,s))l=t[c],l>=0&&(a[l].major=!0);return a}function t1(m,a,t){const s=[],u={},o=a.length;let r,c;for(r=0;r<o;++r)c=a[r],u[c]=r,s.push({value:c,major:!1});return o===0||!t?s:b4(m,s,u,t)}class Kg extends Qd{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(a){super(a),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(a,t={}){const s=a.time||(a.time={}),u=this._adapter=new __._date(a.adapters.date);u.init(t),cm(s.displayFormats,u.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(a),this._normalized=t.normalized}parse(a,t){return a===void 0?null:Ky(this,a)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const a=this.options,t=this._adapter,s=a.time.unit||"day";let{min:u,max:o,minDefined:r,maxDefined:c}=this.getUserBounds();function l(n){!r&&!isNaN(n.min)&&(u=Math.min(u,n.min)),!c&&!isNaN(n.max)&&(o=Math.max(o,n.max))}(!r||!c)&&(l(this._getLabelBounds()),(a.bounds!=="ticks"||a.ticks.source!=="labels")&&l(this.getMinMax(!1))),u=Di(u)&&!isNaN(u)?u:+t.startOf(Date.now(),s),o=Di(o)&&!isNaN(o)?o:+t.endOf(Date.now(),s)+1,this.min=Math.min(u,o-1),this.max=Math.max(u+1,o)}_getLabelBounds(){const a=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return a.length&&(t=a[0],s=a[a.length-1]),{min:t,max:s}}buildTicks(){const a=this.options,t=a.time,s=a.ticks,u=s.source==="labels"?this.getLabelTimestamps():this._generate();a.bounds==="ticks"&&u.length&&(this.min=this._userMin||u[0],this.max=this._userMax||u[u.length-1]);const o=this.min,r=this.max,c=zx(u,o,r);return this._unit=t.unit||(s.autoSkip?Qy(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):m4(this,c.length,t.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:g4(this._unit),this.initOffsets(u),a.reverse&&c.reverse(),t1(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(a=>+a.value))}initOffsets(a=[]){let t=0,s=0,u,o;this.options.offset&&a.length&&(u=this.getDecimalForValue(a[0]),a.length===1?t=1-u:t=(this.getDecimalForValue(a[1])-u)/2,o=this.getDecimalForValue(a[a.length-1]),a.length===1?s=o:s=(o-this.getDecimalForValue(a[a.length-2]))/2);const r=a.length<3?.5:.25;t=Hs(t,0,r),s=Hs(s,0,r),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const a=this._adapter,t=this.min,s=this.max,u=this.options,o=u.time,r=o.unit||Qy(o.minUnit,t,s,this._getLabelCapacity(t)),c=tr(u.ticks.stepSize,1),l=r==="week"?o.isoWeekday:!1,n=Yh(l)||l===!0,f={};let h=t,p,g;if(n&&(h=+a.startOf(h,"isoWeek",l)),h=+a.startOf(h,n?"day":r),a.diff(s,t,r)>1e5*c)throw new Error(t+" and "+s+" are too far apart with stepSize of "+c+" "+r);const v=u.ticks.source==="data"&&this.getDataTimestamps();for(p=h,g=0;p<s;p=+a.add(p,c,r),g++)Jy(f,p,v);return(p===s||u.bounds==="ticks"||g===1)&&Jy(f,p,v),Object.keys(f).sort(Yy).map(x=>+x)}getLabelForValue(a){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(a,s.tooltipFormat):t.format(a,s.displayFormats.datetime)}format(a,t){const u=this.options.time.displayFormats,o=this._unit,r=t||u[o];return this._adapter.format(a,r)}_tickFormatFunction(a,t,s,u){const o=this.options,r=o.ticks.callback;if(r)return ii(r,[a,t,s],this);const c=o.time.displayFormats,l=this._unit,n=this._majorUnit,f=l&&c[l],h=n&&c[n],p=s[t],g=n&&h&&p&&p.major;return this._adapter.format(a,u||(g?h:f))}generateTickLabels(a){let t,s,u;for(t=0,s=a.length;t<s;++t)u=a[t],u.label=this._tickFormatFunction(u.value,t,a)}getDecimalForValue(a){return a===null?NaN:(a-this.min)/(this.max-this.min)}getPixelForValue(a){const t=this._offsets,s=this.getDecimalForValue(a);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(a){const t=this._offsets,s=this.getDecimalForPixel(a)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(a){const t=this.options.ticks,s=this.ctx.measureText(a).width,u=Gl(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(u),r=Math.sin(u),c=this._resolveTickFontOptions(0).size;return{w:s*o+c*r,h:s*r+c*o}}_getLabelCapacity(a){const t=this.options.time,s=t.displayFormats,u=s[t.unit]||s.millisecond,o=this._tickFormatFunction(a,0,t1(this,[a],this._majorUnit),u),r=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return c>0?c:1}getDataTimestamps(){let a=this._cache.data||[],t,s;if(a.length)return a;const u=this.getMatchingVisibleMetas();if(this._normalized&&u.length)return this._cache.data=u[0].controller.getAllParsedValues(this);for(t=0,s=u.length;t<s;++t)a=a.concat(u[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(a)}getLabelTimestamps(){const a=this._cache.labels||[];let t,s;if(a.length)return a;const u=this.getLabels();for(t=0,s=u.length;t<s;++t)a.push(Ky(this,u[t]));return this._cache.labels=this._normalized?a:this.normalize(a)}normalize(a){return j1(a.sort(Yy))}}function T0(m,a,t){let s=0,u=m.length-1,o,r,c,l;t?(a>=m[s].pos&&a<=m[u].pos&&({lo:s,hi:u}=Ou(m,"pos",a)),{pos:o,time:c}=m[s],{pos:r,time:l}=m[u]):(a>=m[s].time&&a<=m[u].time&&({lo:s,hi:u}=Ou(m,"time",a)),{time:o,pos:c}=m[s],{time:r,pos:l}=m[u]);const n=r-o;return n?c+(l-c)*(a-o)/n:c}class y4 extends Kg{static id="timeseries";static defaults=Kg.defaults;constructor(a){super(a),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const a=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(a);this._minPos=T0(t,this.min),this._tableRange=T0(t,this.max)-this._minPos,super.initOffsets(a)}buildLookupTable(a){const{min:t,max:s}=this,u=[],o=[];let r,c,l,n,f;for(r=0,c=a.length;r<c;++r)n=a[r],n>=t&&n<=s&&u.push(n);if(u.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(r=0,c=u.length;r<c;++r)f=u[r+1],l=u[r-1],n=u[r],Math.round((f+l)/2)!==n&&o.push({time:n,pos:r/(c-1)});return o}_generate(){const a=this.min,t=this.max;let s=super.getDataTimestamps();return(!s.includes(a)||!s.length)&&s.splice(0,0,a),(!s.includes(t)||s.length===1)&&s.push(t),s.sort((u,o)=>u-o)}_getTimestampsForTable(){let a=this._cache.all||[];if(a.length)return a;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return t.length&&s.length?a=this.normalize(t.concat(s)):a=t.length?t:s,a=this._cache.all=a,a}getDecimalForValue(a){return(T0(this._table,a)-this._minPos)/this._tableRange}getValueForPixel(a){const t=this._offsets,s=this.getDecimalForPixel(a)/t.factor-t.end;return T0(this._table,s*this._tableRange+this._minPos,!0)}}var v4=Object.freeze({__proto__:null,CategoryScale:X3,LinearScale:K3,LogarithmicScale:t4,RadialLinearScale:p4,TimeScale:Kg,TimeSeriesScale:y4});const x4=[x_,Yw,W3,v4];Y0.register(...x4);var e1=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var m=window.screen;if(m)return(m.deviceXDPI||1)/(m.logicalXDPI||1)}return 1})(),hm={toTextLines:function(m){var a=[],t;for(m=[].concat(m);m.length;)t=m.pop(),typeof t=="string"?a.unshift.apply(a,t.split(`
`)):Array.isArray(t)?m.push.apply(m,t):ar(m)||a.unshift(""+t);return a},textSize:function(m,a,t){var s=[].concat(a),u=s.length,o=m.font,r=0,c;for(m.font=t.string,c=0;c<u;++c)r=Math.max(m.measureText(s[c]).width,r);return m.font=o,{height:u*t.lineHeight,width:r}},bound:function(m,a,t){return Math.max(m,Math.min(a,t))},arrayDiff:function(m,a){var t=m.slice(),s=[],u,o,r,c;for(u=0,r=a.length;u<r;++u)c=a[u],o=t.indexOf(c),o===-1?s.push([c,1]):t.splice(o,1);for(u=0,r=t.length;u<r;++u)s.push([t[u],-1]);return s},rasterize:function(m){return Math.round(m*e1)/e1}};function Dg(m,a){var t=a.x,s=a.y;if(t===null)return{x:0,y:-1};if(s===null)return{x:1,y:0};var u=m.x-t,o=m.y-s,r=Math.sqrt(u*u+o*o);return{x:r?u/r:0,y:r?o/r:-1}}function _4(m,a,t,s,u){switch(u){case"center":t=s=0;break;case"bottom":t=0,s=1;break;case"right":t=1,s=0;break;case"left":t=-1,s=0;break;case"top":t=0,s=-1;break;case"start":t=-t,s=-s;break;case"end":break;default:u*=Math.PI/180,t=Math.cos(u),s=Math.sin(u);break}return{x:m,y:a,vx:t,vy:s}}var w4=0,Mv=1,Ev=2,Nv=4,Av=8;function C0(m,a,t){var s=w4;return m<t.left?s|=Mv:m>t.right&&(s|=Ev),a<t.top?s|=Av:a>t.bottom&&(s|=Nv),s}function S4(m,a){for(var t=m.x0,s=m.y0,u=m.x1,o=m.y1,r=C0(t,s,a),c=C0(u,o,a),l,n,f;!(!(r|c)||r&c);)l=r||c,l&Av?(n=t+(u-t)*(a.top-s)/(o-s),f=a.top):l&Nv?(n=t+(u-t)*(a.bottom-s)/(o-s),f=a.bottom):l&Ev?(f=s+(o-s)*(a.right-t)/(u-t),n=a.right):l&Mv&&(f=s+(o-s)*(a.left-t)/(u-t),n=a.left),l===r?(t=n,s=f,r=C0(t,s,a)):(u=n,o=f,c=C0(u,o,a));return{x0:t,x1:u,y0:s,y1:o}}function k0(m,a){var t=a.anchor,s=m,u,o;return a.clamp&&(s=S4(s,a.area)),t==="start"?(u=s.x0,o=s.y0):t==="end"?(u=s.x1,o=s.y1):(u=(s.x0+s.x1)/2,o=(s.y0+s.y1)/2),_4(u,o,m.vx,m.vy,a.align)}var M0={arc:function(m,a){var t=(m.startAngle+m.endAngle)/2,s=Math.cos(t),u=Math.sin(t),o=m.innerRadius,r=m.outerRadius;return k0({x0:m.x+s*o,y0:m.y+u*o,x1:m.x+s*r,y1:m.y+u*r,vx:s,vy:u},a)},point:function(m,a){var t=Dg(m,a.origin),s=t.x*m.options.radius,u=t.y*m.options.radius;return k0({x0:m.x-s,y0:m.y-u,x1:m.x+s,y1:m.y+u,vx:t.x,vy:t.y},a)},bar:function(m,a){var t=Dg(m,a.origin),s=m.x,u=m.y,o=0,r=0;return m.horizontal?(s=Math.min(m.x,m.base),o=Math.abs(m.base-m.x)):(u=Math.min(m.y,m.base),r=Math.abs(m.base-m.y)),k0({x0:s,y0:u+r,x1:s+o,y1:u,vx:t.x,vy:t.y},a)},fallback:function(m,a){var t=Dg(m,a.origin);return k0({x0:m.x,y0:m.y,x1:m.x+(m.width||0),y1:m.y+(m.height||0),vx:t.x,vy:t.y},a)}},Lu=hm.rasterize;function T4(m){var a=m.borderWidth||0,t=m.padding,s=m.size.height,u=m.size.width,o=-u/2,r=-s/2;return{frame:{x:o-t.left-a,y:r-t.top-a,w:u+t.width+a*2,h:s+t.height+a*2},text:{x:o,y:r,w:u,h:s}}}function C4(m,a){var t=a.chart.getDatasetMeta(a.datasetIndex).vScale;if(!t)return null;if(t.xCenter!==void 0&&t.yCenter!==void 0)return{x:t.xCenter,y:t.yCenter};var s=t.getBasePixel();return m.horizontal?{x:s,y:null}:{x:null,y:s}}function k4(m){return m instanceof hv?M0.arc:m instanceof gv?M0.point:m instanceof yv?M0.bar:M0.fallback}function M4(m,a,t,s,u,o){var r=Math.PI/2;if(o){var c=Math.min(o,u/2,s/2),l=a+c,n=t+c,f=a+s-c,h=t+u-c;m.moveTo(a,n),l<f&&n<h?(m.arc(l,n,c,-Math.PI,-r),m.arc(f,n,c,-r,0),m.arc(f,h,c,0,r),m.arc(l,h,c,r,Math.PI)):l<f?(m.moveTo(l,t),m.arc(f,n,c,-r,r),m.arc(l,n,c,r,Math.PI+r)):n<h?(m.arc(l,n,c,-Math.PI,0),m.arc(l,h,c,0,Math.PI)):m.arc(l,n,c,-Math.PI,Math.PI),m.closePath(),m.moveTo(a,t)}else m.rect(a,t,s,u)}function E4(m,a,t){var s=t.backgroundColor,u=t.borderColor,o=t.borderWidth;!s&&(!u||!o)||(m.beginPath(),M4(m,Lu(a.x)+o/2,Lu(a.y)+o/2,Lu(a.w)-o,Lu(a.h)-o,t.borderRadius),m.closePath(),s&&(m.fillStyle=s,m.fill()),u&&o&&(m.strokeStyle=u,m.lineWidth=o,m.lineJoin="miter",m.stroke()))}function N4(m,a,t){var s=t.lineHeight,u=m.w,o=m.x,r=m.y+s/2;return a==="center"?o+=u/2:(a==="end"||a==="right")&&(o+=u),{h:s,w:u,x:o,y:r}}function A4(m,a,t){var s=m.shadowBlur,u=t.stroked,o=Lu(t.x),r=Lu(t.y),c=Lu(t.w);u&&m.strokeText(a,o,r,c),t.filled&&(s&&u&&(m.shadowBlur=0),m.fillText(a,o,r,c),s&&u&&(m.shadowBlur=s))}function R4(m,a,t,s){var u=s.textAlign,o=s.color,r=!!o,c=s.font,l=a.length,n=s.textStrokeColor,f=s.textStrokeWidth,h=n&&f,p;if(!(!l||!r&&!h))for(t=N4(t,u,c),m.font=c.string,m.textAlign=u,m.textBaseline="middle",m.shadowBlur=s.textShadowBlur,m.shadowColor=s.textShadowColor,r&&(m.fillStyle=o),h&&(m.lineJoin="round",m.lineWidth=f,m.strokeStyle=n),p=0,l=a.length;p<l;++p)A4(m,a[p],{stroked:h,filled:r,w:t.w,x:t.x,y:t.y+t.h*p})}var Rv=function(m,a,t,s){var u=this;u._config=m,u._index=s,u._model=null,u._rects=null,u._ctx=a,u._el=t};Dc(Rv.prototype,{_modelize:function(m,a,t,s){var u=this,o=u._index,r=hs(mi([t.font,{}],s,o)),c=mi([t.color,yi.color],s,o);return{align:mi([t.align,"center"],s,o),anchor:mi([t.anchor,"center"],s,o),area:s.chart.chartArea,backgroundColor:mi([t.backgroundColor,null],s,o),borderColor:mi([t.borderColor,null],s,o),borderRadius:mi([t.borderRadius,0],s,o),borderWidth:mi([t.borderWidth,0],s,o),clamp:mi([t.clamp,!1],s,o),clip:mi([t.clip,!1],s,o),color:c,display:m,font:r,lines:a,offset:mi([t.offset,4],s,o),opacity:mi([t.opacity,1],s,o),origin:C4(u._el,s),padding:so(mi([t.padding,4],s,o)),positioner:k4(u._el),rotation:mi([t.rotation,0],s,o)*(Math.PI/180),size:hm.textSize(u._ctx,a,r),textAlign:mi([t.textAlign,"start"],s,o),textShadowBlur:mi([t.textShadowBlur,0],s,o),textShadowColor:mi([t.textShadowColor,c],s,o),textStrokeColor:mi([t.textStrokeColor,c],s,o),textStrokeWidth:mi([t.textStrokeWidth,0],s,o)}},update:function(m){var a=this,t=null,s=null,u=a._index,o=a._config,r,c,l,n=mi([o.display,!0],m,u);n&&(r=m.dataset.data[u],c=tr(ii(o.formatter,[r,m]),r),l=ar(c)?[]:hm.toTextLines(c),l.length&&(t=a._modelize(n,l,o,m),s=T4(t))),a._model=t,a._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(m,a){var t=this,s=m.ctx,u=t._model,o=t._rects,r;this.visible()&&(s.save(),u.clip&&(r=u.area,s.beginPath(),s.rect(r.left,r.top,r.right-r.left,r.bottom-r.top),s.clip()),s.globalAlpha=hm.bound(0,u.opacity,1),s.translate(Lu(a.x),Lu(a.y)),s.rotate(u.rotation),E4(s,o.frame,u),R4(s,u.lines,o.text,u),s.restore())}});var I4=Number.MIN_SAFE_INTEGER||-9007199254740991,O4=Number.MAX_SAFE_INTEGER||9007199254740991;function nm(m,a,t){var s=Math.cos(t),u=Math.sin(t),o=a.x,r=a.y;return{x:o+s*(m.x-o)-u*(m.y-r),y:r+u*(m.x-o)+s*(m.y-r)}}function n1(m,a){var t=O4,s=I4,u=a.origin,o,r,c,l,n;for(o=0;o<m.length;++o)r=m[o],c=r.x-u.x,l=r.y-u.y,n=a.vx*c+a.vy*l,t=Math.min(t,n),s=Math.max(s,n);return{min:t,max:s}}function E0(m,a){var t=a.x-m.x,s=a.y-m.y,u=Math.sqrt(t*t+s*s);return{vx:(a.x-m.x)/u,vy:(a.y-m.y)/u,origin:m,ln:u}}var Iv=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};Dc(Iv.prototype,{center:function(){var m=this._rect;return{x:m.x+m.w/2,y:m.y+m.h/2}},update:function(m,a,t){this._rotation=t,this._rect={x:a.x+m.x,y:a.y+m.y,w:a.w,h:a.h}},contains:function(m){var a=this,t=1,s=a._rect;return m=nm(m,a.center(),-a._rotation),!(m.x<s.x-t||m.y<s.y-t||m.x>s.x+s.w+t*2||m.y>s.y+s.h+t*2)},intersects:function(m){var a=this._points(),t=m._points(),s=[E0(a[0],a[1]),E0(a[0],a[3])],u,o,r;for(this._rotation!==m._rotation&&s.push(E0(t[0],t[1]),E0(t[0],t[3])),u=0;u<s.length;++u)if(o=n1(a,s[u]),r=n1(t,s[u]),o.max<r.min||r.max<o.min)return!1;return!0},_points:function(){var m=this,a=m._rect,t=m._rotation,s=m.center();return[nm({x:a.x,y:a.y},s,t),nm({x:a.x+a.w,y:a.y},s,t),nm({x:a.x+a.w,y:a.y+a.h},s,t),nm({x:a.x,y:a.y+a.h},s,t)]}});function Ov(m,a,t){var s=a.positioner(m,a),u=s.vx,o=s.vy;if(!u&&!o)return{x:s.x,y:s.y};var r=t.w,c=t.h,l=a.rotation,n=Math.abs(r/2*Math.cos(l))+Math.abs(c/2*Math.sin(l)),f=Math.abs(r/2*Math.sin(l))+Math.abs(c/2*Math.cos(l)),h=1/Math.max(Math.abs(u),Math.abs(o));return n*=u*h,f*=o*h,n+=a.offset*u,f+=a.offset*o,{x:s.x+n,y:s.y+f}}function j4(m,a){var t,s,u,o;for(t=m.length-1;t>=0;--t)for(u=m[t].$layout,s=t-1;s>=0&&u._visible;--s)o=m[s].$layout,o._visible&&u._box.intersects(o._box)&&a(u,o);return m}function L4(m){var a,t,s,u,o,r,c;for(a=0,t=m.length;a<t;++a)s=m[a],u=s.$layout,u._visible&&(c=new Proxy(s._el,{get:(l,n)=>l.getProps([n],!0)[n]}),o=s.geometry(),r=Ov(c,s.model(),o),u._box.update(r,o,s.rotation()));return j4(m,function(l,n){var f=l._hidable,h=n._hidable;f&&h||h?n._visible=!1:f&&(l._visible=!1)})}var pm={prepare:function(m){var a=[],t,s,u,o,r;for(t=0,u=m.length;t<u;++t)for(s=0,o=m[t].length;s<o;++s)r=m[t][s],a.push(r),r.$layout={_box:new Iv,_hidable:!1,_visible:!0,_set:t,_idx:r._index};return a.sort(function(c,l){var n=c.$layout,f=l.$layout;return n._idx===f._idx?f._set-n._set:f._idx-n._idx}),this.update(a),a},update:function(m){var a=!1,t,s,u,o,r;for(t=0,s=m.length;t<s;++t)u=m[t],o=u.model(),r=u.$layout,r._hidable=o&&o.display==="auto",r._visible=u.visible(),a|=r._hidable;a&&L4(m)},lookup:function(m,a){var t,s;for(t=m.length-1;t>=0;--t)if(s=m[t].$layout,s&&s._visible&&s._box.contains(a))return m[t];return null},draw:function(m,a){var t,s,u,o,r,c;for(t=0,s=a.length;t<s;++t)u=a[t],o=u.$layout,o._visible&&(r=u.geometry(),c=Ov(u._el,u.model(),r),o._box.update(c,r,u.rotation()),u.draw(m,c))}},P4=function(m){if(ar(m))return null;var a=m,t,s,u;if(Sr(m))if(!ar(m.label))a=m.label;else if(!ar(m.r))a=m.r;else for(a="",t=Object.keys(m),u=0,s=t.length;u<s;++u)a+=(u!==0?", ":"")+t[u]+": "+m[t[u]];return""+a},D4={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:P4,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},da="$datalabels",jv="$default";function B4(m,a){var t=m.datalabels,s={},u=[],o,r;return t===!1?null:(t===!0&&(t={}),a=Dc({},[a,t]),o=a.labels||{},r=Object.keys(o),delete a.labels,r.length?r.forEach(function(c){o[c]&&u.push(Dc({},[a,o[c],{_key:c}]))}):u.push(a),s=u.reduce(function(c,l){return Zr(l.listeners||{},function(n,f){c[f]=c[f]||{},c[f][l._key||jv]=n}),delete l.listeners,c},{}),{labels:u,listeners:s})}function Qg(m,a,t,s){if(a){var u=t.$context,o=t.$groups,r;a[o._set]&&(r=a[o._set][o._key],r&&ii(r,[u,s])===!0&&(m[da]._dirty=!0,t.update(u)))}}function z4(m,a,t,s,u){var o,r;!t&&!s||(t?s?t!==s&&(r=o=!0):r=!0:o=!0,r&&Qg(m,a.leave,t,u),o&&Qg(m,a.enter,s,u))}function F4(m,a){var t=m[da],s=t._listeners,u,o;if(!(!s.enter&&!s.leave)){if(a.type==="mousemove")o=pm.lookup(t._labels,a);else if(a.type!=="mouseout")return;u=t._hovered,t._hovered=o,z4(m,s,u,o,a)}}function U4(m,a){var t=m[da],s=t._listeners.click,u=s&&pm.lookup(t._labels,a);u&&Qg(m,s,u,a)}var H4={id:"datalabels",defaults:D4,beforeInit:function(m){m[da]={_actives:[]}},beforeUpdate:function(m){var a=m[da];a._listened=!1,a._listeners={},a._datasets=[],a._labels=[]},afterDatasetUpdate:function(m,a,t){var s=a.index,u=m[da],o=u._datasets[s]=[],r=m.isDatasetVisible(s),c=m.data.datasets[s],l=B4(c,t),n=a.meta.data||[],f=m.ctx,h,p,g,v,x,y,w,S;for(f.save(),h=0,g=n.length;h<g;++h)if(w=n[h],w[da]=[],r&&w&&m.getDataVisibility(h)&&!w.skip)for(p=0,v=l.labels.length;p<v;++p)x=l.labels[p],y=x._key,S=new Rv(x,f,w,h),S.$groups={_set:s,_key:y||jv},S.$context={active:!1,chart:m,dataIndex:h,dataset:c,datasetIndex:s},S.update(S.$context),w[da].push(S),o.push(S);f.restore(),Dc(u._listeners,l.listeners,{merger:function(E,I,D){I[E]=I[E]||{},I[E][a.index]=D[E],u._listened=!0}})},afterUpdate:function(m){m[da]._labels=pm.prepare(m[da]._datasets)},afterDatasetsDraw:function(m){pm.draw(m,m[da]._labels)},beforeEvent:function(m,a){if(m[da]._listened){var t=a.event;switch(t.type){case"mousemove":case"mouseout":F4(m,t);break;case"click":U4(m,t);break}}},afterEvent:function(m){var a=m[da],t=a._actives,s=a._actives=m.getActiveElements(),u=hm.arrayDiff(t,s),o,r,c,l,n,f,h;for(o=0,r=u.length;o<r;++o)if(n=u[o],n[1])for(h=n[0].element[da]||[],c=0,l=h.length;c<l;++c)f=h[c],f.$context.active=n[1]===1,f.update(f.$context);(a._dirty||u.length)&&(pm.update(a._labels),m.render()),delete a._dirty}};function N0(m){throw new Error('Could not dynamically require "'+m+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Bg={exports:{}};var r1;function V4(){return r1||(r1=1,(function(m,a){(function(t){m.exports=t()})((function(){return(function t(s,u,o){function r(n,f){if(!u[n]){if(!s[n]){var h=typeof N0=="function"&&N0;if(!f&&h)return h(n,!0);if(c)return c(n,!0);var p=new Error("Cannot find module '"+n+"'");throw p.code="MODULE_NOT_FOUND",p}var g=u[n]={exports:{}};s[n][0].call(g.exports,(function(v){return r(s[n][1][v]||v)}),g,g.exports,t,s,u,o)}return u[n].exports}for(var c=typeof N0=="function"&&N0,l=0;l<o.length;l++)r(o[l]);return r})({1:[function(t,s,u){const o=t("fs"),r=t("fast-csv"),c=t("dayjs/plugin/customParseFormat"),l=t("dayjs/plugin/utc"),n=t("dayjs").extend(c).extend(l),f=t("../utils/stream-buf"),{fs:{exists:h}}=t("../utils/utils"),p={true:!0,false:!1,"#N/A":{error:"#N/A"},"#REF!":{error:"#REF!"},"#NAME?":{error:"#NAME?"},"#DIV/0!":{error:"#DIV/0!"},"#NULL!":{error:"#NULL!"},"#VALUE!":{error:"#VALUE!"},"#NUM!":{error:"#NUM!"}};s.exports=class{constructor(g){this.workbook=g,this.worksheet=null}async readFile(g,v){if(v=v||{},!await h(g))throw new Error("File not found: "+g);const x=o.createReadStream(g),y=await this.read(x,v);return x.close(),y}read(g,v){return v=v||{},new Promise((x,y)=>{const w=this.workbook.addWorksheet(v.sheetName),S=v.dateFormats||["YYYY-MM-DD[T]HH:mm:ssZ","YYYY-MM-DD[T]HH:mm:ss","MM-DD-YYYY","YYYY-MM-DD"],E=v.map||function(D){if(D==="")return null;const Z=Number(D);if(!Number.isNaN(Z)&&Z!==1/0)return Z;const K=S.reduce((W,Q)=>{if(W)return W;const rt=n(D,Q,!0);return rt.isValid()?rt:null},null);if(K)return new Date(K.valueOf());const z=p[D];return z!==void 0?z:D},I=r.parse(v.parserOptions).on("data",D=>{w.addRow(D.map(E))}).on("end",()=>{I.emit("worksheet",w)});I.on("worksheet",x).on("error",y),g.pipe(I)})}createInputStream(){throw new Error("`CSV#createInputStream` is deprecated. You should use `CSV#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}write(g,v){return new Promise((x,y)=>{v=v||{};const w=this.workbook.getWorksheet(v.sheetName||v.sheetId),S=r.format(v.formatterOptions);g.on("finish",()=>{x()}),S.on("error",y),S.pipe(g);const{dateFormat:E,dateUTC:I}=v,D=v.map||(z=>{if(z){if(z.text||z.hyperlink)return z.hyperlink||z.text||"";if(z.formula||z.result)return z.result||"";if(z instanceof Date)return E?I?n.utc(z).format(E):n(z).format(E):I?n.utc(z).format():n(z).format();if(z.error)return z.error;if(typeof z=="object")return JSON.stringify(z)}return z}),Z=v.includeEmptyRows===void 0||v.includeEmptyRows;let K=1;w&&w.eachRow((z,W)=>{if(Z)for(;K++<W-1;)S.write([]);const{values:Q}=z;Q.shift(),S.write(Q.map(D)),K=W}),S.end()})}writeFile(g,v){const x={encoding:(v=v||{}).encoding||"utf8"},y=o.createWriteStream(g,x);return this.write(y,v)}async writeBuffer(g){const v=new f;return await this.write(v,g),v.read()}}},{"../utils/stream-buf":24,"../utils/utils":27,dayjs:391,"dayjs/plugin/customParseFormat":392,"dayjs/plugin/utc":393,"fast-csv":424,fs:216}],2:[function(t,s,u){const o=t("../utils/col-cache");class r{constructor(l,n){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(this.worksheet=l,n)if(typeof n=="string"){const h=o.decodeAddress(n);this.nativeCol=h.col+f,this.nativeColOff=0,this.nativeRow=h.row+f,this.nativeRowOff=0}else n.nativeCol!==void 0?(this.nativeCol=n.nativeCol||0,this.nativeColOff=n.nativeColOff||0,this.nativeRow=n.nativeRow||0,this.nativeRowOff=n.nativeRowOff||0):n.col!==void 0?(this.col=n.col+f,this.row=n.row+f):(this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0);else this.nativeCol=0,this.nativeColOff=0,this.nativeRow=0,this.nativeRowOff=0}static asInstance(l){return l instanceof r||l==null?l:new r(l)}get col(){return this.nativeCol+Math.min(this.colWidth-1,this.nativeColOff)/this.colWidth}set col(l){this.nativeCol=Math.floor(l),this.nativeColOff=Math.floor((l-this.nativeCol)*this.colWidth)}get row(){return this.nativeRow+Math.min(this.rowHeight-1,this.nativeRowOff)/this.rowHeight}set row(l){this.nativeRow=Math.floor(l),this.nativeRowOff=Math.floor((l-this.nativeRow)*this.rowHeight)}get colWidth(){return this.worksheet&&this.worksheet.getColumn(this.nativeCol+1)&&this.worksheet.getColumn(this.nativeCol+1).isCustomWidth?Math.floor(1e4*this.worksheet.getColumn(this.nativeCol+1).width):64e4}get rowHeight(){return this.worksheet&&this.worksheet.getRow(this.nativeRow+1)&&this.worksheet.getRow(this.nativeRow+1).height?Math.floor(1e4*this.worksheet.getRow(this.nativeRow+1).height):18e4}get model(){return{nativeCol:this.nativeCol,nativeColOff:this.nativeColOff,nativeRow:this.nativeRow,nativeRowOff:this.nativeRowOff}}set model(l){this.nativeCol=l.nativeCol,this.nativeColOff=l.nativeColOff,this.nativeRow=l.nativeRow,this.nativeRowOff=l.nativeRowOff}}s.exports=r},{"../utils/col-cache":19}],3:[function(t,s,u){const o=t("../utils/col-cache"),r=t("../utils/under-dash"),c=t("./enums"),{slideFormula:l}=t("../utils/shared-formula"),n=t("./note");class f{constructor(g,v,x){if(!g||!v)throw new Error("A Cell needs a Row");this._row=g,this._column=v,o.validateAddress(x),this._address=x,this._value=h.create(f.Types.Null,this),this.style=this._mergeStyle(g.style,v.style,{}),this._mergeCount=0}get worksheet(){return this._row.worksheet}get workbook(){return this._row.worksheet.workbook}destroy(){delete this.style,delete this._value,delete this._row,delete this._column,delete this._address}get numFmt(){return this.style.numFmt}set numFmt(g){this.style.numFmt=g}get font(){return this.style.font}set font(g){this.style.font=g}get alignment(){return this.style.alignment}set alignment(g){this.style.alignment=g}get border(){return this.style.border}set border(g){this.style.border=g}get fill(){return this.style.fill}set fill(g){this.style.fill=g}get protection(){return this.style.protection}set protection(g){this.style.protection=g}_mergeStyle(g,v,x){const y=g&&g.numFmt||v&&v.numFmt;y&&(x.numFmt=y);const w=g&&g.font||v&&v.font;w&&(x.font=w);const S=g&&g.alignment||v&&v.alignment;S&&(x.alignment=S);const E=g&&g.border||v&&v.border;E&&(x.border=E);const I=g&&g.fill||v&&v.fill;I&&(x.fill=I);const D=g&&g.protection||v&&v.protection;return D&&(x.protection=D),x}get address(){return this._address}get row(){return this._row.number}get col(){return this._column.number}get $col$row(){return`$${this._column.letter}$${this.row}`}get type(){return this._value.type}get effectiveType(){return this._value.effectiveType}toCsvString(){return this._value.toCsvString()}addMergeRef(){this._mergeCount++}releaseMergeRef(){this._mergeCount--}get isMerged(){return this._mergeCount>0||this.type===f.Types.Merge}merge(g,v){this._value.release(),this._value=h.create(f.Types.Merge,this,g),v||(this.style=g.style)}unmerge(){this.type===f.Types.Merge&&(this._value.release(),this._value=h.create(f.Types.Null,this),this.style=this._mergeStyle(this._row.style,this._column.style,{}))}isMergedTo(g){return this._value.type===f.Types.Merge&&this._value.isMergedTo(g)}get master(){return this.type===f.Types.Merge?this._value.master:this}get isHyperlink(){return this._value.type===f.Types.Hyperlink}get hyperlink(){return this._value.hyperlink}get value(){return this._value.value}set value(g){this.type!==f.Types.Merge?(this._value.release(),this._value=h.create(h.getType(g),this,g)):this._value.master.value=g}get note(){return this._comment&&this._comment.note}set note(g){this._comment=new n(g)}get text(){return this._value.toString()}get html(){return r.escapeHtml(this.text)}toString(){return this.text}_upgradeToHyperlink(g){this.type===f.Types.String&&(this._value=h.create(f.Types.Hyperlink,this,{text:this._value.value,hyperlink:g}))}get formula(){return this._value.formula}get result(){return this._value.result}get formulaType(){return this._value.formulaType}get fullAddress(){const{worksheet:g}=this._row;return{sheetName:g.name,address:this.address,row:this.row,col:this.col}}get name(){return this.names[0]}set name(g){this.names=[g]}get names(){return this.workbook.definedNames.getNamesEx(this.fullAddress)}set names(g){const{definedNames:v}=this.workbook;v.removeAllNames(this.fullAddress),g.forEach(x=>{v.addEx(this.fullAddress,x)})}addName(g){this.workbook.definedNames.addEx(this.fullAddress,g)}removeName(g){this.workbook.definedNames.removeEx(this.fullAddress,g)}removeAllNames(){this.workbook.definedNames.removeAllNames(this.fullAddress)}get _dataValidations(){return this.worksheet.dataValidations}get dataValidation(){return this._dataValidations.find(this.address)}set dataValidation(g){this._dataValidations.add(this.address,g)}get model(){const{model:g}=this._value;return g.style=this.style,this._comment&&(g.comment=this._comment.model),g}set model(g){if(this._value.release(),this._value=h.create(g.type,this),this._value.model=g,g.comment)switch(g.comment.type){case"note":this._comment=n.fromModel(g.comment)}g.style?this.style=g.style:this.style={}}}f.Types=c.ValueType;const h={getType:p=>p==null?f.Types.Null:p instanceof String||typeof p=="string"?f.Types.String:typeof p=="number"?f.Types.Number:typeof p=="boolean"?f.Types.Boolean:p instanceof Date?f.Types.Date:p.text&&p.hyperlink?f.Types.Hyperlink:p.formula||p.sharedFormula?f.Types.Formula:p.richText?f.Types.RichText:p.sharedString?f.Types.SharedString:p.error?f.Types.Error:f.Types.JSON,types:[{t:f.Types.Null,f:class{constructor(p){this.model={address:p.address,type:f.Types.Null}}get value(){return null}set value(p){}get type(){return f.Types.Null}get effectiveType(){return f.Types.Null}get address(){return this.model.address}set address(p){this.model.address=p}toCsvString(){return""}release(){}toString(){return""}}},{t:f.Types.Number,f:class{constructor(p,g){this.model={address:p.address,type:f.Types.Number,value:g}}get value(){return this.model.value}set value(p){this.model.value=p}get type(){return f.Types.Number}get effectiveType(){return f.Types.Number}get address(){return this.model.address}set address(p){this.model.address=p}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:f.Types.String,f:class{constructor(p,g){this.model={address:p.address,type:f.Types.String,value:g}}get value(){return this.model.value}set value(p){this.model.value=p}get type(){return f.Types.String}get effectiveType(){return f.Types.String}get address(){return this.model.address}set address(p){this.model.address=p}toCsvString(){return`"${this.model.value.replace(/"/g,'""')}"`}release(){}toString(){return this.model.value}}},{t:f.Types.Date,f:class{constructor(p,g){this.model={address:p.address,type:f.Types.Date,value:g}}get value(){return this.model.value}set value(p){this.model.value=p}get type(){return f.Types.Date}get effectiveType(){return f.Types.Date}get address(){return this.model.address}set address(p){this.model.address=p}toCsvString(){return this.model.value.toISOString()}release(){}toString(){return this.model.value.toString()}}},{t:f.Types.Hyperlink,f:class{constructor(p,g){this.model={address:p.address,type:f.Types.Hyperlink,text:g?g.text:void 0,hyperlink:g?g.hyperlink:void 0},g&&g.tooltip&&(this.model.tooltip=g.tooltip)}get value(){const p={text:this.model.text,hyperlink:this.model.hyperlink};return this.model.tooltip&&(p.tooltip=this.model.tooltip),p}set value(p){this.model={text:p.text,hyperlink:p.hyperlink},p.tooltip&&(this.model.tooltip=p.tooltip)}get text(){return this.model.text}set text(p){this.model.text=p}get hyperlink(){return this.model.hyperlink}set hyperlink(p){this.model.hyperlink=p}get type(){return f.Types.Hyperlink}get effectiveType(){return f.Types.Hyperlink}get address(){return this.model.address}set address(p){this.model.address=p}toCsvString(){return this.model.hyperlink}release(){}toString(){return this.model.text}}},{t:f.Types.Formula,f:class{constructor(p,g){this.cell=p,this.model={address:p.address,type:f.Types.Formula,shareType:g?g.shareType:void 0,ref:g?g.ref:void 0,formula:g?g.formula:void 0,sharedFormula:g?g.sharedFormula:void 0,result:g?g.result:void 0}}_copyModel(p){const g={},v=x=>{const y=p[x];y&&(g[x]=y)};return v("formula"),v("result"),v("ref"),v("shareType"),v("sharedFormula"),g}get value(){return this._copyModel(this.model)}set value(p){this.model=this._copyModel(p)}validate(p){switch(h.getType(p)){case f.Types.Null:case f.Types.String:case f.Types.Number:case f.Types.Date:break;case f.Types.Hyperlink:case f.Types.Formula:default:throw new Error("Cannot process that type of result value")}}get dependencies(){return{ranges:this.formula.match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g),cells:this.formula.replace(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}:[A-Z]{1,3}\d{1,4}/g,"").match(/([a-zA-Z0-9]+!)?[A-Z]{1,3}\d{1,4}/g)}}get formula(){return this.model.formula||this._getTranslatedFormula()}set formula(p){this.model.formula=p}get formulaType(){return this.model.formula?c.FormulaType.Master:this.model.sharedFormula?c.FormulaType.Shared:c.FormulaType.None}get result(){return this.model.result}set result(p){this.model.result=p}get type(){return f.Types.Formula}get effectiveType(){const p=this.model.result;return p==null?c.ValueType.Null:p instanceof String||typeof p=="string"?c.ValueType.String:typeof p=="number"?c.ValueType.Number:p instanceof Date?c.ValueType.Date:p.text&&p.hyperlink?c.ValueType.Hyperlink:p.formula?c.ValueType.Formula:c.ValueType.Null}get address(){return this.model.address}set address(p){this.model.address=p}_getTranslatedFormula(){if(!this._translatedFormula&&this.model.sharedFormula){const{worksheet:p}=this.cell,g=p.findCell(this.model.sharedFormula);this._translatedFormula=g&&l(g.formula,g.address,this.model.address)}return this._translatedFormula}toCsvString(){return""+(this.model.result||"")}release(){}toString(){return this.model.result?this.model.result.toString():""}}},{t:f.Types.Merge,f:class{constructor(p,g){this.model={address:p.address,type:f.Types.Merge,master:g?g.address:void 0},this._master=g,g&&g.addMergeRef()}get value(){return this._master.value}set value(p){p instanceof f?(this._master&&this._master.releaseMergeRef(),p.addMergeRef(),this._master=p):this._master.value=p}isMergedTo(p){return p===this._master}get master(){return this._master}get type(){return f.Types.Merge}get effectiveType(){return this._master.effectiveType}get address(){return this.model.address}set address(p){this.model.address=p}toCsvString(){return""}release(){this._master.releaseMergeRef()}toString(){return this.value.toString()}}},{t:f.Types.JSON,f:class{constructor(p,g){this.model={address:p.address,type:f.Types.String,value:JSON.stringify(g),rawValue:g}}get value(){return this.model.rawValue}set value(p){this.model.rawValue=p,this.model.value=JSON.stringify(p)}get type(){return f.Types.String}get effectiveType(){return f.Types.String}get address(){return this.model.address}set address(p){this.model.address=p}toCsvString(){return this.model.value}release(){}toString(){return this.model.value}}},{t:f.Types.SharedString,f:class{constructor(p,g){this.model={address:p.address,type:f.Types.SharedString,value:g}}get value(){return this.model.value}set value(p){this.model.value=p}get type(){return f.Types.SharedString}get effectiveType(){return f.Types.SharedString}get address(){return this.model.address}set address(p){this.model.address=p}toCsvString(){return this.model.value.toString()}release(){}toString(){return this.model.value.toString()}}},{t:f.Types.RichText,f:class{constructor(p,g){this.model={address:p.address,type:f.Types.String,value:g}}get value(){return this.model.value}set value(p){this.model.value=p}toString(){return this.model.value.richText.map(p=>p.text).join("")}get type(){return f.Types.RichText}get effectiveType(){return f.Types.RichText}get address(){return this.model.address}set address(p){this.model.address=p}toCsvString(){return`"${this.text.replace(/"/g,'""')}"`}release(){}}},{t:f.Types.Boolean,f:class{constructor(p,g){this.model={address:p.address,type:f.Types.Boolean,value:g}}get value(){return this.model.value}set value(p){this.model.value=p}get type(){return f.Types.Boolean}get effectiveType(){return f.Types.Boolean}get address(){return this.model.address}set address(p){this.model.address=p}toCsvString(){return this.model.value?1:0}release(){}toString(){return this.model.value.toString()}}},{t:f.Types.Error,f:class{constructor(p,g){this.model={address:p.address,type:f.Types.Error,value:g}}get value(){return this.model.value}set value(p){this.model.value=p}get type(){return f.Types.Error}get effectiveType(){return f.Types.Error}get address(){return this.model.address}set address(p){this.model.address=p}toCsvString(){return this.toString()}release(){}toString(){return this.model.value.error.toString()}}}].reduce((p,g)=>(p[g.t]=g.f,p),[]),create(p,g,v){const x=this.types[p];if(!x)throw new Error("Could not create Value of type "+p);return new x(g,v)}};s.exports=f},{"../utils/col-cache":19,"../utils/shared-formula":23,"../utils/under-dash":26,"./enums":7,"./note":9}],4:[function(t,s,u){const o=t("../utils/under-dash"),r=t("./enums"),c=t("../utils/col-cache");class l{constructor(f,h,p){this._worksheet=f,this._number=h,p!==!1&&(this.defn=p)}get number(){return this._number}get worksheet(){return this._worksheet}get letter(){return c.n2l(this._number)}get isCustomWidth(){return this.width!==void 0&&this.width!==9}get defn(){return{header:this._header,key:this.key,width:this.width,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel}}set defn(f){f?(this.key=f.key,this.width=f.width!==void 0?f.width:9,this.outlineLevel=f.outlineLevel,f.style?this.style=f.style:this.style={},this.header=f.header,this._hidden=!!f.hidden):(delete this._header,delete this._key,delete this.width,this.style={},this.outlineLevel=0)}get headers(){return this._header&&this._header instanceof Array?this._header:[this._header]}get header(){return this._header}set header(f){f!==void 0?(this._header=f,this.headers.forEach((h,p)=>{this._worksheet.getCell(p+1,this.number).value=h})):this._header=void 0}get key(){return this._key}set key(f){(this._key&&this._worksheet.getColumnKey(this._key))===this&&this._worksheet.deleteColumnKey(this._key),this._key=f,f&&this._worksheet.setColumnKey(this._key,this)}get hidden(){return!!this._hidden}set hidden(f){this._hidden=f}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(f){this._outlineLevel=f}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelCol)}toString(){return JSON.stringify({key:this.key,width:this.width,headers:this.headers.length?this.headers:void 0})}equivalentTo(f){return this.width===f.width&&this.hidden===f.hidden&&this.outlineLevel===f.outlineLevel&&o.isEqual(this.style,f.style)}get isDefault(){if(this.isCustomWidth||this.hidden||this.outlineLevel)return!1;const f=this.style;return!f||!(f.font||f.numFmt||f.alignment||f.border||f.fill||f.protection)}get headerCount(){return this.headers.length}eachCell(f,h){const p=this.number;h||(h=f,f=null),this._worksheet.eachRow(f,(g,v)=>{h(g.getCell(p),v)})}get values(){const f=[];return this.eachCell((h,p)=>{h&&h.type!==r.ValueType.Null&&(f[p]=h.value)}),f}set values(f){if(!f)return;const h=this.number;let p=0;f.hasOwnProperty("0")&&(p=1),f.forEach((g,v)=>{this._worksheet.getCell(v+p,h).value=g})}_applyStyle(f,h){return this.style[f]=h,this.eachCell(p=>{p[f]=h}),h}get numFmt(){return this.style.numFmt}set numFmt(f){this._applyStyle("numFmt",f)}get font(){return this.style.font}set font(f){this._applyStyle("font",f)}get alignment(){return this.style.alignment}set alignment(f){this._applyStyle("alignment",f)}get protection(){return this.style.protection}set protection(f){this._applyStyle("protection",f)}get border(){return this.style.border}set border(f){this._applyStyle("border",f)}get fill(){return this.style.fill}set fill(f){this._applyStyle("fill",f)}static toModel(f){const h=[];let p=null;return f&&f.forEach((g,v)=>{g.isDefault?p&&(p=null):p&&g.equivalentTo(p)?p.max=v+1:(p={min:v+1,max:v+1,width:g.width!==void 0?g.width:9,style:g.style,isCustomWidth:g.isCustomWidth,hidden:g.hidden,outlineLevel:g.outlineLevel,collapsed:g.collapsed},h.push(p))}),h.length?h:void 0}static fromModel(f,h){const p=[];let g=1,v=0;for(h=(h=h||[]).sort((function(x,y){return x.min-y.min}));v<h.length;){const x=h[v++];for(;g<x.min;)p.push(new l(f,g++));for(;g<=x.max;)p.push(new l(f,g++,x))}return p.length?p:null}}s.exports=l},{"../utils/col-cache":19,"../utils/under-dash":26,"./enums":7}],5:[function(t,s,u){s.exports=class{constructor(o){this.model=o||{}}add(o,r){return this.model[o]=r}find(o){return this.model[o]}remove(o){this.model[o]=void 0}}},{}],6:[function(t,s,u){const o=t("../utils/under-dash"),r=t("../utils/col-cache"),c=t("../utils/cell-matrix"),l=t("./range"),n=/[$](\w+)[$](\d+)(:[$](\w+)[$](\d+))?/;s.exports=class{constructor(){this.matrixMap={}}getMatrix(f){return this.matrixMap[f]||(this.matrixMap[f]=new c)}add(f,h){const p=r.decodeEx(f);this.addEx(p,h)}addEx(f,h){const p=this.getMatrix(h);if(f.top)for(let g=f.left;g<=f.right;g++)for(let v=f.top;v<=f.bottom;v++){const x={sheetName:f.sheetName,address:r.n2l(g)+v,row:v,col:g};p.addCellEx(x)}else p.addCellEx(f)}remove(f,h){const p=r.decodeEx(f);this.removeEx(p,h)}removeEx(f,h){this.getMatrix(h).removeCellEx(f)}removeAllNames(f){o.each(this.matrixMap,h=>{h.removeCellEx(f)})}forEach(f){o.each(this.matrixMap,(h,p)=>{h.forEach(g=>{f(p,g)})})}getNames(f){return this.getNamesEx(r.decodeEx(f))}getNamesEx(f){return o.map(this.matrixMap,(h,p)=>h.findCellEx(f)&&p).filter(Boolean)}_explore(f,h){h.mark=!1;const{sheetName:p}=h,g=new l(h.row,h.col,h.row,h.col,p);let v,x;function y(S,E){const I=f.findCellAt(p,S,h.col);return!(!I||!I.mark)&&(g[E]=S,I.mark=!1,!0)}for(x=h.row-1;y(x,"top");x--);for(x=h.row+1;y(x,"bottom");x++);function w(S,E){const I=[];for(x=g.top;x<=g.bottom;x++){const D=f.findCellAt(p,x,S);if(!D||!D.mark)return!1;I.push(D)}g[E]=S;for(let D=0;D<I.length;D++)I[D].mark=!1;return!0}for(v=h.col-1;w(v,"left");v--);for(v=h.col+1;w(v,"right");v++);return g}getRanges(f,h){return(h=h||this.matrixMap[f])?(h.forEach(p=>{p.mark=!0}),{name:f,ranges:h.map(p=>p.mark&&this._explore(h,p)).filter(Boolean).map(p=>p.$shortRange)}):{name:f,ranges:[]}}normaliseMatrix(f,h){f.forEachInSheet(h,(p,g,v)=>{p&&(p.row===g&&p.col===v||(p.row=g,p.col=v,p.address=r.n2l(v)+g))})}spliceRows(f,h,p,g){o.each(this.matrixMap,v=>{v.spliceRows(f,h,p,g),this.normaliseMatrix(v,f)})}spliceColumns(f,h,p,g){o.each(this.matrixMap,v=>{v.spliceColumns(f,h,p,g),this.normaliseMatrix(v,f)})}get model(){return o.map(this.matrixMap,(f,h)=>this.getRanges(h,f)).filter(f=>f.ranges.length)}set model(f){const h=this.matrixMap={};f.forEach(p=>{const g=h[p.name]=new c;p.ranges.forEach(v=>{n.test(v.split("!").pop()||"")&&g.addCell(v)})})}}},{"../utils/cell-matrix":18,"../utils/col-cache":19,"../utils/under-dash":26,"./range":10}],7:[function(t,s,u){s.exports={ValueType:{Null:0,Merge:1,Number:2,String:3,Date:4,Hyperlink:5,Formula:6,SharedString:7,RichText:8,Boolean:9,Error:10},FormulaType:{None:0,Master:1,Shared:2},RelationshipType:{None:0,OfficeDocument:1,Worksheet:2,CalcChain:3,SharedStrings:4,Styles:5,Theme:6,Hyperlink:7},DocumentType:{Xlsx:1},ReadingOrder:{LeftToRight:1,RightToLeft:2},ErrorValue:{NotApplicable:"#N/A",Ref:"#REF!",Name:"#NAME?",DivZero:"#DIV/0!",Null:"#NULL!",Value:"#VALUE!",Num:"#NUM!"}}},{}],8:[function(t,s,u){const o=t("../utils/col-cache"),r=t("./anchor");s.exports=class{constructor(c,l){this.worksheet=c,this.model=l}get model(){switch(this.type){case"background":return{type:this.type,imageId:this.imageId};case"image":return{type:this.type,imageId:this.imageId,hyperlinks:this.range.hyperlinks,range:{tl:this.range.tl.model,br:this.range.br&&this.range.br.model,ext:this.range.ext,editAs:this.range.editAs}};default:throw new Error("Invalid Image Type")}}set model(c){let{type:l,imageId:n,range:f,hyperlinks:h}=c;if(this.type=l,this.imageId=n,l==="image")if(typeof f=="string"){const p=o.decode(f);this.range={tl:new r(this.worksheet,{col:p.left,row:p.top},-1),br:new r(this.worksheet,{col:p.right,row:p.bottom},0),editAs:"oneCell"}}else this.range={tl:new r(this.worksheet,f.tl,0),br:f.br&&new r(this.worksheet,f.br,0),ext:f.ext,editAs:f.editAs,hyperlinks:h||f.hyperlinks}}}},{"../utils/col-cache":19,"./anchor":2}],9:[function(t,s,u){const o=t("../utils/under-dash");class r{constructor(l){this.note=l}get model(){let l=null;switch(typeof this.note){case"string":l={type:"note",note:{texts:[{text:this.note}]}};break;default:l={type:"note",note:this.note}}return o.deepMerge({},r.DEFAULT_CONFIGS,l)}set model(l){const{note:n}=l,{texts:f}=n;f.length===1&&Object.keys(f[0]).length===1?this.note=f[0].text:this.note=n}static fromModel(l){const n=new r;return n.model=l,n}}r.DEFAULT_CONFIGS={note:{margins:{insetmode:"auto",inset:[.13,.13,.25,.25]},protection:{locked:"True",lockText:"True"},editAs:"absolute"}},s.exports=r},{"../utils/under-dash":26}],10:[function(t,s,u){const o=t("../utils/col-cache");class r{constructor(){this.decode(arguments)}setTLBR(l,n,f,h,p){if(arguments.length<4){const g=o.decodeAddress(l),v=o.decodeAddress(n);this.model={top:Math.min(g.row,v.row),left:Math.min(g.col,v.col),bottom:Math.max(g.row,v.row),right:Math.max(g.col,v.col),sheetName:f},this.setTLBR(g.row,g.col,v.row,v.col,p)}else this.model={top:Math.min(l,f),left:Math.min(n,h),bottom:Math.max(l,f),right:Math.max(n,h),sheetName:p}}decode(l){switch(l.length){case 5:this.setTLBR(l[0],l[1],l[2],l[3],l[4]);break;case 4:this.setTLBR(l[0],l[1],l[2],l[3]);break;case 3:this.setTLBR(l[0],l[1],l[2]);break;case 2:this.setTLBR(l[0],l[1]);break;case 1:{const n=l[0];if(n instanceof r)this.model={top:n.model.top,left:n.model.left,bottom:n.model.bottom,right:n.model.right,sheetName:n.sheetName};else if(n instanceof Array)this.decode(n);else if(n.top&&n.left&&n.bottom&&n.right)this.model={top:n.top,left:n.left,bottom:n.bottom,right:n.right,sheetName:n.sheetName};else{const f=o.decodeEx(n);f.top?this.model={top:f.top,left:f.left,bottom:f.bottom,right:f.right,sheetName:f.sheetName}:this.model={top:f.row,left:f.col,bottom:f.row,right:f.col,sheetName:f.sheetName}}break}case 0:this.model={top:0,left:0,bottom:0,right:0};break;default:throw new Error("Invalid number of arguments to _getDimensions() - "+l.length)}}get top(){return this.model.top||1}set top(l){this.model.top=l}get left(){return this.model.left||1}set left(l){this.model.left=l}get bottom(){return this.model.bottom||1}set bottom(l){this.model.bottom=l}get right(){return this.model.right||1}set right(l){this.model.right=l}get sheetName(){return this.model.sheetName}set sheetName(l){this.model.sheetName=l}get _serialisedSheetName(){const{sheetName:l}=this.model;return l?/^[a-zA-Z0-9]*$/.test(l)?l+"!":`'${l}'!`:""}expand(l,n,f,h){(!this.model.top||l<this.top)&&(this.top=l),(!this.model.left||n<this.left)&&(this.left=n),(!this.model.bottom||f>this.bottom)&&(this.bottom=f),(!this.model.right||h>this.right)&&(this.right=h)}expandRow(l){if(l){const{dimensions:n,number:f}=l;n&&this.expand(f,n.min,f,n.max)}}expandToAddress(l){const n=o.decodeEx(l);this.expand(n.row,n.col,n.row,n.col)}get tl(){return o.n2l(this.left)+this.top}get $t$l(){return`$${o.n2l(this.left)}$${this.top}`}get br(){return o.n2l(this.right)+this.bottom}get $b$r(){return`$${o.n2l(this.right)}$${this.bottom}`}get range(){return`${this._serialisedSheetName+this.tl}:${this.br}`}get $range(){return`${this._serialisedSheetName+this.$t$l}:${this.$b$r}`}get shortRange(){return this.count>1?this.range:this._serialisedSheetName+this.tl}get $shortRange(){return this.count>1?this.$range:this._serialisedSheetName+this.$t$l}get count(){return(1+this.bottom-this.top)*(1+this.right-this.left)}toString(){return this.range}intersects(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&!(l.bottom<this.top)&&!(l.top>this.bottom)&&!(l.right<this.left)&&!(l.left>this.right)}contains(l){const n=o.decodeEx(l);return this.containsEx(n)}containsEx(l){return(!l.sheetName||!this.sheetName||l.sheetName===this.sheetName)&&l.row>=this.top&&l.row<=this.bottom&&l.col>=this.left&&l.col<=this.right}forEachAddress(l){for(let n=this.left;n<=this.right;n++)for(let f=this.top;f<=this.bottom;f++)l(o.encodeAddress(f,n),f,n)}}s.exports=r},{"../utils/col-cache":19}],11:[function(t,s,u){const o=t("../utils/under-dash"),r=t("./enums"),c=t("../utils/col-cache"),l=t("./cell");s.exports=class{constructor(n,f){this._worksheet=n,this._number=f,this._cells=[],this.style={},this.outlineLevel=0}get number(){return this._number}get worksheet(){return this._worksheet}commit(){this._worksheet._commitRow(this)}destroy(){delete this._worksheet,delete this._cells,delete this.style}findCell(n){return this._cells[n-1]}getCellEx(n){let f=this._cells[n.col-1];if(!f){const h=this._worksheet.getColumn(n.col);f=new l(this,h,n.address),this._cells[n.col-1]=f}return f}getCell(n){if(typeof n=="string"){const f=this._worksheet.getColumnKey(n);n=f?f.number:c.l2n(n)}return this._cells[n-1]||this.getCellEx({address:c.encodeAddress(this._number,n),row:this._number,col:n})}splice(n,f){const h=n+f;for(var p=arguments.length,g=new Array(p>2?p-2:0),v=2;v<p;v++)g[v-2]=arguments[v];const x=g.length-f,y=this._cells.length;let w,S,E;if(x<0)for(w=n+g.length;w<=y;w++)E=this._cells[w-1],S=this._cells[w-x-1],S?(E=this.getCell(w),E.value=S.value,E.style=S.style,E._comment=S._comment):E&&(E.value=null,E.style={},E._comment=void 0);else if(x>0)for(w=y;w>=h;w--)S=this._cells[w-1],S?(E=this.getCell(w+x),E.value=S.value,E.style=S.style,E._comment=S._comment):this._cells[w+x-1]=void 0;for(w=0;w<g.length;w++)E=this.getCell(n+w),E.value=g[w],E.style={},E._comment=void 0}eachCell(n,f){if(f||(f=n,n=null),n&&n.includeEmpty){const h=this._cells.length;for(let p=1;p<=h;p++)f(this.getCell(p),p)}else this._cells.forEach((h,p)=>{h&&h.type!==r.ValueType.Null&&f(h,p+1)})}addPageBreak(n,f){const h=this._worksheet,p=Math.max(0,n-1)||0,g=Math.max(0,f-1)||16838,v={id:this._number,max:g,man:1};p&&(v.min=p),h.rowBreaks.push(v)}get values(){const n=[];return this._cells.forEach(f=>{f&&f.type!==r.ValueType.Null&&(n[f.col]=f.value)}),n}set values(n){if(this._cells=[],n)if(n instanceof Array){let f=0;n.hasOwnProperty("0")&&(f=1),n.forEach((h,p)=>{h!==void 0&&(this.getCellEx({address:c.encodeAddress(this._number,p+f),row:this._number,col:p+f}).value=h)})}else this._worksheet.eachColumnKey((f,h)=>{n[h]!==void 0&&(this.getCellEx({address:c.encodeAddress(this._number,f.number),row:this._number,col:f.number}).value=n[h])})}get hasValues(){return o.some(this._cells,n=>n&&n.type!==r.ValueType.Null)}get cellCount(){return this._cells.length}get actualCellCount(){let n=0;return this.eachCell(()=>{n++}),n}get dimensions(){let n=0,f=0;return this._cells.forEach(h=>{h&&h.type!==r.ValueType.Null&&((!n||n>h.col)&&(n=h.col),f<h.col&&(f=h.col))}),n>0?{min:n,max:f}:null}_applyStyle(n,f){return this.style[n]=f,this._cells.forEach(h=>{h&&(h[n]=f)}),f}get numFmt(){return this.style.numFmt}set numFmt(n){this._applyStyle("numFmt",n)}get font(){return this.style.font}set font(n){this._applyStyle("font",n)}get alignment(){return this.style.alignment}set alignment(n){this._applyStyle("alignment",n)}get protection(){return this.style.protection}set protection(n){this._applyStyle("protection",n)}get border(){return this.style.border}set border(n){this._applyStyle("border",n)}get fill(){return this.style.fill}set fill(n){this._applyStyle("fill",n)}get hidden(){return!!this._hidden}set hidden(n){this._hidden=n}get outlineLevel(){return this._outlineLevel||0}set outlineLevel(n){this._outlineLevel=n}get collapsed(){return!!(this._outlineLevel&&this._outlineLevel>=this._worksheet.properties.outlineLevelRow)}get model(){const n=[];let f=0,h=0;return this._cells.forEach(p=>{if(p){const g=p.model;g&&((!f||f>p.col)&&(f=p.col),h<p.col&&(h=p.col),n.push(g))}}),this.height||n.length?{cells:n,number:this.number,min:f,max:h,height:this.height,style:this.style,hidden:this.hidden,outlineLevel:this.outlineLevel,collapsed:this.collapsed}:null}set model(n){if(n.number!==this._number)throw new Error("Invalid row number in model");let f;this._cells=[],n.cells.forEach(h=>{switch(h.type){case l.Types.Merge:break;default:{let p;if(h.address)p=c.decodeAddress(h.address);else if(f){const{row:g}=f,v=f.col+1;p={row:g,col:v,address:c.encodeAddress(g,v),$col$row:`$${c.n2l(v)}$${g}`}}f=p,this.getCellEx(p).model=h;break}}}),n.height?this.height=n.height:delete this.height,this.hidden=n.hidden,this.outlineLevel=n.outlineLevel||0,this.style=n.style&&JSON.parse(JSON.stringify(n.style))||{}}}},{"../utils/col-cache":19,"../utils/under-dash":26,"./cell":3,"./enums":7}],12:[function(t,s,u){const o=t("../utils/col-cache");class r{constructor(l,n,f){this.table=l,this.column=n,this.index=f}_set(l,n){this.table.cacheState(),this.column[l]=n}get name(){return this.column.name}set name(l){this._set("name",l)}get filterButton(){return this.column.filterButton}set filterButton(l){this.column.filterButton=l}get style(){return this.column.style}set style(l){this.column.style=l}get totalsRowLabel(){return this.column.totalsRowLabel}set totalsRowLabel(l){this._set("totalsRowLabel",l)}get totalsRowFunction(){return this.column.totalsRowFunction}set totalsRowFunction(l){this._set("totalsRowFunction",l)}get totalsRowResult(){return this.column.totalsRowResult}set totalsRowResult(l){this._set("totalsRowResult",l)}get totalsRowFormula(){return this.column.totalsRowFormula}set totalsRowFormula(l){this._set("totalsRowFormula",l)}}s.exports=class{constructor(c,l){this.worksheet=c,l&&(this.table=l,this.validate(),this.store())}getFormula(c){switch(c.totalsRowFunction){case"none":return null;case"average":return`SUBTOTAL(101,${this.table.name}[${c.name}])`;case"countNums":return`SUBTOTAL(102,${this.table.name}[${c.name}])`;case"count":return`SUBTOTAL(103,${this.table.name}[${c.name}])`;case"max":return`SUBTOTAL(104,${this.table.name}[${c.name}])`;case"min":return`SUBTOTAL(105,${this.table.name}[${c.name}])`;case"stdDev":return`SUBTOTAL(106,${this.table.name}[${c.name}])`;case"var":return`SUBTOTAL(107,${this.table.name}[${c.name}])`;case"sum":return`SUBTOTAL(109,${this.table.name}[${c.name}])`;case"custom":return c.totalsRowFormula;default:throw new Error("Invalid Totals Row Function: "+c.totalsRowFunction)}}get width(){return this.table.columns.length}get height(){return this.table.rows.length}get filterHeight(){return this.height+(this.table.headerRow?1:0)}get tableHeight(){return this.filterHeight+(this.table.totalsRow?1:0)}validate(){const{table:c}=this,l=(x,y,w)=>{x[y]===void 0&&(x[y]=w)};l(c,"headerRow",!0),l(c,"totalsRow",!1),l(c,"style",{}),l(c.style,"theme","TableStyleMedium2"),l(c.style,"showFirstColumn",!1),l(c.style,"showLastColumn",!1),l(c.style,"showRowStripes",!1),l(c.style,"showColumnStripes",!1);const n=(x,y)=>{if(!x)throw new Error(y)};n(c.ref,"Table must have ref"),n(c.columns,"Table must have column definitions"),n(c.rows,"Table must have row definitions"),c.tl=o.decodeAddress(c.ref);const{row:f,col:h}=c.tl;n(f>0,"Table must be on valid row"),n(h>0,"Table must be on valid col");const{width:p,filterHeight:g,tableHeight:v}=this;c.autoFilterRef=o.encode(f,h,f+g-1,h+p-1),c.tableRef=o.encode(f,h,f+v-1,h+p-1),c.columns.forEach((x,y)=>{n(x.name,`Column ${y} must have a name`),y===0?l(x,"totalsRowLabel","Total"):(l(x,"totalsRowFunction","none"),x.totalsRowFormula=this.getFormula(x))})}store(){const c=(g,v)=>{v&&Object.keys(v).forEach(x=>{g[x]=v[x]})},{worksheet:l,table:n}=this,{row:f,col:h}=n.tl;let p=0;if(n.headerRow){const g=l.getRow(f+p++);n.columns.forEach((v,x)=>{const{style:y,name:w}=v,S=g.getCell(h+x);S.value=w,c(S,y)})}if(n.rows.forEach(g=>{const v=l.getRow(f+p++);g.forEach((x,y)=>{const w=v.getCell(h+y);w.value=x,c(w,n.columns[y].style)})}),n.totalsRow){const g=l.getRow(f+p++);n.columns.forEach((v,x)=>{const y=g.getCell(h+x);if(x===0)y.value=v.totalsRowLabel;else{const w=this.getFormula(v);y.value=w?{formula:v.totalsRowFormula,result:v.totalsRowResult}:null}c(y,v.style)})}}load(c){const{table:l}=this,{row:n,col:f}=l.tl;let h=0;if(l.headerRow){const p=c.getRow(n+h++);l.columns.forEach((g,v)=>{p.getCell(f+v).value=g.name})}if(l.rows.forEach(p=>{const g=c.getRow(n+h++);p.forEach((v,x)=>{g.getCell(f+x).value=v})}),l.totalsRow){const p=c.getRow(n+h++);l.columns.forEach((g,v)=>{const x=p.getCell(f+v);v===0?x.value=g.totalsRowLabel:this.getFormula(g)&&(x.value={formula:g.totalsRowFormula,result:g.totalsRowResult})})}}get model(){return this.table}set model(c){this.table=c}cacheState(){this._cache||(this._cache={ref:this.ref,width:this.width,tableHeight:this.tableHeight})}commit(){if(!this._cache)return;this.validate();const c=o.decodeAddress(this._cache.ref);if(this.ref!==this._cache.ref)for(let l=0;l<this._cache.tableHeight;l++){const n=this.worksheet.getRow(c.row+l);for(let f=0;f<this._cache.width;f++)n.getCell(c.col+f).value=null}else{for(let l=this.tableHeight;l<this._cache.tableHeight;l++){const n=this.worksheet.getRow(c.row+l);for(let f=0;f<this._cache.width;f++)n.getCell(c.col+f).value=null}for(let l=0;l<this.tableHeight;l++){const n=this.worksheet.getRow(c.row+l);for(let f=this.width;f<this._cache.width;f++)n.getCell(c.col+f).value=null}}this.store()}addRow(c,l){this.cacheState(),l===void 0?this.table.rows.push(c):this.table.rows.splice(l,0,c)}removeRows(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.rows.splice(c,l)}getColumn(c){const l=this.table.columns[c];return new r(this,l,c)}addColumn(c,l,n){this.cacheState(),n===void 0?(this.table.columns.push(c),this.table.rows.forEach((f,h)=>{f.push(l[h])})):(this.table.columns.splice(n,0,c),this.table.rows.forEach((f,h)=>{f.splice(n,0,l[h])}))}removeColumns(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;this.cacheState(),this.table.columns.splice(c,l),this.table.rows.forEach(n=>{n.splice(c,l)})}_assign(c,l,n){this.cacheState(),c[l]=n}get ref(){return this.table.ref}set ref(c){this._assign(this.table,"ref",c)}get name(){return this.table.name}set name(c){this.table.name=c}get displayName(){return this.table.displyName||this.table.name}set displayNamename(c){this.table.displayName=c}get headerRow(){return this.table.headerRow}set headerRow(c){this._assign(this.table,"headerRow",c)}get totalsRow(){return this.table.totalsRow}set totalsRow(c){this._assign(this.table,"totalsRow",c)}get theme(){return this.table.style.name}set theme(c){this.table.style.name=c}get showFirstColumn(){return this.table.style.showFirstColumn}set showFirstColumn(c){this.table.style.showFirstColumn=c}get showLastColumn(){return this.table.style.showLastColumn}set showLastColumn(c){this.table.style.showLastColumn=c}get showRowStripes(){return this.table.style.showRowStripes}set showRowStripes(c){this.table.style.showRowStripes=c}get showColumnStripes(){return this.table.style.showColumnStripes}set showColumnStripes(c){this.table.style.showColumnStripes=c}}},{"../utils/col-cache":19}],13:[function(t,s,u){const o=t("./worksheet"),r=t("./defined-names"),c=t("../xlsx/xlsx"),l=t("../csv/csv");s.exports=class{constructor(){this.category="",this.company="",this.created=new Date,this.description="",this.keywords="",this.manager="",this.modified=this.created,this.properties={},this.calcProperties={},this._worksheets=[],this.subject="",this.title="",this.views=[],this.media=[],this._definedNames=new r}get xlsx(){return this._xlsx||(this._xlsx=new c(this)),this._xlsx}get csv(){return this._csv||(this._csv=new l(this)),this._csv}get nextId(){for(let n=1;n<this._worksheets.length;n++)if(!this._worksheets[n])return n;return this._worksheets.length||1}addWorksheet(n,f){const h=this.nextId;f&&(typeof f=="string"?(console.trace('tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { argb: "rbg value" } }'),f={properties:{tabColor:{argb:f}}}):(f.argb||f.theme||f.indexed)&&(console.trace("tabColor argument is now deprecated. Please use workbook.addWorksheet(name, {properties: { tabColor: { ... } }"),f={properties:{tabColor:f}}));const p=this._worksheets.reduce((x,y)=>(y&&y.orderNo)>x?y.orderNo:x,0),g=Object.assign({},f,{id:h,name:n,orderNo:p+1,workbook:this}),v=new o(g);return this._worksheets[h]=v,v}removeWorksheetEx(n){delete this._worksheets[n.id]}removeWorksheet(n){const f=this.getWorksheet(n);f&&f.destroy()}getWorksheet(n){return n===void 0?this._worksheets.find(Boolean):typeof n=="number"?this._worksheets[n]:typeof n=="string"?this._worksheets.find(f=>f&&f.name===n):void 0}get worksheets(){return this._worksheets.slice(1).sort((n,f)=>n.orderNo-f.orderNo).filter(Boolean)}eachSheet(n){this.worksheets.forEach(f=>{n(f,f.id)})}get definedNames(){return this._definedNames}clearThemes(){this._themes=void 0}addImage(n){const f=this.media.length;return this.media.push(Object.assign({},n,{type:"image"})),f}getImage(n){return this.media[n]}get model(){return{creator:this.creator||"Unknown",lastModifiedBy:this.lastModifiedBy||"Unknown",lastPrinted:this.lastPrinted,created:this.created,modified:this.modified,properties:this.properties,worksheets:this.worksheets.map(n=>n.model),sheets:this.worksheets.map(n=>n.model).filter(Boolean),definedNames:this._definedNames.model,views:this.views,company:this.company,manager:this.manager,title:this.title,subject:this.subject,keywords:this.keywords,category:this.category,description:this.description,language:this.language,revision:this.revision,contentStatus:this.contentStatus,themes:this._themes,media:this.media,calcProperties:this.calcProperties}}set model(n){this.creator=n.creator,this.lastModifiedBy=n.lastModifiedBy,this.lastPrinted=n.lastPrinted,this.created=n.created,this.modified=n.modified,this.company=n.company,this.manager=n.manager,this.title=n.title,this.subject=n.subject,this.keywords=n.keywords,this.category=n.category,this.description=n.description,this.language=n.language,this.revision=n.revision,this.contentStatus=n.contentStatus,this.properties=n.properties,this.calcProperties=n.calcProperties,this._worksheets=[],n.worksheets.forEach(f=>{const{id:h,name:p,state:g}=f,v=n.sheets&&n.sheets.findIndex(x=>x.id===h);(this._worksheets[h]=new o({id:h,name:p,orderNo:v,state:g,workbook:this})).model=f}),this._definedNames.model=n.definedNames,this.views=n.views,this._themes=n.themes,this.media=n.media||[]}}},{"../csv/csv":1,"../xlsx/xlsx":144,"./defined-names":6,"./worksheet":14}],14:[function(t,s,u){const o=t("../utils/under-dash"),r=t("../utils/col-cache"),c=t("./range"),l=t("./row"),n=t("./column"),f=t("./enums"),h=t("./image"),p=t("./table"),g=t("./data-validations"),v=t("../utils/encryptor"),{copyStyle:x}=t("../utils/copy-style");s.exports=class{constructor(y){y=y||{},this._workbook=y.workbook,this.id=y.id,this.orderNo=y.orderNo,this.name=y.name,this.state=y.state||"visible",this._rows=[],this._columns=null,this._keys={},this._merges={},this.rowBreaks=[],this.properties=Object.assign({},{defaultRowHeight:15,dyDescent:55,outlineLevelCol:0,outlineLevelRow:0},y.properties),this.pageSetup=Object.assign({},{margins:{left:.7,right:.7,top:.75,bottom:.75,header:.3,footer:.3},orientation:"portrait",horizontalDpi:4294967295,verticalDpi:4294967295,fitToPage:!(!y.pageSetup||!y.pageSetup.fitToWidth&&!y.pageSetup.fitToHeight||y.pageSetup.scale),pageOrder:"downThenOver",blackAndWhite:!1,draft:!1,cellComments:"None",errors:"displayed",scale:100,fitToWidth:1,fitToHeight:1,paperSize:void 0,showRowColHeaders:!1,showGridLines:!1,firstPageNumber:void 0,horizontalCentered:!1,verticalCentered:!1,rowBreaks:null,colBreaks:null},y.pageSetup),this.headerFooter=Object.assign({},{differentFirst:!1,differentOddEven:!1,oddHeader:null,oddFooter:null,evenHeader:null,evenFooter:null,firstHeader:null,firstFooter:null},y.headerFooter),this.dataValidations=new g,this.views=y.views||[],this.autoFilter=y.autoFilter||null,this._media=[],this.sheetProtection=null,this.tables={},this.conditionalFormattings=[]}get name(){return this._name}set name(y){if(y===void 0&&(y="sheet"+this.id),this._name!==y){if(typeof y!="string")throw new Error("The name has to be a string.");if(y==="")throw new Error("The name can't be empty.");if(y==="History")throw new Error('The name "History" is protected. Please use a different name.');if(/[*?:/\\[\]]/.test(y))throw new Error(`Worksheet name ${y} cannot include any of the following characters: * ? : \\ / [ ]`);if(/(^')|('$)/.test(y))throw new Error("The first or last character of worksheet name cannot be a single quotation mark: "+y);if(y&&y.length>31&&(console.warn(`Worksheet name ${y} exceeds 31 chars. This will be truncated`),y=y.substring(0,31)),this._workbook._worksheets.find(w=>w&&w.name.toLowerCase()===y.toLowerCase()))throw new Error("Worksheet name already exists: "+y);this._name=y}}get workbook(){return this._workbook}destroy(){this._workbook.removeWorksheetEx(this)}get dimensions(){const y=new c;return this._rows.forEach(w=>{if(w){const S=w.dimensions;S&&y.expand(w.number,S.min,w.number,S.max)}}),y}get columns(){return this._columns}set columns(y){this._headerRowCount=y.reduce((E,I)=>{const D=(I.header?1:I.headers&&I.headers.length)||0;return Math.max(E,D)},0);let w=1;const S=this._columns=[];y.forEach(E=>{const I=new n(this,w++,!1);S.push(I),I.defn=E})}getColumnKey(y){return this._keys[y]}setColumnKey(y,w){this._keys[y]=w}deleteColumnKey(y){delete this._keys[y]}eachColumnKey(y){o.each(this._keys,y)}getColumn(y){if(typeof y=="string"){const w=this._keys[y];if(w)return w;y=r.l2n(y)}if(this._columns||(this._columns=[]),y>this._columns.length){let w=this._columns.length+1;for(;w<=y;)this._columns.push(new n(this,w++))}return this._columns[y-1]}spliceColumns(y,w){const S=this._rows.length;for(var E=arguments.length,I=new Array(E>2?E-2:0),D=2;D<E;D++)I[D-2]=arguments[D];if(I.length>0)for(let W=0;W<S;W++){const Q=[y,w];I.forEach(tt=>{Q.push(tt[W]||null)});const rt=this.getRow(W+1);rt.splice.apply(rt,Q)}else this._rows.forEach(W=>{W&&W.splice(y,w)});const Z=I.length-w,K=y+w,z=this._columns.length;if(Z<0)for(let W=y+I.length;W<=z;W++)this.getColumn(W).defn=this.getColumn(W-Z).defn;else if(Z>0)for(let W=z;W>=K;W--)this.getColumn(W+Z).defn=this.getColumn(W).defn;for(let W=y;W<y+I.length;W++)this.getColumn(W).defn=null;this.workbook.definedNames.spliceColumns(this.name,y,w,I.length)}get lastColumn(){return this.getColumn(this.columnCount)}get columnCount(){let y=0;return this.eachRow(w=>{y=Math.max(y,w.cellCount)}),y}get actualColumnCount(){const y=[];let w=0;return this.eachRow(S=>{S.eachCell(E=>{let{col:I}=E;y[I]||(y[I]=!0,w++)})}),w}_commitRow(){}get _lastRowNumber(){const y=this._rows;let w=y.length;for(;w>0&&y[w-1]===void 0;)w--;return w}get _nextRow(){return this._lastRowNumber+1}get lastRow(){if(this._rows.length)return this._rows[this._rows.length-1]}findRow(y){return this._rows[y-1]}findRows(y,w){return this._rows.slice(y-1,y-1+w)}get rowCount(){return this._lastRowNumber}get actualRowCount(){let y=0;return this.eachRow(()=>{y++}),y}getRow(y){let w=this._rows[y-1];return w||(w=this._rows[y-1]=new l(this,y)),w}getRows(y,w){if(w<1)return;const S=[];for(let E=y;E<y+w;E++)S.push(this.getRow(E));return S}addRow(y){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const S=this._nextRow,E=this.getRow(S);return E.values=y,this._setStyleOption(S,w[0]==="i"?w:"n"),E}addRows(y){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";const S=[];return y.forEach(E=>{S.push(this.addRow(E,w))}),S}insertRow(y,w){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";return this.spliceRows(y,0,w),this._setStyleOption(y,S),this.getRow(y)}insertRows(y,w){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"n";if(this.spliceRows(y,0,...w),S!=="n")for(let E=0;E<w.length;E++)S[0]==="o"&&this.findRow(w.length+y+E)!==void 0?this._copyStyle(w.length+y+E,y+E,S[1]==="+"):S[0]==="i"&&this.findRow(y-1)!==void 0&&this._copyStyle(y-1,y+E,S[1]==="+");return this.getRows(y,w.length)}_setStyleOption(y){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"n";w[0]==="o"&&this.findRow(y+1)!==void 0?this._copyStyle(y+1,y,w[1]==="+"):w[0]==="i"&&this.findRow(y-1)!==void 0&&this._copyStyle(y-1,y,w[1]==="+")}_copyStyle(y,w){let S=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const E=this.getRow(y),I=this.getRow(w);I.style=x(E.style),E.eachCell({includeEmpty:S},(D,Z)=>{I.getCell(Z).style=x(D.style)}),I.height=E.height}duplicateRow(y,w){let S=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const E=this._rows[y-1],I=new Array(w).fill(E.values);this.spliceRows(y+1,S?0:w,...I);for(let D=0;D<w;D++){const Z=this._rows[y+D];Z.style=E.style,Z.height=E.height,E.eachCell({includeEmpty:!0},(K,z)=>{Z.getCell(z).style=K.style})}}spliceRows(y,w){const S=y+w;for(var E=arguments.length,I=new Array(E>2?E-2:0),D=2;D<E;D++)I[D-2]=arguments[D];const Z=I.length,K=Z-w,z=this._rows.length;let W,Q;if(K<0)for(y===z&&(this._rows[z-1]=void 0),W=S;W<=z;W++)if(Q=this._rows[W-1],Q){const rt=this.getRow(W+K);rt.values=Q.values,rt.style=Q.style,rt.height=Q.height,Q.eachCell({includeEmpty:!0},(tt,j)=>{rt.getCell(j).style=tt.style}),this._rows[W-1]=void 0}else this._rows[W+K-1]=void 0;else if(K>0)for(W=z;W>=S;W--)if(Q=this._rows[W-1],Q){const rt=this.getRow(W+K);rt.values=Q.values,rt.style=Q.style,rt.height=Q.height,Q.eachCell({includeEmpty:!0},(tt,j)=>{if(rt.getCell(j).style=tt.style,tt._value.constructor.name==="MergeValue"){const F=this.getRow(tt._row._number+Z).getCell(j),R=tt._value._master,T=this.getRow(R._row._number+Z).getCell(R._column._number);F.merge(T)}})}else this._rows[W+K-1]=void 0;for(W=0;W<Z;W++){const rt=this.getRow(y+W);rt.style={},rt.values=I[W]}this.workbook.definedNames.spliceRows(this.name,y,w,Z)}eachRow(y,w){if(w||(w=y,y=void 0),y&&y.includeEmpty){const S=this._rows.length;for(let E=1;E<=S;E++)w(this.getRow(E),E)}else this._rows.forEach(S=>{S&&S.hasValues&&w(S,S.number)})}getSheetValues(){const y=[];return this._rows.forEach(w=>{w&&(y[w.number]=w.values)}),y}findCell(y,w){const S=r.getAddress(y,w),E=this._rows[S.row-1];return E?E.findCell(S.col):void 0}getCell(y,w){const S=r.getAddress(y,w);return this.getRow(S.row).getCellEx(S)}mergeCells(){for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];const E=new c(w);this._mergeCellsInternal(E)}mergeCellsWithoutStyle(){for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];const E=new c(w);this._mergeCellsInternal(E,!0)}_mergeCellsInternal(y,w){o.each(this._merges,E=>{if(E.intersects(y))throw new Error("Cannot merge already merged cells")});const S=this.getCell(y.top,y.left);for(let E=y.top;E<=y.bottom;E++)for(let I=y.left;I<=y.right;I++)(E>y.top||I>y.left)&&this.getCell(E,I).merge(S,w);this._merges[S.address]=y}_unMergeMaster(y){const w=this._merges[y.address];if(w){for(let S=w.top;S<=w.bottom;S++)for(let E=w.left;E<=w.right;E++)this.getCell(S,E).unmerge();delete this._merges[y.address]}}get hasMerges(){return o.some(this._merges,Boolean)}unMergeCells(){for(var y=arguments.length,w=new Array(y),S=0;S<y;S++)w[S]=arguments[S];const E=new c(w);for(let I=E.top;I<=E.bottom;I++)for(let D=E.left;D<=E.right;D++){const Z=this.findCell(I,D);Z&&(Z.type===f.ValueType.Merge?this._unMergeMaster(Z.master):this._merges[Z.address]&&this._unMergeMaster(Z))}}fillFormula(y,w,S){let E=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"shared";const I=r.decode(y),{top:D,left:Z,bottom:K,right:z}=I,W=z-Z+1,Q=r.encodeAddress(D,Z),rt=E==="shared";let tt;tt=typeof S=="function"?S:Array.isArray(S)?Array.isArray(S[0])?(F,R)=>S[F-D][R-Z]:(F,R)=>S[(F-D)*W+(R-Z)]:()=>{};let j=!0;for(let F=D;F<=K;F++)for(let R=Z;R<=z;R++)j?(this.getCell(F,R).value={shareType:E,formula:w,ref:y,result:tt(F,R)},j=!1):this.getCell(F,R).value=rt?{sharedFormula:Q,result:tt(F,R)}:tt(F,R)}addImage(y,w){const S={type:"image",imageId:y,range:w};this._media.push(new h(this,S))}getImages(){return this._media.filter(y=>y.type==="image")}addBackgroundImage(y){const w={type:"background",imageId:y};this._media.push(new h(this,w))}getBackgroundImageId(){const y=this._media.find(w=>w.type==="background");return y&&y.imageId}protect(y,w){return new Promise(S=>{this.sheetProtection={sheet:!0},w&&"spinCount"in w&&(w.spinCount=Number.isFinite(w.spinCount)?Math.round(Math.max(0,w.spinCount)):1e5),y&&(this.sheetProtection.algorithmName="SHA-512",this.sheetProtection.saltValue=v.randomBytes(16).toString("base64"),this.sheetProtection.spinCount=w&&"spinCount"in w?w.spinCount:1e5,this.sheetProtection.hashValue=v.convertPasswordToHash(y,"SHA512",this.sheetProtection.saltValue,this.sheetProtection.spinCount)),w&&(this.sheetProtection=Object.assign(this.sheetProtection,w),!y&&"spinCount"in w&&delete this.sheetProtection.spinCount),S()})}unprotect(){this.sheetProtection=null}addTable(y){const w=new p(this,y);return this.tables[y.name]=w,w}getTable(y){return this.tables[y]}removeTable(y){delete this.tables[y]}getTables(){return Object.values(this.tables)}addConditionalFormatting(y){this.conditionalFormattings.push(y)}removeConditionalFormatting(y){typeof y=="number"?this.conditionalFormattings.splice(y,1):this.conditionalFormattings=y instanceof Function?this.conditionalFormattings.filter(y):[]}get tabColor(){return console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor}set tabColor(y){console.trace("worksheet.tabColor property is now deprecated. Please use worksheet.properties.tabColor"),this.properties.tabColor=y}get model(){const y={id:this.id,name:this.name,dataValidations:this.dataValidations.model,properties:this.properties,state:this.state,pageSetup:this.pageSetup,headerFooter:this.headerFooter,rowBreaks:this.rowBreaks,views:this.views,autoFilter:this.autoFilter,media:this._media.map(E=>E.model),sheetProtection:this.sheetProtection,tables:Object.values(this.tables).map(E=>E.model),conditionalFormattings:this.conditionalFormattings};y.cols=n.toModel(this.columns);const w=y.rows=[],S=y.dimensions=new c;return this._rows.forEach(E=>{const I=E&&E.model;I&&(S.expand(I.number,I.min,I.number,I.max),w.push(I))}),y.merges=[],o.each(this._merges,E=>{y.merges.push(E.range)}),y}_parseRows(y){this._rows=[],y.rows.forEach(w=>{const S=new l(this,w.number);this._rows[S.number-1]=S,S.model=w})}_parseMergeCells(y){o.each(y.mergeCells,w=>{this.mergeCellsWithoutStyle(w)})}set model(y){this.name=y.name,this._columns=n.fromModel(this,y.cols),this._parseRows(y),this._parseMergeCells(y),this.dataValidations=new g(y.dataValidations),this.properties=y.properties,this.pageSetup=y.pageSetup,this.headerFooter=y.headerFooter,this.views=y.views,this.autoFilter=y.autoFilter,this._media=y.media.map(w=>new h(this,w)),this.sheetProtection=y.sheetProtection,this.tables=y.tables.reduce((w,S)=>{const E=new p;return E.model=S,w[S.name]=E,w},{}),this.conditionalFormattings=y.conditionalFormattings}}},{"../utils/col-cache":19,"../utils/copy-style":20,"../utils/encryptor":21,"../utils/under-dash":26,"./column":4,"./data-validations":5,"./enums":7,"./image":8,"./range":10,"./row":11,"./table":12}],15:[function(t,s,u){t("core-js/modules/es.promise"),t("core-js/modules/es.promise.finally"),t("core-js/modules/es.object.assign"),t("core-js/modules/es.object.keys"),t("core-js/modules/es.object.values"),t("core-js/modules/es.symbol"),t("core-js/modules/es.symbol.async-iterator"),t("core-js/modules/es.array.iterator"),t("core-js/modules/es.array.includes"),t("core-js/modules/es.array.find-index"),t("core-js/modules/es.array.find"),t("core-js/modules/es.string.from-code-point"),t("core-js/modules/es.string.includes"),t("core-js/modules/es.number.is-nan"),t("regenerator-runtime/runtime");const o={Workbook:t("./doc/workbook")},r=t("./doc/enums");Object.keys(r).forEach(c=>{o[c]=r[c]}),s.exports=o},{"./doc/enums":7,"./doc/workbook":13,"core-js/modules/es.array.find":359,"core-js/modules/es.array.find-index":358,"core-js/modules/es.array.includes":360,"core-js/modules/es.array.iterator":361,"core-js/modules/es.number.is-nan":363,"core-js/modules/es.object.assign":364,"core-js/modules/es.object.keys":366,"core-js/modules/es.object.values":367,"core-js/modules/es.promise":372,"core-js/modules/es.promise.finally":371,"core-js/modules/es.string.from-code-point":376,"core-js/modules/es.string.includes":377,"core-js/modules/es.symbol":381,"core-js/modules/es.symbol.async-iterator":378,"regenerator-runtime/runtime":492}],16:[function(t,s,u){const o=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");u.bufferToString=function(r){return typeof r=="string"?r:o?o.decode(r):r.toString()}},{}],17:[function(t,s,u){const o=typeof TextEncoder>"u"?null:new TextEncoder("utf-8"),{Buffer:r}=t("buffer");u.stringToBuffer=function(c){return typeof c!="string"?c:o?r.from(o.encode(c).buffer):r.from(c)}},{buffer:220}],18:[function(t,s,u){const o=t("./under-dash"),r=t("./col-cache");s.exports=class{constructor(c){this.template=c,this.sheets={}}addCell(c){this.addCellEx(r.decodeEx(c))}getCell(c){return this.findCellEx(r.decodeEx(c),!0)}findCell(c){return this.findCellEx(r.decodeEx(c),!1)}findCellAt(c,l,n){const f=this.sheets[c],h=f&&f[l];return h&&h[n]}addCellEx(c){if(c.top)for(let l=c.top;l<=c.bottom;l++)for(let n=c.left;n<=c.right;n++)this.getCellAt(c.sheetName,l,n);else this.findCellEx(c,!0)}getCellEx(c){return this.findCellEx(c,!0)}findCellEx(c,l){const n=this.findSheet(c,l),f=this.findSheetRow(n,c,l);return this.findRowCell(f,c,l)}getCellAt(c,l,n){const f=this.sheets[c]||(this.sheets[c]=[]),h=f[l]||(f[l]=[]);return h[n]||(h[n]={sheetName:c,address:r.n2l(n)+l,row:l,col:n})}removeCellEx(c){const l=this.findSheet(c);if(!l)return;const n=this.findSheetRow(l,c);n&&delete n[c.col]}forEachInSheet(c,l){const n=this.sheets[c];n&&n.forEach((f,h)=>{f&&f.forEach((p,g)=>{p&&l(p,h,g)})})}forEach(c){o.each(this.sheets,(l,n)=>{this.forEachInSheet(n,c)})}map(c){const l=[];return this.forEach(n=>{l.push(c(n))}),l}findSheet(c,l){const n=c.sheetName;return this.sheets[n]?this.sheets[n]:l?this.sheets[n]=[]:void 0}findSheetRow(c,l,n){const{row:f}=l;return c&&c[f]?c[f]:n?c[f]=[]:void 0}findRowCell(c,l,n){const{col:f}=l;return c&&c[f]?c[f]:n?c[f]=this.template?Object.assign(l,JSON.parse(JSON.stringify(this.template))):l:void 0}spliceRows(c,l,n,f){const h=this.sheets[c];if(h){const p=[];for(let g=0;g<f;g++)p.push([]);h.splice(l,n,...p)}}spliceColumns(c,l,n,f){const h=this.sheets[c];if(h){const p=[];for(let g=0;g<f;g++)p.push(null);o.each(h,g=>{g.splice(l,n,...p)})}}}},{"./col-cache":19,"./under-dash":26}],19:[function(t,s,u){const o=/^[A-Z]+\d+$/,r={_dictionary:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],_l2nFill:0,_l2n:{},_n2l:[],_level:c=>c<=26?1:c<=676?2:3,_fill(c){let l,n,f,h,p,g=1;if(c>=4)throw new Error("Out of bounds. Excel supports columns from 1 to 16384");if(this._l2nFill<1&&c>=1){for(;g<=26;)l=this._dictionary[g-1],this._n2l[g]=l,this._l2n[l]=g,g++;this._l2nFill=1}if(this._l2nFill<2&&c>=2){for(g=27;g<=702;)n=g-27,f=n%26,h=Math.floor(n/26),l=this._dictionary[h]+this._dictionary[f],this._n2l[g]=l,this._l2n[l]=g,g++;this._l2nFill=2}if(this._l2nFill<3&&c>=3){for(g=703;g<=16384;)n=g-703,f=n%26,h=Math.floor(n/26)%26,p=Math.floor(n/676),l=this._dictionary[p]+this._dictionary[h]+this._dictionary[f],this._n2l[g]=l,this._l2n[l]=g,g++;this._l2nFill=3}},l2n(c){if(this._l2n[c]||this._fill(c.length),!this._l2n[c])throw new Error("Out of bounds. Invalid column letter: "+c);return this._l2n[c]},n2l(c){if(c<1||c>16384)throw new Error(c+" is out of bounds. Excel supports columns from 1 to 16384");return this._n2l[c]||this._fill(this._level(c)),this._n2l[c]},_hash:{},validateAddress(c){if(!o.test(c))throw new Error("Invalid Address: "+c);return!0},decodeAddress(c){const l=c.length<5&&this._hash[c];if(l)return l;let n=!1,f="",h=0,p=!1,g="",v=0;for(let y,w=0;w<c.length;w++)if(y=c.charCodeAt(w),!p&&y>=65&&y<=90)n=!0,f+=c[w],h=26*h+y-64;else if(y>=48&&y<=57)p=!0,g+=c[w],v=10*v+y-48;else if(p&&n&&y!==36)break;if(n){if(h>16384)throw new Error("Out of bounds. Invalid column letter: "+f)}else h=void 0;p||(v=void 0);const x={address:c=f+g,col:h,row:v,$col$row:`$${f}$${g}`};return h<=100&&v<=100&&(this._hash[c]=x,this._hash[x.$col$row]=x),x},getAddress(c,l){if(l){const n=this.n2l(l)+c;return this.decodeAddress(n)}return this.decodeAddress(c)},decode(c){const l=c.split(":");if(l.length===2){const n=this.decodeAddress(l[0]),f=this.decodeAddress(l[1]),h={top:Math.min(n.row,f.row),left:Math.min(n.col,f.col),bottom:Math.max(n.row,f.row),right:Math.max(n.col,f.col)};return h.tl=this.n2l(h.left)+h.top,h.br=this.n2l(h.right)+h.bottom,h.dimensions=`${h.tl}:${h.br}`,h}return this.decodeAddress(c)},decodeEx(c){const l=c.match(/(?:(?:(?:'((?:[^']|'')*)')|([^'^ !]*))!)?(.*)/),n=l[1]||l[2],f=l[3],h=f.split(":");if(h.length>1){let g=this.decodeAddress(h[0]),v=this.decodeAddress(h[1]);const x=Math.min(g.row,v.row),y=Math.min(g.col,v.col),w=Math.max(g.row,v.row),S=Math.max(g.col,v.col);return g=this.n2l(y)+x,v=this.n2l(S)+w,{top:x,left:y,bottom:w,right:S,sheetName:n,tl:{address:g,col:y,row:x,$col$row:`$${this.n2l(y)}$${x}`,sheetName:n},br:{address:v,col:S,row:w,$col$row:`$${this.n2l(S)}$${w}`,sheetName:n},dimensions:`${g}:${v}`}}if(f.startsWith("#"))return n?{sheetName:n,error:f}:{error:f};const p=this.decodeAddress(f);return n?{sheetName:n,...p}:p},encodeAddress:(c,l)=>r.n2l(l)+c,encode(){switch(arguments.length){case 2:return r.encodeAddress(arguments[0],arguments[1]);case 4:return`${r.encodeAddress(arguments[0],arguments[1])}:${r.encodeAddress(arguments[2],arguments[3])}`;default:throw new Error("Can only encode with 2 or 4 arguments")}},inRange(c,l){const[n,f,,h,p]=c,[g,v]=l;return g>=n&&g<=h&&v>=f&&v<=p}};s.exports=r},{}],20:[function(t,s,u){const o=(c,l)=>({...c,...l.reduce((n,f)=>(c[f]&&(n[f]={...c[f]}),n),{})}),r=function(c,l,n){let f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];c[n]&&(l[n]=o(c[n],f))};u.copyStyle=c=>{if(!c)return c;if(l=c,Object.keys(l).length===0)return{};var l;const n={...c};return r(c,n,"font",["color"]),r(c,n,"alignment"),r(c,n,"protection"),c.border&&(r(c,n,"border"),r(c.border,n.border,"top",["color"]),r(c.border,n.border,"left",["color"]),r(c.border,n.border,"bottom",["color"]),r(c.border,n.border,"right",["color"]),r(c.border,n.border,"diagonal",["color"])),c.fill&&(r(c,n,"fill",["fgColor","bgColor","center"]),c.fill.stops&&(n.fill.stops=c.fill.stops.map(f=>o(f,["color"])))),n}},{}],21:[function(t,s,u){(function(o){(function(){const r=t("crypto"),c={hash(l){const n=r.createHash(l);for(var f=arguments.length,h=new Array(f>1?f-1:0),p=1;p<f;p++)h[p-1]=arguments[p];return n.update(o.concat(h)),n.digest()},convertPasswordToHash(l,n,f,h){if(n=n.toLowerCase(),r.getHashes().indexOf(n)<0)throw new Error(`Hash algorithm '${n}' not supported!`);const p=o.from(l,"utf16le");let g=this.hash(n,o.from(f,"base64"),p);for(let v=0;v<h;v++){const x=o.alloc(4);x.writeUInt32LE(v,0),g=this.hash(n,g,x)}return g.toString("base64")},randomBytes:l=>r.randomBytes(l)};s.exports=c}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,crypto:390}],22:[function(t,s,u){const{SaxesParser:o}=t("saxes"),{PassThrough:r}=t("readable-stream"),{bufferToString:c}=t("./browser-buffer-decode");s.exports=async function*(l){l.pipe&&!l[Symbol.asyncIterator]&&(l=l.pipe(new r));const n=new o;let f;n.on("error",p=>{f=p});let h=[];n.on("opentag",p=>h.push({eventType:"opentag",value:p})),n.on("text",p=>h.push({eventType:"text",value:p})),n.on("closetag",p=>h.push({eventType:"closetag",value:p}));for await(const p of l){if(n.write(c(p)),f)throw f;yield h,h=[]}}},{"./browser-buffer-decode":16,"readable-stream":491,saxes:496}],23:[function(t,s,u){const o=t("./col-cache"),r=/(([a-z_\-0-9]*)!)?([a-z0-9_$]{2,})([(])?/gi,c=/^([$])?([a-z]+)([$])?([1-9][0-9]*)$/i;s.exports={slideFormula:function(l,n,f){const h=o.decode(n),p=o.decode(f);return l.replace(r,(g,v,x,y,w)=>{if(w)return g;const S=c.exec(y);if(S){const E=S[1],I=S[2].toUpperCase(),D=S[3],Z=S[4];if(I.length>3||I.length===3&&I>"XFD")return g;let K=o.l2n(I),z=parseInt(Z,10);return E||(K+=p.col-h.col),D||(z+=p.row-h.row),(v||"")+(E||"")+o.n2l(K)+(D||"")+z}return g})}}},{"./col-cache":19}],24:[function(t,s,u){(function(o,r){(function(){const c=t("readable-stream"),l=t("./utils"),n=t("./string-buf");class f{constructor(y,w){this._data=y,this._encoding=w}get length(){return this.toBuffer().length}copy(y,w,S,E){return this.toBuffer().copy(y,w,S,E)}toBuffer(){return this._buffer||(this._buffer=r.from(this._data,this._encoding)),this._buffer}}class h{constructor(y){this._data=y}get length(){return this._data.length}copy(y,w,S,E){return this._data._buf.copy(y,w,S,E)}toBuffer(){return this._data.toBuffer()}}class p{constructor(y){this._data=y}get length(){return this._data.length}copy(y,w,S,E){this._data.copy(y,w,S,E)}toBuffer(){return this._data}}class g{constructor(y){this.size=y,this.buffer=r.alloc(y),this.iRead=0,this.iWrite=0}toBuffer(){if(this.iRead===0&&this.iWrite===this.size)return this.buffer;const y=r.alloc(this.iWrite-this.iRead);return this.buffer.copy(y,0,this.iRead,this.iWrite),y}get length(){return this.iWrite-this.iRead}get eod(){return this.iRead===this.iWrite}get full(){return this.iWrite===this.size}read(y){let w;return y===0?null:y===void 0||y>=this.length?(w=this.toBuffer(),this.iRead=this.iWrite,w):(w=r.alloc(y),this.buffer.copy(w,0,this.iRead,y),this.iRead+=y,w)}write(y,w,S){const E=Math.min(S,this.size-this.iWrite);return y.copy(this.buffer,this.iWrite,w,w+E),this.iWrite+=E,E}}const v=function(x){x=x||{},this.bufSize=x.bufSize||1048576,this.buffers=[],this.batch=x.batch||!1,this.corked=!1,this.inPos=0,this.outPos=0,this.pipes=[],this.paused=!1,this.encoding=null};l.inherits(v,c.Duplex,{toBuffer(){switch(this.buffers.length){case 0:return null;case 1:return this.buffers[0].toBuffer();default:return r.concat(this.buffers.map(x=>x.toBuffer()))}},_getWritableBuffer(){if(this.buffers.length){const y=this.buffers[this.buffers.length-1];if(!y.full)return y}const x=new g(this.bufSize);return this.buffers.push(x),x},async _pipe(x){await Promise.all(this.pipes.map((function(y){return new Promise(w=>{y.write(x.toBuffer(),()=>{w()})})})))},_writeToBuffers(x){let y=0;const w=x.length;for(;y<w;)y+=this._getWritableBuffer().write(x,y,w-y)},async write(x,y,w){let S;if(y instanceof Function&&(w=y,y="utf8"),w=w||l.nop,x instanceof n)S=new h(x);else if(x instanceof r)S=new p(x);else{if(!(typeof x=="string"||x instanceof String||x instanceof ArrayBuffer))throw new Error("Chunk must be one of type String, Buffer or StringBuf.");S=new f(x,y)}if(this.pipes.length)if(this.batch)for(this._writeToBuffers(S);!this.corked&&this.buffers.length>1;)this._pipe(this.buffers.shift());else this.corked?(this._writeToBuffers(S),o.nextTick(w)):(await this._pipe(S),w());else this.paused||this.emit("data",S.toBuffer()),this._writeToBuffers(S),this.emit("readable");return!0},cork(){this.corked=!0},_flush(){if(this.pipes.length)for(;this.buffers.length;)this._pipe(this.buffers.shift())},uncork(){this.corked=!1,this._flush()},end(x,y,w){const S=E=>{E?w(E):(this._flush(),this.pipes.forEach(I=>{I.end()}),this.emit("finish"))};x?this.write(x,y,S):S()},read(x){let y;if(x){for(y=[];x&&this.buffers.length&&!this.buffers[0].eod;){const w=this.buffers[0],S=w.read(x);x-=S.length,y.push(S),w.eod&&w.full&&this.buffers.shift()}return r.concat(y)}return y=this.buffers.map(w=>w.toBuffer()).filter(Boolean),this.buffers=[],r.concat(y)},setEncoding(x){this.encoding=x},pause(){this.paused=!0},resume(){this.paused=!1},isPaused(){return!!this.paused},pipe(x){this.pipes.push(x),!this.paused&&this.buffers.length&&this.end()},unpipe(x){this.pipes=this.pipes.filter(y=>y!==x)},unshift(){throw new Error("Not Implemented")},wrap(){throw new Error("Not Implemented")}}),s.exports=v}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"./string-buf":25,"./utils":27,_process:467,buffer:220,"readable-stream":491}],25:[function(t,s,u){(function(o){(function(){s.exports=class{constructor(r){this._buf=o.alloc(r&&r.size||16384),this._encoding=r&&r.encoding||"utf8",this._inPos=0,this._buffer=void 0}get length(){return this._inPos}get capacity(){return this._buf.length}get buffer(){return this._buf}toBuffer(){return this._buffer||(this._buffer=o.alloc(this.length),this._buf.copy(this._buffer,0,0,this.length)),this._buffer}reset(r){r=r||0,this._buffer=void 0,this._inPos=r}_grow(r){let c=2*this._buf.length;for(;c<r;)c*=2;const l=o.alloc(c);this._buf.copy(l,0),this._buf=l}addText(r){this._buffer=void 0;let c=this._inPos+this._buf.write(r,this._inPos,this._encoding);for(;c>=this._buf.length-4;)this._grow(this._inPos+r.length),c=this._inPos+this._buf.write(r,this._inPos,this._encoding);this._inPos=c}addStringBuf(r){r.length&&(this._buffer=void 0,this.length+r.length>this.capacity&&this._grow(this.length+r.length),r._buf.copy(this._buf,this._inPos,0,r.length),this._inPos+=r.length)}}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],26:[function(t,s,u){const{toString:o}=Object.prototype,r=/["&<>]/,c={each:function(l,n){l&&(Array.isArray(l)?l.forEach(n):Object.keys(l).forEach(f=>{n(l[f],f)}))},some:function(l,n){return!!l&&(Array.isArray(l)?l.some(n):Object.keys(l).some(f=>n(l[f],f)))},every:function(l,n){return!l||(Array.isArray(l)?l.every(n):Object.keys(l).every(f=>n(l[f],f)))},map:function(l,n){return l?Array.isArray(l)?l.map(n):Object.keys(l).map(f=>n(l[f],f)):[]},keyBy:(l,n)=>l.reduce((f,h)=>(f[h[n]]=h,f),{}),isEqual:function(l,n){const f=typeof l,h=typeof n,p=Array.isArray(l),g=Array.isArray(n);let v;if(f!==h)return!1;switch(typeof l){case"object":if(p||g)return!(!p||!g)&&l.length===n.length&&l.every((x,y)=>{const w=n[y];return c.isEqual(x,w)});if(l===null||n===null)return l===n;if(v=Object.keys(l),Object.keys(n).length!==v.length)return!1;for(const x of v)if(!n.hasOwnProperty(x))return!1;return c.every(l,(x,y)=>{const w=n[y];return c.isEqual(x,w)});default:return l===n}},escapeHtml(l){const n=r.exec(l);if(!n)return l;let f="",h="",p=0,g=n.index;for(;g<l.length;g++){switch(l.charAt(g)){case'"':h="&quot;";break;case"&":h="&amp;";break;case"'":h="&apos;";break;case"<":h="&lt;";break;case">":h="&gt;";break;default:continue}p!==g&&(f+=l.substring(p,g)),p=g+1,f+=h}return p!==g?f+l.substring(p,g):f},strcmp:(l,n)=>l<n?-1:l>n?1:0,isUndefined:l=>o.call(l)==="[object Undefined]",isObject:l=>o.call(l)==="[object Object]",deepMerge(){const l=arguments[0]||{},{length:n}=arguments;let f,h,p;function g(v,x){f=l[x],p=Array.isArray(v),c.isObject(v)||p?(p?(p=!1,h=f&&Array.isArray(f)?f:[]):h=f&&c.isObject(f)?f:{},l[x]=c.deepMerge(h,v)):c.isUndefined(v)||(l[x]=v)}for(let v=0;v<n;v++)c.each(arguments[v],g);return l}};s.exports=c},{}],27:[function(t,s,u){(function(o,r){(function(){const c=t("fs"),l=/[<>&'"\x7F\x00-\x08\x0B-\x0C\x0E-\x1F]/,n={nop(){},promiseImmediate:f=>new Promise(h=>{o.setImmediate?r(()=>{h(f)}):setTimeout(()=>{h(f)},1)}),inherits:function(f,h,p,g){f.super_=h,g||(g=p,p=null),p&&Object.keys(p).forEach(x=>{Object.defineProperty(f,x,Object.getOwnPropertyDescriptor(p,x))});const v={constructor:{value:f,enumerable:!1,writable:!1,configurable:!0}};g&&Object.keys(g).forEach(x=>{v[x]=Object.getOwnPropertyDescriptor(g,x)}),f.prototype=Object.create(h.prototype,v)},dateToExcel:(f,h)=>25569+f.getTime()/864e5-(h?1462:0),excelToDate(f,h){const p=Math.round(24*(f-25569+(h?1462:0))*3600*1e3);return new Date(p)},parsePath(f){const h=f.lastIndexOf("/");return{path:f.substring(0,h),name:f.substring(h+1)}},getRelsPath(f){const h=n.parsePath(f);return`${h.path}/_rels/${h.name}.rels`},xmlEncode(f){const h=l.exec(f);if(!h)return f;let p="",g="",v=0,x=h.index;for(;x<f.length;x++){const y=f.charCodeAt(x);switch(y){case 34:g="&quot;";break;case 38:g="&amp;";break;case 39:g="&apos;";break;case 60:g="&lt;";break;case 62:g="&gt;";break;case 127:g="";break;default:if(y<=31&&(y<=8||y>=11&&y!==13)){g="";break}continue}v!==x&&(p+=f.substring(v,x)),v=x+1,g&&(p+=g)}return v!==x?p+f.substring(v,x):p},xmlDecode:f=>f.replace(/&([a-z]*);/g,h=>{switch(h){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&apos;":return"'";case"&quot;":return'"';default:return h}}),validInt(f){const h=parseInt(f,10);return Number.isNaN(h)?0:h},isDateFmt(f){return f?(f=(f=f.replace(/\[[^\]]*]/g,"")).replace(/"[^"]*"/g,"")).match(/[ymdhMsb]+/)!==null:!1},fs:{exists:f=>new Promise(h=>{c.access(f,c.constants.F_OK,p=>{h(!p)})})},toIsoDateString:f=>f.toIsoString().subsstr(0,10),parseBoolean:f=>f===!0||f==="true"||f===1||f==="1"};s.exports=n}).call(this)}).call(this,typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{fs:216,timers:523}],28:[function(t,s,u){const o=t("./under-dash"),r=t("./utils");function c(f,h,p){f.push(` ${h}="${r.xmlEncode(p.toString())}"`)}function l(f,h){if(h){const p=[];o.each(h,(g,v)=>{g!==void 0&&c(p,v,g)}),f.push(p.join(""))}}class n{constructor(){this._xml=[],this._stack=[],this._rollbacks=[]}get tos(){return this._stack.length?this._stack[this._stack.length-1]:void 0}get cursor(){return this._xml.length}openXml(h){const p=this._xml;p.push("<?xml"),l(p,h),p.push(`?>
`)}openNode(h,p){const g=this.tos,v=this._xml;g&&this.open&&v.push(">"),this._stack.push(h),v.push("<"),v.push(h),l(v,p),this.leaf=!0,this.open=!0}addAttribute(h,p){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");p!==void 0&&c(this._xml,h,p)}addAttributes(h){if(!this.open)throw new Error("Cannot write attributes to node if it is not open");l(this._xml,h)}writeText(h){const p=this._xml;this.open&&(p.push(">"),this.open=!1),this.leaf=!1,p.push(r.xmlEncode(h.toString()))}writeXml(h){this.open&&(this._xml.push(">"),this.open=!1),this.leaf=!1,this._xml.push(h)}closeNode(){const h=this._stack.pop(),p=this._xml;this.leaf?p.push("/>"):(p.push("</"),p.push(h),p.push(">")),this.open=!1,this.leaf=!1}leafNode(h,p,g){this.openNode(h,p),g!==void 0&&this.writeText(g),this.closeNode()}closeAll(){for(;this._stack.length;)this.closeNode()}addRollback(){return this._rollbacks.push({xml:this._xml.length,stack:this._stack.length,leaf:this.leaf,open:this.open}),this.cursor}commit(){this._rollbacks.pop()}rollback(){const h=this._rollbacks.pop();this._xml.length>h.xml&&this._xml.splice(h.xml,this._xml.length-h.xml),this._stack.length>h.stack&&this._stack.splice(h.stack,this._stack.length-h.stack),this.leaf=h.leaf,this.open=h.open}get xml(){return this.closeAll(),this._xml.join("")}}n.StdDocAttributes={version:"1.0",encoding:"UTF-8",standalone:"yes"},s.exports=n},{"./under-dash":26,"./utils":27}],29:[function(t,s,u){(function(o){(function(){const r=t("events"),c=t("jszip"),l=t("./stream-buf"),{stringToBuffer:n}=t("./browser-buffer-encode");class f extends r.EventEmitter{constructor(p){super(),this.options=Object.assign({type:"nodebuffer",compression:"DEFLATE"},p),this.zip=new c,this.stream=new l}append(p,g){g.hasOwnProperty("base64")&&g.base64?this.zip.file(g.name,p,{base64:!0}):(o.browser&&typeof p=="string"&&(p=n(p)),this.zip.file(g.name,p))}async finalize(){const p=await this.zip.generateAsync(this.options);this.stream.end(p),this.emit("finish")}read(p){return this.stream.read(p)}setEncoding(p){return this.stream.setEncoding(p)}pause(){return this.stream.pause()}resume(){return this.stream.resume()}isPaused(){return this.stream.isPaused()}pipe(p,g){return this.stream.pipe(p,g)}unpipe(p){return this.stream.unpipe(p)}unshift(p){return this.stream.unshift(p)}wrap(p){return this.stream.wrap(p)}}s.exports={ZipWriter:f}}).call(this)}).call(this,t("_process"))},{"./browser-buffer-encode":17,"./stream-buf":24,_process:467,events:422,jszip:441}],30:[function(t,s,u){s.exports={0:{f:"General"},1:{f:"0"},2:{f:"0.00"},3:{f:"#,##0"},4:{f:"#,##0.00"},9:{f:"0%"},10:{f:"0.00%"},11:{f:"0.00E+00"},12:{f:"# ?/?"},13:{f:"# ??/??"},14:{f:"mm-dd-yy"},15:{f:"d-mmm-yy"},16:{f:"d-mmm"},17:{f:"mmm-yy"},18:{f:"h:mm AM/PM"},19:{f:"h:mm:ss AM/PM"},20:{f:"h:mm"},21:{f:"h:mm:ss"},22:{f:'m/d/yy "h":mm'},27:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},28:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},29:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},30:{"zh-tw":"m/d/yy ","zh-cn":"m-d-yy","ja-jp":"m/d/yy","ko-kr":"mm-dd-yy"},31:{"zh-tw":'yyyy""m""d""',"zh-cn":'yyyy""m""d""',"ja-jp":'yyyy""m""d""',"ko-kr":'yyyy"" mm"" dd""'},32:{"zh-tw":'hh""mm""',"zh-cn":'h""mm""',"ja-jp":'h""mm""',"ko-kr":'h"" mm""'},33:{"zh-tw":'hh""mm""ss""',"zh-cn":'h""mm""ss""',"ja-jp":'h""mm""ss""',"ko-kr":'h"" mm"" ss""'},34:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},35:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},36:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},37:{f:"#,##0 ;(#,##0)"},38:{f:"#,##0 ;[Red](#,##0)"},39:{f:"#,##0.00 ;(#,##0.00)"},40:{f:"#,##0.00 ;[Red](#,##0.00)"},45:{f:"mm:ss"},46:{f:"[h]:mm:ss"},47:{f:"mmss.0"},48:{f:"##0.0E+0"},49:{f:"@"},50:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},51:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},52:{"zh-tw":'/ hh""mm""',"zh-cn":'yyyy""m""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},53:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'m""d""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},54:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},55:{"zh-tw":'/ hh""mm""',"zh-cn":'/ h""mm""',"ja-jp":'yyyy""m""',"ko-kr":"yyyy-mm-dd"},56:{"zh-tw":'/ hh""mm""ss""',"zh-cn":'/ h""mm""ss""',"ja-jp":'m""d""',"ko-kr":"yyyy-mm-dd"},57:{"zh-tw":"[$-404]e/m/d","zh-cn":'yyyy""m""',"ja-jp":"[$-411]ge.m.d","ko-kr":'yyyy"" mm"" dd""'},58:{"zh-tw":'[$-404]e""m""d""',"zh-cn":'m""d""',"ja-jp":'[$-411]ggge""m""d""',"ko-kr":"mm-dd"},59:{"th-th":"t0"},60:{"th-th":"t0.00"},61:{"th-th":"t#,##0"},62:{"th-th":"t#,##0.00"},67:{"th-th":"t0%"},68:{"th-th":"t0.00%"},69:{"th-th":"t# ?/?"},70:{"th-th":"t# ??/??"},81:{"th-th":"d/m/bb"}}},{}],31:[function(t,s,u){s.exports={OfficeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",CalcChain:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/calcChain",SharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Styles:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Theme:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",Image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",CoreProperties:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",ExtenderProperties:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",Comments:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",VmlDrawing:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table"}},{}],32:[function(t,s,u){const o=t("../../utils/parse-sax"),r=t("../../utils/xml-stream");class c{prepare(){}render(){}parseOpen(n){}parseText(n){}parseClose(n){}reconcile(n,f){}reset(){this.model=null,this.map&&Object.values(this.map).forEach(n=>{n instanceof c?n.reset():n.xform&&n.xform.reset()})}mergeModel(n){this.model=Object.assign(this.model||{},n)}async parse(n){for await(const f of n)for(const{eventType:h,value:p}of f)if(h==="opentag")this.parseOpen(p);else if(h==="text")this.parseText(p);else if(h==="closetag"&&!this.parseClose(p.name))return this.model;return this.model}async parseStream(n){return this.parse(o(n))}get xml(){return this.toXml(this.model)}toXml(n){const f=new r;return this.render(f,n),f.xml}static toAttribute(n,f){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(n===void 0){if(h)return f}else if(h||n!==f)return n.toString()}static toStringAttribute(n,f){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return c.toAttribute(n,f,h)}static toStringValue(n,f){return n===void 0?f:n}static toBoolAttribute(n,f){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(n===void 0){if(h)return f}else if(h||n!==f)return n?"1":"0"}static toBoolValue(n,f){return n===void 0?f:n==="1"}static toIntAttribute(n,f){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return c.toAttribute(n,f,h)}static toIntValue(n,f){return n===void 0?f:parseInt(n,10)}static toFloatAttribute(n,f){let h=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return c.toAttribute(n,f,h)}static toFloatValue(n,f){return n===void 0?f:parseFloat(n)}}s.exports=c},{"../../utils/parse-sax":22,"../../utils/xml-stream":28}],33:[function(t,s,u){const o=t("../base-xform"),r=t("../../../utils/col-cache");function c(n){try{return r.decodeEx(n),!0}catch{return!1}}function l(n){const f=[];let h=!1,p="";return n.split(",").forEach(g=>{if(!g)return;const v=(g.match(/'/g)||[]).length;if(!v)return void(h?p+=g+",":c(g)&&f.push(g));const x=v%2==0;!h&&x&&c(g)?f.push(g):h&&!x?(h=!1,c(p+g)&&f.push(p+g),p=""):(h=!0,p+=g+",")}),f}s.exports=class extends o{render(n,f){n.openNode("definedName",{name:f.name,localSheetId:f.localSheetId}),n.writeText(f.ranges.join(",")),n.closeNode()}parseOpen(n){switch(n.name){case"definedName":return this._parsedName=n.attributes.name,this._parsedLocalSheetId=n.attributes.localSheetId,this._parsedText=[],!0;default:return!1}}parseText(n){this._parsedText.push(n)}parseClose(){return this.model={name:this._parsedName,ranges:l(this._parsedText.join(""))},this._parsedLocalSheetId!==void 0&&(this.model.localSheetId=parseInt(this._parsedLocalSheetId,10)),!1}}},{"../../../utils/col-cache":19,"../base-xform":32}],34:[function(t,s,u){const o=t("../../../utils/utils"),r=t("../base-xform");s.exports=class extends r{render(c,l){c.leafNode("sheet",{sheetId:l.id,name:l.name,state:l.state,"r:id":l.rId})}parseOpen(c){return c.name==="sheet"&&(this.model={name:o.xmlDecode(c.attributes.name),id:parseInt(c.attributes.sheetId,10),state:c.attributes.state,rId:c.attributes["r:id"]},!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/utils":27,"../base-xform":32}],35:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{render(r,c){r.leafNode("calcPr",{calcId:171027,fullCalcOnLoad:c.fullCalcOnLoad?1:void 0})}parseOpen(r){return r.name==="calcPr"&&(this.model={},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],36:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{render(r,c){r.leafNode("workbookPr",{date1904:c.date1904?1:void 0,defaultThemeVersion:164011,filterPrivacy:1})}parseOpen(r){return r.name==="workbookPr"&&(this.model={date1904:r.attributes.date1904==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],37:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{render(r,c){const l={xWindow:c.x||0,yWindow:c.y||0,windowWidth:c.width||12e3,windowHeight:c.height||24e3,firstSheet:c.firstSheet,activeTab:c.activeTab};c.visibility&&c.visibility!=="visible"&&(l.visibility=c.visibility),r.leafNode("workbookView",l)}parseOpen(r){if(r.name==="workbookView"){const c=this.model={},l=function(f,h,p){const g=h!==void 0?c[f]=h:p;g!==void 0&&(c[f]=g)},n=function(f,h,p){const g=h!==void 0?c[f]=parseInt(h,10):p;g!==void 0&&(c[f]=g)};return n("x",r.attributes.xWindow,0),n("y",r.attributes.yWindow,0),n("width",r.attributes.windowWidth,25e3),n("height",r.attributes.windowHeight,1e4),l("visibility",r.attributes.visibility,"visible"),n("activeTab",r.attributes.activeTab,void 0),n("firstSheet",r.attributes.firstSheet,void 0),!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],38:[function(t,s,u){const o=t("../../../utils/under-dash"),r=t("../../../utils/col-cache"),c=t("../../../utils/xml-stream"),l=t("../base-xform"),n=t("../static-xform"),f=t("../list-xform"),h=t("./defined-name-xform"),p=t("./sheet-xform"),g=t("./workbook-view-xform"),v=t("./workbook-properties-xform"),x=t("./workbook-calc-properties-xform");class y extends l{constructor(){super(),this.map={fileVersion:y.STATIC_XFORMS.fileVersion,workbookPr:new v,bookViews:new f({tag:"bookViews",count:!1,childXform:new g}),sheets:new f({tag:"sheets",count:!1,childXform:new p}),definedNames:new f({tag:"definedNames",count:!1,childXform:new h}),calcPr:new x}}prepare(S){S.sheets=S.worksheets;const E=[];let I=0;S.sheets.forEach(D=>{if(D.pageSetup&&D.pageSetup.printArea&&D.pageSetup.printArea.split("&&").forEach(Z=>{const K=Z.split(":"),z={name:"_xlnm.Print_Area",ranges:[`'${D.name}'!$${K[0]}:$${K[1]}`],localSheetId:I};E.push(z)}),D.pageSetup&&(D.pageSetup.printTitlesRow||D.pageSetup.printTitlesColumn)){const Z=[];if(D.pageSetup.printTitlesColumn){const z=D.pageSetup.printTitlesColumn.split(":");Z.push(`'${D.name}'!$${z[0]}:$${z[1]}`)}if(D.pageSetup.printTitlesRow){const z=D.pageSetup.printTitlesRow.split(":");Z.push(`'${D.name}'!$${z[0]}:$${z[1]}`)}const K={name:"_xlnm.Print_Titles",ranges:Z,localSheetId:I};E.push(K)}I++}),E.length&&(S.definedNames=S.definedNames.concat(E)),(S.media||[]).forEach((D,Z)=>{D.name=D.type+(Z+1)})}render(S,E){S.openXml(c.StdDocAttributes),S.openNode("workbook",y.WORKBOOK_ATTRIBUTES),this.map.fileVersion.render(S),this.map.workbookPr.render(S,E.properties),this.map.bookViews.render(S,E.views),this.map.sheets.render(S,E.sheets),this.map.definedNames.render(S,E.definedNames),this.map.calcPr.render(S,E.calcProperties),S.closeNode()}parseOpen(S){if(this.parser)return this.parser.parseOpen(S),!0;switch(S.name){case"workbook":return!0;default:return this.parser=this.map[S.name],this.parser&&this.parser.parseOpen(S),!0}}parseText(S){this.parser&&this.parser.parseText(S)}parseClose(S){if(this.parser)return this.parser.parseClose(S)||(this.parser=void 0),!0;switch(S){case"workbook":return this.model={sheets:this.map.sheets.model,properties:this.map.workbookPr.model||{},views:this.map.bookViews.model,calcProperties:{}},this.map.definedNames.model&&(this.model.definedNames=this.map.definedNames.model),!1;default:return!0}}reconcile(S){const E=(S.workbookRels||[]).reduce((z,W)=>(z[W.Id]=W,z),{}),I=[];let D,Z=0;(S.sheets||[]).forEach(z=>{const W=E[z.rId];W&&(D=S.worksheetHash["xl/"+W.Target.replace(/^(\s|\/xl\/)+/,"")],D&&(D.name=z.name,D.id=z.id,D.state=z.state,I[Z++]=D))});const K=[];o.each(S.definedNames,z=>{if(z.name==="_xlnm.Print_Area"){if(D=I[z.localSheetId],D){D.pageSetup||(D.pageSetup={});const W=r.decodeEx(z.ranges[0]);D.pageSetup.printArea=D.pageSetup.printArea?`${D.pageSetup.printArea}&&${W.dimensions}`:W.dimensions}}else if(z.name==="_xlnm.Print_Titles"){if(D=I[z.localSheetId],D){D.pageSetup||(D.pageSetup={});const W=z.ranges.join(","),Q=/\$/g,rt=/\$\d+:\$\d+/,tt=W.match(rt);if(tt&&tt.length){const R=tt[0];D.pageSetup.printTitlesRow=R.replace(Q,"")}const j=/\$[A-Z]+:\$[A-Z]+/,F=W.match(j);if(F&&F.length){const R=F[0];D.pageSetup.printTitlesColumn=R.replace(Q,"")}}}else K.push(z)}),S.definedNames=K,S.media.forEach((z,W)=>{z.index=W})}}y.WORKBOOK_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x15","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},y.STATIC_XFORMS={fileVersion:new n({tag:"fileVersion",$:{appName:"xl",lastEdited:5,lowestEdited:5,rupBuild:9303}})},s.exports=y},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./defined-name-xform":33,"./sheet-xform":34,"./workbook-calc-properties-xform":35,"./workbook-properties-xform":36,"./workbook-view-xform":37}],39:[function(t,s,u){const o=t("../strings/rich-text-xform"),r=t("../../../utils/utils"),c=t("../base-xform"),l=s.exports=function(n){this.model=n};r.inherits(l,c,{get tag(){return"r"},get richTextXform(){return this._richTextXform||(this._richTextXform=new o),this._richTextXform},render(n,f){f=f||this.model,n.openNode("comment",{ref:f.ref,authorId:0}),n.openNode("text"),f&&f.note&&f.note.texts&&f.note.texts.forEach(h=>{this.richTextXform.render(n,h)}),n.closeNode(),n.closeNode()},parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case"comment":return this.model={type:"note",note:{texts:[]},...n.attributes},!0;case"r":return this.parser=this.richTextXform,this.parser.parseOpen(n),!0;default:return!1}},parseText(n){this.parser&&this.parser.parseText(n)},parseClose(n){switch(n){case"comment":return!1;case"r":return this.model.note.texts.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(n),!0}}})},{"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],40:[function(t,s,u){const o=t("../../../utils/xml-stream"),r=t("../../../utils/utils"),c=t("../base-xform"),l=t("./comment-xform"),n=s.exports=function(){this.map={comment:new l}};r.inherits(n,c,{COMMENTS_ATTRIBUTES:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},{render(f,h){h=h||this.model,f.openXml(o.StdDocAttributes),f.openNode("comments",n.COMMENTS_ATTRIBUTES),f.openNode("authors"),f.leafNode("author",null,"Author"),f.closeNode(),f.openNode("commentList"),h.comments.forEach(p=>{this.map.comment.render(f,p)}),f.closeNode(),f.closeNode()},parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"commentList":return this.model={comments:[]},!0;case"comment":return this.parser=this.map.comment,this.parser.parseOpen(f),!0;default:return!1}},parseText(f){this.parser&&this.parser.parseText(f)},parseClose(f){switch(f){case"commentList":return!1;case"comment":return this.model.comments.push(this.parser.model),this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(f),!0}}})},{"../../../utils/utils":27,"../../../utils/xml-stream":28,"../base-xform":32,"./comment-xform":39}],41:[function(t,s,u){const o=t("../../base-xform");s.exports=class extends o{constructor(r){super(),this._model=r}get tag(){return this._model&&this._model.tag}render(r,c,l){(c===l[2]||this.tag==="x:SizeWithCells"&&c===l[1])&&r.leafNode(this.tag)}parseOpen(r){switch(r.name){case this.tag:return this.model={},this.model[this.tag]=!0,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../base-xform":32}],42:[function(t,s,u){const o=t("../../base-xform");s.exports=class extends o{constructor(r){super(),this._model=r}get tag(){return this._model&&this._model.tag}render(r,c){r.leafNode(this.tag,null,c)}parseOpen(r){switch(r.name){case this.tag:return this.text="",!0;default:return!1}}parseText(r){this.text=r}parseClose(){return!1}}},{"../../base-xform":32}],43:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"x:Anchor"}getAnchorRect(r){const c=Math.floor(r.left),l=Math.floor(68*(r.left-c)),n=Math.floor(r.top),f=Math.floor(18*(r.top-n)),h=Math.floor(r.right),p=Math.floor(68*(r.right-h)),g=Math.floor(r.bottom);return[c,l,n,f,h,p,g,Math.floor(18*(r.bottom-g))]}getDefaultRect(r){const c=r.col,l=Math.max(r.row-2,0);return[c,6,l,14,c+2,2,l+4,16]}render(r,c){const l=c.anchor?this.getAnchorRect(c.anchor):this.getDefaultRect(c.refAddress);r.leafNode("x:Anchor",null,l.join(", "))}parseOpen(r){switch(r.name){case this.tag:return this.text="",!0;default:return!1}}parseText(r){this.text=r}parseClose(){return!1}}},{"../base-xform":32}],44:[function(t,s,u){const o=t("../base-xform"),r=t("./vml-anchor-xform"),c=t("./style/vml-protection-xform"),l=t("./style/vml-position-xform"),n=["twoCells","oneCells","absolute"];s.exports=class extends o{constructor(){super(),this.map={"x:Anchor":new r,"x:Locked":new c({tag:"x:Locked"}),"x:LockText":new c({tag:"x:LockText"}),"x:SizeWithCells":new l({tag:"x:SizeWithCells"}),"x:MoveWithCells":new l({tag:"x:MoveWithCells"})}}get tag(){return"x:ClientData"}render(f,h){const{protection:p,editAs:g}=h.note;f.openNode(this.tag,{ObjectType:"Note"}),this.map["x:MoveWithCells"].render(f,g,n),this.map["x:SizeWithCells"].render(f,g,n),this.map["x:Anchor"].render(f,h),this.map["x:Locked"].render(f,p.locked),f.leafNode("x:AutoFill",null,"False"),this.map["x:LockText"].render(f,p.lockText),f.leafNode("x:Row",null,h.refAddress.row-1),f.leafNode("x:Column",null,h.refAddress.col-1),f.closeNode()}parseOpen(f){switch(f.name){case this.tag:this.reset(),this.model={anchor:[],protection:{},editAs:""};break;default:this.parser=this.map[f.name],this.parser&&this.parser.parseOpen(f)}return!0}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;switch(f){case this.tag:return this.normalizeModel(),!1;default:return!0}}normalizeModel(){const f=Object.assign({},this.map["x:MoveWithCells"].model,this.map["x:SizeWithCells"].model),h=Object.keys(f).length;this.model.editAs=n[h],this.model.anchor=this.map["x:Anchor"].text,this.model.protection.locked=this.map["x:Locked"].text,this.model.protection.lockText=this.map["x:LockText"].text}}},{"../base-xform":32,"./style/vml-position-xform":41,"./style/vml-protection-xform":42,"./vml-anchor-xform":43}],45:[function(t,s,u){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),c=t("./vml-shape-xform");class l extends r{constructor(){super(),this.map={"v:shape":new c}}get tag(){return"xml"}render(f,h){f.openXml(o.StdDocAttributes),f.openNode(this.tag,l.DRAWING_ATTRIBUTES),f.openNode("o:shapelayout",{"v:ext":"edit"}),f.leafNode("o:idmap",{"v:ext":"edit",data:1}),f.closeNode(),f.openNode("v:shapetype",{id:"_x0000_t202",coordsize:"21600,21600","o:spt":202,path:"m,l,21600r21600,l21600,xe"}),f.leafNode("v:stroke",{joinstyle:"miter"}),f.leafNode("v:path",{gradientshapeok:"t","o:connecttype":"rect"}),f.closeNode(),h.comments.forEach((p,g)=>{this.map["v:shape"].render(f,p,g)}),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case this.tag:this.reset(),this.model={comments:[]};break;default:this.parser=this.map[f.name],this.parser&&this.parser.parseOpen(f)}return!0}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.model.comments.push(this.parser.model),this.parser=void 0),!0;switch(f){case this.tag:return!1;default:return!0}}reconcile(f,h){f.anchors.forEach(p=>{p.br?this.map["xdr:twoCellAnchor"].reconcile(p,h):this.map["xdr:oneCellAnchor"].reconcile(p,h)})}}l.DRAWING_ATTRIBUTES={"xmlns:v":"urn:schemas-microsoft-com:vml","xmlns:o":"urn:schemas-microsoft-com:office:office","xmlns:x":"urn:schemas-microsoft-com:office:excel"},s.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./vml-shape-xform":46}],46:[function(t,s,u){const o=t("../base-xform"),r=t("./vml-textbox-xform"),c=t("./vml-client-data-xform");class l extends o{constructor(){super(),this.map={"v:textbox":new r,"x:ClientData":new c}}get tag(){return"v:shape"}render(f,h,p){f.openNode("v:shape",l.V_SHAPE_ATTRIBUTES(h,p)),f.leafNode("v:fill",{color2:"infoBackground [80]"}),f.leafNode("v:shadow",{color:"none [81]",obscured:"t"}),f.leafNode("v:path",{"o:connecttype":"none"}),this.map["v:textbox"].render(f,h),this.map["x:ClientData"].render(f,h),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case this.tag:this.reset(),this.model={margins:{insetmode:f.attributes["o:insetmode"]},anchor:"",editAs:"",protection:{}};break;default:this.parser=this.map[f.name],this.parser&&this.parser.parseOpen(f)}return!0}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;switch(f){case this.tag:return this.model.margins.inset=this.map["v:textbox"].model&&this.map["v:textbox"].model.inset,this.model.protection=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.protection,this.model.anchor=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.anchor,this.model.editAs=this.map["x:ClientData"].model&&this.map["x:ClientData"].model.editAs,!1;default:return!0}}}l.V_SHAPE_ATTRIBUTES=(n,f)=>({id:"_x0000_s"+(1025+f),type:"#_x0000_t202",style:"position:absolute; margin-left:105.3pt;margin-top:10.5pt;width:97.8pt;height:59.1pt;z-index:1;visibility:hidden",fillcolor:"infoBackground [80]",strokecolor:"none [81]","o:insetmode":n.note.margins&&n.note.margins.insetmode}),s.exports=l},{"../base-xform":32,"./vml-client-data-xform":44,"./vml-textbox-xform":47}],47:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"v:textbox"}conversionUnit(r,c,l){return`${parseFloat(r)*c.toFixed(2)}${l}`}reverseConversionUnit(r){return(r||"").split(",").map(c=>Number(parseFloat(this.conversionUnit(parseFloat(c),.1,"")).toFixed(2)))}render(r,c){const l={style:"mso-direction-alt:auto"};if(c&&c.note){let{inset:n}=c.note&&c.note.margins;Array.isArray(n)&&(n=n.map(f=>this.conversionUnit(f,10,"mm")).join(",")),n&&(l.inset=n)}r.openNode("v:textbox",l),r.leafNode("div",{style:"text-align:left"}),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:return this.model={inset:this.reverseConversionUnit(r.attributes.inset)},!0;default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],48:[function(t,s,u){const o=t("./base-xform");s.exports=class extends o{createNewModel(r){return{}}parseOpen(r){return this.parser=this.parser||this.map[r.name],this.parser?(this.parser.parseOpen(r),!0):r.name===this.tag&&(this.model=this.createNewModel(r),!0)}parseText(r){this.parser&&this.parser.parseText(r)}onParserClose(r,c){this.model[r]=c.model}parseClose(r){return this.parser?(this.parser.parseClose(r)||(this.onParserClose(r,this.parser),this.parser=void 0),!0):r!==this.tag}}},{"./base-xform":32}],49:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{render(r,c){r.openNode("HeadingPairs"),r.openNode("vt:vector",{size:2,baseType:"variant"}),r.openNode("vt:variant"),r.leafNode("vt:lpstr",void 0,"Worksheets"),r.closeNode(),r.openNode("vt:variant"),r.leafNode("vt:i4",void 0,c.length),r.closeNode(),r.closeNode(),r.closeNode()}parseOpen(r){return r.name==="HeadingPairs"}parseText(){}parseClose(r){return r!=="HeadingPairs"}}},{"../base-xform":32}],50:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{render(r,c){r.openNode("TitlesOfParts"),r.openNode("vt:vector",{size:c.length,baseType:"lpstr"}),c.forEach(l=>{r.leafNode("vt:lpstr",void 0,l.name)}),r.closeNode(),r.closeNode()}parseOpen(r){return r.name==="TitlesOfParts"}parseText(){}parseClose(r){return r!=="TitlesOfParts"}}},{"../base-xform":32}],51:[function(t,s,u){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),c=t("../simple/string-xform"),l=t("./app-heading-pairs-xform"),n=t("./app-titles-of-parts-xform");class f extends r{constructor(){super(),this.map={Company:new c({tag:"Company"}),Manager:new c({tag:"Manager"}),HeadingPairs:new l,TitleOfParts:new n}}render(p,g){p.openXml(o.StdDocAttributes),p.openNode("Properties",f.PROPERTY_ATTRIBUTES),p.leafNode("Application",void 0,"Microsoft Excel"),p.leafNode("DocSecurity",void 0,"0"),p.leafNode("ScaleCrop",void 0,"false"),this.map.HeadingPairs.render(p,g.worksheets),this.map.TitleOfParts.render(p,g.worksheets),this.map.Company.render(p,g.company||""),this.map.Manager.render(p,g.manager),p.leafNode("LinksUpToDate",void 0,"false"),p.leafNode("SharedDoc",void 0,"false"),p.leafNode("HyperlinksChanged",void 0,"false"),p.leafNode("AppVersion",void 0,"16.0300"),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case"Properties":return!0;default:return this.parser=this.map[p.name],!!this.parser&&(this.parser.parseOpen(p),!0)}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.parser=void 0),!0;switch(p){case"Properties":return this.model={worksheets:this.map.TitleOfParts.model,company:this.map.Company.model,manager:this.map.Manager.model},!1;default:return!0}}}f.DateFormat=function(h){return h.toISOString().replace(/[.]\d{3,6}/,"")},f.DateAttrs={"xsi:type":"dcterms:W3CDTF"},f.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties","xmlns:vt":"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"},s.exports=f},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/string-xform":119,"./app-heading-pairs-xform":49,"./app-titles-of-parts-xform":50}],52:[function(t,s,u){const o=t("../../../utils/xml-stream"),r=t("../base-xform");class c extends r{render(n,f){n.openXml(o.StdDocAttributes),n.openNode("Types",c.PROPERTY_ATTRIBUTES);const h={};(f.media||[]).forEach(p=>{if(p.type==="image"){const g=p.extension;h[g]||(h[g]=!0,n.leafNode("Default",{Extension:g,ContentType:"image/"+g}))}}),n.leafNode("Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),n.leafNode("Default",{Extension:"xml",ContentType:"application/xml"}),n.leafNode("Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"}),f.worksheets.forEach(p=>{const g=`/xl/worksheets/sheet${p.id}.xml`;n.leafNode("Override",{PartName:g,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"})}),n.leafNode("Override",{PartName:"/xl/theme/theme1.xml",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml"}),n.leafNode("Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),f.sharedStrings&&f.sharedStrings.count&&n.leafNode("Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),f.tables&&f.tables.forEach(p=>{n.leafNode("Override",{PartName:"/xl/tables/"+p.target,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"})}),f.drawings&&f.drawings.forEach(p=>{n.leafNode("Override",{PartName:`/xl/drawings/${p.name}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml"})}),f.commentRefs&&(n.leafNode("Default",{Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"}),f.commentRefs.forEach(p=>{let{commentName:g}=p;n.leafNode("Override",{PartName:`/xl/${g}.xml`,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"})})),n.leafNode("Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),n.leafNode("Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),n.closeNode()}parseOpen(){return!1}parseText(){}parseClose(){return!1}}c.PROPERTY_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"},s.exports=c},{"../../../utils/xml-stream":28,"../base-xform":32}],53:[function(t,s,u){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),c=t("../simple/date-xform"),l=t("../simple/string-xform"),n=t("../simple/integer-xform");class f extends r{constructor(){super(),this.map={"dc:creator":new l({tag:"dc:creator"}),"dc:title":new l({tag:"dc:title"}),"dc:subject":new l({tag:"dc:subject"}),"dc:description":new l({tag:"dc:description"}),"dc:identifier":new l({tag:"dc:identifier"}),"dc:language":new l({tag:"dc:language"}),"cp:keywords":new l({tag:"cp:keywords"}),"cp:category":new l({tag:"cp:category"}),"cp:lastModifiedBy":new l({tag:"cp:lastModifiedBy"}),"cp:lastPrinted":new c({tag:"cp:lastPrinted",format:f.DateFormat}),"cp:revision":new n({tag:"cp:revision"}),"cp:version":new l({tag:"cp:version"}),"cp:contentStatus":new l({tag:"cp:contentStatus"}),"cp:contentType":new l({tag:"cp:contentType"}),"dcterms:created":new c({tag:"dcterms:created",attrs:f.DateAttrs,format:f.DateFormat}),"dcterms:modified":new c({tag:"dcterms:modified",attrs:f.DateAttrs,format:f.DateFormat})}}render(p,g){p.openXml(o.StdDocAttributes),p.openNode("cp:coreProperties",f.CORE_PROPERTY_ATTRIBUTES),this.map["dc:creator"].render(p,g.creator),this.map["dc:title"].render(p,g.title),this.map["dc:subject"].render(p,g.subject),this.map["dc:description"].render(p,g.description),this.map["dc:identifier"].render(p,g.identifier),this.map["dc:language"].render(p,g.language),this.map["cp:keywords"].render(p,g.keywords),this.map["cp:category"].render(p,g.category),this.map["cp:lastModifiedBy"].render(p,g.lastModifiedBy),this.map["cp:lastPrinted"].render(p,g.lastPrinted),this.map["cp:revision"].render(p,g.revision),this.map["cp:version"].render(p,g.version),this.map["cp:contentStatus"].render(p,g.contentStatus),this.map["cp:contentType"].render(p,g.contentType),this.map["dcterms:created"].render(p,g.created),this.map["dcterms:modified"].render(p,g.modified),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case"cp:coreProperties":case"coreProperties":return!0;default:if(this.parser=this.map[p.name],this.parser)return this.parser.parseOpen(p),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(p))}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.parser=void 0),!0;switch(p){case"cp:coreProperties":case"coreProperties":return this.model={creator:this.map["dc:creator"].model,title:this.map["dc:title"].model,subject:this.map["dc:subject"].model,description:this.map["dc:description"].model,identifier:this.map["dc:identifier"].model,language:this.map["dc:language"].model,keywords:this.map["cp:keywords"].model,category:this.map["cp:category"].model,lastModifiedBy:this.map["cp:lastModifiedBy"].model,lastPrinted:this.map["cp:lastPrinted"].model,revision:this.map["cp:revision"].model,contentStatus:this.map["cp:contentStatus"].model,contentType:this.map["cp:contentType"].model,created:this.map["dcterms:created"].model,modified:this.map["dcterms:modified"].model},!1;default:throw new Error("Unexpected xml node in parseClose: "+p)}}}f.DateFormat=function(h){return h.toISOString().replace(/[.]\d{3}/,"")},f.DateAttrs={"xsi:type":"dcterms:W3CDTF"},f.CORE_PROPERTY_ATTRIBUTES={"xmlns:cp":"http://schemas.openxmlformats.org/package/2006/metadata/core-properties","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:dcmitype":"http://purl.org/dc/dcmitype/","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},s.exports=f},{"../../../utils/xml-stream":28,"../base-xform":32,"../simple/date-xform":117,"../simple/integer-xform":118,"../simple/string-xform":119}],54:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{render(r,c){r.leafNode("Relationship",c)}parseOpen(r){switch(r.name){case"Relationship":return this.model=r.attributes,!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],55:[function(t,s,u){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),c=t("./relationship-xform");class l extends r{constructor(){super(),this.map={Relationship:new c}}render(f,h){h=h||this._values,f.openXml(o.StdDocAttributes),f.openNode("Relationships",l.RELATIONSHIPS_ATTRIBUTES),h.forEach(p=>{this.map.Relationship.render(f,p)}),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"Relationships":return this.model=[],!0;default:if(this.parser=this.map[f.name],this.parser)return this.parser.parseOpen(f),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(f))}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.model.push(this.parser.model),this.parser=void 0),!0;switch(f){case"Relationships":return!1;default:throw new Error("Unexpected xml node in parseClose: "+f)}}}l.RELATIONSHIPS_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"},s.exports=l},{"../../../utils/xml-stream":28,"../base-xform":32,"./relationship-xform":54}],56:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:this.reset(),this.model={range:{editAs:r.attributes.editAs||"oneCell"}};break;default:this.parser=this.map[r.name],this.parser&&this.parser.parseOpen(r)}return!0}parseText(r){this.parser&&this.parser.parseText(r)}reconcilePicture(r,c){if(r&&r.rId){const l=c.rels[r.rId].Target.match(/.*\/media\/(.+[.][a-zA-Z]{3,4})/);if(l){const n=l[1],f=c.mediaIndex[n];return c.media[f]}}}}},{"../base-xform":32}],57:[function(t,s,u){const o=t("../base-xform"),r=t("./blip-xform");s.exports=class extends o{constructor(){super(),this.map={"a:blip":new r}}get tag(){return"xdr:blipFill"}render(c,l){c.openNode(this.tag),this.map["a:blip"].render(c,l),c.openNode("a:stretch"),c.leafNode("a:fillRect"),c.closeNode(),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset();break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(){}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model=this.map["a:blip"].model,!1;default:return!0}}}},{"../base-xform":32,"./blip-xform":58}],58:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"a:blip"}render(r,c){r.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:embed":c.rId,cstate:"print"})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:embed"]},!0;default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],59:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"xdr:cNvPicPr"}render(r){r.openNode(this.tag),r.leafNode("a:picLocks",{noChangeAspect:"1"}),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],60:[function(t,s,u){const o=t("../base-xform"),r=t("./hlink-click-xform"),c=t("./ext-lst-xform");s.exports=class extends o{constructor(){super(),this.map={"a:hlinkClick":new r,"a:extLst":new c}}get tag(){return"xdr:cNvPr"}render(l,n){l.openNode(this.tag,{id:n.index,name:"Picture "+n.index}),this.map["a:hlinkClick"].render(l,n),this.map["a:extLst"].render(l,n),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["a:hlinkClick"].model,!1;default:return!0}}}},{"../base-xform":32,"./ext-lst-xform":63,"./hlink-click-xform":65}],61:[function(t,s,u){const o=t("../base-xform"),r=t("../simple/integer-xform");s.exports=class extends o{constructor(c){super(),this.tag=c.tag,this.map={"xdr:col":new r({tag:"xdr:col",zero:!0}),"xdr:colOff":new r({tag:"xdr:colOff",zero:!0}),"xdr:row":new r({tag:"xdr:row",zero:!0}),"xdr:rowOff":new r({tag:"xdr:rowOff",zero:!0})}}render(c,l){c.openNode(this.tag),this.map["xdr:col"].render(c,l.nativeCol),this.map["xdr:colOff"].render(c,l.nativeColOff),this.map["xdr:row"].render(c,l.nativeRow),this.map["xdr:rowOff"].render(c,l.nativeRowOff),c.closeNode()}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:this.reset();break;default:this.parser=this.map[c.name],this.parser&&this.parser.parseOpen(c)}return!0}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.parser=void 0),!0;switch(c){case this.tag:return this.model={nativeCol:this.map["xdr:col"].model,nativeColOff:this.map["xdr:colOff"].model,nativeRow:this.map["xdr:row"].model,nativeRowOff:this.map["xdr:rowOff"].model},!1;default:return!0}}}},{"../base-xform":32,"../simple/integer-xform":118}],62:[function(t,s,u){const o=t("../../../utils/col-cache"),r=t("../../../utils/xml-stream"),c=t("../base-xform"),l=t("./two-cell-anchor-xform"),n=t("./one-cell-anchor-xform");class f extends c{constructor(){super(),this.map={"xdr:twoCellAnchor":new l,"xdr:oneCellAnchor":new n}}prepare(p){p.anchors.forEach((g,v)=>{g.anchorType=(function(x){return(typeof x.range=="string"?o.decode(x.range):x.range).br?"xdr:twoCellAnchor":"xdr:oneCellAnchor"})(g),this.map[g.anchorType].prepare(g,{index:v})})}get tag(){return"xdr:wsDr"}render(p,g){p.openXml(r.StdDocAttributes),p.openNode(this.tag,f.DRAWING_ATTRIBUTES),g.anchors.forEach(v=>{this.map[v.anchorType].render(p,v)}),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case this.tag:this.reset(),this.model={anchors:[]};break;default:this.parser=this.map[p.name],this.parser&&this.parser.parseOpen(p)}return!0}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){if(this.parser)return this.parser.parseClose(p)||(this.model.anchors.push(this.parser.model),this.parser=void 0),!0;switch(p){case this.tag:return!1;default:return!0}}reconcile(p,g){p.anchors.forEach(v=>{v.br?this.map["xdr:twoCellAnchor"].reconcile(v,g):this.map["xdr:oneCellAnchor"].reconcile(v,g)})}}f.DRAWING_ATTRIBUTES={"xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing","xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main"},s.exports=f},{"../../../utils/col-cache":19,"../../../utils/xml-stream":28,"../base-xform":32,"./one-cell-anchor-xform":67,"./two-cell-anchor-xform":70}],63:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"a:extLst"}render(r){r.openNode(this.tag),r.openNode("a:ext",{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}),r.leafNode("a16:creationId",{"xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main",id:"{00000000-0008-0000-0000-000002000000}"}),r.closeNode(),r.closeNode()}parseOpen(r){switch(r.name){case this.tag:default:return!0}}parseText(){}parseClose(r){switch(r){case this.tag:return!1;default:return!0}}}},{"../base-xform":32}],64:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.map={}}render(r,c){r.openNode(this.tag);const l=Math.floor(9525*c.width),n=Math.floor(9525*c.height);r.addAttribute("cx",l),r.addAttribute("cy",n),r.closeNode()}parseOpen(r){return r.name===this.tag&&(this.model={width:parseInt(r.attributes.cx||"0",10)/9525,height:parseInt(r.attributes.cy||"0",10)/9525},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],65:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"a:hlinkClick"}render(r,c){c.hyperlinks&&c.hyperlinks.rId&&r.leafNode(this.tag,{"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","r:id":c.hyperlinks.rId,tooltip:c.hyperlinks.tooltip})}parseOpen(r){switch(r.name){case this.tag:return this.model={hyperlinks:{rId:r.attributes["r:id"],tooltip:r.attributes.tooltip}},!0;default:return!0}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],66:[function(t,s,u){const o=t("../base-xform"),r=t("./c-nv-pr-xform"),c=t("./c-nv-pic-pr-xform");s.exports=class extends o{constructor(){super(),this.map={"xdr:cNvPr":new r,"xdr:cNvPicPr":new c}}get tag(){return"xdr:nvPicPr"}render(l,n){l.openNode(this.tag),this.map["xdr:cNvPr"].render(l,n),this.map["xdr:cNvPicPr"].render(l,n),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case this.tag:this.reset();break;default:this.parser=this.map[l.name],this.parser&&this.parser.parseOpen(l)}return!0}parseText(){}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.parser=void 0),!0;switch(l){case this.tag:return this.model=this.map["xdr:cNvPr"].model,!1;default:return!0}}}},{"../base-xform":32,"./c-nv-pic-pr-xform":59,"./c-nv-pr-xform":60}],67:[function(t,s,u){const o=t("./base-cell-anchor-xform"),r=t("../static-xform"),c=t("./cell-position-xform"),l=t("./ext-xform"),n=t("./pic-xform");s.exports=class extends o{constructor(){super(),this.map={"xdr:from":new c({tag:"xdr:from"}),"xdr:ext":new l({tag:"xdr:ext"}),"xdr:pic":new n,"xdr:clientData":new r({tag:"xdr:clientData"})}}get tag(){return"xdr:oneCellAnchor"}prepare(f,h){this.map["xdr:pic"].prepare(f.picture,h)}render(f,h){f.openNode(this.tag,{editAs:h.range.editAs||"oneCell"}),this.map["xdr:from"].render(f,h.range.tl),this.map["xdr:ext"].render(f,h.range.ext),this.map["xdr:pic"].render(f,h.picture),this.map["xdr:clientData"].render(f,{}),f.closeNode()}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.parser=void 0),!0;switch(f){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.ext=this.map["xdr:ext"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(f,h){f.medium=this.reconcilePicture(f.picture,h)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./ext-xform":64,"./pic-xform":68}],68:[function(t,s,u){const o=t("../base-xform"),r=t("../static-xform"),c=t("./blip-fill-xform"),l=t("./nv-pic-pr-xform"),n=t("./sp-pr");s.exports=class extends o{constructor(){super(),this.map={"xdr:nvPicPr":new l,"xdr:blipFill":new c,"xdr:spPr":new r(n)}}get tag(){return"xdr:pic"}prepare(f,h){f.index=h.index+1}render(f,h){f.openNode(this.tag),this.map["xdr:nvPicPr"].render(f,h),this.map["xdr:blipFill"].render(f,h),this.map["xdr:spPr"].render(f,h),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case this.tag:this.reset();break;default:this.parser=this.map[f.name],this.parser&&this.parser.parseOpen(f)}return!0}parseText(){}parseClose(f){if(this.parser)return this.parser.parseClose(f)||(this.mergeModel(this.parser.model),this.parser=void 0),!0;switch(f){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"../static-xform":120,"./blip-fill-xform":57,"./nv-pic-pr-xform":66,"./sp-pr":69}],69:[function(t,s,u){s.exports={tag:"xdr:spPr",c:[{tag:"a:xfrm",c:[{tag:"a:off",$:{x:"0",y:"0"}},{tag:"a:ext",$:{cx:"0",cy:"0"}}]},{tag:"a:prstGeom",$:{prst:"rect"},c:[{tag:"a:avLst"}]}]}},{}],70:[function(t,s,u){const o=t("./base-cell-anchor-xform"),r=t("../static-xform"),c=t("./cell-position-xform"),l=t("./pic-xform");s.exports=class extends o{constructor(){super(),this.map={"xdr:from":new c({tag:"xdr:from"}),"xdr:to":new c({tag:"xdr:to"}),"xdr:pic":new l,"xdr:clientData":new r({tag:"xdr:clientData"})}}get tag(){return"xdr:twoCellAnchor"}prepare(n,f){this.map["xdr:pic"].prepare(n.picture,f)}render(n,f){n.openNode(this.tag,{editAs:f.range.editAs||"oneCell"}),this.map["xdr:from"].render(n,f.range.tl),this.map["xdr:to"].render(n,f.range.br),this.map["xdr:pic"].render(n,f.picture),this.map["xdr:clientData"].render(n,{}),n.closeNode()}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;switch(n){case this.tag:return this.model.range.tl=this.map["xdr:from"].model,this.model.range.br=this.map["xdr:to"].model,this.model.picture=this.map["xdr:pic"].model,!1;default:return!0}}reconcile(n,f){n.medium=this.reconcilePicture(n.picture,f)}}},{"../static-xform":120,"./base-cell-anchor-xform":56,"./cell-position-xform":61,"./pic-xform":68}],71:[function(t,s,u){const o=t("./base-xform");s.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.always=!!r.always,this.count=r.count,this.empty=r.empty,this.$count=r.$count||"count",this.$=r.$,this.childXform=r.childXform,this.maxItems=r.maxItems}prepare(r,c){const{childXform:l}=this;r&&r.forEach((n,f)=>{c.index=f,l.prepare(n,c)})}render(r,c){if(this.always||c&&c.length){r.openNode(this.tag,this.$),this.count&&r.addAttribute(this.$count,c&&c.length||0);const{childXform:l}=this;(c||[]).forEach((n,f)=>{l.render(r,n,f)}),r.closeNode()}else this.empty&&r.leafNode(this.tag)}parseOpen(r){if(this.parser)return this.parser.parseOpen(r),!0;switch(r.name){case this.tag:return this.model=[],!0;default:return!!this.childXform.parseOpen(r)&&(this.parser=this.childXform,!0)}}parseText(r){this.parser&&this.parser.parseText(r)}parseClose(r){if(this.parser){if(!this.parser.parseClose(r)&&(this.model.push(this.parser.model),this.parser=void 0,this.maxItems&&this.model.length>this.maxItems))throw new Error(`Max ${this.childXform.tag} count (${this.maxItems}) exceeded`);return!0}return!1}reconcile(r,c){if(r){const{childXform:l}=this;r.forEach(n=>{l.reconcile(n,c)})}}}},{"./base-xform":32}],72:[function(t,s,u){const o=t("../../../utils/col-cache"),r=t("../base-xform");s.exports=class extends r{get tag(){return"autoFilter"}render(c,l){if(l)if(typeof l=="string")c.leafNode("autoFilter",{ref:l});else{const n=function(p){return typeof p=="string"?p:o.getAddress(p.row,p.column).address},f=n(l.from),h=n(l.to);f&&h&&c.leafNode("autoFilter",{ref:`${f}:${h}`})}}parseOpen(c){c.name==="autoFilter"&&(this.model=c.attributes.ref)}}},{"../../../utils/col-cache":19,"../base-xform":32}],73:[function(t,s,u){const o=t("../../../utils/utils"),r=t("../base-xform"),c=t("../../../doc/range"),l=t("../../../doc/enums"),n=t("../strings/rich-text-xform");function f(h){if(h==null)return l.ValueType.Null;if(h instanceof String||typeof h=="string")return l.ValueType.String;if(typeof h=="number")return l.ValueType.Number;if(typeof h=="boolean")return l.ValueType.Boolean;if(h instanceof Date)return l.ValueType.Date;if(h.text&&h.hyperlink)return l.ValueType.Hyperlink;if(h.formula)return l.ValueType.Formula;if(h.error)return l.ValueType.Error;throw new Error("I could not understand type of value")}s.exports=class extends r{constructor(){super(),this.richTextXForm=new n}get tag(){return"c"}prepare(h,p){const g=p.styles.addStyleModel(h.style||{},(function(v){switch(v.type){case l.ValueType.Formula:return f(v.result);default:return v.type}})(h));switch(g&&(h.styleId=g),h.comment&&p.comments.push({...h.comment,ref:h.address}),h.type){case l.ValueType.String:case l.ValueType.RichText:p.sharedStrings&&(h.ssId=p.sharedStrings.add(h.value));break;case l.ValueType.Date:p.date1904&&(h.date1904=!0);break;case l.ValueType.Hyperlink:p.sharedStrings&&h.text!==void 0&&h.text!==null&&(h.ssId=p.sharedStrings.add(h.text)),p.hyperlinks.push({address:h.address,target:h.hyperlink,tooltip:h.tooltip});break;case l.ValueType.Merge:p.merges.add(h);break;case l.ValueType.Formula:if(p.date1904&&(h.date1904=!0),h.shareType==="shared"&&(h.si=p.siFormulae++),h.formula)p.formulae[h.address]=h;else if(h.sharedFormula){const v=p.formulae[h.sharedFormula];if(!v)throw new Error("Shared Formula master must exist above and or left of clone for cell "+h.address);v.si===void 0?(v.shareType="shared",v.si=p.siFormulae++,v.range=new c(v.address,h.address)):v.range&&v.range.expandToAddress(h.address),h.si=v.si}}}renderFormula(h,p){let g=null;switch(p.shareType){case"shared":g={t:"shared",ref:p.ref||p.range.range,si:p.si};break;case"array":g={t:"array",ref:p.ref};break;default:p.si!==void 0&&(g={t:"shared",si:p.si})}switch(f(p.result)){case l.ValueType.Null:h.leafNode("f",g,p.formula);break;case l.ValueType.String:h.addAttribute("t","str"),h.leafNode("f",g,p.formula),h.leafNode("v",null,p.result);break;case l.ValueType.Number:h.leafNode("f",g,p.formula),h.leafNode("v",null,p.result);break;case l.ValueType.Boolean:h.addAttribute("t","b"),h.leafNode("f",g,p.formula),h.leafNode("v",null,p.result?1:0);break;case l.ValueType.Error:h.addAttribute("t","e"),h.leafNode("f",g,p.formula),h.leafNode("v",null,p.result.error);break;case l.ValueType.Date:h.leafNode("f",g,p.formula),h.leafNode("v",null,o.dateToExcel(p.result,p.date1904));break;default:throw new Error("I could not understand type of value")}}render(h,p){if(p.type!==l.ValueType.Null||p.styleId){switch(h.openNode("c"),h.addAttribute("r",p.address),p.styleId&&h.addAttribute("s",p.styleId),p.type){case l.ValueType.Null:break;case l.ValueType.Number:h.leafNode("v",null,p.value);break;case l.ValueType.Boolean:h.addAttribute("t","b"),h.leafNode("v",null,p.value?"1":"0");break;case l.ValueType.Error:h.addAttribute("t","e"),h.leafNode("v",null,p.value.error);break;case l.ValueType.String:case l.ValueType.RichText:p.ssId!==void 0?(h.addAttribute("t","s"),h.leafNode("v",null,p.ssId)):p.value&&p.value.richText?(h.addAttribute("t","inlineStr"),h.openNode("is"),p.value.richText.forEach(g=>{this.richTextXForm.render(h,g)}),h.closeNode("is")):(h.addAttribute("t","str"),h.leafNode("v",null,p.value));break;case l.ValueType.Date:h.leafNode("v",null,o.dateToExcel(p.value,p.date1904));break;case l.ValueType.Hyperlink:p.ssId!==void 0?(h.addAttribute("t","s"),h.leafNode("v",null,p.ssId)):(h.addAttribute("t","str"),h.leafNode("v",null,p.text));break;case l.ValueType.Formula:this.renderFormula(h,p);break;case l.ValueType.Merge:}h.closeNode()}}parseOpen(h){if(this.parser)return this.parser.parseOpen(h),!0;switch(h.name){case"c":return this.model={address:h.attributes.r},this.t=h.attributes.t,h.attributes.s&&(this.model.styleId=parseInt(h.attributes.s,10)),!0;case"f":return this.currentNode="f",this.model.si=h.attributes.si,this.model.shareType=h.attributes.t,this.model.ref=h.attributes.ref,!0;case"v":return this.currentNode="v",!0;case"t":return this.currentNode="t",!0;case"r":return this.parser=this.richTextXForm,this.parser.parseOpen(h),!0;default:return!1}}parseText(h){if(this.parser)this.parser.parseText(h);else switch(this.currentNode){case"f":this.model.formula=this.model.formula?this.model.formula+h:h;break;case"v":case"t":this.model.value&&this.model.value.richText?this.model.value.richText.text=this.model.value.richText.text?this.model.value.richText.text+h:h:this.model.value=this.model.value?this.model.value+h:h}}parseClose(h){switch(h){case"c":{const{model:p}=this;if(p.formula||p.shareType)p.type=l.ValueType.Formula,p.value&&(this.t==="str"?p.result=o.xmlDecode(p.value):this.t==="b"?p.result=parseInt(p.value,10)!==0:this.t==="e"?p.result={error:p.value}:p.result=parseFloat(p.value),p.value=void 0);else if(p.value!==void 0)switch(this.t){case"s":p.type=l.ValueType.String,p.value=parseInt(p.value,10);break;case"str":p.type=l.ValueType.String,p.value=o.xmlDecode(p.value);break;case"inlineStr":p.type=l.ValueType.String;break;case"b":p.type=l.ValueType.Boolean,p.value=parseInt(p.value,10)!==0;break;case"e":p.type=l.ValueType.Error,p.value={error:p.value};break;default:p.type=l.ValueType.Number,p.value=parseFloat(p.value)}else p.styleId?p.type=l.ValueType.Null:p.type=l.ValueType.Merge;return!1}case"f":case"v":case"is":return this.currentNode=void 0,!0;case"t":return this.parser?(this.parser.parseClose(h),!0):(this.currentNode=void 0,!0);case"r":return this.model.value=this.model.value||{},this.model.value.richText=this.model.value.richText||[],this.model.value.richText.push(this.parser.model),this.parser=void 0,this.currentNode=void 0,!0;default:return!!this.parser&&(this.parser.parseClose(h),!0)}}reconcile(h,p){const g=h.styleId&&p.styles&&p.styles.getStyleModel(h.styleId);switch(g&&(h.style=g),h.styleId!==void 0&&(h.styleId=void 0),h.type){case l.ValueType.String:typeof h.value=="number"&&p.sharedStrings&&(h.value=p.sharedStrings.getString(h.value)),h.value.richText&&(h.type=l.ValueType.RichText);break;case l.ValueType.Number:g&&o.isDateFmt(g.numFmt)&&(h.type=l.ValueType.Date,h.value=o.excelToDate(h.value,p.date1904));break;case l.ValueType.Formula:h.result!==void 0&&g&&o.isDateFmt(g.numFmt)&&(h.result=o.excelToDate(h.result,p.date1904)),h.shareType==="shared"&&(h.ref?p.formulae[h.si]=h.address:(h.sharedFormula=p.formulae[h.si],delete h.shareType),delete h.si)}const v=p.hyperlinkMap[h.address];v&&(h.type===l.ValueType.Formula?(h.text=h.result,h.result=void 0):(h.text=h.value,h.value=void 0),h.type=l.ValueType.Hyperlink,h.hyperlink=v);const x=p.commentsMap&&p.commentsMap[h.address];x&&(h.comment=x)}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/utils":27,"../base-xform":32,"../strings/rich-text-xform":122}],74:[function(t,s,u){const o=t("../../base-xform");s.exports=class extends o{get tag(){return"x14:cfIcon"}render(r,c){r.leafNode(this.tag,{iconSet:c.iconSet,iconId:c.iconId})}parseOpen(r){let{attributes:c}=r;this.model={iconSet:c.iconSet,iconId:o.toIntValue(c.iconId)}}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],75:[function(t,s,u){const{v4:o}=t("uuid"),r=t("../../base-xform"),c=t("../../composite-xform"),l=t("./databar-ext-xform"),n=t("./icon-set-ext-xform"),f={"3Triangles":!0,"3Stars":!0,"5Boxes":!0};class h extends c{constructor(){super(),this.map={"x14:dataBar":this.databarXform=new l,"x14:iconSet":this.iconSetXform=new n}}get tag(){return"x14:cfRule"}static isExt(g){return g.type==="dataBar"?l.isExt(g):!(g.type!=="iconSet"||!g.custom&&!f[g.iconSet])}prepare(g){h.isExt(g)&&(g.x14Id=`{${o()}}`.toUpperCase())}render(g,v){if(h.isExt(v))switch(v.type){case"dataBar":this.renderDataBar(g,v);break;case"iconSet":this.renderIconSet(g,v)}}renderDataBar(g,v){g.openNode(this.tag,{type:"dataBar",id:v.x14Id}),this.databarXform.render(g,v),g.closeNode()}renderIconSet(g,v){g.openNode(this.tag,{type:"iconSet",priority:v.priority,id:v.x14Id||`{${o()}}`}),this.iconSetXform.render(g,v),g.closeNode()}createNewModel(g){let{attributes:v}=g;return{type:v.type,x14Id:v.id,priority:r.toIntValue(v.priority)}}onParserClose(g,v){Object.assign(this.model,v.model)}}s.exports=h},{"../../base-xform":32,"../../composite-xform":48,"./databar-ext-xform":79,"./icon-set-ext-xform":81,uuid:528}],76:[function(t,s,u){const o=t("../../composite-xform"),r=t("./f-ext-xform");s.exports=class extends o{constructor(){super(),this.map={"xm:f":this.fExtXform=new r}}get tag(){return"x14:cfvo"}render(c,l){c.openNode(this.tag,{type:l.type}),l.value!==void 0&&this.fExtXform.render(c,l.value),c.closeNode()}createNewModel(c){return{type:c.attributes.type}}onParserClose(c,l){switch(c){case"xm:f":this.model.value=l.model?parseFloat(l.model):0}}}},{"../../composite-xform":48,"./f-ext-xform":80}],77:[function(t,s,u){const o=t("../../composite-xform"),r=t("./sqref-ext-xform"),c=t("./cf-rule-ext-xform");s.exports=class extends o{constructor(){super(),this.map={"xm:sqref":this.sqRef=new r,"x14:cfRule":this.cfRule=new c}}get tag(){return"x14:conditionalFormatting"}prepare(l,n){l.rules.forEach(f=>{this.cfRule.prepare(f,n)})}render(l,n){n.rules.some(c.isExt)&&(l.openNode(this.tag,{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"}),n.rules.filter(c.isExt).forEach(f=>this.cfRule.render(l,f)),this.sqRef.render(l,n.ref),l.closeNode())}createNewModel(){return{rules:[]}}onParserClose(l,n){switch(l){case"xm:sqref":this.model.ref=n.model;break;case"x14:cfRule":this.model.rules.push(n.model)}}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./sqref-ext-xform":82}],78:[function(t,s,u){const o=t("../../composite-xform"),r=t("./cf-rule-ext-xform"),c=t("./conditional-formatting-ext-xform");s.exports=class extends o{constructor(){super(),this.map={"x14:conditionalFormatting":this.cfXform=new c}}get tag(){return"x14:conditionalFormattings"}hasContent(l){return l.hasExtContent===void 0&&(l.hasExtContent=l.some(n=>n.rules.some(r.isExt))),l.hasExtContent}prepare(l,n){l.forEach(f=>{this.cfXform.prepare(f,n)})}render(l,n){this.hasContent(n)&&(l.openNode(this.tag),n.forEach(f=>this.cfXform.render(l,f)),l.closeNode())}createNewModel(){return[]}onParserClose(l,n){this.model.push(n.model)}}},{"../../composite-xform":48,"./cf-rule-ext-xform":75,"./conditional-formatting-ext-xform":77}],79:[function(t,s,u){const o=t("../../base-xform"),r=t("../../composite-xform"),c=t("../../style/color-xform"),l=t("./cfvo-ext-xform");s.exports=class extends r{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new l,"x14:borderColor":this.borderColorXform=new c("x14:borderColor"),"x14:negativeBorderColor":this.negativeBorderColorXform=new c("x14:negativeBorderColor"),"x14:negativeFillColor":this.negativeFillColorXform=new c("x14:negativeFillColor"),"x14:axisColor":this.axisColorXform=new c("x14:axisColor")}}static isExt(n){return!n.gradient}get tag(){return"x14:dataBar"}render(n,f){n.openNode(this.tag,{minLength:o.toIntAttribute(f.minLength,0,!0),maxLength:o.toIntAttribute(f.maxLength,100,!0),border:o.toBoolAttribute(f.border,!1),gradient:o.toBoolAttribute(f.gradient,!0),negativeBarColorSameAsPositive:o.toBoolAttribute(f.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:o.toBoolAttribute(f.negativeBarBorderColorSameAsPositive,!0),axisPosition:o.toAttribute(f.axisPosition,"auto"),direction:o.toAttribute(f.direction,"leftToRight")}),f.cfvo.forEach(h=>{this.cfvoXform.render(n,h)}),this.borderColorXform.render(n,f.borderColor),this.negativeBorderColorXform.render(n,f.negativeBorderColor),this.negativeFillColorXform.render(n,f.negativeFillColor),this.axisColorXform.render(n,f.axisColor),n.closeNode()}createNewModel(n){let{attributes:f}=n;return{cfvo:[],minLength:o.toIntValue(f.minLength,0),maxLength:o.toIntValue(f.maxLength,100),border:o.toBoolValue(f.border,!1),gradient:o.toBoolValue(f.gradient,!0),negativeBarColorSameAsPositive:o.toBoolValue(f.negativeBarColorSameAsPositive,!0),negativeBarBorderColorSameAsPositive:o.toBoolValue(f.negativeBarBorderColorSameAsPositive,!0),axisPosition:o.toStringValue(f.axisPosition,"auto"),direction:o.toStringValue(f.direction,"leftToRight")}}onParserClose(n,f){const[,h]=n.split(":");switch(h){case"cfvo":this.model.cfvo.push(f.model);break;default:this.model[h]=f.model}}}},{"../../base-xform":32,"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-ext-xform":76}],80:[function(t,s,u){const o=t("../../base-xform");s.exports=class extends o{get tag(){return"xm:f"}render(r,c){r.leafNode(this.tag,null,c)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],81:[function(t,s,u){const o=t("../../base-xform"),r=t("../../composite-xform"),c=t("./cfvo-ext-xform"),l=t("./cf-icon-ext-xform");s.exports=class extends r{constructor(){super(),this.map={"x14:cfvo":this.cfvoXform=new c,"x14:cfIcon":this.cfIconXform=new l}}get tag(){return"x14:iconSet"}render(n,f){n.openNode(this.tag,{iconSet:o.toStringAttribute(f.iconSet),reverse:o.toBoolAttribute(f.reverse,!1),showValue:o.toBoolAttribute(f.showValue,!0),custom:o.toBoolAttribute(f.icons,!1)}),f.cfvo.forEach(h=>{this.cfvoXform.render(n,h)}),f.icons&&f.icons.forEach((h,p)=>{h.iconId=p,this.cfIconXform.render(n,h)}),n.closeNode()}createNewModel(n){let{attributes:f}=n;return{cfvo:[],iconSet:o.toStringValue(f.iconSet,"3TrafficLights"),reverse:o.toBoolValue(f.reverse,!1),showValue:o.toBoolValue(f.showValue,!0)}}onParserClose(n,f){const[,h]=n.split(":");switch(h){case"cfvo":this.model.cfvo.push(f.model);break;case"cfIcon":this.model.icons||(this.model.icons=[]),this.model.icons.push(f.model);break;default:this.model[h]=f.model}}}},{"../../base-xform":32,"../../composite-xform":48,"./cf-icon-ext-xform":74,"./cfvo-ext-xform":76}],82:[function(t,s,u){const o=t("../../base-xform");s.exports=class extends o{get tag(){return"xm:sqref"}render(r,c){r.leafNode(this.tag,null,c)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],83:[function(t,s,u){const o=t("../../base-xform"),r=t("../../composite-xform"),c=t("../../../../doc/range"),l=t("./databar-xform"),n=t("./ext-lst-ref-xform"),f=t("./formula-xform"),h=t("./color-scale-xform"),p=t("./icon-set-xform"),g={"3Triangles":!0,"3Stars":!0,"5Boxes":!0},v=y=>{const{type:w,operator:S}=y;switch(w){case"containsText":case"containsBlanks":case"notContainsBlanks":case"containsErrors":case"notContainsErrors":return{type:"containsText",operator:w};default:return{type:w,operator:S}}};class x extends r{constructor(){super(),this.map={dataBar:this.databarXform=new l,extLst:this.extLstRefXform=new n,formula:this.formulaXform=new f,colorScale:this.colorScaleXform=new h,iconSet:this.iconSetXform=new p}}get tag(){return"cfRule"}static isPrimitive(w){return w.type!=="iconSet"||!w.custom&&!g[w.iconSet]}render(w,S){switch(S.type){case"expression":this.renderExpression(w,S);break;case"cellIs":this.renderCellIs(w,S);break;case"top10":this.renderTop10(w,S);break;case"aboveAverage":this.renderAboveAverage(w,S);break;case"dataBar":this.renderDataBar(w,S);break;case"colorScale":this.renderColorScale(w,S);break;case"iconSet":this.renderIconSet(w,S);break;case"containsText":this.renderText(w,S);break;case"timePeriod":this.renderTimePeriod(w,S)}}renderExpression(w,S){w.openNode(this.tag,{type:"expression",dxfId:S.dxfId,priority:S.priority}),this.formulaXform.render(w,S.formulae[0]),w.closeNode()}renderCellIs(w,S){w.openNode(this.tag,{type:"cellIs",dxfId:S.dxfId,priority:S.priority,operator:S.operator}),S.formulae.forEach(E=>{this.formulaXform.render(w,E)}),w.closeNode()}renderTop10(w,S){w.leafNode(this.tag,{type:"top10",dxfId:S.dxfId,priority:S.priority,percent:o.toBoolAttribute(S.percent,!1),bottom:o.toBoolAttribute(S.bottom,!1),rank:o.toIntValue(S.rank,10,!0)})}renderAboveAverage(w,S){w.leafNode(this.tag,{type:"aboveAverage",dxfId:S.dxfId,priority:S.priority,aboveAverage:o.toBoolAttribute(S.aboveAverage,!0)})}renderDataBar(w,S){w.openNode(this.tag,{type:"dataBar",priority:S.priority}),this.databarXform.render(w,S),this.extLstRefXform.render(w,S),w.closeNode()}renderColorScale(w,S){w.openNode(this.tag,{type:"colorScale",priority:S.priority}),this.colorScaleXform.render(w,S),w.closeNode()}renderIconSet(w,S){x.isPrimitive(S)&&(w.openNode(this.tag,{type:"iconSet",priority:S.priority}),this.iconSetXform.render(w,S),w.closeNode())}renderText(w,S){w.openNode(this.tag,{type:S.operator,dxfId:S.dxfId,priority:S.priority,operator:o.toStringAttribute(S.operator,"containsText")});const E=(I=>{if(I.formulae&&I.formulae[0])return I.formulae[0];const D=new c(I.ref),{tl:Z}=D;switch(I.operator){case"containsText":return`NOT(ISERROR(SEARCH("${I.text}",${Z})))`;case"containsBlanks":return`LEN(TRIM(${Z}))=0`;case"notContainsBlanks":return`LEN(TRIM(${Z}))>0`;case"containsErrors":return`ISERROR(${Z})`;case"notContainsErrors":return`NOT(ISERROR(${Z}))`;default:return}})(S);E&&this.formulaXform.render(w,E),w.closeNode()}renderTimePeriod(w,S){w.openNode(this.tag,{type:"timePeriod",dxfId:S.dxfId,priority:S.priority,timePeriod:S.timePeriod});const E=(I=>{if(I.formulae&&I.formulae[0])return I.formulae[0];const D=new c(I.ref),{tl:Z}=D;switch(I.timePeriod){case"thisWeek":return`AND(TODAY()-ROUNDDOWN(${Z},0)<=WEEKDAY(TODAY())-1,ROUNDDOWN(${Z},0)-TODAY()<=7-WEEKDAY(TODAY()))`;case"lastWeek":return`AND(TODAY()-ROUNDDOWN(${Z},0)>=(WEEKDAY(TODAY())),TODAY()-ROUNDDOWN(${Z},0)<(WEEKDAY(TODAY())+7))`;case"nextWeek":return`AND(ROUNDDOWN(${Z},0)-TODAY()>(7-WEEKDAY(TODAY())),ROUNDDOWN(${Z},0)-TODAY()<(15-WEEKDAY(TODAY())))`;case"yesterday":return`FLOOR(${Z},1)=TODAY()-1`;case"today":return`FLOOR(${Z},1)=TODAY()`;case"tomorrow":return`FLOOR(${Z},1)=TODAY()+1`;case"last7Days":return`AND(TODAY()-FLOOR(${Z},1)<=6,FLOOR(${Z},1)<=TODAY())`;case"lastMonth":return`AND(MONTH(${Z})=MONTH(EDATE(TODAY(),0-1)),YEAR(${Z})=YEAR(EDATE(TODAY(),0-1)))`;case"thisMonth":return`AND(MONTH(${Z})=MONTH(TODAY()),YEAR(${Z})=YEAR(TODAY()))`;case"nextMonth":return`AND(MONTH(${Z})=MONTH(EDATE(TODAY(),0+1)),YEAR(${Z})=YEAR(EDATE(TODAY(),0+1)))`;default:return}})(S);E&&this.formulaXform.render(w,E),w.closeNode()}createNewModel(w){let{attributes:S}=w;return{...v(S),dxfId:o.toIntValue(S.dxfId),priority:o.toIntValue(S.priority),timePeriod:S.timePeriod,percent:o.toBoolValue(S.percent),bottom:o.toBoolValue(S.bottom),rank:o.toIntValue(S.rank),aboveAverage:o.toBoolValue(S.aboveAverage)}}onParserClose(w,S){switch(w){case"dataBar":case"extLst":case"colorScale":case"iconSet":Object.assign(this.model,S.model);break;case"formula":this.model.formulae=this.model.formulae||[],this.model.formulae.push(S.model)}}}s.exports=x},{"../../../../doc/range":10,"../../base-xform":32,"../../composite-xform":48,"./color-scale-xform":85,"./databar-xform":88,"./ext-lst-ref-xform":89,"./formula-xform":90,"./icon-set-xform":91}],84:[function(t,s,u){const o=t("../../base-xform");s.exports=class extends o{get tag(){return"cfvo"}render(r,c){r.leafNode(this.tag,{type:c.type,val:c.value})}parseOpen(r){this.model={type:r.attributes.type,value:o.toFloatValue(r.attributes.val)}}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],85:[function(t,s,u){const o=t("../../composite-xform"),r=t("../../style/color-xform"),c=t("./cfvo-xform");s.exports=class extends o{constructor(){super(),this.map={cfvo:this.cfvoXform=new c,color:this.colorXform=new r}}get tag(){return"colorScale"}render(l,n){l.openNode(this.tag),n.cfvo.forEach(f=>{this.cfvoXform.render(l,f)}),n.color.forEach(f=>{this.colorXform.render(l,f)}),l.closeNode()}createNewModel(l){return{cfvo:[],color:[]}}onParserClose(l,n){this.model[l].push(n.model)}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],86:[function(t,s,u){const o=t("../../composite-xform"),r=t("./cf-rule-xform");s.exports=class extends o{constructor(){super(),this.map={cfRule:new r}}get tag(){return"conditionalFormatting"}render(c,l){l.rules.some(r.isPrimitive)&&(c.openNode(this.tag,{sqref:l.ref}),l.rules.forEach(n=>{r.isPrimitive(n)&&(n.ref=l.ref,this.map.cfRule.render(c,n))}),c.closeNode())}createNewModel(c){let{attributes:l}=c;return{ref:l.sqref,rules:[]}}onParserClose(c,l){this.model.rules.push(l.model)}}},{"../../composite-xform":48,"./cf-rule-xform":83}],87:[function(t,s,u){const o=t("../../base-xform"),r=t("./conditional-formatting-xform");s.exports=class extends o{constructor(){super(),this.cfXform=new r}get tag(){return"conditionalFormatting"}reset(){this.model=[]}prepare(c,l){let n=c.reduce((f,h)=>Math.max(f,...h.rules.map(p=>p.priority||0)),1);c.forEach(f=>{f.rules.forEach(h=>{h.priority||(h.priority=n++),h.style&&(h.dxfId=l.styles.addDxfStyle(h.style))})})}render(c,l){l.forEach(n=>{this.cfXform.render(c,n)})}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case"conditionalFormatting":return this.parser=this.cfXform,this.parser.parseOpen(c),!0;default:return!1}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){return!!this.parser&&(!!this.parser.parseClose(c)||(this.model.push(this.parser.model),this.parser=void 0,!1))}reconcile(c,l){c.forEach(n=>{n.rules.forEach(f=>{f.dxfId!==void 0&&(f.style=l.styles.getDxfStyle(f.dxfId),delete f.dxfId)})})}}},{"../../base-xform":32,"./conditional-formatting-xform":86}],88:[function(t,s,u){const o=t("../../composite-xform"),r=t("../../style/color-xform"),c=t("./cfvo-xform");s.exports=class extends o{constructor(){super(),this.map={cfvo:this.cfvoXform=new c,color:this.colorXform=new r}}get tag(){return"dataBar"}render(l,n){l.openNode(this.tag),n.cfvo.forEach(f=>{this.cfvoXform.render(l,f)}),this.colorXform.render(l,n.color),l.closeNode()}createNewModel(){return{cfvo:[]}}onParserClose(l,n){switch(l){case"cfvo":this.model.cfvo.push(n.model);break;case"color":this.model.color=n.model}}}},{"../../composite-xform":48,"../../style/color-xform":128,"./cfvo-xform":84}],89:[function(t,s,u){const o=t("../../base-xform"),r=t("../../composite-xform");class c extends o{get tag(){return"x14:id"}render(f,h){f.leafNode(this.tag,null,h)}parseOpen(){this.model=""}parseText(f){this.model+=f}parseClose(f){return f!==this.tag}}class l extends r{constructor(){super(),this.map={"x14:id":this.idXform=new c}}get tag(){return"ext"}render(f,h){f.openNode(this.tag,{uri:"{B025F937-C7B1-47D3-B67F-A62EFF666E3E}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.idXform.render(f,h.x14Id),f.closeNode()}createNewModel(){return{}}onParserClose(f,h){this.model.x14Id=h.model}}s.exports=class extends r{constructor(){super(),this.map={ext:new l}}get tag(){return"extLst"}render(n,f){n.openNode(this.tag),this.map.ext.render(n,f),n.closeNode()}createNewModel(){return{}}onParserClose(n,f){Object.assign(this.model,f.model)}}},{"../../base-xform":32,"../../composite-xform":48}],90:[function(t,s,u){const o=t("../../base-xform");s.exports=class extends o{get tag(){return"formula"}render(r,c){r.leafNode(this.tag,null,c)}parseOpen(){this.model=""}parseText(r){this.model+=r}parseClose(r){return r!==this.tag}}},{"../../base-xform":32}],91:[function(t,s,u){const o=t("../../base-xform"),r=t("../../composite-xform"),c=t("./cfvo-xform");s.exports=class extends r{constructor(){super(),this.map={cfvo:this.cfvoXform=new c}}get tag(){return"iconSet"}render(l,n){l.openNode(this.tag,{iconSet:o.toStringAttribute(n.iconSet,"3TrafficLights"),reverse:o.toBoolAttribute(n.reverse,!1),showValue:o.toBoolAttribute(n.showValue,!0)}),n.cfvo.forEach(f=>{this.cfvoXform.render(l,f)}),l.closeNode()}createNewModel(l){let{attributes:n}=l;return{iconSet:o.toStringValue(n.iconSet,"3TrafficLights"),reverse:o.toBoolValue(n.reverse),showValue:o.toBoolValue(n.showValue),cfvo:[]}}onParserClose(l,n){this.model[l].push(n.model)}}},{"../../base-xform":32,"../../composite-xform":48,"./cfvo-xform":84}],92:[function(t,s,u){const o=t("../../../utils/utils"),r=t("../base-xform");s.exports=class extends r{get tag(){return"col"}prepare(c,l){const n=l.styles.addStyleModel(c.style||{});n&&(c.styleId=n)}render(c,l){c.openNode("col"),c.addAttribute("min",l.min),c.addAttribute("max",l.max),l.width&&c.addAttribute("width",l.width),l.styleId&&c.addAttribute("style",l.styleId),l.hidden&&c.addAttribute("hidden","1"),l.bestFit&&c.addAttribute("bestFit","1"),l.outlineLevel&&c.addAttribute("outlineLevel",l.outlineLevel),l.collapsed&&c.addAttribute("collapsed","1"),c.addAttribute("customWidth","1"),c.closeNode()}parseOpen(c){if(c.name==="col"){const l=this.model={min:parseInt(c.attributes.min||"0",10),max:parseInt(c.attributes.max||"0",10),width:c.attributes.width===void 0?void 0:parseFloat(c.attributes.width||"0")};return c.attributes.style&&(l.styleId=parseInt(c.attributes.style,10)),o.parseBoolean(c.attributes.hidden)&&(l.hidden=!0),o.parseBoolean(c.attributes.bestFit)&&(l.bestFit=!0),c.attributes.outlineLevel&&(l.outlineLevel=parseInt(c.attributes.outlineLevel,10)),o.parseBoolean(c.attributes.collapsed)&&(l.collapsed=!0),!0}return!1}parseText(){}parseClose(){return!1}reconcile(c,l){c.styleId&&(c.style=l.styles.getStyleModel(c.styleId))}}},{"../../../utils/utils":27,"../base-xform":32}],93:[function(t,s,u){const o=t("../../../utils/under-dash"),r=t("../../../utils/utils"),c=t("../../../utils/col-cache"),l=t("../base-xform"),n=t("../../../doc/range");function f(p,g,v,x){const y=g[v];y!==void 0?p[v]=y:x!==void 0&&(p[v]=x)}function h(p,g,v,x){const y=g[v];y!==void 0&&(p[v]=r.parseBoolean(y))}s.exports=class extends l{get tag(){return"dataValidations"}render(p,g){const v=(function(x){const y=o.map(x,(E,I)=>({address:I,dataValidation:E,marked:!1})).sort((E,I)=>o.strcmp(E.address,I.address)),w=o.keyBy(y,"address"),S=(E,I,D)=>{for(let Z=0;Z<I;Z++){const K=c.encodeAddress(E.row+Z,D);if(!x[K]||!o.isEqual(x[E.address],x[K]))return!1}return!0};return y.map(E=>{if(!E.marked){const I=c.decodeEx(E.address);if(I.dimensions)return w[I.dimensions].marked=!0,{...E.dataValidation,sqref:E.address};let D=1,Z=c.encodeAddress(I.row+D,I.col);for(;x[Z]&&o.isEqual(E.dataValidation,x[Z]);)D++,Z=c.encodeAddress(I.row+D,I.col);let K=1;for(;S(I,D,I.col+K);)K++;for(let z=0;z<D;z++)for(let W=0;W<K;W++)Z=c.encodeAddress(I.row+z,I.col+W),w[Z].marked=!0;if(D>1||K>1){const z=I.row+(D-1),W=I.col+(K-1);return{...E.dataValidation,sqref:`${E.address}:${c.encodeAddress(z,W)}`}}return{...E.dataValidation,sqref:E.address}}return null}).filter(Boolean)})(g);v.length&&(p.openNode("dataValidations",{count:v.length}),v.forEach(x=>{p.openNode("dataValidation"),x.type!=="any"&&(p.addAttribute("type",x.type),x.operator&&x.type!=="list"&&x.operator!=="between"&&p.addAttribute("operator",x.operator),x.allowBlank&&p.addAttribute("allowBlank","1")),x.showInputMessage&&p.addAttribute("showInputMessage","1"),x.promptTitle&&p.addAttribute("promptTitle",x.promptTitle),x.prompt&&p.addAttribute("prompt",x.prompt),x.showErrorMessage&&p.addAttribute("showErrorMessage","1"),x.errorStyle&&p.addAttribute("errorStyle",x.errorStyle),x.errorTitle&&p.addAttribute("errorTitle",x.errorTitle),x.error&&p.addAttribute("error",x.error),p.addAttribute("sqref",x.sqref),(x.formulae||[]).forEach((y,w)=>{p.openNode("formula"+(w+1)),x.type==="date"?p.writeText(r.dateToExcel(new Date(y))):p.writeText(y),p.closeNode()}),p.closeNode()}),p.closeNode())}parseOpen(p){switch(p.name){case"dataValidations":return this.model={},!0;case"dataValidation":{this._address=p.attributes.sqref;const g={type:p.attributes.type||"any",formulae:[]};switch(p.attributes.type&&h(g,p.attributes,"allowBlank"),h(g,p.attributes,"showInputMessage"),h(g,p.attributes,"showErrorMessage"),g.type){case"any":case"list":case"custom":break;default:f(g,p.attributes,"operator","between")}return f(g,p.attributes,"promptTitle"),f(g,p.attributes,"prompt"),f(g,p.attributes,"errorStyle"),f(g,p.attributes,"errorTitle"),f(g,p.attributes,"error"),this._dataValidation=g,!0}case"formula1":case"formula2":return this._formula=[],!0;default:return!1}}parseText(p){this._formula&&this._formula.push(p)}parseClose(p){switch(p){case"dataValidations":return!1;case"dataValidation":return this._dataValidation.formulae&&this._dataValidation.formulae.length||(delete this._dataValidation.formulae,delete this._dataValidation.operator),(this._address.split(/\s+/g)||[]).forEach(g=>{g.includes(":")?new n(g).forEachAddress(v=>{this.model[v]=this._dataValidation}):this.model[g]=this._dataValidation}),!0;case"formula1":case"formula2":{let g=this._formula.join("");switch(this._dataValidation.type){case"whole":case"textLength":g=parseInt(g,10);break;case"decimal":g=parseFloat(g);break;case"date":g=r.excelToDate(parseFloat(g))}return this._dataValidation.formulae.push(g),this._formula=void 0,!0}default:return!0}}}},{"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/utils":27,"../base-xform":32}],94:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"dimension"}render(r,c){c&&r.leafNode("dimension",{ref:c})}parseOpen(r){return r.name==="dimension"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],95:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"drawing"}render(r,c){c&&r.leafNode(this.tag,{"r:id":c.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],96:[function(t,s,u){const o=t("../composite-xform"),r=t("./cf-ext/conditional-formattings-ext-xform");class c extends o{constructor(){super(),this.map={"x14:conditionalFormattings":this.conditionalFormattings=new r}}get tag(){return"ext"}hasContent(n){return this.conditionalFormattings.hasContent(n.conditionalFormattings)}prepare(n,f){this.conditionalFormattings.prepare(n.conditionalFormattings,f)}render(n,f){n.openNode("ext",{uri:"{78C0D931-6437-407d-A8EE-F0AAD7539E65}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),this.conditionalFormattings.render(n,f.conditionalFormattings),n.closeNode()}createNewModel(){return{}}onParserClose(n,f){this.model[n]=f.model}}s.exports=class extends o{constructor(){super(),this.map={ext:this.ext=new c}}get tag(){return"extLst"}prepare(l,n){this.ext.prepare(l,n)}hasContent(l){return this.ext.hasContent(l)}render(l,n){this.hasContent(n)&&(l.openNode("extLst"),this.ext.render(l,n),l.closeNode())}createNewModel(){return{}}onParserClose(l,n){Object.assign(this.model,n.model)}}},{"../composite-xform":48,"./cf-ext/conditional-formattings-ext-xform":78}],97:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"headerFooter"}render(r,c){if(c){r.addRollback();let l=!1;r.openNode("headerFooter"),c.differentFirst&&(r.addAttribute("differentFirst","1"),l=!0),c.differentOddEven&&(r.addAttribute("differentOddEven","1"),l=!0),c.oddHeader&&typeof c.oddHeader=="string"&&(r.leafNode("oddHeader",null,c.oddHeader),l=!0),c.oddFooter&&typeof c.oddFooter=="string"&&(r.leafNode("oddFooter",null,c.oddFooter),l=!0),c.evenHeader&&typeof c.evenHeader=="string"&&(r.leafNode("evenHeader",null,c.evenHeader),l=!0),c.evenFooter&&typeof c.evenFooter=="string"&&(r.leafNode("evenFooter",null,c.evenFooter),l=!0),c.firstHeader&&typeof c.firstHeader=="string"&&(r.leafNode("firstHeader",null,c.firstHeader),l=!0),c.firstFooter&&typeof c.firstFooter=="string"&&(r.leafNode("firstFooter",null,c.firstFooter),l=!0),l?(r.closeNode(),r.commit()):r.rollback()}}parseOpen(r){switch(r.name){case"headerFooter":return this.model={},r.attributes.differentFirst&&(this.model.differentFirst=parseInt(r.attributes.differentFirst,0)===1),r.attributes.differentOddEven&&(this.model.differentOddEven=parseInt(r.attributes.differentOddEven,0)===1),!0;case"oddHeader":return this.currentNode="oddHeader",!0;case"oddFooter":return this.currentNode="oddFooter",!0;case"evenHeader":return this.currentNode="evenHeader",!0;case"evenFooter":return this.currentNode="evenFooter",!0;case"firstHeader":return this.currentNode="firstHeader",!0;case"firstFooter":return this.currentNode="firstFooter",!0;default:return!1}}parseText(r){switch(this.currentNode){case"oddHeader":this.model.oddHeader=r;break;case"oddFooter":this.model.oddFooter=r;break;case"evenHeader":this.model.evenHeader=r;break;case"evenFooter":this.model.evenFooter=r;break;case"firstHeader":this.model.firstHeader=r;break;case"firstFooter":this.model.firstFooter=r}}parseClose(){switch(this.currentNode){case"oddHeader":case"oddFooter":case"evenHeader":case"evenFooter":case"firstHeader":case"firstFooter":return this.currentNode=void 0,!0;default:return!1}}}},{"../base-xform":32}],98:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"hyperlink"}render(r,c){this.isInternalLink(c)?r.leafNode("hyperlink",{ref:c.address,"r:id":c.rId,tooltip:c.tooltip,location:c.target}):r.leafNode("hyperlink",{ref:c.address,"r:id":c.rId,tooltip:c.tooltip})}parseOpen(r){return r.name==="hyperlink"&&(this.model={address:r.attributes.ref,rId:r.attributes["r:id"],tooltip:r.attributes.tooltip},r.attributes.location&&(this.model.target=r.attributes.location),!0)}parseText(){}parseClose(){return!1}isInternalLink(r){return r.target&&/^[^!]+![a-zA-Z]+[\d]+$/.test(r.target)}}},{"../base-xform":32}],99:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"mergeCell"}render(r,c){r.leafNode("mergeCell",{ref:c})}parseOpen(r){return r.name==="mergeCell"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],100:[function(t,s,u){const o=t("../../../utils/under-dash"),r=t("../../../doc/range"),c=t("../../../utils/col-cache"),l=t("../../../doc/enums");s.exports=class{constructor(){this.merges={}}add(n){if(this.merges[n.master])this.merges[n.master].expandToAddress(n.address);else{const f=`${n.master}:${n.address}`;this.merges[n.master]=new r(f)}}get mergeCells(){return o.map(this.merges,n=>n.range)}reconcile(n,f){o.each(n,h=>{const p=c.decode(h);for(let g=p.top;g<=p.bottom;g++){const v=f[g-1];for(let x=p.left;x<=p.right;x++){const y=v.cells[x-1];y?y.type===l.ValueType.Merge&&(y.master=p.tl):v.cells[x]={type:l.ValueType.Null,address:c.encodeAddress(g,x)}}}})}getMasterAddress(n){const f=this.hash[n];return f&&f.tl}}},{"../../../doc/enums":7,"../../../doc/range":10,"../../../utils/col-cache":19,"../../../utils/under-dash":26}],101:[function(t,s,u){const o=t("../base-xform"),r=c=>c!==void 0;s.exports=class extends o{get tag(){return"outlinePr"}render(c,l){return!(!l||!r(l.summaryBelow)&&!r(l.summaryRight))&&(c.leafNode(this.tag,{summaryBelow:r(l.summaryBelow)?Number(l.summaryBelow):void 0,summaryRight:r(l.summaryRight)?Number(l.summaryRight):void 0}),!0)}parseOpen(c){return c.name===this.tag&&(this.model={summaryBelow:r(c.attributes.summaryBelow)?!!Number(c.attributes.summaryBelow):void 0,summaryRight:r(c.attributes.summaryRight)?!!Number(c.attributes.summaryRight):void 0},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],102:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"brk"}render(r,c){r.leafNode("brk",c)}parseOpen(r){return r.name==="brk"&&(this.model=r.attributes.ref,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],103:[function(t,s,u){const o=t("../../../utils/under-dash"),r=t("../base-xform");s.exports=class extends r{get tag(){return"pageMargins"}render(c,l){if(l){const n={left:l.left,right:l.right,top:l.top,bottom:l.bottom,header:l.header,footer:l.footer};o.some(n,f=>f!==void 0)&&c.leafNode(this.tag,n)}}parseOpen(c){switch(c.name){case this.tag:return this.model={left:parseFloat(c.attributes.left||.7),right:parseFloat(c.attributes.right||.7),top:parseFloat(c.attributes.top||.75),bottom:parseFloat(c.attributes.bottom||.75),header:parseFloat(c.attributes.header||.3),footer:parseFloat(c.attributes.footer||.3)},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],104:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"pageSetUpPr"}render(r,c){return!(!c||!c.fitToPage)&&(r.leafNode(this.tag,{fitToPage:c.fitToPage?"1":void 0}),!0)}parseOpen(r){return r.name===this.tag&&(this.model={fitToPage:r.attributes.fitToPage==="1"},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],105:[function(t,s,u){const o=t("../../../utils/under-dash"),r=t("../base-xform");function c(h){return h?"1":void 0}function l(h){switch(h){case"overThenDown":return h;default:return}}function n(h){switch(h){case"atEnd":case"asDisplyed":return h;default:return}}function f(h){switch(h){case"dash":case"blank":case"NA":return h;default:return}}s.exports=class extends r{get tag(){return"pageSetup"}render(h,p){if(p){const g={paperSize:p.paperSize,orientation:p.orientation,horizontalDpi:p.horizontalDpi,verticalDpi:p.verticalDpi,pageOrder:l(p.pageOrder),blackAndWhite:c(p.blackAndWhite),draft:c(p.draft),cellComments:n(p.cellComments),errors:f(p.errors),scale:p.scale,fitToWidth:p.fitToWidth,fitToHeight:p.fitToHeight,firstPageNumber:p.firstPageNumber,useFirstPageNumber:c(p.firstPageNumber),usePrinterDefaults:c(p.usePrinterDefaults),copies:p.copies};o.some(g,v=>v!==void 0)&&h.leafNode(this.tag,g)}}parseOpen(h){switch(h.name){case this.tag:return this.model={paperSize:(p=h.attributes.paperSize,p!==void 0?parseInt(p,10):void 0),orientation:h.attributes.orientation||"portrait",horizontalDpi:parseInt(h.attributes.horizontalDpi||"4294967295",10),verticalDpi:parseInt(h.attributes.verticalDpi||"4294967295",10),pageOrder:h.attributes.pageOrder||"downThenOver",blackAndWhite:h.attributes.blackAndWhite==="1",draft:h.attributes.draft==="1",cellComments:h.attributes.cellComments||"None",errors:h.attributes.errors||"displayed",scale:parseInt(h.attributes.scale||"100",10),fitToWidth:parseInt(h.attributes.fitToWidth||"1",10),fitToHeight:parseInt(h.attributes.fitToHeight||"1",10),firstPageNumber:parseInt(h.attributes.firstPageNumber||"1",10),useFirstPageNumber:h.attributes.useFirstPageNumber==="1",usePrinterDefaults:h.attributes.usePrinterDefaults==="1",copies:parseInt(h.attributes.copies||"1",10)},!0;default:return!1}var p}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],106:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"picture"}render(r,c){c&&r.leafNode(this.tag,{"r:id":c.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],107:[function(t,s,u){const o=t("../../../utils/under-dash"),r=t("../base-xform");function c(l){return l?"1":void 0}s.exports=class extends r{get tag(){return"printOptions"}render(l,n){if(n){const f={headings:c(n.showRowColHeaders),gridLines:c(n.showGridLines),horizontalCentered:c(n.horizontalCentered),verticalCentered:c(n.verticalCentered)};o.some(f,h=>h!==void 0)&&l.leafNode(this.tag,f)}}parseOpen(l){switch(l.name){case this.tag:return this.model={showRowColHeaders:l.attributes.headings==="1",showGridLines:l.attributes.gridLines==="1",horizontalCentered:l.attributes.horizontalCentered==="1",verticalCentered:l.attributes.verticalCentered==="1"},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],108:[function(t,s,u){const o=t("./page-breaks-xform"),r=t("../list-xform");s.exports=class extends r{constructor(){super({tag:"rowBreaks",count:!0,childXform:new o})}render(c,l){if(l&&l.length){c.openNode(this.tag,this.$),this.count&&(c.addAttribute(this.$count,l.length),c.addAttribute("manualBreakCount",l.length));const{childXform:n}=this;l.forEach(f=>{n.render(c,f)}),c.closeNode()}else this.empty&&c.leafNode(this.tag)}}},{"../list-xform":71,"./page-breaks-xform":102}],109:[function(t,s,u){const o=t("../base-xform"),r=t("../../../utils/utils"),c=t("./cell-xform");s.exports=class extends o{constructor(l){super(),this.maxItems=l&&l.maxItems,this.map={c:new c}}get tag(){return"row"}prepare(l,n){const f=n.styles.addStyleModel(l.style);f&&(l.styleId=f);const h=this.map.c;l.cells.forEach(p=>{h.prepare(p,n)})}render(l,n,f){l.openNode("row"),l.addAttribute("r",n.number),n.height&&(l.addAttribute("ht",n.height),l.addAttribute("customHeight","1")),n.hidden&&l.addAttribute("hidden","1"),n.min>0&&n.max>0&&n.min<=n.max&&l.addAttribute("spans",`${n.min}:${n.max}`),n.styleId&&(l.addAttribute("s",n.styleId),l.addAttribute("customFormat","1")),l.addAttribute("x14ac:dyDescent","0.25"),n.outlineLevel&&l.addAttribute("outlineLevel",n.outlineLevel),n.collapsed&&l.addAttribute("collapsed","1");const h=this.map.c;n.cells.forEach(p=>{h.render(l,p,f)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;if(l.name==="row"){this.numRowsSeen+=1;const n=l.attributes.spans?l.attributes.spans.split(":").map(h=>parseInt(h,10)):[void 0,void 0],f=this.model={number:parseInt(l.attributes.r,10),min:n[0],max:n[1],cells:[]};return l.attributes.s&&(f.styleId=parseInt(l.attributes.s,10)),r.parseBoolean(l.attributes.hidden)&&(f.hidden=!0),r.parseBoolean(l.attributes.bestFit)&&(f.bestFit=!0),l.attributes.ht&&(f.height=parseFloat(l.attributes.ht)),l.attributes.outlineLevel&&(f.outlineLevel=parseInt(l.attributes.outlineLevel,10)),r.parseBoolean(l.attributes.collapsed)&&(f.collapsed=!0),!0}return this.parser=this.map[l.name],!!this.parser&&(this.parser.parseOpen(l),!0)}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){if(this.model.cells.push(this.parser.model),this.maxItems&&this.model.cells.length>this.maxItems)throw new Error(`Max column count (${this.maxItems}) exceeded`);this.parser=void 0}return!0}return!1}reconcile(l,n){l.style=l.styleId?n.styles.getStyleModel(l.styleId):{},l.styleId!==void 0&&(l.styleId=void 0);const f=this.map.c;l.cells.forEach(h=>{f.reconcile(h,n)})}}},{"../../../utils/utils":27,"../base-xform":32,"./cell-xform":73}],110:[function(t,s,u){const o=t("../../../utils/under-dash"),r=t("../base-xform");s.exports=class extends r{get tag(){return"sheetFormatPr"}render(c,l){if(l){const n={defaultRowHeight:l.defaultRowHeight,outlineLevelRow:l.outlineLevelRow,outlineLevelCol:l.outlineLevelCol,"x14ac:dyDescent":l.dyDescent};l.defaultColWidth&&(n.defaultColWidth=l.defaultColWidth),l.defaultRowHeight&&l.defaultRowHeight===15||(n.customHeight="1"),o.some(n,f=>f!==void 0)&&c.leafNode("sheetFormatPr",n)}}parseOpen(c){return c.name==="sheetFormatPr"&&(this.model={defaultRowHeight:parseFloat(c.attributes.defaultRowHeight||"0"),dyDescent:parseFloat(c.attributes["x14ac:dyDescent"]||"0"),outlineLevelRow:parseInt(c.attributes.outlineLevelRow||"0",10),outlineLevelCol:parseInt(c.attributes.outlineLevelCol||"0",10)},c.attributes.defaultColWidth&&(this.model.defaultColWidth=parseFloat(c.attributes.defaultColWidth)),!0)}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],111:[function(t,s,u){const o=t("../base-xform"),r=t("../style/color-xform"),c=t("./page-setup-properties-xform"),l=t("./outline-properties-xform");s.exports=class extends o{constructor(){super(),this.map={tabColor:new r("tabColor"),pageSetUpPr:new c,outlinePr:new l}}get tag(){return"sheetPr"}render(n,f){if(f){n.addRollback(),n.openNode("sheetPr");let h=!1;h=this.map.tabColor.render(n,f.tabColor)||h,h=this.map.pageSetUpPr.render(n,f.pageSetup)||h,h=this.map.outlinePr.render(n,f.outlineProperties)||h,h?(n.closeNode(),n.commit()):n.rollback()}}parseOpen(n){return this.parser?(this.parser.parseOpen(n),!0):n.name===this.tag?(this.reset(),!0):!!this.map[n.name]&&(this.parser=this.map[n.name],this.parser.parseOpen(n),!0)}parseText(n){return!!this.parser&&(this.parser.parseText(n),!0)}parseClose(n){return this.parser?(this.parser.parseClose(n)||(this.parser=void 0),!0):(this.map.tabColor.model||this.map.pageSetUpPr.model||this.map.outlinePr.model?(this.model={},this.map.tabColor.model&&(this.model.tabColor=this.map.tabColor.model),this.map.pageSetUpPr.model&&(this.model.pageSetup=this.map.pageSetUpPr.model),this.map.outlinePr.model&&(this.model.outlineProperties=this.map.outlinePr.model)):this.model=null,!1)}}},{"../base-xform":32,"../style/color-xform":128,"./outline-properties-xform":101,"./page-setup-properties-xform":104}],112:[function(t,s,u){const o=t("../../../utils/under-dash"),r=t("../base-xform");function c(n,f){return n?f:void 0}function l(n,f){return n===f||void 0}s.exports=class extends r{get tag(){return"sheetProtection"}render(n,f){if(f){const h={sheet:c(f.sheet,"1"),selectLockedCells:f.selectLockedCells===!1?"1":void 0,selectUnlockedCells:f.selectUnlockedCells===!1?"1":void 0,formatCells:c(f.formatCells,"0"),formatColumns:c(f.formatColumns,"0"),formatRows:c(f.formatRows,"0"),insertColumns:c(f.insertColumns,"0"),insertRows:c(f.insertRows,"0"),insertHyperlinks:c(f.insertHyperlinks,"0"),deleteColumns:c(f.deleteColumns,"0"),deleteRows:c(f.deleteRows,"0"),sort:c(f.sort,"0"),autoFilter:c(f.autoFilter,"0"),pivotTables:c(f.pivotTables,"0")};f.sheet&&(h.algorithmName=f.algorithmName,h.hashValue=f.hashValue,h.saltValue=f.saltValue,h.spinCount=f.spinCount,h.objects=c(f.objects===!1,"1"),h.scenarios=c(f.scenarios===!1,"1")),o.some(h,p=>p!==void 0)&&n.leafNode(this.tag,h)}}parseOpen(n){switch(n.name){case this.tag:return this.model={sheet:l(n.attributes.sheet,"1"),objects:n.attributes.objects!=="1"&&void 0,scenarios:n.attributes.scenarios!=="1"&&void 0,selectLockedCells:n.attributes.selectLockedCells!=="1"&&void 0,selectUnlockedCells:n.attributes.selectUnlockedCells!=="1"&&void 0,formatCells:l(n.attributes.formatCells,"0"),formatColumns:l(n.attributes.formatColumns,"0"),formatRows:l(n.attributes.formatRows,"0"),insertColumns:l(n.attributes.insertColumns,"0"),insertRows:l(n.attributes.insertRows,"0"),insertHyperlinks:l(n.attributes.insertHyperlinks,"0"),deleteColumns:l(n.attributes.deleteColumns,"0"),deleteRows:l(n.attributes.deleteRows,"0"),sort:l(n.attributes.sort,"0"),autoFilter:l(n.attributes.autoFilter,"0"),pivotTables:l(n.attributes.pivotTables,"0")},n.attributes.algorithmName&&(this.model.algorithmName=n.attributes.algorithmName,this.model.hashValue=n.attributes.hashValue,this.model.saltValue=n.attributes.saltValue,this.model.spinCount=parseInt(n.attributes.spinCount,10)),!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../../../utils/under-dash":26,"../base-xform":32}],113:[function(t,s,u){const o=t("../../../utils/col-cache"),r=t("../base-xform"),c={frozen:"frozen",frozenSplit:"frozen",split:"split"};s.exports=class extends r{get tag(){return"sheetView"}prepare(l){switch(l.state){case"frozen":case"split":break;default:l.state="normal"}}render(l,n){l.openNode("sheetView",{workbookViewId:n.workbookViewId||0});const f=function(x,y,w){w&&l.addAttribute(x,y)};let h,p,g,v;switch(f("rightToLeft","1",n.rightToLeft===!0),f("tabSelected","1",n.tabSelected),f("showRuler","0",n.showRuler===!1),f("showRowColHeaders","0",n.showRowColHeaders===!1),f("showGridLines","0",n.showGridLines===!1),f("zoomScale",n.zoomScale,n.zoomScale),f("zoomScaleNormal",n.zoomScaleNormal,n.zoomScaleNormal),f("view",n.style,n.style),n.state){case"frozen":p=n.xSplit||0,g=n.ySplit||0,h=n.topLeftCell||o.getAddress(g+1,p+1).address,v=(n.xSplit&&n.ySplit?"bottomRight":n.xSplit&&"topRight")||"bottomLeft",l.leafNode("pane",{xSplit:n.xSplit||void 0,ySplit:n.ySplit||void 0,topLeftCell:h,activePane:v,state:"frozen"}),l.leafNode("selection",{pane:v,activeCell:n.activeCell,sqref:n.activeCell});break;case"split":n.activePane==="topLeft"&&(n.activePane=void 0),l.leafNode("pane",{xSplit:n.xSplit||void 0,ySplit:n.ySplit||void 0,topLeftCell:n.topLeftCell,activePane:n.activePane}),l.leafNode("selection",{pane:n.activePane,activeCell:n.activeCell,sqref:n.activeCell});break;case"normal":n.activeCell&&l.leafNode("selection",{activeCell:n.activeCell,sqref:n.activeCell})}l.closeNode()}parseOpen(l){switch(l.name){case"sheetView":return this.sheetView={workbookViewId:parseInt(l.attributes.workbookViewId,10),rightToLeft:l.attributes.rightToLeft==="1",tabSelected:l.attributes.tabSelected==="1",showRuler:l.attributes.showRuler!=="0",showRowColHeaders:l.attributes.showRowColHeaders!=="0",showGridLines:l.attributes.showGridLines!=="0",zoomScale:parseInt(l.attributes.zoomScale||"100",10),zoomScaleNormal:parseInt(l.attributes.zoomScaleNormal||"100",10),style:l.attributes.view},this.pane=void 0,this.selections={},!0;case"pane":return this.pane={xSplit:parseInt(l.attributes.xSplit||"0",10),ySplit:parseInt(l.attributes.ySplit||"0",10),topLeftCell:l.attributes.topLeftCell,activePane:l.attributes.activePane||"topLeft",state:l.attributes.state},!0;case"selection":{const n=l.attributes.pane||"topLeft";return this.selections[n]={pane:n,activeCell:l.attributes.activeCell},!0}default:return!1}}parseText(){}parseClose(l){let n,f;switch(l){case"sheetView":return this.sheetView&&this.pane?(n=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:c[this.pane.state]||"split",xSplit:this.pane.xSplit,ySplit:this.pane.ySplit,topLeftCell:this.pane.topLeftCell,showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},this.model.state==="split"&&(n.activePane=this.pane.activePane),f=this.selections[this.pane.activePane],f&&f.activeCell&&(n.activeCell=f.activeCell),this.sheetView.style&&(n.style=this.sheetView.style)):(n=this.model={workbookViewId:this.sheetView.workbookViewId,rightToLeft:this.sheetView.rightToLeft,state:"normal",showRuler:this.sheetView.showRuler,showRowColHeaders:this.sheetView.showRowColHeaders,showGridLines:this.sheetView.showGridLines,zoomScale:this.sheetView.zoomScale,zoomScaleNormal:this.sheetView.zoomScaleNormal},f=this.selections.topLeft,f&&f.activeCell&&(n.activeCell=f.activeCell),this.sheetView.style&&(n.style=this.sheetView.style)),!1;default:return!0}}reconcile(){}}},{"../../../utils/col-cache":19,"../base-xform":32}],114:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"tablePart"}render(r,c){c&&r.leafNode(this.tag,{"r:id":c.rId})}parseOpen(r){switch(r.name){case this.tag:return this.model={rId:r.attributes["r:id"]},!0;default:return!1}}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],115:[function(t,s,u){const o=t("../../../utils/under-dash"),r=t("../../../utils/col-cache"),c=t("../../../utils/xml-stream"),l=t("../../rel-type"),n=t("./merges"),f=t("../base-xform"),h=t("../list-xform"),p=t("./row-xform"),g=t("./col-xform"),v=t("./dimension-xform"),x=t("./hyperlink-xform"),y=t("./merge-cell-xform"),w=t("./data-validations-xform"),S=t("./sheet-properties-xform"),E=t("./sheet-format-properties-xform"),I=t("./sheet-view-xform"),D=t("./sheet-protection-xform"),Z=t("./page-margins-xform"),K=t("./page-setup-xform"),z=t("./print-options-xform"),W=t("./auto-filter-xform"),Q=t("./picture-xform"),rt=t("./drawing-xform"),tt=t("./table-part-xform"),j=t("./row-breaks-xform"),F=t("./header-footer-xform"),R=t("./cf/conditional-formattings-xform"),T=t("./ext-lst-xform"),C=(M,O)=>{if(!O||!O.length)return M;if(!M||!M.length)return O;const P={},H={};return M.forEach(et=>{P[et.ref]=et,et.rules.forEach(it=>{const{x14Id:pt}=it;pt&&(H[pt]=it)})}),O.forEach(et=>{et.rules.forEach(it=>{const pt=H[it.x14Id];pt?((X,ut)=>{Object.keys(ut).forEach(G=>{const U=X[G],st=ut[G];U===void 0&&st!==void 0&&(X[G]=st)})})(pt,it):P[et.ref]?P[et.ref].rules.push(it):M.push({ref:et.ref,rules:[it]})})}),M};class k extends f{constructor(O){super();const{maxRows:P,maxCols:H,ignoreNodes:et}=O||{};this.ignoreNodes=et||[],this.map={sheetPr:new S,dimension:new v,sheetViews:new h({tag:"sheetViews",count:!1,childXform:new I}),sheetFormatPr:new E,cols:new h({tag:"cols",count:!1,childXform:new g}),sheetData:new h({tag:"sheetData",count:!1,empty:!0,childXform:new p({maxItems:H}),maxItems:P}),autoFilter:new W,mergeCells:new h({tag:"mergeCells",count:!0,childXform:new y}),rowBreaks:new j,hyperlinks:new h({tag:"hyperlinks",count:!1,childXform:new x}),pageMargins:new Z,dataValidations:new w,pageSetup:new K,headerFooter:new F,printOptions:new z,picture:new Q,drawing:new rt,sheetProtection:new D,tableParts:new h({tag:"tableParts",count:!0,childXform:new tt}),conditionalFormatting:new R,extLst:new T}}prepare(O,P){P.merges=new n,O.hyperlinks=P.hyperlinks=[],O.comments=P.comments=[],P.formulae={},P.siFormulae=0,this.map.cols.prepare(O.cols,P),this.map.sheetData.prepare(O.rows,P),this.map.conditionalFormatting.prepare(O.conditionalFormattings,P),O.mergeCells=P.merges.mergeCells;const H=O.rels=[];function et(X){return"rId"+(X.length+1)}if(O.hyperlinks.forEach(X=>{const ut=et(H);X.rId=ut,H.push({Id:ut,Type:l.Hyperlink,Target:X.target,TargetMode:"External"})}),O.comments.length>0){const X={Id:et(H),Type:l.Comments,Target:`../comments${O.id}.xml`};H.push(X);const ut={Id:et(H),Type:l.VmlDrawing,Target:`../drawings/vmlDrawing${O.id}.vml`};H.push(ut),O.comments.forEach(G=>{G.refAddress=r.decodeAddress(G.ref)}),P.commentRefs.push({commentName:"comments"+O.id,vmlDrawing:"vmlDrawing"+O.id})}const it=[];let pt;O.media.forEach(X=>{if(X.type==="background"){const ut=et(H);pt=P.media[X.imageId],H.push({Id:ut,Type:l.Image,Target:`../media/${pt.name}.${pt.extension}`}),O.background={rId:ut},O.image=P.media[X.imageId]}else if(X.type==="image"){let{drawing:ut}=O;pt=P.media[X.imageId],ut||(ut=O.drawing={rId:et(H),name:"drawing"+ ++P.drawingsCount,anchors:[],rels:[]},P.drawings.push(ut),H.push({Id:ut.rId,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:`../drawings/${ut.name}.xml`}));let G=this.preImageId===X.imageId?it[X.imageId]:it[ut.rels.length];G||(G=et(ut.rels),it[ut.rels.length]=G,ut.rels.push({Id:G,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:`../media/${pt.name}.${pt.extension}`}));const U={picture:{rId:G},range:X.range};if(X.hyperlinks&&X.hyperlinks.hyperlink){const st=et(ut.rels);it[ut.rels.length]=st,U.picture.hyperlinks={tooltip:X.hyperlinks.tooltip,rId:st},ut.rels.push({Id:st,Type:l.Hyperlink,Target:X.hyperlinks.hyperlink,TargetMode:"External"})}this.preImageId=X.imageId,ut.anchors.push(U)}}),O.tables.forEach(X=>{const ut=et(H);X.rId=ut,H.push({Id:ut,Type:l.Table,Target:"../tables/"+X.target}),X.columns.forEach(G=>{const{style:U}=G;U&&(G.dxfId=P.styles.addDxfStyle(U))})}),this.map.extLst.prepare(O,P)}render(O,P){O.openXml(c.StdDocAttributes),O.openNode("worksheet",k.WORKSHEET_ATTRIBUTES);const H=P.properties?{defaultRowHeight:P.properties.defaultRowHeight,dyDescent:P.properties.dyDescent,outlineLevelCol:P.properties.outlineLevelCol,outlineLevelRow:P.properties.outlineLevelRow}:void 0;P.properties&&P.properties.defaultColWidth&&(H.defaultColWidth=P.properties.defaultColWidth);const et={outlineProperties:P.properties&&P.properties.outlineProperties,tabColor:P.properties&&P.properties.tabColor,pageSetup:P.pageSetup&&P.pageSetup.fitToPage?{fitToPage:P.pageSetup.fitToPage}:void 0},it=P.pageSetup&&P.pageSetup.margins,pt={showRowColHeaders:P.pageSetup&&P.pageSetup.showRowColHeaders,showGridLines:P.pageSetup&&P.pageSetup.showGridLines,horizontalCentered:P.pageSetup&&P.pageSetup.horizontalCentered,verticalCentered:P.pageSetup&&P.pageSetup.verticalCentered},X=P.sheetProtection;this.map.sheetPr.render(O,et),this.map.dimension.render(O,P.dimensions),this.map.sheetViews.render(O,P.views),this.map.sheetFormatPr.render(O,H),this.map.cols.render(O,P.cols),this.map.sheetData.render(O,P.rows),this.map.sheetProtection.render(O,X),this.map.autoFilter.render(O,P.autoFilter),this.map.mergeCells.render(O,P.mergeCells),this.map.conditionalFormatting.render(O,P.conditionalFormattings),this.map.dataValidations.render(O,P.dataValidations),this.map.hyperlinks.render(O,P.hyperlinks),this.map.printOptions.render(O,pt),this.map.pageMargins.render(O,it),this.map.pageSetup.render(O,P.pageSetup),this.map.headerFooter.render(O,P.headerFooter),this.map.rowBreaks.render(O,P.rowBreaks),this.map.drawing.render(O,P.drawing),this.map.picture.render(O,P.background),this.map.tableParts.render(O,P.tables),this.map.extLst.render(O,P),P.rels&&P.rels.forEach(ut=>{ut.Type===l.VmlDrawing&&O.leafNode("legacyDrawing",{"r:id":ut.Id})}),O.closeNode()}parseOpen(O){return this.parser?(this.parser.parseOpen(O),!0):O.name==="worksheet"?(o.each(this.map,P=>{P.reset()}),!0):(this.map[O.name]&&!this.ignoreNodes.includes(O.name)&&(this.parser=this.map[O.name],this.parser.parseOpen(O)),!0)}parseText(O){this.parser&&this.parser.parseText(O)}parseClose(O){if(this.parser)return this.parser.parseClose(O)||(this.parser=void 0),!0;switch(O){case"worksheet":{const P=this.map.sheetFormatPr.model||{};this.map.sheetPr.model&&this.map.sheetPr.model.tabColor&&(P.tabColor=this.map.sheetPr.model.tabColor),this.map.sheetPr.model&&this.map.sheetPr.model.outlineProperties&&(P.outlineProperties=this.map.sheetPr.model.outlineProperties);const H={fitToPage:this.map.sheetPr.model&&this.map.sheetPr.model.pageSetup&&this.map.sheetPr.model.pageSetup.fitToPage||!1,margins:this.map.pageMargins.model},et=Object.assign(H,this.map.pageSetup.model,this.map.printOptions.model),it=C(this.map.conditionalFormatting.model,this.map.extLst.model&&this.map.extLst.model["x14:conditionalFormattings"]);return this.model={dimensions:this.map.dimension.model,cols:this.map.cols.model,rows:this.map.sheetData.model,mergeCells:this.map.mergeCells.model,hyperlinks:this.map.hyperlinks.model,dataValidations:this.map.dataValidations.model,properties:P,views:this.map.sheetViews.model,pageSetup:et,headerFooter:this.map.headerFooter.model,background:this.map.picture.model,drawing:this.map.drawing.model,tables:this.map.tableParts.model,conditionalFormattings:it},this.map.autoFilter.model&&(this.model.autoFilter=this.map.autoFilter.model),this.map.sheetProtection.model&&(this.model.sheetProtection=this.map.sheetProtection.model),!1}default:return!0}}reconcile(O,P){const H=(O.relationships||[]).reduce((it,pt)=>{if(it[pt.Id]=pt,pt.Type===l.Comments&&(O.comments=P.comments[pt.Target].comments),pt.Type===l.VmlDrawing&&O.comments&&O.comments.length){const X=P.vmlDrawings[pt.Target].comments;O.comments.forEach((ut,G)=>{ut.note=Object.assign({},ut.note,X[G])})}return it},{});if(P.commentsMap=(O.comments||[]).reduce((it,pt)=>(pt.ref&&(it[pt.ref]=pt),it),{}),P.hyperlinkMap=(O.hyperlinks||[]).reduce((it,pt)=>(pt.rId&&(it[pt.address]=H[pt.rId].Target),it),{}),P.formulae={},O.rows=O.rows&&O.rows.filter(Boolean)||[],O.rows.forEach(it=>{it.cells=it.cells&&it.cells.filter(Boolean)||[]}),this.map.cols.reconcile(O.cols,P),this.map.sheetData.reconcile(O.rows,P),this.map.conditionalFormatting.reconcile(O.conditionalFormattings,P),O.media=[],O.drawing){const it=H[O.drawing.rId].Target.match(/\/drawings\/([a-zA-Z0-9]+)[.][a-zA-Z]{3,4}$/);if(it){const pt=it[1];P.drawings[pt].anchors.forEach(X=>{if(X.medium){const ut={type:"image",imageId:X.medium.index,range:X.range,hyperlinks:X.picture.hyperlinks};O.media.push(ut)}})}}const et=O.background&&H[O.background.rId];if(et){const it=et.Target.split("/media/")[1],pt=P.mediaIndex&&P.mediaIndex[it];pt!==void 0&&O.media.push({type:"background",imageId:pt})}O.tables=(O.tables||[]).map(it=>{const pt=H[it.rId];return P.tables[pt.Target]}),delete O.relationships,delete O.hyperlinks,delete O.comments}}k.WORKSHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"},s.exports=k},{"../../../utils/col-cache":19,"../../../utils/under-dash":26,"../../../utils/xml-stream":28,"../../rel-type":31,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":72,"./cf/conditional-formattings-xform":87,"./col-xform":92,"./data-validations-xform":93,"./dimension-xform":94,"./drawing-xform":95,"./ext-lst-xform":96,"./header-footer-xform":97,"./hyperlink-xform":98,"./merge-cell-xform":99,"./merges":100,"./page-margins-xform":103,"./page-setup-xform":105,"./picture-xform":106,"./print-options-xform":107,"./row-breaks-xform":108,"./row-xform":109,"./sheet-format-properties-xform":110,"./sheet-properties-xform":111,"./sheet-protection-xform":112,"./sheet-view-xform":113,"./table-part-xform":114}],116:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.attr=r.attr}render(r,c){c&&(r.openNode(this.tag),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.model=!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],117:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs,this._format=r.format||function(c){try{return Number.isNaN(c.getTime())?"":c.toISOString()}catch{return""}},this._parse=r.parse||function(c){return new Date(c)}}render(r,c){c&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,this._format(c)):r.writeText(this._format(c)),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.attr?this.model=this._parse(r.attributes[this.attr]):this.text=[])}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=this._parse(this.text.join(""))),!1}}},{"../base-xform":32}],118:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs,this.zero=r.zero}render(r,c){(c||this.zero)&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,c):r.writeText(c),r.closeNode())}parseOpen(r){return r.name===this.tag&&(this.attr?this.model=parseInt(r.attributes[this.attr],10):this.text=[],!0)}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=parseInt(this.text.join("")||0,10)),!1}}},{"../base-xform":32}],119:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{constructor(r){super(),this.tag=r.tag,this.attr=r.attr,this.attrs=r.attrs}render(r,c){c!==void 0&&(r.openNode(this.tag),this.attrs&&r.addAttributes(this.attrs),this.attr?r.addAttribute(this.attr,c):r.writeText(c),r.closeNode())}parseOpen(r){r.name===this.tag&&(this.attr?this.model=r.attributes[this.attr]:this.text=[])}parseText(r){this.attr||this.text.push(r)}parseClose(){return this.attr||(this.model=this.text.join("")),!1}}},{"../base-xform":32}],120:[function(t,s,u){const o=t("./base-xform"),r=t("../../utils/xml-stream");s.exports=class extends o{constructor(c){super(),this._model=c}render(c){if(!this._xml){const l=new r;(function n(f,h){f.openNode(h.tag,h.$),h.c&&h.c.forEach(p=>{n(f,p)}),h.t&&f.writeText(h.t),f.closeNode()})(l,this._model),this._xml=l.xml}c.writeXml(this._xml)}parseOpen(){return!0}parseText(){}parseClose(c){switch(c){case this._model.tag:return!1;default:return!0}}}},{"../../utils/xml-stream":28,"./base-xform":32}],121:[function(t,s,u){const o=t("./text-xform"),r=t("./rich-text-xform"),c=t("../base-xform");s.exports=class extends c{constructor(){super(),this.map={r:new r,t:new o}}get tag(){return"rPh"}render(l,n){if(l.openNode(this.tag,{sb:n.sb||0,eb:n.eb||0}),n&&n.hasOwnProperty("richText")&&n.richText){const{r:f}=this.map;n.richText.forEach(h=>{f.render(l,h)})}else n&&this.map.t.render(l,n.text);l.closeNode()}parseOpen(l){const{name:n}=l;return this.parser?(this.parser.parseOpen(l),!0):n===this.tag?(this.model={sb:parseInt(l.attributes.sb,10),eb:parseInt(l.attributes.eb,10)},!0):(this.parser=this.map[n],!!this.parser&&(this.parser.parseOpen(l),!0))}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser){if(!this.parser.parseClose(l)){switch(l){case"r":{let n=this.model.richText;n||(n=this.model.richText=[]),n.push(this.parser.model);break}case"t":this.model.text=this.parser.model}this.parser=void 0}return!0}switch(l){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./rich-text-xform":122,"./text-xform":125}],122:[function(t,s,u){const o=t("./text-xform"),r=t("../style/font-xform"),c=t("../base-xform");class l extends c{constructor(f){super(),this.model=f}get tag(){return"r"}get textXform(){return this._textXform||(this._textXform=new o)}get fontXform(){return this._fontXform||(this._fontXform=new r(l.FONT_OPTIONS))}render(f,h){h=h||this.model,f.openNode("r"),h.font&&this.fontXform.render(f,h.font),this.textXform.render(f,h.text),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case"r":return this.model={},!0;case"t":return this.parser=this.textXform,this.parser.parseOpen(f),!0;case"rPr":return this.parser=this.fontXform,this.parser.parseOpen(f),!0;default:return!1}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){switch(f){case"r":return!1;case"t":return this.model.text=this.parser.model,this.parser=void 0,!0;case"rPr":return this.model.font=this.parser.model,this.parser=void 0,!0;default:return this.parser&&this.parser.parseClose(f),!0}}}l.FONT_OPTIONS={tagName:"rPr",fontNameTag:"rFont"},s.exports=l},{"../base-xform":32,"../style/font-xform":131,"./text-xform":125}],123:[function(t,s,u){const o=t("./text-xform"),r=t("./rich-text-xform"),c=t("./phonetic-text-xform"),l=t("../base-xform");s.exports=class extends l{constructor(n){super(),this.model=n,this.map={r:new r,t:new o,rPh:new c}}get tag(){return"si"}render(n,f){n.openNode(this.tag),f&&f.hasOwnProperty("richText")&&f.richText?f.richText.length?f.richText.forEach(h=>{this.map.r.render(n,h)}):this.map.t.render(n,""):f!=null&&this.map.t.render(n,f),n.closeNode()}parseOpen(n){const{name:f}=n;return this.parser?(this.parser.parseOpen(n),!0):f===this.tag?(this.model={},!0):(this.parser=this.map[f],!!this.parser&&(this.parser.parseOpen(n),!0))}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser){if(!this.parser.parseClose(n)){switch(n){case"r":{let f=this.model.richText;f||(f=this.model.richText=[]),f.push(this.parser.model);break}case"t":this.model=this.parser.model}this.parser=void 0}return!0}switch(n){case this.tag:return!1;default:return!0}}}},{"../base-xform":32,"./phonetic-text-xform":121,"./rich-text-xform":122,"./text-xform":125}],124:[function(t,s,u){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),c=t("./shared-string-xform");s.exports=class extends r{constructor(l){super(),this.model=l||{values:[],count:0},this.hash=Object.create(null),this.rich=Object.create(null)}get sharedStringXform(){return this._sharedStringXform||(this._sharedStringXform=new c)}get values(){return this.model.values}get uniqueCount(){return this.model.values.length}get count(){return this.model.count}getString(l){return this.model.values[l]}add(l){return l.richText?this.addRichText(l):this.addText(l)}addText(l){let n=this.hash[l];return n===void 0&&(n=this.hash[l]=this.model.values.length,this.model.values.push(l)),this.model.count++,n}addRichText(l){const n=this.sharedStringXform.toXml(l);let f=this.rich[n];return f===void 0&&(f=this.rich[n]=this.model.values.length,this.model.values.push(l)),this.model.count++,f}render(l,n){n=n||this._values,l.openXml(o.StdDocAttributes),l.openNode("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:n.count,uniqueCount:n.values.length});const f=this.sharedStringXform;n.values.forEach(h=>{f.render(l,h)}),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"sst":return!0;case"si":return this.parser=this.sharedStringXform,this.parser.parseOpen(l),!0;default:throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(l))}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){if(this.parser)return this.parser.parseClose(l)||(this.model.values.push(this.parser.model),this.model.count++,this.parser=void 0),!0;switch(l){case"sst":return!1;default:throw new Error("Unexpected xml node in parseClose: "+l)}}}},{"../../../utils/xml-stream":28,"../base-xform":32,"./shared-string-xform":123}],125:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"t"}render(r,c){r.openNode("t"),/^\s|\n|\s$/.test(c)&&r.addAttribute("xml:space","preserve"),r.writeText(c),r.closeNode()}get model(){return this._text.join("").replace(/_x([0-9A-F]{4})_/g,(r,c)=>String.fromCharCode(parseInt(c,16)))}parseOpen(r){switch(r.name){case"t":return this._text=[],!0;default:return!1}}parseText(r){this._text.push(r)}parseClose(){return!1}}},{"../base-xform":32}],126:[function(t,s,u){const o=t("../../../doc/enums"),r=t("../../../utils/utils"),c=t("../base-xform"),l={horizontalValues:["left","center","right","fill","centerContinuous","distributed","justify"].reduce((f,h)=>(f[h]=!0,f),{}),horizontal(f){return this.horizontalValues[f]?f:void 0},verticalValues:["top","middle","bottom","distributed","justify"].reduce((f,h)=>(f[h]=!0,f),{}),vertical(f){return f==="middle"?"center":this.verticalValues[f]?f:void 0},wrapText:f=>!!f||void 0,shrinkToFit:f=>!!f||void 0,textRotation(f){switch(f){case"vertical":return f;default:return(f=r.validInt(f))>=-90&&f<=90?f:void 0}},indent:f=>(f=r.validInt(f),Math.max(0,f)),readingOrder(f){switch(f){case"ltr":return o.ReadingOrder.LeftToRight;case"rtl":return o.ReadingOrder.RightToLeft;default:return}}},n={toXml(f){if(f=l.textRotation(f)){if(f==="vertical")return 255;const h=Math.round(f);if(h>=0&&h<=90)return h;if(h<0&&h>=-90)return 90-h}},toModel(f){const h=r.validInt(f);if(h!==void 0){if(h===255)return"vertical";if(h>=0&&h<=90)return h;if(h>90&&h<=180)return 90-h}}};s.exports=class extends c{get tag(){return"alignment"}render(f,h){f.addRollback(),f.openNode("alignment");let p=!1;function g(v,x){x&&(f.addAttribute(v,x),p=!0)}g("horizontal",l.horizontal(h.horizontal)),g("vertical",l.vertical(h.vertical)),g("wrapText",!!l.wrapText(h.wrapText)&&"1"),g("shrinkToFit",!!l.shrinkToFit(h.shrinkToFit)&&"1"),g("indent",l.indent(h.indent)),g("textRotation",n.toXml(h.textRotation)),g("readingOrder",l.readingOrder(h.readingOrder)),f.closeNode(),p?f.commit():f.rollback()}parseOpen(f){const h={};let p=!1;function g(v,x,y){v&&(h[x]=y,p=!0)}g(f.attributes.horizontal,"horizontal",f.attributes.horizontal),g(f.attributes.vertical,"vertical",f.attributes.vertical==="center"?"middle":f.attributes.vertical),g(f.attributes.wrapText,"wrapText",r.parseBoolean(f.attributes.wrapText)),g(f.attributes.shrinkToFit,"shrinkToFit",r.parseBoolean(f.attributes.shrinkToFit)),g(f.attributes.indent,"indent",parseInt(f.attributes.indent,10)),g(f.attributes.textRotation,"textRotation",n.toModel(f.attributes.textRotation)),g(f.attributes.readingOrder,"readingOrder",f.attributes.readingOrder==="2"?"rtl":"ltr"),this.model=p?h:null}parseText(){}parseClose(){return!1}}},{"../../../doc/enums":7,"../../../utils/utils":27,"../base-xform":32}],127:[function(t,s,u){const o=t("../base-xform"),r=t("../../../utils/utils"),c=t("./color-xform");class l extends o{constructor(f){super(),this.name=f,this.map={color:new c}}get tag(){return this.name}render(f,h,p){const g=h&&h.color||p||this.defaultColor;f.openNode(this.name),h&&h.style&&(f.addAttribute("style",h.style),g&&this.map.color.render(f,g)),f.closeNode()}parseOpen(f){if(this.parser)return this.parser.parseOpen(f),!0;switch(f.name){case this.name:{const{style:h}=f.attributes;return this.model=h?{style:h}:void 0,!0}case"color":return this.parser=this.map.color,this.parser.parseOpen(f),!0;default:return!1}}parseText(f){this.parser&&this.parser.parseText(f)}parseClose(f){return this.parser?(this.parser.parseClose(f)||(this.parser=void 0),!0):(f===this.name&&this.map.color.model&&(this.model||(this.model={}),this.model.color=this.map.color.model),!1)}validStyle(f){return l.validStyleValues[f]}}l.validStyleValues=["thin","dashed","dotted","dashDot","hair","dashDotDot","slantDashDot","mediumDashed","mediumDashDotDot","mediumDashDot","medium","double","thick"].reduce((n,f)=>(n[f]=!0,n),{}),s.exports=class extends o{constructor(){super(),this.map={top:new l("top"),left:new l("left"),bottom:new l("bottom"),right:new l("right"),diagonal:new l("diagonal")}}render(n,f){const{color:h}=f;function p(g,v){g&&!g.color&&f.color&&(g={...g,color:f.color}),v.render(n,g,h)}n.openNode("border"),f.diagonal&&f.diagonal.style&&(f.diagonal.up&&n.addAttribute("diagonalUp","1"),f.diagonal.down&&n.addAttribute("diagonalDown","1")),p(f.left,this.map.left),p(f.right,this.map.right),p(f.top,this.map.top),p(f.bottom,this.map.bottom),p(f.diagonal,this.map.diagonal),n.closeNode()}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;switch(n.name){case"border":return this.reset(),this.diagonalUp=r.parseBoolean(n.attributes.diagonalUp),this.diagonalDown=r.parseBoolean(n.attributes.diagonalDown),!0;default:return this.parser=this.map[n.name],!!this.parser&&(this.parser.parseOpen(n),!0)}}parseText(n){this.parser&&this.parser.parseText(n)}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;if(n==="border"){const f=this.model={},h=function(p,g,v){g&&(v&&Object.assign(g,v),f[p]=g)};h("left",this.map.left.model),h("right",this.map.right.model),h("top",this.map.top.model),h("bottom",this.map.bottom.model),h("diagonal",this.map.diagonal.model,{up:this.diagonalUp,down:this.diagonalDown})}return!1}}},{"../../../utils/utils":27,"../base-xform":32,"./color-xform":128}],128:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{constructor(r){super(),this.name=r||"color"}get tag(){return this.name}render(r,c){return!!c&&(r.openNode(this.name),c.argb?r.addAttribute("rgb",c.argb):c.theme!==void 0?(r.addAttribute("theme",c.theme),c.tint!==void 0&&r.addAttribute("tint",c.tint)):c.indexed!==void 0?r.addAttribute("indexed",c.indexed):r.addAttribute("auto","1"),r.closeNode(),!0)}parseOpen(r){return r.name===this.name&&(r.attributes.rgb?this.model={argb:r.attributes.rgb}:r.attributes.theme?(this.model={theme:parseInt(r.attributes.theme,10)},r.attributes.tint&&(this.model.tint=parseFloat(r.attributes.tint))):r.attributes.indexed?this.model={indexed:parseInt(r.attributes.indexed,10)}:this.model=void 0,!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],129:[function(t,s,u){const o=t("../base-xform"),r=t("./alignment-xform"),c=t("./border-xform"),l=t("./fill-xform"),n=t("./font-xform"),f=t("./numfmt-xform"),h=t("./protection-xform");s.exports=class extends o{constructor(){super(),this.map={alignment:new r,border:new c,fill:new l,font:new n,numFmt:new f,protection:new h}}get tag(){return"dxf"}render(p,g){if(p.openNode(this.tag),g.font&&this.map.font.render(p,g.font),g.numFmt&&g.numFmtId){const v={id:g.numFmtId,formatCode:g.numFmt};this.map.numFmt.render(p,v)}g.fill&&this.map.fill.render(p,g.fill),g.alignment&&this.map.alignment.render(p,g.alignment),g.border&&this.map.border.render(p,g.border),g.protection&&this.map.protection.render(p,g.protection),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case this.tag:return this.reset(),!0;default:return this.parser=this.map[p.name],this.parser&&this.parser.parseOpen(p),!0}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){return this.parser?(this.parser.parseClose(p)||(this.parser=void 0),!0):p!==this.tag||(this.model={alignment:this.map.alignment.model,border:this.map.border.model,fill:this.map.fill.model,font:this.map.font.model,numFmt:this.map.numFmt.model,protection:this.map.protection.model},!1)}}},{"../base-xform":32,"./alignment-xform":126,"./border-xform":127,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./protection-xform":133}],130:[function(t,s,u){const o=t("../base-xform"),r=t("./color-xform");class c extends o{constructor(){super(),this.map={color:new r}}get tag(){return"stop"}render(p,g){p.openNode("stop"),p.addAttribute("position",g.position),this.map.color.render(p,g.color),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case"stop":return this.model={position:parseFloat(p.attributes.position)},!0;case"color":return this.parser=this.map.color,this.parser.parseOpen(p),!0;default:return!1}}parseText(){}parseClose(p){return!!this.parser&&(this.parser.parseClose(p)||(this.model.color=this.parser.model,this.parser=void 0),!0)}}class l extends o{constructor(){super(),this.map={fgColor:new r("fgColor"),bgColor:new r("bgColor")}}get name(){return"pattern"}get tag(){return"patternFill"}render(p,g){p.openNode("patternFill"),p.addAttribute("patternType",g.pattern),g.fgColor&&this.map.fgColor.render(p,g.fgColor),g.bgColor&&this.map.bgColor.render(p,g.bgColor),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case"patternFill":return this.model={type:"pattern",pattern:p.attributes.patternType},!0;default:return this.parser=this.map[p.name],!!this.parser&&(this.parser.parseOpen(p),!0)}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){return!!this.parser&&(this.parser.parseClose(p)||(this.parser.model&&(this.model[p]=this.parser.model),this.parser=void 0),!0)}}class n extends o{constructor(){super(),this.map={stop:new c}}get name(){return"gradient"}get tag(){return"gradientFill"}render(p,g){switch(p.openNode("gradientFill"),g.gradient){case"angle":p.addAttribute("degree",g.degree);break;case"path":p.addAttribute("type","path"),g.center.left&&(p.addAttribute("left",g.center.left),g.center.right===void 0&&p.addAttribute("right",g.center.left)),g.center.right&&p.addAttribute("right",g.center.right),g.center.top&&(p.addAttribute("top",g.center.top),g.center.bottom===void 0&&p.addAttribute("bottom",g.center.top)),g.center.bottom&&p.addAttribute("bottom",g.center.bottom)}const v=this.map.stop;g.stops.forEach(x=>{v.render(p,x)}),p.closeNode()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case"gradientFill":{const g=this.model={stops:[]};return p.attributes.degree?(g.gradient="angle",g.degree=parseInt(p.attributes.degree,10)):p.attributes.type==="path"&&(g.gradient="path",g.center={left:p.attributes.left?parseFloat(p.attributes.left):0,top:p.attributes.top?parseFloat(p.attributes.top):0},p.attributes.right!==p.attributes.left&&(g.center.right=p.attributes.right?parseFloat(p.attributes.right):0),p.attributes.bottom!==p.attributes.top&&(g.center.bottom=p.attributes.bottom?parseFloat(p.attributes.bottom):0)),!0}case"stop":return this.parser=this.map.stop,this.parser.parseOpen(p),!0;default:return!1}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){return!!this.parser&&(this.parser.parseClose(p)||(this.model.stops.push(this.parser.model),this.parser=void 0),!0)}}class f extends o{constructor(){super(),this.map={patternFill:new l,gradientFill:new n}}get tag(){return"fill"}render(p,g){switch(p.addRollback(),p.openNode("fill"),g.type){case"pattern":this.map.patternFill.render(p,g);break;case"gradient":this.map.gradientFill.render(p,g);break;default:return void p.rollback()}p.closeNode(),p.commit()}parseOpen(p){if(this.parser)return this.parser.parseOpen(p),!0;switch(p.name){case"fill":return this.model={},!0;default:return this.parser=this.map[p.name],!!this.parser&&(this.parser.parseOpen(p),!0)}}parseText(p){this.parser&&this.parser.parseText(p)}parseClose(p){return!!this.parser&&(this.parser.parseClose(p)||(this.model=this.parser.model,this.model.type=this.parser.name,this.parser=void 0),!0)}validStyle(p){return f.validPatternValues[p]}}f.validPatternValues=["none","solid","darkVertical","darkGray","mediumGray","lightGray","gray125","gray0625","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","lightGrid"].reduce((h,p)=>(h[p]=!0,h),{}),f.StopXform=c,f.PatternFillXform=l,f.GradientFillXform=n,s.exports=f},{"../base-xform":32,"./color-xform":128}],131:[function(t,s,u){const o=t("./color-xform"),r=t("../simple/boolean-xform"),c=t("../simple/integer-xform"),l=t("../simple/string-xform"),n=t("./underline-xform"),f=t("../../../utils/under-dash"),h=t("../base-xform");class p extends h{constructor(v){super(),this.options=v||p.OPTIONS,this.map={b:{prop:"bold",xform:new r({tag:"b",attr:"val"})},i:{prop:"italic",xform:new r({tag:"i",attr:"val"})},u:{prop:"underline",xform:new n},charset:{prop:"charset",xform:new c({tag:"charset",attr:"val"})},color:{prop:"color",xform:new o},condense:{prop:"condense",xform:new r({tag:"condense",attr:"val"})},extend:{prop:"extend",xform:new r({tag:"extend",attr:"val"})},family:{prop:"family",xform:new c({tag:"family",attr:"val"})},outline:{prop:"outline",xform:new r({tag:"outline",attr:"val"})},vertAlign:{prop:"vertAlign",xform:new l({tag:"vertAlign",attr:"val"})},scheme:{prop:"scheme",xform:new l({tag:"scheme",attr:"val"})},shadow:{prop:"shadow",xform:new r({tag:"shadow",attr:"val"})},strike:{prop:"strike",xform:new r({tag:"strike",attr:"val"})},sz:{prop:"size",xform:new c({tag:"sz",attr:"val"})}},this.map[this.options.fontNameTag]={prop:"name",xform:new l({tag:this.options.fontNameTag,attr:"val"})}}get tag(){return this.options.tagName}render(v,x){const{map:y}=this;v.openNode(this.options.tagName),f.each(this.map,(w,S)=>{y[S].xform.render(v,x[w.prop])}),v.closeNode()}parseOpen(v){if(this.parser)return this.parser.parseOpen(v),!0;if(this.map[v.name])return this.parser=this.map[v.name].xform,this.parser.parseOpen(v);switch(v.name){case this.options.tagName:return this.model={},!0;default:return!1}}parseText(v){this.parser&&this.parser.parseText(v)}parseClose(v){if(this.parser&&!this.parser.parseClose(v)){const x=this.map[v];return this.parser.model&&(this.model[x.prop]=this.parser.model),this.parser=void 0,!0}switch(v){case this.options.tagName:return!1;default:return!0}}}p.OPTIONS={tagName:"font",fontNameTag:"name"},s.exports=p},{"../../../utils/under-dash":26,"../base-xform":32,"../simple/boolean-xform":116,"../simple/integer-xform":118,"../simple/string-xform":119,"./color-xform":128,"./underline-xform":136}],132:[function(t,s,u){const o=t("../../../utils/under-dash"),r=t("../../defaultnumformats"),c=t("../base-xform"),l=(function(){const f={};return o.each(r,(h,p)=>{h.f&&(f[h.f]=parseInt(p,10))}),f})();class n extends c{constructor(h,p){super(),this.id=h,this.formatCode=p}get tag(){return"numFmt"}render(h,p){h.leafNode("numFmt",{numFmtId:p.id,formatCode:p.formatCode})}parseOpen(h){switch(h.name){case"numFmt":return this.model={id:parseInt(h.attributes.numFmtId,10),formatCode:h.attributes.formatCode.replace(/[\\](.)/g,"$1")},!0;default:return!1}}parseText(){}parseClose(){return!1}}n.getDefaultFmtId=function(f){return l[f]},n.getDefaultFmtCode=function(f){return r[f]&&r[f].f},s.exports=n},{"../../../utils/under-dash":26,"../../defaultnumformats":30,"../base-xform":32}],133:[function(t,s,u){const o=t("../base-xform"),r={boolean:(c,l)=>c===void 0?l:c};s.exports=class extends o{get tag(){return"protection"}render(c,l){c.addRollback(),c.openNode("protection");let n=!1;function f(h,p){p!==void 0&&(c.addAttribute(h,p),n=!0)}f("locked",r.boolean(l.locked,!0)?void 0:"0"),f("hidden",r.boolean(l.hidden,!1)?"1":void 0),c.closeNode(),n?c.commit():c.rollback()}parseOpen(c){const l={locked:c.attributes.locked!=="0",hidden:c.attributes.hidden==="1"},n=!l.locked||l.hidden;this.model=n?l:null}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],134:[function(t,s,u){const o=t("../base-xform"),r=t("./alignment-xform"),c=t("./protection-xform");s.exports=class extends o{constructor(l){super(),this.xfId=!(!l||!l.xfId),this.map={alignment:new r,protection:new c}}get tag(){return"xf"}render(l,n){l.openNode("xf",{numFmtId:n.numFmtId||0,fontId:n.fontId||0,fillId:n.fillId||0,borderId:n.borderId||0}),this.xfId&&l.addAttribute("xfId",n.xfId||0),n.numFmtId&&l.addAttribute("applyNumberFormat","1"),n.fontId&&l.addAttribute("applyFont","1"),n.fillId&&l.addAttribute("applyFill","1"),n.borderId&&l.addAttribute("applyBorder","1"),n.alignment&&l.addAttribute("applyAlignment","1"),n.protection&&l.addAttribute("applyProtection","1"),n.alignment&&this.map.alignment.render(l,n.alignment),n.protection&&this.map.protection.render(l,n.protection),l.closeNode()}parseOpen(l){if(this.parser)return this.parser.parseOpen(l),!0;switch(l.name){case"xf":return this.model={numFmtId:parseInt(l.attributes.numFmtId,10),fontId:parseInt(l.attributes.fontId,10),fillId:parseInt(l.attributes.fillId,10),borderId:parseInt(l.attributes.borderId,10)},this.xfId&&(this.model.xfId=parseInt(l.attributes.xfId,10)),!0;case"alignment":return this.parser=this.map.alignment,this.parser.parseOpen(l),!0;case"protection":return this.parser=this.map.protection,this.parser.parseOpen(l),!0;default:return!1}}parseText(l){this.parser&&this.parser.parseText(l)}parseClose(l){return this.parser?(this.parser.parseClose(l)||(this.map.protection===this.parser?this.model.protection=this.parser.model:this.model.alignment=this.parser.model,this.parser=void 0),!0):l!=="xf"}}},{"../base-xform":32,"./alignment-xform":126,"./protection-xform":133}],135:[function(t,s,u){const o=t("../../../doc/enums"),r=t("../../../utils/xml-stream"),c=t("../base-xform"),l=t("../static-xform"),n=t("../list-xform"),f=t("./font-xform"),h=t("./fill-xform"),p=t("./border-xform"),g=t("./numfmt-xform"),v=t("./style-xform"),x=t("./dxf-xform");class y extends c{constructor(S){super(),this.map={numFmts:new n({tag:"numFmts",count:!0,childXform:new g}),fonts:new n({tag:"fonts",count:!0,childXform:new f,$:{"x14ac:knownFonts":1}}),fills:new n({tag:"fills",count:!0,childXform:new h}),borders:new n({tag:"borders",count:!0,childXform:new p}),cellStyleXfs:new n({tag:"cellStyleXfs",count:!0,childXform:new v}),cellXfs:new n({tag:"cellXfs",count:!0,childXform:new v({xfId:!0})}),dxfs:new n({tag:"dxfs",always:!0,count:!0,childXform:new x}),numFmt:new g,font:new f,fill:new h,border:new p,style:new v({xfId:!0}),cellStyles:y.STATIC_XFORMS.cellStyles,tableStyles:y.STATIC_XFORMS.tableStyles,extLst:y.STATIC_XFORMS.extLst},S&&this.init()}initIndex(){this.index={style:{},numFmt:{},numFmtNextId:164,font:{},border:{},fill:{}}}init(){this.model={styles:[],numFmts:[],fonts:[],borders:[],fills:[],dxfs:[]},this.initIndex(),this._addBorder({}),this._addStyle({numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}),this._addFill({type:"pattern",pattern:"none"}),this._addFill({type:"pattern",pattern:"gray125"}),this.weakMap=new WeakMap}render(S,E){E=E||this.model,S.openXml(r.StdDocAttributes),S.openNode("styleSheet",y.STYLESHEET_ATTRIBUTES),this.index?(E.numFmts&&E.numFmts.length&&(S.openNode("numFmts",{count:E.numFmts.length}),E.numFmts.forEach(I=>{S.writeXml(I)}),S.closeNode()),E.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),S.openNode("fonts",{count:E.fonts.length,"x14ac:knownFonts":1}),E.fonts.forEach(I=>{S.writeXml(I)}),S.closeNode(),S.openNode("fills",{count:E.fills.length}),E.fills.forEach(I=>{S.writeXml(I)}),S.closeNode(),S.openNode("borders",{count:E.borders.length}),E.borders.forEach(I=>{S.writeXml(I)}),S.closeNode(),this.map.cellStyleXfs.render(S,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),S.openNode("cellXfs",{count:E.styles.length}),E.styles.forEach(I=>{S.writeXml(I)}),S.closeNode()):(this.map.numFmts.render(S,E.numFmts),this.map.fonts.render(S,E.fonts),this.map.fills.render(S,E.fills),this.map.borders.render(S,E.borders),this.map.cellStyleXfs.render(S,[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}]),this.map.cellXfs.render(S,E.styles)),y.STATIC_XFORMS.cellStyles.render(S),this.map.dxfs.render(S,E.dxfs),y.STATIC_XFORMS.tableStyles.render(S),y.STATIC_XFORMS.extLst.render(S),S.closeNode()}parseOpen(S){if(this.parser)return this.parser.parseOpen(S),!0;switch(S.name){case"styleSheet":return this.initIndex(),!0;default:return this.parser=this.map[S.name],this.parser&&this.parser.parseOpen(S),!0}}parseText(S){this.parser&&this.parser.parseText(S)}parseClose(S){if(this.parser)return this.parser.parseClose(S)||(this.parser=void 0),!0;switch(S){case"styleSheet":{this.model={};const E=(I,D)=>{D.model&&D.model.length&&(this.model[I]=D.model)};if(E("numFmts",this.map.numFmts),E("fonts",this.map.fonts),E("fills",this.map.fills),E("borders",this.map.borders),E("styles",this.map.cellXfs),E("dxfs",this.map.dxfs),this.index={model:[],numFmt:[]},this.model.numFmts){const I=this.index.numFmt;this.model.numFmts.forEach(D=>{I[D.id]=D.formatCode})}return!1}default:return!0}}addStyleModel(S,E){if(!S)return 0;if(this.model.fonts.length||this._addFont({size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}),this.weakMap&&this.weakMap.has(S))return this.weakMap.get(S);const I={};if(E=E||o.ValueType.Number,S.numFmt)I.numFmtId=this._addNumFmtStr(S.numFmt);else switch(E){case o.ValueType.Number:I.numFmtId=this._addNumFmtStr("General");break;case o.ValueType.Date:I.numFmtId=this._addNumFmtStr("mm-dd-yy")}S.font&&(I.fontId=this._addFont(S.font)),S.border&&(I.borderId=this._addBorder(S.border)),S.fill&&(I.fillId=this._addFill(S.fill)),S.alignment&&(I.alignment=S.alignment),S.protection&&(I.protection=S.protection);const D=this._addStyle(I);return this.weakMap&&this.weakMap.set(S,D),D}getStyleModel(S){const E=this.model.styles[S];if(!E)return null;let I=this.index.model[S];if(I)return I;if(I=this.index.model[S]={},E.numFmtId){const Z=this.index.numFmt[E.numFmtId]||g.getDefaultFmtCode(E.numFmtId);Z&&(I.numFmt=Z)}function D(Z,K,z){if(z||z===0){const W=K[z];W&&(I[Z]=W)}}return D("font",this.model.fonts,E.fontId),D("border",this.model.borders,E.borderId),D("fill",this.model.fills,E.fillId),E.alignment&&(I.alignment=E.alignment),E.protection&&(I.protection=E.protection),I}addDxfStyle(S){return S.numFmt&&(S.numFmtId=this._addNumFmtStr(S.numFmt)),this.model.dxfs.push(S),this.model.dxfs.length-1}getDxfStyle(S){return this.model.dxfs[S]}_addStyle(S){const E=this.map.style.toXml(S);let I=this.index.style[E];return I===void 0&&(I=this.index.style[E]=this.model.styles.length,this.model.styles.push(E)),I}_addNumFmtStr(S){let E=g.getDefaultFmtId(S);if(E!==void 0||(E=this.index.numFmt[S],E!==void 0))return E;E=this.index.numFmt[S]=164+this.model.numFmts.length;const I=this.map.numFmt.toXml({id:E,formatCode:S});return this.model.numFmts.push(I),E}_addFont(S){const E=this.map.font.toXml(S);let I=this.index.font[E];return I===void 0&&(I=this.index.font[E]=this.model.fonts.length,this.model.fonts.push(E)),I}_addBorder(S){const E=this.map.border.toXml(S);let I=this.index.border[E];return I===void 0&&(I=this.index.border[E]=this.model.borders.length,this.model.borders.push(E)),I}_addFill(S){const E=this.map.fill.toXml(S);let I=this.index.fill[E];return I===void 0&&(I=this.index.fill[E]=this.model.fills.length,this.model.fills.push(E)),I}}y.STYLESHEET_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"x14ac x16r2","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main"},y.STATIC_XFORMS={cellStyles:new l({tag:"cellStyles",$:{count:1},c:[{tag:"cellStyle",$:{name:"Normal",xfId:0,builtinId:0}}]}),dxfs:new l({tag:"dxfs",$:{count:0}}),tableStyles:new l({tag:"tableStyles",$:{count:0,defaultTableStyle:"TableStyleMedium2",defaultPivotStyle:"PivotStyleLight16"}}),extLst:new l({tag:"extLst",c:[{tag:"ext",$:{uri:"{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"},c:[{tag:"x14:slicerStyles",$:{defaultSlicerStyle:"SlicerStyleLight1"}}]},{tag:"ext",$:{uri:"{9260A510-F301-46a8-8635-F512D64BE5F5}","xmlns:x15":"http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"},c:[{tag:"x15:timelineStyles",$:{defaultTimelineStyle:"TimeSlicerStyleLight1"}}]}]})},y.Mock=class extends y{constructor(){super(),this.model={styles:[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfId:0}],numFmts:[],fonts:[{size:11,color:{theme:1},name:"Calibri",family:2,scheme:"minor"}],borders:[{}],fills:[{type:"pattern",pattern:"none"},{type:"pattern",pattern:"gray125"}]}}parseStream(w){return w.autodrain(),Promise.resolve()}addStyleModel(w,S){switch(S){case o.ValueType.Date:return this.dateStyleId;default:return 0}}get dateStyleId(){if(!this._dateStyleId){const w={numFmtId:g.getDefaultFmtId("mm-dd-yy")};this._dateStyleId=this.model.styles.length,this.model.styles.push(w)}return this._dateStyleId}getStyleModel(){return{}}},s.exports=y},{"../../../doc/enums":7,"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"../static-xform":120,"./border-xform":127,"./dxf-xform":129,"./fill-xform":130,"./font-xform":131,"./numfmt-xform":132,"./style-xform":134}],136:[function(t,s,u){const o=t("../base-xform");class r extends o{constructor(l){super(),this.model=l}get tag(){return"u"}render(l,n){if((n=n||this.model)===!0)l.leafNode("u");else{const f=r.Attributes[n];f&&l.leafNode("u",f)}}parseOpen(l){l.name==="u"&&(this.model=l.attributes.val||!0)}parseText(){}parseClose(){return!1}}r.Attributes={single:{},double:{val:"double"},singleAccounting:{val:"singleAccounting"},doubleAccounting:{val:"doubleAccounting"}},s.exports=r},{"../base-xform":32}],137:[function(t,s,u){const o=t("../base-xform"),r=t("./filter-column-xform");s.exports=class extends o{constructor(){super(),this.map={filterColumn:new r}}get tag(){return"autoFilter"}prepare(c){c.columns.forEach((l,n)=>{this.map.filterColumn.prepare(l,{index:n})})}render(c,l){return c.openNode(this.tag,{ref:l.autoFilterRef}),l.columns.forEach(n=>{this.map.filterColumn.render(c,n)}),c.closeNode(),!0}parseOpen(c){if(this.parser)return this.parser.parseOpen(c),!0;switch(c.name){case this.tag:return this.model={autoFilterRef:c.attributes.ref,columns:[]},!0;default:if(this.parser=this.map[c.name],this.parser)return this.parseOpen(c),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(c))}}parseText(c){this.parser&&this.parser.parseText(c)}parseClose(c){if(this.parser)return this.parser.parseClose(c)||(this.model.columns.push(this.parser.model),this.parser=void 0),!0;switch(c){case this.tag:return!1;default:throw new Error("Unexpected xml node in parseClose: "+c)}}}},{"../base-xform":32,"./filter-column-xform":139}],138:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"customFilter"}render(r,c){r.leafNode(this.tag,{val:c.val,operator:c.operator})}parseOpen(r){return r.name===this.tag&&(this.model={val:r.attributes.val,operator:r.attributes.operator},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],139:[function(t,s,u){const o=t("../base-xform"),r=t("../list-xform"),c=t("./custom-filter-xform"),l=t("./filter-xform");s.exports=class extends o{constructor(){super(),this.map={customFilters:new r({tag:"customFilters",count:!1,empty:!0,childXform:new c}),filters:new r({tag:"filters",count:!1,empty:!0,childXform:new l})}}get tag(){return"filterColumn"}prepare(n,f){n.colId=f.index.toString()}render(n,f){return f.customFilters?(n.openNode(this.tag,{colId:f.colId,hiddenButton:f.filterButton?"0":"1"}),this.map.customFilters.render(n,f.customFilters),n.closeNode(),!0):(n.leafNode(this.tag,{colId:f.colId,hiddenButton:f.filterButton?"0":"1"}),!0)}parseOpen(n){if(this.parser)return this.parser.parseOpen(n),!0;const{attributes:f}=n;switch(n.name){case this.tag:return this.model={filterButton:f.hiddenButton==="0"},!0;default:if(this.parser=this.map[n.name],this.parser)return this.parseOpen(n),!0;throw new Error("Unexpected xml node in parseOpen: "+JSON.stringify(n))}}parseText(){}parseClose(n){if(this.parser)return this.parser.parseClose(n)||(this.parser=void 0),!0;switch(n){case this.tag:return this.model.customFilters=this.map.customFilters.model,!1;default:return!0}}}},{"../base-xform":32,"../list-xform":71,"./custom-filter-xform":138,"./filter-xform":140}],140:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"filter"}render(r,c){r.leafNode(this.tag,{val:c.val})}parseOpen(r){return r.name===this.tag&&(this.model={val:r.attributes.val},!0)}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],141:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"tableColumn"}prepare(r,c){r.id=c.index+1}render(r,c){return r.leafNode(this.tag,{id:c.id.toString(),name:c.name,totalsRowLabel:c.totalsRowLabel,totalsRowFunction:c.totalsRowFunction,dxfId:c.dxfId}),!0}parseOpen(r){if(r.name===this.tag){const{attributes:c}=r;return this.model={name:c.name,totalsRowLabel:c.totalsRowLabel,totalsRowFunction:c.totalsRowFunction,dxfId:c.dxfId},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],142:[function(t,s,u){const o=t("../base-xform");s.exports=class extends o{get tag(){return"tableStyleInfo"}render(r,c){return r.leafNode(this.tag,{name:c.theme?c.theme:void 0,showFirstColumn:c.showFirstColumn?"1":"0",showLastColumn:c.showLastColumn?"1":"0",showRowStripes:c.showRowStripes?"1":"0",showColumnStripes:c.showColumnStripes?"1":"0"}),!0}parseOpen(r){if(r.name===this.tag){const{attributes:c}=r;return this.model={theme:c.name?c.name:null,showFirstColumn:c.showFirstColumn==="1",showLastColumn:c.showLastColumn==="1",showRowStripes:c.showRowStripes==="1",showColumnStripes:c.showColumnStripes==="1"},!0}return!1}parseText(){}parseClose(){return!1}}},{"../base-xform":32}],143:[function(t,s,u){const o=t("../../../utils/xml-stream"),r=t("../base-xform"),c=t("../list-xform"),l=t("./auto-filter-xform"),n=t("./table-column-xform"),f=t("./table-style-info-xform");class h extends r{constructor(){super(),this.map={autoFilter:new l,tableColumns:new c({tag:"tableColumns",count:!0,empty:!0,childXform:new n}),tableStyleInfo:new f}}prepare(g,v){this.map.autoFilter.prepare(g),this.map.tableColumns.prepare(g.columns,v)}get tag(){return"table"}render(g,v){g.openXml(o.StdDocAttributes),g.openNode(this.tag,{...h.TABLE_ATTRIBUTES,id:v.id,name:v.name,displayName:v.displayName||v.name,ref:v.tableRef,totalsRowCount:v.totalsRow?"1":void 0,totalsRowShown:v.totalsRow?void 0:"1",headerRowCount:v.headerRow?"1":"0"}),this.map.autoFilter.render(g,v),this.map.tableColumns.render(g,v.columns),this.map.tableStyleInfo.render(g,v.style),g.closeNode()}parseOpen(g){if(this.parser)return this.parser.parseOpen(g),!0;const{name:v,attributes:x}=g;switch(v){case this.tag:this.reset(),this.model={name:x.name,displayName:x.displayName||x.name,tableRef:x.ref,totalsRow:x.totalsRowCount==="1",headerRow:x.headerRowCount==="1"};break;default:this.parser=this.map[g.name],this.parser&&this.parser.parseOpen(g)}return!0}parseText(g){this.parser&&this.parser.parseText(g)}parseClose(g){if(this.parser)return this.parser.parseClose(g)||(this.parser=void 0),!0;switch(g){case this.tag:return this.model.columns=this.map.tableColumns.model,this.map.autoFilter.model&&(this.model.autoFilterRef=this.map.autoFilter.model.autoFilterRef,this.map.autoFilter.model.columns.forEach((v,x)=>{this.model.columns[x].filterButton=v.filterButton})),this.model.style=this.map.tableStyleInfo.model,!1;default:return!0}}reconcile(g,v){g.columns.forEach(x=>{x.dxfId!==void 0&&(x.style=v.styles.getDxfStyle(x.dxfId))})}}h.TABLE_ATTRIBUTES={xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3"},s.exports=h},{"../../../utils/xml-stream":28,"../base-xform":32,"../list-xform":71,"./auto-filter-xform":137,"./table-column-xform":141,"./table-style-info-xform":142}],144:[function(t,s,u){(function(o,r){(function(){const c=t("fs"),l=t("jszip"),{PassThrough:n}=t("readable-stream"),f=t("../utils/zip-stream"),h=t("../utils/stream-buf"),p=t("../utils/utils"),g=t("../utils/xml-stream"),{bufferToString:v}=t("../utils/browser-buffer-decode"),x=t("./xform/style/styles-xform"),y=t("./xform/core/core-xform"),w=t("./xform/strings/shared-strings-xform"),S=t("./xform/core/relationships-xform"),E=t("./xform/core/content-types-xform"),I=t("./xform/core/app-xform"),D=t("./xform/book/workbook-xform"),Z=t("./xform/sheet/worksheet-xform"),K=t("./xform/drawing/drawing-xform"),z=t("./xform/table/table-xform"),W=t("./xform/comment/comments-xform"),Q=t("./xform/comment/vml-notes-xform"),rt=t("./xml/theme1");class tt{constructor(F){this.workbook=F}async readFile(F,R){if(!await p.fs.exists(F))throw new Error("File not found: "+F);const T=c.createReadStream(F);try{const C=await this.read(T,R);return T.close(),C}catch(C){throw T.close(),C}}parseRels(F){return new S().parseStream(F)}parseWorkbook(F){return new D().parseStream(F)}parseSharedStrings(F){return new w().parseStream(F)}reconcile(F,R){const T=new D,C=new Z(R),k=new K,M=new z;T.reconcile(F);const O={media:F.media,mediaIndex:F.mediaIndex};Object.keys(F.drawings).forEach(et=>{const it=F.drawings[et],pt=F.drawingRels[et];pt&&(O.rels=pt.reduce((X,ut)=>(X[ut.Id]=ut,X),{}),(it.anchors||[]).forEach(X=>{const ut=X.picture&&X.picture.hyperlinks;ut&&O.rels[ut.rId]&&(ut.hyperlink=O.rels[ut.rId].Target,delete ut.rId)}),k.reconcile(it,O))});const P={styles:F.styles};Object.values(F.tables).forEach(et=>{M.reconcile(et,P)});const H={styles:F.styles,sharedStrings:F.sharedStrings,media:F.media,mediaIndex:F.mediaIndex,date1904:F.properties&&F.properties.date1904,drawings:F.drawings,comments:F.comments,tables:F.tables,vmlDrawings:F.vmlDrawings};F.worksheets.forEach(et=>{et.relationships=F.worksheetRels[et.sheetNo],C.reconcile(et,H)}),delete F.worksheetHash,delete F.worksheetRels,delete F.globalRels,delete F.sharedStrings,delete F.workbookRels,delete F.sheetDefs,delete F.styles,delete F.mediaIndex,delete F.drawings,delete F.drawingRels,delete F.vmlDrawings}async _processWorksheetEntry(F,R,T,C,k){const M=new Z(C),O=await M.parseStream(F);O.sheetNo=T,R.worksheetHash[k]=O,R.worksheets.push(O)}async _processCommentEntry(F,R,T){const C=new W,k=await C.parseStream(F);R.comments[`../${T}.xml`]=k}async _processTableEntry(F,R,T){const C=new z,k=await C.parseStream(F);R.tables[`../tables/${T}.xml`]=k}async _processWorksheetRelsEntry(F,R,T){const C=new S,k=await C.parseStream(F);R.worksheetRels[T]=k}async _processMediaEntry(F,R,T){const C=T.lastIndexOf(".");if(C>=1){const k=T.substr(C+1),M=T.substr(0,C);await new Promise((O,P)=>{const H=new h;H.on("finish",()=>{R.mediaIndex[T]=R.media.length,R.mediaIndex[M]=R.media.length;const et={type:"image",name:M,extension:k,buffer:H.toBuffer()};R.media.push(et),O()}),F.on("error",et=>{P(et)}),F.pipe(H)})}}async _processDrawingEntry(F,R,T){const C=new K,k=await C.parseStream(F);R.drawings[T]=k}async _processDrawingRelsEntry(F,R,T){const C=new S,k=await C.parseStream(F);R.drawingRels[T]=k}async _processVmlDrawingEntry(F,R,T){const C=new Q,k=await C.parseStream(F);R.vmlDrawings[`../drawings/${T}.vml`]=k}async _processThemeEntry(F,R,T){await new Promise((C,k)=>{const M=new h;F.on("error",k),M.on("error",k),M.on("finish",()=>{R.themes[T]=M.read().toString(),C()}),F.pipe(M)})}createInputStream(){throw new Error("`XLSX#createInputStream` is deprecated. You should use `XLSX#read` instead. This method will be removed in version 5.0. Please follow upgrade instruction: https://github.com/exceljs/exceljs/blob/master/UPGRADE-4.0.md")}async read(F,R){!F[Symbol.asyncIterator]&&F.pipe&&(F=F.pipe(new n));const T=[];for await(const C of F)T.push(C);return this.load(r.concat(T),R)}async load(F,R){let T;T=R&&R.base64?r.from(F.toString(),"base64"):F;const C={worksheets:[],worksheetHash:{},worksheetRels:[],themes:{},media:[],mediaIndex:{},drawings:{},drawingRels:{},comments:{},tables:{},vmlDrawings:{}},k=await l.loadAsync(T);for(const M of Object.values(k.files))if(!M.dir){let O,P=M.name;if(P[0]==="/"&&(P=P.substr(1)),P.match(/xl\/media\//)||P.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/))O=new n,O.write(await M.async("nodebuffer"));else{let H;O=new n({writableObjectMode:!0,readableObjectMode:!0}),H=o.browser?v(await M.async("nodebuffer")):await M.async("string");const et=16384;for(let it=0;it<H.length;it+=et)O.write(H.substring(it,it+et))}switch(O.end(),P){case"_rels/.rels":C.globalRels=await this.parseRels(O);break;case"xl/workbook.xml":{const H=await this.parseWorkbook(O);C.sheets=H.sheets,C.definedNames=H.definedNames,C.views=H.views,C.properties=H.properties,C.calcProperties=H.calcProperties;break}case"xl/_rels/workbook.xml.rels":C.workbookRels=await this.parseRels(O);break;case"xl/sharedStrings.xml":C.sharedStrings=new w,await C.sharedStrings.parseStream(O);break;case"xl/styles.xml":C.styles=new x,await C.styles.parseStream(O);break;case"docProps/app.xml":{const H=new I,et=await H.parseStream(O);C.company=et.company,C.manager=et.manager;break}case"docProps/core.xml":{const H=new y,et=await H.parseStream(O);Object.assign(C,et);break}default:{let H=P.match(/xl\/worksheets\/sheet(\d+)[.]xml/);if(H){await this._processWorksheetEntry(O,C,H[1],R,P);break}if(H=P.match(/xl\/worksheets\/_rels\/sheet(\d+)[.]xml.rels/),H){await this._processWorksheetRelsEntry(O,C,H[1]);break}if(H=P.match(/xl\/theme\/([a-zA-Z0-9]+)[.]xml/),H){await this._processThemeEntry(O,C,H[1]);break}if(H=P.match(/xl\/media\/([a-zA-Z0-9]+[.][a-zA-Z0-9]{3,4})$/),H){await this._processMediaEntry(O,C,H[1]);break}if(H=P.match(/xl\/drawings\/([a-zA-Z0-9]+)[.]xml/),H){await this._processDrawingEntry(O,C,H[1]);break}if(H=P.match(/xl\/(comments\d+)[.]xml/),H){await this._processCommentEntry(O,C,H[1]);break}if(H=P.match(/xl\/tables\/(table\d+)[.]xml/),H){await this._processTableEntry(O,C,H[1]);break}if(H=P.match(/xl\/drawings\/_rels\/([a-zA-Z0-9]+)[.]xml[.]rels/),H){await this._processDrawingRelsEntry(O,C,H[1]);break}if(H=P.match(/xl\/drawings\/(vmlDrawing\d+)[.]vml/),H){await this._processVmlDrawingEntry(O,C,H[1]);break}}}}return this.reconcile(C,R),this.workbook.model=C,this.workbook}async addMedia(F,R){await Promise.all(R.media.map(async T=>{if(T.type==="image"){const C=`xl/media/${T.name}.${T.extension}`;if(T.filename){const k=await(function(M,O){return new Promise((P,H)=>{c.readFile(M,O,(et,it)=>{et?H(et):P(it)})})})(T.filename);return F.append(k,{name:C})}if(T.buffer)return F.append(T.buffer,{name:C});if(T.base64){const k=T.base64,M=k.substring(k.indexOf(",")+1);return F.append(M,{name:C,base64:!0})}}throw new Error("Unsupported media")}))}addDrawings(F,R){const T=new K,C=new S;R.worksheets.forEach(k=>{const{drawing:M}=k;if(M){T.prepare(M,{});let O=T.toXml(M);F.append(O,{name:`xl/drawings/${M.name}.xml`}),O=C.toXml(M.rels),F.append(O,{name:`xl/drawings/_rels/${M.name}.xml.rels`})}})}addTables(F,R){const T=new z;R.worksheets.forEach(C=>{const{tables:k}=C;k.forEach(M=>{T.prepare(M,{});const O=T.toXml(M);F.append(O,{name:"xl/tables/"+M.target})})})}async addContentTypes(F,R){const T=new E().toXml(R);F.append(T,{name:"[Content_Types].xml"})}async addApp(F,R){const T=new I().toXml(R);F.append(T,{name:"docProps/app.xml"})}async addCore(F,R){const T=new y;F.append(T.toXml(R),{name:"docProps/core.xml"})}async addThemes(F,R){const T=R.themes||{theme1:rt};Object.keys(T).forEach(C=>{const k=T[C],M=`xl/theme/${C}.xml`;F.append(k,{name:M})})}async addOfficeRels(F){const R=new S().toXml([{Id:"rId1",Type:tt.RelType.OfficeDocument,Target:"xl/workbook.xml"},{Id:"rId2",Type:tt.RelType.CoreProperties,Target:"docProps/core.xml"},{Id:"rId3",Type:tt.RelType.ExtenderProperties,Target:"docProps/app.xml"}]);F.append(R,{name:"_rels/.rels"})}async addWorkbookRels(F,R){let T=1;const C=[{Id:"rId"+T++,Type:tt.RelType.Styles,Target:"styles.xml"},{Id:"rId"+T++,Type:tt.RelType.Theme,Target:"theme/theme1.xml"}];R.sharedStrings.count&&C.push({Id:"rId"+T++,Type:tt.RelType.SharedStrings,Target:"sharedStrings.xml"}),R.worksheets.forEach(M=>{M.rId="rId"+T++,C.push({Id:M.rId,Type:tt.RelType.Worksheet,Target:`worksheets/sheet${M.id}.xml`})});const k=new S().toXml(C);F.append(k,{name:"xl/_rels/workbook.xml.rels"})}async addSharedStrings(F,R){R.sharedStrings&&R.sharedStrings.count&&F.append(R.sharedStrings.xml,{name:"xl/sharedStrings.xml"})}async addStyles(F,R){const{xml:T}=R.styles;T&&F.append(T,{name:"xl/styles.xml"})}async addWorkbook(F,R){const T=new D;F.append(T.toXml(R),{name:"xl/workbook.xml"})}async addWorksheets(F,R){const T=new Z,C=new S,k=new W,M=new Q;R.worksheets.forEach(O=>{let P=new g;T.render(P,O),F.append(P.xml,{name:`xl/worksheets/sheet${O.id}.xml`}),O.rels&&O.rels.length&&(P=new g,C.render(P,O.rels),F.append(P.xml,{name:`xl/worksheets/_rels/sheet${O.id}.xml.rels`})),O.comments.length>0&&(P=new g,k.render(P,O),F.append(P.xml,{name:`xl/comments${O.id}.xml`}),P=new g,M.render(P,O),F.append(P.xml,{name:`xl/drawings/vmlDrawing${O.id}.vml`}))})}_finalize(F){return new Promise((R,T)=>{F.on("finish",()=>{R(this)}),F.on("error",T),F.finalize()})}prepareModel(F,R){F.creator=F.creator||"ExcelJS",F.lastModifiedBy=F.lastModifiedBy||"ExcelJS",F.created=F.created||new Date,F.modified=F.modified||new Date,F.useSharedStrings=R.useSharedStrings===void 0||R.useSharedStrings,F.useStyles=R.useStyles===void 0||R.useStyles,F.sharedStrings=new w,F.styles=F.useStyles?new x(!0):new x.Mock;const T=new D,C=new Z;T.prepare(F);const k={sharedStrings:F.sharedStrings,styles:F.styles,date1904:F.properties.date1904,drawingsCount:0,media:F.media};k.drawings=F.drawings=[],k.commentRefs=F.commentRefs=[];let M=0;F.tables=[],F.worksheets.forEach(O=>{O.tables.forEach(P=>{M++,P.target=`table${M}.xml`,P.id=M,F.tables.push(P)}),C.prepare(O,k)})}async write(F,R){R=R||{};const{model:T}=this.workbook,C=new f.ZipWriter(R.zip);return C.pipe(F),this.prepareModel(T,R),await this.addContentTypes(C,T),await this.addOfficeRels(C,T),await this.addWorkbookRels(C,T),await this.addWorksheets(C,T),await this.addSharedStrings(C,T),await this.addDrawings(C,T),await this.addTables(C,T),await Promise.all([this.addThemes(C,T),this.addStyles(C,T)]),await this.addMedia(C,T),await Promise.all([this.addApp(C,T),this.addCore(C,T)]),await this.addWorkbook(C,T),this._finalize(C)}writeFile(F,R){const T=c.createWriteStream(F);return new Promise((C,k)=>{T.on("finish",()=>{C()}),T.on("error",M=>{k(M)}),this.write(T,R).then(()=>{T.end()}).catch(M=>{k(M)})})}async writeBuffer(F){const R=new h;return await this.write(R,F),R.read()}}tt.RelType=t("./rel-type"),s.exports=tt}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{"../utils/browser-buffer-decode":16,"../utils/stream-buf":24,"../utils/utils":27,"../utils/xml-stream":28,"../utils/zip-stream":29,"./rel-type":31,"./xform/book/workbook-xform":38,"./xform/comment/comments-xform":40,"./xform/comment/vml-notes-xform":45,"./xform/core/app-xform":51,"./xform/core/content-types-xform":52,"./xform/core/core-xform":53,"./xform/core/relationships-xform":55,"./xform/drawing/drawing-xform":62,"./xform/sheet/worksheet-xform":115,"./xform/strings/shared-strings-xform":124,"./xform/style/styles-xform":135,"./xform/table/table-xform":143,"./xml/theme1":145,_process:467,buffer:220,fs:216,jszip:441,"readable-stream":491}],145:[function(t,s,u){s.exports=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"> <a:themeElements> <a:clrScheme name="Office"> <a:dk1> <a:sysClr val="windowText" lastClr="000000"/> </a:dk1> <a:lt1> <a:sysClr val="window" lastClr="FFFFFF"/> </a:lt1> <a:dk2> <a:srgbClr val="1F497D"/> </a:dk2> <a:lt2> <a:srgbClr val="EEECE1"/> </a:lt2> <a:accent1> <a:srgbClr val="4F81BD"/> </a:accent1> <a:accent2> <a:srgbClr val="C0504D"/> </a:accent2> <a:accent3> <a:srgbClr val="9BBB59"/> </a:accent3> <a:accent4> <a:srgbClr val="8064A2"/> </a:accent4> <a:accent5> <a:srgbClr val="4BACC6"/> </a:accent5> <a:accent6> <a:srgbClr val="F79646"/> </a:accent6> <a:hlink> <a:srgbClr val="0000FF"/> </a:hlink> <a:folHlink> <a:srgbClr val="800080"/> </a:folHlink> </a:clrScheme> <a:fontScheme name="Office"> <a:majorFont> <a:latin typeface="Cambria"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Times New Roman"/> <a:font script="Hebr" typeface="Times New Roman"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="MoolBoran"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Times New Roman"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:majorFont> <a:minorFont> <a:latin typeface="Calibri"/> <a:ea typeface=""/> <a:cs typeface=""/> <a:font script="Jpan" typeface=" "/> <a:font script="Hang" typeface=" "/> <a:font script="Hans" typeface=""/> <a:font script="Hant" typeface=""/> <a:font script="Arab" typeface="Arial"/> <a:font script="Hebr" typeface="Arial"/> <a:font script="Thai" typeface="Tahoma"/> <a:font script="Ethi" typeface="Nyala"/> <a:font script="Beng" typeface="Vrinda"/> <a:font script="Gujr" typeface="Shruti"/> <a:font script="Khmr" typeface="DaunPenh"/> <a:font script="Knda" typeface="Tunga"/> <a:font script="Guru" typeface="Raavi"/> <a:font script="Cans" typeface="Euphemia"/> <a:font script="Cher" typeface="Plantagenet Cherokee"/> <a:font script="Yiii" typeface="Microsoft Yi Baiti"/> <a:font script="Tibt" typeface="Microsoft Himalaya"/> <a:font script="Thaa" typeface="MV Boli"/> <a:font script="Deva" typeface="Mangal"/> <a:font script="Telu" typeface="Gautami"/> <a:font script="Taml" typeface="Latha"/> <a:font script="Syrc" typeface="Estrangelo Edessa"/> <a:font script="Orya" typeface="Kalinga"/> <a:font script="Mlym" typeface="Kartika"/> <a:font script="Laoo" typeface="DokChampa"/> <a:font script="Sinh" typeface="Iskoola Pota"/> <a:font script="Mong" typeface="Mongolian Baiti"/> <a:font script="Viet" typeface="Arial"/> <a:font script="Uigh" typeface="Microsoft Uighur"/> <a:font script="Geor" typeface="Sylfaen"/> </a:minorFont> </a:fontScheme> <a:fmtScheme name="Office"> <a:fillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="35000"> <a:schemeClr val="phClr"> <a:tint val="37000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="15000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="1"/> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="100000"/> <a:shade val="100000"/> <a:satMod val="130000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:tint val="50000"/> <a:shade val="100000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:lin ang="16200000" scaled="0"/> </a:gradFill> </a:fillStyleLst> <a:lnStyleLst> <a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"> <a:shade val="95000"/> <a:satMod val="105000"/> </a:schemeClr> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> <a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:prstDash val="solid"/> </a:ln> </a:lnStyleLst> <a:effectStyleLst> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="38000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> </a:effectStyle> <a:effectStyle> <a:effectLst> <a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"> <a:srgbClr val="000000"> <a:alpha val="35000"/> </a:srgbClr> </a:outerShdw> </a:effectLst> <a:scene3d> <a:camera prst="orthographicFront"> <a:rot lat="0" lon="0" rev="0"/> </a:camera> <a:lightRig rig="threePt" dir="t"> <a:rot lat="0" lon="0" rev="1200000"/> </a:lightRig> </a:scene3d> <a:sp3d> <a:bevelT w="63500" h="25400"/> </a:sp3d> </a:effectStyle> </a:effectStyleLst> <a:bgFillStyleLst> <a:solidFill> <a:schemeClr val="phClr"/> </a:solidFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="40000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="40000"> <a:schemeClr val="phClr"> <a:tint val="45000"/> <a:shade val="99000"/> <a:satMod val="350000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="20000"/> <a:satMod val="255000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="-80000" r="50000" b="180000"/> </a:path> </a:gradFill> <a:gradFill rotWithShape="1"> <a:gsLst> <a:gs pos="0"> <a:schemeClr val="phClr"> <a:tint val="80000"/> <a:satMod val="300000"/> </a:schemeClr> </a:gs> <a:gs pos="100000"> <a:schemeClr val="phClr"> <a:shade val="30000"/> <a:satMod val="200000"/> </a:schemeClr> </a:gs> </a:gsLst> <a:path path="circle"> <a:fillToRect l="50000" t="50000" r="50000" b="50000"/> </a:path> </a:gradFill> </a:bgFillStyleLst> </a:fmtScheme> </a:themeElements> <a:objectDefaults> <a:spDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="1"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="3"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="2"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="lt1"/> </a:fontRef> </a:style> </a:spDef> <a:lnDef> <a:spPr/> <a:bodyPr/> <a:lstStyle/> <a:style> <a:lnRef idx="2"> <a:schemeClr val="accent1"/> </a:lnRef> <a:fillRef idx="0"> <a:schemeClr val="accent1"/> </a:fillRef> <a:effectRef idx="1"> <a:schemeClr val="accent1"/> </a:effectRef> <a:fontRef idx="minor"> <a:schemeClr val="tx1"/> </a:fontRef> </a:style> </a:lnDef> </a:objectDefaults> <a:extraClrSchemeLst/> </a:theme>`},{}],146:[function(t,s,u){(function(o){(function(){Object.defineProperty(u,"__esModule",{value:!0}),u.CsvFormatterStream=void 0;const r=t("stream"),c=t("./formatter");class l extends r.Transform{constructor(f){super({writableObjectMode:f.objectMode}),this.hasWrittenBOM=!1,this.formatterOptions=f,this.rowFormatter=new c.RowFormatter(f),this.hasWrittenBOM=!f.writeBOM}transform(f){return this.rowFormatter.rowTransform=f,this}_transform(f,h,p){let g=!1;try{this.hasWrittenBOM||(this.push(this.formatterOptions.BOM),this.hasWrittenBOM=!0),this.rowFormatter.format(f,(v,x)=>v?(g=!0,p(v)):(x&&x.forEach(y=>{this.push(o.from(y,"utf8"))}),g=!0,p()))}catch(v){if(g)throw v;p(v)}}_flush(f){this.rowFormatter.finish((h,p)=>h?f(h):(p&&p.forEach(g=>{this.push(o.from(g,"utf8"))}),f()))}}u.CsvFormatterStream=l}).call(this)}).call(this,t("buffer").Buffer)},{"./formatter":150,buffer:220,stream:505}],147:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.FormatterOptions=void 0,u.FormatterOptions=class{constructor(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var r;this.objectMode=!0,this.delimiter=",",this.rowDelimiter=`
`,this.quote='"',this.escape=this.quote,this.quoteColumns=!1,this.quoteHeaders=this.quoteColumns,this.headers=null,this.includeEndRowDelimiter=!1,this.writeBOM=!1,this.BOM="\uFEFF",this.alwaysWriteHeaders=!1,Object.assign(this,o||{}),o?.quoteHeaders===void 0&&(this.quoteHeaders=this.quoteColumns),o?.quote===!0?this.quote='"':o?.quote===!1&&(this.quote=""),typeof o?.escape!="string"&&(this.escape=this.quote),this.shouldWriteHeaders=!!this.headers&&((r=o.writeHeaders)===null||r===void 0||r),this.headers=Array.isArray(this.headers)?this.headers:null,this.escapedQuote=`${this.escape}${this.quote}`}}},{}],148:[function(t,s,u){var o=function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(u,"__esModule",{value:!0}),u.FieldFormatter=void 0;const r=o(t("lodash.isboolean")),c=o(t("lodash.isnil")),l=o(t("lodash.escaperegexp"));u.FieldFormatter=class{constructor(n){this._headers=null,this.formatterOptions=n,n.headers!==null&&(this.headers=n.headers),this.REPLACE_REGEXP=new RegExp(n.quote,"g");const f=`[${n.delimiter}${l.default(n.rowDelimiter)}|\r|
]`;this.ESCAPE_REGEXP=new RegExp(f)}set headers(n){this._headers=n}shouldQuote(n,f){const h=f?this.formatterOptions.quoteHeaders:this.formatterOptions.quoteColumns;return r.default(h)?h:Array.isArray(h)?h[n]:this._headers!==null&&h[this._headers[n]]}format(n,f,h){const p=(""+(c.default(n)?"":n)).replace(/\0/g,""),{formatterOptions:g}=this;return g.quote!==""&&p.indexOf(g.quote)!==-1?this.quoteField(p.replace(this.REPLACE_REGEXP,g.escapedQuote)):p.search(this.ESCAPE_REGEXP)!==-1||this.shouldQuote(f,h)?this.quoteField(p):p}quoteField(n){const{quote:f}=this.formatterOptions;return`${f}${n}${f}`}}},{"lodash.escaperegexp":442,"lodash.isboolean":444,"lodash.isnil":447}],149:[function(t,s,u){var o=function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(u,"__esModule",{value:!0}),u.RowFormatter=void 0;const r=o(t("lodash.isfunction")),c=o(t("lodash.isequal")),l=t("./FieldFormatter"),n=t("../types");class f{constructor(p){this.rowCount=0,this.formatterOptions=p,this.fieldFormatter=new l.FieldFormatter(p),this.headers=p.headers,this.shouldWriteHeaders=p.shouldWriteHeaders,this.hasWrittenHeaders=!1,this.headers!==null&&(this.fieldFormatter.headers=this.headers),p.transform&&(this.rowTransform=p.transform)}static isRowHashArray(p){return!!Array.isArray(p)&&Array.isArray(p[0])&&p[0].length===2}static isRowArray(p){return Array.isArray(p)&&!this.isRowHashArray(p)}static gatherHeaders(p){return f.isRowHashArray(p)?p.map(g=>g[0]):Array.isArray(p)?p:Object.keys(p)}static createTransform(p){return n.isSyncTransform(p)?(g,v)=>{let x=null;try{x=p(g)}catch(y){return v(y)}return v(null,x)}:(g,v)=>{p(g,v)}}set rowTransform(p){if(!r.default(p))throw new TypeError("The transform should be a function");this._rowTransform=f.createTransform(p)}format(p,g){this.callTransformer(p,(v,x)=>{if(v)return g(v);if(!p)return g(null);const y=[];if(x){const{shouldFormatColumns:w,headers:S}=this.checkHeaders(x);if(this.shouldWriteHeaders&&S&&!this.hasWrittenHeaders&&(y.push(this.formatColumns(S,!0)),this.hasWrittenHeaders=!0),w){const E=this.gatherColumns(x);y.push(this.formatColumns(E,!1))}}return g(null,y)})}finish(p){const g=[];if(this.formatterOptions.alwaysWriteHeaders&&this.rowCount===0){if(!this.headers)return p(new Error("`alwaysWriteHeaders` option is set to true but `headers` option not provided."));g.push(this.formatColumns(this.headers,!0))}return this.formatterOptions.includeEndRowDelimiter&&g.push(this.formatterOptions.rowDelimiter),p(null,g)}checkHeaders(p){if(this.headers)return{shouldFormatColumns:!0,headers:this.headers};const g=f.gatherHeaders(p);return this.headers=g,this.fieldFormatter.headers=g,this.shouldWriteHeaders?{shouldFormatColumns:!c.default(g,p),headers:g}:{shouldFormatColumns:!0,headers:null}}gatherColumns(p){if(this.headers===null)throw new Error("Headers is currently null");return Array.isArray(p)?f.isRowHashArray(p)?this.headers.map((g,v)=>{const x=p[v];return x?x[1]:""}):f.isRowArray(p)&&!this.shouldWriteHeaders?p:this.headers.map((g,v)=>p[v]):this.headers.map(g=>p[g])}callTransformer(p,g){return this._rowTransform?this._rowTransform(p,g):g(null,p)}formatColumns(p,g){const v=p.map((y,w)=>this.fieldFormatter.format(y,w,g)).join(this.formatterOptions.delimiter),{rowCount:x}=this;return this.rowCount+=1,x?[this.formatterOptions.rowDelimiter,v].join(""):v}}u.RowFormatter=f},{"../types":152,"./FieldFormatter":148,"lodash.isequal":445,"lodash.isfunction":446}],150:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.FieldFormatter=u.RowFormatter=void 0;var o=t("./RowFormatter");Object.defineProperty(u,"RowFormatter",{enumerable:!0,get:function(){return o.RowFormatter}});var r=t("./FieldFormatter");Object.defineProperty(u,"FieldFormatter",{enumerable:!0,get:function(){return r.FieldFormatter}})},{"./FieldFormatter":148,"./RowFormatter":149}],151:[function(t,s,u){(function(o){(function(){var r=Object.create?function(w,S,E,I){I===void 0&&(I=E),Object.defineProperty(w,I,{enumerable:!0,get:function(){return S[E]}})}:function(w,S,E,I){I===void 0&&(I=E),w[I]=S[E]},c=Object.create?function(w,S){Object.defineProperty(w,"default",{enumerable:!0,value:S})}:function(w,S){w.default=S},l=function(w){if(w&&w.__esModule)return w;var S={};if(w!=null)for(var E in w)E!=="default"&&Object.prototype.hasOwnProperty.call(w,E)&&r(S,w,E);return c(S,w),S},n=function(w,S){for(var E in w)E==="default"||Object.prototype.hasOwnProperty.call(S,E)||r(S,w,E)};Object.defineProperty(u,"__esModule",{value:!0}),u.writeToPath=u.writeToString=u.writeToBuffer=u.writeToStream=u.write=u.format=u.FormatterOptions=u.CsvFormatterStream=void 0;const f=t("util"),h=t("stream"),p=l(t("fs")),g=t("./FormatterOptions"),v=t("./CsvFormatterStream");n(t("./types"),u);var x=t("./CsvFormatterStream");Object.defineProperty(u,"CsvFormatterStream",{enumerable:!0,get:function(){return x.CsvFormatterStream}});var y=t("./FormatterOptions");Object.defineProperty(u,"FormatterOptions",{enumerable:!0,get:function(){return y.FormatterOptions}}),u.format=w=>new v.CsvFormatterStream(new g.FormatterOptions(w)),u.write=(w,S)=>{const E=u.format(S),I=f.promisify((D,Z)=>{E.write(D,void 0,Z)});return w.reduce((D,Z)=>D.then(()=>I(Z)),Promise.resolve()).then(()=>E.end()).catch(D=>{E.emit("error",D)}),E},u.writeToStream=(w,S,E)=>u.write(S,E).pipe(w),u.writeToBuffer=function(w){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const E=[],I=new h.Writable({write(D,Z,K){E.push(D),K()}});return new Promise((D,Z)=>{I.on("error",Z).on("finish",()=>D(o.concat(E))),u.write(w,S).pipe(I)})},u.writeToString=(w,S)=>u.writeToBuffer(w,S).then(E=>E.toString()),u.writeToPath=(w,S,E)=>{const I=p.createWriteStream(w,{encoding:"utf8"});return u.write(S,E).pipe(I)}}).call(this)}).call(this,t("buffer").Buffer)},{"./CsvFormatterStream":146,"./FormatterOptions":147,"./types":152,buffer:220,fs:216,stream:505,util:527}],152:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.isSyncTransform=void 0,u.isSyncTransform=o=>o.length===1},{}],153:[function(t,s,u){(function(o){(function(){Object.defineProperty(u,"__esModule",{value:!0}),u.CsvParserStream=void 0;const r=t("string_decoder"),c=t("stream"),l=t("./transforms"),n=t("./parser");class f extends c.Transform{constructor(p){super({objectMode:p.objectMode}),this.lines="",this.rowCount=0,this.parsedRowCount=0,this.parsedLineCount=0,this.endEmitted=!1,this.headersEmitted=!1,this.parserOptions=p,this.parser=new n.Parser(p),this.headerTransformer=new l.HeaderTransformer(p),this.decoder=new r.StringDecoder(p.encoding),this.rowTransformerValidator=new l.RowTransformerValidator}get hasHitRowLimit(){return this.parserOptions.limitRows&&this.rowCount>=this.parserOptions.maxRows}get shouldEmitRows(){return this.parsedRowCount>this.parserOptions.skipRows}get shouldSkipLine(){return this.parsedLineCount<=this.parserOptions.skipLines}transform(p){return this.rowTransformerValidator.rowTransform=p,this}validate(p){return this.rowTransformerValidator.rowValidator=p,this}emit(p){if(p==="end")return this.endEmitted||(this.endEmitted=!0,super.emit("end",this.rowCount)),!1;for(var g=arguments.length,v=new Array(g>1?g-1:0),x=1;x<g;x++)v[x-1]=arguments[x];return super.emit(p,...v)}_transform(p,g,v){if(this.hasHitRowLimit)return v();const x=f.wrapDoneCallback(v);try{const{lines:y}=this,w=y+this.decoder.write(p),S=this.parse(w,!0);return this.processRows(S,x)}catch(y){return x(y)}}_flush(p){const g=f.wrapDoneCallback(p);if(this.hasHitRowLimit)return g();try{const v=this.lines+this.decoder.end(),x=this.parse(v,!1);return this.processRows(x,g)}catch(v){return g(v)}}parse(p,g){if(!p)return[];const{line:v,rows:x}=this.parser.parse(p,g);return this.lines=v,x}processRows(p,g){const v=p.length,x=y=>{const w=I=>I?g(I):y%100!=0?x(y+1):void o(()=>x(y+1));if(this.checkAndEmitHeaders(),y>=v||this.hasHitRowLimit)return g();if(this.parsedLineCount+=1,this.shouldSkipLine)return w();const S=p[y];this.rowCount+=1,this.parsedRowCount+=1;const E=this.rowCount;return this.transformRow(S,(I,D)=>{if(I)return this.rowCount-=1,w(I);if(!D)return w(new Error("expected transform result"));if(D.isValid){if(D.row)return this.pushRow(D.row,w)}else this.emit("data-invalid",D.row,E,D.reason);return w()})};x(0)}transformRow(p,g){try{this.headerTransformer.transform(p,(v,x)=>v?g(v):x?x.isValid?x.row?this.shouldEmitRows?this.rowTransformerValidator.transformAndValidate(x.row,g):this.skipRow(g):(this.rowCount-=1,this.parsedRowCount-=1,g(null,{row:null,isValid:!0})):this.shouldEmitRows?g(null,{isValid:!1,row:p}):this.skipRow(g):g(new Error("Expected result from header transform")))}catch(v){g(v)}}checkAndEmitHeaders(){!this.headersEmitted&&this.headerTransformer.headers&&(this.headersEmitted=!0,this.emit("headers",this.headerTransformer.headers))}skipRow(p){return this.rowCount-=1,p(null,{row:null,isValid:!0})}pushRow(p,g){try{this.parserOptions.objectMode?this.push(p):this.push(JSON.stringify(p)),g()}catch(v){g(v)}}static wrapDoneCallback(p){let g=!1;return function(v){if(v){if(g)throw v;return g=!0,void p(v)}for(var x=arguments.length,y=new Array(x>1?x-1:0),w=1;w<x;w++)y[w-1]=arguments[w];p(...y)}}}u.CsvParserStream=f}).call(this)}).call(this,t("timers").setImmediate)},{"./parser":165,"./transforms":168,stream:505,string_decoder:218,timers:523}],154:[function(t,s,u){var o=function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(u,"__esModule",{value:!0}),u.ParserOptions=void 0;const r=o(t("lodash.escaperegexp")),c=o(t("lodash.isnil"));u.ParserOptions=class{constructor(l){var n;if(this.objectMode=!0,this.delimiter=",",this.ignoreEmpty=!1,this.quote='"',this.escape=null,this.escapeChar=this.quote,this.comment=null,this.supportsComments=!1,this.ltrim=!1,this.rtrim=!1,this.trim=!1,this.headers=null,this.renameHeaders=!1,this.strictColumnHandling=!1,this.discardUnmappedColumns=!1,this.carriageReturn="\r",this.encoding="utf8",this.limitRows=!1,this.maxRows=0,this.skipLines=0,this.skipRows=0,Object.assign(this,l||{}),this.delimiter.length>1)throw new Error("delimiter option must be one character long");this.escapedDelimiter=r.default(this.delimiter),this.escapeChar=(n=this.escape)!==null&&n!==void 0?n:this.quote,this.supportsComments=!c.default(this.comment),this.NEXT_TOKEN_REGEXP=new RegExp(`([^\\s]|\\r\\n|\\n|\\r|${this.escapedDelimiter})`),this.maxRows>0&&(this.limitRows=!0)}}},{"lodash.escaperegexp":442,"lodash.isnil":447}],155:[function(t,s,u){var o=Object.create?function(x,y,w,S){S===void 0&&(S=w),Object.defineProperty(x,S,{enumerable:!0,get:function(){return y[w]}})}:function(x,y,w,S){S===void 0&&(S=w),x[S]=y[w]},r=Object.create?function(x,y){Object.defineProperty(x,"default",{enumerable:!0,value:y})}:function(x,y){x.default=y},c=function(x){if(x&&x.__esModule)return x;var y={};if(x!=null)for(var w in x)w!=="default"&&Object.prototype.hasOwnProperty.call(x,w)&&o(y,x,w);return r(y,x),y},l=function(x,y){for(var w in x)w==="default"||Object.prototype.hasOwnProperty.call(y,w)||o(y,x,w)};Object.defineProperty(u,"__esModule",{value:!0}),u.parseString=u.parseFile=u.parseStream=u.parse=u.ParserOptions=u.CsvParserStream=void 0;const n=c(t("fs")),f=t("stream"),h=t("./ParserOptions"),p=t("./CsvParserStream");l(t("./types"),u);var g=t("./CsvParserStream");Object.defineProperty(u,"CsvParserStream",{enumerable:!0,get:function(){return g.CsvParserStream}});var v=t("./ParserOptions");Object.defineProperty(u,"ParserOptions",{enumerable:!0,get:function(){return v.ParserOptions}}),u.parse=x=>new p.CsvParserStream(new h.ParserOptions(x)),u.parseStream=(x,y)=>x.pipe(new p.CsvParserStream(new h.ParserOptions(y))),u.parseFile=function(x){let y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n.createReadStream(x).pipe(new p.CsvParserStream(new h.ParserOptions(y)))},u.parseString=(x,y)=>{const w=new f.Readable;return w.push(x),w.push(null),w.pipe(new p.CsvParserStream(new h.ParserOptions(y)))}},{"./CsvParserStream":153,"./ParserOptions":154,"./types":169,fs:216,stream:505}],156:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.Parser=void 0;const o=t("./Scanner"),r=t("./RowParser"),c=t("./Token");class l{constructor(f){this.parserOptions=f,this.rowParser=new r.RowParser(this.parserOptions)}static removeBOM(f){return f&&f.charCodeAt(0)===65279?f.slice(1):f}parse(f,h){const p=new o.Scanner({line:l.removeBOM(f),parserOptions:this.parserOptions,hasMoreData:h});return this.parserOptions.supportsComments?this.parseWithComments(p):this.parseWithoutComments(p)}parseWithoutComments(f){const h=[];let p=!0;for(;p;)p=this.parseRow(f,h);return{line:f.line,rows:h}}parseWithComments(f){const{parserOptions:h}=this,p=[];for(let g=f.nextCharacterToken;g!==null;g=f.nextCharacterToken)if(c.Token.isTokenComment(g,h)){if(f.advancePastLine()===null)return{line:f.lineFromCursor,rows:p};if(!f.hasMoreCharacters)return{line:f.lineFromCursor,rows:p};f.truncateToCursor()}else if(!this.parseRow(f,p))break;return{line:f.line,rows:p}}parseRow(f,h){if(!f.nextNonSpaceToken)return!1;const p=this.rowParser.parse(f);return p!==null&&(this.parserOptions.ignoreEmpty&&r.RowParser.isEmptyRow(p)||h.push(p),!0)}}u.Parser=l},{"./RowParser":157,"./Scanner":158,"./Token":159}],157:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.RowParser=void 0;const o=t("./column"),r=t("./Token");u.RowParser=class{constructor(c){this.parserOptions=c,this.columnParser=new o.ColumnParser(c)}static isEmptyRow(c){return c.join("").replace(/\s+/g,"")===""}parse(c){const{parserOptions:l}=this,{hasMoreData:n}=c,f=c,h=[];let p=this.getStartToken(f,h);for(;p;){if(r.Token.isTokenRowDelimiter(p))return f.advancePastToken(p),!f.hasMoreCharacters&&r.Token.isTokenCarriageReturn(p,l)&&n?null:(f.truncateToCursor(),h);if(!this.shouldSkipColumnParse(f,p,h)){const g=this.columnParser.parse(f);if(g===null)return null;h.push(g)}p=f.nextNonSpaceToken}return n?null:(f.truncateToCursor(),h)}getStartToken(c,l){const n=c.nextNonSpaceToken;return n!==null&&r.Token.isTokenDelimiter(n,this.parserOptions)?(l.push(""),c.nextNonSpaceToken):n}shouldSkipColumnParse(c,l,n){const{parserOptions:f}=this;if(r.Token.isTokenDelimiter(l,f)){c.advancePastToken(l);const h=c.nextCharacterToken;if(!c.hasMoreCharacters||h!==null&&r.Token.isTokenRowDelimiter(h)||h!==null&&r.Token.isTokenDelimiter(h,f))return n.push(""),!0}return!1}}},{"./Token":159,"./column":164}],158:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.Scanner=void 0;const o=t("./Token"),r=/((?:\r\n)|\n|\r)/;u.Scanner=class{constructor(c){this.cursor=0,this.line=c.line,this.lineLength=this.line.length,this.parserOptions=c.parserOptions,this.hasMoreData=c.hasMoreData,this.cursor=c.cursor||0}get hasMoreCharacters(){return this.lineLength>this.cursor}get nextNonSpaceToken(){const{lineFromCursor:c}=this,l=this.parserOptions.NEXT_TOKEN_REGEXP;if(c.search(l)===-1)return null;const n=l.exec(c);if(n==null)return null;const f=n[1],h=this.cursor+(n.index||0);return new o.Token({token:f,startCursor:h,endCursor:h+f.length-1})}get nextCharacterToken(){const{cursor:c,lineLength:l}=this;return l<=c?null:new o.Token({token:this.line[c],startCursor:c,endCursor:c})}get lineFromCursor(){return this.line.substr(this.cursor)}advancePastLine(){const c=r.exec(this.lineFromCursor);return c?(this.cursor+=(c.index||0)+c[0].length,this):this.hasMoreData?null:(this.cursor=this.lineLength,this)}advanceTo(c){return this.cursor=c,this}advanceToToken(c){return this.cursor=c.startCursor,this}advancePastToken(c){return this.cursor=c.endCursor+1,this}truncateToCursor(){return this.line=this.lineFromCursor,this.lineLength=this.line.length,this.cursor=0,this}}},{"./Token":159}],159:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.Token=void 0,u.Token=class{constructor(o){this.token=o.token,this.startCursor=o.startCursor,this.endCursor=o.endCursor}static isTokenRowDelimiter(o){const r=o.token;return r==="\r"||r===`
`||r===`\r
`}static isTokenCarriageReturn(o,r){return o.token===r.carriageReturn}static isTokenComment(o,r){return r.supportsComments&&!!o&&o.token===r.comment}static isTokenEscapeCharacter(o,r){return o.token===r.escapeChar}static isTokenQuote(o,r){return o.token===r.quote}static isTokenDelimiter(o,r){return o.token===r.delimiter}}},{}],160:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.ColumnFormatter=void 0,u.ColumnFormatter=class{constructor(o){o.trim?this.format=r=>r.trim():o.ltrim?this.format=r=>r.trimLeft():o.rtrim?this.format=r=>r.trimRight():this.format=r=>r}}},{}],161:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.ColumnParser=void 0;const o=t("./NonQuotedColumnParser"),r=t("./QuotedColumnParser"),c=t("../Token");u.ColumnParser=class{constructor(l){this.parserOptions=l,this.quotedColumnParser=new r.QuotedColumnParser(l),this.nonQuotedColumnParser=new o.NonQuotedColumnParser(l)}parse(l){const{nextNonSpaceToken:n}=l;return n!==null&&c.Token.isTokenQuote(n,this.parserOptions)?(l.advanceToToken(n),this.quotedColumnParser.parse(l)):this.nonQuotedColumnParser.parse(l)}}},{"../Token":159,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],162:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.NonQuotedColumnParser=void 0;const o=t("./ColumnFormatter"),r=t("../Token");u.NonQuotedColumnParser=class{constructor(c){this.parserOptions=c,this.columnFormatter=new o.ColumnFormatter(c)}parse(c){if(!c.hasMoreCharacters)return null;const{parserOptions:l}=this,n=[];let f=c.nextCharacterToken;for(;f&&!r.Token.isTokenDelimiter(f,l)&&!r.Token.isTokenRowDelimiter(f);f=c.nextCharacterToken)n.push(f.token),c.advancePastToken(f);return this.columnFormatter.format(n.join(""))}}},{"../Token":159,"./ColumnFormatter":160}],163:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.QuotedColumnParser=void 0;const o=t("./ColumnFormatter"),r=t("../Token");u.QuotedColumnParser=class{constructor(c){this.parserOptions=c,this.columnFormatter=new o.ColumnFormatter(c)}parse(c){if(!c.hasMoreCharacters)return null;const l=c.cursor,{foundClosingQuote:n,col:f}=this.gatherDataBetweenQuotes(c);if(!n){if(c.advanceTo(l),!c.hasMoreData)throw new Error(`Parse Error: missing closing: '${this.parserOptions.quote||""}' in line: at '${c.lineFromCursor.replace(/[\r\n]/g,"\\n'")}'`);return null}return this.checkForMalformedColumn(c),f}gatherDataBetweenQuotes(c){const{parserOptions:l}=this;let n=!1,f=!1;const h=[];let p=c.nextCharacterToken;for(;!f&&p!==null;p=c.nextCharacterToken){const g=r.Token.isTokenQuote(p,l);if(!n&&g)n=!0;else if(n)if(r.Token.isTokenEscapeCharacter(p,l)){c.advancePastToken(p);const v=c.nextCharacterToken;v!==null&&(r.Token.isTokenQuote(v,l)||r.Token.isTokenEscapeCharacter(v,l))?(h.push(v.token),p=v):g?f=!0:h.push(p.token)}else g?f=!0:h.push(p.token);c.advancePastToken(p)}return{col:this.columnFormatter.format(h.join("")),foundClosingQuote:f}}checkForMalformedColumn(c){const{parserOptions:l}=this,{nextNonSpaceToken:n}=c;if(n){const f=r.Token.isTokenDelimiter(n,l),h=r.Token.isTokenRowDelimiter(n);if(!f&&!h){const p=c.lineFromCursor.substr(0,10).replace(/[\r\n]/g,"\\n'");throw new Error(`Parse Error: expected: '${l.escapedDelimiter}' OR new line got: '${n.token}'. at '${p}`)}c.advanceToToken(n)}else c.hasMoreData||c.advancePastLine()}}},{"../Token":159,"./ColumnFormatter":160}],164:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.ColumnFormatter=u.QuotedColumnParser=u.NonQuotedColumnParser=u.ColumnParser=void 0;var o=t("./ColumnParser");Object.defineProperty(u,"ColumnParser",{enumerable:!0,get:function(){return o.ColumnParser}});var r=t("./NonQuotedColumnParser");Object.defineProperty(u,"NonQuotedColumnParser",{enumerable:!0,get:function(){return r.NonQuotedColumnParser}});var c=t("./QuotedColumnParser");Object.defineProperty(u,"QuotedColumnParser",{enumerable:!0,get:function(){return c.QuotedColumnParser}});var l=t("./ColumnFormatter");Object.defineProperty(u,"ColumnFormatter",{enumerable:!0,get:function(){return l.ColumnFormatter}})},{"./ColumnFormatter":160,"./ColumnParser":161,"./NonQuotedColumnParser":162,"./QuotedColumnParser":163}],165:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.QuotedColumnParser=u.NonQuotedColumnParser=u.ColumnParser=u.Token=u.Scanner=u.RowParser=u.Parser=void 0;var o=t("./Parser");Object.defineProperty(u,"Parser",{enumerable:!0,get:function(){return o.Parser}});var r=t("./RowParser");Object.defineProperty(u,"RowParser",{enumerable:!0,get:function(){return r.RowParser}});var c=t("./Scanner");Object.defineProperty(u,"Scanner",{enumerable:!0,get:function(){return c.Scanner}});var l=t("./Token");Object.defineProperty(u,"Token",{enumerable:!0,get:function(){return l.Token}});var n=t("./column");Object.defineProperty(u,"ColumnParser",{enumerable:!0,get:function(){return n.ColumnParser}}),Object.defineProperty(u,"NonQuotedColumnParser",{enumerable:!0,get:function(){return n.NonQuotedColumnParser}}),Object.defineProperty(u,"QuotedColumnParser",{enumerable:!0,get:function(){return n.QuotedColumnParser}})},{"./Parser":156,"./RowParser":157,"./Scanner":158,"./Token":159,"./column":164}],166:[function(t,s,u){var o=function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(u,"__esModule",{value:!0}),u.HeaderTransformer=void 0;const r=o(t("lodash.isundefined")),c=o(t("lodash.isfunction")),l=o(t("lodash.uniq")),n=o(t("lodash.groupby"));u.HeaderTransformer=class{constructor(f){this.headers=null,this.receivedHeaders=!1,this.shouldUseFirstRow=!1,this.processedFirstRow=!1,this.headersLength=0,this.parserOptions=f,f.headers===!0?this.shouldUseFirstRow=!0:Array.isArray(f.headers)?this.setHeaders(f.headers):c.default(f.headers)&&(this.headersTransform=f.headers)}transform(f,h){return this.shouldMapRow(f)?h(null,this.processRow(f)):h(null,{row:null,isValid:!0})}shouldMapRow(f){const{parserOptions:h}=this;if(!this.headersTransform&&h.renameHeaders&&!this.processedFirstRow){if(!this.receivedHeaders)throw new Error("Error renaming headers: new headers must be provided in an array");return this.processedFirstRow=!0,!1}if(!this.receivedHeaders&&Array.isArray(f)){if(this.headersTransform)this.setHeaders(this.headersTransform(f));else{if(!this.shouldUseFirstRow)return!0;this.setHeaders(f)}return!1}return!0}processRow(f){if(!this.headers)return{row:f,isValid:!0};const{parserOptions:h}=this;if(!h.discardUnmappedColumns&&f.length>this.headersLength){if(!h.strictColumnHandling)throw new Error(`Unexpected Error: column header mismatch expected: ${this.headersLength} columns got: ${f.length}`);return{row:f,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${f.length}`}}return h.strictColumnHandling&&f.length<this.headersLength?{row:f,isValid:!1,reason:`Column header mismatch expected: ${this.headersLength} columns got: ${f.length}`}:{row:this.mapHeaders(f),isValid:!0}}mapHeaders(f){const h={},{headers:p,headersLength:g}=this;for(let v=0;v<g;v+=1){const x=p[v];if(!r.default(x)){const y=f[v];r.default(y)?h[x]="":h[x]=y}}return h}setHeaders(f){var h;const p=f.filter(g=>!!g);if(l.default(p).length!==p.length){const g=n.default(p),v=Object.keys(g).filter(x=>g[x].length>1);throw new Error("Duplicate headers found "+JSON.stringify(v))}this.headers=f,this.receivedHeaders=!0,this.headersLength=((h=this.headers)===null||h===void 0?void 0:h.length)||0}}},{"lodash.groupby":443,"lodash.isfunction":446,"lodash.isundefined":448,"lodash.uniq":449}],167:[function(t,s,u){var o=function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(u,"__esModule",{value:!0}),u.RowTransformerValidator=void 0;const r=o(t("lodash.isfunction")),c=t("../types");class l{constructor(){this._rowTransform=null,this._rowValidator=null}static createTransform(f){return c.isSyncTransform(f)?(h,p)=>{let g=null;try{g=f(h)}catch(v){return p(v)}return p(null,g)}:f}static createValidator(f){return c.isSyncValidate(f)?(h,p)=>{p(null,{row:h,isValid:f(h)})}:(h,p)=>{f(h,(g,v,x)=>g?p(g):p(null,v?{row:h,isValid:v,reason:x}:{row:h,isValid:!1,reason:x}))}}set rowTransform(f){if(!r.default(f))throw new TypeError("The transform should be a function");this._rowTransform=l.createTransform(f)}set rowValidator(f){if(!r.default(f))throw new TypeError("The validate should be a function");this._rowValidator=l.createValidator(f)}transformAndValidate(f,h){return this.callTransformer(f,(p,g)=>p?h(p):g?this.callValidator(g,(v,x)=>v?h(v):x&&!x.isValid?h(null,{row:g,isValid:!1,reason:x.reason}):h(null,{row:g,isValid:!0})):h(null,{row:null,isValid:!0}))}callTransformer(f,h){return this._rowTransform?this._rowTransform(f,h):h(null,f)}callValidator(f,h){return this._rowValidator?this._rowValidator(f,h):h(null,{row:f,isValid:!0})}}u.RowTransformerValidator=l},{"../types":169,"lodash.isfunction":446}],168:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.HeaderTransformer=u.RowTransformerValidator=void 0;var o=t("./RowTransformerValidator");Object.defineProperty(u,"RowTransformerValidator",{enumerable:!0,get:function(){return o.RowTransformerValidator}});var r=t("./HeaderTransformer");Object.defineProperty(u,"HeaderTransformer",{enumerable:!0,get:function(){return r.HeaderTransformer}})},{"./HeaderTransformer":166,"./RowTransformerValidator":167}],169:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.isSyncValidate=u.isSyncTransform=void 0,u.isSyncTransform=o=>o.length===1,u.isSyncValidate=o=>o.length===1},{}],170:[function(t,s,u){const o=u;o.bignum=t("bn.js"),o.define=t("./asn1/api").define,o.base=t("./asn1/base"),o.constants=t("./asn1/constants"),o.decoders=t("./asn1/decoders"),o.encoders=t("./asn1/encoders")},{"./asn1/api":171,"./asn1/base":173,"./asn1/constants":177,"./asn1/decoders":179,"./asn1/encoders":182,"bn.js":184}],171:[function(t,s,u){const o=t("./encoders"),r=t("./decoders"),c=t("inherits");function l(n,f){this.name=n,this.body=f,this.decoders={},this.encoders={}}u.define=function(n,f){return new l(n,f)},l.prototype._createNamed=function(n){const f=this.name;function h(p){this._initNamed(p,f)}return c(h,n),h.prototype._initNamed=function(p,g){n.call(this,p,g)},new h(this)},l.prototype._getDecoder=function(n){return n=n||"der",this.decoders.hasOwnProperty(n)||(this.decoders[n]=this._createNamed(r[n])),this.decoders[n]},l.prototype.decode=function(n,f,h){return this._getDecoder(f).decode(n,h)},l.prototype._getEncoder=function(n){return n=n||"der",this.encoders.hasOwnProperty(n)||(this.encoders[n]=this._createNamed(o[n])),this.encoders[n]},l.prototype.encode=function(n,f,h){return this._getEncoder(f).encode(n,h)}},{"./decoders":179,"./encoders":182,inherits:440}],172:[function(t,s,u){const o=t("inherits"),r=t("../base/reporter").Reporter,c=t("safer-buffer").Buffer;function l(f,h){r.call(this,h),c.isBuffer(f)?(this.base=f,this.offset=0,this.length=f.length):this.error("Input not Buffer")}function n(f,h){if(Array.isArray(f))this.length=0,this.value=f.map((function(p){return n.isEncoderBuffer(p)||(p=new n(p,h)),this.length+=p.length,p}),this);else if(typeof f=="number"){if(!(0<=f&&f<=255))return h.error("non-byte EncoderBuffer value");this.value=f,this.length=1}else if(typeof f=="string")this.value=f,this.length=c.byteLength(f);else{if(!c.isBuffer(f))return h.error("Unsupported type: "+typeof f);this.value=f,this.length=f.length}}o(l,r),u.DecoderBuffer=l,l.isDecoderBuffer=function(f){return f instanceof l?!0:typeof f=="object"&&c.isBuffer(f.base)&&f.constructor.name==="DecoderBuffer"&&typeof f.offset=="number"&&typeof f.length=="number"&&typeof f.save=="function"&&typeof f.restore=="function"&&typeof f.isEmpty=="function"&&typeof f.readUInt8=="function"&&typeof f.skip=="function"&&typeof f.raw=="function"},l.prototype.save=function(){return{offset:this.offset,reporter:r.prototype.save.call(this)}},l.prototype.restore=function(f){const h=new l(this.base);return h.offset=f.offset,h.length=this.offset,this.offset=f.offset,r.prototype.restore.call(this,f.reporter),h},l.prototype.isEmpty=function(){return this.offset===this.length},l.prototype.readUInt8=function(f){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(f||"DecoderBuffer overrun")},l.prototype.skip=function(f,h){if(!(this.offset+f<=this.length))return this.error(h||"DecoderBuffer overrun");const p=new l(this.base);return p._reporterState=this._reporterState,p.offset=this.offset,p.length=this.offset+f,this.offset+=f,p},l.prototype.raw=function(f){return this.base.slice(f?f.offset:this.offset,this.length)},u.EncoderBuffer=n,n.isEncoderBuffer=function(f){return f instanceof n?!0:typeof f=="object"&&f.constructor.name==="EncoderBuffer"&&typeof f.length=="number"&&typeof f.join=="function"},n.prototype.join=function(f,h){return f||(f=c.alloc(this.length)),h||(h=0),this.length===0||(Array.isArray(this.value)?this.value.forEach((function(p){p.join(f,h),h+=p.length})):(typeof this.value=="number"?f[h]=this.value:typeof this.value=="string"?f.write(this.value,h):c.isBuffer(this.value)&&this.value.copy(f,h),h+=this.length)),f}},{"../base/reporter":175,inherits:440,"safer-buffer":495}],173:[function(t,s,u){const o=u;o.Reporter=t("./reporter").Reporter,o.DecoderBuffer=t("./buffer").DecoderBuffer,o.EncoderBuffer=t("./buffer").EncoderBuffer,o.Node=t("./node")},{"./buffer":172,"./node":174,"./reporter":175}],174:[function(t,s,u){const o=t("../base/reporter").Reporter,r=t("../base/buffer").EncoderBuffer,c=t("../base/buffer").DecoderBuffer,l=t("minimalistic-assert"),n=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],f=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(n);function h(g,v,x){const y={};this._baseState=y,y.name=x,y.enc=g,y.parent=v||null,y.children=null,y.tag=null,y.args=null,y.reverseArgs=null,y.choice=null,y.optional=!1,y.any=!1,y.obj=!1,y.use=null,y.useDecoder=null,y.key=null,y.default=null,y.explicit=null,y.implicit=null,y.contains=null,y.parent||(y.children=[],this._wrap())}s.exports=h;const p=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){const g=this._baseState,v={};p.forEach((function(y){v[y]=g[y]}));const x=new this.constructor(v.parent);return x._baseState=v,x},h.prototype._wrap=function(){const g=this._baseState;f.forEach((function(v){this[v]=function(){const x=new this.constructor(this);return g.children.push(x),x[v].apply(x,arguments)}}),this)},h.prototype._init=function(g){const v=this._baseState;l(v.parent===null),g.call(this),v.children=v.children.filter((function(x){return x._baseState.parent===this}),this),l.equal(v.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(g){const v=this._baseState,x=g.filter((function(y){return y instanceof this.constructor}),this);g=g.filter((function(y){return!(y instanceof this.constructor)}),this),x.length!==0&&(l(v.children===null),v.children=x,x.forEach((function(y){y._baseState.parent=this}),this)),g.length!==0&&(l(v.args===null),v.args=g,v.reverseArgs=g.map((function(y){if(typeof y!="object"||y.constructor!==Object)return y;const w={};return Object.keys(y).forEach((function(S){S==(0|S)&&(S|=0);const E=y[S];w[E]=S})),w})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(g){h.prototype[g]=function(){const v=this._baseState;throw new Error(g+" not implemented for encoding: "+v.enc)}})),n.forEach((function(g){h.prototype[g]=function(){const v=this._baseState,x=Array.prototype.slice.call(arguments);return l(v.tag===null),v.tag=g,this._useArgs(x),this}})),h.prototype.use=function(g){l(g);const v=this._baseState;return l(v.use===null),v.use=g,this},h.prototype.optional=function(){return this._baseState.optional=!0,this},h.prototype.def=function(g){const v=this._baseState;return l(v.default===null),v.default=g,v.optional=!0,this},h.prototype.explicit=function(g){const v=this._baseState;return l(v.explicit===null&&v.implicit===null),v.explicit=g,this},h.prototype.implicit=function(g){const v=this._baseState;return l(v.explicit===null&&v.implicit===null),v.implicit=g,this},h.prototype.obj=function(){const g=this._baseState,v=Array.prototype.slice.call(arguments);return g.obj=!0,v.length!==0&&this._useArgs(v),this},h.prototype.key=function(g){const v=this._baseState;return l(v.key===null),v.key=g,this},h.prototype.any=function(){return this._baseState.any=!0,this},h.prototype.choice=function(g){const v=this._baseState;return l(v.choice===null),v.choice=g,this._useArgs(Object.keys(g).map((function(x){return g[x]}))),this},h.prototype.contains=function(g){const v=this._baseState;return l(v.use===null),v.contains=g,this},h.prototype._decode=function(g,v){const x=this._baseState;if(x.parent===null)return g.wrapResult(x.children[0]._decode(g,v));let y,w=x.default,S=!0,E=null;if(x.key!==null&&(E=g.enterKey(x.key)),x.optional){let I=null;if(x.explicit!==null?I=x.explicit:x.implicit!==null?I=x.implicit:x.tag!==null&&(I=x.tag),I!==null||x.any){if(S=this._peekTag(g,I,x.any),g.isError(S))return S}else{const D=g.save();try{x.choice===null?this._decodeGeneric(x.tag,g,v):this._decodeChoice(g,v),S=!0}catch{S=!1}g.restore(D)}}if(x.obj&&S&&(y=g.enterObject()),S){if(x.explicit!==null){const D=this._decodeTag(g,x.explicit);if(g.isError(D))return D;g=D}const I=g.offset;if(x.use===null&&x.choice===null){let D;x.any&&(D=g.save());const Z=this._decodeTag(g,x.implicit!==null?x.implicit:x.tag,x.any);if(g.isError(Z))return Z;x.any?w=g.raw(D):g=Z}if(v&&v.track&&x.tag!==null&&v.track(g.path(),I,g.length,"tagged"),v&&v.track&&x.tag!==null&&v.track(g.path(),g.offset,g.length,"content"),x.any||(w=x.choice===null?this._decodeGeneric(x.tag,g,v):this._decodeChoice(g,v)),g.isError(w))return w;if(x.any||x.choice!==null||x.children===null||x.children.forEach((function(D){D._decode(g,v)})),x.contains&&(x.tag==="octstr"||x.tag==="bitstr")){const D=new c(w);w=this._getUse(x.contains,g._reporterState.obj)._decode(D,v)}}return x.obj&&S&&(w=g.leaveObject(y)),x.key===null||w===null&&S!==!0?E!==null&&g.exitKey(E):g.leaveKey(E,x.key,w),w},h.prototype._decodeGeneric=function(g,v,x){const y=this._baseState;return g==="seq"||g==="set"?null:g==="seqof"||g==="setof"?this._decodeList(v,g,y.args[0],x):/str$/.test(g)?this._decodeStr(v,g,x):g==="objid"&&y.args?this._decodeObjid(v,y.args[0],y.args[1],x):g==="objid"?this._decodeObjid(v,null,null,x):g==="gentime"||g==="utctime"?this._decodeTime(v,g,x):g==="null_"?this._decodeNull(v,x):g==="bool"?this._decodeBool(v,x):g==="objDesc"?this._decodeStr(v,g,x):g==="int"||g==="enum"?this._decodeInt(v,y.args&&y.args[0],x):y.use!==null?this._getUse(y.use,v._reporterState.obj)._decode(v,x):v.error("unknown tag: "+g)},h.prototype._getUse=function(g,v){const x=this._baseState;return x.useDecoder=this._use(g,v),l(x.useDecoder._baseState.parent===null),x.useDecoder=x.useDecoder._baseState.children[0],x.implicit!==x.useDecoder._baseState.implicit&&(x.useDecoder=x.useDecoder.clone(),x.useDecoder._baseState.implicit=x.implicit),x.useDecoder},h.prototype._decodeChoice=function(g,v){const x=this._baseState;let y=null,w=!1;return Object.keys(x.choice).some((function(S){const E=g.save(),I=x.choice[S];try{const D=I._decode(g,v);if(g.isError(D))return!1;y={type:S,value:D},w=!0}catch{return g.restore(E),!1}return!0}),this),w?y:g.error("Choice not matched")},h.prototype._createEncoderBuffer=function(g){return new r(g,this.reporter)},h.prototype._encode=function(g,v,x){const y=this._baseState;if(y.default!==null&&y.default===g)return;const w=this._encodeValue(g,v,x);return w===void 0||this._skipDefault(w,v,x)?void 0:w},h.prototype._encodeValue=function(g,v,x){const y=this._baseState;if(y.parent===null)return y.children[0]._encode(g,v||new o);let w=null;if(this.reporter=v,y.optional&&g===void 0){if(y.default===null)return;g=y.default}let S=null,E=!1;if(y.any)w=this._createEncoderBuffer(g);else if(y.choice)w=this._encodeChoice(g,v);else if(y.contains)S=this._getUse(y.contains,x)._encode(g,v),E=!0;else if(y.children)S=y.children.map((function(I){if(I._baseState.tag==="null_")return I._encode(null,v,g);if(I._baseState.key===null)return v.error("Child should have a key");const D=v.enterKey(I._baseState.key);if(typeof g!="object")return v.error("Child expected, but input is not object");const Z=I._encode(g[I._baseState.key],v,g);return v.leaveKey(D),Z}),this).filter((function(I){return I})),S=this._createEncoderBuffer(S);else if(y.tag==="seqof"||y.tag==="setof"){if(!y.args||y.args.length!==1)return v.error("Too many args for : "+y.tag);if(!Array.isArray(g))return v.error("seqof/setof, but data is not Array");const I=this.clone();I._baseState.implicit=null,S=this._createEncoderBuffer(g.map((function(D){const Z=this._baseState;return this._getUse(Z.args[0],g)._encode(D,v)}),I))}else y.use!==null?w=this._getUse(y.use,x)._encode(g,v):(S=this._encodePrimitive(y.tag,g),E=!0);if(!y.any&&y.choice===null){const I=y.implicit!==null?y.implicit:y.tag,D=y.implicit===null?"universal":"context";I===null?y.use===null&&v.error("Tag could be omitted only for .use()"):y.use===null&&(w=this._encodeComposite(I,E,D,S))}return y.explicit!==null&&(w=this._encodeComposite(y.explicit,!1,"context",w)),w},h.prototype._encodeChoice=function(g,v){const x=this._baseState,y=x.choice[g.type];return y||l(!1,g.type+" not found in "+JSON.stringify(Object.keys(x.choice))),y._encode(g.value,v)},h.prototype._encodePrimitive=function(g,v){const x=this._baseState;if(/str$/.test(g))return this._encodeStr(v,g);if(g==="objid"&&x.args)return this._encodeObjid(v,x.reverseArgs[0],x.args[1]);if(g==="objid")return this._encodeObjid(v,null,null);if(g==="gentime"||g==="utctime")return this._encodeTime(v,g);if(g==="null_")return this._encodeNull();if(g==="int"||g==="enum")return this._encodeInt(v,x.args&&x.reverseArgs[0]);if(g==="bool")return this._encodeBool(v);if(g==="objDesc")return this._encodeStr(v,g);throw new Error("Unsupported tag: "+g)},h.prototype._isNumstr=function(g){return/^[0-9 ]*$/.test(g)},h.prototype._isPrintstr=function(g){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(g)}},{"../base/buffer":172,"../base/reporter":175,"minimalistic-assert":453}],175:[function(t,s,u){const o=t("inherits");function r(l){this._reporterState={obj:null,path:[],options:l||{},errors:[]}}function c(l,n){this.path=l,this.rethrow(n)}u.Reporter=r,r.prototype.isError=function(l){return l instanceof c},r.prototype.save=function(){const l=this._reporterState;return{obj:l.obj,pathLen:l.path.length}},r.prototype.restore=function(l){const n=this._reporterState;n.obj=l.obj,n.path=n.path.slice(0,l.pathLen)},r.prototype.enterKey=function(l){return this._reporterState.path.push(l)},r.prototype.exitKey=function(l){const n=this._reporterState;n.path=n.path.slice(0,l-1)},r.prototype.leaveKey=function(l,n,f){const h=this._reporterState;this.exitKey(l),h.obj!==null&&(h.obj[n]=f)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){const l=this._reporterState,n=l.obj;return l.obj={},n},r.prototype.leaveObject=function(l){const n=this._reporterState,f=n.obj;return n.obj=l,f},r.prototype.error=function(l){let n;const f=this._reporterState,h=l instanceof c;if(n=h?l:new c(f.path.map((function(p){return"["+JSON.stringify(p)+"]"})).join(""),l.message||l,l.stack),!f.options.partial)throw n;return h||f.errors.push(n),n},r.prototype.wrapResult=function(l){const n=this._reporterState;return n.options.partial?{result:this.isError(l)?null:l,errors:n.errors}:l},o(c,Error),c.prototype.rethrow=function(l){if(this.message=l+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,c),!this.stack)try{throw new Error(this.message)}catch(n){this.stack=n.stack}return this}},{inherits:440}],176:[function(t,s,u){function o(r){const c={};return Object.keys(r).forEach((function(l){(0|l)==l&&(l|=0);const n=r[l];c[n]=l})),c}u.tagClass={0:"universal",1:"application",2:"context",3:"private"},u.tagClassByName=o(u.tagClass),u.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},u.tagByName=o(u.tag)},{}],177:[function(t,s,u){const o=u;o._reverse=function(r){const c={};return Object.keys(r).forEach((function(l){(0|l)==l&&(l|=0);const n=r[l];c[n]=l})),c},o.der=t("./der")},{"./der":176}],178:[function(t,s,u){const o=t("inherits"),r=t("bn.js"),c=t("../base/buffer").DecoderBuffer,l=t("../base/node"),n=t("../constants/der");function f(v){this.enc="der",this.name=v.name,this.entity=v,this.tree=new h,this.tree._init(v.body)}function h(v){l.call(this,"der",v)}function p(v,x){let y=v.readUInt8(x);if(v.isError(y))return y;const w=n.tagClass[y>>6],S=(32&y)==0;if((31&y)==31){let E=y;for(y=0;(128&E)==128;){if(E=v.readUInt8(x),v.isError(E))return E;y<<=7,y|=127&E}}else y&=31;return{cls:w,primitive:S,tag:y,tagStr:n.tag[y]}}function g(v,x,y){let w=v.readUInt8(y);if(v.isError(w))return w;if(!x&&w===128)return null;if((128&w)==0)return w;const S=127&w;if(S>4)return v.error("length octect is too long");w=0;for(let E=0;E<S;E++){w<<=8;const I=v.readUInt8(y);if(v.isError(I))return I;w|=I}return w}s.exports=f,f.prototype.decode=function(v,x){return c.isDecoderBuffer(v)||(v=new c(v,x)),this.tree._decode(v,x)},o(h,l),h.prototype._peekTag=function(v,x,y){if(v.isEmpty())return!1;const w=v.save(),S=p(v,'Failed to peek tag: "'+x+'"');return v.isError(S)?S:(v.restore(w),S.tag===x||S.tagStr===x||S.tagStr+"of"===x||y)},h.prototype._decodeTag=function(v,x,y){const w=p(v,'Failed to decode tag of "'+x+'"');if(v.isError(w))return w;let S=g(v,w.primitive,'Failed to get length of "'+x+'"');if(v.isError(S))return S;if(!y&&w.tag!==x&&w.tagStr!==x&&w.tagStr+"of"!==x)return v.error('Failed to match tag: "'+x+'"');if(w.primitive||S!==null)return v.skip(S,'Failed to match body of: "'+x+'"');const E=v.save(),I=this._skipUntilEnd(v,'Failed to skip indefinite length body: "'+this.tag+'"');return v.isError(I)?I:(S=v.offset-E.offset,v.restore(E),v.skip(S,'Failed to match body of: "'+x+'"'))},h.prototype._skipUntilEnd=function(v,x){for(;;){const y=p(v,x);if(v.isError(y))return y;const w=g(v,y.primitive,x);if(v.isError(w))return w;let S;if(S=y.primitive||w!==null?v.skip(w):this._skipUntilEnd(v,x),v.isError(S))return S;if(y.tagStr==="end")break}},h.prototype._decodeList=function(v,x,y,w){const S=[];for(;!v.isEmpty();){const E=this._peekTag(v,"end");if(v.isError(E))return E;const I=y.decode(v,"der",w);if(v.isError(I)&&E)break;S.push(I)}return S},h.prototype._decodeStr=function(v,x){if(x==="bitstr"){const y=v.readUInt8();return v.isError(y)?y:{unused:y,data:v.raw()}}if(x==="bmpstr"){const y=v.raw();if(y.length%2==1)return v.error("Decoding of string type: bmpstr length mismatch");let w="";for(let S=0;S<y.length/2;S++)w+=String.fromCharCode(y.readUInt16BE(2*S));return w}if(x==="numstr"){const y=v.raw().toString("ascii");return this._isNumstr(y)?y:v.error("Decoding of string type: numstr unsupported characters")}if(x==="octstr"||x==="objDesc")return v.raw();if(x==="printstr"){const y=v.raw().toString("ascii");return this._isPrintstr(y)?y:v.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(x)?v.raw().toString():v.error("Decoding of string type: "+x+" unsupported")},h.prototype._decodeObjid=function(v,x,y){let w;const S=[];let E=0,I=0;for(;!v.isEmpty();)I=v.readUInt8(),E<<=7,E|=127&I,(128&I)==0&&(S.push(E),E=0);128&I&&S.push(E);const D=S[0]/40|0,Z=S[0]%40;if(w=y?S:[D,Z].concat(S.slice(1)),x){let K=x[w.join(" ")];K===void 0&&(K=x[w.join(".")]),K!==void 0&&(w=K)}return w},h.prototype._decodeTime=function(v,x){const y=v.raw().toString();let w,S,E,I,D,Z;if(x==="gentime")w=0|y.slice(0,4),S=0|y.slice(4,6),E=0|y.slice(6,8),I=0|y.slice(8,10),D=0|y.slice(10,12),Z=0|y.slice(12,14);else{if(x!=="utctime")return v.error("Decoding "+x+" time is not supported yet");w=0|y.slice(0,2),S=0|y.slice(2,4),E=0|y.slice(4,6),I=0|y.slice(6,8),D=0|y.slice(8,10),Z=0|y.slice(10,12),w=w<70?2e3+w:1900+w}return Date.UTC(w,S-1,E,I,D,Z,0)},h.prototype._decodeNull=function(){return null},h.prototype._decodeBool=function(v){const x=v.readUInt8();return v.isError(x)?x:x!==0},h.prototype._decodeInt=function(v,x){const y=v.raw();let w=new r(y);return x&&(w=x[w.toString(10)]||w),w},h.prototype._use=function(v,x){return typeof v=="function"&&(v=v(x)),v._getDecoder("der").tree}},{"../base/buffer":172,"../base/node":174,"../constants/der":176,"bn.js":184,inherits:440}],179:[function(t,s,u){const o=u;o.der=t("./der"),o.pem=t("./pem")},{"./der":178,"./pem":180}],180:[function(t,s,u){const o=t("inherits"),r=t("safer-buffer").Buffer,c=t("./der");function l(n){c.call(this,n),this.enc="pem"}o(l,c),s.exports=l,l.prototype.decode=function(n,f){const h=n.toString().split(/[\r\n]+/g),p=f.label.toUpperCase(),g=/^-----(BEGIN|END) ([^-]+)-----$/;let v=-1,x=-1;for(let S=0;S<h.length;S++){const E=h[S].match(g);if(E!==null&&E[2]===p){if(v!==-1){if(E[1]!=="END")break;x=S;break}if(E[1]!=="BEGIN")break;v=S}}if(v===-1||x===-1)throw new Error("PEM section not found for: "+p);const y=h.slice(v+1,x).join("");y.replace(/[^a-z0-9+/=]+/gi,"");const w=r.from(y,"base64");return c.prototype.decode.call(this,w,f)}},{"./der":178,inherits:440,"safer-buffer":495}],181:[function(t,s,u){const o=t("inherits"),r=t("safer-buffer").Buffer,c=t("../base/node"),l=t("../constants/der");function n(p){this.enc="der",this.name=p.name,this.entity=p,this.tree=new f,this.tree._init(p.body)}function f(p){c.call(this,"der",p)}function h(p){return p<10?"0"+p:p}s.exports=n,n.prototype.encode=function(p,g){return this.tree._encode(p,g).join()},o(f,c),f.prototype._encodeComposite=function(p,g,v,x){const y=(function(E,I,D,Z){let K;if(E==="seqof"?E="seq":E==="setof"&&(E="set"),l.tagByName.hasOwnProperty(E))K=l.tagByName[E];else{if(typeof E!="number"||(0|E)!==E)return Z.error("Unknown tag: "+E);K=E}return K>=31?Z.error("Multi-octet tag encoding unsupported"):(I||(K|=32),K|=l.tagClassByName[D||"universal"]<<6,K)})(p,g,v,this.reporter);if(x.length<128){const E=r.alloc(2);return E[0]=y,E[1]=x.length,this._createEncoderBuffer([E,x])}let w=1;for(let E=x.length;E>=256;E>>=8)w++;const S=r.alloc(2+w);S[0]=y,S[1]=128|w;for(let E=1+w,I=x.length;I>0;E--,I>>=8)S[E]=255&I;return this._createEncoderBuffer([S,x])},f.prototype._encodeStr=function(p,g){if(g==="bitstr")return this._createEncoderBuffer([0|p.unused,p.data]);if(g==="bmpstr"){const v=r.alloc(2*p.length);for(let x=0;x<p.length;x++)v.writeUInt16BE(p.charCodeAt(x),2*x);return this._createEncoderBuffer(v)}return g==="numstr"?this._isNumstr(p)?this._createEncoderBuffer(p):this.reporter.error("Encoding of string type: numstr supports only digits and space"):g==="printstr"?this._isPrintstr(p)?this._createEncoderBuffer(p):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(g)||g==="objDesc"?this._createEncoderBuffer(p):this.reporter.error("Encoding of string type: "+g+" unsupported")},f.prototype._encodeObjid=function(p,g,v){if(typeof p=="string"){if(!g)return this.reporter.error("string objid given, but no values map found");if(!g.hasOwnProperty(p))return this.reporter.error("objid not found in values map");p=g[p].split(/[\s.]+/g);for(let S=0;S<p.length;S++)p[S]|=0}else if(Array.isArray(p)){p=p.slice();for(let S=0;S<p.length;S++)p[S]|=0}if(!Array.isArray(p))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(p));if(!v){if(p[1]>=40)return this.reporter.error("Second objid identifier OOB");p.splice(0,2,40*p[0]+p[1])}let x=0;for(let S=0;S<p.length;S++){let E=p[S];for(x++;E>=128;E>>=7)x++}const y=r.alloc(x);let w=y.length-1;for(let S=p.length-1;S>=0;S--){let E=p[S];for(y[w--]=127&E;(E>>=7)>0;)y[w--]=128|127&E}return this._createEncoderBuffer(y)},f.prototype._encodeTime=function(p,g){let v;const x=new Date(p);return g==="gentime"?v=[h(x.getUTCFullYear()),h(x.getUTCMonth()+1),h(x.getUTCDate()),h(x.getUTCHours()),h(x.getUTCMinutes()),h(x.getUTCSeconds()),"Z"].join(""):g==="utctime"?v=[h(x.getUTCFullYear()%100),h(x.getUTCMonth()+1),h(x.getUTCDate()),h(x.getUTCHours()),h(x.getUTCMinutes()),h(x.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+g+" time is not supported yet"),this._encodeStr(v,"octstr")},f.prototype._encodeNull=function(){return this._createEncoderBuffer("")},f.prototype._encodeInt=function(p,g){if(typeof p=="string"){if(!g)return this.reporter.error("String int or enum given, but no values map");if(!g.hasOwnProperty(p))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(p));p=g[p]}if(typeof p!="number"&&!r.isBuffer(p)){const y=p.toArray();!p.sign&&128&y[0]&&y.unshift(0),p=r.from(y)}if(r.isBuffer(p)){let y=p.length;p.length===0&&y++;const w=r.alloc(y);return p.copy(w),p.length===0&&(w[0]=0),this._createEncoderBuffer(w)}if(p<128)return this._createEncoderBuffer(p);if(p<256)return this._createEncoderBuffer([0,p]);let v=1;for(let y=p;y>=256;y>>=8)v++;const x=new Array(v);for(let y=x.length-1;y>=0;y--)x[y]=255&p,p>>=8;return 128&x[0]&&x.unshift(0),this._createEncoderBuffer(r.from(x))},f.prototype._encodeBool=function(p){return this._createEncoderBuffer(p?255:0)},f.prototype._use=function(p,g){return typeof p=="function"&&(p=p(g)),p._getEncoder("der").tree},f.prototype._skipDefault=function(p,g,v){const x=this._baseState;let y;if(x.default===null)return!1;const w=p.join();if(x.defaultBuffer===void 0&&(x.defaultBuffer=this._encodeValue(x.default,g,v).join()),w.length!==x.defaultBuffer.length)return!1;for(y=0;y<w.length;y++)if(w[y]!==x.defaultBuffer[y])return!1;return!0}},{"../base/node":174,"../constants/der":176,inherits:440,"safer-buffer":495}],182:[function(t,s,u){const o=u;o.der=t("./der"),o.pem=t("./pem")},{"./der":181,"./pem":183}],183:[function(t,s,u){const o=t("inherits"),r=t("./der");function c(l){r.call(this,l),this.enc="pem"}o(c,r),s.exports=c,c.prototype.encode=function(l,n){const f=r.prototype.encode.call(this,l).toString("base64"),h=["-----BEGIN "+n.label+"-----"];for(let p=0;p<f.length;p+=64)h.push(f.slice(p,p+64));return h.push("-----END "+n.label+"-----"),h.join(`
`)}},{"./der":181,inherits:440}],184:[function(t,s,u){(function(o,r){function c(j,F){if(!j)throw new Error(F||"Assertion failed")}function l(j,F){j.super_=F;var R=function(){};R.prototype=F.prototype,j.prototype=new R,j.prototype.constructor=j}function n(j,F,R){if(n.isBN(j))return j;this.negative=0,this.words=null,this.length=0,this.red=null,j!==null&&(F!=="le"&&F!=="be"||(R=F,F=10),this._init(j||0,F||10,R||"be"))}var f;typeof o=="object"?o.exports=n:(void 0).BN=n,n.BN=n,n.wordSize=26;try{f=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function h(j,F){var R=j.charCodeAt(F);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function p(j,F,R){var T=h(j,R);return R-1>=F&&(T|=h(j,R-1)<<4),T}function g(j,F,R,T){for(var C=0,k=Math.min(j.length,R),M=F;M<k;M++){var O=j.charCodeAt(M)-48;C*=T,C+=O>=49?O-49+10:O>=17?O-17+10:O}return C}n.isBN=function(j){return j instanceof n||j!==null&&typeof j=="object"&&j.constructor.wordSize===n.wordSize&&Array.isArray(j.words)},n.max=function(j,F){return j.cmp(F)>0?j:F},n.min=function(j,F){return j.cmp(F)<0?j:F},n.prototype._init=function(j,F,R){if(typeof j=="number")return this._initNumber(j,F,R);if(typeof j=="object")return this._initArray(j,F,R);F==="hex"&&(F=16),c(F===(0|F)&&F>=2&&F<=36);var T=0;(j=j.toString().replace(/\s+/g,""))[0]==="-"&&(T++,this.negative=1),T<j.length&&(F===16?this._parseHex(j,T,R):(this._parseBase(j,F,T),R==="le"&&this._initArray(this.toArray(),F,R)))},n.prototype._initNumber=function(j,F,R){j<0&&(this.negative=1,j=-j),j<67108864?(this.words=[67108863&j],this.length=1):j<4503599627370496?(this.words=[67108863&j,j/67108864&67108863],this.length=2):(c(j<9007199254740992),this.words=[67108863&j,j/67108864&67108863,1],this.length=3),R==="le"&&this._initArray(this.toArray(),F,R)},n.prototype._initArray=function(j,F,R){if(c(typeof j.length=="number"),j.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(j.length/3),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var C,k,M=0;if(R==="be")for(T=j.length-1,C=0;T>=0;T-=3)k=j[T]|j[T-1]<<8|j[T-2]<<16,this.words[C]|=k<<M&67108863,this.words[C+1]=k>>>26-M&67108863,(M+=24)>=26&&(M-=26,C++);else if(R==="le")for(T=0,C=0;T<j.length;T+=3)k=j[T]|j[T+1]<<8|j[T+2]<<16,this.words[C]|=k<<M&67108863,this.words[C+1]=k>>>26-M&67108863,(M+=24)>=26&&(M-=26,C++);return this.strip()},n.prototype._parseHex=function(j,F,R){this.length=Math.ceil((j.length-F)/6),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var C,k=0,M=0;if(R==="be")for(T=j.length-1;T>=F;T-=2)C=p(j,F,T)<<k,this.words[M]|=67108863&C,k>=18?(k-=18,M+=1,this.words[M]|=C>>>26):k+=8;else for(T=(j.length-F)%2==0?F+1:F;T<j.length;T+=2)C=p(j,F,T)<<k,this.words[M]|=67108863&C,k>=18?(k-=18,M+=1,this.words[M]|=C>>>26):k+=8;this.strip()},n.prototype._parseBase=function(j,F,R){this.words=[0],this.length=1;for(var T=0,C=1;C<=67108863;C*=F)T++;T--,C=C/F|0;for(var k=j.length-R,M=k%T,O=Math.min(k,k-M)+R,P=0,H=R;H<O;H+=T)P=g(j,H,H+T,F),this.imuln(C),this.words[0]+P<67108864?this.words[0]+=P:this._iaddn(P);if(M!==0){var et=1;for(P=g(j,H,j.length,F),H=0;H<M;H++)et*=F;this.imuln(et),this.words[0]+P<67108864?this.words[0]+=P:this._iaddn(P)}this.strip()},n.prototype.copy=function(j){j.words=new Array(this.length);for(var F=0;F<this.length;F++)j.words[F]=this.words[F];j.length=this.length,j.negative=this.negative,j.red=this.red},n.prototype.clone=function(){var j=new n(null);return this.copy(j),j},n.prototype._expand=function(j){for(;this.length<j;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function w(j,F,R){R.negative=F.negative^j.negative;var T=j.length+F.length|0;R.length=T,T=T-1|0;var C=0|j.words[0],k=0|F.words[0],M=C*k,O=67108863&M,P=M/67108864|0;R.words[0]=O;for(var H=1;H<T;H++){for(var et=P>>>26,it=67108863&P,pt=Math.min(H,F.length-1),X=Math.max(0,H-j.length+1);X<=pt;X++){var ut=H-X|0;et+=(M=(C=0|j.words[ut])*(k=0|F.words[X])+it)/67108864|0,it=67108863&M}R.words[H]=0|it,P=0|et}return P!==0?R.words[H]=0|P:R.length--,R.strip()}n.prototype.toString=function(j,F){var R;if(F=0|F||1,(j=j||10)===16||j==="hex"){R="";for(var T=0,C=0,k=0;k<this.length;k++){var M=this.words[k],O=(16777215&(M<<T|C)).toString(16);R=(C=M>>>24-T&16777215)!==0||k!==this.length-1?v[6-O.length]+O+R:O+R,(T+=2)>=26&&(T-=26,k--)}for(C!==0&&(R=C.toString(16)+R);R.length%F!=0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}if(j===(0|j)&&j>=2&&j<=36){var P=x[j],H=y[j];R="";var et=this.clone();for(et.negative=0;!et.isZero();){var it=et.modn(H).toString(j);R=(et=et.idivn(H)).isZero()?it+R:v[P-it.length]+it+R}for(this.isZero()&&(R="0"+R);R.length%F!=0;)R="0"+R;return this.negative!==0&&(R="-"+R),R}c(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var j=this.words[0];return this.length===2?j+=67108864*this.words[1]:this.length===3&&this.words[2]===1?j+=4503599627370496+67108864*this.words[1]:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-j:j},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(j,F){return c(f!==void 0),this.toArrayLike(f,j,F)},n.prototype.toArray=function(j,F){return this.toArrayLike(Array,j,F)},n.prototype.toArrayLike=function(j,F,R){var T=this.byteLength(),C=R||Math.max(1,T);c(T<=C,"byte array longer than desired length"),c(C>0,"Requested array length <= 0"),this.strip();var k,M,O=F==="le",P=new j(C),H=this.clone();if(O){for(M=0;!H.isZero();M++)k=H.andln(255),H.iushrn(8),P[M]=k;for(;M<C;M++)P[M]=0}else{for(M=0;M<C-T;M++)P[M]=0;for(M=0;!H.isZero();M++)k=H.andln(255),H.iushrn(8),P[C-M-1]=k}return P},Math.clz32?n.prototype._countBits=function(j){return 32-Math.clz32(j)}:n.prototype._countBits=function(j){var F=j,R=0;return F>=4096&&(R+=13,F>>>=13),F>=64&&(R+=7,F>>>=7),F>=8&&(R+=4,F>>>=4),F>=2&&(R+=2,F>>>=2),R+F},n.prototype._zeroBits=function(j){if(j===0)return 26;var F=j,R=0;return(8191&F)==0&&(R+=13,F>>>=13),(127&F)==0&&(R+=7,F>>>=7),(15&F)==0&&(R+=4,F>>>=4),(3&F)==0&&(R+=2,F>>>=2),(1&F)==0&&R++,R},n.prototype.bitLength=function(){var j=this.words[this.length-1],F=this._countBits(j);return 26*(this.length-1)+F},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var j=0,F=0;F<this.length;F++){var R=this._zeroBits(this.words[F]);if(j+=R,R!==26)break}return j},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(j){return this.negative!==0?this.abs().inotn(j).iaddn(1):this.clone()},n.prototype.fromTwos=function(j){return this.testn(j-1)?this.notn(j).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(j){for(;this.length<j.length;)this.words[this.length++]=0;for(var F=0;F<j.length;F++)this.words[F]=this.words[F]|j.words[F];return this.strip()},n.prototype.ior=function(j){return c((this.negative|j.negative)==0),this.iuor(j)},n.prototype.or=function(j){return this.length>j.length?this.clone().ior(j):j.clone().ior(this)},n.prototype.uor=function(j){return this.length>j.length?this.clone().iuor(j):j.clone().iuor(this)},n.prototype.iuand=function(j){var F;F=this.length>j.length?j:this;for(var R=0;R<F.length;R++)this.words[R]=this.words[R]&j.words[R];return this.length=F.length,this.strip()},n.prototype.iand=function(j){return c((this.negative|j.negative)==0),this.iuand(j)},n.prototype.and=function(j){return this.length>j.length?this.clone().iand(j):j.clone().iand(this)},n.prototype.uand=function(j){return this.length>j.length?this.clone().iuand(j):j.clone().iuand(this)},n.prototype.iuxor=function(j){var F,R;this.length>j.length?(F=this,R=j):(F=j,R=this);for(var T=0;T<R.length;T++)this.words[T]=F.words[T]^R.words[T];if(this!==F)for(;T<F.length;T++)this.words[T]=F.words[T];return this.length=F.length,this.strip()},n.prototype.ixor=function(j){return c((this.negative|j.negative)==0),this.iuxor(j)},n.prototype.xor=function(j){return this.length>j.length?this.clone().ixor(j):j.clone().ixor(this)},n.prototype.uxor=function(j){return this.length>j.length?this.clone().iuxor(j):j.clone().iuxor(this)},n.prototype.inotn=function(j){c(typeof j=="number"&&j>=0);var F=0|Math.ceil(j/26),R=j%26;this._expand(F),R>0&&F--;for(var T=0;T<F;T++)this.words[T]=67108863&~this.words[T];return R>0&&(this.words[T]=~this.words[T]&67108863>>26-R),this.strip()},n.prototype.notn=function(j){return this.clone().inotn(j)},n.prototype.setn=function(j,F){c(typeof j=="number"&&j>=0);var R=j/26|0,T=j%26;return this._expand(R+1),this.words[R]=F?this.words[R]|1<<T:this.words[R]&~(1<<T),this.strip()},n.prototype.iadd=function(j){var F,R,T;if(this.negative!==0&&j.negative===0)return this.negative=0,F=this.isub(j),this.negative^=1,this._normSign();if(this.negative===0&&j.negative!==0)return j.negative=0,F=this.isub(j),j.negative=1,F._normSign();this.length>j.length?(R=this,T=j):(R=j,T=this);for(var C=0,k=0;k<T.length;k++)F=(0|R.words[k])+(0|T.words[k])+C,this.words[k]=67108863&F,C=F>>>26;for(;C!==0&&k<R.length;k++)F=(0|R.words[k])+C,this.words[k]=67108863&F,C=F>>>26;if(this.length=R.length,C!==0)this.words[this.length]=C,this.length++;else if(R!==this)for(;k<R.length;k++)this.words[k]=R.words[k];return this},n.prototype.add=function(j){var F;return j.negative!==0&&this.negative===0?(j.negative=0,F=this.sub(j),j.negative^=1,F):j.negative===0&&this.negative!==0?(this.negative=0,F=j.sub(this),this.negative=1,F):this.length>j.length?this.clone().iadd(j):j.clone().iadd(this)},n.prototype.isub=function(j){if(j.negative!==0){j.negative=0;var F=this.iadd(j);return j.negative=1,F._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(j),this.negative=1,this._normSign();var R,T,C=this.cmp(j);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;C>0?(R=this,T=j):(R=j,T=this);for(var k=0,M=0;M<T.length;M++)k=(F=(0|R.words[M])-(0|T.words[M])+k)>>26,this.words[M]=67108863&F;for(;k!==0&&M<R.length;M++)k=(F=(0|R.words[M])+k)>>26,this.words[M]=67108863&F;if(k===0&&M<R.length&&R!==this)for(;M<R.length;M++)this.words[M]=R.words[M];return this.length=Math.max(this.length,M),R!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(j){return this.clone().isub(j)};var S=function(j,F,R){var T,C,k,M=j.words,O=F.words,P=R.words,H=0,et=0|M[0],it=8191&et,pt=et>>>13,X=0|M[1],ut=8191&X,G=X>>>13,U=0|M[2],st=8191&U,gt=U>>>13,zt=0|M[3],St=8191&zt,Bt=zt>>>13,ie=0|M[4],re=8191&ie,Ct=ie>>>13,Yt=0|M[5],Qt=8191&Yt,Ht=Yt>>>13,Jt=0|M[6],ne=8191&Jt,ae=Jt>>>13,me=0|M[7],Le=8191&me,Pe=me>>>13,Be=0|M[8],He=8191&Be,Je=Be>>>13,sn=0|M[9],un=8191&sn,an=sn>>>13,ge=0|O[0],Ve=8191&ge,Ke=ge>>>13,dn=0|O[1],ln=8191&dn,$n=dn>>>13,hr=0|O[2],Ye=8191&hr,Xn=hr>>>13,Wn=0|O[3],Cn=8191&Wn,br=Wn>>>13,Ge=0|O[4],Ln=8191&Ge,ir=Ge>>>13,Zn=0|O[5],cn=8191&Zn,Qn=Zn>>>13,qn=0|O[6],jn=8191&qn,ue=qn>>>13,ye=0|O[7],be=8191&ye,Qe=ye>>>13,yn=0|O[8],qe=8191&yn,fn=yn>>>13,gn=0|O[9],wn=8191&gn,bn=gn>>>13;R.negative=j.negative^F.negative,R.length=19;var Sn=(H+(T=Math.imul(it,Ve))|0)+((8191&(C=(C=Math.imul(it,Ke))+Math.imul(pt,Ve)|0))<<13)|0;H=((k=Math.imul(pt,Ke))+(C>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,T=Math.imul(ut,Ve),C=(C=Math.imul(ut,Ke))+Math.imul(G,Ve)|0,k=Math.imul(G,Ke);var Fn=(H+(T=T+Math.imul(it,ln)|0)|0)+((8191&(C=(C=C+Math.imul(it,$n)|0)+Math.imul(pt,ln)|0))<<13)|0;H=((k=k+Math.imul(pt,$n)|0)+(C>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,T=Math.imul(st,Ve),C=(C=Math.imul(st,Ke))+Math.imul(gt,Ve)|0,k=Math.imul(gt,Ke),T=T+Math.imul(ut,ln)|0,C=(C=C+Math.imul(ut,$n)|0)+Math.imul(G,ln)|0,k=k+Math.imul(G,$n)|0;var pr=(H+(T=T+Math.imul(it,Ye)|0)|0)+((8191&(C=(C=C+Math.imul(it,Xn)|0)+Math.imul(pt,Ye)|0))<<13)|0;H=((k=k+Math.imul(pt,Xn)|0)+(C>>>13)|0)+(pr>>>26)|0,pr&=67108863,T=Math.imul(St,Ve),C=(C=Math.imul(St,Ke))+Math.imul(Bt,Ve)|0,k=Math.imul(Bt,Ke),T=T+Math.imul(st,ln)|0,C=(C=C+Math.imul(st,$n)|0)+Math.imul(gt,ln)|0,k=k+Math.imul(gt,$n)|0,T=T+Math.imul(ut,Ye)|0,C=(C=C+Math.imul(ut,Xn)|0)+Math.imul(G,Ye)|0,k=k+Math.imul(G,Xn)|0;var Gn=(H+(T=T+Math.imul(it,Cn)|0)|0)+((8191&(C=(C=C+Math.imul(it,br)|0)+Math.imul(pt,Cn)|0))<<13)|0;H=((k=k+Math.imul(pt,br)|0)+(C>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,T=Math.imul(re,Ve),C=(C=Math.imul(re,Ke))+Math.imul(Ct,Ve)|0,k=Math.imul(Ct,Ke),T=T+Math.imul(St,ln)|0,C=(C=C+Math.imul(St,$n)|0)+Math.imul(Bt,ln)|0,k=k+Math.imul(Bt,$n)|0,T=T+Math.imul(st,Ye)|0,C=(C=C+Math.imul(st,Xn)|0)+Math.imul(gt,Ye)|0,k=k+Math.imul(gt,Xn)|0,T=T+Math.imul(ut,Cn)|0,C=(C=C+Math.imul(ut,br)|0)+Math.imul(G,Cn)|0,k=k+Math.imul(G,br)|0;var Nr=(H+(T=T+Math.imul(it,Ln)|0)|0)+((8191&(C=(C=C+Math.imul(it,ir)|0)+Math.imul(pt,Ln)|0))<<13)|0;H=((k=k+Math.imul(pt,ir)|0)+(C>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,T=Math.imul(Qt,Ve),C=(C=Math.imul(Qt,Ke))+Math.imul(Ht,Ve)|0,k=Math.imul(Ht,Ke),T=T+Math.imul(re,ln)|0,C=(C=C+Math.imul(re,$n)|0)+Math.imul(Ct,ln)|0,k=k+Math.imul(Ct,$n)|0,T=T+Math.imul(St,Ye)|0,C=(C=C+Math.imul(St,Xn)|0)+Math.imul(Bt,Ye)|0,k=k+Math.imul(Bt,Xn)|0,T=T+Math.imul(st,Cn)|0,C=(C=C+Math.imul(st,br)|0)+Math.imul(gt,Cn)|0,k=k+Math.imul(gt,br)|0,T=T+Math.imul(ut,Ln)|0,C=(C=C+Math.imul(ut,ir)|0)+Math.imul(G,Ln)|0,k=k+Math.imul(G,ir)|0;var Cr=(H+(T=T+Math.imul(it,cn)|0)|0)+((8191&(C=(C=C+Math.imul(it,Qn)|0)+Math.imul(pt,cn)|0))<<13)|0;H=((k=k+Math.imul(pt,Qn)|0)+(C>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,T=Math.imul(ne,Ve),C=(C=Math.imul(ne,Ke))+Math.imul(ae,Ve)|0,k=Math.imul(ae,Ke),T=T+Math.imul(Qt,ln)|0,C=(C=C+Math.imul(Qt,$n)|0)+Math.imul(Ht,ln)|0,k=k+Math.imul(Ht,$n)|0,T=T+Math.imul(re,Ye)|0,C=(C=C+Math.imul(re,Xn)|0)+Math.imul(Ct,Ye)|0,k=k+Math.imul(Ct,Xn)|0,T=T+Math.imul(St,Cn)|0,C=(C=C+Math.imul(St,br)|0)+Math.imul(Bt,Cn)|0,k=k+Math.imul(Bt,br)|0,T=T+Math.imul(st,Ln)|0,C=(C=C+Math.imul(st,ir)|0)+Math.imul(gt,Ln)|0,k=k+Math.imul(gt,ir)|0,T=T+Math.imul(ut,cn)|0,C=(C=C+Math.imul(ut,Qn)|0)+Math.imul(G,cn)|0,k=k+Math.imul(G,Qn)|0;var oi=(H+(T=T+Math.imul(it,jn)|0)|0)+((8191&(C=(C=C+Math.imul(it,ue)|0)+Math.imul(pt,jn)|0))<<13)|0;H=((k=k+Math.imul(pt,ue)|0)+(C>>>13)|0)+(oi>>>26)|0,oi&=67108863,T=Math.imul(Le,Ve),C=(C=Math.imul(Le,Ke))+Math.imul(Pe,Ve)|0,k=Math.imul(Pe,Ke),T=T+Math.imul(ne,ln)|0,C=(C=C+Math.imul(ne,$n)|0)+Math.imul(ae,ln)|0,k=k+Math.imul(ae,$n)|0,T=T+Math.imul(Qt,Ye)|0,C=(C=C+Math.imul(Qt,Xn)|0)+Math.imul(Ht,Ye)|0,k=k+Math.imul(Ht,Xn)|0,T=T+Math.imul(re,Cn)|0,C=(C=C+Math.imul(re,br)|0)+Math.imul(Ct,Cn)|0,k=k+Math.imul(Ct,br)|0,T=T+Math.imul(St,Ln)|0,C=(C=C+Math.imul(St,ir)|0)+Math.imul(Bt,Ln)|0,k=k+Math.imul(Bt,ir)|0,T=T+Math.imul(st,cn)|0,C=(C=C+Math.imul(st,Qn)|0)+Math.imul(gt,cn)|0,k=k+Math.imul(gt,Qn)|0,T=T+Math.imul(ut,jn)|0,C=(C=C+Math.imul(ut,ue)|0)+Math.imul(G,jn)|0,k=k+Math.imul(G,ue)|0;var Kt=(H+(T=T+Math.imul(it,be)|0)|0)+((8191&(C=(C=C+Math.imul(it,Qe)|0)+Math.imul(pt,be)|0))<<13)|0;H=((k=k+Math.imul(pt,Qe)|0)+(C>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,T=Math.imul(He,Ve),C=(C=Math.imul(He,Ke))+Math.imul(Je,Ve)|0,k=Math.imul(Je,Ke),T=T+Math.imul(Le,ln)|0,C=(C=C+Math.imul(Le,$n)|0)+Math.imul(Pe,ln)|0,k=k+Math.imul(Pe,$n)|0,T=T+Math.imul(ne,Ye)|0,C=(C=C+Math.imul(ne,Xn)|0)+Math.imul(ae,Ye)|0,k=k+Math.imul(ae,Xn)|0,T=T+Math.imul(Qt,Cn)|0,C=(C=C+Math.imul(Qt,br)|0)+Math.imul(Ht,Cn)|0,k=k+Math.imul(Ht,br)|0,T=T+Math.imul(re,Ln)|0,C=(C=C+Math.imul(re,ir)|0)+Math.imul(Ct,Ln)|0,k=k+Math.imul(Ct,ir)|0,T=T+Math.imul(St,cn)|0,C=(C=C+Math.imul(St,Qn)|0)+Math.imul(Bt,cn)|0,k=k+Math.imul(Bt,Qn)|0,T=T+Math.imul(st,jn)|0,C=(C=C+Math.imul(st,ue)|0)+Math.imul(gt,jn)|0,k=k+Math.imul(gt,ue)|0,T=T+Math.imul(ut,be)|0,C=(C=C+Math.imul(ut,Qe)|0)+Math.imul(G,be)|0,k=k+Math.imul(G,Qe)|0;var we=(H+(T=T+Math.imul(it,qe)|0)|0)+((8191&(C=(C=C+Math.imul(it,fn)|0)+Math.imul(pt,qe)|0))<<13)|0;H=((k=k+Math.imul(pt,fn)|0)+(C>>>13)|0)+(we>>>26)|0,we&=67108863,T=Math.imul(un,Ve),C=(C=Math.imul(un,Ke))+Math.imul(an,Ve)|0,k=Math.imul(an,Ke),T=T+Math.imul(He,ln)|0,C=(C=C+Math.imul(He,$n)|0)+Math.imul(Je,ln)|0,k=k+Math.imul(Je,$n)|0,T=T+Math.imul(Le,Ye)|0,C=(C=C+Math.imul(Le,Xn)|0)+Math.imul(Pe,Ye)|0,k=k+Math.imul(Pe,Xn)|0,T=T+Math.imul(ne,Cn)|0,C=(C=C+Math.imul(ne,br)|0)+Math.imul(ae,Cn)|0,k=k+Math.imul(ae,br)|0,T=T+Math.imul(Qt,Ln)|0,C=(C=C+Math.imul(Qt,ir)|0)+Math.imul(Ht,Ln)|0,k=k+Math.imul(Ht,ir)|0,T=T+Math.imul(re,cn)|0,C=(C=C+Math.imul(re,Qn)|0)+Math.imul(Ct,cn)|0,k=k+Math.imul(Ct,Qn)|0,T=T+Math.imul(St,jn)|0,C=(C=C+Math.imul(St,ue)|0)+Math.imul(Bt,jn)|0,k=k+Math.imul(Bt,ue)|0,T=T+Math.imul(st,be)|0,C=(C=C+Math.imul(st,Qe)|0)+Math.imul(gt,be)|0,k=k+Math.imul(gt,Qe)|0,T=T+Math.imul(ut,qe)|0,C=(C=C+Math.imul(ut,fn)|0)+Math.imul(G,qe)|0,k=k+Math.imul(G,fn)|0;var De=(H+(T=T+Math.imul(it,wn)|0)|0)+((8191&(C=(C=C+Math.imul(it,bn)|0)+Math.imul(pt,wn)|0))<<13)|0;H=((k=k+Math.imul(pt,bn)|0)+(C>>>13)|0)+(De>>>26)|0,De&=67108863,T=Math.imul(un,ln),C=(C=Math.imul(un,$n))+Math.imul(an,ln)|0,k=Math.imul(an,$n),T=T+Math.imul(He,Ye)|0,C=(C=C+Math.imul(He,Xn)|0)+Math.imul(Je,Ye)|0,k=k+Math.imul(Je,Xn)|0,T=T+Math.imul(Le,Cn)|0,C=(C=C+Math.imul(Le,br)|0)+Math.imul(Pe,Cn)|0,k=k+Math.imul(Pe,br)|0,T=T+Math.imul(ne,Ln)|0,C=(C=C+Math.imul(ne,ir)|0)+Math.imul(ae,Ln)|0,k=k+Math.imul(ae,ir)|0,T=T+Math.imul(Qt,cn)|0,C=(C=C+Math.imul(Qt,Qn)|0)+Math.imul(Ht,cn)|0,k=k+Math.imul(Ht,Qn)|0,T=T+Math.imul(re,jn)|0,C=(C=C+Math.imul(re,ue)|0)+Math.imul(Ct,jn)|0,k=k+Math.imul(Ct,ue)|0,T=T+Math.imul(St,be)|0,C=(C=C+Math.imul(St,Qe)|0)+Math.imul(Bt,be)|0,k=k+Math.imul(Bt,Qe)|0,T=T+Math.imul(st,qe)|0,C=(C=C+Math.imul(st,fn)|0)+Math.imul(gt,qe)|0,k=k+Math.imul(gt,fn)|0;var $e=(H+(T=T+Math.imul(ut,wn)|0)|0)+((8191&(C=(C=C+Math.imul(ut,bn)|0)+Math.imul(G,wn)|0))<<13)|0;H=((k=k+Math.imul(G,bn)|0)+(C>>>13)|0)+($e>>>26)|0,$e&=67108863,T=Math.imul(un,Ye),C=(C=Math.imul(un,Xn))+Math.imul(an,Ye)|0,k=Math.imul(an,Xn),T=T+Math.imul(He,Cn)|0,C=(C=C+Math.imul(He,br)|0)+Math.imul(Je,Cn)|0,k=k+Math.imul(Je,br)|0,T=T+Math.imul(Le,Ln)|0,C=(C=C+Math.imul(Le,ir)|0)+Math.imul(Pe,Ln)|0,k=k+Math.imul(Pe,ir)|0,T=T+Math.imul(ne,cn)|0,C=(C=C+Math.imul(ne,Qn)|0)+Math.imul(ae,cn)|0,k=k+Math.imul(ae,Qn)|0,T=T+Math.imul(Qt,jn)|0,C=(C=C+Math.imul(Qt,ue)|0)+Math.imul(Ht,jn)|0,k=k+Math.imul(Ht,ue)|0,T=T+Math.imul(re,be)|0,C=(C=C+Math.imul(re,Qe)|0)+Math.imul(Ct,be)|0,k=k+Math.imul(Ct,Qe)|0,T=T+Math.imul(St,qe)|0,C=(C=C+Math.imul(St,fn)|0)+Math.imul(Bt,qe)|0,k=k+Math.imul(Bt,fn)|0;var Tn=(H+(T=T+Math.imul(st,wn)|0)|0)+((8191&(C=(C=C+Math.imul(st,bn)|0)+Math.imul(gt,wn)|0))<<13)|0;H=((k=k+Math.imul(gt,bn)|0)+(C>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,T=Math.imul(un,Cn),C=(C=Math.imul(un,br))+Math.imul(an,Cn)|0,k=Math.imul(an,br),T=T+Math.imul(He,Ln)|0,C=(C=C+Math.imul(He,ir)|0)+Math.imul(Je,Ln)|0,k=k+Math.imul(Je,ir)|0,T=T+Math.imul(Le,cn)|0,C=(C=C+Math.imul(Le,Qn)|0)+Math.imul(Pe,cn)|0,k=k+Math.imul(Pe,Qn)|0,T=T+Math.imul(ne,jn)|0,C=(C=C+Math.imul(ne,ue)|0)+Math.imul(ae,jn)|0,k=k+Math.imul(ae,ue)|0,T=T+Math.imul(Qt,be)|0,C=(C=C+Math.imul(Qt,Qe)|0)+Math.imul(Ht,be)|0,k=k+Math.imul(Ht,Qe)|0,T=T+Math.imul(re,qe)|0,C=(C=C+Math.imul(re,fn)|0)+Math.imul(Ct,qe)|0,k=k+Math.imul(Ct,fn)|0;var Ze=(H+(T=T+Math.imul(St,wn)|0)|0)+((8191&(C=(C=C+Math.imul(St,bn)|0)+Math.imul(Bt,wn)|0))<<13)|0;H=((k=k+Math.imul(Bt,bn)|0)+(C>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,T=Math.imul(un,Ln),C=(C=Math.imul(un,ir))+Math.imul(an,Ln)|0,k=Math.imul(an,ir),T=T+Math.imul(He,cn)|0,C=(C=C+Math.imul(He,Qn)|0)+Math.imul(Je,cn)|0,k=k+Math.imul(Je,Qn)|0,T=T+Math.imul(Le,jn)|0,C=(C=C+Math.imul(Le,ue)|0)+Math.imul(Pe,jn)|0,k=k+Math.imul(Pe,ue)|0,T=T+Math.imul(ne,be)|0,C=(C=C+Math.imul(ne,Qe)|0)+Math.imul(ae,be)|0,k=k+Math.imul(ae,Qe)|0,T=T+Math.imul(Qt,qe)|0,C=(C=C+Math.imul(Qt,fn)|0)+Math.imul(Ht,qe)|0,k=k+Math.imul(Ht,fn)|0;var Xe=(H+(T=T+Math.imul(re,wn)|0)|0)+((8191&(C=(C=C+Math.imul(re,bn)|0)+Math.imul(Ct,wn)|0))<<13)|0;H=((k=k+Math.imul(Ct,bn)|0)+(C>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,T=Math.imul(un,cn),C=(C=Math.imul(un,Qn))+Math.imul(an,cn)|0,k=Math.imul(an,Qn),T=T+Math.imul(He,jn)|0,C=(C=C+Math.imul(He,ue)|0)+Math.imul(Je,jn)|0,k=k+Math.imul(Je,ue)|0,T=T+Math.imul(Le,be)|0,C=(C=C+Math.imul(Le,Qe)|0)+Math.imul(Pe,be)|0,k=k+Math.imul(Pe,Qe)|0,T=T+Math.imul(ne,qe)|0,C=(C=C+Math.imul(ne,fn)|0)+Math.imul(ae,qe)|0,k=k+Math.imul(ae,fn)|0;var vn=(H+(T=T+Math.imul(Qt,wn)|0)|0)+((8191&(C=(C=C+Math.imul(Qt,bn)|0)+Math.imul(Ht,wn)|0))<<13)|0;H=((k=k+Math.imul(Ht,bn)|0)+(C>>>13)|0)+(vn>>>26)|0,vn&=67108863,T=Math.imul(un,jn),C=(C=Math.imul(un,ue))+Math.imul(an,jn)|0,k=Math.imul(an,ue),T=T+Math.imul(He,be)|0,C=(C=C+Math.imul(He,Qe)|0)+Math.imul(Je,be)|0,k=k+Math.imul(Je,Qe)|0,T=T+Math.imul(Le,qe)|0,C=(C=C+Math.imul(Le,fn)|0)+Math.imul(Pe,qe)|0,k=k+Math.imul(Pe,fn)|0;var Dn=(H+(T=T+Math.imul(ne,wn)|0)|0)+((8191&(C=(C=C+Math.imul(ne,bn)|0)+Math.imul(ae,wn)|0))<<13)|0;H=((k=k+Math.imul(ae,bn)|0)+(C>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,T=Math.imul(un,be),C=(C=Math.imul(un,Qe))+Math.imul(an,be)|0,k=Math.imul(an,Qe),T=T+Math.imul(He,qe)|0,C=(C=C+Math.imul(He,fn)|0)+Math.imul(Je,qe)|0,k=k+Math.imul(Je,fn)|0;var Bn=(H+(T=T+Math.imul(Le,wn)|0)|0)+((8191&(C=(C=C+Math.imul(Le,bn)|0)+Math.imul(Pe,wn)|0))<<13)|0;H=((k=k+Math.imul(Pe,bn)|0)+(C>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,T=Math.imul(un,qe),C=(C=Math.imul(un,fn))+Math.imul(an,qe)|0,k=Math.imul(an,fn);var kn=(H+(T=T+Math.imul(He,wn)|0)|0)+((8191&(C=(C=C+Math.imul(He,bn)|0)+Math.imul(Je,wn)|0))<<13)|0;H=((k=k+Math.imul(Je,bn)|0)+(C>>>13)|0)+(kn>>>26)|0,kn&=67108863;var xn=(H+(T=Math.imul(un,wn))|0)+((8191&(C=(C=Math.imul(un,bn))+Math.imul(an,wn)|0))<<13)|0;return H=((k=Math.imul(an,bn))+(C>>>13)|0)+(xn>>>26)|0,xn&=67108863,P[0]=Sn,P[1]=Fn,P[2]=pr,P[3]=Gn,P[4]=Nr,P[5]=Cr,P[6]=oi,P[7]=Kt,P[8]=we,P[9]=De,P[10]=$e,P[11]=Tn,P[12]=Ze,P[13]=Xe,P[14]=vn,P[15]=Dn,P[16]=Bn,P[17]=kn,P[18]=xn,H!==0&&(P[19]=H,R.length++),R};function E(j,F,R){return new I().mulp(j,F,R)}function I(j,F){this.x=j,this.y=F}Math.imul||(S=w),n.prototype.mulTo=function(j,F){var R=this.length+j.length;return this.length===10&&j.length===10?S(this,j,F):R<63?w(this,j,F):R<1024?(function(T,C,k){k.negative=C.negative^T.negative,k.length=T.length+C.length;for(var M=0,O=0,P=0;P<k.length-1;P++){var H=O;O=0;for(var et=67108863&M,it=Math.min(P,C.length-1),pt=Math.max(0,P-T.length+1);pt<=it;pt++){var X=P-pt,ut=(0|T.words[X])*(0|C.words[pt]),G=67108863&ut;et=67108863&(G=G+et|0),O+=(H=(H=H+(ut/67108864|0)|0)+(G>>>26)|0)>>>26,H&=67108863}k.words[P]=et,M=H,H=O}return M!==0?k.words[P]=M:k.length--,k.strip()})(this,j,F):E(this,j,F)},I.prototype.makeRBT=function(j){for(var F=new Array(j),R=n.prototype._countBits(j)-1,T=0;T<j;T++)F[T]=this.revBin(T,R,j);return F},I.prototype.revBin=function(j,F,R){if(j===0||j===R-1)return j;for(var T=0,C=0;C<F;C++)T|=(1&j)<<F-C-1,j>>=1;return T},I.prototype.permute=function(j,F,R,T,C,k){for(var M=0;M<k;M++)T[M]=F[j[M]],C[M]=R[j[M]]},I.prototype.transform=function(j,F,R,T,C,k){this.permute(k,j,F,R,T,C);for(var M=1;M<C;M<<=1)for(var O=M<<1,P=Math.cos(2*Math.PI/O),H=Math.sin(2*Math.PI/O),et=0;et<C;et+=O)for(var it=P,pt=H,X=0;X<M;X++){var ut=R[et+X],G=T[et+X],U=R[et+X+M],st=T[et+X+M],gt=it*U-pt*st;st=it*st+pt*U,U=gt,R[et+X]=ut+U,T[et+X]=G+st,R[et+X+M]=ut-U,T[et+X+M]=G-st,X!==O&&(gt=P*it-H*pt,pt=P*pt+H*it,it=gt)}},I.prototype.guessLen13b=function(j,F){var R=1|Math.max(F,j),T=1&R,C=0;for(R=R/2|0;R;R>>>=1)C++;return 1<<C+1+T},I.prototype.conjugate=function(j,F,R){if(!(R<=1))for(var T=0;T<R/2;T++){var C=j[T];j[T]=j[R-T-1],j[R-T-1]=C,C=F[T],F[T]=-F[R-T-1],F[R-T-1]=-C}},I.prototype.normalize13b=function(j,F){for(var R=0,T=0;T<F/2;T++){var C=8192*Math.round(j[2*T+1]/F)+Math.round(j[2*T]/F)+R;j[T]=67108863&C,R=C<67108864?0:C/67108864|0}return j},I.prototype.convert13b=function(j,F,R,T){for(var C=0,k=0;k<F;k++)C+=0|j[k],R[2*k]=8191&C,C>>>=13,R[2*k+1]=8191&C,C>>>=13;for(k=2*F;k<T;++k)R[k]=0;c(C===0),c((-8192&C)==0)},I.prototype.stub=function(j){for(var F=new Array(j),R=0;R<j;R++)F[R]=0;return F},I.prototype.mulp=function(j,F,R){var T=2*this.guessLen13b(j.length,F.length),C=this.makeRBT(T),k=this.stub(T),M=new Array(T),O=new Array(T),P=new Array(T),H=new Array(T),et=new Array(T),it=new Array(T),pt=R.words;pt.length=T,this.convert13b(j.words,j.length,M,T),this.convert13b(F.words,F.length,H,T),this.transform(M,k,O,P,T,C),this.transform(H,k,et,it,T,C);for(var X=0;X<T;X++){var ut=O[X]*et[X]-P[X]*it[X];P[X]=O[X]*it[X]+P[X]*et[X],O[X]=ut}return this.conjugate(O,P,T),this.transform(O,P,pt,k,T,C),this.conjugate(pt,k,T),this.normalize13b(pt,T),R.negative=j.negative^F.negative,R.length=j.length+F.length,R.strip()},n.prototype.mul=function(j){var F=new n(null);return F.words=new Array(this.length+j.length),this.mulTo(j,F)},n.prototype.mulf=function(j){var F=new n(null);return F.words=new Array(this.length+j.length),E(this,j,F)},n.prototype.imul=function(j){return this.clone().mulTo(j,this)},n.prototype.imuln=function(j){c(typeof j=="number"),c(j<67108864);for(var F=0,R=0;R<this.length;R++){var T=(0|this.words[R])*j,C=(67108863&T)+(67108863&F);F>>=26,F+=T/67108864|0,F+=C>>>26,this.words[R]=67108863&C}return F!==0&&(this.words[R]=F,this.length++),this},n.prototype.muln=function(j){return this.clone().imuln(j)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(j){var F=(function(k){for(var M=new Array(k.bitLength()),O=0;O<M.length;O++){var P=O/26|0,H=O%26;M[O]=(k.words[P]&1<<H)>>>H}return M})(j);if(F.length===0)return new n(1);for(var R=this,T=0;T<F.length&&F[T]===0;T++,R=R.sqr());if(++T<F.length)for(var C=R.sqr();T<F.length;T++,C=C.sqr())F[T]!==0&&(R=R.mul(C));return R},n.prototype.iushln=function(j){c(typeof j=="number"&&j>=0);var F,R=j%26,T=(j-R)/26,C=67108863>>>26-R<<26-R;if(R!==0){var k=0;for(F=0;F<this.length;F++){var M=this.words[F]&C,O=(0|this.words[F])-M<<R;this.words[F]=O|k,k=M>>>26-R}k&&(this.words[F]=k,this.length++)}if(T!==0){for(F=this.length-1;F>=0;F--)this.words[F+T]=this.words[F];for(F=0;F<T;F++)this.words[F]=0;this.length+=T}return this.strip()},n.prototype.ishln=function(j){return c(this.negative===0),this.iushln(j)},n.prototype.iushrn=function(j,F,R){var T;c(typeof j=="number"&&j>=0),T=F?(F-F%26)/26:0;var C=j%26,k=Math.min((j-C)/26,this.length),M=67108863^67108863>>>C<<C,O=R;if(T-=k,T=Math.max(0,T),O){for(var P=0;P<k;P++)O.words[P]=this.words[P];O.length=k}if(k!==0)if(this.length>k)for(this.length-=k,P=0;P<this.length;P++)this.words[P]=this.words[P+k];else this.words[0]=0,this.length=1;var H=0;for(P=this.length-1;P>=0&&(H!==0||P>=T);P--){var et=0|this.words[P];this.words[P]=H<<26-C|et>>>C,H=et&M}return O&&H!==0&&(O.words[O.length++]=H),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(j,F,R){return c(this.negative===0),this.iushrn(j,F,R)},n.prototype.shln=function(j){return this.clone().ishln(j)},n.prototype.ushln=function(j){return this.clone().iushln(j)},n.prototype.shrn=function(j){return this.clone().ishrn(j)},n.prototype.ushrn=function(j){return this.clone().iushrn(j)},n.prototype.testn=function(j){c(typeof j=="number"&&j>=0);var F=j%26,R=(j-F)/26,T=1<<F;return!(this.length<=R)&&!!(this.words[R]&T)},n.prototype.imaskn=function(j){c(typeof j=="number"&&j>=0);var F=j%26,R=(j-F)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=R)return this;if(F!==0&&R++,this.length=Math.min(R,this.length),F!==0){var T=67108863^67108863>>>F<<F;this.words[this.length-1]&=T}return this.strip()},n.prototype.maskn=function(j){return this.clone().imaskn(j)},n.prototype.iaddn=function(j){return c(typeof j=="number"),c(j<67108864),j<0?this.isubn(-j):this.negative!==0?this.length===1&&(0|this.words[0])<j?(this.words[0]=j-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(j),this.negative=1,this):this._iaddn(j)},n.prototype._iaddn=function(j){this.words[0]+=j;for(var F=0;F<this.length&&this.words[F]>=67108864;F++)this.words[F]-=67108864,F===this.length-1?this.words[F+1]=1:this.words[F+1]++;return this.length=Math.max(this.length,F+1),this},n.prototype.isubn=function(j){if(c(typeof j=="number"),c(j<67108864),j<0)return this.iaddn(-j);if(this.negative!==0)return this.negative=0,this.iaddn(j),this.negative=1,this;if(this.words[0]-=j,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var F=0;F<this.length&&this.words[F]<0;F++)this.words[F]+=67108864,this.words[F+1]-=1;return this.strip()},n.prototype.addn=function(j){return this.clone().iaddn(j)},n.prototype.subn=function(j){return this.clone().isubn(j)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(j,F,R){var T,C,k=j.length+R;this._expand(k);var M=0;for(T=0;T<j.length;T++){C=(0|this.words[T+R])+M;var O=(0|j.words[T])*F;M=((C-=67108863&O)>>26)-(O/67108864|0),this.words[T+R]=67108863&C}for(;T<this.length-R;T++)M=(C=(0|this.words[T+R])+M)>>26,this.words[T+R]=67108863&C;if(M===0)return this.strip();for(c(M===-1),M=0,T=0;T<this.length;T++)M=(C=-(0|this.words[T])+M)>>26,this.words[T]=67108863&C;return this.negative=1,this.strip()},n.prototype._wordDiv=function(j,F){var R=(this.length,j.length),T=this.clone(),C=j,k=0|C.words[C.length-1];(R=26-this._countBits(k))!==0&&(C=C.ushln(R),T.iushln(R),k=0|C.words[C.length-1]);var M,O=T.length-C.length;if(F!=="mod"){(M=new n(null)).length=O+1,M.words=new Array(M.length);for(var P=0;P<M.length;P++)M.words[P]=0}var H=T.clone()._ishlnsubmul(C,1,O);H.negative===0&&(T=H,M&&(M.words[O]=1));for(var et=O-1;et>=0;et--){var it=67108864*(0|T.words[C.length+et])+(0|T.words[C.length+et-1]);for(it=Math.min(it/k|0,67108863),T._ishlnsubmul(C,it,et);T.negative!==0;)it--,T.negative=0,T._ishlnsubmul(C,1,et),T.isZero()||(T.negative^=1);M&&(M.words[et]=it)}return M&&M.strip(),T.strip(),F!=="div"&&R!==0&&T.iushrn(R),{div:M||null,mod:T}},n.prototype.divmod=function(j,F,R){return c(!j.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:this.negative!==0&&j.negative===0?(k=this.neg().divmod(j,F),F!=="mod"&&(T=k.div.neg()),F!=="div"&&(C=k.mod.neg(),R&&C.negative!==0&&C.iadd(j)),{div:T,mod:C}):this.negative===0&&j.negative!==0?(k=this.divmod(j.neg(),F),F!=="mod"&&(T=k.div.neg()),{div:T,mod:k.mod}):(this.negative&j.negative)!=0?(k=this.neg().divmod(j.neg(),F),F!=="div"&&(C=k.mod.neg(),R&&C.negative!==0&&C.isub(j)),{div:k.div,mod:C}):j.length>this.length||this.cmp(j)<0?{div:new n(0),mod:this}:j.length===1?F==="div"?{div:this.divn(j.words[0]),mod:null}:F==="mod"?{div:null,mod:new n(this.modn(j.words[0]))}:{div:this.divn(j.words[0]),mod:new n(this.modn(j.words[0]))}:this._wordDiv(j,F);var T,C,k},n.prototype.div=function(j){return this.divmod(j,"div",!1).div},n.prototype.mod=function(j){return this.divmod(j,"mod",!1).mod},n.prototype.umod=function(j){return this.divmod(j,"mod",!0).mod},n.prototype.divRound=function(j){var F=this.divmod(j);if(F.mod.isZero())return F.div;var R=F.div.negative!==0?F.mod.isub(j):F.mod,T=j.ushrn(1),C=j.andln(1),k=R.cmp(T);return k<0||C===1&&k===0?F.div:F.div.negative!==0?F.div.isubn(1):F.div.iaddn(1)},n.prototype.modn=function(j){c(j<=67108863);for(var F=(1<<26)%j,R=0,T=this.length-1;T>=0;T--)R=(F*R+(0|this.words[T]))%j;return R},n.prototype.idivn=function(j){c(j<=67108863);for(var F=0,R=this.length-1;R>=0;R--){var T=(0|this.words[R])+67108864*F;this.words[R]=T/j|0,F=T%j}return this.strip()},n.prototype.divn=function(j){return this.clone().idivn(j)},n.prototype.egcd=function(j){c(j.negative===0),c(!j.isZero());var F=this,R=j.clone();F=F.negative!==0?F.umod(j):F.clone();for(var T=new n(1),C=new n(0),k=new n(0),M=new n(1),O=0;F.isEven()&&R.isEven();)F.iushrn(1),R.iushrn(1),++O;for(var P=R.clone(),H=F.clone();!F.isZero();){for(var et=0,it=1;(F.words[0]&it)==0&&et<26;++et,it<<=1);if(et>0)for(F.iushrn(et);et-- >0;)(T.isOdd()||C.isOdd())&&(T.iadd(P),C.isub(H)),T.iushrn(1),C.iushrn(1);for(var pt=0,X=1;(R.words[0]&X)==0&&pt<26;++pt,X<<=1);if(pt>0)for(R.iushrn(pt);pt-- >0;)(k.isOdd()||M.isOdd())&&(k.iadd(P),M.isub(H)),k.iushrn(1),M.iushrn(1);F.cmp(R)>=0?(F.isub(R),T.isub(k),C.isub(M)):(R.isub(F),k.isub(T),M.isub(C))}return{a:k,b:M,gcd:R.iushln(O)}},n.prototype._invmp=function(j){c(j.negative===0),c(!j.isZero());var F=this,R=j.clone();F=F.negative!==0?F.umod(j):F.clone();for(var T,C=new n(1),k=new n(0),M=R.clone();F.cmpn(1)>0&&R.cmpn(1)>0;){for(var O=0,P=1;(F.words[0]&P)==0&&O<26;++O,P<<=1);if(O>0)for(F.iushrn(O);O-- >0;)C.isOdd()&&C.iadd(M),C.iushrn(1);for(var H=0,et=1;(R.words[0]&et)==0&&H<26;++H,et<<=1);if(H>0)for(R.iushrn(H);H-- >0;)k.isOdd()&&k.iadd(M),k.iushrn(1);F.cmp(R)>=0?(F.isub(R),C.isub(k)):(R.isub(F),k.isub(C))}return(T=F.cmpn(1)===0?C:k).cmpn(0)<0&&T.iadd(j),T},n.prototype.gcd=function(j){if(this.isZero())return j.abs();if(j.isZero())return this.abs();var F=this.clone(),R=j.clone();F.negative=0,R.negative=0;for(var T=0;F.isEven()&&R.isEven();T++)F.iushrn(1),R.iushrn(1);for(;;){for(;F.isEven();)F.iushrn(1);for(;R.isEven();)R.iushrn(1);var C=F.cmp(R);if(C<0){var k=F;F=R,R=k}else if(C===0||R.cmpn(1)===0)break;F.isub(R)}return R.iushln(T)},n.prototype.invm=function(j){return this.egcd(j).a.umod(j)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(j){return this.words[0]&j},n.prototype.bincn=function(j){c(typeof j=="number");var F=j%26,R=(j-F)/26,T=1<<F;if(this.length<=R)return this._expand(R+1),this.words[R]|=T,this;for(var C=T,k=R;C!==0&&k<this.length;k++){var M=0|this.words[k];C=(M+=C)>>>26,M&=67108863,this.words[k]=M}return C!==0&&(this.words[k]=C,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(j){var F,R=j<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;if(this.strip(),this.length>1)F=1;else{R&&(j=-j),c(j<=67108863,"Number is too big");var T=0|this.words[0];F=T===j?0:T<j?-1:1}return this.negative!==0?0|-F:F},n.prototype.cmp=function(j){if(this.negative!==0&&j.negative===0)return-1;if(this.negative===0&&j.negative!==0)return 1;var F=this.ucmp(j);return this.negative!==0?0|-F:F},n.prototype.ucmp=function(j){if(this.length>j.length)return 1;if(this.length<j.length)return-1;for(var F=0,R=this.length-1;R>=0;R--){var T=0|this.words[R],C=0|j.words[R];if(T!==C){T<C?F=-1:T>C&&(F=1);break}}return F},n.prototype.gtn=function(j){return this.cmpn(j)===1},n.prototype.gt=function(j){return this.cmp(j)===1},n.prototype.gten=function(j){return this.cmpn(j)>=0},n.prototype.gte=function(j){return this.cmp(j)>=0},n.prototype.ltn=function(j){return this.cmpn(j)===-1},n.prototype.lt=function(j){return this.cmp(j)===-1},n.prototype.lten=function(j){return this.cmpn(j)<=0},n.prototype.lte=function(j){return this.cmp(j)<=0},n.prototype.eqn=function(j){return this.cmpn(j)===0},n.prototype.eq=function(j){return this.cmp(j)===0},n.red=function(j){return new rt(j)},n.prototype.toRed=function(j){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),j.convertTo(this)._forceRed(j)},n.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(j){return this.red=j,this},n.prototype.forceRed=function(j){return c(!this.red,"Already a number in reduction context"),this._forceRed(j)},n.prototype.redAdd=function(j){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,j)},n.prototype.redIAdd=function(j){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,j)},n.prototype.redSub=function(j){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,j)},n.prototype.redISub=function(j){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,j)},n.prototype.redShl=function(j){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,j)},n.prototype.redMul=function(j){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.mul(this,j)},n.prototype.redIMul=function(j){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,j),this.red.imul(this,j)},n.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(j){return c(this.red&&!j.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,j)};var D={k256:null,p224:null,p192:null,p25519:null};function Z(j,F){this.name=j,this.p=new n(F,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function z(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function W(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function Q(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function rt(j){if(typeof j=="string"){var F=n._prime(j);this.m=F.p,this.prime=F}else c(j.gtn(1),"modulus must be greater than 1"),this.m=j,this.prime=null}function tt(j){rt.call(this,j),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}Z.prototype._tmp=function(){var j=new n(null);return j.words=new Array(Math.ceil(this.n/13)),j},Z.prototype.ireduce=function(j){var F,R=j;do this.split(R,this.tmp),F=(R=(R=this.imulK(R)).iadd(this.tmp)).bitLength();while(F>this.n);var T=F<this.n?-1:R.ucmp(this.p);return T===0?(R.words[0]=0,R.length=1):T>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},Z.prototype.split=function(j,F){j.iushrn(this.n,0,F)},Z.prototype.imulK=function(j){return j.imul(this.k)},l(K,Z),K.prototype.split=function(j,F){for(var R=Math.min(j.length,9),T=0;T<R;T++)F.words[T]=j.words[T];if(F.length=R,j.length<=9)return j.words[0]=0,void(j.length=1);var C=j.words[9];for(F.words[F.length++]=4194303&C,T=10;T<j.length;T++){var k=0|j.words[T];j.words[T-10]=(4194303&k)<<4|C>>>22,C=k}C>>>=22,j.words[T-10]=C,C===0&&j.length>10?j.length-=10:j.length-=9},K.prototype.imulK=function(j){j.words[j.length]=0,j.words[j.length+1]=0,j.length+=2;for(var F=0,R=0;R<j.length;R++){var T=0|j.words[R];F+=977*T,j.words[R]=67108863&F,F=64*T+(F/67108864|0)}return j.words[j.length-1]===0&&(j.length--,j.words[j.length-1]===0&&j.length--),j},l(z,Z),l(W,Z),l(Q,Z),Q.prototype.imulK=function(j){for(var F=0,R=0;R<j.length;R++){var T=19*(0|j.words[R])+F,C=67108863&T;T>>>=26,j.words[R]=C,F=T}return F!==0&&(j.words[j.length++]=F),j},n._prime=function(j){if(D[j])return D[j];var F;if(j==="k256")F=new K;else if(j==="p224")F=new z;else if(j==="p192")F=new W;else{if(j!=="p25519")throw new Error("Unknown prime "+j);F=new Q}return D[j]=F,F},rt.prototype._verify1=function(j){c(j.negative===0,"red works only with positives"),c(j.red,"red works only with red numbers")},rt.prototype._verify2=function(j,F){c((j.negative|F.negative)==0,"red works only with positives"),c(j.red&&j.red===F.red,"red works only with red numbers")},rt.prototype.imod=function(j){return this.prime?this.prime.ireduce(j)._forceRed(this):j.umod(this.m)._forceRed(this)},rt.prototype.neg=function(j){return j.isZero()?j.clone():this.m.sub(j)._forceRed(this)},rt.prototype.add=function(j,F){this._verify2(j,F);var R=j.add(F);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},rt.prototype.iadd=function(j,F){this._verify2(j,F);var R=j.iadd(F);return R.cmp(this.m)>=0&&R.isub(this.m),R},rt.prototype.sub=function(j,F){this._verify2(j,F);var R=j.sub(F);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},rt.prototype.isub=function(j,F){this._verify2(j,F);var R=j.isub(F);return R.cmpn(0)<0&&R.iadd(this.m),R},rt.prototype.shl=function(j,F){return this._verify1(j),this.imod(j.ushln(F))},rt.prototype.imul=function(j,F){return this._verify2(j,F),this.imod(j.imul(F))},rt.prototype.mul=function(j,F){return this._verify2(j,F),this.imod(j.mul(F))},rt.prototype.isqr=function(j){return this.imul(j,j.clone())},rt.prototype.sqr=function(j){return this.mul(j,j)},rt.prototype.sqrt=function(j){if(j.isZero())return j.clone();var F=this.m.andln(3);if(c(F%2==1),F===3){var R=this.m.add(new n(1)).iushrn(2);return this.pow(j,R)}for(var T=this.m.subn(1),C=0;!T.isZero()&&T.andln(1)===0;)C++,T.iushrn(1);c(!T.isZero());var k=new n(1).toRed(this),M=k.redNeg(),O=this.m.subn(1).iushrn(1),P=this.m.bitLength();for(P=new n(2*P*P).toRed(this);this.pow(P,O).cmp(M)!==0;)P.redIAdd(M);for(var H=this.pow(P,T),et=this.pow(j,T.addn(1).iushrn(1)),it=this.pow(j,T),pt=C;it.cmp(k)!==0;){for(var X=it,ut=0;X.cmp(k)!==0;ut++)X=X.redSqr();c(ut<pt);var G=this.pow(H,new n(1).iushln(pt-ut-1));et=et.redMul(G),H=G.redSqr(),it=it.redMul(H),pt=ut}return et},rt.prototype.invm=function(j){var F=j._invmp(this.m);return F.negative!==0?(F.negative=0,this.imod(F).redNeg()):this.imod(F)},rt.prototype.pow=function(j,F){if(F.isZero())return new n(1).toRed(this);if(F.cmpn(1)===0)return j.clone();var R=new Array(16);R[0]=new n(1).toRed(this),R[1]=j;for(var T=2;T<R.length;T++)R[T]=this.mul(R[T-1],j);var C=R[0],k=0,M=0,O=F.bitLength()%26;for(O===0&&(O=26),T=F.length-1;T>=0;T--){for(var P=F.words[T],H=O-1;H>=0;H--){var et=P>>H&1;C!==R[0]&&(C=this.sqr(C)),et!==0||k!==0?(k<<=1,k|=et,(++M===4||T===0&&H===0)&&(C=this.mul(C,R[k]),M=0,k=0)):M=0}O=26}return C},rt.prototype.convertTo=function(j){var F=j.umod(this.m);return F===j?F.clone():F},rt.prototype.convertFrom=function(j){var F=j.clone();return F.red=null,F},n.mont=function(j){return new tt(j)},l(tt,rt),tt.prototype.convertTo=function(j){return this.imod(j.ushln(this.shift))},tt.prototype.convertFrom=function(j){var F=this.imod(j.mul(this.rinv));return F.red=null,F},tt.prototype.imul=function(j,F){if(j.isZero()||F.isZero())return j.words[0]=0,j.length=1,j;var R=j.imul(F),T=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=R.isub(T).iushrn(this.shift),k=C;return C.cmp(this.m)>=0?k=C.isub(this.m):C.cmpn(0)<0&&(k=C.iadd(this.m)),k._forceRed(this)},tt.prototype.mul=function(j,F){if(j.isZero()||F.isZero())return new n(0)._forceRed(this);var R=j.mul(F),T=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=R.isub(T).iushrn(this.shift),k=C;return C.cmp(this.m)>=0?k=C.isub(this.m):C.cmpn(0)<0&&(k=C.iadd(this.m)),k._forceRed(this)},tt.prototype.invm=function(j){return this.imod(j._invmp(this.m).mul(this.r2))._forceRed(this)}})(s===void 0||s)},{buffer:188}],185:[function(t,s,u){u.byteLength=function(g){var v=h(g),x=v[0],y=v[1];return 3*(x+y)/4-y},u.toByteArray=function(g){var v,x,y=h(g),w=y[0],S=y[1],E=new c((function(Z,K,z){return 3*(K+z)/4-z})(0,w,S)),I=0,D=S>0?w-4:w;for(x=0;x<D;x+=4)v=r[g.charCodeAt(x)]<<18|r[g.charCodeAt(x+1)]<<12|r[g.charCodeAt(x+2)]<<6|r[g.charCodeAt(x+3)],E[I++]=v>>16&255,E[I++]=v>>8&255,E[I++]=255&v;return S===2&&(v=r[g.charCodeAt(x)]<<2|r[g.charCodeAt(x+1)]>>4,E[I++]=255&v),S===1&&(v=r[g.charCodeAt(x)]<<10|r[g.charCodeAt(x+1)]<<4|r[g.charCodeAt(x+2)]>>2,E[I++]=v>>8&255,E[I++]=255&v),E},u.fromByteArray=function(g){for(var v,x=g.length,y=x%3,w=[],S=0,E=x-y;S<E;S+=16383)w.push(p(g,S,S+16383>E?E:S+16383));return y===1?(v=g[x-1],w.push(o[v>>2]+o[v<<4&63]+"==")):y===2&&(v=(g[x-2]<<8)+g[x-1],w.push(o[v>>10]+o[v>>4&63]+o[v<<2&63]+"=")),w.join("")};for(var o=[],r=[],c=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,f=l.length;n<f;++n)o[n]=l[n],r[l.charCodeAt(n)]=n;function h(g){var v=g.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=g.indexOf("=");return x===-1&&(x=v),[x,x===v?0:4-x%4]}function p(g,v,x){for(var y,w,S=[],E=v;E<x;E+=3)y=(g[E]<<16&16711680)+(g[E+1]<<8&65280)+(255&g[E+2]),S.push(o[(w=y)>>18&63]+o[w>>12&63]+o[w>>6&63]+o[63&w]);return S.join("")}r[45]=62,r[95]=63},{}],186:[function(t,s,u){(function(o,r){function c(R,T){if(!R)throw new Error(T||"Assertion failed")}function l(R,T){R.super_=T;var C=function(){};C.prototype=T.prototype,R.prototype=new C,R.prototype.constructor=R}function n(R,T,C){if(n.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&(T!=="le"&&T!=="be"||(C=T,T=10),this._init(R||0,T||10,C||"be"))}var f;typeof o=="object"?o.exports=n:(void 0).BN=n,n.BN=n,n.wordSize=26;try{f=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:t("buffer").Buffer}catch{}function h(R,T){var C=R.charCodeAt(T);return C>=48&&C<=57?C-48:C>=65&&C<=70?C-55:C>=97&&C<=102?C-87:void c(!1,"Invalid character in "+R)}function p(R,T,C){var k=h(R,C);return C-1>=T&&(k|=h(R,C-1)<<4),k}function g(R,T,C,k){for(var M=0,O=0,P=Math.min(R.length,C),H=T;H<P;H++){var et=R.charCodeAt(H)-48;M*=k,O=et>=49?et-49+10:et>=17?et-17+10:et,c(et>=0&&O<k,"Invalid character"),M+=O}return M}function v(R,T){R.words=T.words,R.length=T.length,R.negative=T.negative,R.red=T.red}if(n.isBN=function(R){return R instanceof n||R!==null&&typeof R=="object"&&R.constructor.wordSize===n.wordSize&&Array.isArray(R.words)},n.max=function(R,T){return R.cmp(T)>0?R:T},n.min=function(R,T){return R.cmp(T)<0?R:T},n.prototype._init=function(R,T,C){if(typeof R=="number")return this._initNumber(R,T,C);if(typeof R=="object")return this._initArray(R,T,C);T==="hex"&&(T=16),c(T===(0|T)&&T>=2&&T<=36);var k=0;(R=R.toString().replace(/\s+/g,""))[0]==="-"&&(k++,this.negative=1),k<R.length&&(T===16?this._parseHex(R,k,C):(this._parseBase(R,T,k),C==="le"&&this._initArray(this.toArray(),T,C)))},n.prototype._initNumber=function(R,T,C){R<0&&(this.negative=1,R=-R),R<67108864?(this.words=[67108863&R],this.length=1):R<4503599627370496?(this.words=[67108863&R,R/67108864&67108863],this.length=2):(c(R<9007199254740992),this.words=[67108863&R,R/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),T,C)},n.prototype._initArray=function(R,T,C){if(c(typeof R.length=="number"),R.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(R.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var M,O,P=0;if(C==="be")for(k=R.length-1,M=0;k>=0;k-=3)O=R[k]|R[k-1]<<8|R[k-2]<<16,this.words[M]|=O<<P&67108863,this.words[M+1]=O>>>26-P&67108863,(P+=24)>=26&&(P-=26,M++);else if(C==="le")for(k=0,M=0;k<R.length;k+=3)O=R[k]|R[k+1]<<8|R[k+2]<<16,this.words[M]|=O<<P&67108863,this.words[M+1]=O>>>26-P&67108863,(P+=24)>=26&&(P-=26,M++);return this._strip()},n.prototype._parseHex=function(R,T,C){this.length=Math.ceil((R.length-T)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var M,O=0,P=0;if(C==="be")for(k=R.length-1;k>=T;k-=2)M=p(R,T,k)<<O,this.words[P]|=67108863&M,O>=18?(O-=18,P+=1,this.words[P]|=M>>>26):O+=8;else for(k=(R.length-T)%2==0?T+1:T;k<R.length;k+=2)M=p(R,T,k)<<O,this.words[P]|=67108863&M,O>=18?(O-=18,P+=1,this.words[P]|=M>>>26):O+=8;this._strip()},n.prototype._parseBase=function(R,T,C){this.words=[0],this.length=1;for(var k=0,M=1;M<=67108863;M*=T)k++;k--,M=M/T|0;for(var O=R.length-C,P=O%k,H=Math.min(O,O-P)+C,et=0,it=C;it<H;it+=k)et=g(R,it,it+k,T),this.imuln(M),this.words[0]+et<67108864?this.words[0]+=et:this._iaddn(et);if(P!==0){var pt=1;for(et=g(R,it,R.length,T),it=0;it<P;it++)pt*=T;this.imuln(pt),this.words[0]+et<67108864?this.words[0]+=et:this._iaddn(et)}this._strip()},n.prototype.copy=function(R){R.words=new Array(this.length);for(var T=0;T<this.length;T++)R.words[T]=this.words[T];R.length=this.length,R.negative=this.negative,R.red=this.red},n.prototype._move=function(R){v(R,this)},n.prototype.clone=function(){var R=new n(null);return this.copy(R),R},n.prototype._expand=function(R){for(;this.length<R;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{n.prototype.inspect=x}else n.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(R,T){var C;if(T=0|T||1,(R=R||10)===16||R==="hex"){C="";for(var k=0,M=0,O=0;O<this.length;O++){var P=this.words[O],H=(16777215&(P<<k|M)).toString(16);M=P>>>24-k&16777215,(k+=2)>=26&&(k-=26,O--),C=M!==0||O!==this.length-1?y[6-H.length]+H+C:H+C}for(M!==0&&(C=M.toString(16)+C);C.length%T!=0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(R===(0|R)&&R>=2&&R<=36){var et=w[R],it=S[R];C="";var pt=this.clone();for(pt.negative=0;!pt.isZero();){var X=pt.modrn(it).toString(R);C=(pt=pt.idivn(it)).isZero()?X+C:y[et-X.length]+X+C}for(this.isZero()&&(C="0"+C);C.length%T!=0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}c(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var R=this.words[0];return this.length===2?R+=67108864*this.words[1]:this.length===3&&this.words[2]===1?R+=4503599627370496+67108864*this.words[1]:this.length>2&&c(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-R:R},n.prototype.toJSON=function(){return this.toString(16,2)},f&&(n.prototype.toBuffer=function(R,T){return this.toArrayLike(f,R,T)}),n.prototype.toArray=function(R,T){return this.toArrayLike(Array,R,T)};function E(R,T,C){C.negative=T.negative^R.negative;var k=R.length+T.length|0;C.length=k,k=k-1|0;var M=0|R.words[0],O=0|T.words[0],P=M*O,H=67108863&P,et=P/67108864|0;C.words[0]=H;for(var it=1;it<k;it++){for(var pt=et>>>26,X=67108863&et,ut=Math.min(it,T.length-1),G=Math.max(0,it-R.length+1);G<=ut;G++){var U=it-G|0;pt+=(P=(M=0|R.words[U])*(O=0|T.words[G])+X)/67108864|0,X=67108863&P}C.words[it]=0|X,et=0|pt}return et!==0?C.words[it]=0|et:C.length--,C._strip()}n.prototype.toArrayLike=function(R,T,C){this._strip();var k=this.byteLength(),M=C||Math.max(1,k);c(k<=M,"byte array longer than desired length"),c(M>0,"Requested array length <= 0");var O=(function(P,H){return P.allocUnsafe?P.allocUnsafe(H):new P(H)})(R,M);return this["_toArrayLike"+(T==="le"?"LE":"BE")](O,k),O},n.prototype._toArrayLikeLE=function(R,T){for(var C=0,k=0,M=0,O=0;M<this.length;M++){var P=this.words[M]<<O|k;R[C++]=255&P,C<R.length&&(R[C++]=P>>8&255),C<R.length&&(R[C++]=P>>16&255),O===6?(C<R.length&&(R[C++]=P>>24&255),k=0,O=0):(k=P>>>24,O+=2)}if(C<R.length)for(R[C++]=k;C<R.length;)R[C++]=0},n.prototype._toArrayLikeBE=function(R,T){for(var C=R.length-1,k=0,M=0,O=0;M<this.length;M++){var P=this.words[M]<<O|k;R[C--]=255&P,C>=0&&(R[C--]=P>>8&255),C>=0&&(R[C--]=P>>16&255),O===6?(C>=0&&(R[C--]=P>>24&255),k=0,O=0):(k=P>>>24,O+=2)}if(C>=0)for(R[C--]=k;C>=0;)R[C--]=0},Math.clz32?n.prototype._countBits=function(R){return 32-Math.clz32(R)}:n.prototype._countBits=function(R){var T=R,C=0;return T>=4096&&(C+=13,T>>>=13),T>=64&&(C+=7,T>>>=7),T>=8&&(C+=4,T>>>=4),T>=2&&(C+=2,T>>>=2),C+T},n.prototype._zeroBits=function(R){if(R===0)return 26;var T=R,C=0;return(8191&T)==0&&(C+=13,T>>>=13),(127&T)==0&&(C+=7,T>>>=7),(15&T)==0&&(C+=4,T>>>=4),(3&T)==0&&(C+=2,T>>>=2),(1&T)==0&&C++,C},n.prototype.bitLength=function(){var R=this.words[this.length-1],T=this._countBits(R);return 26*(this.length-1)+T},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var R=0,T=0;T<this.length;T++){var C=this._zeroBits(this.words[T]);if(R+=C,C!==26)break}return R},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(R){return this.negative!==0?this.abs().inotn(R).iaddn(1):this.clone()},n.prototype.fromTwos=function(R){return this.testn(R-1)?this.notn(R).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(R){for(;this.length<R.length;)this.words[this.length++]=0;for(var T=0;T<R.length;T++)this.words[T]=this.words[T]|R.words[T];return this._strip()},n.prototype.ior=function(R){return c((this.negative|R.negative)==0),this.iuor(R)},n.prototype.or=function(R){return this.length>R.length?this.clone().ior(R):R.clone().ior(this)},n.prototype.uor=function(R){return this.length>R.length?this.clone().iuor(R):R.clone().iuor(this)},n.prototype.iuand=function(R){var T;T=this.length>R.length?R:this;for(var C=0;C<T.length;C++)this.words[C]=this.words[C]&R.words[C];return this.length=T.length,this._strip()},n.prototype.iand=function(R){return c((this.negative|R.negative)==0),this.iuand(R)},n.prototype.and=function(R){return this.length>R.length?this.clone().iand(R):R.clone().iand(this)},n.prototype.uand=function(R){return this.length>R.length?this.clone().iuand(R):R.clone().iuand(this)},n.prototype.iuxor=function(R){var T,C;this.length>R.length?(T=this,C=R):(T=R,C=this);for(var k=0;k<C.length;k++)this.words[k]=T.words[k]^C.words[k];if(this!==T)for(;k<T.length;k++)this.words[k]=T.words[k];return this.length=T.length,this._strip()},n.prototype.ixor=function(R){return c((this.negative|R.negative)==0),this.iuxor(R)},n.prototype.xor=function(R){return this.length>R.length?this.clone().ixor(R):R.clone().ixor(this)},n.prototype.uxor=function(R){return this.length>R.length?this.clone().iuxor(R):R.clone().iuxor(this)},n.prototype.inotn=function(R){c(typeof R=="number"&&R>=0);var T=0|Math.ceil(R/26),C=R%26;this._expand(T),C>0&&T--;for(var k=0;k<T;k++)this.words[k]=67108863&~this.words[k];return C>0&&(this.words[k]=~this.words[k]&67108863>>26-C),this._strip()},n.prototype.notn=function(R){return this.clone().inotn(R)},n.prototype.setn=function(R,T){c(typeof R=="number"&&R>=0);var C=R/26|0,k=R%26;return this._expand(C+1),this.words[C]=T?this.words[C]|1<<k:this.words[C]&~(1<<k),this._strip()},n.prototype.iadd=function(R){var T,C,k;if(this.negative!==0&&R.negative===0)return this.negative=0,T=this.isub(R),this.negative^=1,this._normSign();if(this.negative===0&&R.negative!==0)return R.negative=0,T=this.isub(R),R.negative=1,T._normSign();this.length>R.length?(C=this,k=R):(C=R,k=this);for(var M=0,O=0;O<k.length;O++)T=(0|C.words[O])+(0|k.words[O])+M,this.words[O]=67108863&T,M=T>>>26;for(;M!==0&&O<C.length;O++)T=(0|C.words[O])+M,this.words[O]=67108863&T,M=T>>>26;if(this.length=C.length,M!==0)this.words[this.length]=M,this.length++;else if(C!==this)for(;O<C.length;O++)this.words[O]=C.words[O];return this},n.prototype.add=function(R){var T;return R.negative!==0&&this.negative===0?(R.negative=0,T=this.sub(R),R.negative^=1,T):R.negative===0&&this.negative!==0?(this.negative=0,T=R.sub(this),this.negative=1,T):this.length>R.length?this.clone().iadd(R):R.clone().iadd(this)},n.prototype.isub=function(R){if(R.negative!==0){R.negative=0;var T=this.iadd(R);return R.negative=1,T._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(R),this.negative=1,this._normSign();var C,k,M=this.cmp(R);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;M>0?(C=this,k=R):(C=R,k=this);for(var O=0,P=0;P<k.length;P++)O=(T=(0|C.words[P])-(0|k.words[P])+O)>>26,this.words[P]=67108863&T;for(;O!==0&&P<C.length;P++)O=(T=(0|C.words[P])+O)>>26,this.words[P]=67108863&T;if(O===0&&P<C.length&&C!==this)for(;P<C.length;P++)this.words[P]=C.words[P];return this.length=Math.max(this.length,P),C!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(R){return this.clone().isub(R)};var I=function(R,T,C){var k,M,O,P=R.words,H=T.words,et=C.words,it=0,pt=0|P[0],X=8191&pt,ut=pt>>>13,G=0|P[1],U=8191&G,st=G>>>13,gt=0|P[2],zt=8191&gt,St=gt>>>13,Bt=0|P[3],ie=8191&Bt,re=Bt>>>13,Ct=0|P[4],Yt=8191&Ct,Qt=Ct>>>13,Ht=0|P[5],Jt=8191&Ht,ne=Ht>>>13,ae=0|P[6],me=8191&ae,Le=ae>>>13,Pe=0|P[7],Be=8191&Pe,He=Pe>>>13,Je=0|P[8],sn=8191&Je,un=Je>>>13,an=0|P[9],ge=8191&an,Ve=an>>>13,Ke=0|H[0],dn=8191&Ke,ln=Ke>>>13,$n=0|H[1],hr=8191&$n,Ye=$n>>>13,Xn=0|H[2],Wn=8191&Xn,Cn=Xn>>>13,br=0|H[3],Ge=8191&br,Ln=br>>>13,ir=0|H[4],Zn=8191&ir,cn=ir>>>13,Qn=0|H[5],qn=8191&Qn,jn=Qn>>>13,ue=0|H[6],ye=8191&ue,be=ue>>>13,Qe=0|H[7],yn=8191&Qe,qe=Qe>>>13,fn=0|H[8],gn=8191&fn,wn=fn>>>13,bn=0|H[9],Sn=8191&bn,Fn=bn>>>13;C.negative=R.negative^T.negative,C.length=19;var pr=(it+(k=Math.imul(X,dn))|0)+((8191&(M=(M=Math.imul(X,ln))+Math.imul(ut,dn)|0))<<13)|0;it=((O=Math.imul(ut,ln))+(M>>>13)|0)+(pr>>>26)|0,pr&=67108863,k=Math.imul(U,dn),M=(M=Math.imul(U,ln))+Math.imul(st,dn)|0,O=Math.imul(st,ln);var Gn=(it+(k=k+Math.imul(X,hr)|0)|0)+((8191&(M=(M=M+Math.imul(X,Ye)|0)+Math.imul(ut,hr)|0))<<13)|0;it=((O=O+Math.imul(ut,Ye)|0)+(M>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,k=Math.imul(zt,dn),M=(M=Math.imul(zt,ln))+Math.imul(St,dn)|0,O=Math.imul(St,ln),k=k+Math.imul(U,hr)|0,M=(M=M+Math.imul(U,Ye)|0)+Math.imul(st,hr)|0,O=O+Math.imul(st,Ye)|0;var Nr=(it+(k=k+Math.imul(X,Wn)|0)|0)+((8191&(M=(M=M+Math.imul(X,Cn)|0)+Math.imul(ut,Wn)|0))<<13)|0;it=((O=O+Math.imul(ut,Cn)|0)+(M>>>13)|0)+(Nr>>>26)|0,Nr&=67108863,k=Math.imul(ie,dn),M=(M=Math.imul(ie,ln))+Math.imul(re,dn)|0,O=Math.imul(re,ln),k=k+Math.imul(zt,hr)|0,M=(M=M+Math.imul(zt,Ye)|0)+Math.imul(St,hr)|0,O=O+Math.imul(St,Ye)|0,k=k+Math.imul(U,Wn)|0,M=(M=M+Math.imul(U,Cn)|0)+Math.imul(st,Wn)|0,O=O+Math.imul(st,Cn)|0;var Cr=(it+(k=k+Math.imul(X,Ge)|0)|0)+((8191&(M=(M=M+Math.imul(X,Ln)|0)+Math.imul(ut,Ge)|0))<<13)|0;it=((O=O+Math.imul(ut,Ln)|0)+(M>>>13)|0)+(Cr>>>26)|0,Cr&=67108863,k=Math.imul(Yt,dn),M=(M=Math.imul(Yt,ln))+Math.imul(Qt,dn)|0,O=Math.imul(Qt,ln),k=k+Math.imul(ie,hr)|0,M=(M=M+Math.imul(ie,Ye)|0)+Math.imul(re,hr)|0,O=O+Math.imul(re,Ye)|0,k=k+Math.imul(zt,Wn)|0,M=(M=M+Math.imul(zt,Cn)|0)+Math.imul(St,Wn)|0,O=O+Math.imul(St,Cn)|0,k=k+Math.imul(U,Ge)|0,M=(M=M+Math.imul(U,Ln)|0)+Math.imul(st,Ge)|0,O=O+Math.imul(st,Ln)|0;var oi=(it+(k=k+Math.imul(X,Zn)|0)|0)+((8191&(M=(M=M+Math.imul(X,cn)|0)+Math.imul(ut,Zn)|0))<<13)|0;it=((O=O+Math.imul(ut,cn)|0)+(M>>>13)|0)+(oi>>>26)|0,oi&=67108863,k=Math.imul(Jt,dn),M=(M=Math.imul(Jt,ln))+Math.imul(ne,dn)|0,O=Math.imul(ne,ln),k=k+Math.imul(Yt,hr)|0,M=(M=M+Math.imul(Yt,Ye)|0)+Math.imul(Qt,hr)|0,O=O+Math.imul(Qt,Ye)|0,k=k+Math.imul(ie,Wn)|0,M=(M=M+Math.imul(ie,Cn)|0)+Math.imul(re,Wn)|0,O=O+Math.imul(re,Cn)|0,k=k+Math.imul(zt,Ge)|0,M=(M=M+Math.imul(zt,Ln)|0)+Math.imul(St,Ge)|0,O=O+Math.imul(St,Ln)|0,k=k+Math.imul(U,Zn)|0,M=(M=M+Math.imul(U,cn)|0)+Math.imul(st,Zn)|0,O=O+Math.imul(st,cn)|0;var Kt=(it+(k=k+Math.imul(X,qn)|0)|0)+((8191&(M=(M=M+Math.imul(X,jn)|0)+Math.imul(ut,qn)|0))<<13)|0;it=((O=O+Math.imul(ut,jn)|0)+(M>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,k=Math.imul(me,dn),M=(M=Math.imul(me,ln))+Math.imul(Le,dn)|0,O=Math.imul(Le,ln),k=k+Math.imul(Jt,hr)|0,M=(M=M+Math.imul(Jt,Ye)|0)+Math.imul(ne,hr)|0,O=O+Math.imul(ne,Ye)|0,k=k+Math.imul(Yt,Wn)|0,M=(M=M+Math.imul(Yt,Cn)|0)+Math.imul(Qt,Wn)|0,O=O+Math.imul(Qt,Cn)|0,k=k+Math.imul(ie,Ge)|0,M=(M=M+Math.imul(ie,Ln)|0)+Math.imul(re,Ge)|0,O=O+Math.imul(re,Ln)|0,k=k+Math.imul(zt,Zn)|0,M=(M=M+Math.imul(zt,cn)|0)+Math.imul(St,Zn)|0,O=O+Math.imul(St,cn)|0,k=k+Math.imul(U,qn)|0,M=(M=M+Math.imul(U,jn)|0)+Math.imul(st,qn)|0,O=O+Math.imul(st,jn)|0;var we=(it+(k=k+Math.imul(X,ye)|0)|0)+((8191&(M=(M=M+Math.imul(X,be)|0)+Math.imul(ut,ye)|0))<<13)|0;it=((O=O+Math.imul(ut,be)|0)+(M>>>13)|0)+(we>>>26)|0,we&=67108863,k=Math.imul(Be,dn),M=(M=Math.imul(Be,ln))+Math.imul(He,dn)|0,O=Math.imul(He,ln),k=k+Math.imul(me,hr)|0,M=(M=M+Math.imul(me,Ye)|0)+Math.imul(Le,hr)|0,O=O+Math.imul(Le,Ye)|0,k=k+Math.imul(Jt,Wn)|0,M=(M=M+Math.imul(Jt,Cn)|0)+Math.imul(ne,Wn)|0,O=O+Math.imul(ne,Cn)|0,k=k+Math.imul(Yt,Ge)|0,M=(M=M+Math.imul(Yt,Ln)|0)+Math.imul(Qt,Ge)|0,O=O+Math.imul(Qt,Ln)|0,k=k+Math.imul(ie,Zn)|0,M=(M=M+Math.imul(ie,cn)|0)+Math.imul(re,Zn)|0,O=O+Math.imul(re,cn)|0,k=k+Math.imul(zt,qn)|0,M=(M=M+Math.imul(zt,jn)|0)+Math.imul(St,qn)|0,O=O+Math.imul(St,jn)|0,k=k+Math.imul(U,ye)|0,M=(M=M+Math.imul(U,be)|0)+Math.imul(st,ye)|0,O=O+Math.imul(st,be)|0;var De=(it+(k=k+Math.imul(X,yn)|0)|0)+((8191&(M=(M=M+Math.imul(X,qe)|0)+Math.imul(ut,yn)|0))<<13)|0;it=((O=O+Math.imul(ut,qe)|0)+(M>>>13)|0)+(De>>>26)|0,De&=67108863,k=Math.imul(sn,dn),M=(M=Math.imul(sn,ln))+Math.imul(un,dn)|0,O=Math.imul(un,ln),k=k+Math.imul(Be,hr)|0,M=(M=M+Math.imul(Be,Ye)|0)+Math.imul(He,hr)|0,O=O+Math.imul(He,Ye)|0,k=k+Math.imul(me,Wn)|0,M=(M=M+Math.imul(me,Cn)|0)+Math.imul(Le,Wn)|0,O=O+Math.imul(Le,Cn)|0,k=k+Math.imul(Jt,Ge)|0,M=(M=M+Math.imul(Jt,Ln)|0)+Math.imul(ne,Ge)|0,O=O+Math.imul(ne,Ln)|0,k=k+Math.imul(Yt,Zn)|0,M=(M=M+Math.imul(Yt,cn)|0)+Math.imul(Qt,Zn)|0,O=O+Math.imul(Qt,cn)|0,k=k+Math.imul(ie,qn)|0,M=(M=M+Math.imul(ie,jn)|0)+Math.imul(re,qn)|0,O=O+Math.imul(re,jn)|0,k=k+Math.imul(zt,ye)|0,M=(M=M+Math.imul(zt,be)|0)+Math.imul(St,ye)|0,O=O+Math.imul(St,be)|0,k=k+Math.imul(U,yn)|0,M=(M=M+Math.imul(U,qe)|0)+Math.imul(st,yn)|0,O=O+Math.imul(st,qe)|0;var $e=(it+(k=k+Math.imul(X,gn)|0)|0)+((8191&(M=(M=M+Math.imul(X,wn)|0)+Math.imul(ut,gn)|0))<<13)|0;it=((O=O+Math.imul(ut,wn)|0)+(M>>>13)|0)+($e>>>26)|0,$e&=67108863,k=Math.imul(ge,dn),M=(M=Math.imul(ge,ln))+Math.imul(Ve,dn)|0,O=Math.imul(Ve,ln),k=k+Math.imul(sn,hr)|0,M=(M=M+Math.imul(sn,Ye)|0)+Math.imul(un,hr)|0,O=O+Math.imul(un,Ye)|0,k=k+Math.imul(Be,Wn)|0,M=(M=M+Math.imul(Be,Cn)|0)+Math.imul(He,Wn)|0,O=O+Math.imul(He,Cn)|0,k=k+Math.imul(me,Ge)|0,M=(M=M+Math.imul(me,Ln)|0)+Math.imul(Le,Ge)|0,O=O+Math.imul(Le,Ln)|0,k=k+Math.imul(Jt,Zn)|0,M=(M=M+Math.imul(Jt,cn)|0)+Math.imul(ne,Zn)|0,O=O+Math.imul(ne,cn)|0,k=k+Math.imul(Yt,qn)|0,M=(M=M+Math.imul(Yt,jn)|0)+Math.imul(Qt,qn)|0,O=O+Math.imul(Qt,jn)|0,k=k+Math.imul(ie,ye)|0,M=(M=M+Math.imul(ie,be)|0)+Math.imul(re,ye)|0,O=O+Math.imul(re,be)|0,k=k+Math.imul(zt,yn)|0,M=(M=M+Math.imul(zt,qe)|0)+Math.imul(St,yn)|0,O=O+Math.imul(St,qe)|0,k=k+Math.imul(U,gn)|0,M=(M=M+Math.imul(U,wn)|0)+Math.imul(st,gn)|0,O=O+Math.imul(st,wn)|0;var Tn=(it+(k=k+Math.imul(X,Sn)|0)|0)+((8191&(M=(M=M+Math.imul(X,Fn)|0)+Math.imul(ut,Sn)|0))<<13)|0;it=((O=O+Math.imul(ut,Fn)|0)+(M>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,k=Math.imul(ge,hr),M=(M=Math.imul(ge,Ye))+Math.imul(Ve,hr)|0,O=Math.imul(Ve,Ye),k=k+Math.imul(sn,Wn)|0,M=(M=M+Math.imul(sn,Cn)|0)+Math.imul(un,Wn)|0,O=O+Math.imul(un,Cn)|0,k=k+Math.imul(Be,Ge)|0,M=(M=M+Math.imul(Be,Ln)|0)+Math.imul(He,Ge)|0,O=O+Math.imul(He,Ln)|0,k=k+Math.imul(me,Zn)|0,M=(M=M+Math.imul(me,cn)|0)+Math.imul(Le,Zn)|0,O=O+Math.imul(Le,cn)|0,k=k+Math.imul(Jt,qn)|0,M=(M=M+Math.imul(Jt,jn)|0)+Math.imul(ne,qn)|0,O=O+Math.imul(ne,jn)|0,k=k+Math.imul(Yt,ye)|0,M=(M=M+Math.imul(Yt,be)|0)+Math.imul(Qt,ye)|0,O=O+Math.imul(Qt,be)|0,k=k+Math.imul(ie,yn)|0,M=(M=M+Math.imul(ie,qe)|0)+Math.imul(re,yn)|0,O=O+Math.imul(re,qe)|0,k=k+Math.imul(zt,gn)|0,M=(M=M+Math.imul(zt,wn)|0)+Math.imul(St,gn)|0,O=O+Math.imul(St,wn)|0;var Ze=(it+(k=k+Math.imul(U,Sn)|0)|0)+((8191&(M=(M=M+Math.imul(U,Fn)|0)+Math.imul(st,Sn)|0))<<13)|0;it=((O=O+Math.imul(st,Fn)|0)+(M>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,k=Math.imul(ge,Wn),M=(M=Math.imul(ge,Cn))+Math.imul(Ve,Wn)|0,O=Math.imul(Ve,Cn),k=k+Math.imul(sn,Ge)|0,M=(M=M+Math.imul(sn,Ln)|0)+Math.imul(un,Ge)|0,O=O+Math.imul(un,Ln)|0,k=k+Math.imul(Be,Zn)|0,M=(M=M+Math.imul(Be,cn)|0)+Math.imul(He,Zn)|0,O=O+Math.imul(He,cn)|0,k=k+Math.imul(me,qn)|0,M=(M=M+Math.imul(me,jn)|0)+Math.imul(Le,qn)|0,O=O+Math.imul(Le,jn)|0,k=k+Math.imul(Jt,ye)|0,M=(M=M+Math.imul(Jt,be)|0)+Math.imul(ne,ye)|0,O=O+Math.imul(ne,be)|0,k=k+Math.imul(Yt,yn)|0,M=(M=M+Math.imul(Yt,qe)|0)+Math.imul(Qt,yn)|0,O=O+Math.imul(Qt,qe)|0,k=k+Math.imul(ie,gn)|0,M=(M=M+Math.imul(ie,wn)|0)+Math.imul(re,gn)|0,O=O+Math.imul(re,wn)|0;var Xe=(it+(k=k+Math.imul(zt,Sn)|0)|0)+((8191&(M=(M=M+Math.imul(zt,Fn)|0)+Math.imul(St,Sn)|0))<<13)|0;it=((O=O+Math.imul(St,Fn)|0)+(M>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,k=Math.imul(ge,Ge),M=(M=Math.imul(ge,Ln))+Math.imul(Ve,Ge)|0,O=Math.imul(Ve,Ln),k=k+Math.imul(sn,Zn)|0,M=(M=M+Math.imul(sn,cn)|0)+Math.imul(un,Zn)|0,O=O+Math.imul(un,cn)|0,k=k+Math.imul(Be,qn)|0,M=(M=M+Math.imul(Be,jn)|0)+Math.imul(He,qn)|0,O=O+Math.imul(He,jn)|0,k=k+Math.imul(me,ye)|0,M=(M=M+Math.imul(me,be)|0)+Math.imul(Le,ye)|0,O=O+Math.imul(Le,be)|0,k=k+Math.imul(Jt,yn)|0,M=(M=M+Math.imul(Jt,qe)|0)+Math.imul(ne,yn)|0,O=O+Math.imul(ne,qe)|0,k=k+Math.imul(Yt,gn)|0,M=(M=M+Math.imul(Yt,wn)|0)+Math.imul(Qt,gn)|0,O=O+Math.imul(Qt,wn)|0;var vn=(it+(k=k+Math.imul(ie,Sn)|0)|0)+((8191&(M=(M=M+Math.imul(ie,Fn)|0)+Math.imul(re,Sn)|0))<<13)|0;it=((O=O+Math.imul(re,Fn)|0)+(M>>>13)|0)+(vn>>>26)|0,vn&=67108863,k=Math.imul(ge,Zn),M=(M=Math.imul(ge,cn))+Math.imul(Ve,Zn)|0,O=Math.imul(Ve,cn),k=k+Math.imul(sn,qn)|0,M=(M=M+Math.imul(sn,jn)|0)+Math.imul(un,qn)|0,O=O+Math.imul(un,jn)|0,k=k+Math.imul(Be,ye)|0,M=(M=M+Math.imul(Be,be)|0)+Math.imul(He,ye)|0,O=O+Math.imul(He,be)|0,k=k+Math.imul(me,yn)|0,M=(M=M+Math.imul(me,qe)|0)+Math.imul(Le,yn)|0,O=O+Math.imul(Le,qe)|0,k=k+Math.imul(Jt,gn)|0,M=(M=M+Math.imul(Jt,wn)|0)+Math.imul(ne,gn)|0,O=O+Math.imul(ne,wn)|0;var Dn=(it+(k=k+Math.imul(Yt,Sn)|0)|0)+((8191&(M=(M=M+Math.imul(Yt,Fn)|0)+Math.imul(Qt,Sn)|0))<<13)|0;it=((O=O+Math.imul(Qt,Fn)|0)+(M>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,k=Math.imul(ge,qn),M=(M=Math.imul(ge,jn))+Math.imul(Ve,qn)|0,O=Math.imul(Ve,jn),k=k+Math.imul(sn,ye)|0,M=(M=M+Math.imul(sn,be)|0)+Math.imul(un,ye)|0,O=O+Math.imul(un,be)|0,k=k+Math.imul(Be,yn)|0,M=(M=M+Math.imul(Be,qe)|0)+Math.imul(He,yn)|0,O=O+Math.imul(He,qe)|0,k=k+Math.imul(me,gn)|0,M=(M=M+Math.imul(me,wn)|0)+Math.imul(Le,gn)|0,O=O+Math.imul(Le,wn)|0;var Bn=(it+(k=k+Math.imul(Jt,Sn)|0)|0)+((8191&(M=(M=M+Math.imul(Jt,Fn)|0)+Math.imul(ne,Sn)|0))<<13)|0;it=((O=O+Math.imul(ne,Fn)|0)+(M>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,k=Math.imul(ge,ye),M=(M=Math.imul(ge,be))+Math.imul(Ve,ye)|0,O=Math.imul(Ve,be),k=k+Math.imul(sn,yn)|0,M=(M=M+Math.imul(sn,qe)|0)+Math.imul(un,yn)|0,O=O+Math.imul(un,qe)|0,k=k+Math.imul(Be,gn)|0,M=(M=M+Math.imul(Be,wn)|0)+Math.imul(He,gn)|0,O=O+Math.imul(He,wn)|0;var kn=(it+(k=k+Math.imul(me,Sn)|0)|0)+((8191&(M=(M=M+Math.imul(me,Fn)|0)+Math.imul(Le,Sn)|0))<<13)|0;it=((O=O+Math.imul(Le,Fn)|0)+(M>>>13)|0)+(kn>>>26)|0,kn&=67108863,k=Math.imul(ge,yn),M=(M=Math.imul(ge,qe))+Math.imul(Ve,yn)|0,O=Math.imul(Ve,qe),k=k+Math.imul(sn,gn)|0,M=(M=M+Math.imul(sn,wn)|0)+Math.imul(un,gn)|0,O=O+Math.imul(un,wn)|0;var xn=(it+(k=k+Math.imul(Be,Sn)|0)|0)+((8191&(M=(M=M+Math.imul(Be,Fn)|0)+Math.imul(He,Sn)|0))<<13)|0;it=((O=O+Math.imul(He,Fn)|0)+(M>>>13)|0)+(xn>>>26)|0,xn&=67108863,k=Math.imul(ge,gn),M=(M=Math.imul(ge,wn))+Math.imul(Ve,gn)|0,O=Math.imul(Ve,wn);var En=(it+(k=k+Math.imul(sn,Sn)|0)|0)+((8191&(M=(M=M+Math.imul(sn,Fn)|0)+Math.imul(un,Sn)|0))<<13)|0;it=((O=O+Math.imul(un,Fn)|0)+(M>>>13)|0)+(En>>>26)|0,En&=67108863;var Un=(it+(k=Math.imul(ge,Sn))|0)+((8191&(M=(M=Math.imul(ge,Fn))+Math.imul(Ve,Sn)|0))<<13)|0;return it=((O=Math.imul(Ve,Fn))+(M>>>13)|0)+(Un>>>26)|0,Un&=67108863,et[0]=pr,et[1]=Gn,et[2]=Nr,et[3]=Cr,et[4]=oi,et[5]=Kt,et[6]=we,et[7]=De,et[8]=$e,et[9]=Tn,et[10]=Ze,et[11]=Xe,et[12]=vn,et[13]=Dn,et[14]=Bn,et[15]=kn,et[16]=xn,et[17]=En,et[18]=Un,it!==0&&(et[19]=it,C.length++),C};function D(R,T,C){C.negative=T.negative^R.negative,C.length=R.length+T.length;for(var k=0,M=0,O=0;O<C.length-1;O++){var P=M;M=0;for(var H=67108863&k,et=Math.min(O,T.length-1),it=Math.max(0,O-R.length+1);it<=et;it++){var pt=O-it,X=(0|R.words[pt])*(0|T.words[it]),ut=67108863&X;H=67108863&(ut=ut+H|0),M+=(P=(P=P+(X/67108864|0)|0)+(ut>>>26)|0)>>>26,P&=67108863}C.words[O]=H,k=P,P=M}return k!==0?C.words[O]=k:C.length--,C._strip()}function Z(R,T,C){return D(R,T,C)}Math.imul||(I=E),n.prototype.mulTo=function(R,T){var C=this.length+R.length;return this.length===10&&R.length===10?I(this,R,T):C<63?E(this,R,T):C<1024?D(this,R,T):Z(this,R,T)},n.prototype.mul=function(R){var T=new n(null);return T.words=new Array(this.length+R.length),this.mulTo(R,T)},n.prototype.mulf=function(R){var T=new n(null);return T.words=new Array(this.length+R.length),Z(this,R,T)},n.prototype.imul=function(R){return this.clone().mulTo(R,this)},n.prototype.imuln=function(R){var T=R<0;T&&(R=-R),c(typeof R=="number"),c(R<67108864);for(var C=0,k=0;k<this.length;k++){var M=(0|this.words[k])*R,O=(67108863&M)+(67108863&C);C>>=26,C+=M/67108864|0,C+=O>>>26,this.words[k]=67108863&O}return C!==0&&(this.words[k]=C,this.length++),T?this.ineg():this},n.prototype.muln=function(R){return this.clone().imuln(R)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(R){var T=(function(O){for(var P=new Array(O.bitLength()),H=0;H<P.length;H++){var et=H/26|0,it=H%26;P[H]=O.words[et]>>>it&1}return P})(R);if(T.length===0)return new n(1);for(var C=this,k=0;k<T.length&&T[k]===0;k++,C=C.sqr());if(++k<T.length)for(var M=C.sqr();k<T.length;k++,M=M.sqr())T[k]!==0&&(C=C.mul(M));return C},n.prototype.iushln=function(R){c(typeof R=="number"&&R>=0);var T,C=R%26,k=(R-C)/26,M=67108863>>>26-C<<26-C;if(C!==0){var O=0;for(T=0;T<this.length;T++){var P=this.words[T]&M,H=(0|this.words[T])-P<<C;this.words[T]=H|O,O=P>>>26-C}O&&(this.words[T]=O,this.length++)}if(k!==0){for(T=this.length-1;T>=0;T--)this.words[T+k]=this.words[T];for(T=0;T<k;T++)this.words[T]=0;this.length+=k}return this._strip()},n.prototype.ishln=function(R){return c(this.negative===0),this.iushln(R)},n.prototype.iushrn=function(R,T,C){var k;c(typeof R=="number"&&R>=0),k=T?(T-T%26)/26:0;var M=R%26,O=Math.min((R-M)/26,this.length),P=67108863^67108863>>>M<<M,H=C;if(k-=O,k=Math.max(0,k),H){for(var et=0;et<O;et++)H.words[et]=this.words[et];H.length=O}if(O!==0)if(this.length>O)for(this.length-=O,et=0;et<this.length;et++)this.words[et]=this.words[et+O];else this.words[0]=0,this.length=1;var it=0;for(et=this.length-1;et>=0&&(it!==0||et>=k);et--){var pt=0|this.words[et];this.words[et]=it<<26-M|pt>>>M,it=pt&P}return H&&it!==0&&(H.words[H.length++]=it),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(R,T,C){return c(this.negative===0),this.iushrn(R,T,C)},n.prototype.shln=function(R){return this.clone().ishln(R)},n.prototype.ushln=function(R){return this.clone().iushln(R)},n.prototype.shrn=function(R){return this.clone().ishrn(R)},n.prototype.ushrn=function(R){return this.clone().iushrn(R)},n.prototype.testn=function(R){c(typeof R=="number"&&R>=0);var T=R%26,C=(R-T)/26,k=1<<T;return!(this.length<=C)&&!!(this.words[C]&k)},n.prototype.imaskn=function(R){c(typeof R=="number"&&R>=0);var T=R%26,C=(R-T)/26;if(c(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(T!==0&&C++,this.length=Math.min(C,this.length),T!==0){var k=67108863^67108863>>>T<<T;this.words[this.length-1]&=k}return this._strip()},n.prototype.maskn=function(R){return this.clone().imaskn(R)},n.prototype.iaddn=function(R){return c(typeof R=="number"),c(R<67108864),R<0?this.isubn(-R):this.negative!==0?this.length===1&&(0|this.words[0])<=R?(this.words[0]=R-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(R),this.negative=1,this):this._iaddn(R)},n.prototype._iaddn=function(R){this.words[0]+=R;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},n.prototype.isubn=function(R){if(c(typeof R=="number"),c(R<67108864),R<0)return this.iaddn(-R);if(this.negative!==0)return this.negative=0,this.iaddn(R),this.negative=1,this;if(this.words[0]-=R,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this._strip()},n.prototype.addn=function(R){return this.clone().iaddn(R)},n.prototype.subn=function(R){return this.clone().isubn(R)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(R,T,C){var k,M,O=R.length+C;this._expand(O);var P=0;for(k=0;k<R.length;k++){M=(0|this.words[k+C])+P;var H=(0|R.words[k])*T;P=((M-=67108863&H)>>26)-(H/67108864|0),this.words[k+C]=67108863&M}for(;k<this.length-C;k++)P=(M=(0|this.words[k+C])+P)>>26,this.words[k+C]=67108863&M;if(P===0)return this._strip();for(c(P===-1),P=0,k=0;k<this.length;k++)P=(M=-(0|this.words[k])+P)>>26,this.words[k]=67108863&M;return this.negative=1,this._strip()},n.prototype._wordDiv=function(R,T){var C=(this.length,R.length),k=this.clone(),M=R,O=0|M.words[M.length-1];(C=26-this._countBits(O))!==0&&(M=M.ushln(C),k.iushln(C),O=0|M.words[M.length-1]);var P,H=k.length-M.length;if(T!=="mod"){(P=new n(null)).length=H+1,P.words=new Array(P.length);for(var et=0;et<P.length;et++)P.words[et]=0}var it=k.clone()._ishlnsubmul(M,1,H);it.negative===0&&(k=it,P&&(P.words[H]=1));for(var pt=H-1;pt>=0;pt--){var X=67108864*(0|k.words[M.length+pt])+(0|k.words[M.length+pt-1]);for(X=Math.min(X/O|0,67108863),k._ishlnsubmul(M,X,pt);k.negative!==0;)X--,k.negative=0,k._ishlnsubmul(M,1,pt),k.isZero()||(k.negative^=1);P&&(P.words[pt]=X)}return P&&P._strip(),k._strip(),T!=="div"&&C!==0&&k.iushrn(C),{div:P||null,mod:k}},n.prototype.divmod=function(R,T,C){return c(!R.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:this.negative!==0&&R.negative===0?(O=this.neg().divmod(R,T),T!=="mod"&&(k=O.div.neg()),T!=="div"&&(M=O.mod.neg(),C&&M.negative!==0&&M.iadd(R)),{div:k,mod:M}):this.negative===0&&R.negative!==0?(O=this.divmod(R.neg(),T),T!=="mod"&&(k=O.div.neg()),{div:k,mod:O.mod}):(this.negative&R.negative)!=0?(O=this.neg().divmod(R.neg(),T),T!=="div"&&(M=O.mod.neg(),C&&M.negative!==0&&M.isub(R)),{div:O.div,mod:M}):R.length>this.length||this.cmp(R)<0?{div:new n(0),mod:this}:R.length===1?T==="div"?{div:this.divn(R.words[0]),mod:null}:T==="mod"?{div:null,mod:new n(this.modrn(R.words[0]))}:{div:this.divn(R.words[0]),mod:new n(this.modrn(R.words[0]))}:this._wordDiv(R,T);var k,M,O},n.prototype.div=function(R){return this.divmod(R,"div",!1).div},n.prototype.mod=function(R){return this.divmod(R,"mod",!1).mod},n.prototype.umod=function(R){return this.divmod(R,"mod",!0).mod},n.prototype.divRound=function(R){var T=this.divmod(R);if(T.mod.isZero())return T.div;var C=T.div.negative!==0?T.mod.isub(R):T.mod,k=R.ushrn(1),M=R.andln(1),O=C.cmp(k);return O<0||M===1&&O===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},n.prototype.modrn=function(R){var T=R<0;T&&(R=-R),c(R<=67108863);for(var C=(1<<26)%R,k=0,M=this.length-1;M>=0;M--)k=(C*k+(0|this.words[M]))%R;return T?-k:k},n.prototype.modn=function(R){return this.modrn(R)},n.prototype.idivn=function(R){var T=R<0;T&&(R=-R),c(R<=67108863);for(var C=0,k=this.length-1;k>=0;k--){var M=(0|this.words[k])+67108864*C;this.words[k]=M/R|0,C=M%R}return this._strip(),T?this.ineg():this},n.prototype.divn=function(R){return this.clone().idivn(R)},n.prototype.egcd=function(R){c(R.negative===0),c(!R.isZero());var T=this,C=R.clone();T=T.negative!==0?T.umod(R):T.clone();for(var k=new n(1),M=new n(0),O=new n(0),P=new n(1),H=0;T.isEven()&&C.isEven();)T.iushrn(1),C.iushrn(1),++H;for(var et=C.clone(),it=T.clone();!T.isZero();){for(var pt=0,X=1;(T.words[0]&X)==0&&pt<26;++pt,X<<=1);if(pt>0)for(T.iushrn(pt);pt-- >0;)(k.isOdd()||M.isOdd())&&(k.iadd(et),M.isub(it)),k.iushrn(1),M.iushrn(1);for(var ut=0,G=1;(C.words[0]&G)==0&&ut<26;++ut,G<<=1);if(ut>0)for(C.iushrn(ut);ut-- >0;)(O.isOdd()||P.isOdd())&&(O.iadd(et),P.isub(it)),O.iushrn(1),P.iushrn(1);T.cmp(C)>=0?(T.isub(C),k.isub(O),M.isub(P)):(C.isub(T),O.isub(k),P.isub(M))}return{a:O,b:P,gcd:C.iushln(H)}},n.prototype._invmp=function(R){c(R.negative===0),c(!R.isZero());var T=this,C=R.clone();T=T.negative!==0?T.umod(R):T.clone();for(var k,M=new n(1),O=new n(0),P=C.clone();T.cmpn(1)>0&&C.cmpn(1)>0;){for(var H=0,et=1;(T.words[0]&et)==0&&H<26;++H,et<<=1);if(H>0)for(T.iushrn(H);H-- >0;)M.isOdd()&&M.iadd(P),M.iushrn(1);for(var it=0,pt=1;(C.words[0]&pt)==0&&it<26;++it,pt<<=1);if(it>0)for(C.iushrn(it);it-- >0;)O.isOdd()&&O.iadd(P),O.iushrn(1);T.cmp(C)>=0?(T.isub(C),M.isub(O)):(C.isub(T),O.isub(M))}return(k=T.cmpn(1)===0?M:O).cmpn(0)<0&&k.iadd(R),k},n.prototype.gcd=function(R){if(this.isZero())return R.abs();if(R.isZero())return this.abs();var T=this.clone(),C=R.clone();T.negative=0,C.negative=0;for(var k=0;T.isEven()&&C.isEven();k++)T.iushrn(1),C.iushrn(1);for(;;){for(;T.isEven();)T.iushrn(1);for(;C.isEven();)C.iushrn(1);var M=T.cmp(C);if(M<0){var O=T;T=C,C=O}else if(M===0||C.cmpn(1)===0)break;T.isub(C)}return C.iushln(k)},n.prototype.invm=function(R){return this.egcd(R).a.umod(R)},n.prototype.isEven=function(){return(1&this.words[0])==0},n.prototype.isOdd=function(){return(1&this.words[0])==1},n.prototype.andln=function(R){return this.words[0]&R},n.prototype.bincn=function(R){c(typeof R=="number");var T=R%26,C=(R-T)/26,k=1<<T;if(this.length<=C)return this._expand(C+1),this.words[C]|=k,this;for(var M=k,O=C;M!==0&&O<this.length;O++){var P=0|this.words[O];M=(P+=M)>>>26,P&=67108863,this.words[O]=P}return M!==0&&(this.words[O]=M,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(R){var T,C=R<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;if(this._strip(),this.length>1)T=1;else{C&&(R=-R),c(R<=67108863,"Number is too big");var k=0|this.words[0];T=k===R?0:k<R?-1:1}return this.negative!==0?0|-T:T},n.prototype.cmp=function(R){if(this.negative!==0&&R.negative===0)return-1;if(this.negative===0&&R.negative!==0)return 1;var T=this.ucmp(R);return this.negative!==0?0|-T:T},n.prototype.ucmp=function(R){if(this.length>R.length)return 1;if(this.length<R.length)return-1;for(var T=0,C=this.length-1;C>=0;C--){var k=0|this.words[C],M=0|R.words[C];if(k!==M){k<M?T=-1:k>M&&(T=1);break}}return T},n.prototype.gtn=function(R){return this.cmpn(R)===1},n.prototype.gt=function(R){return this.cmp(R)===1},n.prototype.gten=function(R){return this.cmpn(R)>=0},n.prototype.gte=function(R){return this.cmp(R)>=0},n.prototype.ltn=function(R){return this.cmpn(R)===-1},n.prototype.lt=function(R){return this.cmp(R)===-1},n.prototype.lten=function(R){return this.cmpn(R)<=0},n.prototype.lte=function(R){return this.cmp(R)<=0},n.prototype.eqn=function(R){return this.cmpn(R)===0},n.prototype.eq=function(R){return this.cmp(R)===0},n.red=function(R){return new j(R)},n.prototype.toRed=function(R){return c(!this.red,"Already a number in reduction context"),c(this.negative===0,"red works only with positives"),R.convertTo(this)._forceRed(R)},n.prototype.fromRed=function(){return c(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(R){return this.red=R,this},n.prototype.forceRed=function(R){return c(!this.red,"Already a number in reduction context"),this._forceRed(R)},n.prototype.redAdd=function(R){return c(this.red,"redAdd works only with red numbers"),this.red.add(this,R)},n.prototype.redIAdd=function(R){return c(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,R)},n.prototype.redSub=function(R){return c(this.red,"redSub works only with red numbers"),this.red.sub(this,R)},n.prototype.redISub=function(R){return c(this.red,"redISub works only with red numbers"),this.red.isub(this,R)},n.prototype.redShl=function(R){return c(this.red,"redShl works only with red numbers"),this.red.shl(this,R)},n.prototype.redMul=function(R){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.mul(this,R)},n.prototype.redIMul=function(R){return c(this.red,"redMul works only with red numbers"),this.red._verify2(this,R),this.red.imul(this,R)},n.prototype.redSqr=function(){return c(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return c(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return c(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return c(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return c(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(R){return c(this.red&&!R.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,R)};var K={k256:null,p224:null,p192:null,p25519:null};function z(R,T){this.name=R,this.p=new n(T,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function W(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function Q(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function rt(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function tt(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function j(R){if(typeof R=="string"){var T=n._prime(R);this.m=T.p,this.prime=T}else c(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}function F(R){j.call(this,R),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}z.prototype._tmp=function(){var R=new n(null);return R.words=new Array(Math.ceil(this.n/13)),R},z.prototype.ireduce=function(R){var T,C=R;do this.split(C,this.tmp),T=(C=(C=this.imulK(C)).iadd(this.tmp)).bitLength();while(T>this.n);var k=T<this.n?-1:C.ucmp(this.p);return k===0?(C.words[0]=0,C.length=1):k>0?C.isub(this.p):C.strip!==void 0?C.strip():C._strip(),C},z.prototype.split=function(R,T){R.iushrn(this.n,0,T)},z.prototype.imulK=function(R){return R.imul(this.k)},l(W,z),W.prototype.split=function(R,T){for(var C=Math.min(R.length,9),k=0;k<C;k++)T.words[k]=R.words[k];if(T.length=C,R.length<=9)return R.words[0]=0,void(R.length=1);var M=R.words[9];for(T.words[T.length++]=4194303&M,k=10;k<R.length;k++){var O=0|R.words[k];R.words[k-10]=(4194303&O)<<4|M>>>22,M=O}M>>>=22,R.words[k-10]=M,M===0&&R.length>10?R.length-=10:R.length-=9},W.prototype.imulK=function(R){R.words[R.length]=0,R.words[R.length+1]=0,R.length+=2;for(var T=0,C=0;C<R.length;C++){var k=0|R.words[C];T+=977*k,R.words[C]=67108863&T,T=64*k+(T/67108864|0)}return R.words[R.length-1]===0&&(R.length--,R.words[R.length-1]===0&&R.length--),R},l(Q,z),l(rt,z),l(tt,z),tt.prototype.imulK=function(R){for(var T=0,C=0;C<R.length;C++){var k=19*(0|R.words[C])+T,M=67108863&k;k>>>=26,R.words[C]=M,T=k}return T!==0&&(R.words[R.length++]=T),R},n._prime=function(R){if(K[R])return K[R];var T;if(R==="k256")T=new W;else if(R==="p224")T=new Q;else if(R==="p192")T=new rt;else{if(R!=="p25519")throw new Error("Unknown prime "+R);T=new tt}return K[R]=T,T},j.prototype._verify1=function(R){c(R.negative===0,"red works only with positives"),c(R.red,"red works only with red numbers")},j.prototype._verify2=function(R,T){c((R.negative|T.negative)==0,"red works only with positives"),c(R.red&&R.red===T.red,"red works only with red numbers")},j.prototype.imod=function(R){return this.prime?this.prime.ireduce(R)._forceRed(this):(v(R,R.umod(this.m)._forceRed(this)),R)},j.prototype.neg=function(R){return R.isZero()?R.clone():this.m.sub(R)._forceRed(this)},j.prototype.add=function(R,T){this._verify2(R,T);var C=R.add(T);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},j.prototype.iadd=function(R,T){this._verify2(R,T);var C=R.iadd(T);return C.cmp(this.m)>=0&&C.isub(this.m),C},j.prototype.sub=function(R,T){this._verify2(R,T);var C=R.sub(T);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},j.prototype.isub=function(R,T){this._verify2(R,T);var C=R.isub(T);return C.cmpn(0)<0&&C.iadd(this.m),C},j.prototype.shl=function(R,T){return this._verify1(R),this.imod(R.ushln(T))},j.prototype.imul=function(R,T){return this._verify2(R,T),this.imod(R.imul(T))},j.prototype.mul=function(R,T){return this._verify2(R,T),this.imod(R.mul(T))},j.prototype.isqr=function(R){return this.imul(R,R.clone())},j.prototype.sqr=function(R){return this.mul(R,R)},j.prototype.sqrt=function(R){if(R.isZero())return R.clone();var T=this.m.andln(3);if(c(T%2==1),T===3){var C=this.m.add(new n(1)).iushrn(2);return this.pow(R,C)}for(var k=this.m.subn(1),M=0;!k.isZero()&&k.andln(1)===0;)M++,k.iushrn(1);c(!k.isZero());var O=new n(1).toRed(this),P=O.redNeg(),H=this.m.subn(1).iushrn(1),et=this.m.bitLength();for(et=new n(2*et*et).toRed(this);this.pow(et,H).cmp(P)!==0;)et.redIAdd(P);for(var it=this.pow(et,k),pt=this.pow(R,k.addn(1).iushrn(1)),X=this.pow(R,k),ut=M;X.cmp(O)!==0;){for(var G=X,U=0;G.cmp(O)!==0;U++)G=G.redSqr();c(U<ut);var st=this.pow(it,new n(1).iushln(ut-U-1));pt=pt.redMul(st),it=st.redSqr(),X=X.redMul(it),ut=U}return pt},j.prototype.invm=function(R){var T=R._invmp(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},j.prototype.pow=function(R,T){if(T.isZero())return new n(1).toRed(this);if(T.cmpn(1)===0)return R.clone();var C=new Array(16);C[0]=new n(1).toRed(this),C[1]=R;for(var k=2;k<C.length;k++)C[k]=this.mul(C[k-1],R);var M=C[0],O=0,P=0,H=T.bitLength()%26;for(H===0&&(H=26),k=T.length-1;k>=0;k--){for(var et=T.words[k],it=H-1;it>=0;it--){var pt=et>>it&1;M!==C[0]&&(M=this.sqr(M)),pt!==0||O!==0?(O<<=1,O|=pt,(++P===4||k===0&&it===0)&&(M=this.mul(M,C[O]),P=0,O=0)):P=0}H=26}return M},j.prototype.convertTo=function(R){var T=R.umod(this.m);return T===R?T.clone():T},j.prototype.convertFrom=function(R){var T=R.clone();return T.red=null,T},n.mont=function(R){return new F(R)},l(F,j),F.prototype.convertTo=function(R){return this.imod(R.ushln(this.shift))},F.prototype.convertFrom=function(R){var T=this.imod(R.mul(this.rinv));return T.red=null,T},F.prototype.imul=function(R,T){if(R.isZero()||T.isZero())return R.words[0]=0,R.length=1,R;var C=R.imul(T),k=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=C.isub(k).iushrn(this.shift),O=M;return M.cmp(this.m)>=0?O=M.isub(this.m):M.cmpn(0)<0&&(O=M.iadd(this.m)),O._forceRed(this)},F.prototype.mul=function(R,T){if(R.isZero()||T.isZero())return new n(0)._forceRed(this);var C=R.mul(T),k=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=C.isub(k).iushrn(this.shift),O=M;return M.cmp(this.m)>=0?O=M.isub(this.m):M.cmpn(0)<0&&(O=M.iadd(this.m)),O._forceRed(this)},F.prototype.invm=function(R){return this.imod(R._invmp(this.m).mul(this.r2))._forceRed(this)}})(s===void 0||s)},{buffer:188}],187:[function(t,s,u){var o;function r(l){this.rand=l}if(s.exports=function(l){return o||(o=new r(null)),o.generate(l)},s.exports.Rand=r,r.prototype.generate=function(l){return this._rand(l)},r.prototype._rand=function(l){if(this.rand.getBytes)return this.rand.getBytes(l);for(var n=new Uint8Array(l),f=0;f<n.length;f++)n[f]=this.rand.getByte();return n},typeof self=="object")self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(l){var n=new Uint8Array(l);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(l){var n=new Uint8Array(l);return self.msCrypto.getRandomValues(n),n}:typeof window=="object"&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var c=t("crypto");if(typeof c.randomBytes!="function")throw new Error("Not supported");r.prototype._rand=function(l){return c.randomBytes(l)}}catch{}},{crypto:188}],188:[function(t,s,u){},{}],189:[function(t,s,u){var o=t("safe-buffer").Buffer;function r(p){o.isBuffer(p)||(p=o.from(p));for(var g=p.length/4|0,v=new Array(g),x=0;x<g;x++)v[x]=p.readUInt32BE(4*x);return v}function c(p){for(;0<p.length;p++)p[0]=0}function l(p,g,v,x,y){for(var w,S,E,I,D=v[0],Z=v[1],K=v[2],z=v[3],W=p[0]^g[0],Q=p[1]^g[1],rt=p[2]^g[2],tt=p[3]^g[3],j=4,F=1;F<y;F++)w=D[W>>>24]^Z[Q>>>16&255]^K[rt>>>8&255]^z[255&tt]^g[j++],S=D[Q>>>24]^Z[rt>>>16&255]^K[tt>>>8&255]^z[255&W]^g[j++],E=D[rt>>>24]^Z[tt>>>16&255]^K[W>>>8&255]^z[255&Q]^g[j++],I=D[tt>>>24]^Z[W>>>16&255]^K[Q>>>8&255]^z[255&rt]^g[j++],W=w,Q=S,rt=E,tt=I;return w=(x[W>>>24]<<24|x[Q>>>16&255]<<16|x[rt>>>8&255]<<8|x[255&tt])^g[j++],S=(x[Q>>>24]<<24|x[rt>>>16&255]<<16|x[tt>>>8&255]<<8|x[255&W])^g[j++],E=(x[rt>>>24]<<24|x[tt>>>16&255]<<16|x[W>>>8&255]<<8|x[255&Q])^g[j++],I=(x[tt>>>24]<<24|x[W>>>16&255]<<16|x[Q>>>8&255]<<8|x[255&rt])^g[j++],[w>>>=0,S>>>=0,E>>>=0,I>>>=0]}var n=[0,1,2,4,8,16,32,64,128,27,54],f=(function(){for(var p=new Array(256),g=0;g<256;g++)p[g]=g<128?g<<1:g<<1^283;for(var v=[],x=[],y=[[],[],[],[]],w=[[],[],[],[]],S=0,E=0,I=0;I<256;++I){var D=E^E<<1^E<<2^E<<3^E<<4;D=D>>>8^255&D^99,v[S]=D,x[D]=S;var Z=p[S],K=p[Z],z=p[K],W=257*p[D]^16843008*D;y[0][S]=W<<24|W>>>8,y[1][S]=W<<16|W>>>16,y[2][S]=W<<8|W>>>24,y[3][S]=W,W=16843009*z^65537*K^257*Z^16843008*S,w[0][D]=W<<24|W>>>8,w[1][D]=W<<16|W>>>16,w[2][D]=W<<8|W>>>24,w[3][D]=W,S===0?S=E=1:(S=Z^p[p[p[z^Z]]],E^=p[p[E]])}return{SBOX:v,INV_SBOX:x,SUB_MIX:y,INV_SUB_MIX:w}})();function h(p){this._key=r(p),this._reset()}h.blockSize=16,h.keySize=32,h.prototype.blockSize=h.blockSize,h.prototype.keySize=h.keySize,h.prototype._reset=function(){for(var p=this._key,g=p.length,v=g+6,x=4*(v+1),y=[],w=0;w<g;w++)y[w]=p[w];for(w=g;w<x;w++){var S=y[w-1];w%g==0?(S=S<<8|S>>>24,S=f.SBOX[S>>>24]<<24|f.SBOX[S>>>16&255]<<16|f.SBOX[S>>>8&255]<<8|f.SBOX[255&S],S^=n[w/g|0]<<24):g>6&&w%g==4&&(S=f.SBOX[S>>>24]<<24|f.SBOX[S>>>16&255]<<16|f.SBOX[S>>>8&255]<<8|f.SBOX[255&S]),y[w]=y[w-g]^S}for(var E=[],I=0;I<x;I++){var D=x-I,Z=y[D-(I%4?0:4)];E[I]=I<4||D<=4?Z:f.INV_SUB_MIX[0][f.SBOX[Z>>>24]]^f.INV_SUB_MIX[1][f.SBOX[Z>>>16&255]]^f.INV_SUB_MIX[2][f.SBOX[Z>>>8&255]]^f.INV_SUB_MIX[3][f.SBOX[255&Z]]}this._nRounds=v,this._keySchedule=y,this._invKeySchedule=E},h.prototype.encryptBlockRaw=function(p){return l(p=r(p),this._keySchedule,f.SUB_MIX,f.SBOX,this._nRounds)},h.prototype.encryptBlock=function(p){var g=this.encryptBlockRaw(p),v=o.allocUnsafe(16);return v.writeUInt32BE(g[0],0),v.writeUInt32BE(g[1],4),v.writeUInt32BE(g[2],8),v.writeUInt32BE(g[3],12),v},h.prototype.decryptBlock=function(p){var g=(p=r(p))[1];p[1]=p[3],p[3]=g;var v=l(p,this._invKeySchedule,f.INV_SUB_MIX,f.INV_SBOX,this._nRounds),x=o.allocUnsafe(16);return x.writeUInt32BE(v[0],0),x.writeUInt32BE(v[3],4),x.writeUInt32BE(v[2],8),x.writeUInt32BE(v[1],12),x},h.prototype.scrub=function(){c(this._keySchedule),c(this._invKeySchedule),c(this._key)},s.exports.AES=h},{"safe-buffer":494}],190:[function(t,s,u){var o=t("./aes"),r=t("safe-buffer").Buffer,c=t("cipher-base"),l=t("inherits"),n=t("./ghash"),f=t("buffer-xor"),h=t("./incr32");function p(g,v,x,y){c.call(this);var w=r.alloc(4,0);this._cipher=new o.AES(v);var S=this._cipher.encryptBlock(w);this._ghash=new n(S),x=(function(E,I,D){if(I.length===12)return E._finID=r.concat([I,r.from([0,0,0,1])]),r.concat([I,r.from([0,0,0,2])]);var Z=new n(D),K=I.length,z=K%16;Z.update(I),z&&(z=16-z,Z.update(r.alloc(z,0))),Z.update(r.alloc(8,0));var W=8*K,Q=r.alloc(8);Q.writeUIntBE(W,0,8),Z.update(Q),E._finID=Z.state;var rt=r.from(E._finID);return h(rt),rt})(this,x,S),this._prev=r.from(x),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=y,this._alen=0,this._len=0,this._mode=g,this._authTag=null,this._called=!1}l(p,c),p.prototype._update=function(g){if(!this._called&&this._alen){var v=16-this._alen%16;v<16&&(v=r.alloc(v,0),this._ghash.update(v))}this._called=!0;var x=this._mode.encrypt(this,g);return this._decrypt?this._ghash.update(g):this._ghash.update(x),this._len+=g.length,x},p.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var g=f(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&(function(v,x){var y=0;v.length!==x.length&&y++;for(var w=Math.min(v.length,x.length),S=0;S<w;++S)y+=v[S]^x[S];return y})(g,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=g,this._cipher.scrub()},p.prototype.getAuthTag=function(){if(this._decrypt||!r.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},p.prototype.setAuthTag=function(g){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=g},p.prototype.setAAD=function(g){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(g),this._alen+=g.length},s.exports=p},{"./aes":189,"./ghash":194,"./incr32":195,"buffer-xor":219,"cipher-base":221,inherits:440,"safe-buffer":494}],191:[function(t,s,u){var o=t("./encrypter"),r=t("./decrypter"),c=t("./modes/list.json");u.createCipher=u.Cipher=o.createCipher,u.createCipheriv=u.Cipheriv=o.createCipheriv,u.createDecipher=u.Decipher=r.createDecipher,u.createDecipheriv=u.Decipheriv=r.createDecipheriv,u.listCiphers=u.getCiphers=function(){return Object.keys(c)}},{"./decrypter":192,"./encrypter":193,"./modes/list.json":203}],192:[function(t,s,u){var o=t("./authCipher"),r=t("safe-buffer").Buffer,c=t("./modes"),l=t("./streamCipher"),n=t("cipher-base"),f=t("./aes"),h=t("evp_bytestokey");function p(x,y,w){n.call(this),this._cache=new g,this._last=void 0,this._cipher=new f.AES(y),this._prev=r.from(w),this._mode=x,this._autopadding=!0}function g(){this.cache=r.allocUnsafe(0)}function v(x,y,w){var S=c[x.toLowerCase()];if(!S)throw new TypeError("invalid suite type");if(typeof w=="string"&&(w=r.from(w)),S.mode!=="GCM"&&w.length!==S.iv)throw new TypeError("invalid iv length "+w.length);if(typeof y=="string"&&(y=r.from(y)),y.length!==S.key/8)throw new TypeError("invalid key length "+y.length);return S.type==="stream"?new l(S.module,y,w,!0):S.type==="auth"?new o(S.module,y,w,!0):new p(S.module,y,w)}t("inherits")(p,n),p.prototype._update=function(x){var y,w;this._cache.add(x);for(var S=[];y=this._cache.get(this._autopadding);)w=this._mode.decrypt(this,y),S.push(w);return r.concat(S)},p.prototype._final=function(){var x=this._cache.flush();if(this._autopadding)return(function(y){var w=y[15];if(w<1||w>16)throw new Error("unable to decrypt data");for(var S=-1;++S<w;)if(y[S+(16-w)]!==w)throw new Error("unable to decrypt data");if(w!==16)return y.slice(0,16-w)})(this._mode.decrypt(this,x));if(x)throw new Error("data not multiple of block length")},p.prototype.setAutoPadding=function(x){return this._autopadding=!!x,this},g.prototype.add=function(x){this.cache=r.concat([this.cache,x])},g.prototype.get=function(x){var y;if(x){if(this.cache.length>16)return y=this.cache.slice(0,16),this.cache=this.cache.slice(16),y}else if(this.cache.length>=16)return y=this.cache.slice(0,16),this.cache=this.cache.slice(16),y;return null},g.prototype.flush=function(){if(this.cache.length)return this.cache},u.createDecipher=function(x,y){var w=c[x.toLowerCase()];if(!w)throw new TypeError("invalid suite type");var S=h(y,!1,w.key,w.iv);return v(x,S.key,S.iv)},u.createDecipheriv=v},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],193:[function(t,s,u){var o=t("./modes"),r=t("./authCipher"),c=t("safe-buffer").Buffer,l=t("./streamCipher"),n=t("cipher-base"),f=t("./aes"),h=t("evp_bytestokey");function p(y,w,S){n.call(this),this._cache=new v,this._cipher=new f.AES(w),this._prev=c.from(S),this._mode=y,this._autopadding=!0}t("inherits")(p,n),p.prototype._update=function(y){var w,S;this._cache.add(y);for(var E=[];w=this._cache.get();)S=this._mode.encrypt(this,w),E.push(S);return c.concat(E)};var g=c.alloc(16,16);function v(){this.cache=c.allocUnsafe(0)}function x(y,w,S){var E=o[y.toLowerCase()];if(!E)throw new TypeError("invalid suite type");if(typeof w=="string"&&(w=c.from(w)),w.length!==E.key/8)throw new TypeError("invalid key length "+w.length);if(typeof S=="string"&&(S=c.from(S)),E.mode!=="GCM"&&S.length!==E.iv)throw new TypeError("invalid iv length "+S.length);return E.type==="stream"?new l(E.module,w,S):E.type==="auth"?new r(E.module,w,S):new p(E.module,w,S)}p.prototype._final=function(){var y=this._cache.flush();if(this._autopadding)return y=this._mode.encrypt(this,y),this._cipher.scrub(),y;if(!y.equals(g))throw this._cipher.scrub(),new Error("data not multiple of block length")},p.prototype.setAutoPadding=function(y){return this._autopadding=!!y,this},v.prototype.add=function(y){this.cache=c.concat([this.cache,y])},v.prototype.get=function(){if(this.cache.length>15){var y=this.cache.slice(0,16);return this.cache=this.cache.slice(16),y}return null},v.prototype.flush=function(){for(var y=16-this.cache.length,w=c.allocUnsafe(y),S=-1;++S<y;)w.writeUInt8(y,S);return c.concat([this.cache,w])},u.createCipheriv=x,u.createCipher=function(y,w){var S=o[y.toLowerCase()];if(!S)throw new TypeError("invalid suite type");var E=h(w,!1,S.key,S.iv);return x(y,E.key,E.iv)}},{"./aes":189,"./authCipher":190,"./modes":202,"./streamCipher":205,"cipher-base":221,evp_bytestokey:423,inherits:440,"safe-buffer":494}],194:[function(t,s,u){var o=t("safe-buffer").Buffer,r=o.alloc(16,0);function c(n){var f=o.allocUnsafe(16);return f.writeUInt32BE(n[0]>>>0,0),f.writeUInt32BE(n[1]>>>0,4),f.writeUInt32BE(n[2]>>>0,8),f.writeUInt32BE(n[3]>>>0,12),f}function l(n){this.h=n,this.state=o.alloc(16,0),this.cache=o.allocUnsafe(0)}l.prototype.ghash=function(n){for(var f=-1;++f<n.length;)this.state[f]^=n[f];this._multiply()},l.prototype._multiply=function(){for(var n,f,h,p=[(n=this.h).readUInt32BE(0),n.readUInt32BE(4),n.readUInt32BE(8),n.readUInt32BE(12)],g=[0,0,0,0],v=-1;++v<128;){for((this.state[~~(v/8)]&1<<7-v%8)!=0&&(g[0]^=p[0],g[1]^=p[1],g[2]^=p[2],g[3]^=p[3]),h=(1&p[3])!=0,f=3;f>0;f--)p[f]=p[f]>>>1|(1&p[f-1])<<31;p[0]=p[0]>>>1,h&&(p[0]=p[0]^225<<24)}this.state=c(g)},l.prototype.update=function(n){var f;for(this.cache=o.concat([this.cache,n]);this.cache.length>=16;)f=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(f)},l.prototype.final=function(n,f){return this.cache.length&&this.ghash(o.concat([this.cache,r],16)),this.ghash(c([0,n,0,f])),this.state},s.exports=l},{"safe-buffer":494}],195:[function(t,s,u){s.exports=function(o){for(var r,c=o.length;c--;){if((r=o.readUInt8(c))!==255){r++,o.writeUInt8(r,c);break}o.writeUInt8(0,c)}}},{}],196:[function(t,s,u){var o=t("buffer-xor");u.encrypt=function(r,c){var l=o(c,r._prev);return r._prev=r._cipher.encryptBlock(l),r._prev},u.decrypt=function(r,c){var l=r._prev;r._prev=c;var n=r._cipher.decryptBlock(c);return o(n,l)}},{"buffer-xor":219}],197:[function(t,s,u){var o=t("safe-buffer").Buffer,r=t("buffer-xor");function c(l,n,f){var h=n.length,p=r(n,l._cache);return l._cache=l._cache.slice(h),l._prev=o.concat([l._prev,f?n:p]),p}u.encrypt=function(l,n,f){for(var h,p=o.allocUnsafe(0);n.length;){if(l._cache.length===0&&(l._cache=l._cipher.encryptBlock(l._prev),l._prev=o.allocUnsafe(0)),!(l._cache.length<=n.length)){p=o.concat([p,c(l,n,f)]);break}h=l._cache.length,p=o.concat([p,c(l,n.slice(0,h),f)]),n=n.slice(h)}return p}},{"buffer-xor":219,"safe-buffer":494}],198:[function(t,s,u){var o=t("safe-buffer").Buffer;function r(l,n,f){for(var h,p,g=-1,v=0;++g<8;)h=n&1<<7-g?128:0,v+=(128&(p=l._cipher.encryptBlock(l._prev)[0]^h))>>g%8,l._prev=c(l._prev,f?h:p);return v}function c(l,n){var f=l.length,h=-1,p=o.allocUnsafe(l.length);for(l=o.concat([l,o.from([n])]);++h<f;)p[h]=l[h]<<1|l[h+1]>>7;return p}u.encrypt=function(l,n,f){for(var h=n.length,p=o.allocUnsafe(h),g=-1;++g<h;)p[g]=r(l,n[g],f);return p}},{"safe-buffer":494}],199:[function(t,s,u){var o=t("safe-buffer").Buffer;function r(c,l,n){var f=c._cipher.encryptBlock(c._prev)[0]^l;return c._prev=o.concat([c._prev.slice(1),o.from([n?l:f])]),f}u.encrypt=function(c,l,n){for(var f=l.length,h=o.allocUnsafe(f),p=-1;++p<f;)h[p]=r(c,l[p],n);return h}},{"safe-buffer":494}],200:[function(t,s,u){var o=t("buffer-xor"),r=t("safe-buffer").Buffer,c=t("../incr32");function l(n){var f=n._cipher.encryptBlockRaw(n._prev);return c(n._prev),f}u.encrypt=function(n,f){var h=Math.ceil(f.length/16),p=n._cache.length;n._cache=r.concat([n._cache,r.allocUnsafe(16*h)]);for(var g=0;g<h;g++){var v=l(n),x=p+16*g;n._cache.writeUInt32BE(v[0],x+0),n._cache.writeUInt32BE(v[1],x+4),n._cache.writeUInt32BE(v[2],x+8),n._cache.writeUInt32BE(v[3],x+12)}var y=n._cache.slice(0,f.length);return n._cache=n._cache.slice(f.length),o(f,y)}},{"../incr32":195,"buffer-xor":219,"safe-buffer":494}],201:[function(t,s,u){u.encrypt=function(o,r){return o._cipher.encryptBlock(r)},u.decrypt=function(o,r){return o._cipher.decryptBlock(r)}},{}],202:[function(t,s,u){var o={ECB:t("./ecb"),CBC:t("./cbc"),CFB:t("./cfb"),CFB8:t("./cfb8"),CFB1:t("./cfb1"),OFB:t("./ofb"),CTR:t("./ctr"),GCM:t("./ctr")},r=t("./list.json");for(var c in r)r[c].module=o[r[c].mode];s.exports=r},{"./cbc":196,"./cfb":197,"./cfb1":198,"./cfb8":199,"./ctr":200,"./ecb":201,"./list.json":203,"./ofb":204}],203:[function(t,s,u){s.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],204:[function(t,s,u){(function(o){(function(){var r=t("buffer-xor");function c(l){return l._prev=l._cipher.encryptBlock(l._prev),l._prev}u.encrypt=function(l,n){for(;l._cache.length<n.length;)l._cache=o.concat([l._cache,c(l)]);var f=l._cache.slice(0,n.length);return l._cache=l._cache.slice(n.length),r(n,f)}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220,"buffer-xor":219}],205:[function(t,s,u){var o=t("./aes"),r=t("safe-buffer").Buffer,c=t("cipher-base");function l(n,f,h,p){c.call(this),this._cipher=new o.AES(f),this._prev=r.from(h),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=p,this._mode=n}t("inherits")(l,c),l.prototype._update=function(n){return this._mode.encrypt(this,n,this._decrypt)},l.prototype._final=function(){this._cipher.scrub()},s.exports=l},{"./aes":189,"cipher-base":221,inherits:440,"safe-buffer":494}],206:[function(t,s,u){var o=t("browserify-des"),r=t("browserify-aes/browser"),c=t("browserify-aes/modes"),l=t("browserify-des/modes"),n=t("evp_bytestokey");function f(p,g,v){if(p=p.toLowerCase(),c[p])return r.createCipheriv(p,g,v);if(l[p])return new o({key:g,iv:v,mode:p});throw new TypeError("invalid suite type")}function h(p,g,v){if(p=p.toLowerCase(),c[p])return r.createDecipheriv(p,g,v);if(l[p])return new o({key:g,iv:v,mode:p,decrypt:!0});throw new TypeError("invalid suite type")}u.createCipher=u.Cipher=function(p,g){var v,x;if(p=p.toLowerCase(),c[p])v=c[p].key,x=c[p].iv;else{if(!l[p])throw new TypeError("invalid suite type");v=8*l[p].key,x=l[p].iv}var y=n(g,!1,v,x);return f(p,y.key,y.iv)},u.createCipheriv=u.Cipheriv=f,u.createDecipher=u.Decipher=function(p,g){var v,x;if(p=p.toLowerCase(),c[p])v=c[p].key,x=c[p].iv;else{if(!l[p])throw new TypeError("invalid suite type");v=8*l[p].key,x=l[p].iv}var y=n(g,!1,v,x);return h(p,y.key,y.iv)},u.createDecipheriv=u.Decipheriv=h,u.listCiphers=u.getCiphers=function(){return Object.keys(l).concat(r.getCiphers())}},{"browserify-aes/browser":191,"browserify-aes/modes":202,"browserify-des":207,"browserify-des/modes":208,evp_bytestokey:423}],207:[function(t,s,u){var o=t("cipher-base"),r=t("des.js"),c=t("inherits"),l=t("safe-buffer").Buffer,n={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};function f(h){o.call(this);var p,g=h.mode.toLowerCase(),v=n[g];p=h.decrypt?"decrypt":"encrypt";var x=h.key;l.isBuffer(x)||(x=l.from(x)),g!=="des-ede"&&g!=="des-ede-cbc"||(x=l.concat([x,x.slice(0,8)]));var y=h.iv;l.isBuffer(y)||(y=l.from(y)),this._des=v.create({key:x,iv:y,type:p})}n.des=n["des-cbc"],n.des3=n["des-ede3-cbc"],s.exports=f,c(f,o),f.prototype._update=function(h){return l.from(this._des.update(h))},f.prototype._final=function(){return l.from(this._des.final())}},{"cipher-base":221,"des.js":394,inherits:440,"safe-buffer":494}],208:[function(t,s,u){u["des-ecb"]={key:8,iv:0},u["des-cbc"]=u.des={key:8,iv:8},u["des-ede3-cbc"]=u.des3={key:24,iv:8},u["des-ede3"]={key:24,iv:0},u["des-ede-cbc"]={key:16,iv:8},u["des-ede"]={key:16,iv:0}},{}],209:[function(t,s,u){(function(o){(function(){var r=t("bn.js"),c=t("randombytes");function l(f){var h,p=f.modulus.byteLength();do h=new r(c(p));while(h.cmp(f.modulus)>=0||!h.umod(f.prime1)||!h.umod(f.prime2));return h}function n(f,h){var p=(function(K){var z=l(K);return{blinder:z.toRed(r.mont(K.modulus)).redPow(new r(K.publicExponent)).fromRed(),unblinder:z.invm(K.modulus)}})(h),g=h.modulus.byteLength(),v=new r(f).mul(p.blinder).umod(h.modulus),x=v.toRed(r.mont(h.prime1)),y=v.toRed(r.mont(h.prime2)),w=h.coefficient,S=h.prime1,E=h.prime2,I=x.redPow(h.exponent1).fromRed(),D=y.redPow(h.exponent2).fromRed(),Z=I.isub(D).imul(w).umod(S).imul(E);return D.iadd(Z).imul(p.unblinder).umod(h.modulus).toArrayLike(o,"be",g)}n.getr=l,s.exports=n}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":186,buffer:220,randombytes:475}],210:[function(t,s,u){s.exports=t("./browser/algorithms.json")},{"./browser/algorithms.json":211}],211:[function(t,s,u){s.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],212:[function(t,s,u){s.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],213:[function(t,s,u){var o=t("safe-buffer").Buffer,r=t("create-hash"),c=t("readable-stream"),l=t("inherits"),n=t("./sign"),f=t("./verify"),h=t("./algorithms.json");function p(y){c.Writable.call(this);var w=h[y];if(!w)throw new Error("Unknown message digest");this._hashType=w.hash,this._hash=r(w.hash),this._tag=w.id,this._signType=w.sign}function g(y){c.Writable.call(this);var w=h[y];if(!w)throw new Error("Unknown message digest");this._hash=r(w.hash),this._tag=w.id,this._signType=w.sign}function v(y){return new p(y)}function x(y){return new g(y)}Object.keys(h).forEach((function(y){h[y].id=o.from(h[y].id,"hex"),h[y.toLowerCase()]=h[y]})),l(p,c.Writable),p.prototype._write=function(y,w,S){this._hash.update(y),S()},p.prototype.update=function(y,w){return typeof y=="string"&&(y=o.from(y,w)),this._hash.update(y),this},p.prototype.sign=function(y,w){this.end();var S=this._hash.digest(),E=n(S,y,this._hashType,this._signType,this._tag);return w?E.toString(w):E},l(g,c.Writable),g.prototype._write=function(y,w,S){this._hash.update(y),S()},g.prototype.update=function(y,w){return typeof y=="string"&&(y=o.from(y,w)),this._hash.update(y),this},g.prototype.verify=function(y,w,S){typeof w=="string"&&(w=o.from(w,S)),this.end();var E=this._hash.digest();return f(w,E,y,this._signType,this._tag)},s.exports={Sign:v,Verify:x,createSign:v,createVerify:x}},{"./algorithms.json":211,"./sign":214,"./verify":215,"create-hash":386,inherits:440,"readable-stream":491,"safe-buffer":494}],214:[function(t,s,u){var o=t("safe-buffer").Buffer,r=t("create-hmac"),c=t("browserify-rsa"),l=t("elliptic").ec,n=t("bn.js"),f=t("parse-asn1"),h=t("./curves.json");function p(y,w,S,E){if((y=o.from(y.toArray())).length<w.byteLength()){var I=o.alloc(w.byteLength()-y.length);y=o.concat([I,y])}var D=S.length,Z=(function(W,Q){W=(W=g(W,Q)).mod(Q);var rt=o.from(W.toArray());if(rt.length<Q.byteLength()){var tt=o.alloc(Q.byteLength()-rt.length);rt=o.concat([tt,rt])}return rt})(S,w),K=o.alloc(D);K.fill(1);var z=o.alloc(D);return z=r(E,z).update(K).update(o.from([0])).update(y).update(Z).digest(),K=r(E,z).update(K).digest(),{k:z=r(E,z).update(K).update(o.from([1])).update(y).update(Z).digest(),v:K=r(E,z).update(K).digest()}}function g(y,w){var S=new n(y),E=(y.length<<3)-w.bitLength();return E>0&&S.ishrn(E),S}function v(y,w,S){var E,I;do{for(E=o.alloc(0);8*E.length<y.bitLength();)w.v=r(S,w.k).update(w.v).digest(),E=o.concat([E,w.v]);I=g(E,y),w.k=r(S,w.k).update(w.v).update(o.from([0])).digest(),w.v=r(S,w.k).update(w.v).digest()}while(I.cmp(y)!==-1);return I}function x(y,w,S,E){return y.toRed(n.mont(S)).redPow(w).fromRed().mod(E)}s.exports=function(y,w,S,E,I){var D=f(w);if(D.curve){if(E!=="ecdsa"&&E!=="ecdsa/rsa")throw new Error("wrong private key type");return(function(W,Q){var rt=h[Q.curve.join(".")];if(!rt)throw new Error("unknown curve "+Q.curve.join("."));var tt=new l(rt).keyFromPrivate(Q.privateKey).sign(W);return o.from(tt.toDER())})(y,D)}if(D.type==="dsa"){if(E!=="dsa")throw new Error("wrong private key type");return(function(W,Q,rt){for(var tt,j=Q.params.priv_key,F=Q.params.p,R=Q.params.q,T=Q.params.g,C=new n(0),k=g(W,R).mod(R),M=!1,O=p(j,R,W,rt);M===!1;)tt=v(R,O,rt),C=x(T,tt,F,R),(M=tt.invm(R).imul(k.add(j.mul(C))).mod(R)).cmpn(0)===0&&(M=!1,C=new n(0));return(function(P,H){P=P.toArray(),H=H.toArray(),128&P[0]&&(P=[0].concat(P)),128&H[0]&&(H=[0].concat(H));var et=[48,P.length+H.length+4,2,P.length];return et=et.concat(P,[2,H.length],H),o.from(et)})(C,M)})(y,D,S)}if(E!=="rsa"&&E!=="ecdsa/rsa")throw new Error("wrong private key type");y=o.concat([I,y]);for(var Z=D.modulus.byteLength(),K=[0,1];y.length+K.length+1<Z;)K.push(255);K.push(0);for(var z=-1;++z<y.length;)K.push(y[z]);return c(K,D)},s.exports.getKey=p,s.exports.makeKey=v},{"./curves.json":212,"bn.js":186,"browserify-rsa":209,"create-hmac":388,elliptic:405,"parse-asn1":459,"safe-buffer":494}],215:[function(t,s,u){var o=t("safe-buffer").Buffer,r=t("bn.js"),c=t("elliptic").ec,l=t("parse-asn1"),n=t("./curves.json");function f(h,p){if(h.cmpn(0)<=0)throw new Error("invalid sig");if(h.cmp(p)>=p)throw new Error("invalid sig")}s.exports=function(h,p,g,v,x){var y=l(g);if(y.type==="ec"){if(v!=="ecdsa"&&v!=="ecdsa/rsa")throw new Error("wrong public key type");return(function(K,z,W){var Q=n[W.data.algorithm.curve.join(".")];if(!Q)throw new Error("unknown curve "+W.data.algorithm.curve.join("."));var rt=new c(Q),tt=W.data.subjectPrivateKey.data;return rt.verify(z,K,tt)})(h,p,y)}if(y.type==="dsa"){if(v!=="dsa")throw new Error("wrong public key type");return(function(K,z,W){var Q=W.data.p,rt=W.data.q,tt=W.data.g,j=W.data.pub_key,F=l.signature.decode(K,"der"),R=F.s,T=F.r;f(R,rt),f(T,rt);var C=r.mont(Q),k=R.invm(rt);return tt.toRed(C).redPow(new r(z).mul(k).mod(rt)).fromRed().mul(j.toRed(C).redPow(T.mul(k).mod(rt)).fromRed()).mod(Q).mod(rt).cmp(T)===0})(h,p,y)}if(v!=="rsa"&&v!=="ecdsa/rsa")throw new Error("wrong public key type");p=o.concat([x,p]);for(var w=y.modulus.byteLength(),S=[1],E=0;p.length+S.length+2<w;)S.push(255),E++;S.push(0);for(var I=-1;++I<p.length;)S.push(p[I]);S=o.from(S);var D=r.mont(y.modulus);h=(h=new r(h).toRed(D)).redPow(new r(y.publicExponent)),h=o.from(h.fromRed().toArray());var Z=E<8?1:0;for(w=Math.min(h.length,S.length),h.length!==S.length&&(Z=1),I=-1;++I<w;)Z|=h[I]^S[I];return Z===0}},{"./curves.json":212,"bn.js":186,elliptic:405,"parse-asn1":459,"safe-buffer":494}],216:[function(t,s,u){},{}],217:[function(t,s,u){var o=t("buffer"),r=o.Buffer;function c(n,f){for(var h in n)f[h]=n[h]}function l(n,f,h){return r(n,f,h)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?s.exports=o:(c(o,u),u.Buffer=l),c(r,l),l.from=function(n,f,h){if(typeof n=="number")throw new TypeError("Argument must not be a number");return r(n,f,h)},l.alloc=function(n,f,h){if(typeof n!="number")throw new TypeError("Argument must be a number");var p=r(n);return f!==void 0?typeof h=="string"?p.fill(f,h):p.fill(f):p.fill(0),p},l.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return r(n)},l.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(n)}},{buffer:220}],218:[function(t,s,u){var o=t("safe-buffer").Buffer,r=o.isEncoding||function(y){switch((y=""+y)&&y.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function c(y){var w;switch(this.encoding=(function(S){var E=(function(I){if(!I)return"utf8";for(var D;;)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(D)return;I=(""+I).toLowerCase(),D=!0}})(S);if(typeof E!="string"&&(o.isEncoding===r||!r(S)))throw new Error("Unknown encoding: "+S);return E||S})(y),this.encoding){case"utf16le":this.text=f,this.end=h,w=4;break;case"utf8":this.fillLast=n,w=4;break;case"base64":this.text=p,this.end=g,w=3;break;default:return this.write=v,void(this.end=x)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(w)}function l(y){return y<=127?0:y>>5==6?2:y>>4==14?3:y>>3==30?4:y>>6==2?-1:-2}function n(y){var w=this.lastTotal-this.lastNeed,S=(function(E,I,D){if((192&I[0])!=128)return E.lastNeed=0,"";if(E.lastNeed>1&&I.length>1){if((192&I[1])!=128)return E.lastNeed=1,"";if(E.lastNeed>2&&I.length>2&&(192&I[2])!=128)return E.lastNeed=2,""}})(this,y);return S!==void 0?S:this.lastNeed<=y.length?(y.copy(this.lastChar,w,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(y.copy(this.lastChar,w,0,y.length),void(this.lastNeed-=y.length))}function f(y,w){if((y.length-w)%2==0){var S=y.toString("utf16le",w);if(S){var E=S.charCodeAt(S.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1],S.slice(0,-1)}return S}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=y[y.length-1],y.toString("utf16le",w,y.length-1)}function h(y){var w=y&&y.length?this.write(y):"";if(this.lastNeed){var S=this.lastTotal-this.lastNeed;return w+this.lastChar.toString("utf16le",0,S)}return w}function p(y,w){var S=(y.length-w)%3;return S===0?y.toString("base64",w):(this.lastNeed=3-S,this.lastTotal=3,S===1?this.lastChar[0]=y[y.length-1]:(this.lastChar[0]=y[y.length-2],this.lastChar[1]=y[y.length-1]),y.toString("base64",w,y.length-S))}function g(y){var w=y&&y.length?this.write(y):"";return this.lastNeed?w+this.lastChar.toString("base64",0,3-this.lastNeed):w}function v(y){return y.toString(this.encoding)}function x(y){return y&&y.length?this.write(y):""}u.StringDecoder=c,c.prototype.write=function(y){if(y.length===0)return"";var w,S;if(this.lastNeed){if((w=this.fillLast(y))===void 0)return"";S=this.lastNeed,this.lastNeed=0}else S=0;return S<y.length?w?w+this.text(y,S):this.text(y,S):w||""},c.prototype.end=function(y){var w=y&&y.length?this.write(y):"";return this.lastNeed?w+"":w},c.prototype.text=function(y,w){var S=(function(I,D,Z){var K=D.length-1;if(K<Z)return 0;var z=l(D[K]);return z>=0?(z>0&&(I.lastNeed=z-1),z):--K<Z||z===-2?0:(z=l(D[K]))>=0?(z>0&&(I.lastNeed=z-2),z):--K<Z||z===-2?0:(z=l(D[K]))>=0?(z>0&&(z===2?z=0:I.lastNeed=z-3),z):0})(this,y,w);if(!this.lastNeed)return y.toString("utf8",w);this.lastTotal=S;var E=y.length-(S-this.lastNeed);return y.copy(this.lastChar,0,E),y.toString("utf8",w,E)},c.prototype.fillLast=function(y){if(this.lastNeed<=y.length)return y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);y.copy(this.lastChar,this.lastTotal-this.lastNeed,0,y.length),this.lastNeed-=y.length}},{"safe-buffer":217}],219:[function(t,s,u){(function(o){(function(){s.exports=function(r,c){for(var l=Math.min(r.length,c.length),n=new o(l),f=0;f<l;++f)n[f]=r[f]^c[f];return n}}).call(this)}).call(this,t("buffer").Buffer)},{buffer:220}],220:[function(t,s,u){(function(o){(function(){var r=t("base64-js"),c=t("ieee754");u.Buffer=n,u.SlowBuffer=function(G){return+G!=G&&(G=0),n.alloc(+G)},u.INSPECT_MAX_BYTES=50;function l(G){if(G>2147483647)throw new RangeError('The value "'+G+'" is invalid for option "size"');var U=new Uint8Array(G);return U.__proto__=n.prototype,U}function n(G,U,st){if(typeof G=="number"){if(typeof U=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(G)}return f(G,U,st)}function f(G,U,st){if(typeof G=="string")return(function(St,Bt){if(typeof Bt=="string"&&Bt!==""||(Bt="utf8"),!n.isEncoding(Bt))throw new TypeError("Unknown encoding: "+Bt);var ie=0|x(St,Bt),re=l(ie),Ct=re.write(St,Bt);return Ct!==ie&&(re=re.slice(0,Ct)),re})(G,U);if(ArrayBuffer.isView(G))return g(G);if(G==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(X(G,ArrayBuffer)||G&&X(G.buffer,ArrayBuffer))return(function(St,Bt,ie){if(Bt<0||St.byteLength<Bt)throw new RangeError('"offset" is outside of buffer bounds');if(St.byteLength<Bt+(ie||0))throw new RangeError('"length" is outside of buffer bounds');var re;return re=Bt===void 0&&ie===void 0?new Uint8Array(St):ie===void 0?new Uint8Array(St,Bt):new Uint8Array(St,Bt,ie),re.__proto__=n.prototype,re})(G,U,st);if(typeof G=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var gt=G.valueOf&&G.valueOf();if(gt!=null&&gt!==G)return n.from(gt,U,st);var zt=(function(St){if(n.isBuffer(St)){var Bt=0|v(St.length),ie=l(Bt);return ie.length===0||St.copy(ie,0,0,Bt),ie}if(St.length!==void 0)return typeof St.length!="number"||ut(St.length)?l(0):g(St);if(St.type==="Buffer"&&Array.isArray(St.data))return g(St.data)})(G);if(zt)return zt;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof G[Symbol.toPrimitive]=="function")return n.from(G[Symbol.toPrimitive]("string"),U,st);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}function h(G){if(typeof G!="number")throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function p(G){return h(G),l(G<0?0:0|v(G))}function g(G){for(var U=G.length<0?0:0|v(G.length),st=l(U),gt=0;gt<U;gt+=1)st[gt]=255&G[gt];return st}function v(G){if(G>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|G}function x(G,U){if(n.isBuffer(G))return G.length;if(ArrayBuffer.isView(G)||X(G,ArrayBuffer))return G.byteLength;if(typeof G!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);var st=G.length,gt=arguments.length>2&&arguments[2]===!0;if(!gt&&st===0)return 0;for(var zt=!1;;)switch(U){case"ascii":case"latin1":case"binary":return st;case"utf8":case"utf-8":return et(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*st;case"hex":return st>>>1;case"base64":return it(G).length;default:if(zt)return gt?-1:et(G).length;U=(""+U).toLowerCase(),zt=!0}}function y(G,U,st){var gt=!1;if((U===void 0||U<0)&&(U=0),U>this.length||((st===void 0||st>this.length)&&(st=this.length),st<=0)||(st>>>=0)<=(U>>>=0))return"";for(G||(G="utf8");;)switch(G){case"hex":return F(this,U,st);case"utf8":case"utf-8":return rt(this,U,st);case"ascii":return tt(this,U,st);case"latin1":case"binary":return j(this,U,st);case"base64":return Q(this,U,st);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,U,st);default:if(gt)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),gt=!0}}function w(G,U,st){var gt=G[U];G[U]=G[st],G[st]=gt}function S(G,U,st,gt,zt){if(G.length===0)return-1;if(typeof st=="string"?(gt=st,st=0):st>2147483647?st=2147483647:st<-2147483648&&(st=-2147483648),ut(st=+st)&&(st=zt?0:G.length-1),st<0&&(st=G.length+st),st>=G.length){if(zt)return-1;st=G.length-1}else if(st<0){if(!zt)return-1;st=0}if(typeof U=="string"&&(U=n.from(U,gt)),n.isBuffer(U))return U.length===0?-1:E(G,U,st,gt,zt);if(typeof U=="number")return U&=255,typeof Uint8Array.prototype.indexOf=="function"?zt?Uint8Array.prototype.indexOf.call(G,U,st):Uint8Array.prototype.lastIndexOf.call(G,U,st):E(G,[U],st,gt,zt);throw new TypeError("val must be string, number or Buffer")}function E(G,U,st,gt,zt){var St,Bt=1,ie=G.length,re=U.length;if(gt!==void 0&&((gt=String(gt).toLowerCase())==="ucs2"||gt==="ucs-2"||gt==="utf16le"||gt==="utf-16le")){if(G.length<2||U.length<2)return-1;Bt=2,ie/=2,re/=2,st/=2}function Ct(Jt,ne){return Bt===1?Jt[ne]:Jt.readUInt16BE(ne*Bt)}if(zt){var Yt=-1;for(St=st;St<ie;St++)if(Ct(G,St)===Ct(U,Yt===-1?0:St-Yt)){if(Yt===-1&&(Yt=St),St-Yt+1===re)return Yt*Bt}else Yt!==-1&&(St-=St-Yt),Yt=-1}else for(st+re>ie&&(st=ie-re),St=st;St>=0;St--){for(var Qt=!0,Ht=0;Ht<re;Ht++)if(Ct(G,St+Ht)!==Ct(U,Ht)){Qt=!1;break}if(Qt)return St}return-1}function I(G,U,st,gt){st=Number(st)||0;var zt=G.length-st;gt?(gt=Number(gt))>zt&&(gt=zt):gt=zt;var St=U.length;gt>St/2&&(gt=St/2);for(var Bt=0;Bt<gt;++Bt){var ie=parseInt(U.substr(2*Bt,2),16);if(ut(ie))return Bt;G[st+Bt]=ie}return Bt}function D(G,U,st,gt){return pt(et(U,G.length-st),G,st,gt)}function Z(G,U,st,gt){return pt((function(zt){for(var St=[],Bt=0;Bt<zt.length;++Bt)St.push(255&zt.charCodeAt(Bt));return St})(U),G,st,gt)}function K(G,U,st,gt){return Z(G,U,st,gt)}function z(G,U,st,gt){return pt(it(U),G,st,gt)}function W(G,U,st,gt){return pt((function(zt,St){for(var Bt,ie,re,Ct=[],Yt=0;Yt<zt.length&&!((St-=2)<0);++Yt)Bt=zt.charCodeAt(Yt),ie=Bt>>8,re=Bt%256,Ct.push(re),Ct.push(ie);return Ct})(U,G.length-st),G,st,gt)}function Q(G,U,st){return U===0&&st===G.length?r.fromByteArray(G):r.fromByteArray(G.slice(U,st))}function rt(G,U,st){st=Math.min(G.length,st);for(var gt=[],zt=U;zt<st;){var St,Bt,ie,re,Ct=G[zt],Yt=null,Qt=Ct>239?4:Ct>223?3:Ct>191?2:1;if(zt+Qt<=st)switch(Qt){case 1:Ct<128&&(Yt=Ct);break;case 2:(192&(St=G[zt+1]))==128&&(re=(31&Ct)<<6|63&St)>127&&(Yt=re);break;case 3:St=G[zt+1],Bt=G[zt+2],(192&St)==128&&(192&Bt)==128&&(re=(15&Ct)<<12|(63&St)<<6|63&Bt)>2047&&(re<55296||re>57343)&&(Yt=re);break;case 4:St=G[zt+1],Bt=G[zt+2],ie=G[zt+3],(192&St)==128&&(192&Bt)==128&&(192&ie)==128&&(re=(15&Ct)<<18|(63&St)<<12|(63&Bt)<<6|63&ie)>65535&&re<1114112&&(Yt=re)}Yt===null?(Yt=65533,Qt=1):Yt>65535&&(Yt-=65536,gt.push(Yt>>>10&1023|55296),Yt=56320|1023&Yt),gt.push(Yt),zt+=Qt}return(function(Ht){var Jt=Ht.length;if(Jt<=4096)return String.fromCharCode.apply(String,Ht);for(var ne="",ae=0;ae<Jt;)ne+=String.fromCharCode.apply(String,Ht.slice(ae,ae+=4096));return ne})(gt)}u.kMaxLength=2147483647,n.TYPED_ARRAY_SUPPORT=(function(){try{var G=new Uint8Array(1);return G.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},G.foo()===42}catch{return!1}})(),n.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(G,U,st){return f(G,U,st)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(G,U,st){return(function(gt,zt,St){return h(gt),gt<=0?l(gt):zt!==void 0?typeof St=="string"?l(gt).fill(zt,St):l(gt).fill(zt):l(gt)})(G,U,st)},n.allocUnsafe=function(G){return p(G)},n.allocUnsafeSlow=function(G){return p(G)},n.isBuffer=function(G){return G!=null&&G._isBuffer===!0&&G!==n.prototype},n.compare=function(G,U){if(X(G,Uint8Array)&&(G=n.from(G,G.offset,G.byteLength)),X(U,Uint8Array)&&(U=n.from(U,U.offset,U.byteLength)),!n.isBuffer(G)||!n.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(G===U)return 0;for(var st=G.length,gt=U.length,zt=0,St=Math.min(st,gt);zt<St;++zt)if(G[zt]!==U[zt]){st=G[zt],gt=U[zt];break}return st<gt?-1:gt<st?1:0},n.isEncoding=function(G){switch(String(G).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(G,U){if(!Array.isArray(G))throw new TypeError('"list" argument must be an Array of Buffers');if(G.length===0)return n.alloc(0);var st;if(U===void 0)for(U=0,st=0;st<G.length;++st)U+=G[st].length;var gt=n.allocUnsafe(U),zt=0;for(st=0;st<G.length;++st){var St=G[st];if(X(St,Uint8Array)&&(St=n.from(St)),!n.isBuffer(St))throw new TypeError('"list" argument must be an Array of Buffers');St.copy(gt,zt),zt+=St.length}return gt},n.byteLength=x,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var G=this.length;if(G%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var U=0;U<G;U+=2)w(this,U,U+1);return this},n.prototype.swap32=function(){var G=this.length;if(G%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var U=0;U<G;U+=4)w(this,U,U+3),w(this,U+1,U+2);return this},n.prototype.swap64=function(){var G=this.length;if(G%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var U=0;U<G;U+=8)w(this,U,U+7),w(this,U+1,U+6),w(this,U+2,U+5),w(this,U+3,U+4);return this},n.prototype.toString=function(){var G=this.length;return G===0?"":arguments.length===0?rt(this,0,G):y.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(G){if(!n.isBuffer(G))throw new TypeError("Argument must be a Buffer");return this===G||n.compare(this,G)===0},n.prototype.inspect=function(){var G="",U=u.INSPECT_MAX_BYTES;return G=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(G+=" ... "),"<Buffer "+G+">"},n.prototype.compare=function(G,U,st,gt,zt){if(X(G,Uint8Array)&&(G=n.from(G,G.offset,G.byteLength)),!n.isBuffer(G))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof G);if(U===void 0&&(U=0),st===void 0&&(st=G?G.length:0),gt===void 0&&(gt=0),zt===void 0&&(zt=this.length),U<0||st>G.length||gt<0||zt>this.length)throw new RangeError("out of range index");if(gt>=zt&&U>=st)return 0;if(gt>=zt)return-1;if(U>=st)return 1;if(this===G)return 0;for(var St=(zt>>>=0)-(gt>>>=0),Bt=(st>>>=0)-(U>>>=0),ie=Math.min(St,Bt),re=this.slice(gt,zt),Ct=G.slice(U,st),Yt=0;Yt<ie;++Yt)if(re[Yt]!==Ct[Yt]){St=re[Yt],Bt=Ct[Yt];break}return St<Bt?-1:Bt<St?1:0},n.prototype.includes=function(G,U,st){return this.indexOf(G,U,st)!==-1},n.prototype.indexOf=function(G,U,st){return S(this,G,U,st,!0)},n.prototype.lastIndexOf=function(G,U,st){return S(this,G,U,st,!1)},n.prototype.write=function(G,U,st,gt){if(U===void 0)gt="utf8",st=this.length,U=0;else if(st===void 0&&typeof U=="string")gt=U,st=this.length,U=0;else{if(!isFinite(U))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");U>>>=0,isFinite(st)?(st>>>=0,gt===void 0&&(gt="utf8")):(gt=st,st=void 0)}var zt=this.length-U;if((st===void 0||st>zt)&&(st=zt),G.length>0&&(st<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");gt||(gt="utf8");for(var St=!1;;)switch(gt){case"hex":return I(this,G,U,st);case"utf8":case"utf-8":return D(this,G,U,st);case"ascii":return Z(this,G,U,st);case"latin1":case"binary":return K(this,G,U,st);case"base64":return z(this,G,U,st);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,G,U,st);default:if(St)throw new TypeError("Unknown encoding: "+gt);gt=(""+gt).toLowerCase(),St=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function tt(G,U,st){var gt="";st=Math.min(G.length,st);for(var zt=U;zt<st;++zt)gt+=String.fromCharCode(127&G[zt]);return gt}function j(G,U,st){var gt="";st=Math.min(G.length,st);for(var zt=U;zt<st;++zt)gt+=String.fromCharCode(G[zt]);return gt}function F(G,U,st){var gt=G.length;(!U||U<0)&&(U=0),(!st||st<0||st>gt)&&(st=gt);for(var zt="",St=U;St<st;++St)zt+=H(G[St]);return zt}function R(G,U,st){for(var gt=G.slice(U,st),zt="",St=0;St<gt.length;St+=2)zt+=String.fromCharCode(gt[St]+256*gt[St+1]);return zt}function T(G,U,st){if(G%1!=0||G<0)throw new RangeError("offset is not uint");if(G+U>st)throw new RangeError("Trying to access beyond buffer length")}function C(G,U,st,gt,zt,St){if(!n.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(U>zt||U<St)throw new RangeError('"value" argument is out of bounds');if(st+gt>G.length)throw new RangeError("Index out of range")}function k(G,U,st,gt,zt,St){if(st+gt>G.length)throw new RangeError("Index out of range");if(st<0)throw new RangeError("Index out of range")}function M(G,U,st,gt,zt){return U=+U,st>>>=0,zt||k(G,0,st,4),c.write(G,U,st,gt,23,4),st+4}function O(G,U,st,gt,zt){return U=+U,st>>>=0,zt||k(G,0,st,8),c.write(G,U,st,gt,52,8),st+8}n.prototype.slice=function(G,U){var st=this.length;(G=~~G)<0?(G+=st)<0&&(G=0):G>st&&(G=st),(U=U===void 0?st:~~U)<0?(U+=st)<0&&(U=0):U>st&&(U=st),U<G&&(U=G);var gt=this.subarray(G,U);return gt.__proto__=n.prototype,gt},n.prototype.readUIntLE=function(G,U,st){G>>>=0,U>>>=0,st||T(G,U,this.length);for(var gt=this[G],zt=1,St=0;++St<U&&(zt*=256);)gt+=this[G+St]*zt;return gt},n.prototype.readUIntBE=function(G,U,st){G>>>=0,U>>>=0,st||T(G,U,this.length);for(var gt=this[G+--U],zt=1;U>0&&(zt*=256);)gt+=this[G+--U]*zt;return gt},n.prototype.readUInt8=function(G,U){return G>>>=0,U||T(G,1,this.length),this[G]},n.prototype.readUInt16LE=function(G,U){return G>>>=0,U||T(G,2,this.length),this[G]|this[G+1]<<8},n.prototype.readUInt16BE=function(G,U){return G>>>=0,U||T(G,2,this.length),this[G]<<8|this[G+1]},n.prototype.readUInt32LE=function(G,U){return G>>>=0,U||T(G,4,this.length),(this[G]|this[G+1]<<8|this[G+2]<<16)+16777216*this[G+3]},n.prototype.readUInt32BE=function(G,U){return G>>>=0,U||T(G,4,this.length),16777216*this[G]+(this[G+1]<<16|this[G+2]<<8|this[G+3])},n.prototype.readIntLE=function(G,U,st){G>>>=0,U>>>=0,st||T(G,U,this.length);for(var gt=this[G],zt=1,St=0;++St<U&&(zt*=256);)gt+=this[G+St]*zt;return gt>=(zt*=128)&&(gt-=Math.pow(2,8*U)),gt},n.prototype.readIntBE=function(G,U,st){G>>>=0,U>>>=0,st||T(G,U,this.length);for(var gt=U,zt=1,St=this[G+--gt];gt>0&&(zt*=256);)St+=this[G+--gt]*zt;return St>=(zt*=128)&&(St-=Math.pow(2,8*U)),St},n.prototype.readInt8=function(G,U){return G>>>=0,U||T(G,1,this.length),128&this[G]?-1*(255-this[G]+1):this[G]},n.prototype.readInt16LE=function(G,U){G>>>=0,U||T(G,2,this.length);var st=this[G]|this[G+1]<<8;return 32768&st?4294901760|st:st},n.prototype.readInt16BE=function(G,U){G>>>=0,U||T(G,2,this.length);var st=this[G+1]|this[G]<<8;return 32768&st?4294901760|st:st},n.prototype.readInt32LE=function(G,U){return G>>>=0,U||T(G,4,this.length),this[G]|this[G+1]<<8|this[G+2]<<16|this[G+3]<<24},n.prototype.readInt32BE=function(G,U){return G>>>=0,U||T(G,4,this.length),this[G]<<24|this[G+1]<<16|this[G+2]<<8|this[G+3]},n.prototype.readFloatLE=function(G,U){return G>>>=0,U||T(G,4,this.length),c.read(this,G,!0,23,4)},n.prototype.readFloatBE=function(G,U){return G>>>=0,U||T(G,4,this.length),c.read(this,G,!1,23,4)},n.prototype.readDoubleLE=function(G,U){return G>>>=0,U||T(G,8,this.length),c.read(this,G,!0,52,8)},n.prototype.readDoubleBE=function(G,U){return G>>>=0,U||T(G,8,this.length),c.read(this,G,!1,52,8)},n.prototype.writeUIntLE=function(G,U,st,gt){G=+G,U>>>=0,st>>>=0,gt||C(this,G,U,st,Math.pow(2,8*st)-1,0);var zt=1,St=0;for(this[U]=255&G;++St<st&&(zt*=256);)this[U+St]=G/zt&255;return U+st},n.prototype.writeUIntBE=function(G,U,st,gt){G=+G,U>>>=0,st>>>=0,gt||C(this,G,U,st,Math.pow(2,8*st)-1,0);var zt=st-1,St=1;for(this[U+zt]=255&G;--zt>=0&&(St*=256);)this[U+zt]=G/St&255;return U+st},n.prototype.writeUInt8=function(G,U,st){return G=+G,U>>>=0,st||C(this,G,U,1,255,0),this[U]=255&G,U+1},n.prototype.writeUInt16LE=function(G,U,st){return G=+G,U>>>=0,st||C(this,G,U,2,65535,0),this[U]=255&G,this[U+1]=G>>>8,U+2},n.prototype.writeUInt16BE=function(G,U,st){return G=+G,U>>>=0,st||C(this,G,U,2,65535,0),this[U]=G>>>8,this[U+1]=255&G,U+2},n.prototype.writeUInt32LE=function(G,U,st){return G=+G,U>>>=0,st||C(this,G,U,4,4294967295,0),this[U+3]=G>>>24,this[U+2]=G>>>16,this[U+1]=G>>>8,this[U]=255&G,U+4},n.prototype.writeUInt32BE=function(G,U,st){return G=+G,U>>>=0,st||C(this,G,U,4,4294967295,0),this[U]=G>>>24,this[U+1]=G>>>16,this[U+2]=G>>>8,this[U+3]=255&G,U+4},n.prototype.writeIntLE=function(G,U,st,gt){if(G=+G,U>>>=0,!gt){var zt=Math.pow(2,8*st-1);C(this,G,U,st,zt-1,-zt)}var St=0,Bt=1,ie=0;for(this[U]=255&G;++St<st&&(Bt*=256);)G<0&&ie===0&&this[U+St-1]!==0&&(ie=1),this[U+St]=(G/Bt>>0)-ie&255;return U+st},n.prototype.writeIntBE=function(G,U,st,gt){if(G=+G,U>>>=0,!gt){var zt=Math.pow(2,8*st-1);C(this,G,U,st,zt-1,-zt)}var St=st-1,Bt=1,ie=0;for(this[U+St]=255&G;--St>=0&&(Bt*=256);)G<0&&ie===0&&this[U+St+1]!==0&&(ie=1),this[U+St]=(G/Bt>>0)-ie&255;return U+st},n.prototype.writeInt8=function(G,U,st){return G=+G,U>>>=0,st||C(this,G,U,1,127,-128),G<0&&(G=255+G+1),this[U]=255&G,U+1},n.prototype.writeInt16LE=function(G,U,st){return G=+G,U>>>=0,st||C(this,G,U,2,32767,-32768),this[U]=255&G,this[U+1]=G>>>8,U+2},n.prototype.writeInt16BE=function(G,U,st){return G=+G,U>>>=0,st||C(this,G,U,2,32767,-32768),this[U]=G>>>8,this[U+1]=255&G,U+2},n.prototype.writeInt32LE=function(G,U,st){return G=+G,U>>>=0,st||C(this,G,U,4,2147483647,-2147483648),this[U]=255&G,this[U+1]=G>>>8,this[U+2]=G>>>16,this[U+3]=G>>>24,U+4},n.prototype.writeInt32BE=function(G,U,st){return G=+G,U>>>=0,st||C(this,G,U,4,2147483647,-2147483648),G<0&&(G=4294967295+G+1),this[U]=G>>>24,this[U+1]=G>>>16,this[U+2]=G>>>8,this[U+3]=255&G,U+4},n.prototype.writeFloatLE=function(G,U,st){return M(this,G,U,!0,st)},n.prototype.writeFloatBE=function(G,U,st){return M(this,G,U,!1,st)},n.prototype.writeDoubleLE=function(G,U,st){return O(this,G,U,!0,st)},n.prototype.writeDoubleBE=function(G,U,st){return O(this,G,U,!1,st)},n.prototype.copy=function(G,U,st,gt){if(!n.isBuffer(G))throw new TypeError("argument should be a Buffer");if(st||(st=0),gt||gt===0||(gt=this.length),U>=G.length&&(U=G.length),U||(U=0),gt>0&&gt<st&&(gt=st),gt===st||G.length===0||this.length===0)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(st<0||st>=this.length)throw new RangeError("Index out of range");if(gt<0)throw new RangeError("sourceEnd out of bounds");gt>this.length&&(gt=this.length),G.length-U<gt-st&&(gt=G.length-U+st);var zt=gt-st;if(this===G&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(U,st,gt);else if(this===G&&st<U&&U<gt)for(var St=zt-1;St>=0;--St)G[St+U]=this[St+st];else Uint8Array.prototype.set.call(G,this.subarray(st,gt),U);return zt},n.prototype.fill=function(G,U,st,gt){if(typeof G=="string"){if(typeof U=="string"?(gt=U,U=0,st=this.length):typeof st=="string"&&(gt=st,st=this.length),gt!==void 0&&typeof gt!="string")throw new TypeError("encoding must be a string");if(typeof gt=="string"&&!n.isEncoding(gt))throw new TypeError("Unknown encoding: "+gt);if(G.length===1){var zt=G.charCodeAt(0);(gt==="utf8"&&zt<128||gt==="latin1")&&(G=zt)}}else typeof G=="number"&&(G&=255);if(U<0||this.length<U||this.length<st)throw new RangeError("Out of range index");if(st<=U)return this;var St;if(U>>>=0,st=st===void 0?this.length:st>>>0,G||(G=0),typeof G=="number")for(St=U;St<st;++St)this[St]=G;else{var Bt=n.isBuffer(G)?G:n.from(G,gt),ie=Bt.length;if(ie===0)throw new TypeError('The value "'+G+'" is invalid for argument "value"');for(St=0;St<st-U;++St)this[St+U]=Bt[St%ie]}return this};var P=/[^+/0-9A-Za-z-_]/g;function H(G){return G<16?"0"+G.toString(16):G.toString(16)}function et(G,U){var st;U=U||1/0;for(var gt=G.length,zt=null,St=[],Bt=0;Bt<gt;++Bt){if((st=G.charCodeAt(Bt))>55295&&st<57344){if(!zt){if(st>56319){(U-=3)>-1&&St.push(239,191,189);continue}if(Bt+1===gt){(U-=3)>-1&&St.push(239,191,189);continue}zt=st;continue}if(st<56320){(U-=3)>-1&&St.push(239,191,189),zt=st;continue}st=65536+(zt-55296<<10|st-56320)}else zt&&(U-=3)>-1&&St.push(239,191,189);if(zt=null,st<128){if((U-=1)<0)break;St.push(st)}else if(st<2048){if((U-=2)<0)break;St.push(st>>6|192,63&st|128)}else if(st<65536){if((U-=3)<0)break;St.push(st>>12|224,st>>6&63|128,63&st|128)}else{if(!(st<1114112))throw new Error("Invalid code point");if((U-=4)<0)break;St.push(st>>18|240,st>>12&63|128,st>>6&63|128,63&st|128)}}return St}function it(G){return r.toByteArray((function(U){if((U=(U=U.split("=")[0]).trim().replace(P,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U})(G))}function pt(G,U,st,gt){for(var zt=0;zt<gt&&!(zt+st>=U.length||zt>=G.length);++zt)U[zt+st]=G[zt];return zt}function X(G,U){return G instanceof U||G!=null&&G.constructor!=null&&G.constructor.name!=null&&G.constructor.name===U.name}function ut(G){return G!=G}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":185,buffer:220,ieee754:439}],221:[function(t,s,u){var o=t("safe-buffer").Buffer,r=t("stream").Transform,c=t("string_decoder").StringDecoder;function l(n){r.call(this),this.hashMode=typeof n=="string",this.hashMode?this[n]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}t("inherits")(l,r),l.prototype.update=function(n,f,h){typeof n=="string"&&(n=o.from(n,f));var p=this._update(n);return this.hashMode?this:(h&&(p=this._toString(p,h)),p)},l.prototype.setAutoPadding=function(){},l.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},l.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},l.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},l.prototype._transform=function(n,f,h){var p;try{this.hashMode?this._update(n):this.push(this._update(n))}catch(g){p=g}finally{h(p)}},l.prototype._flush=function(n){var f;try{this.push(this.__final())}catch(h){f=h}n(f)},l.prototype._finalOrDigest=function(n){var f=this.__final()||o.alloc(0);return n&&(f=this._toString(f,n,!0)),f},l.prototype._toString=function(n,f,h){if(this._decoder||(this._decoder=new c(f),this._encoding=f),this._encoding!==f)throw new Error("can't switch encodings");var p=this._decoder.write(n);return h&&(p+=this._decoder.end()),p},s.exports=l},{inherits:440,"safe-buffer":494,stream:505,string_decoder:218}],222:[function(t,s,u){var o=t("../internals/is-callable"),r=t("../internals/try-to-string"),c=TypeError;s.exports=function(l){if(o(l))return l;throw new c(r(l)+" is not a function")}},{"../internals/is-callable":285,"../internals/try-to-string":349}],223:[function(t,s,u){var o=t("../internals/is-constructor"),r=t("../internals/try-to-string"),c=TypeError;s.exports=function(l){if(o(l))return l;throw new c(r(l)+" is not a constructor")}},{"../internals/is-constructor":286,"../internals/try-to-string":349}],224:[function(t,s,u){var o=t("../internals/is-callable"),r=String,c=TypeError;s.exports=function(l){if(typeof l=="object"||o(l))return l;throw new c("Can't set "+r(l)+" as a prototype")}},{"../internals/is-callable":285}],225:[function(t,s,u){var o=t("../internals/well-known-symbol"),r=t("../internals/object-create"),c=t("../internals/object-define-property").f,l=o("unscopables"),n=Array.prototype;n[l]===void 0&&c(n,l,{configurable:!0,value:r(null)}),s.exports=function(f){n[l][f]=!0}},{"../internals/object-create":306,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],226:[function(t,s,u){var o=t("../internals/object-is-prototype-of"),r=TypeError;s.exports=function(c,l){if(o(l,c))return c;throw new r("Incorrect invocation")}},{"../internals/object-is-prototype-of":314}],227:[function(t,s,u){var o=t("../internals/is-object"),r=String,c=TypeError;s.exports=function(l){if(o(l))return l;throw new c(r(l)+" is not an object")}},{"../internals/is-object":289}],228:[function(t,s,u){var o=t("../internals/to-indexed-object"),r=t("../internals/to-absolute-index"),c=t("../internals/length-of-array-like"),l=function(n){return function(f,h,p){var g,v=o(f),x=c(v),y=r(p,x);if(n&&h!=h){for(;x>y;)if((g=v[y++])!=g)return!0}else for(;x>y;y++)if((n||y in v)&&v[y]===h)return n||y||0;return!n&&-1}};s.exports={includes:l(!0),indexOf:l(!1)}},{"../internals/length-of-array-like":299,"../internals/to-absolute-index":340,"../internals/to-indexed-object":341}],229:[function(t,s,u){var o=t("../internals/function-bind-context"),r=t("../internals/function-uncurry-this"),c=t("../internals/indexed-object"),l=t("../internals/to-object"),n=t("../internals/length-of-array-like"),f=t("../internals/array-species-create"),h=r([].push),p=function(g){var v=g===1,x=g===2,y=g===3,w=g===4,S=g===6,E=g===7,I=g===5||S;return function(D,Z,K,z){for(var W,Q,rt=l(D),tt=c(rt),j=o(Z,K),F=n(tt),R=0,T=z||f,C=v?T(D,F):x||E?T(D,0):void 0;F>R;R++)if((I||R in tt)&&(Q=j(W=tt[R],R,rt),g))if(v)C[R]=Q;else if(Q)switch(g){case 3:return!0;case 5:return W;case 6:return R;case 2:h(C,W)}else switch(g){case 4:return!1;case 7:h(C,W)}return S?-1:y||w?w:C}};s.exports={forEach:p(0),map:p(1),filter:p(2),some:p(3),every:p(4),find:p(5),findIndex:p(6),filterReject:p(7)}},{"../internals/array-species-create":233,"../internals/function-bind-context":262,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/length-of-array-like":299,"../internals/to-object":344}],230:[function(t,s,u){var o=t("../internals/to-absolute-index"),r=t("../internals/length-of-array-like"),c=t("../internals/create-property"),l=Array,n=Math.max;s.exports=function(f,h,p){for(var g=r(f),v=o(h,g),x=o(p===void 0?g:p,g),y=l(n(x-v,0)),w=0;v<x;v++,w++)c(y,w,f[v]);return y.length=w,y}},{"../internals/create-property":243,"../internals/length-of-array-like":299,"../internals/to-absolute-index":340}],231:[function(t,s,u){var o=t("../internals/function-uncurry-this");s.exports=o([].slice)},{"../internals/function-uncurry-this":268}],232:[function(t,s,u){var o=t("../internals/is-array"),r=t("../internals/is-constructor"),c=t("../internals/is-object"),l=t("../internals/well-known-symbol")("species"),n=Array;s.exports=function(f){var h;return o(f)&&(h=f.constructor,(r(h)&&(h===n||o(h.prototype))||c(h)&&(h=h[l])===null)&&(h=void 0)),h===void 0?n:h}},{"../internals/is-array":284,"../internals/is-constructor":286,"../internals/is-object":289,"../internals/well-known-symbol":357}],233:[function(t,s,u){var o=t("../internals/array-species-constructor");s.exports=function(r,c){return new(o(r))(c===0?0:c)}},{"../internals/array-species-constructor":232}],234:[function(t,s,u){var o=t("../internals/well-known-symbol")("iterator"),r=!1;try{var c=0,l={next:function(){return{done:!!c++}},return:function(){r=!0}};l[o]=function(){return this},Array.from(l,(function(){throw 2}))}catch{}s.exports=function(n,f){try{if(!f&&!r)return!1}catch{return!1}var h=!1;try{var p={};p[o]=function(){return{next:function(){return{done:h=!0}}}},n(p)}catch{}return h}},{"../internals/well-known-symbol":357}],235:[function(t,s,u){var o=t("../internals/function-uncurry-this"),r=o({}.toString),c=o("".slice);s.exports=function(l){return c(r(l),8,-1)}},{"../internals/function-uncurry-this":268}],236:[function(t,s,u){var o=t("../internals/to-string-tag-support"),r=t("../internals/is-callable"),c=t("../internals/classof-raw"),l=t("../internals/well-known-symbol")("toStringTag"),n=Object,f=c((function(){return arguments})())==="Arguments";s.exports=o?c:function(h){var p,g,v;return h===void 0?"Undefined":h===null?"Null":typeof(g=(function(x,y){try{return x[y]}catch{}})(p=n(h),l))=="string"?g:f?c(p):(v=c(p))==="Object"&&r(p.callee)?"Arguments":v}},{"../internals/classof-raw":235,"../internals/is-callable":285,"../internals/to-string-tag-support":347,"../internals/well-known-symbol":357}],237:[function(t,s,u){var o=t("../internals/has-own-property"),r=t("../internals/own-keys"),c=t("../internals/object-get-own-property-descriptor"),l=t("../internals/object-define-property");s.exports=function(n,f,h){for(var p=r(f),g=l.f,v=c.f,x=0;x<p.length;x++){var y=p[x];o(n,y)||h&&o(h,y)||g(n,y,v(f,y))}}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/own-keys":321}],238:[function(t,s,u){var o=t("../internals/well-known-symbol")("match");s.exports=function(r){var c=/./;try{"/./"[r](c)}catch{try{return c[o]=!1,"/./"[r](c)}catch{}}return!1}},{"../internals/well-known-symbol":357}],239:[function(t,s,u){var o=t("../internals/fails");s.exports=!o((function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype}))},{"../internals/fails":260}],240:[function(t,s,u){s.exports=function(o,r){return{value:o,done:r}}},{}],241:[function(t,s,u){var o=t("../internals/descriptors"),r=t("../internals/object-define-property"),c=t("../internals/create-property-descriptor");s.exports=o?function(l,n,f){return r.f(l,n,c(1,f))}:function(l,n,f){return l[n]=f,l}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/object-define-property":308}],242:[function(t,s,u){s.exports=function(o,r){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:r}}},{}],243:[function(t,s,u){var o=t("../internals/to-property-key"),r=t("../internals/object-define-property"),c=t("../internals/create-property-descriptor");s.exports=function(l,n,f){var h=o(n);h in l?r.f(l,h,c(0,f)):l[h]=f}},{"../internals/create-property-descriptor":242,"../internals/object-define-property":308,"../internals/to-property-key":346}],244:[function(t,s,u){var o=t("../internals/make-built-in"),r=t("../internals/object-define-property");s.exports=function(c,l,n){return n.get&&o(n.get,l,{getter:!0}),n.set&&o(n.set,l,{setter:!0}),r.f(c,l,n)}},{"../internals/make-built-in":300,"../internals/object-define-property":308}],245:[function(t,s,u){var o=t("../internals/is-callable"),r=t("../internals/object-define-property"),c=t("../internals/make-built-in"),l=t("../internals/define-global-property");s.exports=function(n,f,h,p){p||(p={});var g=p.enumerable,v=p.name!==void 0?p.name:f;if(o(h)&&c(h,v,p),p.global)g?n[f]=h:l(f,h);else{try{p.unsafe?n[f]&&(g=!0):delete n[f]}catch{}g?n[f]=h:r.f(n,f,{value:h,enumerable:!1,configurable:!p.nonConfigurable,writable:!p.nonWritable})}return n}},{"../internals/define-global-property":246,"../internals/is-callable":285,"../internals/make-built-in":300,"../internals/object-define-property":308}],246:[function(t,s,u){var o=t("../internals/global"),r=Object.defineProperty;s.exports=function(c,l){try{r(o,c,{value:l,configurable:!0,writable:!0})}catch{o[c]=l}return l}},{"../internals/global":274}],247:[function(t,s,u){var o=t("../internals/fails");s.exports=!o((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}))},{"../internals/fails":260}],248:[function(t,s,u){var o=typeof document=="object"&&document.all,r=o===void 0&&o!==void 0;s.exports={all:o,IS_HTMLDDA:r}},{}],249:[function(t,s,u){var o=t("../internals/global"),r=t("../internals/is-object"),c=o.document,l=r(c)&&r(c.createElement);s.exports=function(n){return l?c.createElement(n):{}}},{"../internals/global":274,"../internals/is-object":289}],250:[function(t,s,u){var o=t("../internals/engine-is-deno"),r=t("../internals/engine-is-node");s.exports=!o&&!r&&typeof window=="object"&&typeof document=="object"},{"../internals/engine-is-deno":251,"../internals/engine-is-node":254}],251:[function(t,s,u){s.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},{}],252:[function(t,s,u){var o=t("../internals/engine-user-agent");s.exports=/ipad|iphone|ipod/i.test(o)&&typeof Pebble<"u"},{"../internals/engine-user-agent":256}],253:[function(t,s,u){var o=t("../internals/engine-user-agent");s.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(o)},{"../internals/engine-user-agent":256}],254:[function(t,s,u){var o=t("../internals/global"),r=t("../internals/classof-raw");s.exports=r(o.process)==="process"},{"../internals/classof-raw":235,"../internals/global":274}],255:[function(t,s,u){var o=t("../internals/engine-user-agent");s.exports=/web0s(?!.*chrome)/i.test(o)},{"../internals/engine-user-agent":256}],256:[function(t,s,u){s.exports=typeof navigator<"u"&&String(navigator.userAgent)||""},{}],257:[function(t,s,u){var o,r,c=t("../internals/global"),l=t("../internals/engine-user-agent"),n=c.process,f=c.Deno,h=n&&n.versions||f&&f.version,p=h&&h.v8;p&&(r=(o=p.split("."))[0]>0&&o[0]<4?1:+(o[0]+o[1])),!r&&l&&(!(o=l.match(/Edge\/(\d+)/))||o[1]>=74)&&(o=l.match(/Chrome\/(\d+)/))&&(r=+o[1]),s.exports=r},{"../internals/engine-user-agent":256,"../internals/global":274}],258:[function(t,s,u){s.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},{}],259:[function(t,s,u){var o=t("../internals/global"),r=t("../internals/object-get-own-property-descriptor").f,c=t("../internals/create-non-enumerable-property"),l=t("../internals/define-built-in"),n=t("../internals/define-global-property"),f=t("../internals/copy-constructor-properties"),h=t("../internals/is-forced");s.exports=function(p,g){var v,x,y,w,S,E=p.target,I=p.global,D=p.stat;if(v=I?o:D?o[E]||n(E,{}):(o[E]||{}).prototype)for(x in g){if(w=g[x],y=p.dontCallGetSet?(S=r(v,x))&&S.value:v[x],!h(I?x:E+(D?".":"#")+x,p.forced)&&y!==void 0){if(typeof w==typeof y)continue;f(w,y)}(p.sham||y&&y.sham)&&c(w,"sham",!0),l(v,x,w,p)}}},{"../internals/copy-constructor-properties":237,"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/define-global-property":246,"../internals/global":274,"../internals/is-forced":287,"../internals/object-get-own-property-descriptor":309}],260:[function(t,s,u){s.exports=function(o){try{return!!o()}catch{return!0}}},{}],261:[function(t,s,u){var o=t("../internals/function-bind-native"),r=Function.prototype,c=r.apply,l=r.call;s.exports=typeof Reflect=="object"&&Reflect.apply||(o?l.bind(c):function(){return l.apply(c,arguments)})},{"../internals/function-bind-native":263}],262:[function(t,s,u){var o=t("../internals/function-uncurry-this-clause"),r=t("../internals/a-callable"),c=t("../internals/function-bind-native"),l=o(o.bind);s.exports=function(n,f){return r(n),f===void 0?n:c?l(n,f):function(){return n.apply(f,arguments)}}},{"../internals/a-callable":222,"../internals/function-bind-native":263,"../internals/function-uncurry-this-clause":267}],263:[function(t,s,u){var o=t("../internals/fails");s.exports=!o((function(){var r=(function(){}).bind();return typeof r!="function"||r.hasOwnProperty("prototype")}))},{"../internals/fails":260}],264:[function(t,s,u){var o=t("../internals/function-bind-native"),r=Function.prototype.call;s.exports=o?r.bind(r):function(){return r.apply(r,arguments)}},{"../internals/function-bind-native":263}],265:[function(t,s,u){var o=t("../internals/descriptors"),r=t("../internals/has-own-property"),c=Function.prototype,l=o&&Object.getOwnPropertyDescriptor,n=r(c,"name"),f=n&&(function(){}).name==="something",h=n&&(!o||o&&l(c,"name").configurable);s.exports={EXISTS:n,PROPER:f,CONFIGURABLE:h}},{"../internals/descriptors":247,"../internals/has-own-property":275}],266:[function(t,s,u){var o=t("../internals/function-uncurry-this"),r=t("../internals/a-callable");s.exports=function(c,l,n){try{return o(r(Object.getOwnPropertyDescriptor(c,l)[n]))}catch{}}},{"../internals/a-callable":222,"../internals/function-uncurry-this":268}],267:[function(t,s,u){var o=t("../internals/classof-raw"),r=t("../internals/function-uncurry-this");s.exports=function(c){if(o(c)==="Function")return r(c)}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268}],268:[function(t,s,u){var o=t("../internals/function-bind-native"),r=Function.prototype,c=r.call,l=o&&r.bind.bind(c,c);s.exports=o?l:function(n){return function(){return c.apply(n,arguments)}}},{"../internals/function-bind-native":263}],269:[function(t,s,u){var o=t("../internals/global"),r=t("../internals/is-callable"),c=function(l){return r(l)?l:void 0};s.exports=function(l,n){return arguments.length<2?c(o[l]):o[l]&&o[l][n]}},{"../internals/global":274,"../internals/is-callable":285}],270:[function(t,s,u){var o=t("../internals/classof"),r=t("../internals/get-method"),c=t("../internals/is-null-or-undefined"),l=t("../internals/iterators"),n=t("../internals/well-known-symbol")("iterator");s.exports=function(f){if(!c(f))return r(f,n)||r(f,"@@iterator")||l[o(f)]}},{"../internals/classof":236,"../internals/get-method":273,"../internals/is-null-or-undefined":288,"../internals/iterators":298,"../internals/well-known-symbol":357}],271:[function(t,s,u){var o=t("../internals/function-call"),r=t("../internals/a-callable"),c=t("../internals/an-object"),l=t("../internals/try-to-string"),n=t("../internals/get-iterator-method"),f=TypeError;s.exports=function(h,p){var g=arguments.length<2?n(h):p;if(r(g))return c(o(g,h));throw new f(l(h)+" is not iterable")}},{"../internals/a-callable":222,"../internals/an-object":227,"../internals/function-call":264,"../internals/get-iterator-method":270,"../internals/try-to-string":349}],272:[function(t,s,u){var o=t("../internals/function-uncurry-this"),r=t("../internals/is-array"),c=t("../internals/is-callable"),l=t("../internals/classof-raw"),n=t("../internals/to-string"),f=o([].push);s.exports=function(h){if(c(h))return h;if(r(h)){for(var p=h.length,g=[],v=0;v<p;v++){var x=h[v];typeof x=="string"?f(g,x):typeof x!="number"&&l(x)!=="Number"&&l(x)!=="String"||f(g,n(x))}var y=g.length,w=!0;return function(S,E){if(w)return w=!1,E;if(r(this))return E;for(var I=0;I<y;I++)if(g[I]===S)return E}}}},{"../internals/classof-raw":235,"../internals/function-uncurry-this":268,"../internals/is-array":284,"../internals/is-callable":285,"../internals/to-string":348}],273:[function(t,s,u){var o=t("../internals/a-callable"),r=t("../internals/is-null-or-undefined");s.exports=function(c,l){var n=c[l];return r(n)?void 0:o(n)}},{"../internals/a-callable":222,"../internals/is-null-or-undefined":288}],274:[function(t,s,u){(function(o){(function(){var r=function(c){return c&&c.Math===Math&&c};s.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof o=="object"&&o)||(function(){return this})()||this||Function("return this")()}).call(this)}).call(this,typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],275:[function(t,s,u){var o=t("../internals/function-uncurry-this"),r=t("../internals/to-object"),c=o({}.hasOwnProperty);s.exports=Object.hasOwn||function(l,n){return c(r(l),n)}},{"../internals/function-uncurry-this":268,"../internals/to-object":344}],276:[function(t,s,u){s.exports={}},{}],277:[function(t,s,u){s.exports=function(o,r){try{arguments.length===1?console.error(o):console.error(o,r)}catch{}}},{}],278:[function(t,s,u){var o=t("../internals/get-built-in");s.exports=o("document","documentElement")},{"../internals/get-built-in":269}],279:[function(t,s,u){var o=t("../internals/descriptors"),r=t("../internals/fails"),c=t("../internals/document-create-element");s.exports=!o&&!r((function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!==7}))},{"../internals/descriptors":247,"../internals/document-create-element":249,"../internals/fails":260}],280:[function(t,s,u){var o=t("../internals/function-uncurry-this"),r=t("../internals/fails"),c=t("../internals/classof-raw"),l=Object,n=o("".split);s.exports=r((function(){return!l("z").propertyIsEnumerable(0)}))?function(f){return c(f)==="String"?n(f,""):l(f)}:l},{"../internals/classof-raw":235,"../internals/fails":260,"../internals/function-uncurry-this":268}],281:[function(t,s,u){var o=t("../internals/function-uncurry-this"),r=t("../internals/is-callable"),c=t("../internals/shared-store"),l=o(Function.toString);r(c.inspectSource)||(c.inspectSource=function(n){return l(n)}),s.exports=c.inspectSource},{"../internals/function-uncurry-this":268,"../internals/is-callable":285,"../internals/shared-store":333}],282:[function(t,s,u){var o,r,c,l=t("../internals/weak-map-basic-detection"),n=t("../internals/global"),f=t("../internals/is-object"),h=t("../internals/create-non-enumerable-property"),p=t("../internals/has-own-property"),g=t("../internals/shared-store"),v=t("../internals/shared-key"),x=t("../internals/hidden-keys"),y=n.TypeError,w=n.WeakMap;if(l||g.state){var S=g.state||(g.state=new w);S.get=S.get,S.has=S.has,S.set=S.set,o=function(I,D){if(S.has(I))throw new y("Object already initialized");return D.facade=I,S.set(I,D),D},r=function(I){return S.get(I)||{}},c=function(I){return S.has(I)}}else{var E=v("state");x[E]=!0,o=function(I,D){if(p(I,E))throw new y("Object already initialized");return D.facade=I,h(I,E,D),D},r=function(I){return p(I,E)?I[E]:{}},c=function(I){return p(I,E)}}s.exports={set:o,get:r,has:c,enforce:function(I){return c(I)?r(I):o(I,{})},getterFor:function(I){return function(D){var Z;if(!f(D)||(Z=r(D)).type!==I)throw new y("Incompatible receiver, "+I+" required");return Z}}}},{"../internals/create-non-enumerable-property":241,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/is-object":289,"../internals/shared-key":332,"../internals/shared-store":333,"../internals/weak-map-basic-detection":354}],283:[function(t,s,u){var o=t("../internals/well-known-symbol"),r=t("../internals/iterators"),c=o("iterator"),l=Array.prototype;s.exports=function(n){return n!==void 0&&(r.Array===n||l[c]===n)}},{"../internals/iterators":298,"../internals/well-known-symbol":357}],284:[function(t,s,u){var o=t("../internals/classof-raw");s.exports=Array.isArray||function(r){return o(r)==="Array"}},{"../internals/classof-raw":235}],285:[function(t,s,u){var o=t("../internals/document-all"),r=o.all;s.exports=o.IS_HTMLDDA?function(c){return typeof c=="function"||c===r}:function(c){return typeof c=="function"}},{"../internals/document-all":248}],286:[function(t,s,u){var o=t("../internals/function-uncurry-this"),r=t("../internals/fails"),c=t("../internals/is-callable"),l=t("../internals/classof"),n=t("../internals/get-built-in"),f=t("../internals/inspect-source"),h=function(){},p=[],g=n("Reflect","construct"),v=/^\s*(?:class|function)\b/,x=o(v.exec),y=!v.test(h),w=function(E){if(!c(E))return!1;try{return g(h,p,E),!0}catch{return!1}},S=function(E){if(!c(E))return!1;switch(l(E)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return y||!!x(v,f(E))}catch{return!0}};S.sham=!0,s.exports=!g||r((function(){var E;return w(w.call)||!w(Object)||!w((function(){E=!0}))||E}))?S:w},{"../internals/classof":236,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/inspect-source":281,"../internals/is-callable":285}],287:[function(t,s,u){var o=t("../internals/fails"),r=t("../internals/is-callable"),c=/#|\.prototype\./,l=function(g,v){var x=f[n(g)];return x===p||x!==h&&(r(v)?o(v):!!v)},n=l.normalize=function(g){return String(g).replace(c,".").toLowerCase()},f=l.data={},h=l.NATIVE="N",p=l.POLYFILL="P";s.exports=l},{"../internals/fails":260,"../internals/is-callable":285}],288:[function(t,s,u){s.exports=function(o){return o==null}},{}],289:[function(t,s,u){var o=t("../internals/is-callable"),r=t("../internals/document-all"),c=r.all;s.exports=r.IS_HTMLDDA?function(l){return typeof l=="object"?l!==null:o(l)||l===c}:function(l){return typeof l=="object"?l!==null:o(l)}},{"../internals/document-all":248,"../internals/is-callable":285}],290:[function(t,s,u){s.exports=!1},{}],291:[function(t,s,u){var o=t("../internals/is-object"),r=t("../internals/classof-raw"),c=t("../internals/well-known-symbol")("match");s.exports=function(l){var n;return o(l)&&((n=l[c])!==void 0?!!n:r(l)==="RegExp")}},{"../internals/classof-raw":235,"../internals/is-object":289,"../internals/well-known-symbol":357}],292:[function(t,s,u){var o=t("../internals/get-built-in"),r=t("../internals/is-callable"),c=t("../internals/object-is-prototype-of"),l=t("../internals/use-symbol-as-uid"),n=Object;s.exports=l?function(f){return typeof f=="symbol"}:function(f){var h=o("Symbol");return r(h)&&c(h.prototype,n(f))}},{"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/object-is-prototype-of":314,"../internals/use-symbol-as-uid":351}],293:[function(t,s,u){var o=t("../internals/function-bind-context"),r=t("../internals/function-call"),c=t("../internals/an-object"),l=t("../internals/try-to-string"),n=t("../internals/is-array-iterator-method"),f=t("../internals/length-of-array-like"),h=t("../internals/object-is-prototype-of"),p=t("../internals/get-iterator"),g=t("../internals/get-iterator-method"),v=t("../internals/iterator-close"),x=TypeError,y=function(S,E){this.stopped=S,this.result=E},w=y.prototype;s.exports=function(S,E,I){var D,Z,K,z,W,Q,rt,tt=I&&I.that,j=!(!I||!I.AS_ENTRIES),F=!(!I||!I.IS_RECORD),R=!(!I||!I.IS_ITERATOR),T=!(!I||!I.INTERRUPTED),C=o(E,tt),k=function(O){return D&&v(D,"normal",O),new y(!0,O)},M=function(O){return j?(c(O),T?C(O[0],O[1],k):C(O[0],O[1])):T?C(O,k):C(O)};if(F)D=S.iterator;else if(R)D=S;else{if(!(Z=g(S)))throw new x(l(S)+" is not iterable");if(n(Z)){for(K=0,z=f(S);z>K;K++)if((W=M(S[K]))&&h(w,W))return W;return new y(!1)}D=p(S,Z)}for(Q=F?S.next:D.next;!(rt=r(Q,D)).done;){try{W=M(rt.value)}catch(O){v(D,"throw",O)}if(typeof W=="object"&&W&&h(w,W))return W}return new y(!1)}},{"../internals/an-object":227,"../internals/function-bind-context":262,"../internals/function-call":264,"../internals/get-iterator":271,"../internals/get-iterator-method":270,"../internals/is-array-iterator-method":283,"../internals/iterator-close":294,"../internals/length-of-array-like":299,"../internals/object-is-prototype-of":314,"../internals/try-to-string":349}],294:[function(t,s,u){var o=t("../internals/function-call"),r=t("../internals/an-object"),c=t("../internals/get-method");s.exports=function(l,n,f){var h,p;r(l);try{if(!(h=c(l,"return"))){if(n==="throw")throw f;return f}h=o(h,l)}catch(g){p=!0,h=g}if(n==="throw")throw f;if(p)throw h;return r(h),f}},{"../internals/an-object":227,"../internals/function-call":264,"../internals/get-method":273}],295:[function(t,s,u){var o=t("../internals/iterators-core").IteratorPrototype,r=t("../internals/object-create"),c=t("../internals/create-property-descriptor"),l=t("../internals/set-to-string-tag"),n=t("../internals/iterators"),f=function(){return this};s.exports=function(h,p,g,v){var x=p+" Iterator";return h.prototype=r(o,{next:c(+!v,g)}),l(h,x,!1,!0),n[x]=f,h}},{"../internals/create-property-descriptor":242,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-create":306,"../internals/set-to-string-tag":331}],296:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/function-call"),c=t("../internals/is-pure"),l=t("../internals/function-name"),n=t("../internals/is-callable"),f=t("../internals/iterator-create-constructor"),h=t("../internals/object-get-prototype-of"),p=t("../internals/object-set-prototype-of"),g=t("../internals/set-to-string-tag"),v=t("../internals/create-non-enumerable-property"),x=t("../internals/define-built-in"),y=t("../internals/well-known-symbol"),w=t("../internals/iterators"),S=t("../internals/iterators-core"),E=l.PROPER,I=l.CONFIGURABLE,D=S.IteratorPrototype,Z=S.BUGGY_SAFARI_ITERATORS,K=y("iterator"),z=function(){return this};s.exports=function(W,Q,rt,tt,j,F,R){f(rt,Q,tt);var T,C,k,M=function(X){if(X===j&&it)return it;if(!Z&&X&&X in H)return H[X];switch(X){case"keys":case"values":case"entries":return function(){return new rt(this,X)}}return function(){return new rt(this)}},O=Q+" Iterator",P=!1,H=W.prototype,et=H[K]||H["@@iterator"]||j&&H[j],it=!Z&&et||M(j),pt=Q==="Array"&&H.entries||et;if(pt&&(T=h(pt.call(new W)))!==Object.prototype&&T.next&&(c||h(T)===D||(p?p(T,D):n(T[K])||x(T,K,z)),g(T,O,!0,!0),c&&(w[O]=z)),E&&j==="values"&&et&&et.name!=="values"&&(!c&&I?v(H,"name","values"):(P=!0,it=function(){return r(et,this)})),j)if(C={values:M("values"),keys:F?it:M("keys"),entries:M("entries")},R)for(k in C)(Z||P||!(k in H))&&x(H,k,C[k]);else o({target:Q,proto:!0,forced:Z||P},C);return c&&!R||H[K]===it||x(H,K,it,{name:j}),w[Q]=it,C}},{"../internals/create-non-enumerable-property":241,"../internals/define-built-in":245,"../internals/export":259,"../internals/function-call":264,"../internals/function-name":265,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/iterator-create-constructor":295,"../internals/iterators":298,"../internals/iterators-core":297,"../internals/object-get-prototype-of":313,"../internals/object-set-prototype-of":318,"../internals/set-to-string-tag":331,"../internals/well-known-symbol":357}],297:[function(t,s,u){var o,r,c,l=t("../internals/fails"),n=t("../internals/is-callable"),f=t("../internals/is-object"),h=t("../internals/object-create"),p=t("../internals/object-get-prototype-of"),g=t("../internals/define-built-in"),v=t("../internals/well-known-symbol"),x=t("../internals/is-pure"),y=v("iterator"),w=!1;[].keys&&("next"in(c=[].keys())?(r=p(p(c)))!==Object.prototype&&(o=r):w=!0),!f(o)||l((function(){var S={};return o[y].call(S)!==S}))?o={}:x&&(o=h(o)),n(o[y])||g(o,y,(function(){return this})),s.exports={IteratorPrototype:o,BUGGY_SAFARI_ITERATORS:w}},{"../internals/define-built-in":245,"../internals/fails":260,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-get-prototype-of":313,"../internals/well-known-symbol":357}],298:[function(t,s,u){arguments[4][276][0].apply(u,arguments)},{dup:276}],299:[function(t,s,u){var o=t("../internals/to-length");s.exports=function(r){return o(r.length)}},{"../internals/to-length":343}],300:[function(t,s,u){var o=t("../internals/function-uncurry-this"),r=t("../internals/fails"),c=t("../internals/is-callable"),l=t("../internals/has-own-property"),n=t("../internals/descriptors"),f=t("../internals/function-name").CONFIGURABLE,h=t("../internals/inspect-source"),p=t("../internals/internal-state"),g=p.enforce,v=p.get,x=String,y=Object.defineProperty,w=o("".slice),S=o("".replace),E=o([].join),I=n&&!r((function(){return y((function(){}),"length",{value:8}).length!==8})),D=String(String).split("String"),Z=s.exports=function(K,z,W){w(x(z),0,7)==="Symbol("&&(z="["+S(x(z),/^Symbol\(([^)]*)\)/,"$1")+"]"),W&&W.getter&&(z="get "+z),W&&W.setter&&(z="set "+z),(!l(K,"name")||f&&K.name!==z)&&(n?y(K,"name",{value:z,configurable:!0}):K.name=z),I&&W&&l(W,"arity")&&K.length!==W.arity&&y(K,"length",{value:W.arity});try{W&&l(W,"constructor")&&W.constructor?n&&y(K,"prototype",{writable:!1}):K.prototype&&(K.prototype=void 0)}catch{}var Q=g(K);return l(Q,"source")||(Q.source=E(D,typeof z=="string"?z:"")),K};Function.prototype.toString=Z((function(){return c(this)&&v(this).source||h(this)}),"toString")},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-name":265,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/inspect-source":281,"../internals/internal-state":282,"../internals/is-callable":285}],301:[function(t,s,u){var o=Math.ceil,r=Math.floor;s.exports=Math.trunc||function(c){var l=+c;return(l>0?r:o)(l)}},{}],302:[function(t,s,u){var o,r,c,l,n,f=t("../internals/global"),h=t("../internals/function-bind-context"),p=t("../internals/object-get-own-property-descriptor").f,g=t("../internals/task").set,v=t("../internals/queue"),x=t("../internals/engine-is-ios"),y=t("../internals/engine-is-ios-pebble"),w=t("../internals/engine-is-webos-webkit"),S=t("../internals/engine-is-node"),E=f.MutationObserver||f.WebKitMutationObserver,I=f.document,D=f.process,Z=f.Promise,K=p(f,"queueMicrotask"),z=K&&K.value;if(!z){var W=new v,Q=function(){var rt,tt;for(S&&(rt=D.domain)&&rt.exit();tt=W.get();)try{tt()}catch(j){throw W.head&&o(),j}rt&&rt.enter()};x||S||w||!E||!I?!y&&Z&&Z.resolve?((l=Z.resolve(void 0)).constructor=Z,n=h(l.then,l),o=function(){n(Q)}):S?o=function(){D.nextTick(Q)}:(g=h(g,f),o=function(){g(Q)}):(r=!0,c=I.createTextNode(""),new E(Q).observe(c,{characterData:!0}),o=function(){c.data=r=!r}),z=function(rt){W.head||o(),W.add(rt)}}s.exports=z},{"../internals/engine-is-ios":253,"../internals/engine-is-ios-pebble":252,"../internals/engine-is-node":254,"../internals/engine-is-webos-webkit":255,"../internals/function-bind-context":262,"../internals/global":274,"../internals/object-get-own-property-descriptor":309,"../internals/queue":328,"../internals/task":339}],303:[function(t,s,u){var o=t("../internals/a-callable"),r=TypeError,c=function(l){var n,f;this.promise=new l((function(h,p){if(n!==void 0||f!==void 0)throw new r("Bad Promise constructor");n=h,f=p})),this.resolve=o(n),this.reject=o(f)};s.exports.f=function(l){return new c(l)}},{"../internals/a-callable":222}],304:[function(t,s,u){var o=t("../internals/is-regexp"),r=TypeError;s.exports=function(c){if(o(c))throw new r("The method doesn't accept regular expressions");return c}},{"../internals/is-regexp":291}],305:[function(t,s,u){var o=t("../internals/descriptors"),r=t("../internals/function-uncurry-this"),c=t("../internals/function-call"),l=t("../internals/fails"),n=t("../internals/object-keys"),f=t("../internals/object-get-own-property-symbols"),h=t("../internals/object-property-is-enumerable"),p=t("../internals/to-object"),g=t("../internals/indexed-object"),v=Object.assign,x=Object.defineProperty,y=r([].concat);s.exports=!v||l((function(){if(o&&v({b:1},v(x({},"a",{enumerable:!0,get:function(){x(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var w={},S={},E=Symbol("assign detection");return w[E]=7,"abcdefghijklmnopqrst".split("").forEach((function(I){S[I]=I})),v({},w)[E]!==7||n(v({},S)).join("")!=="abcdefghijklmnopqrst"}))?function(w,S){for(var E=p(w),I=arguments.length,D=1,Z=f.f,K=h.f;I>D;)for(var z,W=g(arguments[D++]),Q=Z?y(n(W),Z(W)):n(W),rt=Q.length,tt=0;rt>tt;)z=Q[tt++],o&&!c(K,W,z)||(E[z]=W[z]);return E}:v},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/indexed-object":280,"../internals/object-get-own-property-symbols":312,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-object":344}],306:[function(t,s,u){var o,r=t("../internals/an-object"),c=t("../internals/object-define-properties"),l=t("../internals/enum-bug-keys"),n=t("../internals/hidden-keys"),f=t("../internals/html"),h=t("../internals/document-create-element"),p=t("../internals/shared-key"),g=p("IE_PROTO"),v=function(){},x=function(S){return"<script>"+S+"<\/script>"},y=function(S){S.write(x("")),S.close();var E=S.parentWindow.Object;return S=null,E},w=function(){try{o=new ActiveXObject("htmlfile")}catch{}var S,E;w=typeof document<"u"?document.domain&&o?y(o):((E=h("iframe")).style.display="none",f.appendChild(E),E.src="javascript:",(S=E.contentWindow.document).open(),S.write(x("document.F=Object")),S.close(),S.F):y(o);for(var I=l.length;I--;)delete w.prototype[l[I]];return w()};n[g]=!0,s.exports=Object.create||function(S,E){var I;return S!==null?(v.prototype=r(S),I=new v,v.prototype=null,I[g]=S):I=w(),E===void 0?I:c.f(I,E)}},{"../internals/an-object":227,"../internals/document-create-element":249,"../internals/enum-bug-keys":258,"../internals/hidden-keys":276,"../internals/html":278,"../internals/object-define-properties":307,"../internals/shared-key":332}],307:[function(t,s,u){var o=t("../internals/descriptors"),r=t("../internals/v8-prototype-define-bug"),c=t("../internals/object-define-property"),l=t("../internals/an-object"),n=t("../internals/to-indexed-object"),f=t("../internals/object-keys");u.f=o&&!r?Object.defineProperties:function(h,p){l(h);for(var g,v=n(p),x=f(p),y=x.length,w=0;y>w;)c.f(h,g=x[w++],v[g]);return h}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/object-define-property":308,"../internals/object-keys":316,"../internals/to-indexed-object":341,"../internals/v8-prototype-define-bug":352}],308:[function(t,s,u){var o=t("../internals/descriptors"),r=t("../internals/ie8-dom-define"),c=t("../internals/v8-prototype-define-bug"),l=t("../internals/an-object"),n=t("../internals/to-property-key"),f=TypeError,h=Object.defineProperty,p=Object.getOwnPropertyDescriptor;u.f=o?c?function(g,v,x){if(l(g),v=n(v),l(x),typeof g=="function"&&v==="prototype"&&"value"in x&&"writable"in x&&!x.writable){var y=p(g,v);y&&y.writable&&(g[v]=x.value,x={configurable:"configurable"in x?x.configurable:y.configurable,enumerable:"enumerable"in x?x.enumerable:y.enumerable,writable:!1})}return h(g,v,x)}:h:function(g,v,x){if(l(g),v=n(v),l(x),r)try{return h(g,v,x)}catch{}if("get"in x||"set"in x)throw new f("Accessors not supported");return"value"in x&&(g[v]=x.value),g}},{"../internals/an-object":227,"../internals/descriptors":247,"../internals/ie8-dom-define":279,"../internals/to-property-key":346,"../internals/v8-prototype-define-bug":352}],309:[function(t,s,u){var o=t("../internals/descriptors"),r=t("../internals/function-call"),c=t("../internals/object-property-is-enumerable"),l=t("../internals/create-property-descriptor"),n=t("../internals/to-indexed-object"),f=t("../internals/to-property-key"),h=t("../internals/has-own-property"),p=t("../internals/ie8-dom-define"),g=Object.getOwnPropertyDescriptor;u.f=o?g:function(v,x){if(v=n(v),x=f(x),p)try{return g(v,x)}catch{}if(h(v,x))return l(!r(c.f,v,x),v[x])}},{"../internals/create-property-descriptor":242,"../internals/descriptors":247,"../internals/function-call":264,"../internals/has-own-property":275,"../internals/ie8-dom-define":279,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341,"../internals/to-property-key":346}],310:[function(t,s,u){var o=t("../internals/classof-raw"),r=t("../internals/to-indexed-object"),c=t("../internals/object-get-own-property-names").f,l=t("../internals/array-slice-simple"),n=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];s.exports.f=function(f){return n&&o(f)==="Window"?(function(h){try{return c(h)}catch{return l(n)}})(f):c(r(f))}},{"../internals/array-slice-simple":230,"../internals/classof-raw":235,"../internals/object-get-own-property-names":311,"../internals/to-indexed-object":341}],311:[function(t,s,u){var o=t("../internals/object-keys-internal"),r=t("../internals/enum-bug-keys").concat("length","prototype");u.f=Object.getOwnPropertyNames||function(c){return o(c,r)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],312:[function(t,s,u){u.f=Object.getOwnPropertySymbols},{}],313:[function(t,s,u){var o=t("../internals/has-own-property"),r=t("../internals/is-callable"),c=t("../internals/to-object"),l=t("../internals/shared-key"),n=t("../internals/correct-prototype-getter"),f=l("IE_PROTO"),h=Object,p=h.prototype;s.exports=n?h.getPrototypeOf:function(g){var v=c(g);if(o(v,f))return v[f];var x=v.constructor;return r(x)&&v instanceof x?x.prototype:v instanceof h?p:null}},{"../internals/correct-prototype-getter":239,"../internals/has-own-property":275,"../internals/is-callable":285,"../internals/shared-key":332,"../internals/to-object":344}],314:[function(t,s,u){var o=t("../internals/function-uncurry-this");s.exports=o({}.isPrototypeOf)},{"../internals/function-uncurry-this":268}],315:[function(t,s,u){var o=t("../internals/function-uncurry-this"),r=t("../internals/has-own-property"),c=t("../internals/to-indexed-object"),l=t("../internals/array-includes").indexOf,n=t("../internals/hidden-keys"),f=o([].push);s.exports=function(h,p){var g,v=c(h),x=0,y=[];for(g in v)!r(n,g)&&r(v,g)&&f(y,g);for(;p.length>x;)r(v,g=p[x++])&&(~l(y,g)||f(y,g));return y}},{"../internals/array-includes":228,"../internals/function-uncurry-this":268,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/to-indexed-object":341}],316:[function(t,s,u){var o=t("../internals/object-keys-internal"),r=t("../internals/enum-bug-keys");s.exports=Object.keys||function(c){return o(c,r)}},{"../internals/enum-bug-keys":258,"../internals/object-keys-internal":315}],317:[function(t,s,u){var o={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,c=r&&!o.call({1:2},1);u.f=c?function(l){var n=r(this,l);return!!n&&n.enumerable}:o},{}],318:[function(t,s,u){var o=t("../internals/function-uncurry-this-accessor"),r=t("../internals/an-object"),c=t("../internals/a-possible-prototype");s.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var l,n=!1,f={};try{(l=o(Object.prototype,"__proto__","set"))(f,[]),n=f instanceof Array}catch{}return function(h,p){return r(h),c(p),n?l(h,p):h.__proto__=p,h}})():void 0)},{"../internals/a-possible-prototype":224,"../internals/an-object":227,"../internals/function-uncurry-this-accessor":266}],319:[function(t,s,u){var o=t("../internals/descriptors"),r=t("../internals/fails"),c=t("../internals/function-uncurry-this"),l=t("../internals/object-get-prototype-of"),n=t("../internals/object-keys"),f=t("../internals/to-indexed-object"),h=c(t("../internals/object-property-is-enumerable").f),p=c([].push),g=o&&r((function(){var x=Object.create(null);return x[2]=2,!h(x,2)})),v=function(x){return function(y){for(var w,S=f(y),E=n(S),I=g&&l(S)===null,D=E.length,Z=0,K=[];D>Z;)w=E[Z++],o&&!(I?w in S:h(S,w))||p(K,x?[w,S[w]]:S[w]);return K}};s.exports={entries:v(!0),values:v(!1)}},{"../internals/descriptors":247,"../internals/fails":260,"../internals/function-uncurry-this":268,"../internals/object-get-prototype-of":313,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/to-indexed-object":341}],320:[function(t,s,u){var o=t("../internals/function-call"),r=t("../internals/is-callable"),c=t("../internals/is-object"),l=TypeError;s.exports=function(n,f){var h,p;if(f==="string"&&r(h=n.toString)&&!c(p=o(h,n))||r(h=n.valueOf)&&!c(p=o(h,n))||f!=="string"&&r(h=n.toString)&&!c(p=o(h,n)))return p;throw new l("Can't convert object to primitive value")}},{"../internals/function-call":264,"../internals/is-callable":285,"../internals/is-object":289}],321:[function(t,s,u){var o=t("../internals/get-built-in"),r=t("../internals/function-uncurry-this"),c=t("../internals/object-get-own-property-names"),l=t("../internals/object-get-own-property-symbols"),n=t("../internals/an-object"),f=r([].concat);s.exports=o("Reflect","ownKeys")||function(h){var p=c.f(n(h)),g=l.f;return g?f(p,g(h)):p}},{"../internals/an-object":227,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-symbols":312}],322:[function(t,s,u){var o=t("../internals/global");s.exports=o},{"../internals/global":274}],323:[function(t,s,u){s.exports=function(o){try{return{error:!1,value:o()}}catch(r){return{error:!0,value:r}}}},{}],324:[function(t,s,u){var o=t("../internals/global"),r=t("../internals/promise-native-constructor"),c=t("../internals/is-callable"),l=t("../internals/is-forced"),n=t("../internals/inspect-source"),f=t("../internals/well-known-symbol"),h=t("../internals/engine-is-browser"),p=t("../internals/engine-is-deno"),g=t("../internals/is-pure"),v=t("../internals/engine-v8-version"),x=r&&r.prototype,y=f("species"),w=!1,S=c(o.PromiseRejectionEvent),E=l("Promise",(function(){var I=n(r),D=I!==String(r);if(!D&&v===66||g&&(!x.catch||!x.finally))return!0;if(!v||v<51||!/native code/.test(I)){var Z=new r((function(z){z(1)})),K=function(z){z((function(){}),(function(){}))};if((Z.constructor={})[y]=K,!(w=Z.then((function(){}))instanceof K))return!0}return!D&&(h||p)&&!S}));s.exports={CONSTRUCTOR:E,REJECTION_EVENT:S,SUBCLASSING:w}},{"../internals/engine-is-browser":250,"../internals/engine-is-deno":251,"../internals/engine-v8-version":257,"../internals/global":274,"../internals/inspect-source":281,"../internals/is-callable":285,"../internals/is-forced":287,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/well-known-symbol":357}],325:[function(t,s,u){var o=t("../internals/global");s.exports=o.Promise},{"../internals/global":274}],326:[function(t,s,u){var o=t("../internals/an-object"),r=t("../internals/is-object"),c=t("../internals/new-promise-capability");s.exports=function(l,n){if(o(l),r(n)&&n.constructor===l)return n;var f=c.f(l);return(0,f.resolve)(n),f.promise}},{"../internals/an-object":227,"../internals/is-object":289,"../internals/new-promise-capability":303}],327:[function(t,s,u){var o=t("../internals/promise-native-constructor"),r=t("../internals/check-correctness-of-iteration"),c=t("../internals/promise-constructor-detection").CONSTRUCTOR;s.exports=c||!r((function(l){o.all(l).then(void 0,(function(){}))}))},{"../internals/check-correctness-of-iteration":234,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],328:[function(t,s,u){var o=function(){this.head=null,this.tail=null};o.prototype={add:function(r){var c={item:r,next:null},l=this.tail;l?l.next=c:this.head=c,this.tail=c},get:function(){var r=this.head;if(r)return(this.head=r.next)===null&&(this.tail=null),r.item}},s.exports=o},{}],329:[function(t,s,u){var o=t("../internals/is-null-or-undefined"),r=TypeError;s.exports=function(c){if(o(c))throw new r("Can't call method on "+c);return c}},{"../internals/is-null-or-undefined":288}],330:[function(t,s,u){var o=t("../internals/get-built-in"),r=t("../internals/define-built-in-accessor"),c=t("../internals/well-known-symbol"),l=t("../internals/descriptors"),n=c("species");s.exports=function(f){var h=o(f);l&&h&&!h[n]&&r(h,n,{configurable:!0,get:function(){return this}})}},{"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],331:[function(t,s,u){var o=t("../internals/object-define-property").f,r=t("../internals/has-own-property"),c=t("../internals/well-known-symbol")("toStringTag");s.exports=function(l,n,f){l&&!f&&(l=l.prototype),l&&!r(l,c)&&o(l,c,{configurable:!0,value:n})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/well-known-symbol":357}],332:[function(t,s,u){var o=t("../internals/shared"),r=t("../internals/uid"),c=o("keys");s.exports=function(l){return c[l]||(c[l]=r(l))}},{"../internals/shared":334,"../internals/uid":350}],333:[function(t,s,u){var o=t("../internals/global"),r=t("../internals/define-global-property"),c=o["__core-js_shared__"]||r("__core-js_shared__",{});s.exports=c},{"../internals/define-global-property":246,"../internals/global":274}],334:[function(t,s,u){var o=t("../internals/is-pure"),r=t("../internals/shared-store");(s.exports=function(c,l){return r[c]||(r[c]=l!==void 0?l:{})})("versions",[]).push({version:"3.33.0",mode:o?"pure":"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})},{"../internals/is-pure":290,"../internals/shared-store":333}],335:[function(t,s,u){var o=t("../internals/an-object"),r=t("../internals/a-constructor"),c=t("../internals/is-null-or-undefined"),l=t("../internals/well-known-symbol")("species");s.exports=function(n,f){var h,p=o(n).constructor;return p===void 0||c(h=o(p)[l])?f:r(h)}},{"../internals/a-constructor":223,"../internals/an-object":227,"../internals/is-null-or-undefined":288,"../internals/well-known-symbol":357}],336:[function(t,s,u){var o=t("../internals/engine-v8-version"),r=t("../internals/fails"),c=t("../internals/global").String;s.exports=!!Object.getOwnPropertySymbols&&!r((function(){var l=Symbol("symbol detection");return!c(l)||!(Object(l)instanceof Symbol)||!Symbol.sham&&o&&o<41}))},{"../internals/engine-v8-version":257,"../internals/fails":260,"../internals/global":274}],337:[function(t,s,u){var o=t("../internals/function-call"),r=t("../internals/get-built-in"),c=t("../internals/well-known-symbol"),l=t("../internals/define-built-in");s.exports=function(){var n=r("Symbol"),f=n&&n.prototype,h=f&&f.valueOf,p=c("toPrimitive");f&&!f[p]&&l(f,p,(function(g){return o(h,this)}),{arity:1})}},{"../internals/define-built-in":245,"../internals/function-call":264,"../internals/get-built-in":269,"../internals/well-known-symbol":357}],338:[function(t,s,u){var o=t("../internals/symbol-constructor-detection");s.exports=o&&!!Symbol.for&&!!Symbol.keyFor},{"../internals/symbol-constructor-detection":336}],339:[function(t,s,u){var o,r,c,l,n=t("../internals/global"),f=t("../internals/function-apply"),h=t("../internals/function-bind-context"),p=t("../internals/is-callable"),g=t("../internals/has-own-property"),v=t("../internals/fails"),x=t("../internals/html"),y=t("../internals/array-slice"),w=t("../internals/document-create-element"),S=t("../internals/validate-arguments-length"),E=t("../internals/engine-is-ios"),I=t("../internals/engine-is-node"),D=n.setImmediate,Z=n.clearImmediate,K=n.process,z=n.Dispatch,W=n.Function,Q=n.MessageChannel,rt=n.String,tt=0,j={};v((function(){o=n.location}));var F=function(k){if(g(j,k)){var M=j[k];delete j[k],M()}},R=function(k){return function(){F(k)}},T=function(k){F(k.data)},C=function(k){n.postMessage(rt(k),o.protocol+"//"+o.host)};D&&Z||(D=function(k){S(arguments.length,1);var M=p(k)?k:W(k),O=y(arguments,1);return j[++tt]=function(){f(M,void 0,O)},r(tt),tt},Z=function(k){delete j[k]},I?r=function(k){K.nextTick(R(k))}:z&&z.now?r=function(k){z.now(R(k))}:Q&&!E?(l=(c=new Q).port2,c.port1.onmessage=T,r=h(l.postMessage,l)):n.addEventListener&&p(n.postMessage)&&!n.importScripts&&o&&o.protocol!=="file:"&&!v(C)?(r=C,n.addEventListener("message",T,!1)):r="onreadystatechange"in w("script")?function(k){x.appendChild(w("script")).onreadystatechange=function(){x.removeChild(this),F(k)}}:function(k){setTimeout(R(k),0)}),s.exports={set:D,clear:Z}},{"../internals/array-slice":231,"../internals/document-create-element":249,"../internals/engine-is-ios":253,"../internals/engine-is-node":254,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-bind-context":262,"../internals/global":274,"../internals/has-own-property":275,"../internals/html":278,"../internals/is-callable":285,"../internals/validate-arguments-length":353}],340:[function(t,s,u){var o=t("../internals/to-integer-or-infinity"),r=Math.max,c=Math.min;s.exports=function(l,n){var f=o(l);return f<0?r(f+n,0):c(f,n)}},{"../internals/to-integer-or-infinity":342}],341:[function(t,s,u){var o=t("../internals/indexed-object"),r=t("../internals/require-object-coercible");s.exports=function(c){return o(r(c))}},{"../internals/indexed-object":280,"../internals/require-object-coercible":329}],342:[function(t,s,u){var o=t("../internals/math-trunc");s.exports=function(r){var c=+r;return c!=c||c===0?0:o(c)}},{"../internals/math-trunc":301}],343:[function(t,s,u){var o=t("../internals/to-integer-or-infinity"),r=Math.min;s.exports=function(c){return c>0?r(o(c),9007199254740991):0}},{"../internals/to-integer-or-infinity":342}],344:[function(t,s,u){var o=t("../internals/require-object-coercible"),r=Object;s.exports=function(c){return r(o(c))}},{"../internals/require-object-coercible":329}],345:[function(t,s,u){var o=t("../internals/function-call"),r=t("../internals/is-object"),c=t("../internals/is-symbol"),l=t("../internals/get-method"),n=t("../internals/ordinary-to-primitive"),f=t("../internals/well-known-symbol"),h=TypeError,p=f("toPrimitive");s.exports=function(g,v){if(!r(g)||c(g))return g;var x,y=l(g,p);if(y){if(v===void 0&&(v="default"),x=o(y,g,v),!r(x)||c(x))return x;throw new h("Can't convert object to primitive value")}return v===void 0&&(v="number"),n(g,v)}},{"../internals/function-call":264,"../internals/get-method":273,"../internals/is-object":289,"../internals/is-symbol":292,"../internals/ordinary-to-primitive":320,"../internals/well-known-symbol":357}],346:[function(t,s,u){var o=t("../internals/to-primitive"),r=t("../internals/is-symbol");s.exports=function(c){var l=o(c,"string");return r(l)?l:l+""}},{"../internals/is-symbol":292,"../internals/to-primitive":345}],347:[function(t,s,u){var o={};o[t("../internals/well-known-symbol")("toStringTag")]="z",s.exports=String(o)==="[object z]"},{"../internals/well-known-symbol":357}],348:[function(t,s,u){var o=t("../internals/classof"),r=String;s.exports=function(c){if(o(c)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return r(c)}},{"../internals/classof":236}],349:[function(t,s,u){var o=String;s.exports=function(r){try{return o(r)}catch{return"Object"}}},{}],350:[function(t,s,u){var o=t("../internals/function-uncurry-this"),r=0,c=Math.random(),l=o(1 .toString);s.exports=function(n){return"Symbol("+(n===void 0?"":n)+")_"+l(++r+c,36)}},{"../internals/function-uncurry-this":268}],351:[function(t,s,u){var o=t("../internals/symbol-constructor-detection");s.exports=o&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},{"../internals/symbol-constructor-detection":336}],352:[function(t,s,u){var o=t("../internals/descriptors"),r=t("../internals/fails");s.exports=o&&r((function(){return Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype!==42}))},{"../internals/descriptors":247,"../internals/fails":260}],353:[function(t,s,u){var o=TypeError;s.exports=function(r,c){if(r<c)throw new o("Not enough arguments");return r}},{}],354:[function(t,s,u){var o=t("../internals/global"),r=t("../internals/is-callable"),c=o.WeakMap;s.exports=r(c)&&/native code/.test(String(c))},{"../internals/global":274,"../internals/is-callable":285}],355:[function(t,s,u){var o=t("../internals/path"),r=t("../internals/has-own-property"),c=t("../internals/well-known-symbol-wrapped"),l=t("../internals/object-define-property").f;s.exports=function(n){var f=o.Symbol||(o.Symbol={});r(f,n)||l(f,n,{value:c.f(n)})}},{"../internals/has-own-property":275,"../internals/object-define-property":308,"../internals/path":322,"../internals/well-known-symbol-wrapped":356}],356:[function(t,s,u){var o=t("../internals/well-known-symbol");u.f=o},{"../internals/well-known-symbol":357}],357:[function(t,s,u){var o=t("../internals/global"),r=t("../internals/shared"),c=t("../internals/has-own-property"),l=t("../internals/uid"),n=t("../internals/symbol-constructor-detection"),f=t("../internals/use-symbol-as-uid"),h=o.Symbol,p=r("wks"),g=f?h.for||h:h&&h.withoutSetter||l;s.exports=function(v){return c(p,v)||(p[v]=n&&c(h,v)?h[v]:g("Symbol."+v)),p[v]}},{"../internals/global":274,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-constructor-detection":336,"../internals/uid":350,"../internals/use-symbol-as-uid":351}],358:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/array-iteration").findIndex,c=t("../internals/add-to-unscopables"),l=!0;"findIndex"in[]&&Array(1).findIndex((function(){l=!1})),o({target:"Array",proto:!0,forced:l},{findIndex:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}}),c("findIndex")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],359:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/array-iteration").find,c=t("../internals/add-to-unscopables"),l=!0;"find"in[]&&Array(1).find((function(){l=!1})),o({target:"Array",proto:!0,forced:l},{find:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}}),c("find")},{"../internals/add-to-unscopables":225,"../internals/array-iteration":229,"../internals/export":259}],360:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/array-includes").includes,c=t("../internals/fails"),l=t("../internals/add-to-unscopables");o({target:"Array",proto:!0,forced:c((function(){return!Array(1).includes()}))},{includes:function(n){return r(this,n,arguments.length>1?arguments[1]:void 0)}}),l("includes")},{"../internals/add-to-unscopables":225,"../internals/array-includes":228,"../internals/export":259,"../internals/fails":260}],361:[function(t,s,u){var o=t("../internals/to-indexed-object"),r=t("../internals/add-to-unscopables"),c=t("../internals/iterators"),l=t("../internals/internal-state"),n=t("../internals/object-define-property").f,f=t("../internals/iterator-define"),h=t("../internals/create-iter-result-object"),p=t("../internals/is-pure"),g=t("../internals/descriptors"),v=l.set,x=l.getterFor("Array Iterator");s.exports=f(Array,"Array",(function(w,S){v(this,{type:"Array Iterator",target:o(w),index:0,kind:S})}),(function(){var w=x(this),S=w.target,E=w.kind,I=w.index++;if(!S||I>=S.length)return w.target=void 0,h(void 0,!0);switch(E){case"keys":return h(I,!1);case"values":return h(S[I],!1)}return h([I,S[I]],!1)}),"values");var y=c.Arguments=c.Array;if(r("keys"),r("values"),r("entries"),!p&&g&&y.name!=="values")try{n(y,"name",{value:"values"})}catch{}},{"../internals/add-to-unscopables":225,"../internals/create-iter-result-object":240,"../internals/descriptors":247,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/iterator-define":296,"../internals/iterators":298,"../internals/object-define-property":308,"../internals/to-indexed-object":341}],362:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/get-built-in"),c=t("../internals/function-apply"),l=t("../internals/function-call"),n=t("../internals/function-uncurry-this"),f=t("../internals/fails"),h=t("../internals/is-callable"),p=t("../internals/is-symbol"),g=t("../internals/array-slice"),v=t("../internals/get-json-replacer-function"),x=t("../internals/symbol-constructor-detection"),y=String,w=r("JSON","stringify"),S=n(/./.exec),E=n("".charAt),I=n("".charCodeAt),D=n("".replace),Z=n(1 .toString),K=/[\uD800-\uDFFF]/g,z=/^[\uD800-\uDBFF]$/,W=/^[\uDC00-\uDFFF]$/,Q=!x||f((function(){var F=r("Symbol")("stringify detection");return w([F])!=="[null]"||w({a:F})!=="{}"||w(Object(F))!=="{}"})),rt=f((function(){return w("\uDF06\uD834")!=='"\\udf06\\ud834"'||w("\uDEAD")!=='"\\udead"'})),tt=function(F,R){var T=g(arguments),C=v(R);if(h(C)||F!==void 0&&!p(F))return T[1]=function(k,M){if(h(C)&&(M=l(C,this,y(k),M)),!p(M))return M},c(w,null,T)},j=function(F,R,T){var C=E(T,R-1),k=E(T,R+1);return S(z,F)&&!S(W,k)||S(W,F)&&!S(z,C)?"\\u"+Z(I(F,0),16):F};w&&o({target:"JSON",stat:!0,arity:3,forced:Q||rt},{stringify:function(F,R,T){var C=g(arguments),k=c(Q?tt:w,null,C);return rt&&typeof k=="string"?D(k,K,j):k}})},{"../internals/array-slice":231,"../internals/export":259,"../internals/fails":260,"../internals/function-apply":261,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/get-built-in":269,"../internals/get-json-replacer-function":272,"../internals/is-callable":285,"../internals/is-symbol":292,"../internals/symbol-constructor-detection":336}],363:[function(t,s,u){t("../internals/export")({target:"Number",stat:!0},{isNaN:function(o){return o!=o}})},{"../internals/export":259}],364:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/object-assign");o({target:"Object",stat:!0,arity:2,forced:Object.assign!==r},{assign:r})},{"../internals/export":259,"../internals/object-assign":305}],365:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/symbol-constructor-detection"),c=t("../internals/fails"),l=t("../internals/object-get-own-property-symbols"),n=t("../internals/to-object");o({target:"Object",stat:!0,forced:!r||c((function(){l.f(1)}))},{getOwnPropertySymbols:function(f){var h=l.f;return h?h(n(f)):[]}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-get-own-property-symbols":312,"../internals/symbol-constructor-detection":336,"../internals/to-object":344}],366:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/to-object"),c=t("../internals/object-keys");o({target:"Object",stat:!0,forced:t("../internals/fails")((function(){c(1)}))},{keys:function(l){return c(r(l))}})},{"../internals/export":259,"../internals/fails":260,"../internals/object-keys":316,"../internals/to-object":344}],367:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/object-to-array").values;o({target:"Object",stat:!0},{values:function(c){return r(c)}})},{"../internals/export":259,"../internals/object-to-array":319}],368:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/function-call"),c=t("../internals/a-callable"),l=t("../internals/new-promise-capability"),n=t("../internals/perform"),f=t("../internals/iterate");o({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{all:function(h){var p=this,g=l.f(p),v=g.resolve,x=g.reject,y=n((function(){var w=c(p.resolve),S=[],E=0,I=1;f(h,(function(D){var Z=E++,K=!1;I++,r(w,p,D).then((function(z){K||(K=!0,S[Z]=z,--I||v(S))}),x)})),--I||v(S)}));return y.error&&x(y.value),g.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],369:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/is-pure"),c=t("../internals/promise-constructor-detection").CONSTRUCTOR,l=t("../internals/promise-native-constructor"),n=t("../internals/get-built-in"),f=t("../internals/is-callable"),h=t("../internals/define-built-in"),p=l&&l.prototype;if(o({target:"Promise",proto:!0,forced:c,real:!0},{catch:function(v){return this.then(void 0,v)}}),!r&&f(l)){var g=n("Promise").prototype.catch;p.catch!==g&&h(p,"catch",g,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325}],370:[function(t,s,u){var o,r,c,l=t("../internals/export"),n=t("../internals/is-pure"),f=t("../internals/engine-is-node"),h=t("../internals/global"),p=t("../internals/function-call"),g=t("../internals/define-built-in"),v=t("../internals/object-set-prototype-of"),x=t("../internals/set-to-string-tag"),y=t("../internals/set-species"),w=t("../internals/a-callable"),S=t("../internals/is-callable"),E=t("../internals/is-object"),I=t("../internals/an-instance"),D=t("../internals/species-constructor"),Z=t("../internals/task").set,K=t("../internals/microtask"),z=t("../internals/host-report-errors"),W=t("../internals/perform"),Q=t("../internals/queue"),rt=t("../internals/internal-state"),tt=t("../internals/promise-native-constructor"),j=t("../internals/promise-constructor-detection"),F=t("../internals/new-promise-capability"),R=j.CONSTRUCTOR,T=j.REJECTION_EVENT,C=j.SUBCLASSING,k=rt.getterFor("Promise"),M=rt.set,O=tt&&tt.prototype,P=tt,H=O,et=h.TypeError,it=h.document,pt=h.process,X=F.f,ut=X,G=!!(it&&it.createEvent&&h.dispatchEvent),U=function(Qt){var Ht;return!(!E(Qt)||!S(Ht=Qt.then))&&Ht},st=function(Qt,Ht){var Jt,ne,ae,me=Ht.value,Le=Ht.state===1,Pe=Le?Qt.ok:Qt.fail,Be=Qt.resolve,He=Qt.reject,Je=Qt.domain;try{Pe?(Le||(Ht.rejection===2&&ie(Ht),Ht.rejection=1),Pe===!0?Jt=me:(Je&&Je.enter(),Jt=Pe(me),Je&&(Je.exit(),ae=!0)),Jt===Qt.promise?He(new et("Promise-chain cycle")):(ne=U(Jt))?p(ne,Jt,Be,He):Be(Jt)):He(me)}catch(sn){Je&&!ae&&Je.exit(),He(sn)}},gt=function(Qt,Ht){Qt.notified||(Qt.notified=!0,K((function(){for(var Jt,ne=Qt.reactions;Jt=ne.get();)st(Jt,Qt);Qt.notified=!1,Ht&&!Qt.rejection&&St(Qt)})))},zt=function(Qt,Ht,Jt){var ne,ae;G?((ne=it.createEvent("Event")).promise=Ht,ne.reason=Jt,ne.initEvent(Qt,!1,!0),h.dispatchEvent(ne)):ne={promise:Ht,reason:Jt},!T&&(ae=h["on"+Qt])?ae(ne):Qt==="unhandledrejection"&&z("Unhandled promise rejection",Jt)},St=function(Qt){p(Z,h,(function(){var Ht,Jt=Qt.facade,ne=Qt.value;if(Bt(Qt)&&(Ht=W((function(){f?pt.emit("unhandledRejection",ne,Jt):zt("unhandledrejection",Jt,ne)})),Qt.rejection=f||Bt(Qt)?2:1,Ht.error))throw Ht.value}))},Bt=function(Qt){return Qt.rejection!==1&&!Qt.parent},ie=function(Qt){p(Z,h,(function(){var Ht=Qt.facade;f?pt.emit("rejectionHandled",Ht):zt("rejectionhandled",Ht,Qt.value)}))},re=function(Qt,Ht,Jt){return function(ne){Qt(Ht,ne,Jt)}},Ct=function(Qt,Ht,Jt){Qt.done||(Qt.done=!0,Jt&&(Qt=Jt),Qt.value=Ht,Qt.state=2,gt(Qt,!0))},Yt=function(Qt,Ht,Jt){if(!Qt.done){Qt.done=!0,Jt&&(Qt=Jt);try{if(Qt.facade===Ht)throw new et("Promise can't be resolved itself");var ne=U(Ht);ne?K((function(){var ae={done:!1};try{p(ne,Ht,re(Yt,ae,Qt),re(Ct,ae,Qt))}catch(me){Ct(ae,me,Qt)}})):(Qt.value=Ht,Qt.state=1,gt(Qt,!1))}catch(ae){Ct({done:!1},ae,Qt)}}};if(R&&(H=(P=function(Qt){I(this,H),w(Qt),p(o,this);var Ht=k(this);try{Qt(re(Yt,Ht),re(Ct,Ht))}catch(Jt){Ct(Ht,Jt)}}).prototype,(o=function(Qt){M(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:new Q,rejection:!1,state:0,value:void 0})}).prototype=g(H,"then",(function(Qt,Ht){var Jt=k(this),ne=X(D(this,P));return Jt.parent=!0,ne.ok=!S(Qt)||Qt,ne.fail=S(Ht)&&Ht,ne.domain=f?pt.domain:void 0,Jt.state===0?Jt.reactions.add(ne):K((function(){st(ne,Jt)})),ne.promise})),r=function(){var Qt=new o,Ht=k(Qt);this.promise=Qt,this.resolve=re(Yt,Ht),this.reject=re(Ct,Ht)},F.f=X=function(Qt){return Qt===P||Qt===void 0?new r(Qt):ut(Qt)},!n&&S(tt)&&O!==Object.prototype)){c=O.then,C||g(O,"then",(function(Qt,Ht){var Jt=this;return new P((function(ne,ae){p(c,Jt,ne,ae)})).then(Qt,Ht)}),{unsafe:!0});try{delete O.constructor}catch{}v&&v(O,H)}l({global:!0,constructor:!0,wrap:!0,forced:R},{Promise:P}),x(P,"Promise",!1,!0),y("Promise")},{"../internals/a-callable":222,"../internals/an-instance":226,"../internals/define-built-in":245,"../internals/engine-is-node":254,"../internals/export":259,"../internals/function-call":264,"../internals/global":274,"../internals/host-report-errors":277,"../internals/internal-state":282,"../internals/is-callable":285,"../internals/is-object":289,"../internals/is-pure":290,"../internals/microtask":302,"../internals/new-promise-capability":303,"../internals/object-set-prototype-of":318,"../internals/perform":323,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/queue":328,"../internals/set-species":330,"../internals/set-to-string-tag":331,"../internals/species-constructor":335,"../internals/task":339}],371:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/is-pure"),c=t("../internals/promise-native-constructor"),l=t("../internals/fails"),n=t("../internals/get-built-in"),f=t("../internals/is-callable"),h=t("../internals/species-constructor"),p=t("../internals/promise-resolve"),g=t("../internals/define-built-in"),v=c&&c.prototype;if(o({target:"Promise",proto:!0,real:!0,forced:!!c&&l((function(){v.finally.call({then:function(){}},(function(){}))}))},{finally:function(y){var w=h(this,n("Promise")),S=f(y);return this.then(S?function(E){return p(w,y()).then((function(){return E}))}:y,S?function(E){return p(w,y()).then((function(){throw E}))}:y)}}),!r&&f(c)){var x=n("Promise").prototype.finally;v.finally!==x&&g(v,"finally",x,{unsafe:!0})}},{"../internals/define-built-in":245,"../internals/export":259,"../internals/fails":260,"../internals/get-built-in":269,"../internals/is-callable":285,"../internals/is-pure":290,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326,"../internals/species-constructor":335}],372:[function(t,s,u){t("../modules/es.promise.constructor"),t("../modules/es.promise.all"),t("../modules/es.promise.catch"),t("../modules/es.promise.race"),t("../modules/es.promise.reject"),t("../modules/es.promise.resolve")},{"../modules/es.promise.all":368,"../modules/es.promise.catch":369,"../modules/es.promise.constructor":370,"../modules/es.promise.race":373,"../modules/es.promise.reject":374,"../modules/es.promise.resolve":375}],373:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/function-call"),c=t("../internals/a-callable"),l=t("../internals/new-promise-capability"),n=t("../internals/perform"),f=t("../internals/iterate");o({target:"Promise",stat:!0,forced:t("../internals/promise-statics-incorrect-iteration")},{race:function(h){var p=this,g=l.f(p),v=g.reject,x=n((function(){var y=c(p.resolve);f(h,(function(w){r(y,p,w).then(g.resolve,v)}))}));return x.error&&v(x.value),g.promise}})},{"../internals/a-callable":222,"../internals/export":259,"../internals/function-call":264,"../internals/iterate":293,"../internals/new-promise-capability":303,"../internals/perform":323,"../internals/promise-statics-incorrect-iteration":327}],374:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/function-call"),c=t("../internals/new-promise-capability");o({target:"Promise",stat:!0,forced:t("../internals/promise-constructor-detection").CONSTRUCTOR},{reject:function(l){var n=c.f(this);return r(n.reject,void 0,l),n.promise}})},{"../internals/export":259,"../internals/function-call":264,"../internals/new-promise-capability":303,"../internals/promise-constructor-detection":324}],375:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/get-built-in"),c=t("../internals/is-pure"),l=t("../internals/promise-native-constructor"),n=t("../internals/promise-constructor-detection").CONSTRUCTOR,f=t("../internals/promise-resolve"),h=r("Promise"),p=c&&!n;o({target:"Promise",stat:!0,forced:c||n},{resolve:function(g){return f(p&&this===h?l:this,g)}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/is-pure":290,"../internals/promise-constructor-detection":324,"../internals/promise-native-constructor":325,"../internals/promise-resolve":326}],376:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/function-uncurry-this"),c=t("../internals/to-absolute-index"),l=RangeError,n=String.fromCharCode,f=String.fromCodePoint,h=r([].join);o({target:"String",stat:!0,arity:1,forced:!!f&&f.length!==1},{fromCodePoint:function(p){for(var g,v=[],x=arguments.length,y=0;x>y;){if(g=+arguments[y++],c(g,1114111)!==g)throw new l(g+" is not a valid code point");v[y]=g<65536?n(g):n(55296+((g-=65536)>>10),g%1024+56320)}return h(v,"")}})},{"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/to-absolute-index":340}],377:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/function-uncurry-this"),c=t("../internals/not-a-regexp"),l=t("../internals/require-object-coercible"),n=t("../internals/to-string"),f=t("../internals/correct-is-regexp-logic"),h=r("".indexOf);o({target:"String",proto:!0,forced:!f("includes")},{includes:function(p){return!!~h(n(l(this)),n(c(p)),arguments.length>1?arguments[1]:void 0)}})},{"../internals/correct-is-regexp-logic":238,"../internals/export":259,"../internals/function-uncurry-this":268,"../internals/not-a-regexp":304,"../internals/require-object-coercible":329,"../internals/to-string":348}],378:[function(t,s,u){t("../internals/well-known-symbol-define")("asyncIterator")},{"../internals/well-known-symbol-define":355}],379:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/global"),c=t("../internals/function-call"),l=t("../internals/function-uncurry-this"),n=t("../internals/is-pure"),f=t("../internals/descriptors"),h=t("../internals/symbol-constructor-detection"),p=t("../internals/fails"),g=t("../internals/has-own-property"),v=t("../internals/object-is-prototype-of"),x=t("../internals/an-object"),y=t("../internals/to-indexed-object"),w=t("../internals/to-property-key"),S=t("../internals/to-string"),E=t("../internals/create-property-descriptor"),I=t("../internals/object-create"),D=t("../internals/object-keys"),Z=t("../internals/object-get-own-property-names"),K=t("../internals/object-get-own-property-names-external"),z=t("../internals/object-get-own-property-symbols"),W=t("../internals/object-get-own-property-descriptor"),Q=t("../internals/object-define-property"),rt=t("../internals/object-define-properties"),tt=t("../internals/object-property-is-enumerable"),j=t("../internals/define-built-in"),F=t("../internals/define-built-in-accessor"),R=t("../internals/shared"),T=t("../internals/shared-key"),C=t("../internals/hidden-keys"),k=t("../internals/uid"),M=t("../internals/well-known-symbol"),O=t("../internals/well-known-symbol-wrapped"),P=t("../internals/well-known-symbol-define"),H=t("../internals/symbol-define-to-primitive"),et=t("../internals/set-to-string-tag"),it=t("../internals/internal-state"),pt=t("../internals/array-iteration").forEach,X=T("hidden"),ut=it.set,G=it.getterFor("Symbol"),U=Object.prototype,st=r.Symbol,gt=st&&st.prototype,zt=r.RangeError,St=r.TypeError,Bt=r.QObject,ie=W.f,re=Q.f,Ct=K.f,Yt=tt.f,Qt=l([].push),Ht=R("symbols"),Jt=R("op-symbols"),ne=R("wks"),ae=!Bt||!Bt.prototype||!Bt.prototype.findChild,me=function(ge,Ve,Ke){var dn=ie(U,Ve);dn&&delete U[Ve],re(ge,Ve,Ke),dn&&ge!==U&&re(U,Ve,dn)},Le=f&&p((function(){return I(re({},"a",{get:function(){return re(this,"a",{value:7}).a}})).a!==7}))?me:re,Pe=function(ge,Ve){var Ke=Ht[ge]=I(gt);return ut(Ke,{type:"Symbol",tag:ge,description:Ve}),f||(Ke.description=Ve),Ke},Be=function(ge,Ve,Ke){ge===U&&Be(Jt,Ve,Ke),x(ge);var dn=w(Ve);return x(Ke),g(Ht,dn)?(Ke.enumerable?(g(ge,X)&&ge[X][dn]&&(ge[X][dn]=!1),Ke=I(Ke,{enumerable:E(0,!1)})):(g(ge,X)||re(ge,X,E(1,{})),ge[X][dn]=!0),Le(ge,dn,Ke)):re(ge,dn,Ke)},He=function(ge,Ve){x(ge);var Ke=y(Ve),dn=D(Ke).concat(an(Ke));return pt(dn,(function(ln){f&&!c(Je,Ke,ln)||Be(ge,ln,Ke[ln])})),ge},Je=function(ge){var Ve=w(ge),Ke=c(Yt,this,Ve);return!(this===U&&g(Ht,Ve)&&!g(Jt,Ve))&&(!(Ke||!g(this,Ve)||!g(Ht,Ve)||g(this,X)&&this[X][Ve])||Ke)},sn=function(ge,Ve){var Ke=y(ge),dn=w(Ve);if(Ke!==U||!g(Ht,dn)||g(Jt,dn)){var ln=ie(Ke,dn);return!ln||!g(Ht,dn)||g(Ke,X)&&Ke[X][dn]||(ln.enumerable=!0),ln}},un=function(ge){var Ve=Ct(y(ge)),Ke=[];return pt(Ve,(function(dn){g(Ht,dn)||g(C,dn)||Qt(Ke,dn)})),Ke},an=function(ge){var Ve=ge===U,Ke=Ct(Ve?Jt:y(ge)),dn=[];return pt(Ke,(function(ln){!g(Ht,ln)||Ve&&!g(U,ln)||Qt(dn,Ht[ln])})),dn};h||(j(gt=(st=function(){if(v(gt,this))throw new St("Symbol is not a constructor");var ge=arguments.length&&arguments[0]!==void 0?S(arguments[0]):void 0,Ve=k(ge),Ke=function(dn){this===U&&c(Ke,Jt,dn),g(this,X)&&g(this[X],Ve)&&(this[X][Ve]=!1);var ln=E(1,dn);try{Le(this,Ve,ln)}catch($n){if(!($n instanceof zt))throw $n;me(this,Ve,ln)}};return f&&ae&&Le(U,Ve,{configurable:!0,set:Ke}),Pe(Ve,ge)}).prototype,"toString",(function(){return G(this).tag})),j(st,"withoutSetter",(function(ge){return Pe(k(ge),ge)})),tt.f=Je,Q.f=Be,rt.f=He,W.f=sn,Z.f=K.f=un,z.f=an,O.f=function(ge){return Pe(M(ge),ge)},f&&(F(gt,"description",{configurable:!0,get:function(){return G(this).description}}),n||j(U,"propertyIsEnumerable",Je,{unsafe:!0}))),o({global:!0,constructor:!0,wrap:!0,forced:!h,sham:!h},{Symbol:st}),pt(D(ne),(function(ge){P(ge)})),o({target:"Symbol",stat:!0,forced:!h},{useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),o({target:"Object",stat:!0,forced:!h,sham:!f},{create:function(ge,Ve){return Ve===void 0?I(ge):He(I(ge),Ve)},defineProperty:Be,defineProperties:He,getOwnPropertyDescriptor:sn}),o({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:un}),H(),et(st,"Symbol"),C[X]=!0},{"../internals/an-object":227,"../internals/array-iteration":229,"../internals/create-property-descriptor":242,"../internals/define-built-in":245,"../internals/define-built-in-accessor":244,"../internals/descriptors":247,"../internals/export":259,"../internals/fails":260,"../internals/function-call":264,"../internals/function-uncurry-this":268,"../internals/global":274,"../internals/has-own-property":275,"../internals/hidden-keys":276,"../internals/internal-state":282,"../internals/is-pure":290,"../internals/object-create":306,"../internals/object-define-properties":307,"../internals/object-define-property":308,"../internals/object-get-own-property-descriptor":309,"../internals/object-get-own-property-names":311,"../internals/object-get-own-property-names-external":310,"../internals/object-get-own-property-symbols":312,"../internals/object-is-prototype-of":314,"../internals/object-keys":316,"../internals/object-property-is-enumerable":317,"../internals/set-to-string-tag":331,"../internals/shared":334,"../internals/shared-key":332,"../internals/symbol-constructor-detection":336,"../internals/symbol-define-to-primitive":337,"../internals/to-indexed-object":341,"../internals/to-property-key":346,"../internals/to-string":348,"../internals/uid":350,"../internals/well-known-symbol":357,"../internals/well-known-symbol-define":355,"../internals/well-known-symbol-wrapped":356}],380:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/get-built-in"),c=t("../internals/has-own-property"),l=t("../internals/to-string"),n=t("../internals/shared"),f=t("../internals/symbol-registry-detection"),h=n("string-to-symbol-registry"),p=n("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!f},{for:function(g){var v=l(g);if(c(h,v))return h[v];var x=r("Symbol")(v);return h[v]=x,p[x]=v,x}})},{"../internals/export":259,"../internals/get-built-in":269,"../internals/has-own-property":275,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/to-string":348}],381:[function(t,s,u){t("../modules/es.symbol.constructor"),t("../modules/es.symbol.for"),t("../modules/es.symbol.key-for"),t("../modules/es.json.stringify"),t("../modules/es.object.get-own-property-symbols")},{"../modules/es.json.stringify":362,"../modules/es.object.get-own-property-symbols":365,"../modules/es.symbol.constructor":379,"../modules/es.symbol.for":380,"../modules/es.symbol.key-for":382}],382:[function(t,s,u){var o=t("../internals/export"),r=t("../internals/has-own-property"),c=t("../internals/is-symbol"),l=t("../internals/try-to-string"),n=t("../internals/shared"),f=t("../internals/symbol-registry-detection"),h=n("symbol-to-string-registry");o({target:"Symbol",stat:!0,forced:!f},{keyFor:function(p){if(!c(p))throw new TypeError(l(p)+" is not a symbol");if(r(h,p))return h[p]}})},{"../internals/export":259,"../internals/has-own-property":275,"../internals/is-symbol":292,"../internals/shared":334,"../internals/symbol-registry-detection":338,"../internals/try-to-string":349}],383:[function(t,s,u){function o(r){return Object.prototype.toString.call(r)}u.isArray=function(r){return Array.isArray?Array.isArray(r):o(r)==="[object Array]"},u.isBoolean=function(r){return typeof r=="boolean"},u.isNull=function(r){return r===null},u.isNullOrUndefined=function(r){return r==null},u.isNumber=function(r){return typeof r=="number"},u.isString=function(r){return typeof r=="string"},u.isSymbol=function(r){return typeof r=="symbol"},u.isUndefined=function(r){return r===void 0},u.isRegExp=function(r){return o(r)==="[object RegExp]"},u.isObject=function(r){return typeof r=="object"&&r!==null},u.isDate=function(r){return o(r)==="[object Date]"},u.isError=function(r){return o(r)==="[object Error]"||r instanceof Error},u.isFunction=function(r){return typeof r=="function"},u.isPrimitive=function(r){return r===null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="symbol"||r===void 0},u.isBuffer=t("buffer").Buffer.isBuffer},{buffer:220}],384:[function(t,s,u){(function(o){(function(){var r=t("elliptic"),c=t("bn.js");s.exports=function(h){return new n(h)};var l={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function n(h){this.curveType=l[h],this.curveType||(this.curveType={name:h}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function f(h,p,g){Array.isArray(h)||(h=h.toArray());var v=new o(h);if(g&&v.length<g){var x=new o(g-v.length);x.fill(0),v=o.concat([x,v])}return p?v.toString(p):v}l.p224=l.secp224r1,l.p256=l.secp256r1=l.prime256v1,l.p192=l.secp192r1=l.prime192v1,l.p384=l.secp384r1,l.p521=l.secp521r1,n.prototype.generateKeys=function(h,p){return this.keys=this.curve.genKeyPair(),this.getPublicKey(h,p)},n.prototype.computeSecret=function(h,p,g){return p=p||"utf8",o.isBuffer(h)||(h=new o(h,p)),f(this.curve.keyFromPublic(h).getPublic().mul(this.keys.getPrivate()).getX(),g,this.curveType.byteLength)},n.prototype.getPublicKey=function(h,p){var g=this.keys.getPublic(p==="compressed",!0);return p==="hybrid"&&(g[g.length-1]%2?g[0]=7:g[0]=6),f(g,h)},n.prototype.getPrivateKey=function(h){return f(this.keys.getPrivate(),h)},n.prototype.setPublicKey=function(h,p){return p=p||"utf8",o.isBuffer(h)||(h=new o(h,p)),this.keys._importPublic(h),this},n.prototype.setPrivateKey=function(h,p){p=p||"utf8",o.isBuffer(h)||(h=new o(h,p));var g=new c(h);return g=g.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(g),this}}).call(this)}).call(this,t("buffer").Buffer)},{"bn.js":385,buffer:220,elliptic:405}],385:[function(t,s,u){arguments[4][184][0].apply(u,arguments)},{buffer:188,dup:184}],386:[function(t,s,u){var o=t("inherits"),r=t("md5.js"),c=t("ripemd160"),l=t("sha.js"),n=t("cipher-base");function f(h){n.call(this,"digest"),this._hash=h}o(f,n),f.prototype._update=function(h){this._hash.update(h)},f.prototype._final=function(){return this._hash.digest()},s.exports=function(h){return(h=h.toLowerCase())==="md5"?new r:h==="rmd160"||h==="ripemd160"?new c:new f(l(h))}},{"cipher-base":221,inherits:440,"md5.js":450,ripemd160:493,"sha.js":498}],387:[function(t,s,u){var o=t("md5.js");s.exports=function(r){return new o().update(r).digest()}},{"md5.js":450}],388:[function(t,s,u){var o=t("inherits"),r=t("./legacy"),c=t("cipher-base"),l=t("safe-buffer").Buffer,n=t("create-hash/md5"),f=t("ripemd160"),h=t("sha.js"),p=l.alloc(128);function g(v,x){c.call(this,"digest"),typeof x=="string"&&(x=l.from(x));var y=v==="sha512"||v==="sha384"?128:64;this._alg=v,this._key=x,x.length>y?x=(v==="rmd160"?new f:h(v)).update(x).digest():x.length<y&&(x=l.concat([x,p],y));for(var w=this._ipad=l.allocUnsafe(y),S=this._opad=l.allocUnsafe(y),E=0;E<y;E++)w[E]=54^x[E],S[E]=92^x[E];this._hash=v==="rmd160"?new f:h(v),this._hash.update(w)}o(g,c),g.prototype._update=function(v){this._hash.update(v)},g.prototype._final=function(){var v=this._hash.digest();return(this._alg==="rmd160"?new f:h(this._alg)).update(this._opad).update(v).digest()},s.exports=function(v,x){return(v=v.toLowerCase())==="rmd160"||v==="ripemd160"?new g("rmd160",x):v==="md5"?new r(n,x):new g(v,x)}},{"./legacy":389,"cipher-base":221,"create-hash/md5":387,inherits:440,ripemd160:493,"safe-buffer":494,"sha.js":498}],389:[function(t,s,u){var o=t("inherits"),r=t("safe-buffer").Buffer,c=t("cipher-base"),l=r.alloc(128);function n(f,h){c.call(this,"digest"),typeof h=="string"&&(h=r.from(h)),this._alg=f,this._key=h,h.length>64?h=f(h):h.length<64&&(h=r.concat([h,l],64));for(var p=this._ipad=r.allocUnsafe(64),g=this._opad=r.allocUnsafe(64),v=0;v<64;v++)p[v]=54^h[v],g[v]=92^h[v];this._hash=[p]}o(n,c),n.prototype._update=function(f){this._hash.push(f)},n.prototype._final=function(){var f=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,f]))},s.exports=n},{"cipher-base":221,inherits:440,"safe-buffer":494}],390:[function(t,s,u){u.randomBytes=u.rng=u.pseudoRandomBytes=u.prng=t("randombytes"),u.createHash=u.Hash=t("create-hash"),u.createHmac=u.Hmac=t("create-hmac");var o=t("browserify-sign/algos"),r=Object.keys(o),c=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);u.getHashes=function(){return c};var l=t("pbkdf2");u.pbkdf2=l.pbkdf2,u.pbkdf2Sync=l.pbkdf2Sync;var n=t("browserify-cipher");u.Cipher=n.Cipher,u.createCipher=n.createCipher,u.Cipheriv=n.Cipheriv,u.createCipheriv=n.createCipheriv,u.Decipher=n.Decipher,u.createDecipher=n.createDecipher,u.Decipheriv=n.Decipheriv,u.createDecipheriv=n.createDecipheriv,u.getCiphers=n.getCiphers,u.listCiphers=n.listCiphers;var f=t("diffie-hellman");u.DiffieHellmanGroup=f.DiffieHellmanGroup,u.createDiffieHellmanGroup=f.createDiffieHellmanGroup,u.getDiffieHellman=f.getDiffieHellman,u.createDiffieHellman=f.createDiffieHellman,u.DiffieHellman=f.DiffieHellman;var h=t("browserify-sign");u.createSign=h.createSign,u.Sign=h.Sign,u.createVerify=h.createVerify,u.Verify=h.Verify,u.createECDH=t("create-ecdh");var p=t("public-encrypt");u.publicEncrypt=p.publicEncrypt,u.privateEncrypt=p.privateEncrypt,u.publicDecrypt=p.publicDecrypt,u.privateDecrypt=p.privateDecrypt;var g=t("randomfill");u.randomFill=g.randomFill,u.randomFillSync=g.randomFillSync,u.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},u.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":206,"browserify-sign":213,"browserify-sign/algos":210,"create-ecdh":384,"create-hash":386,"create-hmac":388,"diffie-hellman":400,pbkdf2:460,"public-encrypt":468,randombytes:475,randomfill:476}],391:[function(t,s,u){(function(o,r){typeof u=="object"&&s!==void 0?s.exports=r():(o=typeof globalThis<"u"?globalThis:o||self).dayjs=r()})(void 0,(function(){var o=6e4,r=36e5,c="millisecond",l="second",n="minute",f="hour",h="day",p="week",g="month",v="quarter",x="year",y="date",w="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,E=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,I={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(T){var C=["th","st","nd","rd"],k=T%100;return"["+T+(C[(k-20)%10]||C[k]||C[0])+"]"}},D=function(T,C,k){var M=String(T);return!M||M.length>=C?T:""+Array(C+1-M.length).join(k)+T},Z={s:D,z:function(T){var C=-T.utcOffset(),k=Math.abs(C),M=Math.floor(k/60),O=k%60;return(C<=0?"+":"-")+D(M,2,"0")+":"+D(O,2,"0")},m:function T(C,k){if(C.date()<k.date())return-T(k,C);var M=12*(k.year()-C.year())+(k.month()-C.month()),O=C.clone().add(M,g),P=k-O<0,H=C.clone().add(M+(P?-1:1),g);return+(-(M+(k-O)/(P?O-H:H-O))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:g,y:x,w:p,d:h,D:y,h:f,m:n,s:l,ms:c,Q:v}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},K="en",z={};z[K]=I;var W="$isDayjsObject",Q=function(T){return T instanceof F||!(!T||!T[W])},rt=function T(C,k,M){var O;if(!C)return K;if(typeof C=="string"){var P=C.toLowerCase();z[P]&&(O=P),k&&(z[P]=k,O=P);var H=C.split("-");if(!O&&H.length>1)return T(H[0])}else{var et=C.name;z[et]=C,O=et}return!M&&O&&(K=O),O||!M&&K},tt=function(T,C){if(Q(T))return T.clone();var k=typeof C=="object"?C:{};return k.date=T,k.args=arguments,new F(k)},j=Z;j.l=rt,j.i=Q,j.w=function(T,C){return tt(T,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var F=(function(){function T(k){this.$L=rt(k.locale,null,!0),this.parse(k),this.$x=this.$x||k.x||{},this[W]=!0}var C=T.prototype;return C.parse=function(k){this.$d=(function(M){var O=M.date,P=M.utc;if(O===null)return new Date(NaN);if(j.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var H=O.match(S);if(H){var et=H[2]-1||0,it=(H[7]||"0").substring(0,3);return P?new Date(Date.UTC(H[1],et,H[3]||1,H[4]||0,H[5]||0,H[6]||0,it)):new Date(H[1],et,H[3]||1,H[4]||0,H[5]||0,H[6]||0,it)}}return new Date(O)})(k),this.init()},C.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},C.$utils=function(){return j},C.isValid=function(){return this.$d.toString()!==w},C.isSame=function(k,M){var O=tt(k);return this.startOf(M)<=O&&O<=this.endOf(M)},C.isAfter=function(k,M){return tt(k)<this.startOf(M)},C.isBefore=function(k,M){return this.endOf(M)<tt(k)},C.$g=function(k,M,O){return j.u(k)?this[M]:this.set(O,k)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(k,M){var O=this,P=!!j.u(M)||M,H=j.p(k),et=function(gt,zt){var St=j.w(O.$u?Date.UTC(O.$y,zt,gt):new Date(O.$y,zt,gt),O);return P?St:St.endOf(h)},it=function(gt,zt){return j.w(O.toDate()[gt].apply(O.toDate("s"),(P?[0,0,0,0]:[23,59,59,999]).slice(zt)),O)},pt=this.$W,X=this.$M,ut=this.$D,G="set"+(this.$u?"UTC":"");switch(H){case x:return P?et(1,0):et(31,11);case g:return P?et(1,X):et(0,X+1);case p:var U=this.$locale().weekStart||0,st=(pt<U?pt+7:pt)-U;return et(P?ut-st:ut+(6-st),X);case h:case y:return it(G+"Hours",0);case f:return it(G+"Minutes",1);case n:return it(G+"Seconds",2);case l:return it(G+"Milliseconds",3);default:return this.clone()}},C.endOf=function(k){return this.startOf(k,!1)},C.$set=function(k,M){var O,P=j.p(k),H="set"+(this.$u?"UTC":""),et=(O={},O[h]=H+"Date",O[y]=H+"Date",O[g]=H+"Month",O[x]=H+"FullYear",O[f]=H+"Hours",O[n]=H+"Minutes",O[l]=H+"Seconds",O[c]=H+"Milliseconds",O)[P],it=P===h?this.$D+(M-this.$W):M;if(P===g||P===x){var pt=this.clone().set(y,1);pt.$d[et](it),pt.init(),this.$d=pt.set(y,Math.min(this.$D,pt.daysInMonth())).$d}else et&&this.$d[et](it);return this.init(),this},C.set=function(k,M){return this.clone().$set(k,M)},C.get=function(k){return this[j.p(k)]()},C.add=function(k,M){var O,P=this;k=Number(k);var H=j.p(M),et=function(X){var ut=tt(P);return j.w(ut.date(ut.date()+Math.round(X*k)),P)};if(H===g)return this.set(g,this.$M+k);if(H===x)return this.set(x,this.$y+k);if(H===h)return et(1);if(H===p)return et(7);var it=(O={},O[n]=o,O[f]=r,O[l]=1e3,O)[H]||1,pt=this.$d.getTime()+k*it;return j.w(pt,this)},C.subtract=function(k,M){return this.add(-1*k,M)},C.format=function(k){var M=this,O=this.$locale();if(!this.isValid())return O.invalidDate||w;var P=k||"YYYY-MM-DDTHH:mm:ssZ",H=j.z(this),et=this.$H,it=this.$m,pt=this.$M,X=O.weekdays,ut=O.months,G=O.meridiem,U=function(zt,St,Bt,ie){return zt&&(zt[St]||zt(M,P))||Bt[St].slice(0,ie)},st=function(zt){return j.s(et%12||12,zt,"0")},gt=G||function(zt,St,Bt){var ie=zt<12?"AM":"PM";return Bt?ie.toLowerCase():ie};return P.replace(E,(function(zt,St){return St||(function(Bt){switch(Bt){case"YY":return String(M.$y).slice(-2);case"YYYY":return j.s(M.$y,4,"0");case"M":return pt+1;case"MM":return j.s(pt+1,2,"0");case"MMM":return U(O.monthsShort,pt,ut,3);case"MMMM":return U(ut,pt);case"D":return M.$D;case"DD":return j.s(M.$D,2,"0");case"d":return String(M.$W);case"dd":return U(O.weekdaysMin,M.$W,X,2);case"ddd":return U(O.weekdaysShort,M.$W,X,3);case"dddd":return X[M.$W];case"H":return String(et);case"HH":return j.s(et,2,"0");case"h":return st(1);case"hh":return st(2);case"a":return gt(et,it,!0);case"A":return gt(et,it,!1);case"m":return String(it);case"mm":return j.s(it,2,"0");case"s":return String(M.$s);case"ss":return j.s(M.$s,2,"0");case"SSS":return j.s(M.$ms,3,"0");case"Z":return H}return null})(zt)||H.replace(":","")}))},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(k,M,O){var P,H=this,et=j.p(M),it=tt(k),pt=(it.utcOffset()-this.utcOffset())*o,X=this-it,ut=function(){return j.m(H,it)};switch(et){case x:P=ut()/12;break;case g:P=ut();break;case v:P=ut()/3;break;case p:P=(X-pt)/6048e5;break;case h:P=(X-pt)/864e5;break;case f:P=X/r;break;case n:P=X/o;break;case l:P=X/1e3;break;default:P=X}return O?P:j.a(P)},C.daysInMonth=function(){return this.endOf(g).$D},C.$locale=function(){return z[this.$L]},C.locale=function(k,M){if(!k)return this.$L;var O=this.clone(),P=rt(k,M,!0);return P&&(O.$L=P),O},C.clone=function(){return j.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},T})(),R=F.prototype;return tt.prototype=R,[["$ms",c],["$s",l],["$m",n],["$H",f],["$W",h],["$M",g],["$y",x],["$D",y]].forEach((function(T){R[T[1]]=function(C){return this.$g(C,T[0],T[1])}})),tt.extend=function(T,C){return T.$i||(T(C,F,tt),T.$i=!0),tt},tt.locale=rt,tt.isDayjs=Q,tt.unix=function(T){return tt(1e3*T)},tt.en=z[K],tt.Ls=z,tt.p={},tt}))},{}],392:[function(t,s,u){(function(o,r){typeof u=="object"&&s!==void 0?s.exports=r():(o=typeof globalThis<"u"?globalThis:o||self).dayjs_plugin_customParseFormat=r()})(void 0,(function(){var o={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,c=/\d\d/,l=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,f={},h=function(S){return(S=+S)+(S>68?1900:2e3)},p=function(S){return function(E){this[S]=+E}},g=[/[+-]\d\d:?(\d\d)?|Z/,function(S){(this.zone||(this.zone={})).offset=(function(E){if(!E||E==="Z")return 0;var I=E.match(/([+-]|\d\d)/g),D=60*I[1]+(+I[2]||0);return D===0?0:I[0]==="+"?-D:D})(S)}],v=function(S){var E=f[S];return E&&(E.indexOf?E:E.s.concat(E.f))},x=function(S,E){var I,D=f.meridiem;if(D){for(var Z=1;Z<=24;Z+=1)if(S.indexOf(D(Z,0,E))>-1){I=Z>12;break}}else I=S===(E?"pm":"PM");return I},y={A:[n,function(S){this.afternoon=x(S,!1)}],a:[n,function(S){this.afternoon=x(S,!0)}],S:[/\d/,function(S){this.milliseconds=100*+S}],SS:[c,function(S){this.milliseconds=10*+S}],SSS:[/\d{3}/,function(S){this.milliseconds=+S}],s:[l,p("seconds")],ss:[l,p("seconds")],m:[l,p("minutes")],mm:[l,p("minutes")],H:[l,p("hours")],h:[l,p("hours")],HH:[l,p("hours")],hh:[l,p("hours")],D:[l,p("day")],DD:[c,p("day")],Do:[n,function(S){var E=f.ordinal,I=S.match(/\d+/);if(this.day=I[0],E)for(var D=1;D<=31;D+=1)E(D).replace(/\[|\]/g,"")===S&&(this.day=D)}],M:[l,p("month")],MM:[c,p("month")],MMM:[n,function(S){var E=v("months"),I=(v("monthsShort")||E.map((function(D){return D.slice(0,3)}))).indexOf(S)+1;if(I<1)throw new Error;this.month=I%12||I}],MMMM:[n,function(S){var E=v("months").indexOf(S)+1;if(E<1)throw new Error;this.month=E%12||E}],Y:[/[+-]?\d+/,p("year")],YY:[c,function(S){this.year=h(S)}],YYYY:[/\d{4}/,p("year")],Z:g,ZZ:g};function w(S){var E,I;E=S,I=f&&f.formats;for(var D=(S=E.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(tt,j,F){var R=F&&F.toUpperCase();return j||I[F]||o[F]||I[R].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(T,C,k){return C||k.slice(1)}))}))).match(r),Z=D.length,K=0;K<Z;K+=1){var z=D[K],W=y[z],Q=W&&W[0],rt=W&&W[1];D[K]=rt?{regex:Q,parser:rt}:z.replace(/^\[|\]$/g,"")}return function(tt){for(var j={},F=0,R=0;F<Z;F+=1){var T=D[F];if(typeof T=="string")R+=T.length;else{var C=T.regex,k=T.parser,M=tt.slice(R),O=C.exec(M)[0];k.call(j,O),tt=tt.replace(O,"")}}return(function(P){var H=P.afternoon;if(H!==void 0){var et=P.hours;H?et<12&&(P.hours+=12):et===12&&(P.hours=0),delete P.afternoon}})(j),j}}return function(S,E,I){I.p.customParseFormat=!0,S&&S.parseTwoDigitYear&&(h=S.parseTwoDigitYear);var D=E.prototype,Z=D.parse;D.parse=function(K){var z=K.date,W=K.utc,Q=K.args;this.$u=W;var rt=Q[1];if(typeof rt=="string"){var tt=Q[2]===!0,j=Q[3]===!0,F=tt||j,R=Q[2];j&&(R=Q[2]),f=this.$locale(),!tt&&R&&(f=I.Ls[R]),this.$d=(function(M,O,P){try{if(["x","X"].indexOf(O)>-1)return new Date((O==="X"?1e3:1)*M);var H=w(O)(M),et=H.year,it=H.month,pt=H.day,X=H.hours,ut=H.minutes,G=H.seconds,U=H.milliseconds,st=H.zone,gt=new Date,zt=pt||(et||it?1:gt.getDate()),St=et||gt.getFullYear(),Bt=0;et&&!it||(Bt=it>0?it-1:gt.getMonth());var ie=X||0,re=ut||0,Ct=G||0,Yt=U||0;return st?new Date(Date.UTC(St,Bt,zt,ie,re,Ct,Yt+60*st.offset*1e3)):P?new Date(Date.UTC(St,Bt,zt,ie,re,Ct,Yt)):new Date(St,Bt,zt,ie,re,Ct,Yt)}catch{return new Date("")}})(z,rt,W),this.init(),R&&R!==!0&&(this.$L=this.locale(R).$L),F&&z!=this.format(rt)&&(this.$d=new Date("")),f={}}else if(rt instanceof Array)for(var T=rt.length,C=1;C<=T;C+=1){Q[1]=rt[C-1];var k=I.apply(this,Q);if(k.isValid()){this.$d=k.$d,this.$L=k.$L,this.init();break}C===T&&(this.$d=new Date(""))}else Z.call(this,K)}}}))},{}],393:[function(t,s,u){(function(o,r){typeof u=="object"&&s!==void 0?s.exports=r():(o=typeof globalThis<"u"?globalThis:o||self).dayjs_plugin_utc=r()})(void 0,(function(){var o="minute",r=/[+-]\d\d(?::?\d\d)?/g,c=/([+-]|\d\d)/g;return function(l,n,f){var h=n.prototype;f.utc=function(S){var E={date:S,utc:!0,args:arguments};return new n(E)},h.utc=function(S){var E=f(this.toDate(),{locale:this.$L,utc:!0});return S?E.add(this.utcOffset(),o):E},h.local=function(){return f(this.toDate(),{locale:this.$L,utc:!1})};var p=h.parse;h.parse=function(S){S.utc&&(this.$u=!0),this.$utils().u(S.$offset)||(this.$offset=S.$offset),p.call(this,S)};var g=h.init;h.init=function(){if(this.$u){var S=this.$d;this.$y=S.getUTCFullYear(),this.$M=S.getUTCMonth(),this.$D=S.getUTCDate(),this.$W=S.getUTCDay(),this.$H=S.getUTCHours(),this.$m=S.getUTCMinutes(),this.$s=S.getUTCSeconds(),this.$ms=S.getUTCMilliseconds()}else g.call(this)};var v=h.utcOffset;h.utcOffset=function(S,E){var I=this.$utils().u;if(I(S))return this.$u?0:I(this.$offset)?v.call(this):this.$offset;if(typeof S=="string"&&(S=(function(z){z===void 0&&(z="");var W=z.match(r);if(!W)return null;var Q=(""+W[0]).match(c)||["-",0,0],rt=Q[0],tt=60*+Q[1]+ +Q[2];return tt===0?0:rt==="+"?tt:-tt})(S))===null)return this;var D=Math.abs(S)<=16?60*S:S,Z=this;if(E)return Z.$offset=D,Z.$u=S===0,Z;if(S!==0){var K=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(Z=this.local().add(D+K,o)).$offset=D,Z.$x.$localOffset=K}else Z=this.utc();return Z};var x=h.format;h.format=function(S){var E=S||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return x.call(this,E)},h.valueOf=function(){var S=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*S},h.isUTC=function(){return!!this.$u},h.toISOString=function(){return this.toDate().toISOString()},h.toString=function(){return this.toDate().toUTCString()};var y=h.toDate;h.toDate=function(S){return S==="s"&&this.$offset?f(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():y.call(this)};var w=h.diff;h.diff=function(S,E,I){if(S&&this.$u===S.$u)return w.call(this,S,E,I);var D=this.local(),Z=f(S).local();return w.call(D,Z,E,I)}}}))},{}],394:[function(t,s,u){u.utils=t("./des/utils"),u.Cipher=t("./des/cipher"),u.DES=t("./des/des"),u.CBC=t("./des/cbc"),u.EDE=t("./des/ede")},{"./des/cbc":395,"./des/cipher":396,"./des/des":397,"./des/ede":398,"./des/utils":399}],395:[function(t,s,u){var o=t("minimalistic-assert"),r=t("inherits"),c={};function l(n){o.equal(n.length,8,"Invalid IV length"),this.iv=new Array(8);for(var f=0;f<this.iv.length;f++)this.iv[f]=n[f]}u.instantiate=function(n){function f(v){n.call(this,v),this._cbcInit()}r(f,n);for(var h=Object.keys(c),p=0;p<h.length;p++){var g=h[p];f.prototype[g]=c[g]}return f.create=function(v){return new f(v)},f},c._cbcInit=function(){var n=new l(this.options.iv);this._cbcState=n},c._update=function(n,f,h,p){var g=this._cbcState,v=this.constructor.super_.prototype,x=g.iv;if(this.type==="encrypt"){for(var y=0;y<this.blockSize;y++)x[y]^=n[f+y];for(v._update.call(this,x,0,h,p),y=0;y<this.blockSize;y++)x[y]=h[p+y]}else{for(v._update.call(this,n,f,h,p),y=0;y<this.blockSize;y++)h[p+y]^=x[y];for(y=0;y<this.blockSize;y++)x[y]=n[f+y]}}},{inherits:440,"minimalistic-assert":453}],396:[function(t,s,u){var o=t("minimalistic-assert");function r(c){this.options=c,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=c.padding!==!1}s.exports=r,r.prototype._init=function(){},r.prototype.update=function(c){return c.length===0?[]:this.type==="decrypt"?this._updateDecrypt(c):this._updateEncrypt(c)},r.prototype._buffer=function(c,l){for(var n=Math.min(this.buffer.length-this.bufferOff,c.length-l),f=0;f<n;f++)this.buffer[this.bufferOff+f]=c[l+f];return this.bufferOff+=n,n},r.prototype._flushBuffer=function(c,l){return this._update(this.buffer,0,c,l),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(c){var l=0,n=0,f=(this.bufferOff+c.length)/this.blockSize|0,h=new Array(f*this.blockSize);this.bufferOff!==0&&(l+=this._buffer(c,l),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(h,n)));for(var p=c.length-(c.length-l)%this.blockSize;l<p;l+=this.blockSize)this._update(c,l,h,n),n+=this.blockSize;for(;l<c.length;l++,this.bufferOff++)this.buffer[this.bufferOff]=c[l];return h},r.prototype._updateDecrypt=function(c){for(var l=0,n=0,f=Math.ceil((this.bufferOff+c.length)/this.blockSize)-1,h=new Array(f*this.blockSize);f>0;f--)l+=this._buffer(c,l),n+=this._flushBuffer(h,n);return l+=this._buffer(c,l),h},r.prototype.final=function(c){var l,n;return c&&(l=this.update(c)),n=this.type==="encrypt"?this._finalEncrypt():this._finalDecrypt(),l?l.concat(n):n},r.prototype._pad=function(c,l){if(l===0)return!1;for(;l<c.length;)c[l++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var c=new Array(this.blockSize);return this._update(this.buffer,0,c,0),c},r.prototype._unpad=function(c){return c},r.prototype._finalDecrypt=function(){o.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var c=new Array(this.blockSize);return this._flushBuffer(c,0),this._unpad(c)}},{"minimalistic-assert":453}],397:[function(t,s,u){var o=t("minimalistic-assert"),r=t("inherits"),c=t("./utils"),l=t("./cipher");function n(){this.tmp=new Array(2),this.keys=null}function f(p){l.call(this,p);var g=new n;this._desState=g,this.deriveKeys(g,p.key)}r(f,l),s.exports=f,f.create=function(p){return new f(p)};var h=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];f.prototype.deriveKeys=function(p,g){p.keys=new Array(32),o.equal(g.length,this.blockSize,"Invalid key length");var v=c.readUInt32BE(g,0),x=c.readUInt32BE(g,4);c.pc1(v,x,p.tmp,0),v=p.tmp[0],x=p.tmp[1];for(var y=0;y<p.keys.length;y+=2){var w=h[y>>>1];v=c.r28shl(v,w),x=c.r28shl(x,w),c.pc2(v,x,p.keys,y)}},f.prototype._update=function(p,g,v,x){var y=this._desState,w=c.readUInt32BE(p,g),S=c.readUInt32BE(p,g+4);c.ip(w,S,y.tmp,0),w=y.tmp[0],S=y.tmp[1],this.type==="encrypt"?this._encrypt(y,w,S,y.tmp,0):this._decrypt(y,w,S,y.tmp,0),w=y.tmp[0],S=y.tmp[1],c.writeUInt32BE(v,w,x),c.writeUInt32BE(v,S,x+4)},f.prototype._pad=function(p,g){if(this.padding===!1)return!1;for(var v=p.length-g,x=g;x<p.length;x++)p[x]=v;return!0},f.prototype._unpad=function(p){if(this.padding===!1)return p;for(var g=p[p.length-1],v=p.length-g;v<p.length;v++)o.equal(p[v],g);return p.slice(0,p.length-g)},f.prototype._encrypt=function(p,g,v,x,y){for(var w=g,S=v,E=0;E<p.keys.length;E+=2){var I=p.keys[E],D=p.keys[E+1];c.expand(S,p.tmp,0),I^=p.tmp[0],D^=p.tmp[1];var Z=c.substitute(I,D),K=S;S=(w^c.permute(Z))>>>0,w=K}c.rip(S,w,x,y)},f.prototype._decrypt=function(p,g,v,x,y){for(var w=v,S=g,E=p.keys.length-2;E>=0;E-=2){var I=p.keys[E],D=p.keys[E+1];c.expand(w,p.tmp,0),I^=p.tmp[0],D^=p.tmp[1];var Z=c.substitute(I,D),K=w;w=(S^c.permute(Z))>>>0,S=K}c.rip(w,S,x,y)}},{"./cipher":396,"./utils":399,inherits:440,"minimalistic-assert":453}],398:[function(t,s,u){var o=t("minimalistic-assert"),r=t("inherits"),c=t("./cipher"),l=t("./des");function n(h,p){o.equal(p.length,24,"Invalid key length");var g=p.slice(0,8),v=p.slice(8,16),x=p.slice(16,24);this.ciphers=h==="encrypt"?[l.create({type:"encrypt",key:g}),l.create({type:"decrypt",key:v}),l.create({type:"encrypt",key:x})]:[l.create({type:"decrypt",key:x}),l.create({type:"encrypt",key:v}),l.create({type:"decrypt",key:g})]}function f(h){c.call(this,h);var p=new n(this.type,this.options.key);this._edeState=p}r(f,c),s.exports=f,f.create=function(h){return new f(h)},f.prototype._update=function(h,p,g,v){var x=this._edeState;x.ciphers[0]._update(h,p,g,v),x.ciphers[1]._update(g,v,g,v),x.ciphers[2]._update(g,v,g,v)},f.prototype._pad=l.prototype._pad,f.prototype._unpad=l.prototype._unpad},{"./cipher":396,"./des":397,inherits:440,"minimalistic-assert":453}],399:[function(t,s,u){u.readUInt32BE=function(l,n){return(l[0+n]<<24|l[1+n]<<16|l[2+n]<<8|l[3+n])>>>0},u.writeUInt32BE=function(l,n,f){l[0+f]=n>>>24,l[1+f]=n>>>16&255,l[2+f]=n>>>8&255,l[3+f]=255&n},u.ip=function(l,n,f,h){for(var p=0,g=0,v=6;v>=0;v-=2){for(var x=0;x<=24;x+=8)p<<=1,p|=n>>>x+v&1;for(x=0;x<=24;x+=8)p<<=1,p|=l>>>x+v&1}for(v=6;v>=0;v-=2){for(x=1;x<=25;x+=8)g<<=1,g|=n>>>x+v&1;for(x=1;x<=25;x+=8)g<<=1,g|=l>>>x+v&1}f[h+0]=p>>>0,f[h+1]=g>>>0},u.rip=function(l,n,f,h){for(var p=0,g=0,v=0;v<4;v++)for(var x=24;x>=0;x-=8)p<<=1,p|=n>>>x+v&1,p<<=1,p|=l>>>x+v&1;for(v=4;v<8;v++)for(x=24;x>=0;x-=8)g<<=1,g|=n>>>x+v&1,g<<=1,g|=l>>>x+v&1;f[h+0]=p>>>0,f[h+1]=g>>>0},u.pc1=function(l,n,f,h){for(var p=0,g=0,v=7;v>=5;v--){for(var x=0;x<=24;x+=8)p<<=1,p|=n>>x+v&1;for(x=0;x<=24;x+=8)p<<=1,p|=l>>x+v&1}for(x=0;x<=24;x+=8)p<<=1,p|=n>>x+v&1;for(v=1;v<=3;v++){for(x=0;x<=24;x+=8)g<<=1,g|=n>>x+v&1;for(x=0;x<=24;x+=8)g<<=1,g|=l>>x+v&1}for(x=0;x<=24;x+=8)g<<=1,g|=l>>x+v&1;f[h+0]=p>>>0,f[h+1]=g>>>0},u.r28shl=function(l,n){return l<<n&268435455|l>>>28-n};var o=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];u.pc2=function(l,n,f,h){for(var p=0,g=0,v=o.length>>>1,x=0;x<v;x++)p<<=1,p|=l>>>o[x]&1;for(x=v;x<o.length;x++)g<<=1,g|=n>>>o[x]&1;f[h+0]=p>>>0,f[h+1]=g>>>0},u.expand=function(l,n,f){var h=0,p=0;h=(1&l)<<5|l>>>27;for(var g=23;g>=15;g-=4)h<<=6,h|=l>>>g&63;for(g=11;g>=3;g-=4)p|=l>>>g&63,p<<=6;p|=(31&l)<<1|l>>>31,n[f+0]=h>>>0,n[f+1]=p>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];u.substitute=function(l,n){for(var f=0,h=0;h<4;h++)f<<=4,f|=r[64*h+(l>>>18-6*h&63)];for(h=0;h<4;h++)f<<=4,f|=r[256+64*h+(n>>>18-6*h&63)];return f>>>0};var c=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];u.permute=function(l){for(var n=0,f=0;f<c.length;f++)n<<=1,n|=l>>>c[f]&1;return n>>>0},u.padSplit=function(l,n,f){for(var h=l.toString(2);h.length<n;)h="0"+h;for(var p=[],g=0;g<n;g+=f)p.push(h.slice(g,g+f));return p.join(" ")}},{}],400:[function(t,s,u){(function(o){(function(){var r=t("./lib/generatePrime"),c=t("./lib/primes.json"),l=t("./lib/dh"),n={binary:!0,hex:!0,base64:!0};u.DiffieHellmanGroup=u.createDiffieHellmanGroup=u.getDiffieHellman=function(f){var h=new o(c[f].prime,"hex"),p=new o(c[f].gen,"hex");return new l(h,p)},u.createDiffieHellman=u.DiffieHellman=function f(h,p,g,v){return o.isBuffer(p)||n[p]===void 0?f(h,"binary",p,g):(p=p||"binary",v=v||"binary",g=g||new o([2]),o.isBuffer(g)||(g=new o(g,v)),typeof h=="number"?new l(r(h,g),g,!0):(o.isBuffer(h)||(h=new o(h,p)),new l(h,g,!0)))}}).call(this)}).call(this,t("buffer").Buffer)},{"./lib/dh":401,"./lib/generatePrime":402,"./lib/primes.json":403,buffer:220}],401:[function(t,s,u){(function(o){(function(){var r=t("bn.js"),c=new(t("miller-rabin")),l=new r(24),n=new r(11),f=new r(10),h=new r(3),p=new r(7),g=t("./generatePrime"),v=t("randombytes");function x(I,D){return D=D||"utf8",o.isBuffer(I)||(I=new o(I,D)),this._pub=new r(I),this}function y(I,D){return D=D||"utf8",o.isBuffer(I)||(I=new o(I,D)),this._priv=new r(I),this}s.exports=S;var w={};function S(I,D,Z){this.setGenerator(D),this.__prime=new r(I),this._prime=r.mont(this.__prime),this._primeLen=I.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,Z?(this.setPublicKey=x,this.setPrivateKey=y):this._primeCode=8}function E(I,D){var Z=new o(I.toArray());return D?Z.toString(D):Z}Object.defineProperty(S.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=(function(I,D){var Z=D.toString("hex"),K=[Z,I.toString(16)].join("_");if(K in w)return w[K];var z,W=0;if(I.isEven()||!g.simpleSieve||!g.fermatTest(I)||!c.test(I))return W+=1,W+=Z==="02"||Z==="05"?8:4,w[K]=W,W;switch(c.test(I.shrn(1))||(W+=2),Z){case"02":I.mod(l).cmp(n)&&(W+=8);break;case"05":(z=I.mod(f)).cmp(h)&&z.cmp(p)&&(W+=8);break;default:W+=4}return w[K]=W,W})(this.__prime,this.__gen)),this._primeCode}}),S.prototype.generateKeys=function(){return this._priv||(this._priv=new r(v(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},S.prototype.computeSecret=function(I){var D=(I=(I=new r(I)).toRed(this._prime)).redPow(this._priv).fromRed(),Z=new o(D.toArray()),K=this.getPrime();if(Z.length<K.length){var z=new o(K.length-Z.length);z.fill(0),Z=o.concat([z,Z])}return Z},S.prototype.getPublicKey=function(I){return E(this._pub,I)},S.prototype.getPrivateKey=function(I){return E(this._priv,I)},S.prototype.getPrime=function(I){return E(this.__prime,I)},S.prototype.getGenerator=function(I){return E(this._gen,I)},S.prototype.setGenerator=function(I,D){return D=D||"utf8",o.isBuffer(I)||(I=new o(I,D)),this.__gen=I,this._gen=new r(I),this}}).call(this)}).call(this,t("buffer").Buffer)},{"./generatePrime":402,"bn.js":404,buffer:220,"miller-rabin":451,randombytes:475}],402:[function(t,s,u){var o=t("randombytes");s.exports=I,I.simpleSieve=S,I.fermatTest=E;var r=t("bn.js"),c=new r(24),l=new(t("miller-rabin")),n=new r(1),f=new r(2),h=new r(5),p=(new r(16),new r(8),new r(10)),g=new r(3),v=(new r(7),new r(11)),x=new r(4),y=(new r(12),null);function w(){if(y!==null)return y;var D=[];D[0]=2;for(var Z=1,K=3;K<1048576;K+=2){for(var z=Math.ceil(Math.sqrt(K)),W=0;W<Z&&D[W]<=z&&K%D[W]!=0;W++);Z!==W&&D[W]<=z||(D[Z++]=K)}return y=D,D}function S(D){for(var Z=w(),K=0;K<Z.length;K++)if(D.modn(Z[K])===0)return D.cmpn(Z[K])===0;return!0}function E(D){var Z=r.mont(D);return f.toRed(Z).redPow(D.subn(1)).fromRed().cmpn(1)===0}function I(D,Z){if(D<16)return new r(Z===2||Z===5?[140,123]:[140,39]);var K,z;for(Z=new r(Z);;){for(K=new r(o(Math.ceil(D/8)));K.bitLength()>D;)K.ishrn(1);if(K.isEven()&&K.iadd(n),K.testn(1)||K.iadd(f),Z.cmp(f)){if(!Z.cmp(h))for(;K.mod(p).cmp(g);)K.iadd(x)}else for(;K.mod(c).cmp(v);)K.iadd(x);if(S(z=K.shrn(1))&&S(K)&&E(z)&&E(K)&&l.test(z)&&l.test(K))return K}}},{"bn.js":404,"miller-rabin":451,randombytes:475}],403:[function(t,s,u){s.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],404:[function(t,s,u){arguments[4][184][0].apply(u,arguments)},{buffer:188,dup:184}],405:[function(t,s,u){var o=u;o.version=t("../package.json").version,o.utils=t("./elliptic/utils"),o.rand=t("brorand"),o.curve=t("./elliptic/curve"),o.curves=t("./elliptic/curves"),o.ec=t("./elliptic/ec"),o.eddsa=t("./elliptic/eddsa")},{"../package.json":421,"./elliptic/curve":408,"./elliptic/curves":411,"./elliptic/ec":412,"./elliptic/eddsa":415,"./elliptic/utils":419,brorand:187}],406:[function(t,s,u){var o=t("bn.js"),r=t("../utils"),c=r.getNAF,l=r.getJSF,n=r.assert;function f(p,g){this.type=p,this.p=new o(g.p,16),this.red=g.prime?o.red(g.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=g.n&&new o(g.n,16),this.g=g.g&&this.pointFromJSON(g.g,g.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var v=this.n&&this.p.div(this.n);!v||v.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function h(p,g){this.curve=p,this.type=g,this.precomputed=null}s.exports=f,f.prototype.point=function(){throw new Error("Not implemented")},f.prototype.validate=function(){throw new Error("Not implemented")},f.prototype._fixedNafMul=function(p,g){n(p.precomputed);var v=p._getDoubles(),x=c(g,1,this._bitLength),y=(1<<v.step+1)-(v.step%2==0?2:1);y/=3;var w,S,E=[];for(w=0;w<x.length;w+=v.step){S=0;for(var I=w+v.step-1;I>=w;I--)S=(S<<1)+x[I];E.push(S)}for(var D=this.jpoint(null,null,null),Z=this.jpoint(null,null,null),K=y;K>0;K--){for(w=0;w<E.length;w++)(S=E[w])===K?Z=Z.mixedAdd(v.points[w]):S===-K&&(Z=Z.mixedAdd(v.points[w].neg()));D=D.add(Z)}return D.toP()},f.prototype._wnafMul=function(p,g){var v=4,x=p._getNAFPoints(v);v=x.wnd;for(var y=x.points,w=c(g,v,this._bitLength),S=this.jpoint(null,null,null),E=w.length-1;E>=0;E--){for(var I=0;E>=0&&w[E]===0;E--)I++;if(E>=0&&I++,S=S.dblp(I),E<0)break;var D=w[E];n(D!==0),S=p.type==="affine"?D>0?S.mixedAdd(y[D-1>>1]):S.mixedAdd(y[-D-1>>1].neg()):D>0?S.add(y[D-1>>1]):S.add(y[-D-1>>1].neg())}return p.type==="affine"?S.toP():S},f.prototype._wnafMulAdd=function(p,g,v,x,y){var w,S,E,I=this._wnafT1,D=this._wnafT2,Z=this._wnafT3,K=0;for(w=0;w<x;w++){var z=(E=g[w])._getNAFPoints(p);I[w]=z.wnd,D[w]=z.points}for(w=x-1;w>=1;w-=2){var W=w-1,Q=w;if(I[W]===1&&I[Q]===1){var rt=[g[W],null,null,g[Q]];g[W].y.cmp(g[Q].y)===0?(rt[1]=g[W].add(g[Q]),rt[2]=g[W].toJ().mixedAdd(g[Q].neg())):g[W].y.cmp(g[Q].y.redNeg())===0?(rt[1]=g[W].toJ().mixedAdd(g[Q]),rt[2]=g[W].add(g[Q].neg())):(rt[1]=g[W].toJ().mixedAdd(g[Q]),rt[2]=g[W].toJ().mixedAdd(g[Q].neg()));var tt=[-3,-1,-5,-7,0,7,5,1,3],j=l(v[W],v[Q]);for(K=Math.max(j[0].length,K),Z[W]=new Array(K),Z[Q]=new Array(K),S=0;S<K;S++){var F=0|j[0][S],R=0|j[1][S];Z[W][S]=tt[3*(F+1)+(R+1)],Z[Q][S]=0,D[W]=rt}}else Z[W]=c(v[W],I[W],this._bitLength),Z[Q]=c(v[Q],I[Q],this._bitLength),K=Math.max(Z[W].length,K),K=Math.max(Z[Q].length,K)}var T=this.jpoint(null,null,null),C=this._wnafT4;for(w=K;w>=0;w--){for(var k=0;w>=0;){var M=!0;for(S=0;S<x;S++)C[S]=0|Z[S][w],C[S]!==0&&(M=!1);if(!M)break;k++,w--}if(w>=0&&k++,T=T.dblp(k),w<0)break;for(S=0;S<x;S++){var O=C[S];O!==0&&(O>0?E=D[S][O-1>>1]:O<0&&(E=D[S][-O-1>>1].neg()),T=E.type==="affine"?T.mixedAdd(E):T.add(E))}}for(w=0;w<x;w++)D[w]=null;return y?T:T.toP()},f.BasePoint=h,h.prototype.eq=function(){throw new Error("Not implemented")},h.prototype.validate=function(){return this.curve.validate(this)},f.prototype.decodePoint=function(p,g){p=r.toArray(p,g);var v=this.p.byteLength();if((p[0]===4||p[0]===6||p[0]===7)&&p.length-1==2*v)return p[0]===6?n(p[p.length-1]%2==0):p[0]===7&&n(p[p.length-1]%2==1),this.point(p.slice(1,1+v),p.slice(1+v,1+2*v));if((p[0]===2||p[0]===3)&&p.length-1===v)return this.pointFromX(p.slice(1,1+v),p[0]===3);throw new Error("Unknown point format")},h.prototype.encodeCompressed=function(p){return this.encode(p,!0)},h.prototype._encode=function(p){var g=this.curve.p.byteLength(),v=this.getX().toArray("be",g);return p?[this.getY().isEven()?2:3].concat(v):[4].concat(v,this.getY().toArray("be",g))},h.prototype.encode=function(p,g){return r.encode(this._encode(g),p)},h.prototype.precompute=function(p){if(this.precomputed)return this;var g={doubles:null,naf:null,beta:null};return g.naf=this._getNAFPoints(8),g.doubles=this._getDoubles(4,p),g.beta=this._getBeta(),this.precomputed=g,this},h.prototype._hasDoubles=function(p){if(!this.precomputed)return!1;var g=this.precomputed.doubles;return!!g&&g.points.length>=Math.ceil((p.bitLength()+1)/g.step)},h.prototype._getDoubles=function(p,g){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var v=[this],x=this,y=0;y<g;y+=p){for(var w=0;w<p;w++)x=x.dbl();v.push(x)}return{step:p,points:v}},h.prototype._getNAFPoints=function(p){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var g=[this],v=(1<<p)-1,x=v===1?null:this.dbl(),y=1;y<v;y++)g[y]=g[y-1].add(x);return{wnd:p,points:g}},h.prototype._getBeta=function(){return null},h.prototype.dblp=function(p){for(var g=this,v=0;v<p;v++)g=g.dbl();return g}},{"../utils":419,"bn.js":420}],407:[function(t,s,u){var o=t("../utils"),r=t("bn.js"),c=t("inherits"),l=t("./base"),n=o.assert;function f(p){this.twisted=(0|p.a)!=1,this.mOneA=this.twisted&&(0|p.a)==-1,this.extended=this.mOneA,l.call(this,"edwards",p),this.a=new r(p.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(p.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(p.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),n(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(0|p.c)==1}function h(p,g,v,x,y){l.BasePoint.call(this,p,"projective"),g===null&&v===null&&x===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(g,16),this.y=new r(v,16),this.z=x?new r(x,16):this.curve.one,this.t=y&&new r(y,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}c(f,l),s.exports=f,f.prototype._mulA=function(p){return this.mOneA?p.redNeg():this.a.redMul(p)},f.prototype._mulC=function(p){return this.oneC?p:this.c.redMul(p)},f.prototype.jpoint=function(p,g,v,x){return this.point(p,g,v,x)},f.prototype.pointFromX=function(p,g){(p=new r(p,16)).red||(p=p.toRed(this.red));var v=p.redSqr(),x=this.c2.redSub(this.a.redMul(v)),y=this.one.redSub(this.c2.redMul(this.d).redMul(v)),w=x.redMul(y.redInvm()),S=w.redSqrt();if(S.redSqr().redSub(w).cmp(this.zero)!==0)throw new Error("invalid point");var E=S.fromRed().isOdd();return(g&&!E||!g&&E)&&(S=S.redNeg()),this.point(p,S)},f.prototype.pointFromY=function(p,g){(p=new r(p,16)).red||(p=p.toRed(this.red));var v=p.redSqr(),x=v.redSub(this.c2),y=v.redMul(this.d).redMul(this.c2).redSub(this.a),w=x.redMul(y.redInvm());if(w.cmp(this.zero)===0){if(g)throw new Error("invalid point");return this.point(this.zero,p)}var S=w.redSqrt();if(S.redSqr().redSub(w).cmp(this.zero)!==0)throw new Error("invalid point");return S.fromRed().isOdd()!==g&&(S=S.redNeg()),this.point(S,p)},f.prototype.validate=function(p){if(p.isInfinity())return!0;p.normalize();var g=p.x.redSqr(),v=p.y.redSqr(),x=g.redMul(this.a).redAdd(v),y=this.c2.redMul(this.one.redAdd(this.d.redMul(g).redMul(v)));return x.cmp(y)===0},c(h,l.BasePoint),f.prototype.pointFromJSON=function(p){return h.fromJSON(this,p)},f.prototype.point=function(p,g,v,x){return new h(this,p,g,v,x)},h.fromJSON=function(p,g){return new h(p,g[0],g[1],g[2])},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},h.prototype._extDbl=function(){var p=this.x.redSqr(),g=this.y.redSqr(),v=this.z.redSqr();v=v.redIAdd(v);var x=this.curve._mulA(p),y=this.x.redAdd(this.y).redSqr().redISub(p).redISub(g),w=x.redAdd(g),S=w.redSub(v),E=x.redSub(g),I=y.redMul(S),D=w.redMul(E),Z=y.redMul(E),K=S.redMul(w);return this.curve.point(I,D,K,Z)},h.prototype._projDbl=function(){var p,g,v,x,y,w,S=this.x.redAdd(this.y).redSqr(),E=this.x.redSqr(),I=this.y.redSqr();if(this.curve.twisted){var D=(x=this.curve._mulA(E)).redAdd(I);this.zOne?(p=S.redSub(E).redSub(I).redMul(D.redSub(this.curve.two)),g=D.redMul(x.redSub(I)),v=D.redSqr().redSub(D).redSub(D)):(y=this.z.redSqr(),w=D.redSub(y).redISub(y),p=S.redSub(E).redISub(I).redMul(w),g=D.redMul(x.redSub(I)),v=D.redMul(w))}else x=E.redAdd(I),y=this.curve._mulC(this.z).redSqr(),w=x.redSub(y).redSub(y),p=this.curve._mulC(S.redISub(x)).redMul(w),g=this.curve._mulC(x).redMul(E.redISub(I)),v=x.redMul(w);return this.curve.point(p,g,v)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},h.prototype._extAdd=function(p){var g=this.y.redSub(this.x).redMul(p.y.redSub(p.x)),v=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x)),x=this.t.redMul(this.curve.dd).redMul(p.t),y=this.z.redMul(p.z.redAdd(p.z)),w=v.redSub(g),S=y.redSub(x),E=y.redAdd(x),I=v.redAdd(g),D=w.redMul(S),Z=E.redMul(I),K=w.redMul(I),z=S.redMul(E);return this.curve.point(D,Z,z,K)},h.prototype._projAdd=function(p){var g,v,x=this.z.redMul(p.z),y=x.redSqr(),w=this.x.redMul(p.x),S=this.y.redMul(p.y),E=this.curve.d.redMul(w).redMul(S),I=y.redSub(E),D=y.redAdd(E),Z=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(w).redISub(S),K=x.redMul(I).redMul(Z);return this.curve.twisted?(g=x.redMul(D).redMul(S.redSub(this.curve._mulA(w))),v=I.redMul(D)):(g=x.redMul(D).redMul(S.redSub(w)),v=this.curve._mulC(I).redMul(D)),this.curve.point(K,g,v)},h.prototype.add=function(p){return this.isInfinity()?p:p.isInfinity()?this:this.curve.extended?this._extAdd(p):this._projAdd(p)},h.prototype.mul=function(p){return this._hasDoubles(p)?this.curve._fixedNafMul(this,p):this.curve._wnafMul(this,p)},h.prototype.mulAdd=function(p,g,v){return this.curve._wnafMulAdd(1,[this,g],[p,v],2,!1)},h.prototype.jmulAdd=function(p,g,v){return this.curve._wnafMulAdd(1,[this,g],[p,v],2,!0)},h.prototype.normalize=function(){if(this.zOne)return this;var p=this.z.redInvm();return this.x=this.x.redMul(p),this.y=this.y.redMul(p),this.t&&(this.t=this.t.redMul(p)),this.z=this.curve.one,this.zOne=!0,this},h.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()},h.prototype.getY=function(){return this.normalize(),this.y.fromRed()},h.prototype.eq=function(p){return this===p||this.getX().cmp(p.getX())===0&&this.getY().cmp(p.getY())===0},h.prototype.eqXToP=function(p){var g=p.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(g)===0)return!0;for(var v=p.clone(),x=this.curve.redN.redMul(this.z);;){if(v.iadd(this.curve.n),v.cmp(this.curve.p)>=0)return!1;if(g.redIAdd(x),this.x.cmp(g)===0)return!0}},h.prototype.toP=h.prototype.normalize,h.prototype.mixedAdd=h.prototype.add},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],408:[function(t,s,u){var o=u;o.base=t("./base"),o.short=t("./short"),o.mont=t("./mont"),o.edwards=t("./edwards")},{"./base":406,"./edwards":407,"./mont":409,"./short":410}],409:[function(t,s,u){var o=t("bn.js"),r=t("inherits"),c=t("./base"),l=t("../utils");function n(h){c.call(this,"mont",h),this.a=new o(h.a,16).toRed(this.red),this.b=new o(h.b,16).toRed(this.red),this.i4=new o(4).toRed(this.red).redInvm(),this.two=new o(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function f(h,p,g){c.BasePoint.call(this,h,"projective"),p===null&&g===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new o(p,16),this.z=new o(g,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}r(n,c),s.exports=n,n.prototype.validate=function(h){var p=h.normalize().x,g=p.redSqr(),v=g.redMul(p).redAdd(g.redMul(this.a)).redAdd(p);return v.redSqrt().redSqr().cmp(v)===0},r(f,c.BasePoint),n.prototype.decodePoint=function(h,p){return this.point(l.toArray(h,p),1)},n.prototype.point=function(h,p){return new f(this,h,p)},n.prototype.pointFromJSON=function(h){return f.fromJSON(this,h)},f.prototype.precompute=function(){},f.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},f.fromJSON=function(h,p){return new f(h,p[0],p[1]||h.one)},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.z.cmpn(0)===0},f.prototype.dbl=function(){var h=this.x.redAdd(this.z).redSqr(),p=this.x.redSub(this.z).redSqr(),g=h.redSub(p),v=h.redMul(p),x=g.redMul(p.redAdd(this.curve.a24.redMul(g)));return this.curve.point(v,x)},f.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.diffAdd=function(h,p){var g=this.x.redAdd(this.z),v=this.x.redSub(this.z),x=h.x.redAdd(h.z),y=h.x.redSub(h.z).redMul(g),w=x.redMul(v),S=p.z.redMul(y.redAdd(w).redSqr()),E=p.x.redMul(y.redISub(w).redSqr());return this.curve.point(S,E)},f.prototype.mul=function(h){for(var p=h.clone(),g=this,v=this.curve.point(null,null),x=[];p.cmpn(0)!==0;p.iushrn(1))x.push(p.andln(1));for(var y=x.length-1;y>=0;y--)x[y]===0?(g=g.diffAdd(v,this),v=v.dbl()):(v=g.diffAdd(v,this),g=g.dbl());return v},f.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.eq=function(h){return this.getX().cmp(h.getX())===0},f.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},f.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],410:[function(t,s,u){var o=t("../utils"),r=t("bn.js"),c=t("inherits"),l=t("./base"),n=o.assert;function f(g){l.call(this,"short",g),this.a=new r(g.a,16).toRed(this.red),this.b=new r(g.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(g),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function h(g,v,x,y){l.BasePoint.call(this,g,"affine"),v===null&&x===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(v,16),this.y=new r(x,16),y&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function p(g,v,x,y){l.BasePoint.call(this,g,"jacobian"),v===null&&x===null&&y===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(v,16),this.y=new r(x,16),this.z=new r(y,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}c(f,l),s.exports=f,f.prototype._getEndomorphism=function(g){if(this.zeroA&&this.g&&this.n&&this.p.modn(3)===1){var v,x;if(g.beta)v=new r(g.beta,16).toRed(this.red);else{var y=this._getEndoRoots(this.p);v=(v=y[0].cmp(y[1])<0?y[0]:y[1]).toRed(this.red)}if(g.lambda)x=new r(g.lambda,16);else{var w=this._getEndoRoots(this.n);this.g.mul(w[0]).x.cmp(this.g.x.redMul(v))===0?x=w[0]:(x=w[1],n(this.g.mul(x).x.cmp(this.g.x.redMul(v))===0))}return{beta:v,lambda:x,basis:g.basis?g.basis.map((function(S){return{a:new r(S.a,16),b:new r(S.b,16)}})):this._getEndoBasis(x)}}},f.prototype._getEndoRoots=function(g){var v=g===this.p?this.red:r.mont(g),x=new r(2).toRed(v).redInvm(),y=x.redNeg(),w=new r(3).toRed(v).redNeg().redSqrt().redMul(x);return[y.redAdd(w).fromRed(),y.redSub(w).fromRed()]},f.prototype._getEndoBasis=function(g){for(var v,x,y,w,S,E,I,D,Z,K=this.n.ushrn(Math.floor(this.n.bitLength()/2)),z=g,W=this.n.clone(),Q=new r(1),rt=new r(0),tt=new r(0),j=new r(1),F=0;z.cmpn(0)!==0;){var R=W.div(z);D=W.sub(R.mul(z)),Z=tt.sub(R.mul(Q));var T=j.sub(R.mul(rt));if(!y&&D.cmp(K)<0)v=I.neg(),x=Q,y=D.neg(),w=Z;else if(y&&++F==2)break;I=D,W=z,z=D,tt=Q,Q=Z,j=rt,rt=T}S=D.neg(),E=Z;var C=y.sqr().add(w.sqr());return S.sqr().add(E.sqr()).cmp(C)>=0&&(S=v,E=x),y.negative&&(y=y.neg(),w=w.neg()),S.negative&&(S=S.neg(),E=E.neg()),[{a:y,b:w},{a:S,b:E}]},f.prototype._endoSplit=function(g){var v=this.endo.basis,x=v[0],y=v[1],w=y.b.mul(g).divRound(this.n),S=x.b.neg().mul(g).divRound(this.n),E=w.mul(x.a),I=S.mul(y.a),D=w.mul(x.b),Z=S.mul(y.b);return{k1:g.sub(E).sub(I),k2:D.add(Z).neg()}},f.prototype.pointFromX=function(g,v){(g=new r(g,16)).red||(g=g.toRed(this.red));var x=g.redSqr().redMul(g).redIAdd(g.redMul(this.a)).redIAdd(this.b),y=x.redSqrt();if(y.redSqr().redSub(x).cmp(this.zero)!==0)throw new Error("invalid point");var w=y.fromRed().isOdd();return(v&&!w||!v&&w)&&(y=y.redNeg()),this.point(g,y)},f.prototype.validate=function(g){if(g.inf)return!0;var v=g.x,x=g.y,y=this.a.redMul(v),w=v.redSqr().redMul(v).redIAdd(y).redIAdd(this.b);return x.redSqr().redISub(w).cmpn(0)===0},f.prototype._endoWnafMulAdd=function(g,v,x){for(var y=this._endoWnafT1,w=this._endoWnafT2,S=0;S<g.length;S++){var E=this._endoSplit(v[S]),I=g[S],D=I._getBeta();E.k1.negative&&(E.k1.ineg(),I=I.neg(!0)),E.k2.negative&&(E.k2.ineg(),D=D.neg(!0)),y[2*S]=I,y[2*S+1]=D,w[2*S]=E.k1,w[2*S+1]=E.k2}for(var Z=this._wnafMulAdd(1,y,w,2*S,x),K=0;K<2*S;K++)y[K]=null,w[K]=null;return Z},c(h,l.BasePoint),f.prototype.point=function(g,v,x){return new h(this,g,v,x)},f.prototype.pointFromJSON=function(g,v){return h.fromJSON(this,g,v)},h.prototype._getBeta=function(){if(this.curve.endo){var g=this.precomputed;if(g&&g.beta)return g.beta;var v=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(g){var x=this.curve,y=function(w){return x.point(w.x.redMul(x.endo.beta),w.y)};g.beta=v,v.precomputed={beta:null,naf:g.naf&&{wnd:g.naf.wnd,points:g.naf.points.map(y)},doubles:g.doubles&&{step:g.doubles.step,points:g.doubles.points.map(y)}}}return v}},h.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},h.fromJSON=function(g,v,x){typeof v=="string"&&(v=JSON.parse(v));var y=g.point(v[0],v[1],x);if(!v[2])return y;function w(E){return g.point(E[0],E[1],x)}var S=v[2];return y.precomputed={beta:null,doubles:S.doubles&&{step:S.doubles.step,points:[y].concat(S.doubles.points.map(w))},naf:S.naf&&{wnd:S.naf.wnd,points:[y].concat(S.naf.points.map(w))}},y},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return this.inf},h.prototype.add=function(g){if(this.inf)return g;if(g.inf)return this;if(this.eq(g))return this.dbl();if(this.neg().eq(g))return this.curve.point(null,null);if(this.x.cmp(g.x)===0)return this.curve.point(null,null);var v=this.y.redSub(g.y);v.cmpn(0)!==0&&(v=v.redMul(this.x.redSub(g.x).redInvm()));var x=v.redSqr().redISub(this.x).redISub(g.x),y=v.redMul(this.x.redSub(x)).redISub(this.y);return this.curve.point(x,y)},h.prototype.dbl=function(){if(this.inf)return this;var g=this.y.redAdd(this.y);if(g.cmpn(0)===0)return this.curve.point(null,null);var v=this.curve.a,x=this.x.redSqr(),y=g.redInvm(),w=x.redAdd(x).redIAdd(x).redIAdd(v).redMul(y),S=w.redSqr().redISub(this.x.redAdd(this.x)),E=w.redMul(this.x.redSub(S)).redISub(this.y);return this.curve.point(S,E)},h.prototype.getX=function(){return this.x.fromRed()},h.prototype.getY=function(){return this.y.fromRed()},h.prototype.mul=function(g){return g=new r(g,16),this.isInfinity()?this:this._hasDoubles(g)?this.curve._fixedNafMul(this,g):this.curve.endo?this.curve._endoWnafMulAdd([this],[g]):this.curve._wnafMul(this,g)},h.prototype.mulAdd=function(g,v,x){var y=[this,v],w=[g,x];return this.curve.endo?this.curve._endoWnafMulAdd(y,w):this.curve._wnafMulAdd(1,y,w,2)},h.prototype.jmulAdd=function(g,v,x){var y=[this,v],w=[g,x];return this.curve.endo?this.curve._endoWnafMulAdd(y,w,!0):this.curve._wnafMulAdd(1,y,w,2,!0)},h.prototype.eq=function(g){return this===g||this.inf===g.inf&&(this.inf||this.x.cmp(g.x)===0&&this.y.cmp(g.y)===0)},h.prototype.neg=function(g){if(this.inf)return this;var v=this.curve.point(this.x,this.y.redNeg());if(g&&this.precomputed){var x=this.precomputed,y=function(w){return w.neg()};v.precomputed={naf:x.naf&&{wnd:x.naf.wnd,points:x.naf.points.map(y)},doubles:x.doubles&&{step:x.doubles.step,points:x.doubles.points.map(y)}}}return v},h.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},c(p,l.BasePoint),f.prototype.jpoint=function(g,v,x){return new p(this,g,v,x)},p.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var g=this.z.redInvm(),v=g.redSqr(),x=this.x.redMul(v),y=this.y.redMul(v).redMul(g);return this.curve.point(x,y)},p.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},p.prototype.add=function(g){if(this.isInfinity())return g;if(g.isInfinity())return this;var v=g.z.redSqr(),x=this.z.redSqr(),y=this.x.redMul(v),w=g.x.redMul(x),S=this.y.redMul(v.redMul(g.z)),E=g.y.redMul(x.redMul(this.z)),I=y.redSub(w),D=S.redSub(E);if(I.cmpn(0)===0)return D.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var Z=I.redSqr(),K=Z.redMul(I),z=y.redMul(Z),W=D.redSqr().redIAdd(K).redISub(z).redISub(z),Q=D.redMul(z.redISub(W)).redISub(S.redMul(K)),rt=this.z.redMul(g.z).redMul(I);return this.curve.jpoint(W,Q,rt)},p.prototype.mixedAdd=function(g){if(this.isInfinity())return g.toJ();if(g.isInfinity())return this;var v=this.z.redSqr(),x=this.x,y=g.x.redMul(v),w=this.y,S=g.y.redMul(v).redMul(this.z),E=x.redSub(y),I=w.redSub(S);if(E.cmpn(0)===0)return I.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var D=E.redSqr(),Z=D.redMul(E),K=x.redMul(D),z=I.redSqr().redIAdd(Z).redISub(K).redISub(K),W=I.redMul(K.redISub(z)).redISub(w.redMul(Z)),Q=this.z.redMul(E);return this.curve.jpoint(z,W,Q)},p.prototype.dblp=function(g){if(g===0)return this;if(this.isInfinity())return this;if(!g)return this.dbl();var v;if(this.curve.zeroA||this.curve.threeA){var x=this;for(v=0;v<g;v++)x=x.dbl();return x}var y=this.curve.a,w=this.curve.tinv,S=this.x,E=this.y,I=this.z,D=I.redSqr().redSqr(),Z=E.redAdd(E);for(v=0;v<g;v++){var K=S.redSqr(),z=Z.redSqr(),W=z.redSqr(),Q=K.redAdd(K).redIAdd(K).redIAdd(y.redMul(D)),rt=S.redMul(z),tt=Q.redSqr().redISub(rt.redAdd(rt)),j=rt.redISub(tt),F=Q.redMul(j);F=F.redIAdd(F).redISub(W);var R=Z.redMul(I);v+1<g&&(D=D.redMul(W)),S=tt,I=R,Z=F}return this.curve.jpoint(S,Z.redMul(w),I)},p.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},p.prototype._zeroDbl=function(){var g,v,x;if(this.zOne){var y=this.x.redSqr(),w=this.y.redSqr(),S=w.redSqr(),E=this.x.redAdd(w).redSqr().redISub(y).redISub(S);E=E.redIAdd(E);var I=y.redAdd(y).redIAdd(y),D=I.redSqr().redISub(E).redISub(E),Z=S.redIAdd(S);Z=(Z=Z.redIAdd(Z)).redIAdd(Z),g=D,v=I.redMul(E.redISub(D)).redISub(Z),x=this.y.redAdd(this.y)}else{var K=this.x.redSqr(),z=this.y.redSqr(),W=z.redSqr(),Q=this.x.redAdd(z).redSqr().redISub(K).redISub(W);Q=Q.redIAdd(Q);var rt=K.redAdd(K).redIAdd(K),tt=rt.redSqr(),j=W.redIAdd(W);j=(j=j.redIAdd(j)).redIAdd(j),g=tt.redISub(Q).redISub(Q),v=rt.redMul(Q.redISub(g)).redISub(j),x=(x=this.y.redMul(this.z)).redIAdd(x)}return this.curve.jpoint(g,v,x)},p.prototype._threeDbl=function(){var g,v,x;if(this.zOne){var y=this.x.redSqr(),w=this.y.redSqr(),S=w.redSqr(),E=this.x.redAdd(w).redSqr().redISub(y).redISub(S);E=E.redIAdd(E);var I=y.redAdd(y).redIAdd(y).redIAdd(this.curve.a),D=I.redSqr().redISub(E).redISub(E);g=D;var Z=S.redIAdd(S);Z=(Z=Z.redIAdd(Z)).redIAdd(Z),v=I.redMul(E.redISub(D)).redISub(Z),x=this.y.redAdd(this.y)}else{var K=this.z.redSqr(),z=this.y.redSqr(),W=this.x.redMul(z),Q=this.x.redSub(K).redMul(this.x.redAdd(K));Q=Q.redAdd(Q).redIAdd(Q);var rt=W.redIAdd(W),tt=(rt=rt.redIAdd(rt)).redAdd(rt);g=Q.redSqr().redISub(tt),x=this.y.redAdd(this.z).redSqr().redISub(z).redISub(K);var j=z.redSqr();j=(j=(j=j.redIAdd(j)).redIAdd(j)).redIAdd(j),v=Q.redMul(rt.redISub(g)).redISub(j)}return this.curve.jpoint(g,v,x)},p.prototype._dbl=function(){var g=this.curve.a,v=this.x,x=this.y,y=this.z,w=y.redSqr().redSqr(),S=v.redSqr(),E=x.redSqr(),I=S.redAdd(S).redIAdd(S).redIAdd(g.redMul(w)),D=v.redAdd(v),Z=(D=D.redIAdd(D)).redMul(E),K=I.redSqr().redISub(Z.redAdd(Z)),z=Z.redISub(K),W=E.redSqr();W=(W=(W=W.redIAdd(W)).redIAdd(W)).redIAdd(W);var Q=I.redMul(z).redISub(W),rt=x.redAdd(x).redMul(y);return this.curve.jpoint(K,Q,rt)},p.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var g=this.x.redSqr(),v=this.y.redSqr(),x=this.z.redSqr(),y=v.redSqr(),w=g.redAdd(g).redIAdd(g),S=w.redSqr(),E=this.x.redAdd(v).redSqr().redISub(g).redISub(y),I=(E=(E=(E=E.redIAdd(E)).redAdd(E).redIAdd(E)).redISub(S)).redSqr(),D=y.redIAdd(y);D=(D=(D=D.redIAdd(D)).redIAdd(D)).redIAdd(D);var Z=w.redIAdd(E).redSqr().redISub(S).redISub(I).redISub(D),K=v.redMul(Z);K=(K=K.redIAdd(K)).redIAdd(K);var z=this.x.redMul(I).redISub(K);z=(z=z.redIAdd(z)).redIAdd(z);var W=this.y.redMul(Z.redMul(D.redISub(Z)).redISub(E.redMul(I)));W=(W=(W=W.redIAdd(W)).redIAdd(W)).redIAdd(W);var Q=this.z.redAdd(E).redSqr().redISub(x).redISub(I);return this.curve.jpoint(z,W,Q)},p.prototype.mul=function(g,v){return g=new r(g,v),this.curve._wnafMul(this,g)},p.prototype.eq=function(g){if(g.type==="affine")return this.eq(g.toJ());if(this===g)return!0;var v=this.z.redSqr(),x=g.z.redSqr();if(this.x.redMul(x).redISub(g.x.redMul(v)).cmpn(0)!==0)return!1;var y=v.redMul(this.z),w=x.redMul(g.z);return this.y.redMul(w).redISub(g.y.redMul(y)).cmpn(0)===0},p.prototype.eqXToP=function(g){var v=this.z.redSqr(),x=g.toRed(this.curve.red).redMul(v);if(this.x.cmp(x)===0)return!0;for(var y=g.clone(),w=this.curve.redN.redMul(v);;){if(y.iadd(this.curve.n),y.cmp(this.curve.p)>=0)return!1;if(x.redIAdd(w),this.x.cmp(x)===0)return!0}},p.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},p.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":419,"./base":406,"bn.js":420,inherits:440}],411:[function(t,s,u){var o,r=u,c=t("hash.js"),l=t("./curve"),n=t("./utils").assert;function f(p){p.type==="short"?this.curve=new l.short(p):p.type==="edwards"?this.curve=new l.edwards(p):this.curve=new l.mont(p),this.g=this.curve.g,this.n=this.curve.n,this.hash=p.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function h(p,g){Object.defineProperty(r,p,{configurable:!0,enumerable:!0,get:function(){var v=new f(g);return Object.defineProperty(r,p,{configurable:!0,enumerable:!0,value:v}),v}})}r.PresetCurve=f,h("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:c.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),h("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:c.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),h("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:c.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),h("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:c.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),h("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:c.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),h("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:c.sha256,gRed:!1,g:["9"]}),h("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:c.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{o=t("./precomputed/secp256k1")}catch{o=void 0}h("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:c.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})},{"./curve":408,"./precomputed/secp256k1":418,"./utils":419,"hash.js":426}],412:[function(t,s,u){var o=t("bn.js"),r=t("hmac-drbg"),c=t("../utils"),l=t("../curves"),n=t("brorand"),f=c.assert,h=t("./key"),p=t("./signature");function g(v){if(!(this instanceof g))return new g(v);typeof v=="string"&&(f(Object.prototype.hasOwnProperty.call(l,v),"Unknown curve "+v),v=l[v]),v instanceof l.PresetCurve&&(v={curve:v}),this.curve=v.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=v.curve.g,this.g.precompute(v.curve.n.bitLength()+1),this.hash=v.hash||v.curve.hash}s.exports=g,g.prototype.keyPair=function(v){return new h(this,v)},g.prototype.keyFromPrivate=function(v,x){return h.fromPrivate(this,v,x)},g.prototype.keyFromPublic=function(v,x){return h.fromPublic(this,v,x)},g.prototype.genKeyPair=function(v){v||(v={});for(var x=new r({hash:this.hash,pers:v.pers,persEnc:v.persEnc||"utf8",entropy:v.entropy||n(this.hash.hmacStrength),entropyEnc:v.entropy&&v.entropyEnc||"utf8",nonce:this.n.toArray()}),y=this.n.byteLength(),w=this.n.sub(new o(2));;){var S=new o(x.generate(y));if(!(S.cmp(w)>0))return S.iaddn(1),this.keyFromPrivate(S)}},g.prototype._truncateToN=function(v,x){var y=8*v.byteLength()-this.n.bitLength();return y>0&&(v=v.ushrn(y)),!x&&v.cmp(this.n)>=0?v.sub(this.n):v},g.prototype.sign=function(v,x,y,w){typeof y=="object"&&(w=y,y=null),w||(w={}),x=this.keyFromPrivate(x,y),v=this._truncateToN(new o(v,16));for(var S=this.n.byteLength(),E=x.getPrivate().toArray("be",S),I=v.toArray("be",S),D=new r({hash:this.hash,entropy:E,nonce:I,pers:w.pers,persEnc:w.persEnc||"utf8"}),Z=this.n.sub(new o(1)),K=0;;K++){var z=w.k?w.k(K):new o(D.generate(this.n.byteLength()));if(!((z=this._truncateToN(z,!0)).cmpn(1)<=0||z.cmp(Z)>=0)){var W=this.g.mul(z);if(!W.isInfinity()){var Q=W.getX(),rt=Q.umod(this.n);if(rt.cmpn(0)!==0){var tt=z.invm(this.n).mul(rt.mul(x.getPrivate()).iadd(v));if((tt=tt.umod(this.n)).cmpn(0)!==0){var j=(W.getY().isOdd()?1:0)|(Q.cmp(rt)!==0?2:0);return w.canonical&&tt.cmp(this.nh)>0&&(tt=this.n.sub(tt),j^=1),new p({r:rt,s:tt,recoveryParam:j})}}}}}},g.prototype.verify=function(v,x,y,w){v=this._truncateToN(new o(v,16)),y=this.keyFromPublic(y,w);var S=(x=new p(x,"hex")).r,E=x.s;if(S.cmpn(1)<0||S.cmp(this.n)>=0||E.cmpn(1)<0||E.cmp(this.n)>=0)return!1;var I,D=E.invm(this.n),Z=D.mul(v).umod(this.n),K=D.mul(S).umod(this.n);return this.curve._maxwellTrick?!(I=this.g.jmulAdd(Z,y.getPublic(),K)).isInfinity()&&I.eqXToP(S):!(I=this.g.mulAdd(Z,y.getPublic(),K)).isInfinity()&&I.getX().umod(this.n).cmp(S)===0},g.prototype.recoverPubKey=function(v,x,y,w){f((3&y)===y,"The recovery param is more than two bits"),x=new p(x,w);var S=this.n,E=new o(v),I=x.r,D=x.s,Z=1&y,K=y>>1;if(I.cmp(this.curve.p.umod(this.curve.n))>=0&&K)throw new Error("Unable to find sencond key candinate");I=K?this.curve.pointFromX(I.add(this.curve.n),Z):this.curve.pointFromX(I,Z);var z=x.r.invm(S),W=S.sub(E).mul(z).umod(S),Q=D.mul(z).umod(S);return this.g.mulAdd(W,I,Q)},g.prototype.getKeyRecoveryParam=function(v,x,y,w){if((x=new p(x,w)).recoveryParam!==null)return x.recoveryParam;for(var S=0;S<4;S++){var E;try{E=this.recoverPubKey(v,x,S)}catch{continue}if(E.eq(y))return S}throw new Error("Unable to find valid recovery factor")}},{"../curves":411,"../utils":419,"./key":413,"./signature":414,"bn.js":420,brorand:187,"hmac-drbg":438}],413:[function(t,s,u){var o=t("bn.js"),r=t("../utils").assert;function c(l,n){this.ec=l,this.priv=null,this.pub=null,n.priv&&this._importPrivate(n.priv,n.privEnc),n.pub&&this._importPublic(n.pub,n.pubEnc)}s.exports=c,c.fromPublic=function(l,n,f){return n instanceof c?n:new c(l,{pub:n,pubEnc:f})},c.fromPrivate=function(l,n,f){return n instanceof c?n:new c(l,{priv:n,privEnc:f})},c.prototype.validate=function(){var l=this.getPublic();return l.isInfinity()?{result:!1,reason:"Invalid public key"}:l.validate()?l.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},c.prototype.getPublic=function(l,n){return typeof l=="string"&&(n=l,l=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,l):this.pub},c.prototype.getPrivate=function(l){return l==="hex"?this.priv.toString(16,2):this.priv},c.prototype._importPrivate=function(l,n){this.priv=new o(l,n||16),this.priv=this.priv.umod(this.ec.curve.n)},c.prototype._importPublic=function(l,n){if(l.x||l.y)return this.ec.curve.type==="mont"?r(l.x,"Need x coordinate"):this.ec.curve.type!=="short"&&this.ec.curve.type!=="edwards"||r(l.x&&l.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(l.x,l.y));this.pub=this.ec.curve.decodePoint(l,n)},c.prototype.derive=function(l){return l.validate()||r(l.validate(),"public point not validated"),l.mul(this.priv).getX()},c.prototype.sign=function(l,n,f){return this.ec.sign(l,this,n,f)},c.prototype.verify=function(l,n){return this.ec.verify(l,n,this)},c.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":419,"bn.js":420}],414:[function(t,s,u){var o=t("bn.js"),r=t("../utils"),c=r.assert;function l(g,v){if(g instanceof l)return g;this._importDER(g,v)||(c(g.r&&g.s,"Signature without r or s"),this.r=new o(g.r,16),this.s=new o(g.s,16),g.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=g.recoveryParam)}function n(){this.place=0}function f(g,v){var x=g[v.place++];if(!(128&x))return x;var y=15&x;if(y===0||y>4)return!1;for(var w=0,S=0,E=v.place;S<y;S++,E++)w<<=8,w|=g[E],w>>>=0;return!(w<=127)&&(v.place=E,w)}function h(g){for(var v=0,x=g.length-1;!g[v]&&!(128&g[v+1])&&v<x;)v++;return v===0?g:g.slice(v)}function p(g,v){if(v<128)g.push(v);else{var x=1+(Math.log(v)/Math.LN2>>>3);for(g.push(128|x);--x;)g.push(v>>>(x<<3)&255);g.push(v)}}s.exports=l,l.prototype._importDER=function(g,v){g=r.toArray(g,v);var x=new n;if(g[x.place++]!==48)return!1;var y=f(g,x);if(y===!1||y+x.place!==g.length||g[x.place++]!==2)return!1;var w=f(g,x);if(w===!1)return!1;var S=g.slice(x.place,w+x.place);if(x.place+=w,g[x.place++]!==2)return!1;var E=f(g,x);if(E===!1||g.length!==E+x.place)return!1;var I=g.slice(x.place,E+x.place);if(S[0]===0){if(!(128&S[1]))return!1;S=S.slice(1)}if(I[0]===0){if(!(128&I[1]))return!1;I=I.slice(1)}return this.r=new o(S),this.s=new o(I),this.recoveryParam=null,!0},l.prototype.toDER=function(g){var v=this.r.toArray(),x=this.s.toArray();for(128&v[0]&&(v=[0].concat(v)),128&x[0]&&(x=[0].concat(x)),v=h(v),x=h(x);!(x[0]||128&x[1]);)x=x.slice(1);var y=[2];p(y,v.length),(y=y.concat(v)).push(2),p(y,x.length);var w=y.concat(x),S=[48];return p(S,w.length),S=S.concat(w),r.encode(S,g)}},{"../utils":419,"bn.js":420}],415:[function(t,s,u){var o=t("hash.js"),r=t("../curves"),c=t("../utils"),l=c.assert,n=c.parseBytes,f=t("./key"),h=t("./signature");function p(g){if(l(g==="ed25519","only tested with ed25519 so far"),!(this instanceof p))return new p(g);g=r[g].curve,this.curve=g,this.g=g.g,this.g.precompute(g.n.bitLength()+1),this.pointClass=g.point().constructor,this.encodingLength=Math.ceil(g.n.bitLength()/8),this.hash=o.sha512}s.exports=p,p.prototype.sign=function(g,v){g=n(g);var x=this.keyFromSecret(v),y=this.hashInt(x.messagePrefix(),g),w=this.g.mul(y),S=this.encodePoint(w),E=this.hashInt(S,x.pubBytes(),g).mul(x.priv()),I=y.add(E).umod(this.curve.n);return this.makeSignature({R:w,S:I,Rencoded:S})},p.prototype.verify=function(g,v,x){g=n(g),v=this.makeSignature(v);var y=this.keyFromPublic(x),w=this.hashInt(v.Rencoded(),y.pubBytes(),g),S=this.g.mul(v.S());return v.R().add(y.pub().mul(w)).eq(S)},p.prototype.hashInt=function(){for(var g=this.hash(),v=0;v<arguments.length;v++)g.update(arguments[v]);return c.intFromLE(g.digest()).umod(this.curve.n)},p.prototype.keyFromPublic=function(g){return f.fromPublic(this,g)},p.prototype.keyFromSecret=function(g){return f.fromSecret(this,g)},p.prototype.makeSignature=function(g){return g instanceof h?g:new h(this,g)},p.prototype.encodePoint=function(g){var v=g.getY().toArray("le",this.encodingLength);return v[this.encodingLength-1]|=g.getX().isOdd()?128:0,v},p.prototype.decodePoint=function(g){var v=(g=c.parseBytes(g)).length-1,x=g.slice(0,v).concat(-129&g[v]),y=(128&g[v])!=0,w=c.intFromLE(x);return this.curve.pointFromY(w,y)},p.prototype.encodeInt=function(g){return g.toArray("le",this.encodingLength)},p.prototype.decodeInt=function(g){return c.intFromLE(g)},p.prototype.isPoint=function(g){return g instanceof this.pointClass}},{"../curves":411,"../utils":419,"./key":416,"./signature":417,"hash.js":426}],416:[function(t,s,u){var o=t("../utils"),r=o.assert,c=o.parseBytes,l=o.cachedProperty;function n(f,h){this.eddsa=f,this._secret=c(h.secret),f.isPoint(h.pub)?this._pub=h.pub:this._pubBytes=c(h.pub)}n.fromPublic=function(f,h){return h instanceof n?h:new n(f,{pub:h})},n.fromSecret=function(f,h){return h instanceof n?h:new n(f,{secret:h})},n.prototype.secret=function(){return this._secret},l(n,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),l(n,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),l(n,"privBytes",(function(){var f=this.eddsa,h=this.hash(),p=f.encodingLength-1,g=h.slice(0,f.encodingLength);return g[0]&=248,g[p]&=127,g[p]|=64,g})),l(n,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),l(n,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),l(n,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),n.prototype.sign=function(f){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(f,this)},n.prototype.verify=function(f,h){return this.eddsa.verify(f,h,this)},n.prototype.getSecret=function(f){return r(this._secret,"KeyPair is public only"),o.encode(this.secret(),f)},n.prototype.getPublic=function(f){return o.encode(this.pubBytes(),f)},s.exports=n},{"../utils":419}],417:[function(t,s,u){var o=t("bn.js"),r=t("../utils"),c=r.assert,l=r.cachedProperty,n=r.parseBytes;function f(h,p){this.eddsa=h,typeof p!="object"&&(p=n(p)),Array.isArray(p)&&(p={R:p.slice(0,h.encodingLength),S:p.slice(h.encodingLength)}),c(p.R&&p.S,"Signature without R or S"),h.isPoint(p.R)&&(this._R=p.R),p.S instanceof o&&(this._S=p.S),this._Rencoded=Array.isArray(p.R)?p.R:p.Rencoded,this._Sencoded=Array.isArray(p.S)?p.S:p.Sencoded}l(f,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),l(f,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),l(f,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),l(f,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),f.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},f.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},s.exports=f},{"../utils":419,"bn.js":420}],418:[function(t,s,u){s.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],419:[function(t,s,u){var o=u,r=t("bn.js"),c=t("minimalistic-assert"),l=t("minimalistic-crypto-utils");o.assert=c,o.toArray=l.toArray,o.zero2=l.zero2,o.toHex=l.toHex,o.encode=l.encode,o.getNAF=function(n,f,h){var p=new Array(Math.max(n.bitLength(),h)+1);p.fill(0);for(var g=1<<f+1,v=n.clone(),x=0;x<p.length;x++){var y,w=v.andln(g-1);v.isOdd()?(y=w>(g>>1)-1?(g>>1)-w:w,v.isubn(y)):y=0,p[x]=y,v.iushrn(1)}return p},o.getJSF=function(n,f){var h=[[],[]];n=n.clone(),f=f.clone();for(var p,g=0,v=0;n.cmpn(-g)>0||f.cmpn(-v)>0;){var x,y,w=n.andln(3)+g&3,S=f.andln(3)+v&3;w===3&&(w=-1),S===3&&(S=-1),x=(1&w)==0?0:(p=n.andln(7)+g&7)!==3&&p!==5||S!==2?w:-w,h[0].push(x),y=(1&S)==0?0:(p=f.andln(7)+v&7)!==3&&p!==5||w!==2?S:-S,h[1].push(y),2*g===x+1&&(g=1-g),2*v===y+1&&(v=1-v),n.iushrn(1),f.iushrn(1)}return h},o.cachedProperty=function(n,f,h){var p="_"+f;n.prototype[f]=function(){return this[p]!==void 0?this[p]:this[p]=h.call(this)}},o.parseBytes=function(n){return typeof n=="string"?o.toArray(n,"hex"):n},o.intFromLE=function(n){return new r(n,"hex","le")}},{"bn.js":420,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],420:[function(t,s,u){arguments[4][184][0].apply(u,arguments)},{buffer:188,dup:184}],421:[function(t,s,u){s.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],422:[function(t,s,u){var o=Object.create||function(z){var W=function(){};return W.prototype=z,new W},r=Object.keys||function(z){var W=[];for(var Q in z)Object.prototype.hasOwnProperty.call(z,Q)&&W.push(Q);return Q},c=Function.prototype.bind||function(z){var W=this;return function(){return W.apply(z,arguments)}};function l(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=o(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}s.exports=l,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._maxListeners=void 0;var n,f=10;try{var h={};Object.defineProperty&&Object.defineProperty(h,"x",{value:0}),n=h.x===0}catch{n=!1}function p(z){return z._maxListeners===void 0?l.defaultMaxListeners:z._maxListeners}function g(z,W,Q){if(W)z.call(Q);else for(var rt=z.length,tt=K(z,rt),j=0;j<rt;++j)tt[j].call(Q)}function v(z,W,Q,rt){if(W)z.call(Q,rt);else for(var tt=z.length,j=K(z,tt),F=0;F<tt;++F)j[F].call(Q,rt)}function x(z,W,Q,rt,tt){if(W)z.call(Q,rt,tt);else for(var j=z.length,F=K(z,j),R=0;R<j;++R)F[R].call(Q,rt,tt)}function y(z,W,Q,rt,tt,j){if(W)z.call(Q,rt,tt,j);else for(var F=z.length,R=K(z,F),T=0;T<F;++T)R[T].call(Q,rt,tt,j)}function w(z,W,Q,rt){if(W)z.apply(Q,rt);else for(var tt=z.length,j=K(z,tt),F=0;F<tt;++F)j[F].apply(Q,rt)}function S(z,W,Q,rt){var tt,j,F;if(typeof Q!="function")throw new TypeError('"listener" argument must be a function');if((j=z._events)?(j.newListener&&(z.emit("newListener",W,Q.listener?Q.listener:Q),j=z._events),F=j[W]):(j=z._events=o(null),z._eventsCount=0),F){if(typeof F=="function"?F=j[W]=rt?[Q,F]:[F,Q]:rt?F.unshift(Q):F.push(Q),!F.warned&&(tt=p(z))&&tt>0&&F.length>tt){F.warned=!0;var R=new Error("Possible EventEmitter memory leak detected. "+F.length+' "'+String(W)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');R.name="MaxListenersExceededWarning",R.emitter=z,R.type=W,R.count=F.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",R.name,R.message)}}else F=j[W]=Q,++z._eventsCount;return z}function E(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var z=new Array(arguments.length),W=0;W<z.length;++W)z[W]=arguments[W];this.listener.apply(this.target,z)}}function I(z,W,Q){var rt={fired:!1,wrapFn:void 0,target:z,type:W,listener:Q},tt=c.call(E,rt);return tt.listener=Q,rt.wrapFn=tt,tt}function D(z,W,Q){var rt=z._events;if(!rt)return[];var tt=rt[W];return tt?typeof tt=="function"?Q?[tt.listener||tt]:[tt]:Q?(function(j){for(var F=new Array(j.length),R=0;R<F.length;++R)F[R]=j[R].listener||j[R];return F})(tt):K(tt,tt.length):[]}function Z(z){var W=this._events;if(W){var Q=W[z];if(typeof Q=="function")return 1;if(Q)return Q.length}return 0}function K(z,W){for(var Q=new Array(W),rt=0;rt<W;++rt)Q[rt]=z[rt];return Q}n?Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(z){if(typeof z!="number"||z<0||z!=z)throw new TypeError('"defaultMaxListeners" must be a positive number');f=z}}):l.defaultMaxListeners=f,l.prototype.setMaxListeners=function(z){if(typeof z!="number"||z<0||isNaN(z))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=z,this},l.prototype.getMaxListeners=function(){return p(this)},l.prototype.emit=function(z){var W,Q,rt,tt,j,F,R=z==="error";if(F=this._events)R=R&&F.error==null;else if(!R)return!1;if(R){if(arguments.length>1&&(W=arguments[1]),W instanceof Error)throw W;var T=new Error('Unhandled "error" event. ('+W+")");throw T.context=W,T}if(!(Q=F[z]))return!1;var C=typeof Q=="function";switch(rt=arguments.length){case 1:g(Q,C,this);break;case 2:v(Q,C,this,arguments[1]);break;case 3:x(Q,C,this,arguments[1],arguments[2]);break;case 4:y(Q,C,this,arguments[1],arguments[2],arguments[3]);break;default:for(tt=new Array(rt-1),j=1;j<rt;j++)tt[j-1]=arguments[j];w(Q,C,this,tt)}return!0},l.prototype.addListener=function(z,W){return S(this,z,W,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(z,W){return S(this,z,W,!0)},l.prototype.once=function(z,W){if(typeof W!="function")throw new TypeError('"listener" argument must be a function');return this.on(z,I(this,z,W)),this},l.prototype.prependOnceListener=function(z,W){if(typeof W!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(z,I(this,z,W)),this},l.prototype.removeListener=function(z,W){var Q,rt,tt,j,F;if(typeof W!="function")throw new TypeError('"listener" argument must be a function');if(!(rt=this._events))return this;if(!(Q=rt[z]))return this;if(Q===W||Q.listener===W)--this._eventsCount==0?this._events=o(null):(delete rt[z],rt.removeListener&&this.emit("removeListener",z,Q.listener||W));else if(typeof Q!="function"){for(tt=-1,j=Q.length-1;j>=0;j--)if(Q[j]===W||Q[j].listener===W){F=Q[j].listener,tt=j;break}if(tt<0)return this;tt===0?Q.shift():(function(R,T){for(var C=T,k=C+1,M=R.length;k<M;C+=1,k+=1)R[C]=R[k];R.pop()})(Q,tt),Q.length===1&&(rt[z]=Q[0]),rt.removeListener&&this.emit("removeListener",z,F||W)}return this},l.prototype.removeAllListeners=function(z){var W,Q,rt;if(!(Q=this._events))return this;if(!Q.removeListener)return arguments.length===0?(this._events=o(null),this._eventsCount=0):Q[z]&&(--this._eventsCount==0?this._events=o(null):delete Q[z]),this;if(arguments.length===0){var tt,j=r(Q);for(rt=0;rt<j.length;++rt)(tt=j[rt])!=="removeListener"&&this.removeAllListeners(tt);return this.removeAllListeners("removeListener"),this._events=o(null),this._eventsCount=0,this}if(typeof(W=Q[z])=="function")this.removeListener(z,W);else if(W)for(rt=W.length-1;rt>=0;rt--)this.removeListener(z,W[rt]);return this},l.prototype.listeners=function(z){return D(this,z,!0)},l.prototype.rawListeners=function(z){return D(this,z,!1)},l.listenerCount=function(z,W){return typeof z.listenerCount=="function"?z.listenerCount(W):Z.call(z,W)},l.prototype.listenerCount=Z,l.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],423:[function(t,s,u){var o=t("safe-buffer").Buffer,r=t("md5.js");s.exports=function(c,l,n,f){if(o.isBuffer(c)||(c=o.from(c,"binary")),l&&(o.isBuffer(l)||(l=o.from(l,"binary")),l.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var h=n/8,p=o.alloc(h),g=o.alloc(f||0),v=o.alloc(0);h>0||f>0;){var x=new r;x.update(v),x.update(c),l&&x.update(l),v=x.digest();var y=0;if(h>0){var w=p.length-h;y=Math.min(h,v.length),v.copy(p,w,0,y),h-=y}if(y<v.length&&f>0){var S=g.length-f,E=Math.min(f,v.length-y);v.copy(g,S,y,y+E),f-=E}}return v.fill(0),{key:p,iv:g}}},{"md5.js":450,"safe-buffer":494}],424:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.CsvParserStream=u.ParserOptions=u.parseFile=u.parseStream=u.parseString=u.parse=u.FormatterOptions=u.CsvFormatterStream=u.writeToPath=u.writeToString=u.writeToBuffer=u.writeToStream=u.write=u.format=void 0;var o=t("@fast-csv/format");Object.defineProperty(u,"format",{enumerable:!0,get:function(){return o.format}}),Object.defineProperty(u,"write",{enumerable:!0,get:function(){return o.write}}),Object.defineProperty(u,"writeToStream",{enumerable:!0,get:function(){return o.writeToStream}}),Object.defineProperty(u,"writeToBuffer",{enumerable:!0,get:function(){return o.writeToBuffer}}),Object.defineProperty(u,"writeToString",{enumerable:!0,get:function(){return o.writeToString}}),Object.defineProperty(u,"writeToPath",{enumerable:!0,get:function(){return o.writeToPath}}),Object.defineProperty(u,"CsvFormatterStream",{enumerable:!0,get:function(){return o.CsvFormatterStream}}),Object.defineProperty(u,"FormatterOptions",{enumerable:!0,get:function(){return o.FormatterOptions}});var r=t("@fast-csv/parse");Object.defineProperty(u,"parse",{enumerable:!0,get:function(){return r.parse}}),Object.defineProperty(u,"parseString",{enumerable:!0,get:function(){return r.parseString}}),Object.defineProperty(u,"parseStream",{enumerable:!0,get:function(){return r.parseStream}}),Object.defineProperty(u,"parseFile",{enumerable:!0,get:function(){return r.parseFile}}),Object.defineProperty(u,"ParserOptions",{enumerable:!0,get:function(){return r.ParserOptions}}),Object.defineProperty(u,"CsvParserStream",{enumerable:!0,get:function(){return r.CsvParserStream}})},{"@fast-csv/format":151,"@fast-csv/parse":155}],425:[function(t,s,u){var o=t("safe-buffer").Buffer,r=t("readable-stream").Transform;function c(l){r.call(this),this._block=o.allocUnsafe(l),this._blockSize=l,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}t("inherits")(c,r),c.prototype._transform=function(l,n,f){var h=null;try{this.update(l,n)}catch(p){h=p}f(h)},c.prototype._flush=function(l){var n=null;try{this.push(this.digest())}catch(f){n=f}l(n)},c.prototype.update=function(l,n){if((function(x,y){if(!o.isBuffer(x)&&typeof x!="string")throw new TypeError(y+" must be a string or a buffer")})(l,"Data"),this._finalized)throw new Error("Digest already called");o.isBuffer(l)||(l=o.from(l,n));for(var f=this._block,h=0;this._blockOffset+l.length-h>=this._blockSize;){for(var p=this._blockOffset;p<this._blockSize;)f[p++]=l[h++];this._update(),this._blockOffset=0}for(;h<l.length;)f[this._blockOffset++]=l[h++];for(var g=0,v=8*l.length;v>0;++g)this._length[g]+=v,(v=this._length[g]/4294967296|0)>0&&(this._length[g]-=4294967296*v);return this},c.prototype._update=function(){throw new Error("_update is not implemented")},c.prototype.digest=function(l){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var n=this._digest();l!==void 0&&(n=n.toString(l)),this._block.fill(0),this._blockOffset=0;for(var f=0;f<4;++f)this._length[f]=0;return n},c.prototype._digest=function(){throw new Error("_digest is not implemented")},s.exports=c},{inherits:440,"readable-stream":491,"safe-buffer":494}],426:[function(t,s,u){var o=u;o.utils=t("./hash/utils"),o.common=t("./hash/common"),o.sha=t("./hash/sha"),o.ripemd=t("./hash/ripemd"),o.hmac=t("./hash/hmac"),o.sha1=o.sha.sha1,o.sha256=o.sha.sha256,o.sha224=o.sha.sha224,o.sha384=o.sha.sha384,o.sha512=o.sha.sha512,o.ripemd160=o.ripemd.ripemd160},{"./hash/common":427,"./hash/hmac":428,"./hash/ripemd":429,"./hash/sha":430,"./hash/utils":437}],427:[function(t,s,u){var o=t("./utils"),r=t("minimalistic-assert");function c(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}u.BlockHash=c,c.prototype.update=function(l,n){if(l=o.toArray(l,n),this.pending?this.pending=this.pending.concat(l):this.pending=l,this.pendingTotal+=l.length,this.pending.length>=this._delta8){var f=(l=this.pending).length%this._delta8;this.pending=l.slice(l.length-f,l.length),this.pending.length===0&&(this.pending=null),l=o.join32(l,0,l.length-f,this.endian);for(var h=0;h<l.length;h+=this._delta32)this._update(l,h,h+this._delta32)}return this},c.prototype.digest=function(l){return this.update(this._pad()),r(this.pending===null),this._digest(l)},c.prototype._pad=function(){var l=this.pendingTotal,n=this._delta8,f=n-(l+this.padLength)%n,h=new Array(f+this.padLength);h[0]=128;for(var p=1;p<f;p++)h[p]=0;if(l<<=3,this.endian==="big"){for(var g=8;g<this.padLength;g++)h[p++]=0;h[p++]=0,h[p++]=0,h[p++]=0,h[p++]=0,h[p++]=l>>>24&255,h[p++]=l>>>16&255,h[p++]=l>>>8&255,h[p++]=255&l}else for(h[p++]=255&l,h[p++]=l>>>8&255,h[p++]=l>>>16&255,h[p++]=l>>>24&255,h[p++]=0,h[p++]=0,h[p++]=0,h[p++]=0,g=8;g<this.padLength;g++)h[p++]=0;return h}},{"./utils":437,"minimalistic-assert":453}],428:[function(t,s,u){var o=t("./utils"),r=t("minimalistic-assert");function c(l,n,f){if(!(this instanceof c))return new c(l,n,f);this.Hash=l,this.blockSize=l.blockSize/8,this.outSize=l.outSize/8,this.inner=null,this.outer=null,this._init(o.toArray(n,f))}s.exports=c,c.prototype._init=function(l){l.length>this.blockSize&&(l=new this.Hash().update(l).digest()),r(l.length<=this.blockSize);for(var n=l.length;n<this.blockSize;n++)l.push(0);for(n=0;n<l.length;n++)l[n]^=54;for(this.inner=new this.Hash().update(l),n=0;n<l.length;n++)l[n]^=106;this.outer=new this.Hash().update(l)},c.prototype.update=function(l,n){return this.inner.update(l,n),this},c.prototype.digest=function(l){return this.outer.update(this.inner.digest()),this.outer.digest(l)}},{"./utils":437,"minimalistic-assert":453}],429:[function(t,s,u){var o=t("./utils"),r=t("./common"),c=o.rotl32,l=o.sum32,n=o.sum32_3,f=o.sum32_4,h=r.BlockHash;function p(){if(!(this instanceof p))return new p;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function g(I,D,Z,K){return I<=15?D^Z^K:I<=31?D&Z|~D&K:I<=47?(D|~Z)^K:I<=63?D&K|Z&~K:D^(Z|~K)}function v(I){return I<=15?0:I<=31?1518500249:I<=47?1859775393:I<=63?2400959708:2840853838}function x(I){return I<=15?1352829926:I<=31?1548603684:I<=47?1836072691:I<=63?2053994217:0}o.inherits(p,h),u.ripemd160=p,p.blockSize=512,p.outSize=160,p.hmacStrength=192,p.padLength=64,p.prototype._update=function(I,D){for(var Z=this.h[0],K=this.h[1],z=this.h[2],W=this.h[3],Q=this.h[4],rt=Z,tt=K,j=z,F=W,R=Q,T=0;T<80;T++){var C=l(c(f(Z,g(T,K,z,W),I[y[T]+D],v(T)),S[T]),Q);Z=Q,Q=W,W=c(z,10),z=K,K=C,C=l(c(f(rt,g(79-T,tt,j,F),I[w[T]+D],x(T)),E[T]),R),rt=R,R=F,F=c(j,10),j=tt,tt=C}C=n(this.h[1],z,F),this.h[1]=n(this.h[2],W,R),this.h[2]=n(this.h[3],Q,rt),this.h[3]=n(this.h[4],Z,tt),this.h[4]=n(this.h[0],K,j),this.h[0]=C},p.prototype._digest=function(I){return I==="hex"?o.toHex32(this.h,"little"):o.split32(this.h,"little")};var y=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],w=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],S=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],E=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":427,"./utils":437}],430:[function(t,s,u){u.sha1=t("./sha/1"),u.sha224=t("./sha/224"),u.sha256=t("./sha/256"),u.sha384=t("./sha/384"),u.sha512=t("./sha/512")},{"./sha/1":431,"./sha/224":432,"./sha/256":433,"./sha/384":434,"./sha/512":435}],431:[function(t,s,u){var o=t("../utils"),r=t("../common"),c=t("./common"),l=o.rotl32,n=o.sum32,f=o.sum32_5,h=c.ft_1,p=r.BlockHash,g=[1518500249,1859775393,2400959708,3395469782];function v(){if(!(this instanceof v))return new v;p.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}o.inherits(v,p),s.exports=v,v.blockSize=512,v.outSize=160,v.hmacStrength=80,v.padLength=64,v.prototype._update=function(x,y){for(var w=this.W,S=0;S<16;S++)w[S]=x[y+S];for(;S<w.length;S++)w[S]=l(w[S-3]^w[S-8]^w[S-14]^w[S-16],1);var E=this.h[0],I=this.h[1],D=this.h[2],Z=this.h[3],K=this.h[4];for(S=0;S<w.length;S++){var z=~~(S/20),W=f(l(E,5),h(z,I,D,Z),K,w[S],g[z]);K=Z,Z=D,D=l(I,30),I=E,E=W}this.h[0]=n(this.h[0],E),this.h[1]=n(this.h[1],I),this.h[2]=n(this.h[2],D),this.h[3]=n(this.h[3],Z),this.h[4]=n(this.h[4],K)},v.prototype._digest=function(x){return x==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436}],432:[function(t,s,u){var o=t("../utils"),r=t("./256");function c(){if(!(this instanceof c))return new c;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}o.inherits(c,r),s.exports=c,c.blockSize=512,c.outSize=224,c.hmacStrength=192,c.padLength=64,c.prototype._digest=function(l){return l==="hex"?o.toHex32(this.h.slice(0,7),"big"):o.split32(this.h.slice(0,7),"big")}},{"../utils":437,"./256":433}],433:[function(t,s,u){var o=t("../utils"),r=t("../common"),c=t("./common"),l=t("minimalistic-assert"),n=o.sum32,f=o.sum32_4,h=o.sum32_5,p=c.ch32,g=c.maj32,v=c.s0_256,x=c.s1_256,y=c.g0_256,w=c.g1_256,S=r.BlockHash,E=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function I(){if(!(this instanceof I))return new I;S.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=E,this.W=new Array(64)}o.inherits(I,S),s.exports=I,I.blockSize=512,I.outSize=256,I.hmacStrength=192,I.padLength=64,I.prototype._update=function(D,Z){for(var K=this.W,z=0;z<16;z++)K[z]=D[Z+z];for(;z<K.length;z++)K[z]=f(w(K[z-2]),K[z-7],y(K[z-15]),K[z-16]);var W=this.h[0],Q=this.h[1],rt=this.h[2],tt=this.h[3],j=this.h[4],F=this.h[5],R=this.h[6],T=this.h[7];for(l(this.k.length===K.length),z=0;z<K.length;z++){var C=h(T,x(j),p(j,F,R),this.k[z],K[z]),k=n(v(W),g(W,Q,rt));T=R,R=F,F=j,j=n(tt,C),tt=rt,rt=Q,Q=W,W=n(C,k)}this.h[0]=n(this.h[0],W),this.h[1]=n(this.h[1],Q),this.h[2]=n(this.h[2],rt),this.h[3]=n(this.h[3],tt),this.h[4]=n(this.h[4],j),this.h[5]=n(this.h[5],F),this.h[6]=n(this.h[6],R),this.h[7]=n(this.h[7],T)},I.prototype._digest=function(D){return D==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":427,"../utils":437,"./common":436,"minimalistic-assert":453}],434:[function(t,s,u){var o=t("../utils"),r=t("./512");function c(){if(!(this instanceof c))return new c;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}o.inherits(c,r),s.exports=c,c.blockSize=1024,c.outSize=384,c.hmacStrength=192,c.padLength=128,c.prototype._digest=function(l){return l==="hex"?o.toHex32(this.h.slice(0,12),"big"):o.split32(this.h.slice(0,12),"big")}},{"../utils":437,"./512":435}],435:[function(t,s,u){var o=t("../utils"),r=t("../common"),c=t("minimalistic-assert"),l=o.rotr64_hi,n=o.rotr64_lo,f=o.shr64_hi,h=o.shr64_lo,p=o.sum64,g=o.sum64_hi,v=o.sum64_lo,x=o.sum64_4_hi,y=o.sum64_4_lo,w=o.sum64_5_hi,S=o.sum64_5_lo,E=r.BlockHash,I=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function D(){if(!(this instanceof D))return new D;E.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=I,this.W=new Array(160)}function Z(k,M,O,P,H){var et=k&O^~k&H;return et<0&&(et+=4294967296),et}function K(k,M,O,P,H,et){var it=M&P^~M&et;return it<0&&(it+=4294967296),it}function z(k,M,O,P,H){var et=k&O^k&H^O&H;return et<0&&(et+=4294967296),et}function W(k,M,O,P,H,et){var it=M&P^M&et^P&et;return it<0&&(it+=4294967296),it}function Q(k,M){var O=l(k,M,28)^l(M,k,2)^l(M,k,7);return O<0&&(O+=4294967296),O}function rt(k,M){var O=n(k,M,28)^n(M,k,2)^n(M,k,7);return O<0&&(O+=4294967296),O}function tt(k,M){var O=l(k,M,14)^l(k,M,18)^l(M,k,9);return O<0&&(O+=4294967296),O}function j(k,M){var O=n(k,M,14)^n(k,M,18)^n(M,k,9);return O<0&&(O+=4294967296),O}function F(k,M){var O=l(k,M,1)^l(k,M,8)^f(k,M,7);return O<0&&(O+=4294967296),O}function R(k,M){var O=n(k,M,1)^n(k,M,8)^h(k,M,7);return O<0&&(O+=4294967296),O}function T(k,M){var O=l(k,M,19)^l(M,k,29)^f(k,M,6);return O<0&&(O+=4294967296),O}function C(k,M){var O=n(k,M,19)^n(M,k,29)^h(k,M,6);return O<0&&(O+=4294967296),O}o.inherits(D,E),s.exports=D,D.blockSize=1024,D.outSize=512,D.hmacStrength=192,D.padLength=128,D.prototype._prepareBlock=function(k,M){for(var O=this.W,P=0;P<32;P++)O[P]=k[M+P];for(;P<O.length;P+=2){var H=T(O[P-4],O[P-3]),et=C(O[P-4],O[P-3]),it=O[P-14],pt=O[P-13],X=F(O[P-30],O[P-29]),ut=R(O[P-30],O[P-29]),G=O[P-32],U=O[P-31];O[P]=x(H,et,it,pt,X,ut,G,U),O[P+1]=y(H,et,it,pt,X,ut,G,U)}},D.prototype._update=function(k,M){this._prepareBlock(k,M);var O=this.W,P=this.h[0],H=this.h[1],et=this.h[2],it=this.h[3],pt=this.h[4],X=this.h[5],ut=this.h[6],G=this.h[7],U=this.h[8],st=this.h[9],gt=this.h[10],zt=this.h[11],St=this.h[12],Bt=this.h[13],ie=this.h[14],re=this.h[15];c(this.k.length===O.length);for(var Ct=0;Ct<O.length;Ct+=2){var Yt=ie,Qt=re,Ht=tt(U,st),Jt=j(U,st),ne=Z(U,st,gt,zt,St),ae=K(U,st,gt,zt,St,Bt),me=this.k[Ct],Le=this.k[Ct+1],Pe=O[Ct],Be=O[Ct+1],He=w(Yt,Qt,Ht,Jt,ne,ae,me,Le,Pe,Be),Je=S(Yt,Qt,Ht,Jt,ne,ae,me,Le,Pe,Be);Yt=Q(P,H),Qt=rt(P,H),Ht=z(P,H,et,it,pt),Jt=W(P,H,et,it,pt,X);var sn=g(Yt,Qt,Ht,Jt),un=v(Yt,Qt,Ht,Jt);ie=St,re=Bt,St=gt,Bt=zt,gt=U,zt=st,U=g(ut,G,He,Je),st=v(G,G,He,Je),ut=pt,G=X,pt=et,X=it,et=P,it=H,P=g(He,Je,sn,un),H=v(He,Je,sn,un)}p(this.h,0,P,H),p(this.h,2,et,it),p(this.h,4,pt,X),p(this.h,6,ut,G),p(this.h,8,U,st),p(this.h,10,gt,zt),p(this.h,12,St,Bt),p(this.h,14,ie,re)},D.prototype._digest=function(k){return k==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},{"../common":427,"../utils":437,"minimalistic-assert":453}],436:[function(t,s,u){var o=t("../utils").rotr32;function r(n,f,h){return n&f^~n&h}function c(n,f,h){return n&f^n&h^f&h}function l(n,f,h){return n^f^h}u.ft_1=function(n,f,h,p){return n===0?r(f,h,p):n===1||n===3?l(f,h,p):n===2?c(f,h,p):void 0},u.ch32=r,u.maj32=c,u.p32=l,u.s0_256=function(n){return o(n,2)^o(n,13)^o(n,22)},u.s1_256=function(n){return o(n,6)^o(n,11)^o(n,25)},u.g0_256=function(n){return o(n,7)^o(n,18)^n>>>3},u.g1_256=function(n){return o(n,17)^o(n,19)^n>>>10}},{"../utils":437}],437:[function(t,s,u){var o=t("minimalistic-assert"),r=t("inherits");function c(h,p){return(64512&h.charCodeAt(p))==55296&&!(p<0||p+1>=h.length)&&(64512&h.charCodeAt(p+1))==56320}function l(h){return(h>>>24|h>>>8&65280|h<<8&16711680|(255&h)<<24)>>>0}function n(h){return h.length===1?"0"+h:h}function f(h){return h.length===7?"0"+h:h.length===6?"00"+h:h.length===5?"000"+h:h.length===4?"0000"+h:h.length===3?"00000"+h:h.length===2?"000000"+h:h.length===1?"0000000"+h:h}u.inherits=r,u.toArray=function(h,p){if(Array.isArray(h))return h.slice();if(!h)return[];var g=[];if(typeof h=="string")if(p){if(p==="hex")for((h=h.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(h="0"+h),x=0;x<h.length;x+=2)g.push(parseInt(h[x]+h[x+1],16))}else for(var v=0,x=0;x<h.length;x++){var y=h.charCodeAt(x);y<128?g[v++]=y:y<2048?(g[v++]=y>>6|192,g[v++]=63&y|128):c(h,x)?(y=65536+((1023&y)<<10)+(1023&h.charCodeAt(++x)),g[v++]=y>>18|240,g[v++]=y>>12&63|128,g[v++]=y>>6&63|128,g[v++]=63&y|128):(g[v++]=y>>12|224,g[v++]=y>>6&63|128,g[v++]=63&y|128)}else for(x=0;x<h.length;x++)g[x]=0|h[x];return g},u.toHex=function(h){for(var p="",g=0;g<h.length;g++)p+=n(h[g].toString(16));return p},u.htonl=l,u.toHex32=function(h,p){for(var g="",v=0;v<h.length;v++){var x=h[v];p==="little"&&(x=l(x)),g+=f(x.toString(16))}return g},u.zero2=n,u.zero8=f,u.join32=function(h,p,g,v){var x=g-p;o(x%4==0);for(var y=new Array(x/4),w=0,S=p;w<y.length;w++,S+=4){var E;E=v==="big"?h[S]<<24|h[S+1]<<16|h[S+2]<<8|h[S+3]:h[S+3]<<24|h[S+2]<<16|h[S+1]<<8|h[S],y[w]=E>>>0}return y},u.split32=function(h,p){for(var g=new Array(4*h.length),v=0,x=0;v<h.length;v++,x+=4){var y=h[v];p==="big"?(g[x]=y>>>24,g[x+1]=y>>>16&255,g[x+2]=y>>>8&255,g[x+3]=255&y):(g[x+3]=y>>>24,g[x+2]=y>>>16&255,g[x+1]=y>>>8&255,g[x]=255&y)}return g},u.rotr32=function(h,p){return h>>>p|h<<32-p},u.rotl32=function(h,p){return h<<p|h>>>32-p},u.sum32=function(h,p){return h+p>>>0},u.sum32_3=function(h,p,g){return h+p+g>>>0},u.sum32_4=function(h,p,g,v){return h+p+g+v>>>0},u.sum32_5=function(h,p,g,v,x){return h+p+g+v+x>>>0},u.sum64=function(h,p,g,v){var x=h[p],y=v+h[p+1]>>>0,w=(y<v?1:0)+g+x;h[p]=w>>>0,h[p+1]=y},u.sum64_hi=function(h,p,g,v){return(p+v>>>0<p?1:0)+h+g>>>0},u.sum64_lo=function(h,p,g,v){return p+v>>>0},u.sum64_4_hi=function(h,p,g,v,x,y,w,S){var E=0,I=p;return E+=(I=I+v>>>0)<p?1:0,E+=(I=I+y>>>0)<y?1:0,h+g+x+w+(E+=(I=I+S>>>0)<S?1:0)>>>0},u.sum64_4_lo=function(h,p,g,v,x,y,w,S){return p+v+y+S>>>0},u.sum64_5_hi=function(h,p,g,v,x,y,w,S,E,I){var D=0,Z=p;return D+=(Z=Z+v>>>0)<p?1:0,D+=(Z=Z+y>>>0)<y?1:0,D+=(Z=Z+S>>>0)<S?1:0,h+g+x+w+E+(D+=(Z=Z+I>>>0)<I?1:0)>>>0},u.sum64_5_lo=function(h,p,g,v,x,y,w,S,E,I){return p+v+y+S+I>>>0},u.rotr64_hi=function(h,p,g){return(p<<32-g|h>>>g)>>>0},u.rotr64_lo=function(h,p,g){return(h<<32-g|p>>>g)>>>0},u.shr64_hi=function(h,p,g){return h>>>g},u.shr64_lo=function(h,p,g){return(h<<32-g|p>>>g)>>>0}},{inherits:440,"minimalistic-assert":453}],438:[function(t,s,u){var o=t("hash.js"),r=t("minimalistic-crypto-utils"),c=t("minimalistic-assert");function l(n){if(!(this instanceof l))return new l(n);this.hash=n.hash,this.predResist=!!n.predResist,this.outLen=this.hash.outSize,this.minEntropy=n.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var f=r.toArray(n.entropy,n.entropyEnc||"hex"),h=r.toArray(n.nonce,n.nonceEnc||"hex"),p=r.toArray(n.pers,n.persEnc||"hex");c(f.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(f,h,p)}s.exports=l,l.prototype._init=function(n,f,h){var p=n.concat(f).concat(h);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var g=0;g<this.V.length;g++)this.K[g]=0,this.V[g]=1;this._update(p),this._reseed=1,this.reseedInterval=281474976710656},l.prototype._hmac=function(){return new o.hmac(this.hash,this.K)},l.prototype._update=function(n){var f=this._hmac().update(this.V).update([0]);n&&(f=f.update(n)),this.K=f.digest(),this.V=this._hmac().update(this.V).digest(),n&&(this.K=this._hmac().update(this.V).update([1]).update(n).digest(),this.V=this._hmac().update(this.V).digest())},l.prototype.reseed=function(n,f,h,p){typeof f!="string"&&(p=h,h=f,f=null),n=r.toArray(n,f),h=r.toArray(h,p),c(n.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(n.concat(h||[])),this._reseed=1},l.prototype.generate=function(n,f,h,p){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof f!="string"&&(p=h,h=f,f=null),h&&(h=r.toArray(h,p||"hex"),this._update(h));for(var g=[];g.length<n;)this.V=this._hmac().update(this.V).digest(),g=g.concat(this.V);var v=g.slice(0,n);return this._update(h),this._reseed++,r.encode(v,f)}},{"hash.js":426,"minimalistic-assert":453,"minimalistic-crypto-utils":454}],439:[function(t,s,u){u.read=function(o,r,c,l,n){var f,h,p=8*n-l-1,g=(1<<p)-1,v=g>>1,x=-7,y=c?n-1:0,w=c?-1:1,S=o[r+y];for(y+=w,f=S&(1<<-x)-1,S>>=-x,x+=p;x>0;f=256*f+o[r+y],y+=w,x-=8);for(h=f&(1<<-x)-1,f>>=-x,x+=l;x>0;h=256*h+o[r+y],y+=w,x-=8);if(f===0)f=1-v;else{if(f===g)return h?NaN:1/0*(S?-1:1);h+=Math.pow(2,l),f-=v}return(S?-1:1)*h*Math.pow(2,f-l)},u.write=function(o,r,c,l,n,f){var h,p,g,v=8*f-n-1,x=(1<<v)-1,y=x>>1,w=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=l?0:f-1,E=l?1:-1,I=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(p=isNaN(r)?1:0,h=x):(h=Math.floor(Math.log(r)/Math.LN2),r*(g=Math.pow(2,-h))<1&&(h--,g*=2),(r+=h+y>=1?w/g:w*Math.pow(2,1-y))*g>=2&&(h++,g/=2),h+y>=x?(p=0,h=x):h+y>=1?(p=(r*g-1)*Math.pow(2,n),h+=y):(p=r*Math.pow(2,y-1)*Math.pow(2,n),h=0));n>=8;o[c+S]=255&p,S+=E,p/=256,n-=8);for(h=h<<n|p,v+=n;v>0;o[c+S]=255&h,S+=E,h/=256,v-=8);o[c+S-E]|=128*I}},{}],440:[function(t,s,u){typeof Object.create=="function"?s.exports=function(o,r){r&&(o.super_=r,o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:s.exports=function(o,r){if(r){o.super_=r;var c=function(){};c.prototype=r.prototype,o.prototype=new c,o.prototype.constructor=o}}},{}],441:[function(t,s,u){(function(o,r,c,l,n,f,h,p){(function(){(function(g){typeof u=="object"&&s!==void 0?s.exports=g():(typeof window<"u"?window:r!==void 0?r:typeof self<"u"?self:this).JSZip=g()})((function(){return(function g(v,x,y){function w(I,D){if(!x[I]){if(!v[I]){var Z=typeof t=="function"&&t;if(!D&&Z)return Z(I,!0);if(S)return S(I,!0);var K=new Error("Cannot find module '"+I+"'");throw K.code="MODULE_NOT_FOUND",K}var z=x[I]={exports:{}};v[I][0].call(z.exports,(function(W){return w(v[I][1][W]||W)}),z,z.exports,g,v,x,y)}return x[I].exports}for(var S=typeof t=="function"&&t,E=0;E<y.length;E++)w(y[E]);return w})({1:[function(g,v,x){var y=g("./utils"),w=g("./support"),S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";x.encode=function(E){for(var I,D,Z,K,z,W,Q,rt=[],tt=0,j=E.length,F=j,R=y.getTypeOf(E)!=="string";tt<E.length;)F=j-tt,Z=R?(I=E[tt++],D=tt<j?E[tt++]:0,tt<j?E[tt++]:0):(I=E.charCodeAt(tt++),D=tt<j?E.charCodeAt(tt++):0,tt<j?E.charCodeAt(tt++):0),K=I>>2,z=(3&I)<<4|D>>4,W=1<F?(15&D)<<2|Z>>6:64,Q=2<F?63&Z:64,rt.push(S.charAt(K)+S.charAt(z)+S.charAt(W)+S.charAt(Q));return rt.join("")},x.decode=function(E){var I,D,Z,K,z,W,Q=0,rt=0,tt="data:";if(E.substr(0,tt.length)===tt)throw new Error("Invalid base64 input, it looks like a data url.");var j,F=3*(E=E.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(E.charAt(E.length-1)===S.charAt(64)&&F--,E.charAt(E.length-2)===S.charAt(64)&&F--,F%1!=0)throw new Error("Invalid base64 input, bad content length.");for(j=w.uint8array?new Uint8Array(0|F):new Array(0|F);Q<E.length;)I=S.indexOf(E.charAt(Q++))<<2|(K=S.indexOf(E.charAt(Q++)))>>4,D=(15&K)<<4|(z=S.indexOf(E.charAt(Q++)))>>2,Z=(3&z)<<6|(W=S.indexOf(E.charAt(Q++))),j[rt++]=I,z!==64&&(j[rt++]=D),W!==64&&(j[rt++]=Z);return j}},{"./support":30,"./utils":32}],2:[function(g,v,x){var y=g("./external"),w=g("./stream/DataWorker"),S=g("./stream/Crc32Probe"),E=g("./stream/DataLengthProbe");function I(D,Z,K,z,W){this.compressedSize=D,this.uncompressedSize=Z,this.crc32=K,this.compression=z,this.compressedContent=W}I.prototype={getContentWorker:function(){var D=new w(y.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new E("data_length")),Z=this;return D.on("end",(function(){if(this.streamInfo.data_length!==Z.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),D},getCompressedWorker:function(){return new w(y.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},I.createWorkerFrom=function(D,Z,K){return D.pipe(new S).pipe(new E("uncompressedSize")).pipe(Z.compressWorker(K)).pipe(new E("compressedSize")).withStreamInfo("compression",Z)},v.exports=I},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(g,v,x){var y=g("./stream/GenericWorker");x.STORE={magic:"\0\0",compressWorker:function(){return new y("STORE compression")},uncompressWorker:function(){return new y("STORE decompression")}},x.DEFLATE=g("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(g,v,x){var y=g("./utils"),w=(function(){for(var S,E=[],I=0;I<256;I++){S=I;for(var D=0;D<8;D++)S=1&S?3988292384^S>>>1:S>>>1;E[I]=S}return E})();v.exports=function(S,E){return S!==void 0&&S.length?y.getTypeOf(S)!=="string"?(function(I,D,Z,K){var z=w,W=0+Z;I^=-1;for(var Q=0;Q<W;Q++)I=I>>>8^z[255&(I^D[Q])];return-1^I})(0|E,S,S.length):(function(I,D,Z,K){var z=w,W=0+Z;I^=-1;for(var Q=0;Q<W;Q++)I=I>>>8^z[255&(I^D.charCodeAt(Q))];return-1^I})(0|E,S,S.length):0}},{"./utils":32}],5:[function(g,v,x){x.base64=!1,x.binary=!1,x.dir=!1,x.createFolders=!0,x.date=null,x.compression=null,x.compressionOptions=null,x.comment=null,x.unixPermissions=null,x.dosPermissions=null},{}],6:[function(g,v,x){var y;y=typeof Promise<"u"?Promise:g("lie"),v.exports={Promise:y}},{lie:37}],7:[function(g,v,x){var y=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",w=g("pako"),S=g("./utils"),E=g("./stream/GenericWorker"),I=y?"uint8array":"array";function D(Z,K){E.call(this,"FlateWorker/"+Z),this._pako=null,this._pakoAction=Z,this._pakoOptions=K,this.meta={}}x.magic="\b\0",S.inherits(D,E),D.prototype.processChunk=function(Z){this.meta=Z.meta,this._pako===null&&this._createPako(),this._pako.push(S.transformTo(I,Z.data),!1)},D.prototype.flush=function(){E.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},D.prototype.cleanUp=function(){E.prototype.cleanUp.call(this),this._pako=null},D.prototype._createPako=function(){this._pako=new w[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var Z=this;this._pako.onData=function(K){Z.push({data:K,meta:Z.meta})}},x.compressWorker=function(Z){return new D("Deflate",Z)},x.uncompressWorker=function(){return new D("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(g,v,x){function y(z,W){var Q,rt="";for(Q=0;Q<W;Q++)rt+=String.fromCharCode(255&z),z>>>=8;return rt}function w(z,W,Q,rt,tt,j){var F,R,T=z.file,C=z.compression,k=j!==I.utf8encode,M=S.transformTo("string",j(T.name)),O=S.transformTo("string",I.utf8encode(T.name)),P=T.comment,H=S.transformTo("string",j(P)),et=S.transformTo("string",I.utf8encode(P)),it=O.length!==T.name.length,pt=et.length!==P.length,X="",ut="",G="",U=T.dir,st=T.date,gt={crc32:0,compressedSize:0,uncompressedSize:0};W&&!Q||(gt.crc32=z.crc32,gt.compressedSize=z.compressedSize,gt.uncompressedSize=z.uncompressedSize);var zt=0;W&&(zt|=8),k||!it&&!pt||(zt|=2048);var St=0,Bt=0;U&&(St|=16),tt==="UNIX"?(Bt=798,St|=(function(re,Ct){var Yt=re;return re||(Yt=Ct?16893:33204),(65535&Yt)<<16})(T.unixPermissions,U)):(Bt=20,St|=(function(re){return 63&(re||0)})(T.dosPermissions)),F=st.getUTCHours(),F<<=6,F|=st.getUTCMinutes(),F<<=5,F|=st.getUTCSeconds()/2,R=st.getUTCFullYear()-1980,R<<=4,R|=st.getUTCMonth()+1,R<<=5,R|=st.getUTCDate(),it&&(ut=y(1,1)+y(D(M),4)+O,X+="up"+y(ut.length,2)+ut),pt&&(G=y(1,1)+y(D(H),4)+et,X+="uc"+y(G.length,2)+G);var ie="";return ie+=`
\0`,ie+=y(zt,2),ie+=C.magic,ie+=y(F,2),ie+=y(R,2),ie+=y(gt.crc32,4),ie+=y(gt.compressedSize,4),ie+=y(gt.uncompressedSize,4),ie+=y(M.length,2),ie+=y(X.length,2),{fileRecord:Z.LOCAL_FILE_HEADER+ie+M+X,dirRecord:Z.CENTRAL_FILE_HEADER+y(Bt,2)+ie+y(H.length,2)+"\0\0\0\0"+y(St,4)+y(rt,4)+M+X+H}}var S=g("../utils"),E=g("../stream/GenericWorker"),I=g("../utf8"),D=g("../crc32"),Z=g("../signature");function K(z,W,Q,rt){E.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=W,this.zipPlatform=Q,this.encodeFileName=rt,this.streamFiles=z,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}S.inherits(K,E),K.prototype.push=function(z){var W=z.meta.percent||0,Q=this.entriesCount,rt=this._sources.length;this.accumulate?this.contentBuffer.push(z):(this.bytesWritten+=z.data.length,E.prototype.push.call(this,{data:z.data,meta:{currentFile:this.currentFile,percent:Q?(W+100*(Q-rt-1))/Q:100}}))},K.prototype.openedSource=function(z){this.currentSourceOffset=this.bytesWritten,this.currentFile=z.file.name;var W=this.streamFiles&&!z.file.dir;if(W){var Q=w(z,W,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Q.fileRecord,meta:{percent:0}})}else this.accumulate=!0},K.prototype.closedSource=function(z){this.accumulate=!1;var W=this.streamFiles&&!z.file.dir,Q=w(z,W,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(Q.dirRecord),W)this.push({data:(function(rt){return Z.DATA_DESCRIPTOR+y(rt.crc32,4)+y(rt.compressedSize,4)+y(rt.uncompressedSize,4)})(z),meta:{percent:100}});else for(this.push({data:Q.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},K.prototype.flush=function(){for(var z=this.bytesWritten,W=0;W<this.dirRecords.length;W++)this.push({data:this.dirRecords[W],meta:{percent:100}});var Q=this.bytesWritten-z,rt=(function(tt,j,F,R,T){var C=S.transformTo("string",T(R));return Z.CENTRAL_DIRECTORY_END+"\0\0\0\0"+y(tt,2)+y(tt,2)+y(j,4)+y(F,4)+y(C.length,2)+C})(this.dirRecords.length,Q,z,this.zipComment,this.encodeFileName);this.push({data:rt,meta:{percent:100}})},K.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},K.prototype.registerPrevious=function(z){this._sources.push(z);var W=this;return z.on("data",(function(Q){W.processChunk(Q)})),z.on("end",(function(){W.closedSource(W.previous.streamInfo),W._sources.length?W.prepareNextSource():W.end()})),z.on("error",(function(Q){W.error(Q)})),this},K.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},K.prototype.error=function(z){var W=this._sources;if(!E.prototype.error.call(this,z))return!1;for(var Q=0;Q<W.length;Q++)try{W[Q].error(z)}catch{}return!0},K.prototype.lock=function(){E.prototype.lock.call(this);for(var z=this._sources,W=0;W<z.length;W++)z[W].lock()},v.exports=K},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(g,v,x){var y=g("../compressions"),w=g("./ZipFileWorker");x.generateWorker=function(S,E,I){var D=new w(E.streamFiles,I,E.platform,E.encodeFileName),Z=0;try{S.forEach((function(K,z){Z++;var W=(function(j,F){var R=j||F,T=y[R];if(!T)throw new Error(R+" is not a valid compression method !");return T})(z.options.compression,E.compression),Q=z.options.compressionOptions||E.compressionOptions||{},rt=z.dir,tt=z.date;z._compressWorker(W,Q).withStreamInfo("file",{name:K,dir:rt,date:tt,comment:z.comment||"",unixPermissions:z.unixPermissions,dosPermissions:z.dosPermissions}).pipe(D)})),D.entriesCount=Z}catch(K){D.error(K)}return D}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(g,v,x){function y(){if(!(this instanceof y))return new y;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var w=new y;for(var S in this)typeof this[S]!="function"&&(w[S]=this[S]);return w}}(y.prototype=g("./object")).loadAsync=g("./load"),y.support=g("./support"),y.defaults=g("./defaults"),y.version="3.10.1",y.loadAsync=function(w,S){return new y().loadAsync(w,S)},y.external=g("./external"),v.exports=y},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(g,v,x){var y=g("./utils"),w=g("./external"),S=g("./utf8"),E=g("./zipEntries"),I=g("./stream/Crc32Probe"),D=g("./nodejsUtils");function Z(K){return new w.Promise((function(z,W){var Q=K.decompressed.getContentWorker().pipe(new I);Q.on("error",(function(rt){W(rt)})).on("end",(function(){Q.streamInfo.crc32!==K.decompressed.crc32?W(new Error("Corrupted zip : CRC32 mismatch")):z()})).resume()}))}v.exports=function(K,z){var W=this;return z=y.extend(z||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:S.utf8decode}),D.isNode&&D.isStream(K)?w.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):y.prepareContent("the loaded zip file",K,!0,z.optimizedBinaryString,z.base64).then((function(Q){var rt=new E(z);return rt.load(Q),rt})).then((function(Q){var rt=[w.Promise.resolve(Q)],tt=Q.files;if(z.checkCRC32)for(var j=0;j<tt.length;j++)rt.push(Z(tt[j]));return w.Promise.all(rt)})).then((function(Q){for(var rt=Q.shift(),tt=rt.files,j=0;j<tt.length;j++){var F=tt[j],R=F.fileNameStr,T=y.resolve(F.fileNameStr);W.file(T,F.decompressed,{binary:!0,optimizedBinaryString:!0,date:F.date,dir:F.dir,comment:F.fileCommentStr.length?F.fileCommentStr:null,unixPermissions:F.unixPermissions,dosPermissions:F.dosPermissions,createFolders:z.createFolders}),F.dir||(W.file(T).unsafeOriginalName=R)}return rt.zipComment.length&&(W.comment=rt.zipComment),W}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(g,v,x){var y=g("../utils"),w=g("../stream/GenericWorker");function S(E,I){w.call(this,"Nodejs stream input adapter for "+E),this._upstreamEnded=!1,this._bindStream(I)}y.inherits(S,w),S.prototype._bindStream=function(E){var I=this;(this._stream=E).pause(),E.on("data",(function(D){I.push({data:D,meta:{percent:0}})})).on("error",(function(D){I.isPaused?this.generatedError=D:I.error(D)})).on("end",(function(){I.isPaused?I._upstreamEnded=!0:I.end()}))},S.prototype.pause=function(){return!!w.prototype.pause.call(this)&&(this._stream.pause(),!0)},S.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},v.exports=S},{"../stream/GenericWorker":28,"../utils":32}],13:[function(g,v,x){var y=g("readable-stream").Readable;function w(S,E,I){y.call(this,E),this._helper=S;var D=this;S.on("data",(function(Z,K){D.push(Z)||D._helper.pause(),I&&I(K)})).on("error",(function(Z){D.emit("error",Z)})).on("end",(function(){D.push(null)}))}g("../utils").inherits(w,y),w.prototype._read=function(){this._helper.resume()},v.exports=w},{"../utils":32,"readable-stream":16}],14:[function(g,v,x){v.exports={isNode:c!==void 0,newBufferFrom:function(y,w){if(c.from&&c.from!==Uint8Array.from)return c.from(y,w);if(typeof y=="number")throw new Error('The "data" argument must not be a number');return new c(y,w)},allocBuffer:function(y){if(c.alloc)return c.alloc(y);var w=new c(y);return w.fill(0),w},isBuffer:function(y){return c.isBuffer(y)},isStream:function(y){return y&&typeof y.on=="function"&&typeof y.pause=="function"&&typeof y.resume=="function"}}},{}],15:[function(g,v,x){function y(T,C,k){var M,O=S.getTypeOf(C),P=S.extend(k||{},D);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(T=tt(T)),P.createFolders&&(M=rt(T))&&j.call(this,M,!0);var H=O==="string"&&P.binary===!1&&P.base64===!1;k&&k.binary!==void 0||(P.binary=!H),(C instanceof Z&&C.uncompressedSize===0||P.dir||!C||C.length===0)&&(P.base64=!1,P.binary=!0,C="",P.compression="STORE",O="string");var et;et=C instanceof Z||C instanceof E?C:W.isNode&&W.isStream(C)?new Q(T,C):S.prepareContent(T,C,P.binary,P.optimizedBinaryString,P.base64);var it=new K(T,et,P);this.files[T]=it}var w=g("./utf8"),S=g("./utils"),E=g("./stream/GenericWorker"),I=g("./stream/StreamHelper"),D=g("./defaults"),Z=g("./compressedObject"),K=g("./zipObject"),z=g("./generate"),W=g("./nodejsUtils"),Q=g("./nodejs/NodejsStreamInputAdapter"),rt=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var C=T.lastIndexOf("/");return 0<C?T.substring(0,C):""},tt=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},j=function(T,C){return C=C!==void 0?C:D.createFolders,T=tt(T),this.files[T]||y.call(this,T,null,{dir:!0,createFolders:C}),this.files[T]};function F(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var C,k,M;for(C in this.files)M=this.files[C],(k=C.slice(this.root.length,C.length))&&C.slice(0,this.root.length)===this.root&&T(k,M)},filter:function(T){var C=[];return this.forEach((function(k,M){T(k,M)&&C.push(M)})),C},file:function(T,C,k){if(arguments.length!==1)return T=this.root+T,y.call(this,T,C,k),this;if(F(T)){var M=T;return this.filter((function(P,H){return!H.dir&&M.test(P)}))}var O=this.files[this.root+T];return O&&!O.dir?O:null},folder:function(T){if(!T)return this;if(F(T))return this.filter((function(O,P){return P.dir&&T.test(O)}));var C=this.root+T,k=j.call(this,C),M=this.clone();return M.root=k.name,M},remove:function(T){T=this.root+T;var C=this.files[T];if(C||(T.slice(-1)!=="/"&&(T+="/"),C=this.files[T]),C&&!C.dir)delete this.files[T];else for(var k=this.filter((function(O,P){return P.name.slice(0,T.length)===T})),M=0;M<k.length;M++)delete this.files[k[M].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var C,k={};try{if((k=S.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:w.utf8encode})).type=k.type.toLowerCase(),k.compression=k.compression.toUpperCase(),k.type==="binarystring"&&(k.type="string"),!k.type)throw new Error("No output type specified.");S.checkSupport(k.type),k.platform!=="darwin"&&k.platform!=="freebsd"&&k.platform!=="linux"&&k.platform!=="sunos"||(k.platform="UNIX"),k.platform==="win32"&&(k.platform="DOS");var M=k.comment||this.comment||"";C=z.generateWorker(this,k,M)}catch(O){(C=new E("error")).error(O)}return new I(C,k.type||"string",k.mimeType)},generateAsync:function(T,C){return this.generateInternalStream(T).accumulate(C)},generateNodeStream:function(T,C){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(C)}};v.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(g,v,x){v.exports=g("stream")},{stream:void 0}],17:[function(g,v,x){var y=g("./DataReader");function w(S){y.call(this,S);for(var E=0;E<this.data.length;E++)S[E]=255&S[E]}g("../utils").inherits(w,y),w.prototype.byteAt=function(S){return this.data[this.zero+S]},w.prototype.lastIndexOfSignature=function(S){for(var E=S.charCodeAt(0),I=S.charCodeAt(1),D=S.charCodeAt(2),Z=S.charCodeAt(3),K=this.length-4;0<=K;--K)if(this.data[K]===E&&this.data[K+1]===I&&this.data[K+2]===D&&this.data[K+3]===Z)return K-this.zero;return-1},w.prototype.readAndCheckSignature=function(S){var E=S.charCodeAt(0),I=S.charCodeAt(1),D=S.charCodeAt(2),Z=S.charCodeAt(3),K=this.readData(4);return E===K[0]&&I===K[1]&&D===K[2]&&Z===K[3]},w.prototype.readData=function(S){if(this.checkOffset(S),S===0)return[];var E=this.data.slice(this.zero+this.index,this.zero+this.index+S);return this.index+=S,E},v.exports=w},{"../utils":32,"./DataReader":18}],18:[function(g,v,x){var y=g("../utils");function w(S){this.data=S,this.length=S.length,this.index=0,this.zero=0}w.prototype={checkOffset:function(S){this.checkIndex(this.index+S)},checkIndex:function(S){if(this.length<this.zero+S||S<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+S+"). Corrupted zip ?")},setIndex:function(S){this.checkIndex(S),this.index=S},skip:function(S){this.setIndex(this.index+S)},byteAt:function(){},readInt:function(S){var E,I=0;for(this.checkOffset(S),E=this.index+S-1;E>=this.index;E--)I=(I<<8)+this.byteAt(E);return this.index+=S,I},readString:function(S){return y.transformTo("string",this.readData(S))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var S=this.readInt(4);return new Date(Date.UTC(1980+(S>>25&127),(S>>21&15)-1,S>>16&31,S>>11&31,S>>5&63,(31&S)<<1))}},v.exports=w},{"../utils":32}],19:[function(g,v,x){var y=g("./Uint8ArrayReader");function w(S){y.call(this,S)}g("../utils").inherits(w,y),w.prototype.readData=function(S){this.checkOffset(S);var E=this.data.slice(this.zero+this.index,this.zero+this.index+S);return this.index+=S,E},v.exports=w},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(g,v,x){var y=g("./DataReader");function w(S){y.call(this,S)}g("../utils").inherits(w,y),w.prototype.byteAt=function(S){return this.data.charCodeAt(this.zero+S)},w.prototype.lastIndexOfSignature=function(S){return this.data.lastIndexOf(S)-this.zero},w.prototype.readAndCheckSignature=function(S){return S===this.readData(4)},w.prototype.readData=function(S){this.checkOffset(S);var E=this.data.slice(this.zero+this.index,this.zero+this.index+S);return this.index+=S,E},v.exports=w},{"../utils":32,"./DataReader":18}],21:[function(g,v,x){var y=g("./ArrayReader");function w(S){y.call(this,S)}g("../utils").inherits(w,y),w.prototype.readData=function(S){if(this.checkOffset(S),S===0)return new Uint8Array(0);var E=this.data.subarray(this.zero+this.index,this.zero+this.index+S);return this.index+=S,E},v.exports=w},{"../utils":32,"./ArrayReader":17}],22:[function(g,v,x){var y=g("../utils"),w=g("../support"),S=g("./ArrayReader"),E=g("./StringReader"),I=g("./NodeBufferReader"),D=g("./Uint8ArrayReader");v.exports=function(Z){var K=y.getTypeOf(Z);return y.checkSupport(K),K!=="string"||w.uint8array?K==="nodebuffer"?new I(Z):w.uint8array?new D(y.transformTo("uint8array",Z)):new S(y.transformTo("array",Z)):new E(Z)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(g,v,x){x.LOCAL_FILE_HEADER="PK",x.CENTRAL_FILE_HEADER="PK",x.CENTRAL_DIRECTORY_END="PK",x.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",x.ZIP64_CENTRAL_DIRECTORY_END="PK",x.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(g,v,x){var y=g("./GenericWorker"),w=g("../utils");function S(E){y.call(this,"ConvertWorker to "+E),this.destType=E}w.inherits(S,y),S.prototype.processChunk=function(E){this.push({data:w.transformTo(this.destType,E.data),meta:E.meta})},v.exports=S},{"../utils":32,"./GenericWorker":28}],25:[function(g,v,x){var y=g("./GenericWorker"),w=g("../crc32");function S(){y.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}g("../utils").inherits(S,y),S.prototype.processChunk=function(E){this.streamInfo.crc32=w(E.data,this.streamInfo.crc32||0),this.push(E)},v.exports=S},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(g,v,x){var y=g("../utils"),w=g("./GenericWorker");function S(E){w.call(this,"DataLengthProbe for "+E),this.propName=E,this.withStreamInfo(E,0)}y.inherits(S,w),S.prototype.processChunk=function(E){if(E){var I=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=I+E.data.length}w.prototype.processChunk.call(this,E)},v.exports=S},{"../utils":32,"./GenericWorker":28}],27:[function(g,v,x){var y=g("../utils"),w=g("./GenericWorker");function S(E){w.call(this,"DataWorker");var I=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,E.then((function(D){I.dataIsReady=!0,I.data=D,I.max=D&&D.length||0,I.type=y.getTypeOf(D),I.isPaused||I._tickAndRepeat()}),(function(D){I.error(D)}))}y.inherits(S,w),S.prototype.cleanUp=function(){w.prototype.cleanUp.call(this),this.data=null},S.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,y.delay(this._tickAndRepeat,[],this)),!0)},S.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(y.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},S.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var E=null,I=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":E=this.data.substring(this.index,I);break;case"uint8array":E=this.data.subarray(this.index,I);break;case"array":case"nodebuffer":E=this.data.slice(this.index,I)}return this.index=I,this.push({data:E,meta:{percent:this.max?this.index/this.max*100:0}})},v.exports=S},{"../utils":32,"./GenericWorker":28}],28:[function(g,v,x){function y(w){this.name=w||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}y.prototype={push:function(w){this.emit("data",w)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(w){this.emit("error",w)}return!0},error:function(w){return!this.isFinished&&(this.isPaused?this.generatedError=w:(this.isFinished=!0,this.emit("error",w),this.previous&&this.previous.error(w),this.cleanUp()),!0)},on:function(w,S){return this._listeners[w].push(S),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(w,S){if(this._listeners[w])for(var E=0;E<this._listeners[w].length;E++)this._listeners[w][E].call(this,S)},pipe:function(w){return w.registerPrevious(this)},registerPrevious:function(w){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=w.streamInfo,this.mergeStreamInfo(),this.previous=w;var S=this;return w.on("data",(function(E){S.processChunk(E)})),w.on("end",(function(){S.end()})),w.on("error",(function(E){S.error(E)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var w=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),w=!0),this.previous&&this.previous.resume(),!w},flush:function(){},processChunk:function(w){this.push(w)},withStreamInfo:function(w,S){return this.extraStreamInfo[w]=S,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var w in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,w)&&(this.streamInfo[w]=this.extraStreamInfo[w])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var w="Worker "+this.name;return this.previous?this.previous+" -> "+w:w}},v.exports=y},{}],29:[function(g,v,x){var y=g("../utils"),w=g("./ConvertWorker"),S=g("./GenericWorker"),E=g("../base64"),I=g("../support"),D=g("../external"),Z=null;if(I.nodestream)try{Z=g("../nodejs/NodejsStreamOutputAdapter")}catch{}function K(z,W,Q){var rt=W;switch(W){case"blob":case"arraybuffer":rt="uint8array";break;case"base64":rt="string"}try{this._internalType=rt,this._outputType=W,this._mimeType=Q,y.checkSupport(rt),this._worker=z.pipe(new w(rt)),z.lock()}catch(tt){this._worker=new S("error"),this._worker.error(tt)}}K.prototype={accumulate:function(z){return(function(W,Q){return new D.Promise((function(rt,tt){var j=[],F=W._internalType,R=W._outputType,T=W._mimeType;W.on("data",(function(C,k){j.push(C),Q&&Q(k)})).on("error",(function(C){j=[],tt(C)})).on("end",(function(){try{var C=(function(k,M,O){switch(k){case"blob":return y.newBlob(y.transformTo("arraybuffer",M),O);case"base64":return E.encode(M);default:return y.transformTo(k,M)}})(R,(function(k,M){var O,P=0,H=null,et=0;for(O=0;O<M.length;O++)et+=M[O].length;switch(k){case"string":return M.join("");case"array":return Array.prototype.concat.apply([],M);case"uint8array":for(H=new Uint8Array(et),O=0;O<M.length;O++)H.set(M[O],P),P+=M[O].length;return H;case"nodebuffer":return c.concat(M);default:throw new Error("concat : unsupported type '"+k+"'")}})(F,j),T);rt(C)}catch(k){tt(k)}j=[]})).resume()}))})(this,z)},on:function(z,W){var Q=this;return z==="data"?this._worker.on(z,(function(rt){W.call(Q,rt.data,rt.meta)})):this._worker.on(z,(function(){y.delay(W,arguments,Q)})),this},resume:function(){return y.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(z){if(y.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new Z(this,{objectMode:this._outputType!=="nodebuffer"},z)}},v.exports=K},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(g,v,x){if(x.base64=!0,x.array=!0,x.string=!0,x.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",x.nodebuffer=c!==void 0,x.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")x.blob=!1;else{var y=new ArrayBuffer(0);try{x.blob=new Blob([y],{type:"application/zip"}).size===0}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);w.append(y),x.blob=w.getBlob("application/zip").size===0}catch{x.blob=!1}}}try{x.nodestream=!!g("readable-stream").Readable}catch{x.nodestream=!1}},{"readable-stream":16}],31:[function(g,v,x){for(var y=g("./utils"),w=g("./support"),S=g("./nodejsUtils"),E=g("./stream/GenericWorker"),I=new Array(256),D=0;D<256;D++)I[D]=252<=D?6:248<=D?5:240<=D?4:224<=D?3:192<=D?2:1;function Z(){E.call(this,"utf-8 decode"),this.leftOver=null}function K(){E.call(this,"utf-8 encode")}I[254]=I[254]=1,x.utf8encode=function(z){return w.nodebuffer?S.newBufferFrom(z,"utf-8"):(function(W){var Q,rt,tt,j,F,R=W.length,T=0;for(j=0;j<R;j++)(64512&(rt=W.charCodeAt(j)))==55296&&j+1<R&&(64512&(tt=W.charCodeAt(j+1)))==56320&&(rt=65536+(rt-55296<<10)+(tt-56320),j++),T+=rt<128?1:rt<2048?2:rt<65536?3:4;for(Q=w.uint8array?new Uint8Array(T):new Array(T),j=F=0;F<T;j++)(64512&(rt=W.charCodeAt(j)))==55296&&j+1<R&&(64512&(tt=W.charCodeAt(j+1)))==56320&&(rt=65536+(rt-55296<<10)+(tt-56320),j++),rt<128?Q[F++]=rt:(rt<2048?Q[F++]=192|rt>>>6:(rt<65536?Q[F++]=224|rt>>>12:(Q[F++]=240|rt>>>18,Q[F++]=128|rt>>>12&63),Q[F++]=128|rt>>>6&63),Q[F++]=128|63&rt);return Q})(z)},x.utf8decode=function(z){return w.nodebuffer?y.transformTo("nodebuffer",z).toString("utf-8"):(function(W){var Q,rt,tt,j,F=W.length,R=new Array(2*F);for(Q=rt=0;Q<F;)if((tt=W[Q++])<128)R[rt++]=tt;else if(4<(j=I[tt]))R[rt++]=65533,Q+=j-1;else{for(tt&=j===2?31:j===3?15:7;1<j&&Q<F;)tt=tt<<6|63&W[Q++],j--;1<j?R[rt++]=65533:tt<65536?R[rt++]=tt:(tt-=65536,R[rt++]=55296|tt>>10&1023,R[rt++]=56320|1023&tt)}return R.length!==rt&&(R.subarray?R=R.subarray(0,rt):R.length=rt),y.applyFromCharCode(R)})(z=y.transformTo(w.uint8array?"uint8array":"array",z))},y.inherits(Z,E),Z.prototype.processChunk=function(z){var W=y.transformTo(w.uint8array?"uint8array":"array",z.data);if(this.leftOver&&this.leftOver.length){if(w.uint8array){var Q=W;(W=new Uint8Array(Q.length+this.leftOver.length)).set(this.leftOver,0),W.set(Q,this.leftOver.length)}else W=this.leftOver.concat(W);this.leftOver=null}var rt=(function(j,F){var R;for((F=F||j.length)>j.length&&(F=j.length),R=F-1;0<=R&&(192&j[R])==128;)R--;return R<0||R===0?F:R+I[j[R]]>F?R:F})(W),tt=W;rt!==W.length&&(w.uint8array?(tt=W.subarray(0,rt),this.leftOver=W.subarray(rt,W.length)):(tt=W.slice(0,rt),this.leftOver=W.slice(rt,W.length))),this.push({data:x.utf8decode(tt),meta:z.meta})},Z.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:x.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},x.Utf8DecodeWorker=Z,y.inherits(K,E),K.prototype.processChunk=function(z){this.push({data:x.utf8encode(z.data),meta:z.meta})},x.Utf8EncodeWorker=K},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(g,v,x){var y=g("./support"),w=g("./base64"),S=g("./nodejsUtils"),E=g("./external");function I(Q){return Q}function D(Q,rt){for(var tt=0;tt<Q.length;++tt)rt[tt]=255&Q.charCodeAt(tt);return rt}g("setimmediate"),x.newBlob=function(Q,rt){x.checkSupport("blob");try{return new Blob([Q],{type:rt})}catch{try{var tt=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return tt.append(Q),tt.getBlob(rt)}catch{throw new Error("Bug : can't construct the Blob.")}}};var Z={stringifyByChunk:function(Q,rt,tt){var j=[],F=0,R=Q.length;if(R<=tt)return String.fromCharCode.apply(null,Q);for(;F<R;)rt==="array"||rt==="nodebuffer"?j.push(String.fromCharCode.apply(null,Q.slice(F,Math.min(F+tt,R)))):j.push(String.fromCharCode.apply(null,Q.subarray(F,Math.min(F+tt,R)))),F+=tt;return j.join("")},stringifyByChar:function(Q){for(var rt="",tt=0;tt<Q.length;tt++)rt+=String.fromCharCode(Q[tt]);return rt},applyCanBeUsed:{uint8array:(function(){try{return y.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return y.nodebuffer&&String.fromCharCode.apply(null,S.allocBuffer(1)).length===1}catch{return!1}})()}};function K(Q){var rt=65536,tt=x.getTypeOf(Q),j=!0;if(tt==="uint8array"?j=Z.applyCanBeUsed.uint8array:tt==="nodebuffer"&&(j=Z.applyCanBeUsed.nodebuffer),j)for(;1<rt;)try{return Z.stringifyByChunk(Q,tt,rt)}catch{rt=Math.floor(rt/2)}return Z.stringifyByChar(Q)}function z(Q,rt){for(var tt=0;tt<Q.length;tt++)rt[tt]=Q[tt];return rt}x.applyFromCharCode=K;var W={};W.string={string:I,array:function(Q){return D(Q,new Array(Q.length))},arraybuffer:function(Q){return W.string.uint8array(Q).buffer},uint8array:function(Q){return D(Q,new Uint8Array(Q.length))},nodebuffer:function(Q){return D(Q,S.allocBuffer(Q.length))}},W.array={string:K,array:I,arraybuffer:function(Q){return new Uint8Array(Q).buffer},uint8array:function(Q){return new Uint8Array(Q)},nodebuffer:function(Q){return S.newBufferFrom(Q)}},W.arraybuffer={string:function(Q){return K(new Uint8Array(Q))},array:function(Q){return z(new Uint8Array(Q),new Array(Q.byteLength))},arraybuffer:I,uint8array:function(Q){return new Uint8Array(Q)},nodebuffer:function(Q){return S.newBufferFrom(new Uint8Array(Q))}},W.uint8array={string:K,array:function(Q){return z(Q,new Array(Q.length))},arraybuffer:function(Q){return Q.buffer},uint8array:I,nodebuffer:function(Q){return S.newBufferFrom(Q)}},W.nodebuffer={string:K,array:function(Q){return z(Q,new Array(Q.length))},arraybuffer:function(Q){return W.nodebuffer.uint8array(Q).buffer},uint8array:function(Q){return z(Q,new Uint8Array(Q.length))},nodebuffer:I},x.transformTo=function(Q,rt){if(rt=rt||"",!Q)return rt;x.checkSupport(Q);var tt=x.getTypeOf(rt);return W[tt][Q](rt)},x.resolve=function(Q){for(var rt=Q.split("/"),tt=[],j=0;j<rt.length;j++){var F=rt[j];F==="."||F===""&&j!==0&&j!==rt.length-1||(F===".."?tt.pop():tt.push(F))}return tt.join("/")},x.getTypeOf=function(Q){return typeof Q=="string"?"string":Object.prototype.toString.call(Q)==="[object Array]"?"array":y.nodebuffer&&S.isBuffer(Q)?"nodebuffer":y.uint8array&&Q instanceof Uint8Array?"uint8array":y.arraybuffer&&Q instanceof ArrayBuffer?"arraybuffer":void 0},x.checkSupport=function(Q){if(!y[Q.toLowerCase()])throw new Error(Q+" is not supported by this platform")},x.MAX_VALUE_16BITS=65535,x.MAX_VALUE_32BITS=-1,x.pretty=function(Q){var rt,tt,j="";for(tt=0;tt<(Q||"").length;tt++)j+="\\x"+((rt=Q.charCodeAt(tt))<16?"0":"")+rt.toString(16).toUpperCase();return j},x.delay=function(Q,rt,tt){p((function(){Q.apply(tt||null,rt||[])}))},x.inherits=function(Q,rt){function tt(){}tt.prototype=rt.prototype,Q.prototype=new tt},x.extend=function(){var Q,rt,tt={};for(Q=0;Q<arguments.length;Q++)for(rt in arguments[Q])Object.prototype.hasOwnProperty.call(arguments[Q],rt)&&tt[rt]===void 0&&(tt[rt]=arguments[Q][rt]);return tt},x.prepareContent=function(Q,rt,tt,j,F){return E.Promise.resolve(rt).then((function(R){return y.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new E.Promise((function(T,C){var k=new FileReader;k.onload=function(M){T(M.target.result)},k.onerror=function(M){C(M.target.error)},k.readAsArrayBuffer(R)})):R})).then((function(R){var T=x.getTypeOf(R);return T?(T==="arraybuffer"?R=x.transformTo("uint8array",R):T==="string"&&(F?R=w.decode(R):tt&&j!==!0&&(R=(function(C){return D(C,y.uint8array?new Uint8Array(C.length):new Array(C.length))})(R))),R):E.Promise.reject(new Error("Can't read the data of '"+Q+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(g,v,x){var y=g("./reader/readerFor"),w=g("./utils"),S=g("./signature"),E=g("./zipEntry"),I=g("./support");function D(Z){this.files=[],this.loadOptions=Z}D.prototype={checkSignature:function(Z){if(!this.reader.readAndCheckSignature(Z)){this.reader.index-=4;var K=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+w.pretty(K)+", expected "+w.pretty(Z)+")")}},isSignature:function(Z,K){var z=this.reader.index;this.reader.setIndex(Z);var W=this.reader.readString(4)===K;return this.reader.setIndex(z),W},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Z=this.reader.readData(this.zipCommentLength),K=I.uint8array?"uint8array":"array",z=w.transformTo(K,Z);this.zipComment=this.loadOptions.decodeFileName(z)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Z,K,z,W=this.zip64EndOfCentralSize-44;0<W;)Z=this.reader.readInt(2),K=this.reader.readInt(4),z=this.reader.readData(K),this.zip64ExtensibleData[Z]={id:Z,length:K,value:z}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Z,K;for(Z=0;Z<this.files.length;Z++)K=this.files[Z],this.reader.setIndex(K.localHeaderOffset),this.checkSignature(S.LOCAL_FILE_HEADER),K.readLocalPart(this.reader),K.handleUTF8(),K.processAttributes()},readCentralDir:function(){var Z;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(S.CENTRAL_FILE_HEADER);)(Z=new E({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Z);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Z=this.reader.lastIndexOfSignature(S.CENTRAL_DIRECTORY_END);if(Z<0)throw this.isSignature(0,S.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Z);var K=Z;if(this.checkSignature(S.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===w.MAX_VALUE_16BITS||this.diskWithCentralDirStart===w.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===w.MAX_VALUE_16BITS||this.centralDirRecords===w.MAX_VALUE_16BITS||this.centralDirSize===w.MAX_VALUE_32BITS||this.centralDirOffset===w.MAX_VALUE_32BITS){if(this.zip64=!0,(Z=this.reader.lastIndexOfSignature(S.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Z),this.checkSignature(S.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,S.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(S.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(S.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var z=this.centralDirOffset+this.centralDirSize;this.zip64&&(z+=20,z+=12+this.zip64EndOfCentralSize);var W=K-z;if(0<W)this.isSignature(K,S.CENTRAL_FILE_HEADER)||(this.reader.zero=W);else if(W<0)throw new Error("Corrupted zip: missing "+Math.abs(W)+" bytes.")},prepareReader:function(Z){this.reader=y(Z)},load:function(Z){this.prepareReader(Z),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},v.exports=D},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(g,v,x){var y=g("./reader/readerFor"),w=g("./utils"),S=g("./compressedObject"),E=g("./crc32"),I=g("./utf8"),D=g("./compressions"),Z=g("./support");function K(z,W){this.options=z,this.loadOptions=W}K.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(z){var W,Q;if(z.skip(22),this.fileNameLength=z.readInt(2),Q=z.readInt(2),this.fileName=z.readData(this.fileNameLength),z.skip(Q),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((W=(function(rt){for(var tt in D)if(Object.prototype.hasOwnProperty.call(D,tt)&&D[tt].magic===rt)return D[tt];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+w.pretty(this.compressionMethod)+" unknown (inner file : "+w.transformTo("string",this.fileName)+")");this.decompressed=new S(this.compressedSize,this.uncompressedSize,this.crc32,W,z.readData(this.compressedSize))},readCentralPart:function(z){this.versionMadeBy=z.readInt(2),z.skip(2),this.bitFlag=z.readInt(2),this.compressionMethod=z.readString(2),this.date=z.readDate(),this.crc32=z.readInt(4),this.compressedSize=z.readInt(4),this.uncompressedSize=z.readInt(4);var W=z.readInt(2);if(this.extraFieldsLength=z.readInt(2),this.fileCommentLength=z.readInt(2),this.diskNumberStart=z.readInt(2),this.internalFileAttributes=z.readInt(2),this.externalFileAttributes=z.readInt(4),this.localHeaderOffset=z.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");z.skip(W),this.readExtraFields(z),this.parseZIP64ExtraField(z),this.fileComment=z.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var z=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),z==0&&(this.dosPermissions=63&this.externalFileAttributes),z==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var z=y(this.extraFields[1].value);this.uncompressedSize===w.MAX_VALUE_32BITS&&(this.uncompressedSize=z.readInt(8)),this.compressedSize===w.MAX_VALUE_32BITS&&(this.compressedSize=z.readInt(8)),this.localHeaderOffset===w.MAX_VALUE_32BITS&&(this.localHeaderOffset=z.readInt(8)),this.diskNumberStart===w.MAX_VALUE_32BITS&&(this.diskNumberStart=z.readInt(4))}},readExtraFields:function(z){var W,Q,rt,tt=z.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});z.index+4<tt;)W=z.readInt(2),Q=z.readInt(2),rt=z.readData(Q),this.extraFields[W]={id:W,length:Q,value:rt};z.setIndex(tt)},handleUTF8:function(){var z=Z.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=I.utf8decode(this.fileName),this.fileCommentStr=I.utf8decode(this.fileComment);else{var W=this.findExtraFieldUnicodePath();if(W!==null)this.fileNameStr=W;else{var Q=w.transformTo(z,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Q)}var rt=this.findExtraFieldUnicodeComment();if(rt!==null)this.fileCommentStr=rt;else{var tt=w.transformTo(z,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(tt)}}},findExtraFieldUnicodePath:function(){var z=this.extraFields[28789];if(z){var W=y(z.value);return W.readInt(1)!==1||E(this.fileName)!==W.readInt(4)?null:I.utf8decode(W.readData(z.length-5))}return null},findExtraFieldUnicodeComment:function(){var z=this.extraFields[25461];if(z){var W=y(z.value);return W.readInt(1)!==1||E(this.fileComment)!==W.readInt(4)?null:I.utf8decode(W.readData(z.length-5))}return null}},v.exports=K},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(g,v,x){function y(W,Q,rt){this.name=W,this.dir=rt.dir,this.date=rt.date,this.comment=rt.comment,this.unixPermissions=rt.unixPermissions,this.dosPermissions=rt.dosPermissions,this._data=Q,this._dataBinary=rt.binary,this.options={compression:rt.compression,compressionOptions:rt.compressionOptions}}var w=g("./stream/StreamHelper"),S=g("./stream/DataWorker"),E=g("./utf8"),I=g("./compressedObject"),D=g("./stream/GenericWorker");y.prototype={internalStream:function(W){var Q=null,rt="string";try{if(!W)throw new Error("No output type specified.");var tt=(rt=W.toLowerCase())==="string"||rt==="text";rt!=="binarystring"&&rt!=="text"||(rt="string"),Q=this._decompressWorker();var j=!this._dataBinary;j&&!tt&&(Q=Q.pipe(new E.Utf8EncodeWorker)),!j&&tt&&(Q=Q.pipe(new E.Utf8DecodeWorker))}catch(F){(Q=new D("error")).error(F)}return new w(Q,rt,"")},async:function(W,Q){return this.internalStream(W).accumulate(Q)},nodeStream:function(W,Q){return this.internalStream(W||"nodebuffer").toNodejsStream(Q)},_compressWorker:function(W,Q){if(this._data instanceof I&&this._data.compression.magic===W.magic)return this._data.getCompressedWorker();var rt=this._decompressWorker();return this._dataBinary||(rt=rt.pipe(new E.Utf8EncodeWorker)),I.createWorkerFrom(rt,W,Q)},_decompressWorker:function(){return this._data instanceof I?this._data.getContentWorker():this._data instanceof D?this._data:new S(this._data)}};for(var Z=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],K=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},z=0;z<Z.length;z++)y.prototype[Z[z]]=K;v.exports=y},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(g,v,x){(function(y){var w,S,E=y.MutationObserver||y.WebKitMutationObserver;if(E){var I=0,D=new E(W),Z=y.document.createTextNode("");D.observe(Z,{characterData:!0}),w=function(){Z.data=I=++I%2}}else if(y.setImmediate||y.MessageChannel===void 0)w="document"in y&&"onreadystatechange"in y.document.createElement("script")?function(){var Q=y.document.createElement("script");Q.onreadystatechange=function(){W(),Q.onreadystatechange=null,Q.parentNode.removeChild(Q),Q=null},y.document.documentElement.appendChild(Q)}:function(){setTimeout(W,0)};else{var K=new y.MessageChannel;K.port1.onmessage=W,w=function(){K.port2.postMessage(0)}}var z=[];function W(){var Q,rt;S=!0;for(var tt=z.length;tt;){for(rt=z,z=[],Q=-1;++Q<tt;)rt[Q]();tt=z.length}S=!1}v.exports=function(Q){z.push(Q)!==1||S||w()}}).call(this,r!==void 0?r:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(g,v,x){var y=g("immediate");function w(){}var S={},E=["REJECTED"],I=["FULFILLED"],D=["PENDING"];function Z(tt){if(typeof tt!="function")throw new TypeError("resolver must be a function");this.state=D,this.queue=[],this.outcome=void 0,tt!==w&&Q(this,tt)}function K(tt,j,F){this.promise=tt,typeof j=="function"&&(this.onFulfilled=j,this.callFulfilled=this.otherCallFulfilled),typeof F=="function"&&(this.onRejected=F,this.callRejected=this.otherCallRejected)}function z(tt,j,F){y((function(){var R;try{R=j(F)}catch(T){return S.reject(tt,T)}R===tt?S.reject(tt,new TypeError("Cannot resolve promise with itself")):S.resolve(tt,R)}))}function W(tt){var j=tt&&tt.then;if(tt&&(typeof tt=="object"||typeof tt=="function")&&typeof j=="function")return function(){j.apply(tt,arguments)}}function Q(tt,j){var F=!1;function R(k){F||(F=!0,S.reject(tt,k))}function T(k){F||(F=!0,S.resolve(tt,k))}var C=rt((function(){j(T,R)}));C.status==="error"&&R(C.value)}function rt(tt,j){var F={};try{F.value=tt(j),F.status="success"}catch(R){F.status="error",F.value=R}return F}(v.exports=Z).prototype.finally=function(tt){if(typeof tt!="function")return this;var j=this.constructor;return this.then((function(F){return j.resolve(tt()).then((function(){return F}))}),(function(F){return j.resolve(tt()).then((function(){throw F}))}))},Z.prototype.catch=function(tt){return this.then(null,tt)},Z.prototype.then=function(tt,j){if(typeof tt!="function"&&this.state===I||typeof j!="function"&&this.state===E)return this;var F=new this.constructor(w);return this.state!==D?z(F,this.state===I?tt:j,this.outcome):this.queue.push(new K(F,tt,j)),F},K.prototype.callFulfilled=function(tt){S.resolve(this.promise,tt)},K.prototype.otherCallFulfilled=function(tt){z(this.promise,this.onFulfilled,tt)},K.prototype.callRejected=function(tt){S.reject(this.promise,tt)},K.prototype.otherCallRejected=function(tt){z(this.promise,this.onRejected,tt)},S.resolve=function(tt,j){var F=rt(W,j);if(F.status==="error")return S.reject(tt,F.value);var R=F.value;if(R)Q(tt,R);else{tt.state=I,tt.outcome=j;for(var T=-1,C=tt.queue.length;++T<C;)tt.queue[T].callFulfilled(j)}return tt},S.reject=function(tt,j){tt.state=E,tt.outcome=j;for(var F=-1,R=tt.queue.length;++F<R;)tt.queue[F].callRejected(j);return tt},Z.resolve=function(tt){return tt instanceof this?tt:S.resolve(new this(w),tt)},Z.reject=function(tt){var j=new this(w);return S.reject(j,tt)},Z.all=function(tt){var j=this;if(Object.prototype.toString.call(tt)!=="[object Array]")return this.reject(new TypeError("must be an array"));var F=tt.length,R=!1;if(!F)return this.resolve([]);for(var T=new Array(F),C=0,k=-1,M=new this(w);++k<F;)O(tt[k],k);return M;function O(P,H){j.resolve(P).then((function(et){T[H]=et,++C!==F||R||(R=!0,S.resolve(M,T))}),(function(et){R||(R=!0,S.reject(M,et))}))}},Z.race=function(tt){if(Object.prototype.toString.call(tt)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=tt.length,F=!1;if(!j)return this.resolve([]);for(var R,T=-1,C=new this(w);++T<j;)R=tt[T],this.resolve(R).then((function(k){F||(F=!0,S.resolve(C,k))}),(function(k){F||(F=!0,S.reject(C,k))}));return C}},{immediate:36}],38:[function(g,v,x){var y={};(0,g("./lib/utils/common").assign)(y,g("./lib/deflate"),g("./lib/inflate"),g("./lib/zlib/constants")),v.exports=y},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(g,v,x){var y=g("./zlib/deflate"),w=g("./utils/common"),S=g("./utils/strings"),E=g("./zlib/messages"),I=g("./zlib/zstream"),D=Object.prototype.toString;function Z(z){if(!(this instanceof Z))return new Z(z);this.options=w.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},z||{});var W=this.options;W.raw&&0<W.windowBits?W.windowBits=-W.windowBits:W.gzip&&0<W.windowBits&&W.windowBits<16&&(W.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I,this.strm.avail_out=0;var Q=y.deflateInit2(this.strm,W.level,W.method,W.windowBits,W.memLevel,W.strategy);if(Q!==0)throw new Error(E[Q]);if(W.header&&y.deflateSetHeader(this.strm,W.header),W.dictionary){var rt;if(rt=typeof W.dictionary=="string"?S.string2buf(W.dictionary):D.call(W.dictionary)==="[object ArrayBuffer]"?new Uint8Array(W.dictionary):W.dictionary,(Q=y.deflateSetDictionary(this.strm,rt))!==0)throw new Error(E[Q]);this._dict_set=!0}}function K(z,W){var Q=new Z(W);if(Q.push(z,!0),Q.err)throw Q.msg||E[Q.err];return Q.result}Z.prototype.push=function(z,W){var Q,rt,tt=this.strm,j=this.options.chunkSize;if(this.ended)return!1;rt=W===~~W?W:W===!0?4:0,typeof z=="string"?tt.input=S.string2buf(z):D.call(z)==="[object ArrayBuffer]"?tt.input=new Uint8Array(z):tt.input=z,tt.next_in=0,tt.avail_in=tt.input.length;do{if(tt.avail_out===0&&(tt.output=new w.Buf8(j),tt.next_out=0,tt.avail_out=j),(Q=y.deflate(tt,rt))!==1&&Q!==0)return this.onEnd(Q),!(this.ended=!0);tt.avail_out!==0&&(tt.avail_in!==0||rt!==4&&rt!==2)||(this.options.to==="string"?this.onData(S.buf2binstring(w.shrinkBuf(tt.output,tt.next_out))):this.onData(w.shrinkBuf(tt.output,tt.next_out)))}while((0<tt.avail_in||tt.avail_out===0)&&Q!==1);return rt===4?(Q=y.deflateEnd(this.strm),this.onEnd(Q),this.ended=!0,Q===0):rt!==2||(this.onEnd(0),!(tt.avail_out=0))},Z.prototype.onData=function(z){this.chunks.push(z)},Z.prototype.onEnd=function(z){z===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=w.flattenChunks(this.chunks)),this.chunks=[],this.err=z,this.msg=this.strm.msg},x.Deflate=Z,x.deflate=K,x.deflateRaw=function(z,W){return(W=W||{}).raw=!0,K(z,W)},x.gzip=function(z,W){return(W=W||{}).gzip=!0,K(z,W)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(g,v,x){var y=g("./zlib/inflate"),w=g("./utils/common"),S=g("./utils/strings"),E=g("./zlib/constants"),I=g("./zlib/messages"),D=g("./zlib/zstream"),Z=g("./zlib/gzheader"),K=Object.prototype.toString;function z(Q){if(!(this instanceof z))return new z(Q);this.options=w.assign({chunkSize:16384,windowBits:0,to:""},Q||{});var rt=this.options;rt.raw&&0<=rt.windowBits&&rt.windowBits<16&&(rt.windowBits=-rt.windowBits,rt.windowBits===0&&(rt.windowBits=-15)),!(0<=rt.windowBits&&rt.windowBits<16)||Q&&Q.windowBits||(rt.windowBits+=32),15<rt.windowBits&&rt.windowBits<48&&(15&rt.windowBits)==0&&(rt.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new D,this.strm.avail_out=0;var tt=y.inflateInit2(this.strm,rt.windowBits);if(tt!==E.Z_OK)throw new Error(I[tt]);this.header=new Z,y.inflateGetHeader(this.strm,this.header)}function W(Q,rt){var tt=new z(rt);if(tt.push(Q,!0),tt.err)throw tt.msg||I[tt.err];return tt.result}z.prototype.push=function(Q,rt){var tt,j,F,R,T,C,k=this.strm,M=this.options.chunkSize,O=this.options.dictionary,P=!1;if(this.ended)return!1;j=rt===~~rt?rt:rt===!0?E.Z_FINISH:E.Z_NO_FLUSH,typeof Q=="string"?k.input=S.binstring2buf(Q):K.call(Q)==="[object ArrayBuffer]"?k.input=new Uint8Array(Q):k.input=Q,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new w.Buf8(M),k.next_out=0,k.avail_out=M),(tt=y.inflate(k,E.Z_NO_FLUSH))===E.Z_NEED_DICT&&O&&(C=typeof O=="string"?S.string2buf(O):K.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,tt=y.inflateSetDictionary(this.strm,C)),tt===E.Z_BUF_ERROR&&P===!0&&(tt=E.Z_OK,P=!1),tt!==E.Z_STREAM_END&&tt!==E.Z_OK)return this.onEnd(tt),!(this.ended=!0);k.next_out&&(k.avail_out!==0&&tt!==E.Z_STREAM_END&&(k.avail_in!==0||j!==E.Z_FINISH&&j!==E.Z_SYNC_FLUSH)||(this.options.to==="string"?(F=S.utf8border(k.output,k.next_out),R=k.next_out-F,T=S.buf2string(k.output,F),k.next_out=R,k.avail_out=M-R,R&&w.arraySet(k.output,k.output,F,R,0),this.onData(T)):this.onData(w.shrinkBuf(k.output,k.next_out)))),k.avail_in===0&&k.avail_out===0&&(P=!0)}while((0<k.avail_in||k.avail_out===0)&&tt!==E.Z_STREAM_END);return tt===E.Z_STREAM_END&&(j=E.Z_FINISH),j===E.Z_FINISH?(tt=y.inflateEnd(this.strm),this.onEnd(tt),this.ended=!0,tt===E.Z_OK):j!==E.Z_SYNC_FLUSH||(this.onEnd(E.Z_OK),!(k.avail_out=0))},z.prototype.onData=function(Q){this.chunks.push(Q)},z.prototype.onEnd=function(Q){Q===E.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=w.flattenChunks(this.chunks)),this.chunks=[],this.err=Q,this.msg=this.strm.msg},x.Inflate=z,x.inflate=W,x.inflateRaw=function(Q,rt){return(rt=rt||{}).raw=!0,W(Q,rt)},x.ungzip=W},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(g,v,x){var y=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";x.assign=function(E){for(var I=Array.prototype.slice.call(arguments,1);I.length;){var D=I.shift();if(D){if(typeof D!="object")throw new TypeError(D+"must be non-object");for(var Z in D)D.hasOwnProperty(Z)&&(E[Z]=D[Z])}}return E},x.shrinkBuf=function(E,I){return E.length===I?E:E.subarray?E.subarray(0,I):(E.length=I,E)};var w={arraySet:function(E,I,D,Z,K){if(I.subarray&&E.subarray)E.set(I.subarray(D,D+Z),K);else for(var z=0;z<Z;z++)E[K+z]=I[D+z]},flattenChunks:function(E){var I,D,Z,K,z,W;for(I=Z=0,D=E.length;I<D;I++)Z+=E[I].length;for(W=new Uint8Array(Z),I=K=0,D=E.length;I<D;I++)z=E[I],W.set(z,K),K+=z.length;return W}},S={arraySet:function(E,I,D,Z,K){for(var z=0;z<Z;z++)E[K+z]=I[D+z]},flattenChunks:function(E){return[].concat.apply([],E)}};x.setTyped=function(E){E?(x.Buf8=Uint8Array,x.Buf16=Uint16Array,x.Buf32=Int32Array,x.assign(x,w)):(x.Buf8=Array,x.Buf16=Array,x.Buf32=Array,x.assign(x,S))},x.setTyped(y)},{}],42:[function(g,v,x){var y=g("./common"),w=!0,S=!0;try{String.fromCharCode.apply(null,[0])}catch{w=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{S=!1}for(var E=new y.Buf8(256),I=0;I<256;I++)E[I]=252<=I?6:248<=I?5:240<=I?4:224<=I?3:192<=I?2:1;function D(Z,K){if(K<65537&&(Z.subarray&&S||!Z.subarray&&w))return String.fromCharCode.apply(null,y.shrinkBuf(Z,K));for(var z="",W=0;W<K;W++)z+=String.fromCharCode(Z[W]);return z}E[254]=E[254]=1,x.string2buf=function(Z){var K,z,W,Q,rt,tt=Z.length,j=0;for(Q=0;Q<tt;Q++)(64512&(z=Z.charCodeAt(Q)))==55296&&Q+1<tt&&(64512&(W=Z.charCodeAt(Q+1)))==56320&&(z=65536+(z-55296<<10)+(W-56320),Q++),j+=z<128?1:z<2048?2:z<65536?3:4;for(K=new y.Buf8(j),Q=rt=0;rt<j;Q++)(64512&(z=Z.charCodeAt(Q)))==55296&&Q+1<tt&&(64512&(W=Z.charCodeAt(Q+1)))==56320&&(z=65536+(z-55296<<10)+(W-56320),Q++),z<128?K[rt++]=z:(z<2048?K[rt++]=192|z>>>6:(z<65536?K[rt++]=224|z>>>12:(K[rt++]=240|z>>>18,K[rt++]=128|z>>>12&63),K[rt++]=128|z>>>6&63),K[rt++]=128|63&z);return K},x.buf2binstring=function(Z){return D(Z,Z.length)},x.binstring2buf=function(Z){for(var K=new y.Buf8(Z.length),z=0,W=K.length;z<W;z++)K[z]=Z.charCodeAt(z);return K},x.buf2string=function(Z,K){var z,W,Q,rt,tt=K||Z.length,j=new Array(2*tt);for(z=W=0;z<tt;)if((Q=Z[z++])<128)j[W++]=Q;else if(4<(rt=E[Q]))j[W++]=65533,z+=rt-1;else{for(Q&=rt===2?31:rt===3?15:7;1<rt&&z<tt;)Q=Q<<6|63&Z[z++],rt--;1<rt?j[W++]=65533:Q<65536?j[W++]=Q:(Q-=65536,j[W++]=55296|Q>>10&1023,j[W++]=56320|1023&Q)}return D(j,W)},x.utf8border=function(Z,K){var z;for((K=K||Z.length)>Z.length&&(K=Z.length),z=K-1;0<=z&&(192&Z[z])==128;)z--;return z<0||z===0?K:z+E[Z[z]]>K?z:K}},{"./common":41}],43:[function(g,v,x){v.exports=function(y,w,S,E){for(var I=65535&y|0,D=y>>>16&65535|0,Z=0;S!==0;){for(S-=Z=2e3<S?2e3:S;D=D+(I=I+w[E++]|0)|0,--Z;);I%=65521,D%=65521}return I|D<<16|0}},{}],44:[function(g,v,x){v.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(g,v,x){var y=(function(){for(var w,S=[],E=0;E<256;E++){w=E;for(var I=0;I<8;I++)w=1&w?3988292384^w>>>1:w>>>1;S[E]=w}return S})();v.exports=function(w,S,E,I){var D=y,Z=I+E;w^=-1;for(var K=I;K<Z;K++)w=w>>>8^D[255&(w^S[K])];return-1^w}},{}],46:[function(g,v,x){var y,w=g("../utils/common"),S=g("./trees"),E=g("./adler32"),I=g("./crc32"),D=g("./messages"),Z=-2,K=258,z=262,W=113;function Q(X,ut){return X.msg=D[ut],ut}function rt(X){return(X<<1)-(4<X?9:0)}function tt(X){for(var ut=X.length;0<=--ut;)X[ut]=0}function j(X){var ut=X.state,G=ut.pending;G>X.avail_out&&(G=X.avail_out),G!==0&&(w.arraySet(X.output,ut.pending_buf,ut.pending_out,G,X.next_out),X.next_out+=G,ut.pending_out+=G,X.total_out+=G,X.avail_out-=G,ut.pending-=G,ut.pending===0&&(ut.pending_out=0))}function F(X,ut){S._tr_flush_block(X,0<=X.block_start?X.block_start:-1,X.strstart-X.block_start,ut),X.block_start=X.strstart,j(X.strm)}function R(X,ut){X.pending_buf[X.pending++]=ut}function T(X,ut){X.pending_buf[X.pending++]=ut>>>8&255,X.pending_buf[X.pending++]=255&ut}function C(X,ut){var G,U,st=X.max_chain_length,gt=X.strstart,zt=X.prev_length,St=X.nice_match,Bt=X.strstart>X.w_size-z?X.strstart-(X.w_size-z):0,ie=X.window,re=X.w_mask,Ct=X.prev,Yt=X.strstart+K,Qt=ie[gt+zt-1],Ht=ie[gt+zt];X.prev_length>=X.good_match&&(st>>=2),St>X.lookahead&&(St=X.lookahead);do if(ie[(G=ut)+zt]===Ht&&ie[G+zt-1]===Qt&&ie[G]===ie[gt]&&ie[++G]===ie[gt+1]){gt+=2,G++;do;while(ie[++gt]===ie[++G]&&ie[++gt]===ie[++G]&&ie[++gt]===ie[++G]&&ie[++gt]===ie[++G]&&ie[++gt]===ie[++G]&&ie[++gt]===ie[++G]&&ie[++gt]===ie[++G]&&ie[++gt]===ie[++G]&&gt<Yt);if(U=K-(Yt-gt),gt=Yt-K,zt<U){if(X.match_start=ut,St<=(zt=U))break;Qt=ie[gt+zt-1],Ht=ie[gt+zt]}}while((ut=Ct[ut&re])>Bt&&--st!=0);return zt<=X.lookahead?zt:X.lookahead}function k(X){var ut,G,U,st,gt,zt,St,Bt,ie,re,Ct=X.w_size;do{if(st=X.window_size-X.lookahead-X.strstart,X.strstart>=Ct+(Ct-z)){for(w.arraySet(X.window,X.window,Ct,Ct,0),X.match_start-=Ct,X.strstart-=Ct,X.block_start-=Ct,ut=G=X.hash_size;U=X.head[--ut],X.head[ut]=Ct<=U?U-Ct:0,--G;);for(ut=G=Ct;U=X.prev[--ut],X.prev[ut]=Ct<=U?U-Ct:0,--G;);st+=Ct}if(X.strm.avail_in===0)break;if(zt=X.strm,St=X.window,Bt=X.strstart+X.lookahead,re=void 0,(ie=st)<(re=zt.avail_in)&&(re=ie),G=re===0?0:(zt.avail_in-=re,w.arraySet(St,zt.input,zt.next_in,re,Bt),zt.state.wrap===1?zt.adler=E(zt.adler,St,re,Bt):zt.state.wrap===2&&(zt.adler=I(zt.adler,St,re,Bt)),zt.next_in+=re,zt.total_in+=re,re),X.lookahead+=G,X.lookahead+X.insert>=3)for(gt=X.strstart-X.insert,X.ins_h=X.window[gt],X.ins_h=(X.ins_h<<X.hash_shift^X.window[gt+1])&X.hash_mask;X.insert&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[gt+3-1])&X.hash_mask,X.prev[gt&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=gt,gt++,X.insert--,!(X.lookahead+X.insert<3)););}while(X.lookahead<z&&X.strm.avail_in!==0)}function M(X,ut){for(var G,U;;){if(X.lookahead<z){if(k(X),X.lookahead<z&&ut===0)return 1;if(X.lookahead===0)break}if(G=0,X.lookahead>=3&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+3-1])&X.hash_mask,G=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart),G!==0&&X.strstart-G<=X.w_size-z&&(X.match_length=C(X,G)),X.match_length>=3)if(U=S._tr_tally(X,X.strstart-X.match_start,X.match_length-3),X.lookahead-=X.match_length,X.match_length<=X.max_lazy_match&&X.lookahead>=3){for(X.match_length--;X.strstart++,X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+3-1])&X.hash_mask,G=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart,--X.match_length!=0;);X.strstart++}else X.strstart+=X.match_length,X.match_length=0,X.ins_h=X.window[X.strstart],X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+1])&X.hash_mask;else U=S._tr_tally(X,0,X.window[X.strstart]),X.lookahead--,X.strstart++;if(U&&(F(X,!1),X.strm.avail_out===0))return 1}return X.insert=X.strstart<2?X.strstart:2,ut===4?(F(X,!0),X.strm.avail_out===0?3:4):X.last_lit&&(F(X,!1),X.strm.avail_out===0)?1:2}function O(X,ut){for(var G,U,st;;){if(X.lookahead<z){if(k(X),X.lookahead<z&&ut===0)return 1;if(X.lookahead===0)break}if(G=0,X.lookahead>=3&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+3-1])&X.hash_mask,G=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart),X.prev_length=X.match_length,X.prev_match=X.match_start,X.match_length=2,G!==0&&X.prev_length<X.max_lazy_match&&X.strstart-G<=X.w_size-z&&(X.match_length=C(X,G),X.match_length<=5&&(X.strategy===1||X.match_length===3&&4096<X.strstart-X.match_start)&&(X.match_length=2)),X.prev_length>=3&&X.match_length<=X.prev_length){for(st=X.strstart+X.lookahead-3,U=S._tr_tally(X,X.strstart-1-X.prev_match,X.prev_length-3),X.lookahead-=X.prev_length-1,X.prev_length-=2;++X.strstart<=st&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+3-1])&X.hash_mask,G=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart),--X.prev_length!=0;);if(X.match_available=0,X.match_length=2,X.strstart++,U&&(F(X,!1),X.strm.avail_out===0))return 1}else if(X.match_available){if((U=S._tr_tally(X,0,X.window[X.strstart-1]))&&F(X,!1),X.strstart++,X.lookahead--,X.strm.avail_out===0)return 1}else X.match_available=1,X.strstart++,X.lookahead--}return X.match_available&&(U=S._tr_tally(X,0,X.window[X.strstart-1]),X.match_available=0),X.insert=X.strstart<2?X.strstart:2,ut===4?(F(X,!0),X.strm.avail_out===0?3:4):X.last_lit&&(F(X,!1),X.strm.avail_out===0)?1:2}function P(X,ut,G,U,st){this.good_length=X,this.max_lazy=ut,this.nice_length=G,this.max_chain=U,this.func=st}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new w.Buf16(1146),this.dyn_dtree=new w.Buf16(122),this.bl_tree=new w.Buf16(78),tt(this.dyn_ltree),tt(this.dyn_dtree),tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new w.Buf16(16),this.heap=new w.Buf16(573),tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new w.Buf16(573),tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function et(X){var ut;return X&&X.state?(X.total_in=X.total_out=0,X.data_type=2,(ut=X.state).pending=0,ut.pending_out=0,ut.wrap<0&&(ut.wrap=-ut.wrap),ut.status=ut.wrap?42:W,X.adler=ut.wrap===2?0:1,ut.last_flush=0,S._tr_init(ut),0):Q(X,Z)}function it(X){var ut=et(X);return ut===0&&(function(G){G.window_size=2*G.w_size,tt(G.head),G.max_lazy_match=y[G.level].max_lazy,G.good_match=y[G.level].good_length,G.nice_match=y[G.level].nice_length,G.max_chain_length=y[G.level].max_chain,G.strstart=0,G.block_start=0,G.lookahead=0,G.insert=0,G.match_length=G.prev_length=2,G.match_available=0,G.ins_h=0})(X.state),ut}function pt(X,ut,G,U,st,gt){if(!X)return Z;var zt=1;if(ut===-1&&(ut=6),U<0?(zt=0,U=-U):15<U&&(zt=2,U-=16),st<1||9<st||G!==8||U<8||15<U||ut<0||9<ut||gt<0||4<gt)return Q(X,Z);U===8&&(U=9);var St=new H;return(X.state=St).strm=X,St.wrap=zt,St.gzhead=null,St.w_bits=U,St.w_size=1<<St.w_bits,St.w_mask=St.w_size-1,St.hash_bits=st+7,St.hash_size=1<<St.hash_bits,St.hash_mask=St.hash_size-1,St.hash_shift=~~((St.hash_bits+3-1)/3),St.window=new w.Buf8(2*St.w_size),St.head=new w.Buf16(St.hash_size),St.prev=new w.Buf16(St.w_size),St.lit_bufsize=1<<st+6,St.pending_buf_size=4*St.lit_bufsize,St.pending_buf=new w.Buf8(St.pending_buf_size),St.d_buf=1*St.lit_bufsize,St.l_buf=3*St.lit_bufsize,St.level=ut,St.strategy=gt,St.method=G,it(X)}y=[new P(0,0,0,0,(function(X,ut){var G=65535;for(G>X.pending_buf_size-5&&(G=X.pending_buf_size-5);;){if(X.lookahead<=1){if(k(X),X.lookahead===0&&ut===0)return 1;if(X.lookahead===0)break}X.strstart+=X.lookahead,X.lookahead=0;var U=X.block_start+G;if((X.strstart===0||X.strstart>=U)&&(X.lookahead=X.strstart-U,X.strstart=U,F(X,!1),X.strm.avail_out===0)||X.strstart-X.block_start>=X.w_size-z&&(F(X,!1),X.strm.avail_out===0))return 1}return X.insert=0,ut===4?(F(X,!0),X.strm.avail_out===0?3:4):(X.strstart>X.block_start&&(F(X,!1),X.strm.avail_out),1)})),new P(4,4,8,4,M),new P(4,5,16,8,M),new P(4,6,32,32,M),new P(4,4,16,16,O),new P(8,16,32,32,O),new P(8,16,128,128,O),new P(8,32,128,256,O),new P(32,128,258,1024,O),new P(32,258,258,4096,O)],x.deflateInit=function(X,ut){return pt(X,ut,8,15,8,0)},x.deflateInit2=pt,x.deflateReset=it,x.deflateResetKeep=et,x.deflateSetHeader=function(X,ut){return X&&X.state?X.state.wrap!==2?Z:(X.state.gzhead=ut,0):Z},x.deflate=function(X,ut){var G,U,st,gt;if(!X||!X.state||5<ut||ut<0)return X?Q(X,Z):Z;if(U=X.state,!X.output||!X.input&&X.avail_in!==0||U.status===666&&ut!==4)return Q(X,X.avail_out===0?-5:Z);if(U.strm=X,G=U.last_flush,U.last_flush=ut,U.status===42)if(U.wrap===2)X.adler=0,R(U,31),R(U,139),R(U,8),U.gzhead?(R(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),R(U,255&U.gzhead.time),R(U,U.gzhead.time>>8&255),R(U,U.gzhead.time>>16&255),R(U,U.gzhead.time>>24&255),R(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),R(U,255&U.gzhead.os),U.gzhead.extra&&U.gzhead.extra.length&&(R(U,255&U.gzhead.extra.length),R(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(X.adler=I(X.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=69):(R(U,0),R(U,0),R(U,0),R(U,0),R(U,0),R(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),R(U,3),U.status=W);else{var zt=8+(U.w_bits-8<<4)<<8;zt|=(2<=U.strategy||U.level<2?0:U.level<6?1:U.level===6?2:3)<<6,U.strstart!==0&&(zt|=32),zt+=31-zt%31,U.status=W,T(U,zt),U.strstart!==0&&(T(U,X.adler>>>16),T(U,65535&X.adler)),X.adler=1}if(U.status===69)if(U.gzhead.extra){for(st=U.pending;U.gzindex<(65535&U.gzhead.extra.length)&&(U.pending!==U.pending_buf_size||(U.gzhead.hcrc&&U.pending>st&&(X.adler=I(X.adler,U.pending_buf,U.pending-st,st)),j(X),st=U.pending,U.pending!==U.pending_buf_size));)R(U,255&U.gzhead.extra[U.gzindex]),U.gzindex++;U.gzhead.hcrc&&U.pending>st&&(X.adler=I(X.adler,U.pending_buf,U.pending-st,st)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=73)}else U.status=73;if(U.status===73)if(U.gzhead.name){st=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>st&&(X.adler=I(X.adler,U.pending_buf,U.pending-st,st)),j(X),st=U.pending,U.pending===U.pending_buf_size)){gt=1;break}gt=U.gzindex<U.gzhead.name.length?255&U.gzhead.name.charCodeAt(U.gzindex++):0,R(U,gt)}while(gt!==0);U.gzhead.hcrc&&U.pending>st&&(X.adler=I(X.adler,U.pending_buf,U.pending-st,st)),gt===0&&(U.gzindex=0,U.status=91)}else U.status=91;if(U.status===91)if(U.gzhead.comment){st=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>st&&(X.adler=I(X.adler,U.pending_buf,U.pending-st,st)),j(X),st=U.pending,U.pending===U.pending_buf_size)){gt=1;break}gt=U.gzindex<U.gzhead.comment.length?255&U.gzhead.comment.charCodeAt(U.gzindex++):0,R(U,gt)}while(gt!==0);U.gzhead.hcrc&&U.pending>st&&(X.adler=I(X.adler,U.pending_buf,U.pending-st,st)),gt===0&&(U.status=103)}else U.status=103;if(U.status===103&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&j(X),U.pending+2<=U.pending_buf_size&&(R(U,255&X.adler),R(U,X.adler>>8&255),X.adler=0,U.status=W)):U.status=W),U.pending!==0){if(j(X),X.avail_out===0)return U.last_flush=-1,0}else if(X.avail_in===0&&rt(ut)<=rt(G)&&ut!==4)return Q(X,-5);if(U.status===666&&X.avail_in!==0)return Q(X,-5);if(X.avail_in!==0||U.lookahead!==0||ut!==0&&U.status!==666){var St=U.strategy===2?(function(Bt,ie){for(var re;;){if(Bt.lookahead===0&&(k(Bt),Bt.lookahead===0)){if(ie===0)return 1;break}if(Bt.match_length=0,re=S._tr_tally(Bt,0,Bt.window[Bt.strstart]),Bt.lookahead--,Bt.strstart++,re&&(F(Bt,!1),Bt.strm.avail_out===0))return 1}return Bt.insert=0,ie===4?(F(Bt,!0),Bt.strm.avail_out===0?3:4):Bt.last_lit&&(F(Bt,!1),Bt.strm.avail_out===0)?1:2})(U,ut):U.strategy===3?(function(Bt,ie){for(var re,Ct,Yt,Qt,Ht=Bt.window;;){if(Bt.lookahead<=K){if(k(Bt),Bt.lookahead<=K&&ie===0)return 1;if(Bt.lookahead===0)break}if(Bt.match_length=0,Bt.lookahead>=3&&0<Bt.strstart&&(Ct=Ht[Yt=Bt.strstart-1])===Ht[++Yt]&&Ct===Ht[++Yt]&&Ct===Ht[++Yt]){Qt=Bt.strstart+K;do;while(Ct===Ht[++Yt]&&Ct===Ht[++Yt]&&Ct===Ht[++Yt]&&Ct===Ht[++Yt]&&Ct===Ht[++Yt]&&Ct===Ht[++Yt]&&Ct===Ht[++Yt]&&Ct===Ht[++Yt]&&Yt<Qt);Bt.match_length=K-(Qt-Yt),Bt.match_length>Bt.lookahead&&(Bt.match_length=Bt.lookahead)}if(Bt.match_length>=3?(re=S._tr_tally(Bt,1,Bt.match_length-3),Bt.lookahead-=Bt.match_length,Bt.strstart+=Bt.match_length,Bt.match_length=0):(re=S._tr_tally(Bt,0,Bt.window[Bt.strstart]),Bt.lookahead--,Bt.strstart++),re&&(F(Bt,!1),Bt.strm.avail_out===0))return 1}return Bt.insert=0,ie===4?(F(Bt,!0),Bt.strm.avail_out===0?3:4):Bt.last_lit&&(F(Bt,!1),Bt.strm.avail_out===0)?1:2})(U,ut):y[U.level].func(U,ut);if(St!==3&&St!==4||(U.status=666),St===1||St===3)return X.avail_out===0&&(U.last_flush=-1),0;if(St===2&&(ut===1?S._tr_align(U):ut!==5&&(S._tr_stored_block(U,0,0,!1),ut===3&&(tt(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),j(X),X.avail_out===0))return U.last_flush=-1,0}return ut!==4?0:U.wrap<=0?1:(U.wrap===2?(R(U,255&X.adler),R(U,X.adler>>8&255),R(U,X.adler>>16&255),R(U,X.adler>>24&255),R(U,255&X.total_in),R(U,X.total_in>>8&255),R(U,X.total_in>>16&255),R(U,X.total_in>>24&255)):(T(U,X.adler>>>16),T(U,65535&X.adler)),j(X),0<U.wrap&&(U.wrap=-U.wrap),U.pending!==0?0:1)},x.deflateEnd=function(X){var ut;return X&&X.state?(ut=X.state.status)!==42&&ut!==69&&ut!==73&&ut!==91&&ut!==103&&ut!==W&&ut!==666?Q(X,Z):(X.state=null,ut===W?Q(X,-3):0):Z},x.deflateSetDictionary=function(X,ut){var G,U,st,gt,zt,St,Bt,ie,re=ut.length;if(!X||!X.state||(gt=(G=X.state).wrap)===2||gt===1&&G.status!==42||G.lookahead)return Z;for(gt===1&&(X.adler=E(X.adler,ut,re,0)),G.wrap=0,re>=G.w_size&&(gt===0&&(tt(G.head),G.strstart=0,G.block_start=0,G.insert=0),ie=new w.Buf8(G.w_size),w.arraySet(ie,ut,re-G.w_size,G.w_size,0),ut=ie,re=G.w_size),zt=X.avail_in,St=X.next_in,Bt=X.input,X.avail_in=re,X.next_in=0,X.input=ut,k(G);G.lookahead>=3;){for(U=G.strstart,st=G.lookahead-2;G.ins_h=(G.ins_h<<G.hash_shift^G.window[U+3-1])&G.hash_mask,G.prev[U&G.w_mask]=G.head[G.ins_h],G.head[G.ins_h]=U,U++,--st;);G.strstart=U,G.lookahead=2,k(G)}return G.strstart+=G.lookahead,G.block_start=G.strstart,G.insert=G.lookahead,G.lookahead=0,G.match_length=G.prev_length=2,G.match_available=0,X.next_in=St,X.input=Bt,X.avail_in=zt,G.wrap=gt,0},x.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(g,v,x){v.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(g,v,x){v.exports=function(y,w){var S,E,I,D,Z,K,z,W,Q,rt,tt,j,F,R,T,C,k,M,O,P,H,et,it,pt,X;S=y.state,E=y.next_in,pt=y.input,I=E+(y.avail_in-5),D=y.next_out,X=y.output,Z=D-(w-y.avail_out),K=D+(y.avail_out-257),z=S.dmax,W=S.wsize,Q=S.whave,rt=S.wnext,tt=S.window,j=S.hold,F=S.bits,R=S.lencode,T=S.distcode,C=(1<<S.lenbits)-1,k=(1<<S.distbits)-1;t:do{F<15&&(j+=pt[E++]<<F,F+=8,j+=pt[E++]<<F,F+=8),M=R[j&C];e:for(;;){if(j>>>=O=M>>>24,F-=O,(O=M>>>16&255)==0)X[D++]=65535&M;else{if(!(16&O)){if((64&O)==0){M=R[(65535&M)+(j&(1<<O)-1)];continue e}if(32&O){S.mode=12;break t}y.msg="invalid literal/length code",S.mode=30;break t}P=65535&M,(O&=15)&&(F<O&&(j+=pt[E++]<<F,F+=8),P+=j&(1<<O)-1,j>>>=O,F-=O),F<15&&(j+=pt[E++]<<F,F+=8,j+=pt[E++]<<F,F+=8),M=T[j&k];n:for(;;){if(j>>>=O=M>>>24,F-=O,!(16&(O=M>>>16&255))){if((64&O)==0){M=T[(65535&M)+(j&(1<<O)-1)];continue n}y.msg="invalid distance code",S.mode=30;break t}if(H=65535&M,F<(O&=15)&&(j+=pt[E++]<<F,(F+=8)<O&&(j+=pt[E++]<<F,F+=8)),z<(H+=j&(1<<O)-1)){y.msg="invalid distance too far back",S.mode=30;break t}if(j>>>=O,F-=O,(O=D-Z)<H){if(Q<(O=H-O)&&S.sane){y.msg="invalid distance too far back",S.mode=30;break t}if(it=tt,(et=0)===rt){if(et+=W-O,O<P){for(P-=O;X[D++]=tt[et++],--O;);et=D-H,it=X}}else if(rt<O){if(et+=W+rt-O,(O-=rt)<P){for(P-=O;X[D++]=tt[et++],--O;);if(et=0,rt<P){for(P-=O=rt;X[D++]=tt[et++],--O;);et=D-H,it=X}}}else if(et+=rt-O,O<P){for(P-=O;X[D++]=tt[et++],--O;);et=D-H,it=X}for(;2<P;)X[D++]=it[et++],X[D++]=it[et++],X[D++]=it[et++],P-=3;P&&(X[D++]=it[et++],1<P&&(X[D++]=it[et++]))}else{for(et=D-H;X[D++]=X[et++],X[D++]=X[et++],X[D++]=X[et++],2<(P-=3););P&&(X[D++]=X[et++],1<P&&(X[D++]=X[et++]))}break}}break}}while(E<I&&D<K);E-=P=F>>3,j&=(1<<(F-=P<<3))-1,y.next_in=E,y.next_out=D,y.avail_in=E<I?I-E+5:5-(E-I),y.avail_out=D<K?K-D+257:257-(D-K),S.hold=j,S.bits=F}},{}],49:[function(g,v,x){var y=g("../utils/common"),w=g("./adler32"),S=g("./crc32"),E=g("./inffast"),I=g("./inftrees"),D=-2;function Z(C){return(C>>>24&255)+(C>>>8&65280)+((65280&C)<<8)+((255&C)<<24)}function K(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function z(C){var k;return C&&C.state?(k=C.state,C.total_in=C.total_out=k.total=0,C.msg="",k.wrap&&(C.adler=1&k.wrap),k.mode=1,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new y.Buf32(852),k.distcode=k.distdyn=new y.Buf32(592),k.sane=1,k.back=-1,0):D}function W(C){var k;return C&&C.state?((k=C.state).wsize=0,k.whave=0,k.wnext=0,z(C)):D}function Q(C,k){var M,O;return C&&C.state?(O=C.state,k<0?(M=0,k=-k):(M=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k)?D:(O.window!==null&&O.wbits!==k&&(O.window=null),O.wrap=M,O.wbits=k,W(C))):D}function rt(C,k){var M,O;return C?(O=new K,(C.state=O).window=null,(M=Q(C,k))!==0&&(C.state=null),M):D}var tt,j,F=!0;function R(C){if(F){var k;for(tt=new y.Buf32(512),j=new y.Buf32(32),k=0;k<144;)C.lens[k++]=8;for(;k<256;)C.lens[k++]=9;for(;k<280;)C.lens[k++]=7;for(;k<288;)C.lens[k++]=8;for(I(1,C.lens,0,288,tt,0,C.work,{bits:9}),k=0;k<32;)C.lens[k++]=5;I(2,C.lens,0,32,j,0,C.work,{bits:5}),F=!1}C.lencode=tt,C.lenbits=9,C.distcode=j,C.distbits=5}function T(C,k,M,O){var P,H=C.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new y.Buf8(H.wsize)),O>=H.wsize?(y.arraySet(H.window,k,M-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(O<(P=H.wsize-H.wnext)&&(P=O),y.arraySet(H.window,k,M-O,P,H.wnext),(O-=P)?(y.arraySet(H.window,k,M-O,O,0),H.wnext=O,H.whave=H.wsize):(H.wnext+=P,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=P))),0}x.inflateReset=W,x.inflateReset2=Q,x.inflateResetKeep=z,x.inflateInit=function(C){return rt(C,15)},x.inflateInit2=rt,x.inflate=function(C,k){var M,O,P,H,et,it,pt,X,ut,G,U,st,gt,zt,St,Bt,ie,re,Ct,Yt,Qt,Ht,Jt,ne,ae=0,me=new y.Buf8(4),Le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!C||!C.state||!C.output||!C.input&&C.avail_in!==0)return D;(M=C.state).mode===12&&(M.mode=13),et=C.next_out,P=C.output,pt=C.avail_out,H=C.next_in,O=C.input,it=C.avail_in,X=M.hold,ut=M.bits,G=it,U=pt,Ht=0;t:for(;;)switch(M.mode){case 1:if(M.wrap===0){M.mode=13;break}for(;ut<16;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}if(2&M.wrap&&X===35615){me[M.check=0]=255&X,me[1]=X>>>8&255,M.check=S(M.check,me,2,0),ut=X=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&X)<<8)+(X>>8))%31){C.msg="incorrect header check",M.mode=30;break}if((15&X)!=8){C.msg="unknown compression method",M.mode=30;break}if(ut-=4,Qt=8+(15&(X>>>=4)),M.wbits===0)M.wbits=Qt;else if(Qt>M.wbits){C.msg="invalid window size",M.mode=30;break}M.dmax=1<<Qt,C.adler=M.check=1,M.mode=512&X?10:12,ut=X=0;break;case 2:for(;ut<16;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}if(M.flags=X,(255&M.flags)!=8){C.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){C.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=X>>8&1),512&M.flags&&(me[0]=255&X,me[1]=X>>>8&255,M.check=S(M.check,me,2,0)),ut=X=0,M.mode=3;case 3:for(;ut<32;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}M.head&&(M.head.time=X),512&M.flags&&(me[0]=255&X,me[1]=X>>>8&255,me[2]=X>>>16&255,me[3]=X>>>24&255,M.check=S(M.check,me,4,0)),ut=X=0,M.mode=4;case 4:for(;ut<16;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}M.head&&(M.head.xflags=255&X,M.head.os=X>>8),512&M.flags&&(me[0]=255&X,me[1]=X>>>8&255,M.check=S(M.check,me,2,0)),ut=X=0,M.mode=5;case 5:if(1024&M.flags){for(;ut<16;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}M.length=X,M.head&&(M.head.extra_len=X),512&M.flags&&(me[0]=255&X,me[1]=X>>>8&255,M.check=S(M.check,me,2,0)),ut=X=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(it<(st=M.length)&&(st=it),st&&(M.head&&(Qt=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),y.arraySet(M.head.extra,O,H,st,Qt)),512&M.flags&&(M.check=S(M.check,O,st,H)),it-=st,H+=st,M.length-=st),M.length))break t;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(it===0)break t;for(st=0;Qt=O[H+st++],M.head&&Qt&&M.length<65536&&(M.head.name+=String.fromCharCode(Qt)),Qt&&st<it;);if(512&M.flags&&(M.check=S(M.check,O,st,H)),it-=st,H+=st,Qt)break t}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(it===0)break t;for(st=0;Qt=O[H+st++],M.head&&Qt&&M.length<65536&&(M.head.comment+=String.fromCharCode(Qt)),Qt&&st<it;);if(512&M.flags&&(M.check=S(M.check,O,st,H)),it-=st,H+=st,Qt)break t}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;ut<16;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}if(X!==(65535&M.check)){C.msg="header crc mismatch",M.mode=30;break}ut=X=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),C.adler=M.check=0,M.mode=12;break;case 10:for(;ut<32;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}C.adler=M.check=Z(X),ut=X=0,M.mode=11;case 11:if(M.havedict===0)return C.next_out=et,C.avail_out=pt,C.next_in=H,C.avail_in=it,M.hold=X,M.bits=ut,2;C.adler=M.check=1,M.mode=12;case 12:if(k===5||k===6)break t;case 13:if(M.last){X>>>=7&ut,ut-=7&ut,M.mode=27;break}for(;ut<3;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}switch(M.last=1&X,ut-=1,3&(X>>>=1)){case 0:M.mode=14;break;case 1:if(R(M),M.mode=20,k!==6)break;X>>>=2,ut-=2;break t;case 2:M.mode=17;break;case 3:C.msg="invalid block type",M.mode=30}X>>>=2,ut-=2;break;case 14:for(X>>>=7&ut,ut-=7&ut;ut<32;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}if((65535&X)!=(X>>>16^65535)){C.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&X,ut=X=0,M.mode=15,k===6)break t;case 15:M.mode=16;case 16:if(st=M.length){if(it<st&&(st=it),pt<st&&(st=pt),st===0)break t;y.arraySet(P,O,H,st,et),it-=st,H+=st,pt-=st,et+=st,M.length-=st;break}M.mode=12;break;case 17:for(;ut<14;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}if(M.nlen=257+(31&X),X>>>=5,ut-=5,M.ndist=1+(31&X),X>>>=5,ut-=5,M.ncode=4+(15&X),X>>>=4,ut-=4,286<M.nlen||30<M.ndist){C.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;ut<3;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}M.lens[Le[M.have++]]=7&X,X>>>=3,ut-=3}for(;M.have<19;)M.lens[Le[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,Jt={bits:M.lenbits},Ht=I(0,M.lens,0,19,M.lencode,0,M.work,Jt),M.lenbits=Jt.bits,Ht){C.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;Bt=(ae=M.lencode[X&(1<<M.lenbits)-1])>>>16&255,ie=65535&ae,!((St=ae>>>24)<=ut);){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}if(ie<16)X>>>=St,ut-=St,M.lens[M.have++]=ie;else{if(ie===16){for(ne=St+2;ut<ne;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}if(X>>>=St,ut-=St,M.have===0){C.msg="invalid bit length repeat",M.mode=30;break}Qt=M.lens[M.have-1],st=3+(3&X),X>>>=2,ut-=2}else if(ie===17){for(ne=St+3;ut<ne;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}ut-=St,Qt=0,st=3+(7&(X>>>=St)),X>>>=3,ut-=3}else{for(ne=St+7;ut<ne;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}ut-=St,Qt=0,st=11+(127&(X>>>=St)),X>>>=7,ut-=7}if(M.have+st>M.nlen+M.ndist){C.msg="invalid bit length repeat",M.mode=30;break}for(;st--;)M.lens[M.have++]=Qt}}if(M.mode===30)break;if(M.lens[256]===0){C.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,Jt={bits:M.lenbits},Ht=I(1,M.lens,0,M.nlen,M.lencode,0,M.work,Jt),M.lenbits=Jt.bits,Ht){C.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,Jt={bits:M.distbits},Ht=I(2,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,Jt),M.distbits=Jt.bits,Ht){C.msg="invalid distances set",M.mode=30;break}if(M.mode=20,k===6)break t;case 20:M.mode=21;case 21:if(6<=it&&258<=pt){C.next_out=et,C.avail_out=pt,C.next_in=H,C.avail_in=it,M.hold=X,M.bits=ut,E(C,U),et=C.next_out,P=C.output,pt=C.avail_out,H=C.next_in,O=C.input,it=C.avail_in,X=M.hold,ut=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;Bt=(ae=M.lencode[X&(1<<M.lenbits)-1])>>>16&255,ie=65535&ae,!((St=ae>>>24)<=ut);){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}if(Bt&&(240&Bt)==0){for(re=St,Ct=Bt,Yt=ie;Bt=(ae=M.lencode[Yt+((X&(1<<re+Ct)-1)>>re)])>>>16&255,ie=65535&ae,!(re+(St=ae>>>24)<=ut);){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}X>>>=re,ut-=re,M.back+=re}if(X>>>=St,ut-=St,M.back+=St,M.length=ie,Bt===0){M.mode=26;break}if(32&Bt){M.back=-1,M.mode=12;break}if(64&Bt){C.msg="invalid literal/length code",M.mode=30;break}M.extra=15&Bt,M.mode=22;case 22:if(M.extra){for(ne=M.extra;ut<ne;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}M.length+=X&(1<<M.extra)-1,X>>>=M.extra,ut-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;Bt=(ae=M.distcode[X&(1<<M.distbits)-1])>>>16&255,ie=65535&ae,!((St=ae>>>24)<=ut);){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}if((240&Bt)==0){for(re=St,Ct=Bt,Yt=ie;Bt=(ae=M.distcode[Yt+((X&(1<<re+Ct)-1)>>re)])>>>16&255,ie=65535&ae,!(re+(St=ae>>>24)<=ut);){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}X>>>=re,ut-=re,M.back+=re}if(X>>>=St,ut-=St,M.back+=St,64&Bt){C.msg="invalid distance code",M.mode=30;break}M.offset=ie,M.extra=15&Bt,M.mode=24;case 24:if(M.extra){for(ne=M.extra;ut<ne;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}M.offset+=X&(1<<M.extra)-1,X>>>=M.extra,ut-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){C.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(pt===0)break t;if(st=U-pt,M.offset>st){if((st=M.offset-st)>M.whave&&M.sane){C.msg="invalid distance too far back",M.mode=30;break}gt=st>M.wnext?(st-=M.wnext,M.wsize-st):M.wnext-st,st>M.length&&(st=M.length),zt=M.window}else zt=P,gt=et-M.offset,st=M.length;for(pt<st&&(st=pt),pt-=st,M.length-=st;P[et++]=zt[gt++],--st;);M.length===0&&(M.mode=21);break;case 26:if(pt===0)break t;P[et++]=M.length,pt--,M.mode=21;break;case 27:if(M.wrap){for(;ut<32;){if(it===0)break t;it--,X|=O[H++]<<ut,ut+=8}if(U-=pt,C.total_out+=U,M.total+=U,U&&(C.adler=M.check=M.flags?S(M.check,P,U,et-U):w(M.check,P,U,et-U)),U=pt,(M.flags?X:Z(X))!==M.check){C.msg="incorrect data check",M.mode=30;break}ut=X=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;ut<32;){if(it===0)break t;it--,X+=O[H++]<<ut,ut+=8}if(X!==(4294967295&M.total)){C.msg="incorrect length check",M.mode=30;break}ut=X=0}M.mode=29;case 29:Ht=1;break t;case 30:Ht=-3;break t;case 31:return-4;case 32:default:return D}return C.next_out=et,C.avail_out=pt,C.next_in=H,C.avail_in=it,M.hold=X,M.bits=ut,(M.wsize||U!==C.avail_out&&M.mode<30&&(M.mode<27||k!==4))&&T(C,C.output,C.next_out,U-C.avail_out)?(M.mode=31,-4):(G-=C.avail_in,U-=C.avail_out,C.total_in+=G,C.total_out+=U,M.total+=U,M.wrap&&U&&(C.adler=M.check=M.flags?S(M.check,P,U,C.next_out-U):w(M.check,P,U,C.next_out-U)),C.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(G==0&&U===0||k===4)&&Ht===0&&(Ht=-5),Ht)},x.inflateEnd=function(C){if(!C||!C.state)return D;var k=C.state;return k.window&&(k.window=null),C.state=null,0},x.inflateGetHeader=function(C,k){var M;return C&&C.state?(2&(M=C.state).wrap)==0?D:((M.head=k).done=!1,0):D},x.inflateSetDictionary=function(C,k){var M,O=k.length;return C&&C.state?(M=C.state).wrap!==0&&M.mode!==11?D:M.mode===11&&w(1,k,O,0)!==M.check?-3:T(C,k,O,O)?(M.mode=31,-4):(M.havedict=1,0):D},x.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(g,v,x){var y=g("../utils/common"),w=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],S=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],I=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];v.exports=function(D,Z,K,z,W,Q,rt,tt){var j,F,R,T,C,k,M,O,P,H=tt.bits,et=0,it=0,pt=0,X=0,ut=0,G=0,U=0,st=0,gt=0,zt=0,St=null,Bt=0,ie=new y.Buf16(16),re=new y.Buf16(16),Ct=null,Yt=0;for(et=0;et<=15;et++)ie[et]=0;for(it=0;it<z;it++)ie[Z[K+it]]++;for(ut=H,X=15;1<=X&&ie[X]===0;X--);if(X<ut&&(ut=X),X===0)return W[Q++]=20971520,W[Q++]=20971520,tt.bits=1,0;for(pt=1;pt<X&&ie[pt]===0;pt++);for(ut<pt&&(ut=pt),et=st=1;et<=15;et++)if(st<<=1,(st-=ie[et])<0)return-1;if(0<st&&(D===0||X!==1))return-1;for(re[1]=0,et=1;et<15;et++)re[et+1]=re[et]+ie[et];for(it=0;it<z;it++)Z[K+it]!==0&&(rt[re[Z[K+it]]++]=it);if(k=D===0?(St=Ct=rt,19):D===1?(St=w,Bt-=257,Ct=S,Yt-=257,256):(St=E,Ct=I,-1),et=pt,C=Q,U=it=zt=0,R=-1,T=(gt=1<<(G=ut))-1,D===1&&852<gt||D===2&&592<gt)return 1;for(;;){for(M=et-U,P=rt[it]<k?(O=0,rt[it]):rt[it]>k?(O=Ct[Yt+rt[it]],St[Bt+rt[it]]):(O=96,0),j=1<<et-U,pt=F=1<<G;W[C+(zt>>U)+(F-=j)]=M<<24|O<<16|P|0,F!==0;);for(j=1<<et-1;zt&j;)j>>=1;if(j!==0?(zt&=j-1,zt+=j):zt=0,it++,--ie[et]==0){if(et===X)break;et=Z[K+rt[it]]}if(ut<et&&(zt&T)!==R){for(U===0&&(U=ut),C+=pt,st=1<<(G=et-U);G+U<X&&!((st-=ie[G+U])<=0);)G++,st<<=1;if(gt+=1<<G,D===1&&852<gt||D===2&&592<gt)return 1;W[R=zt&T]=ut<<24|G<<16|C-Q|0}}return zt!==0&&(W[C+zt]=et-U<<24|64<<16|0),tt.bits=ut,0}},{"../utils/common":41}],51:[function(g,v,x){v.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(g,v,x){var y=g("../utils/common");function w(Ct){for(var Yt=Ct.length;0<=--Yt;)Ct[Yt]=0}var S=256,E=286,I=30,D=15,Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],K=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(576);w(Q);var rt=new Array(60);w(rt);var tt=new Array(512);w(tt);var j=new Array(256);w(j);var F=new Array(29);w(F);var R,T,C,k=new Array(I);function M(Ct,Yt,Qt,Ht,Jt){this.static_tree=Ct,this.extra_bits=Yt,this.extra_base=Qt,this.elems=Ht,this.max_length=Jt,this.has_stree=Ct&&Ct.length}function O(Ct,Yt){this.dyn_tree=Ct,this.max_code=0,this.stat_desc=Yt}function P(Ct){return Ct<256?tt[Ct]:tt[256+(Ct>>>7)]}function H(Ct,Yt){Ct.pending_buf[Ct.pending++]=255&Yt,Ct.pending_buf[Ct.pending++]=Yt>>>8&255}function et(Ct,Yt,Qt){Ct.bi_valid>16-Qt?(Ct.bi_buf|=Yt<<Ct.bi_valid&65535,H(Ct,Ct.bi_buf),Ct.bi_buf=Yt>>16-Ct.bi_valid,Ct.bi_valid+=Qt-16):(Ct.bi_buf|=Yt<<Ct.bi_valid&65535,Ct.bi_valid+=Qt)}function it(Ct,Yt,Qt){et(Ct,Qt[2*Yt],Qt[2*Yt+1])}function pt(Ct,Yt){for(var Qt=0;Qt|=1&Ct,Ct>>>=1,Qt<<=1,0<--Yt;);return Qt>>>1}function X(Ct,Yt,Qt){var Ht,Jt,ne=new Array(16),ae=0;for(Ht=1;Ht<=D;Ht++)ne[Ht]=ae=ae+Qt[Ht-1]<<1;for(Jt=0;Jt<=Yt;Jt++){var me=Ct[2*Jt+1];me!==0&&(Ct[2*Jt]=pt(ne[me]++,me))}}function ut(Ct){var Yt;for(Yt=0;Yt<E;Yt++)Ct.dyn_ltree[2*Yt]=0;for(Yt=0;Yt<I;Yt++)Ct.dyn_dtree[2*Yt]=0;for(Yt=0;Yt<19;Yt++)Ct.bl_tree[2*Yt]=0;Ct.dyn_ltree[512]=1,Ct.opt_len=Ct.static_len=0,Ct.last_lit=Ct.matches=0}function G(Ct){8<Ct.bi_valid?H(Ct,Ct.bi_buf):0<Ct.bi_valid&&(Ct.pending_buf[Ct.pending++]=Ct.bi_buf),Ct.bi_buf=0,Ct.bi_valid=0}function U(Ct,Yt,Qt,Ht){var Jt=2*Yt,ne=2*Qt;return Ct[Jt]<Ct[ne]||Ct[Jt]===Ct[ne]&&Ht[Yt]<=Ht[Qt]}function st(Ct,Yt,Qt){for(var Ht=Ct.heap[Qt],Jt=Qt<<1;Jt<=Ct.heap_len&&(Jt<Ct.heap_len&&U(Yt,Ct.heap[Jt+1],Ct.heap[Jt],Ct.depth)&&Jt++,!U(Yt,Ht,Ct.heap[Jt],Ct.depth));)Ct.heap[Qt]=Ct.heap[Jt],Qt=Jt,Jt<<=1;Ct.heap[Qt]=Ht}function gt(Ct,Yt,Qt){var Ht,Jt,ne,ae,me=0;if(Ct.last_lit!==0)for(;Ht=Ct.pending_buf[Ct.d_buf+2*me]<<8|Ct.pending_buf[Ct.d_buf+2*me+1],Jt=Ct.pending_buf[Ct.l_buf+me],me++,Ht===0?it(Ct,Jt,Yt):(it(Ct,(ne=j[Jt])+S+1,Yt),(ae=Z[ne])!==0&&et(Ct,Jt-=F[ne],ae),it(Ct,ne=P(--Ht),Qt),(ae=K[ne])!==0&&et(Ct,Ht-=k[ne],ae)),me<Ct.last_lit;);it(Ct,256,Yt)}function zt(Ct,Yt){var Qt,Ht,Jt,ne=Yt.dyn_tree,ae=Yt.stat_desc.static_tree,me=Yt.stat_desc.has_stree,Le=Yt.stat_desc.elems,Pe=-1;for(Ct.heap_len=0,Ct.heap_max=573,Qt=0;Qt<Le;Qt++)ne[2*Qt]!==0?(Ct.heap[++Ct.heap_len]=Pe=Qt,Ct.depth[Qt]=0):ne[2*Qt+1]=0;for(;Ct.heap_len<2;)ne[2*(Jt=Ct.heap[++Ct.heap_len]=Pe<2?++Pe:0)]=1,Ct.depth[Jt]=0,Ct.opt_len--,me&&(Ct.static_len-=ae[2*Jt+1]);for(Yt.max_code=Pe,Qt=Ct.heap_len>>1;1<=Qt;Qt--)st(Ct,ne,Qt);for(Jt=Le;Qt=Ct.heap[1],Ct.heap[1]=Ct.heap[Ct.heap_len--],st(Ct,ne,1),Ht=Ct.heap[1],Ct.heap[--Ct.heap_max]=Qt,Ct.heap[--Ct.heap_max]=Ht,ne[2*Jt]=ne[2*Qt]+ne[2*Ht],Ct.depth[Jt]=(Ct.depth[Qt]>=Ct.depth[Ht]?Ct.depth[Qt]:Ct.depth[Ht])+1,ne[2*Qt+1]=ne[2*Ht+1]=Jt,Ct.heap[1]=Jt++,st(Ct,ne,1),2<=Ct.heap_len;);Ct.heap[--Ct.heap_max]=Ct.heap[1],(function(Be,He){var Je,sn,un,an,ge,Ve,Ke=He.dyn_tree,dn=He.max_code,ln=He.stat_desc.static_tree,$n=He.stat_desc.has_stree,hr=He.stat_desc.extra_bits,Ye=He.stat_desc.extra_base,Xn=He.stat_desc.max_length,Wn=0;for(an=0;an<=D;an++)Be.bl_count[an]=0;for(Ke[2*Be.heap[Be.heap_max]+1]=0,Je=Be.heap_max+1;Je<573;Je++)Xn<(an=Ke[2*Ke[2*(sn=Be.heap[Je])+1]+1]+1)&&(an=Xn,Wn++),Ke[2*sn+1]=an,dn<sn||(Be.bl_count[an]++,ge=0,Ye<=sn&&(ge=hr[sn-Ye]),Ve=Ke[2*sn],Be.opt_len+=Ve*(an+ge),$n&&(Be.static_len+=Ve*(ln[2*sn+1]+ge)));if(Wn!==0){do{for(an=Xn-1;Be.bl_count[an]===0;)an--;Be.bl_count[an]--,Be.bl_count[an+1]+=2,Be.bl_count[Xn]--,Wn-=2}while(0<Wn);for(an=Xn;an!==0;an--)for(sn=Be.bl_count[an];sn!==0;)dn<(un=Be.heap[--Je])||(Ke[2*un+1]!==an&&(Be.opt_len+=(an-Ke[2*un+1])*Ke[2*un],Ke[2*un+1]=an),sn--)}})(Ct,Yt),X(ne,Pe,Ct.bl_count)}function St(Ct,Yt,Qt){var Ht,Jt,ne=-1,ae=Yt[1],me=0,Le=7,Pe=4;for(ae===0&&(Le=138,Pe=3),Yt[2*(Qt+1)+1]=65535,Ht=0;Ht<=Qt;Ht++)Jt=ae,ae=Yt[2*(Ht+1)+1],++me<Le&&Jt===ae||(me<Pe?Ct.bl_tree[2*Jt]+=me:Jt!==0?(Jt!==ne&&Ct.bl_tree[2*Jt]++,Ct.bl_tree[32]++):me<=10?Ct.bl_tree[34]++:Ct.bl_tree[36]++,ne=Jt,Pe=(me=0)===ae?(Le=138,3):Jt===ae?(Le=6,3):(Le=7,4))}function Bt(Ct,Yt,Qt){var Ht,Jt,ne=-1,ae=Yt[1],me=0,Le=7,Pe=4;for(ae===0&&(Le=138,Pe=3),Ht=0;Ht<=Qt;Ht++)if(Jt=ae,ae=Yt[2*(Ht+1)+1],!(++me<Le&&Jt===ae)){if(me<Pe)for(;it(Ct,Jt,Ct.bl_tree),--me!=0;);else Jt!==0?(Jt!==ne&&(it(Ct,Jt,Ct.bl_tree),me--),it(Ct,16,Ct.bl_tree),et(Ct,me-3,2)):me<=10?(it(Ct,17,Ct.bl_tree),et(Ct,me-3,3)):(it(Ct,18,Ct.bl_tree),et(Ct,me-11,7));ne=Jt,Pe=(me=0)===ae?(Le=138,3):Jt===ae?(Le=6,3):(Le=7,4)}}w(k);var ie=!1;function re(Ct,Yt,Qt,Ht){et(Ct,0+(Ht?1:0),3),(function(Jt,ne,ae,me){G(Jt),H(Jt,ae),H(Jt,~ae),y.arraySet(Jt.pending_buf,Jt.window,ne,ae,Jt.pending),Jt.pending+=ae})(Ct,Yt,Qt)}x._tr_init=function(Ct){ie||((function(){var Yt,Qt,Ht,Jt,ne,ae=new Array(16);for(Jt=Ht=0;Jt<28;Jt++)for(F[Jt]=Ht,Yt=0;Yt<1<<Z[Jt];Yt++)j[Ht++]=Jt;for(j[Ht-1]=Jt,Jt=ne=0;Jt<16;Jt++)for(k[Jt]=ne,Yt=0;Yt<1<<K[Jt];Yt++)tt[ne++]=Jt;for(ne>>=7;Jt<I;Jt++)for(k[Jt]=ne<<7,Yt=0;Yt<1<<K[Jt]-7;Yt++)tt[256+ne++]=Jt;for(Qt=0;Qt<=D;Qt++)ae[Qt]=0;for(Yt=0;Yt<=143;)Q[2*Yt+1]=8,Yt++,ae[8]++;for(;Yt<=255;)Q[2*Yt+1]=9,Yt++,ae[9]++;for(;Yt<=279;)Q[2*Yt+1]=7,Yt++,ae[7]++;for(;Yt<=287;)Q[2*Yt+1]=8,Yt++,ae[8]++;for(X(Q,287,ae),Yt=0;Yt<I;Yt++)rt[2*Yt+1]=5,rt[2*Yt]=pt(Yt,5);R=new M(Q,Z,257,E,D),T=new M(rt,K,0,I,D),C=new M(new Array(0),z,0,19,7)})(),ie=!0),Ct.l_desc=new O(Ct.dyn_ltree,R),Ct.d_desc=new O(Ct.dyn_dtree,T),Ct.bl_desc=new O(Ct.bl_tree,C),Ct.bi_buf=0,Ct.bi_valid=0,ut(Ct)},x._tr_stored_block=re,x._tr_flush_block=function(Ct,Yt,Qt,Ht){var Jt,ne,ae=0;0<Ct.level?(Ct.strm.data_type===2&&(Ct.strm.data_type=(function(me){var Le,Pe=4093624447;for(Le=0;Le<=31;Le++,Pe>>>=1)if(1&Pe&&me.dyn_ltree[2*Le]!==0)return 0;if(me.dyn_ltree[18]!==0||me.dyn_ltree[20]!==0||me.dyn_ltree[26]!==0)return 1;for(Le=32;Le<S;Le++)if(me.dyn_ltree[2*Le]!==0)return 1;return 0})(Ct)),zt(Ct,Ct.l_desc),zt(Ct,Ct.d_desc),ae=(function(me){var Le;for(St(me,me.dyn_ltree,me.l_desc.max_code),St(me,me.dyn_dtree,me.d_desc.max_code),zt(me,me.bl_desc),Le=18;3<=Le&&me.bl_tree[2*W[Le]+1]===0;Le--);return me.opt_len+=3*(Le+1)+5+5+4,Le})(Ct),Jt=Ct.opt_len+3+7>>>3,(ne=Ct.static_len+3+7>>>3)<=Jt&&(Jt=ne)):Jt=ne=Qt+5,Qt+4<=Jt&&Yt!==-1?re(Ct,Yt,Qt,Ht):Ct.strategy===4||ne===Jt?(et(Ct,2+(Ht?1:0),3),gt(Ct,Q,rt)):(et(Ct,4+(Ht?1:0),3),(function(me,Le,Pe,Be){var He;for(et(me,Le-257,5),et(me,Pe-1,5),et(me,Be-4,4),He=0;He<Be;He++)et(me,me.bl_tree[2*W[He]+1],3);Bt(me,me.dyn_ltree,Le-1),Bt(me,me.dyn_dtree,Pe-1)})(Ct,Ct.l_desc.max_code+1,Ct.d_desc.max_code+1,ae+1),gt(Ct,Ct.dyn_ltree,Ct.dyn_dtree)),ut(Ct),Ht&&G(Ct)},x._tr_tally=function(Ct,Yt,Qt){return Ct.pending_buf[Ct.d_buf+2*Ct.last_lit]=Yt>>>8&255,Ct.pending_buf[Ct.d_buf+2*Ct.last_lit+1]=255&Yt,Ct.pending_buf[Ct.l_buf+Ct.last_lit]=255&Qt,Ct.last_lit++,Yt===0?Ct.dyn_ltree[2*Qt]++:(Ct.matches++,Yt--,Ct.dyn_ltree[2*(j[Qt]+S+1)]++,Ct.dyn_dtree[2*P(Yt)]++),Ct.last_lit===Ct.lit_bufsize-1},x._tr_align=function(Ct){et(Ct,2,3),it(Ct,256,Q),(function(Yt){Yt.bi_valid===16?(H(Yt,Yt.bi_buf),Yt.bi_buf=0,Yt.bi_valid=0):8<=Yt.bi_valid&&(Yt.pending_buf[Yt.pending++]=255&Yt.bi_buf,Yt.bi_buf>>=8,Yt.bi_valid-=8)})(Ct)}},{"../utils/common":41}],53:[function(g,v,x){v.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(g,v,x){(function(y){(function(w,S){if(!w.setImmediate){var E,I,D,Z,K=1,z={},W=!1,Q=w.document,rt=Object.getPrototypeOf&&Object.getPrototypeOf(w);rt=rt&&rt.setTimeout?rt:w,E={}.toString.call(w.process)==="[object process]"?function(R){o.nextTick((function(){j(R)}))}:(function(){if(w.postMessage&&!w.importScripts){var R=!0,T=w.onmessage;return w.onmessage=function(){R=!1},w.postMessage("","*"),w.onmessage=T,R}})()?(Z="setImmediate$"+Math.random()+"$",w.addEventListener?w.addEventListener("message",F,!1):w.attachEvent("onmessage",F),function(R){w.postMessage(Z+R,"*")}):w.MessageChannel?((D=new MessageChannel).port1.onmessage=function(R){j(R.data)},function(R){D.port2.postMessage(R)}):Q&&"onreadystatechange"in Q.createElement("script")?(I=Q.documentElement,function(R){var T=Q.createElement("script");T.onreadystatechange=function(){j(R),T.onreadystatechange=null,I.removeChild(T),T=null},I.appendChild(T)}):function(R){setTimeout(j,0,R)},rt.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var T=new Array(arguments.length-1),C=0;C<T.length;C++)T[C]=arguments[C+1];var k={callback:R,args:T};return z[K]=k,E(K),K++},rt.clearImmediate=tt}function tt(R){delete z[R]}function j(R){if(W)setTimeout(j,0,R);else{var T=z[R];if(T){W=!0;try{(function(C){var k=C.callback,M=C.args;switch(M.length){case 0:k();break;case 1:k(M[0]);break;case 2:k(M[0],M[1]);break;case 3:k(M[0],M[1],M[2]);break;default:k.apply(void 0,M)}})(T)}finally{tt(R),W=!1}}}}function F(R){R.source===w&&typeof R.data=="string"&&R.data.indexOf(Z)===0&&j(+R.data.slice(Z.length))}})(typeof self>"u"?y===void 0?this:y:self)}).call(this,r!==void 0?r:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}))}).call(this)}).call(this,t("_process"),typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],t("timers").setImmediate)},{_process:467,buffer:220,timers:523}],442:[function(t,s,u){(function(o){(function(){var r=/[\\^$.*+?()[\]{}|]/g,c=RegExp(r.source),l=typeof o=="object"&&o&&o.Object===Object&&o,n=typeof self=="object"&&self&&self.Object===Object&&self,f=l||n||Function("return this")(),h=Object.prototype.toString,p=f.Symbol,g=p?p.prototype:void 0,v=g?g.toString:void 0;function x(y){if(typeof y=="string")return y;if((function(S){return typeof S=="symbol"||(function(E){return!!E&&typeof E=="object"})(S)&&h.call(S)=="[object Symbol]"})(y))return v?v.call(y):"";var w=y+"";return w=="0"&&1/y==-1/0?"-0":w}s.exports=function(y){var w;return(y=(w=y)==null?"":x(w))&&c.test(y)?y.replace(r,"\\$&"):y}}).call(this)}).call(this,typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],443:[function(t,s,u){(function(o){(function(){var r="[object Arguments]",c="[object Map]",l="[object Object]",n="[object Set]",f=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,h=/^\w*$/,p=/^\./,g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,v=/\\(\\)?/g,x=/^\[object .+?Constructor\]$/,y=/^(?:0|[1-9]\d*)$/,w={};w["[object Float32Array]"]=w["[object Float64Array]"]=w["[object Int8Array]"]=w["[object Int16Array]"]=w["[object Int32Array]"]=w["[object Uint8Array]"]=w["[object Uint8ClampedArray]"]=w["[object Uint16Array]"]=w["[object Uint32Array]"]=!0,w[r]=w["[object Array]"]=w["[object ArrayBuffer]"]=w["[object Boolean]"]=w["[object DataView]"]=w["[object Date]"]=w["[object Error]"]=w["[object Function]"]=w[c]=w["[object Number]"]=w[l]=w["[object RegExp]"]=w[n]=w["[object String]"]=w["[object WeakMap]"]=!1;var S=typeof o=="object"&&o&&o.Object===Object&&o,E=typeof self=="object"&&self&&self.Object===Object&&self,I=S||E||Function("return this")(),D=typeof u=="object"&&u&&!u.nodeType&&u,Z=D&&typeof s=="object"&&s&&!s.nodeType&&s,K=Z&&Z.exports===D&&S.process,z=(function(){try{return K&&K.binding("util")}catch{}})(),W=z&&z.isTypedArray;function Q(Kt,we,De,$e){for(var Tn=-1,Ze=Kt?Kt.length:0;++Tn<Ze;){var Xe=Kt[Tn];we($e,Xe,De(Xe),Kt)}return $e}function rt(Kt,we){for(var De=-1,$e=Kt?Kt.length:0;++De<$e;)if(we(Kt[De],De,Kt))return!0;return!1}function tt(Kt){var we=!1;if(Kt!=null&&typeof Kt.toString!="function")try{we=!!(Kt+"")}catch{}return we}function j(Kt){var we=-1,De=Array(Kt.size);return Kt.forEach((function($e,Tn){De[++we]=[Tn,$e]})),De}function F(Kt){var we=-1,De=Array(Kt.size);return Kt.forEach((function($e){De[++we]=$e})),De}var R,T,C,k=Array.prototype,M=Function.prototype,O=Object.prototype,P=I["__core-js_shared__"],H=(R=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"",et=M.toString,it=O.hasOwnProperty,pt=O.toString,X=RegExp("^"+et.call(it).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ut=I.Symbol,G=I.Uint8Array,U=O.propertyIsEnumerable,st=k.splice,gt=(T=Object.keys,C=Object,function(Kt){return T(C(Kt))}),zt=Ln(I,"DataView"),St=Ln(I,"Map"),Bt=Ln(I,"Promise"),ie=Ln(I,"Set"),re=Ln(I,"WeakMap"),Ct=Ln(Object,"create"),Yt=ye(zt),Qt=ye(St),Ht=ye(Bt),Jt=ye(ie),ne=ye(re),ae=ut?ut.prototype:void 0,me=ae?ae.valueOf:void 0,Le=ae?ae.toString:void 0;function Pe(Kt){var we=-1,De=Kt?Kt.length:0;for(this.clear();++we<De;){var $e=Kt[we];this.set($e[0],$e[1])}}function Be(Kt){var we=-1,De=Kt?Kt.length:0;for(this.clear();++we<De;){var $e=Kt[we];this.set($e[0],$e[1])}}function He(Kt){var we=-1,De=Kt?Kt.length:0;for(this.clear();++we<De;){var $e=Kt[we];this.set($e[0],$e[1])}}function Je(Kt){var we=-1,De=Kt?Kt.length:0;for(this.__data__=new He;++we<De;)this.add(Kt[we])}function sn(Kt){this.__data__=new Be(Kt)}function un(Kt,we){var De=gn(Kt)||fn(Kt)?(function(Xe,vn){for(var Dn=-1,Bn=Array(Xe);++Dn<Xe;)Bn[Dn]=vn(Dn);return Bn})(Kt.length,String):[],$e=De.length,Tn=!!$e;for(var Ze in Kt)!it.call(Kt,Ze)||Tn&&(Ze=="length"||Zn(Ze,$e))||De.push(Ze);return De}function an(Kt,we){for(var De=Kt.length;De--;)if(qe(Kt[De][0],we))return De;return-1}function ge(Kt,we,De,$e){return Ke(Kt,(function(Tn,Ze,Xe){we($e,Tn,De(Tn),Xe)})),$e}Pe.prototype.clear=function(){this.__data__=Ct?Ct(null):{}},Pe.prototype.delete=function(Kt){return this.has(Kt)&&delete this.__data__[Kt]},Pe.prototype.get=function(Kt){var we=this.__data__;if(Ct){var De=we[Kt];return De==="__lodash_hash_undefined__"?void 0:De}return it.call(we,Kt)?we[Kt]:void 0},Pe.prototype.has=function(Kt){var we=this.__data__;return Ct?we[Kt]!==void 0:it.call(we,Kt)},Pe.prototype.set=function(Kt,we){return this.__data__[Kt]=Ct&&we===void 0?"__lodash_hash_undefined__":we,this},Be.prototype.clear=function(){this.__data__=[]},Be.prototype.delete=function(Kt){var we=this.__data__,De=an(we,Kt);return!(De<0)&&(De==we.length-1?we.pop():st.call(we,De,1),!0)},Be.prototype.get=function(Kt){var we=this.__data__,De=an(we,Kt);return De<0?void 0:we[De][1]},Be.prototype.has=function(Kt){return an(this.__data__,Kt)>-1},Be.prototype.set=function(Kt,we){var De=this.__data__,$e=an(De,Kt);return $e<0?De.push([Kt,we]):De[$e][1]=we,this},He.prototype.clear=function(){this.__data__={hash:new Pe,map:new(St||Be),string:new Pe}},He.prototype.delete=function(Kt){return Ge(this,Kt).delete(Kt)},He.prototype.get=function(Kt){return Ge(this,Kt).get(Kt)},He.prototype.has=function(Kt){return Ge(this,Kt).has(Kt)},He.prototype.set=function(Kt,we){return Ge(this,Kt).set(Kt,we),this},Je.prototype.add=Je.prototype.push=function(Kt){return this.__data__.set(Kt,"__lodash_hash_undefined__"),this},Je.prototype.has=function(Kt){return this.__data__.has(Kt)},sn.prototype.clear=function(){this.__data__=new Be},sn.prototype.delete=function(Kt){return this.__data__.delete(Kt)},sn.prototype.get=function(Kt){return this.__data__.get(Kt)},sn.prototype.has=function(Kt){return this.__data__.has(Kt)},sn.prototype.set=function(Kt,we){var De=this.__data__;if(De instanceof Be){var $e=De.__data__;if(!St||$e.length<199)return $e.push([Kt,we]),this;De=this.__data__=new He($e)}return De.set(Kt,we),this};var Ve,Ke=(Ve=function(Kt,we){return Kt&&dn(Kt,we,Cr)},function(Kt,we){if(Kt==null)return Kt;if(!wn(Kt))return Ve(Kt,we);for(var De=Kt.length,$e=-1,Tn=Object(Kt);++$e<De&&we(Tn[$e],$e,Tn)!==!1;);return Kt}),dn=(function(Kt){return function(we,De,$e){for(var Tn=-1,Ze=Object(we),Xe=$e(we),vn=Xe.length;vn--;){var Dn=Xe[++Tn];if(De(Ze[Dn],Dn,Ze)===!1)break}return we}})();function ln(Kt,we){for(var De=0,$e=(we=cn(we,Kt)?[we]:Cn(we)).length;Kt!=null&&De<$e;)Kt=Kt[ue(we[De++])];return De&&De==$e?Kt:void 0}function $n(Kt,we){return Kt!=null&&we in Object(Kt)}function hr(Kt,we,De,$e,Tn){return Kt===we||(Kt==null||we==null||!Fn(Kt)&&!pr(we)?Kt!=Kt&&we!=we:(function(Ze,Xe,vn,Dn,Bn,kn){var xn=gn(Ze),En=gn(Xe),Un="[object Array]",Vn="[object Array]";xn||(Un=(Un=ir(Ze))==r?l:Un),En||(Vn=(Vn=ir(Xe))==r?l:Vn);var Ar=Un==l&&!tt(Ze),Vr=Vn==l&&!tt(Xe),In=Un==Vn;if(In&&!Ar)return kn||(kn=new sn),xn||Nr(Ze)?br(Ze,Xe,vn,Dn,Bn,kn):(function(yr,er,ai,wr,ns,Or,kr){switch(ai){case"[object DataView]":if(yr.byteLength!=er.byteLength||yr.byteOffset!=er.byteOffset)return!1;yr=yr.buffer,er=er.buffer;case"[object ArrayBuffer]":return!(yr.byteLength!=er.byteLength||!wr(new G(yr),new G(er)));case"[object Boolean]":case"[object Date]":case"[object Number]":return qe(+yr,+er);case"[object Error]":return yr.name==er.name&&yr.message==er.message;case"[object RegExp]":case"[object String]":return yr==er+"";case c:var ms=j;case n:var wo=2&Or;if(ms||(ms=F),yr.size!=er.size&&!wo)return!1;var Vs=kr.get(yr);if(Vs)return Vs==er;Or|=1,kr.set(yr,er);var li=br(ms(yr),ms(er),wr,ns,Or,kr);return kr.delete(yr),li;case"[object Symbol]":if(me)return me.call(yr)==me.call(er)}return!1})(Ze,Xe,Un,vn,Dn,Bn,kn);if(!(2&Bn)){var mr=Ar&&it.call(Ze,"__wrapped__"),ps=Vr&&it.call(Xe,"__wrapped__");if(mr||ps){var di=mr?Ze.value():Ze,lr=ps?Xe.value():Xe;return kn||(kn=new sn),vn(di,lr,Dn,Bn,kn)}}return In?(kn||(kn=new sn),(function(yr,er,ai,wr,ns,Or){var kr=2&ns,ms=Cr(yr),wo=ms.length,Vs=Cr(er).length;if(wo!=Vs&&!kr)return!1;for(var li=wo;li--;){var vi=ms[li];if(!(kr?vi in er:it.call(er,vi)))return!1}var gs=Or.get(yr);if(gs&&Or.get(er))return gs==er;var ao=!0;Or.set(yr,er),Or.set(er,yr);for(var Rr=kr;++li<wo;){vi=ms[li];var rs=yr[vi],bs=er[vi];if(wr)var xi=kr?wr(bs,rs,vi,er,yr,Or):wr(rs,bs,vi,yr,er,Or);if(!(xi===void 0?rs===bs||ai(rs,bs,wr,ns,Or):xi)){ao=!1;break}Rr||(Rr=vi=="constructor")}if(ao&&!Rr){var Nn=yr.constructor,ci=er.constructor;Nn==ci||!("constructor"in yr)||!("constructor"in er)||typeof Nn=="function"&&Nn instanceof Nn&&typeof ci=="function"&&ci instanceof ci||(ao=!1)}return Or.delete(yr),Or.delete(er),ao})(Ze,Xe,vn,Dn,Bn,kn)):!1})(Kt,we,hr,De,$e,Tn))}function Ye(Kt){return!(!Fn(Kt)||(function(we){return!!H&&H in we})(Kt))&&(bn(Kt)||tt(Kt)?X:x).test(ye(Kt))}function Xn(Kt){return typeof Kt=="function"?Kt:Kt==null?oi:typeof Kt=="object"?gn(Kt)?(function($e,Tn){return cn($e)&&Qn(Tn)?qn(ue($e),Tn):function(Ze){var Xe=(function(vn,Dn,Bn){var kn=vn==null?void 0:ln(vn,Dn);return kn===void 0?Bn:kn})(Ze,$e);return Xe===void 0&&Xe===Tn?(function(vn,Dn){return vn!=null&&(function(Bn,kn,xn){kn=cn(kn,Bn)?[kn]:Cn(kn);for(var En,Un=-1,Vn=kn.length;++Un<Vn;){var Ar=ue(kn[Un]);if(!(En=Bn!=null&&xn(Bn,Ar)))break;Bn=Bn[Ar]}return En||!!(Vn=Bn?Bn.length:0)&&Sn(Vn)&&Zn(Ar,Vn)&&(gn(Bn)||fn(Bn))})(vn,Dn,$n)})(Ze,$e):hr(Tn,Xe,void 0,3)}})(Kt[0],Kt[1]):(function($e){var Tn=(function(Ze){for(var Xe=Cr(Ze),vn=Xe.length;vn--;){var Dn=Xe[vn],Bn=Ze[Dn];Xe[vn]=[Dn,Bn,Qn(Bn)]}return Xe})($e);return Tn.length==1&&Tn[0][2]?qn(Tn[0][0],Tn[0][1]):function(Ze){return Ze===$e||(function(Xe,vn,Dn,Bn){var kn=Dn.length,xn=kn;if(Xe==null)return!xn;for(Xe=Object(Xe);kn--;){var En=Dn[kn];if(En[2]?En[1]!==Xe[En[0]]:!(En[0]in Xe))return!1}for(;++kn<xn;){var Un=(En=Dn[kn])[0],Vn=Xe[Un],Ar=En[1];if(En[2]){if(Vn===void 0&&!(Un in Xe))return!1}else{var Vr=new sn,In;if(!(In===void 0?hr(Ar,Vn,Bn,3,Vr):In))return!1}}return!0})(Ze,$e,Tn)}})(Kt):cn(we=Kt)?(De=ue(we),function($e){return $e?.[De]}):(function($e){return function(Tn){return ln(Tn,$e)}})(we);var we,De}function Wn(Kt){if(De=(we=Kt)&&we.constructor,$e=typeof De=="function"&&De.prototype||O,we!==$e)return gt(Kt);var we,De,$e,Tn=[];for(var Ze in Object(Kt))it.call(Kt,Ze)&&Ze!="constructor"&&Tn.push(Ze);return Tn}function Cn(Kt){return gn(Kt)?Kt:jn(Kt)}function br(Kt,we,De,$e,Tn,Ze){var Xe=2&Tn,vn=Kt.length,Dn=we.length;if(vn!=Dn&&!(Xe&&Dn>vn))return!1;var Bn=Ze.get(Kt);if(Bn&&Ze.get(we))return Bn==we;var kn=-1,xn=!0,En=1&Tn?new Je:void 0;for(Ze.set(Kt,we),Ze.set(we,Kt);++kn<vn;){var Un=Kt[kn],Vn=we[kn];if($e)var Ar=Xe?$e(Vn,Un,kn,we,Kt,Ze):$e(Un,Vn,kn,Kt,we,Ze);if(Ar!==void 0){if(Ar)continue;xn=!1;break}if(En){if(!rt(we,(function(Vr,In){if(!En.has(In)&&(Un===Vr||De(Un,Vr,$e,Tn,Ze)))return En.add(In)}))){xn=!1;break}}else if(Un!==Vn&&!De(Un,Vn,$e,Tn,Ze)){xn=!1;break}}return Ze.delete(Kt),Ze.delete(we),xn}function Ge(Kt,we){var De,$e,Tn=Kt.__data__;return(($e=typeof(De=we))=="string"||$e=="number"||$e=="symbol"||$e=="boolean"?De!=="__proto__":De===null)?Tn[typeof we=="string"?"string":"hash"]:Tn.map}function Ln(Kt,we){var De=(function($e,Tn){return $e?.[Tn]})(Kt,we);return Ye(De)?De:void 0}var ir=function(Kt){return pt.call(Kt)};function Zn(Kt,we){return!!(we=we??9007199254740991)&&(typeof Kt=="number"||y.test(Kt))&&Kt>-1&&Kt%1==0&&Kt<we}function cn(Kt,we){if(gn(Kt))return!1;var De=typeof Kt;return!(De!="number"&&De!="symbol"&&De!="boolean"&&Kt!=null&&!Gn(Kt))||h.test(Kt)||!f.test(Kt)||we!=null&&Kt in Object(we)}function Qn(Kt){return Kt==Kt&&!Fn(Kt)}function qn(Kt,we){return function(De){return De!=null&&De[Kt]===we&&(we!==void 0||Kt in Object(De))}}(zt&&ir(new zt(new ArrayBuffer(1)))!="[object DataView]"||St&&ir(new St)!=c||Bt&&ir(Bt.resolve())!="[object Promise]"||ie&&ir(new ie)!=n||re&&ir(new re)!="[object WeakMap]")&&(ir=function(Kt){var we=pt.call(Kt),De=we==l?Kt.constructor:void 0,$e=De?ye(De):void 0;if($e)switch($e){case Yt:return"[object DataView]";case Qt:return c;case Ht:return"[object Promise]";case Jt:return n;case ne:return"[object WeakMap]"}return we});var jn=yn((function(Kt){var we;Kt=(we=Kt)==null?"":(function($e){if(typeof $e=="string")return $e;if(Gn($e))return Le?Le.call($e):"";var Tn=$e+"";return Tn=="0"&&1/$e==-1/0?"-0":Tn})(we);var De=[];return p.test(Kt)&&De.push(""),Kt.replace(g,(function($e,Tn,Ze,Xe){De.push(Ze?Xe.replace(v,"$1"):Tn||$e)})),De}));function ue(Kt){if(typeof Kt=="string"||Gn(Kt))return Kt;var we=Kt+"";return we=="0"&&1/Kt==-1/0?"-0":we}function ye(Kt){if(Kt!=null){try{return et.call(Kt)}catch{}try{return Kt+""}catch{}}return""}var be,Qe=(be=function(Kt,we,De){it.call(Kt,De)?Kt[De].push(we):Kt[De]=[we]},function(Kt,we){var De=gn(Kt)?Q:ge,$e={};return De(Kt,be,Xn(we),$e)});function yn(Kt,we){if(typeof Kt!="function"||we&&typeof we!="function")throw new TypeError("Expected a function");var De=function(){var $e=arguments,Tn=we?we.apply(this,$e):$e[0],Ze=De.cache;if(Ze.has(Tn))return Ze.get(Tn);var Xe=Kt.apply(this,$e);return De.cache=Ze.set(Tn,Xe),Xe};return De.cache=new(yn.Cache||He),De}function qe(Kt,we){return Kt===we||Kt!=Kt&&we!=we}function fn(Kt){return(function(we){return pr(we)&&wn(we)})(Kt)&&it.call(Kt,"callee")&&(!U.call(Kt,"callee")||pt.call(Kt)==r)}yn.Cache=He;var gn=Array.isArray;function wn(Kt){return Kt!=null&&Sn(Kt.length)&&!bn(Kt)}function bn(Kt){var we=Fn(Kt)?pt.call(Kt):"";return we=="[object Function]"||we=="[object GeneratorFunction]"}function Sn(Kt){return typeof Kt=="number"&&Kt>-1&&Kt%1==0&&Kt<=9007199254740991}function Fn(Kt){var we=typeof Kt;return!!Kt&&(we=="object"||we=="function")}function pr(Kt){return!!Kt&&typeof Kt=="object"}function Gn(Kt){return typeof Kt=="symbol"||pr(Kt)&&pt.call(Kt)=="[object Symbol]"}var Nr=W?(function(Kt){return function(we){return Kt(we)}})(W):function(Kt){return pr(Kt)&&Sn(Kt.length)&&!!w[pt.call(Kt)]};function Cr(Kt){return wn(Kt)?un(Kt):Wn(Kt)}function oi(Kt){return Kt}s.exports=Qe}).call(this)}).call(this,typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],444:[function(t,s,u){var o=Object.prototype.toString;s.exports=function(r){return r===!0||r===!1||(function(c){return!!c&&typeof c=="object"})(r)&&o.call(r)=="[object Boolean]"}},{}],445:[function(t,s,u){(function(o){(function(){var r="[object Arguments]",c="[object Map]",l="[object Object]",n="[object Set]",f=/^\[object .+?Constructor\]$/,h=/^(?:0|[1-9]\d*)$/,p={};p["[object Float32Array]"]=p["[object Float64Array]"]=p["[object Int8Array]"]=p["[object Int16Array]"]=p["[object Int32Array]"]=p["[object Uint8Array]"]=p["[object Uint8ClampedArray]"]=p["[object Uint16Array]"]=p["[object Uint32Array]"]=!0,p[r]=p["[object Array]"]=p["[object ArrayBuffer]"]=p["[object Boolean]"]=p["[object DataView]"]=p["[object Date]"]=p["[object Error]"]=p["[object Function]"]=p[c]=p["[object Number]"]=p[l]=p["[object RegExp]"]=p[n]=p["[object String]"]=p["[object WeakMap]"]=!1;var g=typeof o=="object"&&o&&o.Object===Object&&o,v=typeof self=="object"&&self&&self.Object===Object&&self,x=g||v||Function("return this")(),y=typeof u=="object"&&u&&!u.nodeType&&u,w=y&&typeof s=="object"&&s&&!s.nodeType&&s,S=w&&w.exports===y,E=S&&g.process,I=(function(){try{return E&&E.binding&&E.binding("util")}catch{}})(),D=I&&I.isTypedArray;function Z(ue,ye){for(var be=-1,Qe=ue==null?0:ue.length;++be<Qe;)if(ye(ue[be],be,ue))return!0;return!1}function K(ue){var ye=-1,be=Array(ue.size);return ue.forEach((function(Qe,yn){be[++ye]=[yn,Qe]})),be}function z(ue){var ye=-1,be=Array(ue.size);return ue.forEach((function(Qe){be[++ye]=Qe})),be}var W,Q,rt,tt=Array.prototype,j=Function.prototype,F=Object.prototype,R=x["__core-js_shared__"],T=j.toString,C=F.hasOwnProperty,k=(W=/[^.]+$/.exec(R&&R.keys&&R.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",M=F.toString,O=RegExp("^"+T.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=S?x.Buffer:void 0,H=x.Symbol,et=x.Uint8Array,it=F.propertyIsEnumerable,pt=tt.splice,X=H?H.toStringTag:void 0,ut=Object.getOwnPropertySymbols,G=P?P.isBuffer:void 0,U=(Q=Object.keys,rt=Object,function(ue){return Q(rt(ue))}),st=$n(x,"DataView"),gt=$n(x,"Map"),zt=$n(x,"Promise"),St=$n(x,"Set"),Bt=$n(x,"WeakMap"),ie=$n(Object,"create"),re=Wn(st),Ct=Wn(gt),Yt=Wn(zt),Qt=Wn(St),Ht=Wn(Bt),Jt=H?H.prototype:void 0,ne=Jt?Jt.valueOf:void 0;function ae(ue){var ye=-1,be=ue==null?0:ue.length;for(this.clear();++ye<be;){var Qe=ue[ye];this.set(Qe[0],Qe[1])}}function me(ue){var ye=-1,be=ue==null?0:ue.length;for(this.clear();++ye<be;){var Qe=ue[ye];this.set(Qe[0],Qe[1])}}function Le(ue){var ye=-1,be=ue==null?0:ue.length;for(this.clear();++ye<be;){var Qe=ue[ye];this.set(Qe[0],Qe[1])}}function Pe(ue){var ye=-1,be=ue==null?0:ue.length;for(this.__data__=new Le;++ye<be;)this.add(ue[ye])}function Be(ue){var ye=this.__data__=new me(ue);this.size=ye.size}function He(ue,ye){var be=Ge(ue),Qe=!be&&br(ue),yn=!be&&!Qe&&Ln(ue),qe=!be&&!Qe&&!yn&&qn(ue),fn=be||Qe||yn||qe,gn=fn?(function(Sn,Fn){for(var pr=-1,Gn=Array(Sn);++pr<Sn;)Gn[pr]=Fn(pr);return Gn})(ue.length,String):[],wn=gn.length;for(var bn in ue)!C.call(ue,bn)||fn&&(bn=="length"||yn&&(bn=="offset"||bn=="parent")||qe&&(bn=="buffer"||bn=="byteLength"||bn=="byteOffset")||Xn(bn,wn))||gn.push(bn);return gn}function Je(ue,ye){for(var be=ue.length;be--;)if(Cn(ue[be][0],ye))return be;return-1}function sn(ue){return ue==null?ue===void 0?"[object Undefined]":"[object Null]":X&&X in Object(ue)?(function(ye){var be=C.call(ye,X),Qe=ye[X];try{ye[X]=void 0;var yn=!0}catch{}var qe=M.call(ye);return yn&&(be?ye[X]=Qe:delete ye[X]),qe})(ue):(function(ye){return M.call(ye)})(ue)}function un(ue){return Qn(ue)&&sn(ue)==r}function an(ue,ye,be,Qe,yn){return ue===ye||(ue==null||ye==null||!Qn(ue)&&!Qn(ye)?ue!=ue&&ye!=ye:(function(qe,fn,gn,wn,bn,Sn){var Fn=Ge(qe),pr=Ge(fn),Gn=Fn?"[object Array]":Ye(qe),Nr=pr?"[object Array]":Ye(fn),Cr=(Gn=Gn==r?l:Gn)==l,oi=(Nr=Nr==r?l:Nr)==l,Kt=Gn==Nr;if(Kt&&Ln(qe)){if(!Ln(fn))return!1;Fn=!0,Cr=!1}if(Kt&&!Cr)return Sn||(Sn=new Be),Fn||qn(qe)?Ke(qe,fn,gn,wn,bn,Sn):(function(Ze,Xe,vn,Dn,Bn,kn,xn){switch(vn){case"[object DataView]":if(Ze.byteLength!=Xe.byteLength||Ze.byteOffset!=Xe.byteOffset)return!1;Ze=Ze.buffer,Xe=Xe.buffer;case"[object ArrayBuffer]":return!(Ze.byteLength!=Xe.byteLength||!kn(new et(Ze),new et(Xe)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Cn(+Ze,+Xe);case"[object Error]":return Ze.name==Xe.name&&Ze.message==Xe.message;case"[object RegExp]":case"[object String]":return Ze==Xe+"";case c:var En=K;case n:var Un=1&Dn;if(En||(En=z),Ze.size!=Xe.size&&!Un)return!1;var Vn=xn.get(Ze);if(Vn)return Vn==Xe;Dn|=2,xn.set(Ze,Xe);var Ar=Ke(En(Ze),En(Xe),Dn,Bn,kn,xn);return xn.delete(Ze),Ar;case"[object Symbol]":if(ne)return ne.call(Ze)==ne.call(Xe)}return!1})(qe,fn,Gn,gn,wn,bn,Sn);if(!(1&gn)){var we=Cr&&C.call(qe,"__wrapped__"),De=oi&&C.call(fn,"__wrapped__");if(we||De){var $e=we?qe.value():qe,Tn=De?fn.value():fn;return Sn||(Sn=new Be),bn($e,Tn,gn,wn,Sn)}}return Kt?(Sn||(Sn=new Be),(function(Ze,Xe,vn,Dn,Bn,kn){var xn=1&vn,En=dn(Ze),Un=En.length,Vn=dn(Xe).length;if(Un!=Vn&&!xn)return!1;for(var Ar=Un;Ar--;){var Vr=En[Ar];if(!(xn?Vr in Xe:C.call(Xe,Vr)))return!1}var In=kn.get(Ze);if(In&&kn.get(Xe))return In==Xe;var mr=!0;kn.set(Ze,Xe),kn.set(Xe,Ze);for(var ps=xn;++Ar<Un;){Vr=En[Ar];var di=Ze[Vr],lr=Xe[Vr];if(Dn)var yr=xn?Dn(lr,di,Vr,Xe,Ze,kn):Dn(di,lr,Vr,Ze,Xe,kn);if(!(yr===void 0?di===lr||Bn(di,lr,vn,Dn,kn):yr)){mr=!1;break}ps||(ps=Vr=="constructor")}if(mr&&!ps){var er=Ze.constructor,ai=Xe.constructor;er==ai||!("constructor"in Ze)||!("constructor"in Xe)||typeof er=="function"&&er instanceof er&&typeof ai=="function"&&ai instanceof ai||(mr=!1)}return kn.delete(Ze),kn.delete(Xe),mr})(qe,fn,gn,wn,bn,Sn)):!1})(ue,ye,be,Qe,an,yn))}function ge(ue){return!(!cn(ue)||(function(ye){return!!k&&k in ye})(ue))&&(ir(ue)?O:f).test(Wn(ue))}function Ve(ue){if(be=(ye=ue)&&ye.constructor,Qe=typeof be=="function"&&be.prototype||F,ye!==Qe)return U(ue);var ye,be,Qe,yn=[];for(var qe in Object(ue))C.call(ue,qe)&&qe!="constructor"&&yn.push(qe);return yn}function Ke(ue,ye,be,Qe,yn,qe){var fn=1&be,gn=ue.length,wn=ye.length;if(gn!=wn&&!(fn&&wn>gn))return!1;var bn=qe.get(ue);if(bn&&qe.get(ye))return bn==ye;var Sn=-1,Fn=!0,pr=2&be?new Pe:void 0;for(qe.set(ue,ye),qe.set(ye,ue);++Sn<gn;){var Gn=ue[Sn],Nr=ye[Sn];if(Qe)var Cr=fn?Qe(Nr,Gn,Sn,ye,ue,qe):Qe(Gn,Nr,Sn,ue,ye,qe);if(Cr!==void 0){if(Cr)continue;Fn=!1;break}if(pr){if(!Z(ye,(function(oi,Kt){if(we=Kt,!pr.has(we)&&(Gn===oi||yn(Gn,oi,be,Qe,qe)))return pr.push(Kt);var we}))){Fn=!1;break}}else if(Gn!==Nr&&!yn(Gn,Nr,be,Qe,qe)){Fn=!1;break}}return qe.delete(ue),qe.delete(ye),Fn}function dn(ue){return(function(ye,be,Qe){var yn=be(ye);return Ge(ye)?yn:(function(qe,fn){for(var gn=-1,wn=fn.length,bn=qe.length;++gn<wn;)qe[bn+gn]=fn[gn];return qe})(yn,Qe(ye))})(ue,jn,hr)}function ln(ue,ye){var be,Qe,yn=ue.__data__;return((Qe=typeof(be=ye))=="string"||Qe=="number"||Qe=="symbol"||Qe=="boolean"?be!=="__proto__":be===null)?yn[typeof ye=="string"?"string":"hash"]:yn.map}function $n(ue,ye){var be=(function(Qe,yn){return Qe?.[yn]})(ue,ye);return ge(be)?be:void 0}ae.prototype.clear=function(){this.__data__=ie?ie(null):{},this.size=0},ae.prototype.delete=function(ue){var ye=this.has(ue)&&delete this.__data__[ue];return this.size-=ye?1:0,ye},ae.prototype.get=function(ue){var ye=this.__data__;if(ie){var be=ye[ue];return be==="__lodash_hash_undefined__"?void 0:be}return C.call(ye,ue)?ye[ue]:void 0},ae.prototype.has=function(ue){var ye=this.__data__;return ie?ye[ue]!==void 0:C.call(ye,ue)},ae.prototype.set=function(ue,ye){var be=this.__data__;return this.size+=this.has(ue)?0:1,be[ue]=ie&&ye===void 0?"__lodash_hash_undefined__":ye,this},me.prototype.clear=function(){this.__data__=[],this.size=0},me.prototype.delete=function(ue){var ye=this.__data__,be=Je(ye,ue);return!(be<0)&&(be==ye.length-1?ye.pop():pt.call(ye,be,1),--this.size,!0)},me.prototype.get=function(ue){var ye=this.__data__,be=Je(ye,ue);return be<0?void 0:ye[be][1]},me.prototype.has=function(ue){return Je(this.__data__,ue)>-1},me.prototype.set=function(ue,ye){var be=this.__data__,Qe=Je(be,ue);return Qe<0?(++this.size,be.push([ue,ye])):be[Qe][1]=ye,this},Le.prototype.clear=function(){this.size=0,this.__data__={hash:new ae,map:new(gt||me),string:new ae}},Le.prototype.delete=function(ue){var ye=ln(this,ue).delete(ue);return this.size-=ye?1:0,ye},Le.prototype.get=function(ue){return ln(this,ue).get(ue)},Le.prototype.has=function(ue){return ln(this,ue).has(ue)},Le.prototype.set=function(ue,ye){var be=ln(this,ue),Qe=be.size;return be.set(ue,ye),this.size+=be.size==Qe?0:1,this},Pe.prototype.add=Pe.prototype.push=function(ue){return this.__data__.set(ue,"__lodash_hash_undefined__"),this},Pe.prototype.has=function(ue){return this.__data__.has(ue)},Be.prototype.clear=function(){this.__data__=new me,this.size=0},Be.prototype.delete=function(ue){var ye=this.__data__,be=ye.delete(ue);return this.size=ye.size,be},Be.prototype.get=function(ue){return this.__data__.get(ue)},Be.prototype.has=function(ue){return this.__data__.has(ue)},Be.prototype.set=function(ue,ye){var be=this.__data__;if(be instanceof me){var Qe=be.__data__;if(!gt||Qe.length<199)return Qe.push([ue,ye]),this.size=++be.size,this;be=this.__data__=new Le(Qe)}return be.set(ue,ye),this.size=be.size,this};var hr=ut?function(ue){return ue==null?[]:(ue=Object(ue),(function(ye,be){for(var Qe=-1,yn=ye==null?0:ye.length,qe=0,fn=[];++Qe<yn;){var gn=ye[Qe];be(gn,Qe,ye)&&(fn[qe++]=gn)}return fn})(ut(ue),(function(ye){return it.call(ue,ye)})))}:function(){return[]},Ye=sn;function Xn(ue,ye){return!!(ye=ye??9007199254740991)&&(typeof ue=="number"||h.test(ue))&&ue>-1&&ue%1==0&&ue<ye}function Wn(ue){if(ue!=null){try{return T.call(ue)}catch{}try{return ue+""}catch{}}return""}function Cn(ue,ye){return ue===ye||ue!=ue&&ye!=ye}(st&&Ye(new st(new ArrayBuffer(1)))!="[object DataView]"||gt&&Ye(new gt)!=c||zt&&Ye(zt.resolve())!="[object Promise]"||St&&Ye(new St)!=n||Bt&&Ye(new Bt)!="[object WeakMap]")&&(Ye=function(ue){var ye=sn(ue),be=ye==l?ue.constructor:void 0,Qe=be?Wn(be):"";if(Qe)switch(Qe){case re:return"[object DataView]";case Ct:return c;case Yt:return"[object Promise]";case Qt:return n;case Ht:return"[object WeakMap]"}return ye});var br=un((function(){return arguments})())?un:function(ue){return Qn(ue)&&C.call(ue,"callee")&&!it.call(ue,"callee")},Ge=Array.isArray,Ln=G||function(){return!1};function ir(ue){if(!cn(ue))return!1;var ye=sn(ue);return ye=="[object Function]"||ye=="[object GeneratorFunction]"||ye=="[object AsyncFunction]"||ye=="[object Proxy]"}function Zn(ue){return typeof ue=="number"&&ue>-1&&ue%1==0&&ue<=9007199254740991}function cn(ue){var ye=typeof ue;return ue!=null&&(ye=="object"||ye=="function")}function Qn(ue){return ue!=null&&typeof ue=="object"}var qn=D?(function(ue){return function(ye){return ue(ye)}})(D):function(ue){return Qn(ue)&&Zn(ue.length)&&!!p[sn(ue)]};function jn(ue){return(ye=ue)!=null&&Zn(ye.length)&&!ir(ye)?He(ue):Ve(ue);var ye}s.exports=function(ue,ye){return an(ue,ye)}}).call(this)}).call(this,typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],446:[function(t,s,u){(function(o){(function(){var r=typeof o=="object"&&o&&o.Object===Object&&o,c=typeof self=="object"&&self&&self.Object===Object&&self,l=r||c||Function("return this")(),n=Object.prototype,f=n.hasOwnProperty,h=n.toString,p=l.Symbol,g=p?p.toStringTag:void 0;function v(x){return x==null?x===void 0?"[object Undefined]":"[object Null]":g&&g in Object(x)?(function(y){var w=f.call(y,g),S=y[g];try{y[g]=void 0;var E=!0}catch{}var I=h.call(y);return E&&(w?y[g]=S:delete y[g]),I})(x):(function(y){return h.call(y)})(x)}s.exports=function(x){if(!(function(w){var S=typeof w;return w!=null&&(S=="object"||S=="function")})(x))return!1;var y=v(x);return y=="[object Function]"||y=="[object GeneratorFunction]"||y=="[object AsyncFunction]"||y=="[object Proxy]"}}).call(this)}).call(this,typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],447:[function(t,s,u){s.exports=function(o){return o==null}},{}],448:[function(t,s,u){s.exports=function(o){return o===void 0}},{}],449:[function(t,s,u){(function(o){(function(){var r=/^\[object .+?Constructor\]$/,c=typeof o=="object"&&o&&o.Object===Object&&o,l=typeof self=="object"&&self&&self.Object===Object&&self,n=c||l||Function("return this")();function f(H,et){return!!(H&&H.length)&&(function(it,pt,X){if(pt!=pt)return(function(U,st,gt,zt){for(var St=U.length,Bt=gt+-1;++Bt<St;)if(st(U[Bt],Bt,U))return Bt;return-1})(it,h,X);for(var ut=X-1,G=it.length;++ut<G;)if(it[ut]===pt)return ut;return-1})(H,et,0)>-1}function h(H){return H!=H}function p(H,et){return H.has(et)}function g(H){var et=-1,it=Array(H.size);return H.forEach((function(pt){it[++et]=pt})),it}var v,x=Array.prototype,y=Function.prototype,w=Object.prototype,S=n["__core-js_shared__"],E=(v=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",I=y.toString,D=w.hasOwnProperty,Z=w.toString,K=RegExp("^"+I.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),z=x.splice,W=O(n,"Map"),Q=O(n,"Set"),rt=O(Object,"create");function tt(H){var et=-1,it=H?H.length:0;for(this.clear();++et<it;){var pt=H[et];this.set(pt[0],pt[1])}}function j(H){var et=-1,it=H?H.length:0;for(this.clear();++et<it;){var pt=H[et];this.set(pt[0],pt[1])}}function F(H){var et=-1,it=H?H.length:0;for(this.clear();++et<it;){var pt=H[et];this.set(pt[0],pt[1])}}function R(H){var et=-1,it=H?H.length:0;for(this.__data__=new F;++et<it;)this.add(H[et])}function T(H,et){for(var it,pt,X=H.length;X--;)if((it=H[X][0])===(pt=et)||it!=it&&pt!=pt)return X;return-1}function C(H){return!(!P(H)||(et=H,E&&E in et))&&((function(it){var pt=P(it)?Z.call(it):"";return pt=="[object Function]"||pt=="[object GeneratorFunction]"})(H)||(function(it){var pt=!1;if(it!=null&&typeof it.toString!="function")try{pt=!!(it+"")}catch{}return pt})(H)?K:r).test((function(it){if(it!=null){try{return I.call(it)}catch{}try{return it+""}catch{}}return""})(H));var et}tt.prototype.clear=function(){this.__data__=rt?rt(null):{}},tt.prototype.delete=function(H){return this.has(H)&&delete this.__data__[H]},tt.prototype.get=function(H){var et=this.__data__;if(rt){var it=et[H];return it==="__lodash_hash_undefined__"?void 0:it}return D.call(et,H)?et[H]:void 0},tt.prototype.has=function(H){var et=this.__data__;return rt?et[H]!==void 0:D.call(et,H)},tt.prototype.set=function(H,et){return this.__data__[H]=rt&&et===void 0?"__lodash_hash_undefined__":et,this},j.prototype.clear=function(){this.__data__=[]},j.prototype.delete=function(H){var et=this.__data__,it=T(et,H);return!(it<0)&&(it==et.length-1?et.pop():z.call(et,it,1),!0)},j.prototype.get=function(H){var et=this.__data__,it=T(et,H);return it<0?void 0:et[it][1]},j.prototype.has=function(H){return T(this.__data__,H)>-1},j.prototype.set=function(H,et){var it=this.__data__,pt=T(it,H);return pt<0?it.push([H,et]):it[pt][1]=et,this},F.prototype.clear=function(){this.__data__={hash:new tt,map:new(W||j),string:new tt}},F.prototype.delete=function(H){return M(this,H).delete(H)},F.prototype.get=function(H){return M(this,H).get(H)},F.prototype.has=function(H){return M(this,H).has(H)},F.prototype.set=function(H,et){return M(this,H).set(H,et),this},R.prototype.add=R.prototype.push=function(H){return this.__data__.set(H,"__lodash_hash_undefined__"),this},R.prototype.has=function(H){return this.__data__.has(H)};var k=Q&&1/g(new Q([,-0]))[1]==1/0?function(H){return new Q(H)}:function(){};function M(H,et){var it,pt,X=H.__data__;return((pt=typeof(it=et))=="string"||pt=="number"||pt=="symbol"||pt=="boolean"?it!=="__proto__":it===null)?X[typeof et=="string"?"string":"hash"]:X.map}function O(H,et){var it=(function(pt,X){return pt?.[X]})(H,et);return C(it)?it:void 0}function P(H){var et=typeof H;return!!H&&(et=="object"||et=="function")}s.exports=function(H){return H&&H.length?(function(et,it,pt){var X=-1,ut=f,G=et.length,U=!0,st=[],gt=st;if(G>=200){var zt=k(et);if(zt)return g(zt);U=!1,ut=p,gt=new R}else gt=st;t:for(;++X<G;){var St=et[X],Bt=St;if(St=St!==0?St:0,U&&Bt==Bt){for(var ie=gt.length;ie--;)if(gt[ie]===Bt)continue t;st.push(St)}else ut(gt,Bt,pt)||(gt!==st&&gt.push(Bt),st.push(St))}return st})(H):[]}}).call(this)}).call(this,typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],450:[function(t,s,u){var o=t("inherits"),r=t("hash-base"),c=t("safe-buffer").Buffer,l=new Array(16);function n(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function f(x,y){return x<<y|x>>>32-y}function h(x,y,w,S,E,I,D){return f(x+(y&w|~y&S)+E+I|0,D)+y|0}function p(x,y,w,S,E,I,D){return f(x+(y&S|w&~S)+E+I|0,D)+y|0}function g(x,y,w,S,E,I,D){return f(x+(y^w^S)+E+I|0,D)+y|0}function v(x,y,w,S,E,I,D){return f(x+(w^(y|~S))+E+I|0,D)+y|0}o(n,r),n.prototype._update=function(){for(var x=l,y=0;y<16;++y)x[y]=this._block.readInt32LE(4*y);var w=this._a,S=this._b,E=this._c,I=this._d;w=h(w,S,E,I,x[0],3614090360,7),I=h(I,w,S,E,x[1],3905402710,12),E=h(E,I,w,S,x[2],606105819,17),S=h(S,E,I,w,x[3],3250441966,22),w=h(w,S,E,I,x[4],4118548399,7),I=h(I,w,S,E,x[5],1200080426,12),E=h(E,I,w,S,x[6],2821735955,17),S=h(S,E,I,w,x[7],4249261313,22),w=h(w,S,E,I,x[8],1770035416,7),I=h(I,w,S,E,x[9],2336552879,12),E=h(E,I,w,S,x[10],4294925233,17),S=h(S,E,I,w,x[11],2304563134,22),w=h(w,S,E,I,x[12],1804603682,7),I=h(I,w,S,E,x[13],4254626195,12),E=h(E,I,w,S,x[14],2792965006,17),w=p(w,S=h(S,E,I,w,x[15],1236535329,22),E,I,x[1],4129170786,5),I=p(I,w,S,E,x[6],3225465664,9),E=p(E,I,w,S,x[11],643717713,14),S=p(S,E,I,w,x[0],3921069994,20),w=p(w,S,E,I,x[5],3593408605,5),I=p(I,w,S,E,x[10],38016083,9),E=p(E,I,w,S,x[15],3634488961,14),S=p(S,E,I,w,x[4],3889429448,20),w=p(w,S,E,I,x[9],568446438,5),I=p(I,w,S,E,x[14],3275163606,9),E=p(E,I,w,S,x[3],4107603335,14),S=p(S,E,I,w,x[8],1163531501,20),w=p(w,S,E,I,x[13],2850285829,5),I=p(I,w,S,E,x[2],4243563512,9),E=p(E,I,w,S,x[7],1735328473,14),w=g(w,S=p(S,E,I,w,x[12],2368359562,20),E,I,x[5],4294588738,4),I=g(I,w,S,E,x[8],2272392833,11),E=g(E,I,w,S,x[11],1839030562,16),S=g(S,E,I,w,x[14],4259657740,23),w=g(w,S,E,I,x[1],2763975236,4),I=g(I,w,S,E,x[4],1272893353,11),E=g(E,I,w,S,x[7],4139469664,16),S=g(S,E,I,w,x[10],3200236656,23),w=g(w,S,E,I,x[13],681279174,4),I=g(I,w,S,E,x[0],3936430074,11),E=g(E,I,w,S,x[3],3572445317,16),S=g(S,E,I,w,x[6],76029189,23),w=g(w,S,E,I,x[9],3654602809,4),I=g(I,w,S,E,x[12],3873151461,11),E=g(E,I,w,S,x[15],530742520,16),w=v(w,S=g(S,E,I,w,x[2],3299628645,23),E,I,x[0],4096336452,6),I=v(I,w,S,E,x[7],1126891415,10),E=v(E,I,w,S,x[14],2878612391,15),S=v(S,E,I,w,x[5],4237533241,21),w=v(w,S,E,I,x[12],1700485571,6),I=v(I,w,S,E,x[3],2399980690,10),E=v(E,I,w,S,x[10],4293915773,15),S=v(S,E,I,w,x[1],2240044497,21),w=v(w,S,E,I,x[8],1873313359,6),I=v(I,w,S,E,x[15],4264355552,10),E=v(E,I,w,S,x[6],2734768916,15),S=v(S,E,I,w,x[13],1309151649,21),w=v(w,S,E,I,x[4],4149444226,6),I=v(I,w,S,E,x[11],3174756917,10),E=v(E,I,w,S,x[2],718787259,15),S=v(S,E,I,w,x[9],3951481745,21),this._a=this._a+w|0,this._b=this._b+S|0,this._c=this._c+E|0,this._d=this._d+I|0},n.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var x=c.allocUnsafe(16);return x.writeInt32LE(this._a,0),x.writeInt32LE(this._b,4),x.writeInt32LE(this._c,8),x.writeInt32LE(this._d,12),x},s.exports=n},{"hash-base":425,inherits:440,"safe-buffer":494}],451:[function(t,s,u){var o=t("bn.js"),r=t("brorand");function c(l){this.rand=l||new r.Rand}s.exports=c,c.create=function(l){return new c(l)},c.prototype._randbelow=function(l){var n=l.bitLength(),f=Math.ceil(n/8);do var h=new o(this.rand.generate(f));while(h.cmp(l)>=0);return h},c.prototype._randrange=function(l,n){var f=n.sub(l);return l.add(this._randbelow(f))},c.prototype.test=function(l,n,f){var h=l.bitLength(),p=o.mont(l),g=new o(1).toRed(p);n||(n=Math.max(1,h/48|0));for(var v=l.subn(1),x=0;!v.testn(x);x++);for(var y=l.shrn(x),w=v.toRed(p);n>0;n--){var S=this._randrange(new o(2),v);f&&f(S);var E=S.toRed(p).redPow(y);if(E.cmp(g)!==0&&E.cmp(w)!==0){for(var I=1;I<x;I++){if((E=E.redSqr()).cmp(g)===0)return!1;if(E.cmp(w)===0)break}if(I===x)return!1}}return!0},c.prototype.getDivisor=function(l,n){var f=l.bitLength(),h=o.mont(l),p=new o(1).toRed(h);n||(n=Math.max(1,f/48|0));for(var g=l.subn(1),v=0;!g.testn(v);v++);for(var x=l.shrn(v),y=g.toRed(h);n>0;n--){var w=this._randrange(new o(2),g),S=l.gcd(w);if(S.cmpn(1)!==0)return S;var E=w.toRed(h).redPow(x);if(E.cmp(p)!==0&&E.cmp(y)!==0){for(var I=1;I<v;I++){if((E=E.redSqr()).cmp(p)===0)return E.fromRed().subn(1).gcd(l);if(E.cmp(y)===0)break}if(I===v)return(E=E.redSqr()).fromRed().subn(1).gcd(l)}}return!1}},{"bn.js":452,brorand:187}],452:[function(t,s,u){arguments[4][184][0].apply(u,arguments)},{buffer:188,dup:184}],453:[function(t,s,u){function o(r,c){if(!r)throw new Error(c||"Assertion failed")}s.exports=o,o.equal=function(r,c,l){if(r!=c)throw new Error(l||"Assertion failed: "+r+" != "+c)}},{}],454:[function(t,s,u){var o=u;function r(l){return l.length===1?"0"+l:l}function c(l){for(var n="",f=0;f<l.length;f++)n+=r(l[f].toString(16));return n}o.toArray=function(l,n){if(Array.isArray(l))return l.slice();if(!l)return[];var f=[];if(typeof l!="string"){for(var h=0;h<l.length;h++)f[h]=0|l[h];return f}if(n==="hex")for((l=l.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(l="0"+l),h=0;h<l.length;h+=2)f.push(parseInt(l[h]+l[h+1],16));else for(h=0;h<l.length;h++){var p=l.charCodeAt(h),g=p>>8,v=255&p;g?f.push(g,v):f.push(v)}return f},o.zero2=r,o.toHex=c,o.encode=function(l,n){return n==="hex"?c(l):l}},{}],455:[function(t,s,u){s.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],456:[function(t,s,u){var o=t("asn1.js");u.certificate=t("./certificate");var r=o.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));u.RSAPrivateKey=r;var c=o.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));u.RSAPublicKey=c;var l=o.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())}));u.PublicKey=l;var n=o.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),f=o.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(n),this.key("subjectPrivateKey").octstr())}));u.PrivateKey=f;var h=o.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));u.EncryptedPrivateKey=h;var p=o.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));u.DSAPrivateKey=p,u.DSAparam=o.define("DSAparam",(function(){this.int()}));var g=o.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(v),this.key("publicKey").optional().explicit(1).bitstr())}));u.ECPrivateKey=g;var v=o.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));u.signature=o.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},{"./certificate":457,"asn1.js":170}],457:[function(t,s,u){var o=t("asn1.js"),r=o.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),c=o.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),l=o.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),n=o.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(l),this.key("subjectPublicKey").bitstr())})),f=o.define("RelativeDistinguishedName",(function(){this.setof(c)})),h=o.define("RDNSequence",(function(){this.seqof(f)})),p=o.define("Name",(function(){this.choice({rdnSequence:this.use(h)})})),g=o.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))})),v=o.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),x=o.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(l),this.key("issuer").use(p),this.key("validity").use(g),this.key("subject").use(p),this.key("subjectPublicKeyInfo").use(n),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(v).optional())})),y=o.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(x),this.key("signatureAlgorithm").use(l),this.key("signatureValue").bitstr())}));s.exports=y},{"asn1.js":170}],458:[function(t,s,u){var o=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,c=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,l=t("evp_bytestokey"),n=t("browserify-aes"),f=t("safe-buffer").Buffer;s.exports=function(h,p){var g,v=h.toString(),x=v.match(o);if(x){var y="aes"+x[1],w=f.from(x[2],"hex"),S=f.from(x[3].replace(/[\r\n]/g,""),"base64"),E=l(p,w.slice(0,8),parseInt(x[1],10)).key,I=[],D=n.createDecipheriv(y,E,w);I.push(D.update(S)),I.push(D.final()),g=f.concat(I)}else{var Z=v.match(c);g=f.from(Z[2].replace(/[\r\n]/g,""),"base64")}return{tag:v.match(r)[1],data:g}}},{"browserify-aes":191,evp_bytestokey:423,"safe-buffer":494}],459:[function(t,s,u){var o=t("./asn1"),r=t("./aesid.json"),c=t("./fixProc"),l=t("browserify-aes"),n=t("pbkdf2"),f=t("safe-buffer").Buffer;function h(p){var g;typeof p!="object"||f.isBuffer(p)||(g=p.passphrase,p=p.key),typeof p=="string"&&(p=f.from(p));var v,x,y=c(p,g),w=y.tag,S=y.data;switch(w){case"CERTIFICATE":x=o.certificate.decode(S,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(x||(x=o.PublicKey.decode(S,"der")),v=x.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPublicKey.decode(x.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return x.subjectPrivateKey=x.subjectPublicKey,{type:"ec",data:x};case"1.2.840.10040.4.1":return x.algorithm.params.pub_key=o.DSAparam.decode(x.subjectPublicKey.data,"der"),{type:"dsa",data:x.algorithm.params};default:throw new Error("unknown key id "+v)}case"ENCRYPTED PRIVATE KEY":S=(function(E,I){var D=E.algorithm.decrypt.kde.kdeparams.salt,Z=parseInt(E.algorithm.decrypt.kde.kdeparams.iters.toString(),10),K=r[E.algorithm.decrypt.cipher.algo.join(".")],z=E.algorithm.decrypt.cipher.iv,W=E.subjectPrivateKey,Q=parseInt(K.split("-")[1],10)/8,rt=n.pbkdf2Sync(I,D,Z,Q,"sha1"),tt=l.createDecipheriv(K,rt,z),j=[];return j.push(tt.update(W)),j.push(tt.final()),f.concat(j)})(S=o.EncryptedPrivateKey.decode(S,"der"),g);case"PRIVATE KEY":switch(v=(x=o.PrivateKey.decode(S,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return o.RSAPrivateKey.decode(x.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:x.algorithm.curve,privateKey:o.ECPrivateKey.decode(x.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return x.algorithm.params.priv_key=o.DSAparam.decode(x.subjectPrivateKey,"der"),{type:"dsa",params:x.algorithm.params};default:throw new Error("unknown key id "+v)}case"RSA PUBLIC KEY":return o.RSAPublicKey.decode(S,"der");case"RSA PRIVATE KEY":return o.RSAPrivateKey.decode(S,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:o.DSAPrivateKey.decode(S,"der")};case"EC PRIVATE KEY":return{curve:(S=o.ECPrivateKey.decode(S,"der")).parameters.value,privateKey:S.privateKey};default:throw new Error("unknown key type "+w)}}s.exports=h,h.signature=o.signature},{"./aesid.json":455,"./asn1":456,"./fixProc":458,"browserify-aes":191,pbkdf2:460,"safe-buffer":494}],460:[function(t,s,u){u.pbkdf2=t("./lib/async"),u.pbkdf2Sync=t("./lib/sync")},{"./lib/async":461,"./lib/sync":464}],461:[function(t,s,u){(function(o){(function(){var r,c,l=t("safe-buffer").Buffer,n=t("./precondition"),f=t("./default-encoding"),h=t("./sync"),p=t("./to-buffer"),g=o.crypto&&o.crypto.subtle,v={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},x=[];function y(){return c||(c=o.process&&o.process.nextTick?o.process.nextTick:o.queueMicrotask?o.queueMicrotask:o.setImmediate?o.setImmediate:o.setTimeout)}function w(S,E,I,D,Z){return g.importKey("raw",S,{name:"PBKDF2"},!1,["deriveBits"]).then((function(K){return g.deriveBits({name:"PBKDF2",salt:E,iterations:I,hash:{name:Z}},K,D<<3)})).then((function(K){return l.from(K)}))}s.exports=function(S,E,I,D,Z,K){typeof Z=="function"&&(K=Z,Z=void 0);var z=v[(Z=Z||"sha1").toLowerCase()];if(z&&typeof o.Promise=="function"){if(n(I,D),S=p(S,f,"Password"),E=p(E,f,"Salt"),typeof K!="function")throw new Error("No callback provided to pbkdf2");(function(W,Q){W.then((function(rt){y()((function(){Q(null,rt)}))}),(function(rt){y()((function(){Q(rt)}))}))})((function(W){if(o.process&&!o.process.browser||!g||!g.importKey||!g.deriveBits)return Promise.resolve(!1);if(x[W]!==void 0)return x[W];var Q=w(r=r||l.alloc(8),r,10,128,W).then((function(){return!0})).catch((function(){return!1}));return x[W]=Q,Q})(z).then((function(W){return W?w(S,E,I,D,z):h(S,E,I,D,Z)})),K)}else y()((function(){var W;try{W=h(S,E,I,D,Z)}catch(Q){return K(Q)}K(null,W)}))}}).call(this)}).call(this,typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":462,"./precondition":463,"./sync":464,"./to-buffer":465,"safe-buffer":494}],462:[function(t,s,u){(function(o,r){(function(){var c;r.process&&r.process.browser?c="utf-8":r.process&&r.process.version?c=parseInt(o.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":c="utf-8",s.exports=c}).call(this)}).call(this,t("_process"),typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467}],463:[function(t,s,u){var o=Math.pow(2,30)-1;s.exports=function(r,c){if(typeof r!="number")throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if(typeof c!="number")throw new TypeError("Key length not a number");if(c<0||c>o||c!=c)throw new TypeError("Bad key length")}},{}],464:[function(t,s,u){var o=t("create-hash/md5"),r=t("ripemd160"),c=t("sha.js"),l=t("safe-buffer").Buffer,n=t("./precondition"),f=t("./default-encoding"),h=t("./to-buffer"),p=l.alloc(128),g={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function v(x,y,w){var S=(function(z){function W(Q){return c(z).update(Q).digest()}return z==="rmd160"||z==="ripemd160"?function(Q){return new r().update(Q).digest()}:z==="md5"?o:W})(x),E=x==="sha512"||x==="sha384"?128:64;y.length>E?y=S(y):y.length<E&&(y=l.concat([y,p],E));for(var I=l.allocUnsafe(E+g[x]),D=l.allocUnsafe(E+g[x]),Z=0;Z<E;Z++)I[Z]=54^y[Z],D[Z]=92^y[Z];var K=l.allocUnsafe(E+w+4);I.copy(K,0,0,E),this.ipad1=K,this.ipad2=I,this.opad=D,this.alg=x,this.blocksize=E,this.hash=S,this.size=g[x]}v.prototype.run=function(x,y){return x.copy(y,this.blocksize),this.hash(y).copy(this.opad,this.blocksize),this.hash(this.opad)},s.exports=function(x,y,w,S,E){n(w,S);var I=new v(E=E||"sha1",x=h(x,f,"Password"),(y=h(y,f,"Salt")).length),D=l.allocUnsafe(S),Z=l.allocUnsafe(y.length+4);y.copy(Z,0,0,y.length);for(var K=0,z=g[E],W=Math.ceil(S/z),Q=1;Q<=W;Q++){Z.writeUInt32BE(Q,y.length);for(var rt=I.run(Z,I.ipad1),tt=rt,j=1;j<w;j++){tt=I.run(tt,I.ipad2);for(var F=0;F<z;F++)rt[F]^=tt[F]}rt.copy(D,K),K+=z}return D}},{"./default-encoding":462,"./precondition":463,"./to-buffer":465,"create-hash/md5":387,ripemd160:493,"safe-buffer":494,"sha.js":498}],465:[function(t,s,u){var o=t("safe-buffer").Buffer;s.exports=function(r,c,l){if(o.isBuffer(r))return r;if(typeof r=="string")return o.from(r,c);if(ArrayBuffer.isView(r))return o.from(r.buffer);throw new TypeError(l+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":494}],466:[function(t,s,u){(function(o){(function(){o===void 0||!o.version||o.version.indexOf("v0.")===0||o.version.indexOf("v1.")===0&&o.version.indexOf("v1.8.")!==0?s.exports={nextTick:function(r,c,l,n){if(typeof r!="function")throw new TypeError('"callback" argument must be a function');var f,h,p=arguments.length;switch(p){case 0:case 1:return o.nextTick(r);case 2:return o.nextTick((function(){r.call(null,c)}));case 3:return o.nextTick((function(){r.call(null,c,l)}));case 4:return o.nextTick((function(){r.call(null,c,l,n)}));default:for(f=new Array(p-1),h=0;h<f.length;)f[h++]=arguments[h];return o.nextTick((function(){r.apply(null,f)}))}}}:s.exports=o}).call(this)}).call(this,t("_process"))},{_process:467}],467:[function(t,s,u){var o,r,c=s.exports={};function l(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function f(E){if(o===setTimeout)return setTimeout(E,0);if((o===l||!o)&&setTimeout)return o=setTimeout,setTimeout(E,0);try{return o(E,0)}catch{try{return o.call(null,E,0)}catch{return o.call(this,E,0)}}}(function(){try{o=typeof setTimeout=="function"?setTimeout:l}catch{o=l}try{r=typeof clearTimeout=="function"?clearTimeout:n}catch{r=n}})();var h,p=[],g=!1,v=-1;function x(){g&&h&&(g=!1,h.length?p=h.concat(p):v=-1,p.length&&y())}function y(){if(!g){var E=f(x);g=!0;for(var I=p.length;I;){for(h=p,p=[];++v<I;)h&&h[v].run();v=-1,I=p.length}h=null,g=!1,(function(D){if(r===clearTimeout)return clearTimeout(D);if((r===n||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(D);try{r(D)}catch{try{return r.call(null,D)}catch{return r.call(this,D)}}})(E)}}function w(E,I){this.fun=E,this.array=I}function S(){}c.nextTick=function(E){var I=new Array(arguments.length-1);if(arguments.length>1)for(var D=1;D<arguments.length;D++)I[D-1]=arguments[D];p.push(new w(E,I)),p.length!==1||g||f(y)},w.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=S,c.addListener=S,c.once=S,c.off=S,c.removeListener=S,c.removeAllListeners=S,c.emit=S,c.prependListener=S,c.prependOnceListener=S,c.listeners=function(E){return[]},c.binding=function(E){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(E){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],468:[function(t,s,u){u.publicEncrypt=t("./publicEncrypt"),u.privateDecrypt=t("./privateDecrypt"),u.privateEncrypt=function(o,r){return u.publicEncrypt(o,r,!0)},u.publicDecrypt=function(o,r){return u.privateDecrypt(o,r,!0)}},{"./privateDecrypt":471,"./publicEncrypt":472}],469:[function(t,s,u){var o=t("create-hash"),r=t("safe-buffer").Buffer;function c(l){var n=r.allocUnsafe(4);return n.writeUInt32BE(l,0),n}s.exports=function(l,n){for(var f,h=r.alloc(0),p=0;h.length<n;)f=c(p++),h=r.concat([h,o("sha1").update(l).update(f).digest()]);return h.slice(0,n)}},{"create-hash":386,"safe-buffer":494}],470:[function(t,s,u){arguments[4][184][0].apply(u,arguments)},{buffer:188,dup:184}],471:[function(t,s,u){var o=t("parse-asn1"),r=t("./mgf"),c=t("./xor"),l=t("bn.js"),n=t("browserify-rsa"),f=t("create-hash"),h=t("./withPublic"),p=t("safe-buffer").Buffer;s.exports=function(g,v,x){var y;y=g.padding?g.padding:x?1:4;var w,S=o(g),E=S.modulus.byteLength();if(v.length>E||new l(v).cmp(S.modulus)>=0)throw new Error("decryption error");w=x?h(new l(v),S):n(v,S);var I=p.alloc(E-w.length);if(w=p.concat([I,w],E),y===4)return(function(D,Z){var K=D.modulus.byteLength(),z=f("sha1").update(p.alloc(0)).digest(),W=z.length;if(Z[0]!==0)throw new Error("decryption error");var Q=Z.slice(1,W+1),rt=Z.slice(W+1),tt=c(Q,r(rt,W)),j=c(rt,r(tt,K-W-1));if((function(R,T){R=p.from(R),T=p.from(T);var C=0,k=R.length;R.length!==T.length&&(C++,k=Math.min(R.length,T.length));for(var M=-1;++M<k;)C+=R[M]^T[M];return C})(z,j.slice(0,W)))throw new Error("decryption error");for(var F=W;j[F]===0;)F++;if(j[F++]!==1)throw new Error("decryption error");return j.slice(F)})(S,w);if(y===1)return(function(D,Z,K){for(var z=Z.slice(0,2),W=2,Q=0;Z[W++]!==0;)if(W>=Z.length){Q++;break}var rt=Z.slice(2,W-1);if((z.toString("hex")!=="0002"&&!K||z.toString("hex")!=="0001"&&K)&&Q++,rt.length<8&&Q++,Q)throw new Error("decryption error");return Z.slice(W)})(0,w,x);if(y===3)return w;throw new Error("unknown padding")}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,"safe-buffer":494}],472:[function(t,s,u){var o=t("parse-asn1"),r=t("randombytes"),c=t("create-hash"),l=t("./mgf"),n=t("./xor"),f=t("bn.js"),h=t("./withPublic"),p=t("browserify-rsa"),g=t("safe-buffer").Buffer;s.exports=function(v,x,y){var w;w=v.padding?v.padding:y?1:4;var S,E=o(v);if(w===4)S=(function(I,D){var Z=I.modulus.byteLength(),K=D.length,z=c("sha1").update(g.alloc(0)).digest(),W=z.length,Q=2*W;if(K>Z-Q-2)throw new Error("message too long");var rt=g.alloc(Z-K-Q-2),tt=Z-W-1,j=r(W),F=n(g.concat([z,rt,g.alloc(1,1),D],tt),l(j,tt)),R=n(j,l(F,W));return new f(g.concat([g.alloc(1),R,F],Z))})(E,x);else if(w===1)S=(function(I,D,Z){var K,z=D.length,W=I.modulus.byteLength();if(z>W-11)throw new Error("message too long");return K=Z?g.alloc(W-z-3,255):(function(Q){for(var rt,tt=g.allocUnsafe(Q),j=0,F=r(2*Q),R=0;j<Q;)R===F.length&&(F=r(2*Q),R=0),(rt=F[R++])&&(tt[j++]=rt);return tt})(W-z-3),new f(g.concat([g.from([0,Z?1:2]),K,g.alloc(1),D],W))})(E,x,y);else{if(w!==3)throw new Error("unknown padding");if((S=new f(x)).cmp(E.modulus)>=0)throw new Error("data too long for modulus")}return y?p(S,E):h(S,E)}},{"./mgf":469,"./withPublic":473,"./xor":474,"bn.js":470,"browserify-rsa":209,"create-hash":386,"parse-asn1":459,randombytes:475,"safe-buffer":494}],473:[function(t,s,u){var o=t("bn.js"),r=t("safe-buffer").Buffer;s.exports=function(c,l){return r.from(c.toRed(o.mont(l.modulus)).redPow(new o(l.publicExponent)).fromRed().toArray())}},{"bn.js":470,"safe-buffer":494}],474:[function(t,s,u){s.exports=function(o,r){for(var c=o.length,l=-1;++l<c;)o[l]^=r[l];return o}},{}],475:[function(t,s,u){(function(o,r){(function(){var c=t("safe-buffer").Buffer,l=r.crypto||r.msCrypto;l&&l.getRandomValues?s.exports=function(n,f){if(n>4294967295)throw new RangeError("requested too many random bytes");var h=c.allocUnsafe(n);if(n>0)if(n>65536)for(var p=0;p<n;p+=65536)l.getRandomValues(h.slice(p,p+65536));else l.getRandomValues(h);return typeof f=="function"?o.nextTick((function(){f(null,h)})):h}:s.exports=function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,t("_process"),typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,"safe-buffer":494}],476:[function(t,s,u){(function(o,r){(function(){function c(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var l=t("safe-buffer"),n=t("randombytes"),f=l.Buffer,h=l.kMaxLength,p=r.crypto||r.msCrypto,g=Math.pow(2,32)-1;function v(w,S){if(typeof w!="number"||w!=w)throw new TypeError("offset must be a number");if(w>g||w<0)throw new TypeError("offset must be a uint32");if(w>h||w>S)throw new RangeError("offset out of range")}function x(w,S,E){if(typeof w!="number"||w!=w)throw new TypeError("size must be a number");if(w>g||w<0)throw new TypeError("size must be a uint32");if(w+S>E||w>h)throw new RangeError("buffer too small")}function y(w,S,E,I){if(o.browser){var D=w.buffer,Z=new Uint8Array(D,S,E);return p.getRandomValues(Z),I?void o.nextTick((function(){I(null,w)})):w}if(!I)return n(E).copy(w,S),w;n(E,(function(K,z){if(K)return I(K);z.copy(w,S),I(null,w)}))}p&&p.getRandomValues||!o.browser?(u.randomFill=function(w,S,E,I){if(!(f.isBuffer(w)||w instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof S=="function")I=S,S=0,E=w.length;else if(typeof E=="function")I=E,E=w.length-S;else if(typeof I!="function")throw new TypeError('"cb" argument must be a function');return v(S,w.length),x(E,S,w.length),y(w,S,E,I)},u.randomFillSync=function(w,S,E){if(S===void 0&&(S=0),!(f.isBuffer(w)||w instanceof r.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return v(S,w.length),E===void 0&&(E=w.length-S),x(E,S,w.length),y(w,S,E)}):(u.randomFill=c,u.randomFillSync=c)}).call(this)}).call(this,t("_process"),typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:467,randombytes:475,"safe-buffer":494}],477:[function(t,s,u){var o={};function r(l,n,f){f||(f=Error);var h=(function(p){var g,v;function x(y,w,S){return p.call(this,(function(E,I,D){return typeof n=="string"?n:n(E,I,D)})(y,w,S))||this}return v=p,(g=x).prototype=Object.create(v.prototype),g.prototype.constructor=g,g.__proto__=v,x})(f);h.prototype.name=f.name,h.prototype.code=l,o[l]=h}function c(l,n){if(Array.isArray(l)){var f=l.length;return l=l.map((function(h){return String(h)})),f>2?"one of ".concat(n," ").concat(l.slice(0,f-1).join(", "),", or ")+l[f-1]:f===2?"one of ".concat(n," ").concat(l[0]," or ").concat(l[1]):"of ".concat(n," ").concat(l[0])}return"of ".concat(n," ").concat(String(l))}r("ERR_INVALID_OPT_VALUE",(function(l,n){return'The value "'+n+'" is invalid for option "'+l+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(l,n,f){var h,p,g;if(typeof n=="string"&&(p="not ",n.substr(0,p.length)===p)?(h="must not be",n=n.replace(/^not /,"")):h="must be",(function(x,y,w){return(w===void 0||w>x.length)&&(w=x.length),x.substring(w-y.length,w)===y})(l," argument"))g="The ".concat(l," ").concat(h," ").concat(c(n,"type"));else{var v=(function(x,y,w){return typeof w!="number"&&(w=0),!(w+y.length>x.length)&&x.indexOf(y,w)!==-1})(l,".")?"property":"argument";g='The "'.concat(l,'" ').concat(v," ").concat(h," ").concat(c(n,"type"))}return g+=". Received type ".concat(typeof f)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(l){return"The "+l+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(l){return"Cannot call "+l+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(l){return"Unknown encoding: "+l}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),s.exports.codes=o},{}],478:[function(t,s,u){(function(o){(function(){var r=Object.keys||function(x){var y=[];for(var w in x)y.push(w);return y};s.exports=p;var c=t("./_stream_readable"),l=t("./_stream_writable");t("inherits")(p,c);for(var n=r(l.prototype),f=0;f<n.length;f++){var h=n[f];p.prototype[h]||(p.prototype[h]=l.prototype[h])}function p(x){if(!(this instanceof p))return new p(x);c.call(this,x),l.call(this,x),this.allowHalfOpen=!0,x&&(x.readable===!1&&(this.readable=!1),x.writable===!1&&(this.writable=!1),x.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",g)))}function g(){this._writableState.ended||o.nextTick(v,this)}function v(x){x.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(x){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=x,this._writableState.destroyed=x)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":480,"./_stream_writable":482,_process:467,inherits:440}],479:[function(t,s,u){s.exports=r;var o=t("./_stream_transform");function r(c){if(!(this instanceof r))return new r(c);o.call(this,c)}t("inherits")(r,o),r.prototype._transform=function(c,l,n){n(null,c)}},{"./_stream_transform":481,inherits:440}],480:[function(t,s,u){(function(o,r){(function(){var c;s.exports=tt,tt.ReadableState=rt,t("events").EventEmitter;var l=function(G,U){return G.listeners(U).length},n=t("./internal/streams/stream"),f=t("buffer").Buffer,h=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},p,g=t("util");p=g&&g.debuglog?g.debuglog("stream"):function(){};var v,x,y,w=t("./internal/streams/buffer_list"),S=t("./internal/streams/destroy"),E=t("./internal/streams/state").getHighWaterMark,I=t("../errors").codes,D=I.ERR_INVALID_ARG_TYPE,Z=I.ERR_STREAM_PUSH_AFTER_EOF,K=I.ERR_METHOD_NOT_IMPLEMENTED,z=I.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t("inherits")(tt,n);var W=S.errorOrDestroy,Q=["error","close","destroy","pause","resume"];function rt(G,U,st){c=c||t("./_stream_duplex"),G=G||{},typeof st!="boolean"&&(st=U instanceof c),this.objectMode=!!G.objectMode,st&&(this.objectMode=this.objectMode||!!G.readableObjectMode),this.highWaterMark=E(this,G,"readableHighWaterMark",st),this.buffer=new w,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=G.emitClose!==!1,this.autoDestroy=!!G.autoDestroy,this.destroyed=!1,this.defaultEncoding=G.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,G.encoding&&(v||(v=t("string_decoder/").StringDecoder),this.decoder=new v(G.encoding),this.encoding=G.encoding)}function tt(G){if(c=c||t("./_stream_duplex"),!(this instanceof tt))return new tt(G);var U=this instanceof c;this._readableState=new rt(G,this,U),this.readable=!0,G&&(typeof G.read=="function"&&(this._read=G.read),typeof G.destroy=="function"&&(this._destroy=G.destroy)),n.call(this)}function j(G,U,st,gt,zt){p("readableAddChunk",U);var St,Bt=G._readableState;if(U===null)Bt.reading=!1,(function(ie,re){if(p("onEofChunk"),!re.ended){if(re.decoder){var Ct=re.decoder.end();Ct&&Ct.length&&(re.buffer.push(Ct),re.length+=re.objectMode?1:Ct.length)}re.ended=!0,re.sync?T(ie):(re.needReadable=!1,re.emittedReadable||(re.emittedReadable=!0,C(ie)))}})(G,Bt);else if(zt||(St=(function(ie,re){var Ct;Yt=re,f.isBuffer(Yt)||Yt instanceof h||typeof re=="string"||re===void 0||ie.objectMode||(Ct=new D("chunk",["string","Buffer","Uint8Array"],re));var Yt;return Ct})(Bt,U)),St)W(G,St);else if(Bt.objectMode||U&&U.length>0)if(typeof U=="string"||Bt.objectMode||Object.getPrototypeOf(U)===f.prototype||(U=(function(ie){return f.from(ie)})(U)),gt)Bt.endEmitted?W(G,new z):F(G,Bt,U,!0);else if(Bt.ended)W(G,new Z);else{if(Bt.destroyed)return!1;Bt.reading=!1,Bt.decoder&&!st?(U=Bt.decoder.write(U),Bt.objectMode||U.length!==0?F(G,Bt,U,!1):k(G,Bt)):F(G,Bt,U,!1)}else gt||(Bt.reading=!1,k(G,Bt));return!Bt.ended&&(Bt.length<Bt.highWaterMark||Bt.length===0)}function F(G,U,st,gt){U.flowing&&U.length===0&&!U.sync?(U.awaitDrain=0,G.emit("data",st)):(U.length+=U.objectMode?1:st.length,gt?U.buffer.unshift(st):U.buffer.push(st),U.needReadable&&T(G)),k(G,U)}Object.defineProperty(tt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(G){this._readableState&&(this._readableState.destroyed=G)}}),tt.prototype.destroy=S.destroy,tt.prototype._undestroy=S.undestroy,tt.prototype._destroy=function(G,U){U(G)},tt.prototype.push=function(G,U){var st,gt=this._readableState;return gt.objectMode?st=!0:typeof G=="string"&&((U=U||gt.defaultEncoding)!==gt.encoding&&(G=f.from(G,U),U=""),st=!0),j(this,G,U,!1,st)},tt.prototype.unshift=function(G){return j(this,G,null,!0,!1)},tt.prototype.isPaused=function(){return this._readableState.flowing===!1},tt.prototype.setEncoding=function(G){v||(v=t("string_decoder/").StringDecoder);var U=new v(G);this._readableState.decoder=U,this._readableState.encoding=this._readableState.decoder.encoding;for(var st=this._readableState.buffer.head,gt="";st!==null;)gt+=U.write(st.data),st=st.next;return this._readableState.buffer.clear(),gt!==""&&this._readableState.buffer.push(gt),this._readableState.length=gt.length,this};function R(G,U){return G<=0||U.length===0&&U.ended?0:U.objectMode?1:G!=G?U.flowing&&U.length?U.buffer.head.data.length:U.length:(G>U.highWaterMark&&(U.highWaterMark=(function(st){return st>=1073741824?st=1073741824:(st--,st|=st>>>1,st|=st>>>2,st|=st>>>4,st|=st>>>8,st|=st>>>16,st++),st})(G)),G<=U.length?G:U.ended?U.length:(U.needReadable=!0,0))}function T(G){var U=G._readableState;p("emitReadable",U.needReadable,U.emittedReadable),U.needReadable=!1,U.emittedReadable||(p("emitReadable",U.flowing),U.emittedReadable=!0,o.nextTick(C,G))}function C(G){var U=G._readableState;p("emitReadable_",U.destroyed,U.length,U.ended),U.destroyed||!U.length&&!U.ended||(G.emit("readable"),U.emittedReadable=!1),U.needReadable=!U.flowing&&!U.ended&&U.length<=U.highWaterMark,et(G)}function k(G,U){U.readingMore||(U.readingMore=!0,o.nextTick(M,G,U))}function M(G,U){for(;!U.reading&&!U.ended&&(U.length<U.highWaterMark||U.flowing&&U.length===0);){var st=U.length;if(p("maybeReadMore read 0"),G.read(0),st===U.length)break}U.readingMore=!1}function O(G){var U=G._readableState;U.readableListening=G.listenerCount("readable")>0,U.resumeScheduled&&!U.paused?U.flowing=!0:G.listenerCount("data")>0&&G.resume()}function P(G){p("readable nexttick read 0"),G.read(0)}function H(G,U){p("resume",U.reading),U.reading||G.read(0),U.resumeScheduled=!1,G.emit("resume"),et(G),U.flowing&&!U.reading&&G.read(0)}function et(G){var U=G._readableState;for(p("flow",U.flowing);U.flowing&&G.read()!==null;);}function it(G,U){return U.length===0?null:(U.objectMode?st=U.buffer.shift():!G||G>=U.length?(st=U.decoder?U.buffer.join(""):U.buffer.length===1?U.buffer.first():U.buffer.concat(U.length),U.buffer.clear()):st=U.buffer.consume(G,U.decoder),st);var st}function pt(G){var U=G._readableState;p("endReadable",U.endEmitted),U.endEmitted||(U.ended=!0,o.nextTick(X,U,G))}function X(G,U){if(p("endReadableNT",G.endEmitted,G.length),!G.endEmitted&&G.length===0&&(G.endEmitted=!0,U.readable=!1,U.emit("end"),G.autoDestroy)){var st=U._writableState;(!st||st.autoDestroy&&st.finished)&&U.destroy()}}function ut(G,U){for(var st=0,gt=G.length;st<gt;st++)if(G[st]===U)return st;return-1}tt.prototype.read=function(G){p("read",G),G=parseInt(G,10);var U=this._readableState,st=G;if(G!==0&&(U.emittedReadable=!1),G===0&&U.needReadable&&((U.highWaterMark!==0?U.length>=U.highWaterMark:U.length>0)||U.ended))return p("read: emitReadable",U.length,U.ended),U.length===0&&U.ended?pt(this):T(this),null;if((G=R(G,U))===0&&U.ended)return U.length===0&&pt(this),null;var gt,zt=U.needReadable;return p("need readable",zt),(U.length===0||U.length-G<U.highWaterMark)&&p("length less than watermark",zt=!0),U.ended||U.reading?p("reading or ended",zt=!1):zt&&(p("do read"),U.reading=!0,U.sync=!0,U.length===0&&(U.needReadable=!0),this._read(U.highWaterMark),U.sync=!1,U.reading||(G=R(st,U))),(gt=G>0?it(G,U):null)===null?(U.needReadable=U.length<=U.highWaterMark,G=0):(U.length-=G,U.awaitDrain=0),U.length===0&&(U.ended||(U.needReadable=!0),st!==G&&U.ended&&pt(this)),gt!==null&&this.emit("data",gt),gt},tt.prototype._read=function(G){W(this,new K("_read()"))},tt.prototype.pipe=function(G,U){var st=this,gt=this._readableState;switch(gt.pipesCount){case 0:gt.pipes=G;break;case 1:gt.pipes=[gt.pipes,G];break;default:gt.pipes.push(G)}gt.pipesCount+=1,p("pipe count=%d opts=%j",gt.pipesCount,U);var zt=(!U||U.end!==!1)&&G!==o.stdout&&G!==o.stderr?Bt:Jt;function St(ne,ae){p("onunpipe"),ne===st&&ae&&ae.hasUnpiped===!1&&(ae.hasUnpiped=!0,p("cleanup"),G.removeListener("close",Qt),G.removeListener("finish",Ht),G.removeListener("drain",ie),G.removeListener("error",Yt),G.removeListener("unpipe",St),st.removeListener("end",Bt),st.removeListener("end",Jt),st.removeListener("data",Ct),re=!0,!gt.awaitDrain||G._writableState&&!G._writableState.needDrain||ie())}function Bt(){p("onend"),G.end()}gt.endEmitted?o.nextTick(zt):st.once("end",zt),G.on("unpipe",St);var ie=(function(ne){return function(){var ae=ne._readableState;p("pipeOnDrain",ae.awaitDrain),ae.awaitDrain&&ae.awaitDrain--,ae.awaitDrain===0&&l(ne,"data")&&(ae.flowing=!0,et(ne))}})(st);G.on("drain",ie);var re=!1;function Ct(ne){p("ondata");var ae=G.write(ne);p("dest.write",ae),ae===!1&&((gt.pipesCount===1&&gt.pipes===G||gt.pipesCount>1&&ut(gt.pipes,G)!==-1)&&!re&&(p("false write response, pause",gt.awaitDrain),gt.awaitDrain++),st.pause())}function Yt(ne){p("onerror",ne),Jt(),G.removeListener("error",Yt),l(G,"error")===0&&W(G,ne)}function Qt(){G.removeListener("finish",Ht),Jt()}function Ht(){p("onfinish"),G.removeListener("close",Qt),Jt()}function Jt(){p("unpipe"),st.unpipe(G)}return st.on("data",Ct),(function(ne,ae,me){if(typeof ne.prependListener=="function")return ne.prependListener(ae,me);ne._events&&ne._events[ae]?Array.isArray(ne._events[ae])?ne._events[ae].unshift(me):ne._events[ae]=[me,ne._events[ae]]:ne.on(ae,me)})(G,"error",Yt),G.once("close",Qt),G.once("finish",Ht),G.emit("pipe",st),gt.flowing||(p("pipe resume"),st.resume()),G},tt.prototype.unpipe=function(G){var U=this._readableState,st={hasUnpiped:!1};if(U.pipesCount===0)return this;if(U.pipesCount===1)return G&&G!==U.pipes||(G||(G=U.pipes),U.pipes=null,U.pipesCount=0,U.flowing=!1,G&&G.emit("unpipe",this,st)),this;if(!G){var gt=U.pipes,zt=U.pipesCount;U.pipes=null,U.pipesCount=0,U.flowing=!1;for(var St=0;St<zt;St++)gt[St].emit("unpipe",this,{hasUnpiped:!1});return this}var Bt=ut(U.pipes,G);return Bt===-1||(U.pipes.splice(Bt,1),U.pipesCount-=1,U.pipesCount===1&&(U.pipes=U.pipes[0]),G.emit("unpipe",this,st)),this},tt.prototype.on=function(G,U){var st=n.prototype.on.call(this,G,U),gt=this._readableState;return G==="data"?(gt.readableListening=this.listenerCount("readable")>0,gt.flowing!==!1&&this.resume()):G==="readable"&&(gt.endEmitted||gt.readableListening||(gt.readableListening=gt.needReadable=!0,gt.flowing=!1,gt.emittedReadable=!1,p("on readable",gt.length,gt.reading),gt.length?T(this):gt.reading||o.nextTick(P,this))),st},tt.prototype.addListener=tt.prototype.on,tt.prototype.removeListener=function(G,U){var st=n.prototype.removeListener.call(this,G,U);return G==="readable"&&o.nextTick(O,this),st},tt.prototype.removeAllListeners=function(G){var U=n.prototype.removeAllListeners.apply(this,arguments);return G!=="readable"&&G!==void 0||o.nextTick(O,this),U},tt.prototype.resume=function(){var G=this._readableState;return G.flowing||(p("resume"),G.flowing=!G.readableListening,(function(U,st){st.resumeScheduled||(st.resumeScheduled=!0,o.nextTick(H,U,st))})(this,G)),G.paused=!1,this},tt.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},tt.prototype.wrap=function(G){var U=this,st=this._readableState,gt=!1;for(var zt in G.on("end",(function(){if(p("wrapped end"),st.decoder&&!st.ended){var Bt=st.decoder.end();Bt&&Bt.length&&U.push(Bt)}U.push(null)})),G.on("data",(function(Bt){p("wrapped data"),st.decoder&&(Bt=st.decoder.write(Bt)),st.objectMode&&Bt==null||(st.objectMode||Bt&&Bt.length)&&(U.push(Bt)||(gt=!0,G.pause()))})),G)this[zt]===void 0&&typeof G[zt]=="function"&&(this[zt]=(function(Bt){return function(){return G[Bt].apply(G,arguments)}})(zt));for(var St=0;St<Q.length;St++)G.on(Q[St],this.emit.bind(this,Q[St]));return this._read=function(Bt){p("wrapped _read",Bt),gt&&(gt=!1,G.resume())},this},typeof Symbol=="function"&&(tt.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=t("./internal/streams/async_iterator")),x(this)}),Object.defineProperty(tt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(tt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(tt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(G){this._readableState&&(this._readableState.flowing=G)}}),tt._fromList=it,Object.defineProperty(tt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(tt.from=function(G,U){return y===void 0&&(y=t("./internal/streams/from")),y(tt,G,U)})}).call(this)}).call(this,t("_process"),typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/async_iterator":483,"./internal/streams/buffer_list":484,"./internal/streams/destroy":485,"./internal/streams/from":487,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,events:422,inherits:440,"string_decoder/":522,util:188}],481:[function(t,s,u){s.exports=p;var o=t("../errors").codes,r=o.ERR_METHOD_NOT_IMPLEMENTED,c=o.ERR_MULTIPLE_CALLBACK,l=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,n=o.ERR_TRANSFORM_WITH_LENGTH_0,f=t("./_stream_duplex");function h(x,y){var w=this._transformState;w.transforming=!1;var S=w.writecb;if(S===null)return this.emit("error",new c);w.writechunk=null,w.writecb=null,y!=null&&this.push(y),S(x);var E=this._readableState;E.reading=!1,(E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}function p(x){if(!(this instanceof p))return new p(x);f.call(this,x),this._transformState={afterTransform:h.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,x&&(typeof x.transform=="function"&&(this._transform=x.transform),typeof x.flush=="function"&&(this._flush=x.flush)),this.on("prefinish",g)}function g(){var x=this;typeof this._flush!="function"||this._readableState.destroyed?v(this,null,null):this._flush((function(y,w){v(x,y,w)}))}function v(x,y,w){if(y)return x.emit("error",y);if(w!=null&&x.push(w),x._writableState.length)throw new n;if(x._transformState.transforming)throw new l;return x.push(null)}t("inherits")(p,f),p.prototype.push=function(x,y){return this._transformState.needTransform=!1,f.prototype.push.call(this,x,y)},p.prototype._transform=function(x,y,w){w(new r("_transform()"))},p.prototype._write=function(x,y,w){var S=this._transformState;if(S.writecb=w,S.writechunk=x,S.writeencoding=y,!S.transforming){var E=this._readableState;(S.needTransform||E.needReadable||E.length<E.highWaterMark)&&this._read(E.highWaterMark)}},p.prototype._read=function(x){var y=this._transformState;y.writechunk===null||y.transforming?y.needTransform=!0:(y.transforming=!0,this._transform(y.writechunk,y.writeencoding,y.afterTransform))},p.prototype._destroy=function(x,y){f.prototype._destroy.call(this,x,(function(w){y(w)}))}},{"../errors":477,"./_stream_duplex":478,inherits:440}],482:[function(t,s,u){(function(o,r){(function(){function c(M){var O=this;this.next=null,this.entry=null,this.finish=function(){(function(P,H,et){var it=P.entry;for(P.entry=null;it;){var pt=it.callback;H.pendingcb--,pt(et),it=it.next}H.corkedRequestsFree.next=P})(O,M)}}var l;s.exports=tt,tt.WritableState=rt;var n={deprecate:t("util-deprecate")},f=t("./internal/streams/stream"),h=t("buffer").Buffer,p=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},g,v=t("./internal/streams/destroy"),x=t("./internal/streams/state").getHighWaterMark,y=t("../errors").codes,w=y.ERR_INVALID_ARG_TYPE,S=y.ERR_METHOD_NOT_IMPLEMENTED,E=y.ERR_MULTIPLE_CALLBACK,I=y.ERR_STREAM_CANNOT_PIPE,D=y.ERR_STREAM_DESTROYED,Z=y.ERR_STREAM_NULL_VALUES,K=y.ERR_STREAM_WRITE_AFTER_END,z=y.ERR_UNKNOWN_ENCODING,W=v.errorOrDestroy;function Q(){}function rt(M,O,P){l=l||t("./_stream_duplex"),M=M||{},typeof P!="boolean"&&(P=O instanceof l),this.objectMode=!!M.objectMode,P&&(this.objectMode=this.objectMode||!!M.writableObjectMode),this.highWaterMark=x(this,M,"writableHighWaterMark",P),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var H=M.decodeStrings===!1;this.decodeStrings=!H,this.defaultEncoding=M.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(et){(function(it,pt){var X=it._writableState,ut=X.sync,G=X.writecb;if(typeof G!="function")throw new E;if((function(st){st.writing=!1,st.writecb=null,st.length-=st.writelen,st.writelen=0})(X),pt)(function(st,gt,zt,St,Bt){--gt.pendingcb,zt?(o.nextTick(Bt,St),o.nextTick(k,st,gt),st._writableState.errorEmitted=!0,W(st,St)):(Bt(St),st._writableState.errorEmitted=!0,W(st,St),k(st,gt))})(it,X,ut,pt,G);else{var U=T(X)||it.destroyed;U||X.corked||X.bufferProcessing||!X.bufferedRequest||R(it,X),ut?o.nextTick(F,it,X,U,G):F(it,X,U,G)}})(O,et)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=M.emitClose!==!1,this.autoDestroy=!!M.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}function tt(M){var O=this instanceof(l=l||t("./_stream_duplex"));if(!O&&!g.call(tt,this))return new tt(M);this._writableState=new rt(M,this,O),this.writable=!0,M&&(typeof M.write=="function"&&(this._write=M.write),typeof M.writev=="function"&&(this._writev=M.writev),typeof M.destroy=="function"&&(this._destroy=M.destroy),typeof M.final=="function"&&(this._final=M.final)),f.call(this)}function j(M,O,P,H,et,it,pt){O.writelen=H,O.writecb=pt,O.writing=!0,O.sync=!0,O.destroyed?O.onwrite(new D("write")):P?M._writev(et,O.onwrite):M._write(et,it,O.onwrite),O.sync=!1}function F(M,O,P,H){P||(function(et,it){it.length===0&&it.needDrain&&(it.needDrain=!1,et.emit("drain"))})(M,O),O.pendingcb--,H(),k(M,O)}function R(M,O){O.bufferProcessing=!0;var P=O.bufferedRequest;if(M._writev&&P&&P.next){var H=O.bufferedRequestCount,et=new Array(H),it=O.corkedRequestsFree;it.entry=P;for(var pt=0,X=!0;P;)et[pt]=P,P.isBuf||(X=!1),P=P.next,pt+=1;et.allBuffers=X,j(M,O,!0,O.length,et,"",it.finish),O.pendingcb++,O.lastBufferedRequest=null,it.next?(O.corkedRequestsFree=it.next,it.next=null):O.corkedRequestsFree=new c(O),O.bufferedRequestCount=0}else{for(;P;){var ut=P.chunk,G=P.encoding,U=P.callback;if(j(M,O,!1,O.objectMode?1:ut.length,ut,G,U),P=P.next,O.bufferedRequestCount--,O.writing)break}P===null&&(O.lastBufferedRequest=null)}O.bufferedRequest=P,O.bufferProcessing=!1}function T(M){return M.ending&&M.length===0&&M.bufferedRequest===null&&!M.finished&&!M.writing}function C(M,O){M._final((function(P){O.pendingcb--,P&&W(M,P),O.prefinished=!0,M.emit("prefinish"),k(M,O)}))}function k(M,O){var P=T(O);if(P&&((function(et,it){it.prefinished||it.finalCalled||(typeof et._final!="function"||it.destroyed?(it.prefinished=!0,et.emit("prefinish")):(it.pendingcb++,it.finalCalled=!0,o.nextTick(C,et,it)))})(M,O),O.pendingcb===0&&(O.finished=!0,M.emit("finish"),O.autoDestroy))){var H=M._readableState;(!H||H.autoDestroy&&H.endEmitted)&&M.destroy()}return P}t("inherits")(tt,f),rt.prototype.getBuffer=function(){for(var M=this.bufferedRequest,O=[];M;)O.push(M),M=M.next;return O},(function(){try{Object.defineProperty(rt.prototype,"buffer",{get:n.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(tt,Symbol.hasInstance,{value:function(M){return!!g.call(this,M)||this===tt&&M&&M._writableState instanceof rt}})):g=function(M){return M instanceof this},tt.prototype.pipe=function(){W(this,new I)},tt.prototype.write=function(M,O,P){var H,et=this._writableState,it=!1,pt=!et.objectMode&&(H=M,h.isBuffer(H)||H instanceof p);return pt&&!h.isBuffer(M)&&(M=(function(X){return h.from(X)})(M)),typeof O=="function"&&(P=O,O=null),pt?O="buffer":O||(O=et.defaultEncoding),typeof P!="function"&&(P=Q),et.ending?(function(X,ut){var G=new K;W(X,G),o.nextTick(ut,G)})(this,P):(pt||(function(X,ut,G,U){var st;return G===null?st=new Z:typeof G=="string"||ut.objectMode||(st=new w("chunk",["string","Buffer"],G)),!st||(W(X,st),o.nextTick(U,st),!1)})(this,et,M,P))&&(et.pendingcb++,it=(function(X,ut,G,U,st,gt){if(!G){var zt=(function(re,Ct,Yt){return re.objectMode||re.decodeStrings===!1||typeof Ct!="string"||(Ct=h.from(Ct,Yt)),Ct})(ut,U,st);U!==zt&&(G=!0,st="buffer",U=zt)}var St=ut.objectMode?1:U.length;ut.length+=St;var Bt=ut.length<ut.highWaterMark;if(Bt||(ut.needDrain=!0),ut.writing||ut.corked){var ie=ut.lastBufferedRequest;ut.lastBufferedRequest={chunk:U,encoding:st,isBuf:G,callback:gt,next:null},ie?ie.next=ut.lastBufferedRequest:ut.bufferedRequest=ut.lastBufferedRequest,ut.bufferedRequestCount+=1}else j(X,ut,!1,St,U,st,gt);return Bt})(this,et,pt,M,O,P)),it},tt.prototype.cork=function(){this._writableState.corked++},tt.prototype.uncork=function(){var M=this._writableState;M.corked&&(M.corked--,M.writing||M.corked||M.bufferProcessing||!M.bufferedRequest||R(this,M))},tt.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=M.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((M+"").toLowerCase())>-1))throw new z(M);return this._writableState.defaultEncoding=M,this},Object.defineProperty(tt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(tt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),tt.prototype._write=function(M,O,P){P(new S("_write()"))},tt.prototype._writev=null,tt.prototype.end=function(M,O,P){var H=this._writableState;return typeof M=="function"?(P=M,M=null,O=null):typeof O=="function"&&(P=O,O=null),M!=null&&this.write(M,O),H.corked&&(H.corked=1,this.uncork()),H.ending||(function(et,it,pt){it.ending=!0,k(et,it),pt&&(it.finished?o.nextTick(pt):et.once("finish",pt)),it.ended=!0,et.writable=!1})(this,H,P),this},Object.defineProperty(tt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(tt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(M){this._writableState&&(this._writableState.destroyed=M)}}),tt.prototype.destroy=v.destroy,tt.prototype._undestroy=v.undestroy,tt.prototype._destroy=function(M,O){O(M)}}).call(this)}).call(this,t("_process"),typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":477,"./_stream_duplex":478,"./internal/streams/destroy":485,"./internal/streams/state":489,"./internal/streams/stream":490,_process:467,buffer:220,inherits:440,"util-deprecate":524}],483:[function(t,s,u){(function(o){(function(){var r;function c(D,Z,K){return(Z=(function(z){var W=(function(Q,rt){if(typeof Q!="object"||Q===null)return Q;var tt=Q[Symbol.toPrimitive];if(tt!==void 0){var j=tt.call(Q,rt);if(typeof j!="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(rt==="string"?String:Number)(Q)})(z,"string");return typeof W=="symbol"?W:String(W)})(Z))in D?Object.defineProperty(D,Z,{value:K,enumerable:!0,configurable:!0,writable:!0}):D[Z]=K,D}var l=t("./end-of-stream"),n=Symbol("lastResolve"),f=Symbol("lastReject"),h=Symbol("error"),p=Symbol("ended"),g=Symbol("lastPromise"),v=Symbol("handlePromise"),x=Symbol("stream");function y(D,Z){return{value:D,done:Z}}function w(D){var Z=D[n];if(Z!==null){var K=D[x].read();K!==null&&(D[g]=null,D[n]=null,D[f]=null,Z(y(K,!1)))}}function S(D){o.nextTick(w,D)}var E=Object.getPrototypeOf((function(){})),I=Object.setPrototypeOf((c(r={get stream(){return this[x]},next:function(){var D=this,Z=this[h];if(Z!==null)return Promise.reject(Z);if(this[p])return Promise.resolve(y(void 0,!0));if(this[x].destroyed)return new Promise((function(Q,rt){o.nextTick((function(){D[h]?rt(D[h]):Q(y(void 0,!0))}))}));var K,z=this[g];if(z)K=new Promise((function(Q,rt){return function(tt,j){Q.then((function(){rt[p]?tt(y(void 0,!0)):rt[v](tt,j)}),j)}})(z,this));else{var W=this[x].read();if(W!==null)return Promise.resolve(y(W,!1));K=new Promise(this[v])}return this[g]=K,K}},Symbol.asyncIterator,(function(){return this})),c(r,"return",(function(){var D=this;return new Promise((function(Z,K){D[x].destroy(null,(function(z){z?K(z):Z(y(void 0,!0))}))}))})),r),E);s.exports=function(D){var Z,K=Object.create(I,(c(Z={},x,{value:D,writable:!0}),c(Z,n,{value:null,writable:!0}),c(Z,f,{value:null,writable:!0}),c(Z,h,{value:null,writable:!0}),c(Z,p,{value:D._readableState.endEmitted,writable:!0}),c(Z,v,{value:function(z,W){var Q=K[x].read();Q?(K[g]=null,K[n]=null,K[f]=null,z(y(Q,!1))):(K[n]=z,K[f]=W)},writable:!0}),Z));return K[g]=null,l(D,(function(z){if(z&&z.code!=="ERR_STREAM_PREMATURE_CLOSE"){var W=K[f];return W!==null&&(K[g]=null,K[n]=null,K[f]=null,W(z)),void(K[h]=z)}var Q=K[n];Q!==null&&(K[g]=null,K[n]=null,K[f]=null,Q(y(void 0,!0))),K[p]=!0})),D.on("readable",S.bind(null,K)),K}}).call(this)}).call(this,t("_process"))},{"./end-of-stream":486,_process:467}],484:[function(t,s,u){function o(g,v){var x=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);v&&(y=y.filter((function(w){return Object.getOwnPropertyDescriptor(g,w).enumerable}))),x.push.apply(x,y)}return x}function r(g){for(var v=1;v<arguments.length;v++){var x=arguments[v]!=null?arguments[v]:{};v%2?o(Object(x),!0).forEach((function(y){c(g,y,x[y])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(x)):o(Object(x)).forEach((function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(x,y))}))}return g}function c(g,v,x){return(v=n(v))in g?Object.defineProperty(g,v,{value:x,enumerable:!0,configurable:!0,writable:!0}):g[v]=x,g}function l(g,v){for(var x=0;x<v.length;x++){var y=v[x];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,n(y.key),y)}}function n(g){var v=(function(x,y){if(typeof x!="object"||x===null)return x;var w=x[Symbol.toPrimitive];if(w!==void 0){var S=w.call(x,y);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(x)})(g,"string");return typeof v=="symbol"?v:String(v)}var f=t("buffer").Buffer,h=t("util").inspect,p=h&&h.custom||"inspect";s.exports=(function(){function g(){(function(y,w){if(!(y instanceof w))throw new TypeError("Cannot call a class as a function")})(this,g),this.head=null,this.tail=null,this.length=0}var v,x;return v=g,(x=[{key:"push",value:function(y){var w={data:y,next:null};this.length>0?this.tail.next=w:this.head=w,this.tail=w,++this.length}},{key:"unshift",value:function(y){var w={data:y,next:this.head};this.length===0&&(this.tail=w),this.head=w,++this.length}},{key:"shift",value:function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(this.length===0)return"";for(var w=this.head,S=""+w.data;w=w.next;)S+=y+w.data;return S}},{key:"concat",value:function(y){if(this.length===0)return f.alloc(0);for(var w,S,E,I=f.allocUnsafe(y>>>0),D=this.head,Z=0;D;)w=D.data,S=I,E=Z,f.prototype.copy.call(w,S,E),Z+=D.data.length,D=D.next;return I}},{key:"consume",value:function(y,w){var S;return y<this.head.data.length?(S=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):S=y===this.head.data.length?this.shift():w?this._getString(y):this._getBuffer(y),S}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var w=this.head,S=1,E=w.data;for(y-=E.length;w=w.next;){var I=w.data,D=y>I.length?I.length:y;if(D===I.length?E+=I:E+=I.slice(0,y),(y-=D)==0){D===I.length?(++S,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=I.slice(D));break}++S}return this.length-=S,E}},{key:"_getBuffer",value:function(y){var w=f.allocUnsafe(y),S=this.head,E=1;for(S.data.copy(w),y-=S.data.length;S=S.next;){var I=S.data,D=y>I.length?I.length:y;if(I.copy(w,w.length-y,0,D),(y-=D)==0){D===I.length?(++E,S.next?this.head=S.next:this.head=this.tail=null):(this.head=S,S.data=I.slice(D));break}++E}return this.length-=E,w}},{key:p,value:function(y,w){return h(this,r(r({},w),{},{depth:0,customInspect:!1}))}}])&&l(v.prototype,x),Object.defineProperty(v,"prototype",{writable:!1}),g})()},{buffer:220,util:188}],485:[function(t,s,u){(function(o){(function(){function r(n,f){l(n,f),c(n)}function c(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function l(n,f){n.emit("error",f)}s.exports={destroy:function(n,f){var h=this,p=this._readableState&&this._readableState.destroyed,g=this._writableState&&this._writableState.destroyed;return p||g?(f?f(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(l,this,n)):o.nextTick(l,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,(function(v){!f&&v?h._writableState?h._writableState.errorEmitted?o.nextTick(c,h):(h._writableState.errorEmitted=!0,o.nextTick(r,h,v)):o.nextTick(r,h,v):f?(o.nextTick(c,h),f(v)):o.nextTick(c,h)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,f){var h=n._readableState,p=n._writableState;h&&h.autoDestroy||p&&p.autoDestroy?n.destroy(f):n.emit("error",f)}}}).call(this)}).call(this,t("_process"))},{_process:467}],486:[function(t,s,u){var o=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}s.exports=function c(l,n,f){if(typeof n=="function")return c(l,null,n);n||(n={}),f=(function(D){var Z=!1;return function(){if(!Z){Z=!0;for(var K=arguments.length,z=new Array(K),W=0;W<K;W++)z[W]=arguments[W];D.apply(this,z)}}})(f||r);var h=n.readable||n.readable!==!1&&l.readable,p=n.writable||n.writable!==!1&&l.writable,g=function(){l.writable||x()},v=l._writableState&&l._writableState.finished,x=function(){p=!1,v=!0,h||f.call(l)},y=l._readableState&&l._readableState.endEmitted,w=function(){h=!1,y=!0,p||f.call(l)},S=function(D){f.call(l,D)},E=function(){var D;return h&&!y?(l._readableState&&l._readableState.ended||(D=new o),f.call(l,D)):p&&!v?(l._writableState&&l._writableState.ended||(D=new o),f.call(l,D)):void 0},I=function(){l.req.on("finish",x)};return(function(D){return D.setHeader&&typeof D.abort=="function"})(l)?(l.on("complete",x),l.on("abort",E),l.req?I():l.on("request",I)):p&&!l._writableState&&(l.on("end",g),l.on("close",g)),l.on("end",w),l.on("finish",x),n.error!==!1&&l.on("error",S),l.on("close",E),function(){l.removeListener("complete",x),l.removeListener("abort",E),l.removeListener("request",I),l.req&&l.req.removeListener("finish",x),l.removeListener("end",g),l.removeListener("close",g),l.removeListener("finish",x),l.removeListener("end",w),l.removeListener("error",S),l.removeListener("close",E)}}},{"../../../errors":477}],487:[function(t,s,u){s.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],488:[function(t,s,u){var o,r=t("../../../errors").codes,c=r.ERR_MISSING_ARGS,l=r.ERR_STREAM_DESTROYED;function n(v){if(v)throw v}function f(v,x,y,w){w=(function(I){var D=!1;return function(){D||(D=!0,I.apply(void 0,arguments))}})(w);var S=!1;v.on("close",(function(){S=!0})),o===void 0&&(o=t("./end-of-stream")),o(v,{readable:x,writable:y},(function(I){if(I)return w(I);S=!0,w()}));var E=!1;return function(I){if(!S&&!E)return E=!0,(function(D){return D.setHeader&&typeof D.abort=="function"})(v)?v.abort():typeof v.destroy=="function"?v.destroy():void w(I||new l("pipe"))}}function h(v){v()}function p(v,x){return v.pipe(x)}function g(v){return v.length?typeof v[v.length-1]!="function"?n:v.pop():n}s.exports=function(){for(var v=arguments.length,x=new Array(v),y=0;y<v;y++)x[y]=arguments[y];var w,S=g(x);if(Array.isArray(x[0])&&(x=x[0]),x.length<2)throw new c("streams");var E=x.map((function(I,D){var Z=D<x.length-1;return f(I,Z,D>0,(function(K){w||(w=K),K&&E.forEach(h),Z||(E.forEach(h),S(w))}))}));return x.reduce(p)}},{"../../../errors":477,"./end-of-stream":486}],489:[function(t,s,u){var o=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;s.exports={getHighWaterMark:function(r,c,l,n){var f=(function(h,p,g){return h.highWaterMark!=null?h.highWaterMark:p?h[g]:null})(c,n,l);if(f!=null){if(!isFinite(f)||Math.floor(f)!==f||f<0)throw new o(n?l:"highWaterMark",f);return Math.floor(f)}return r.objectMode?16:16384}}},{"../../../errors":477}],490:[function(t,s,u){s.exports=t("events").EventEmitter},{events:422}],491:[function(t,s,u){(u=s.exports=t("./lib/_stream_readable.js")).Stream=u,u.Readable=u,u.Writable=t("./lib/_stream_writable.js"),u.Duplex=t("./lib/_stream_duplex.js"),u.Transform=t("./lib/_stream_transform.js"),u.PassThrough=t("./lib/_stream_passthrough.js"),u.finished=t("./lib/internal/streams/end-of-stream.js"),u.pipeline=t("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":478,"./lib/_stream_passthrough.js":479,"./lib/_stream_readable.js":480,"./lib/_stream_transform.js":481,"./lib/_stream_writable.js":482,"./lib/internal/streams/end-of-stream.js":486,"./lib/internal/streams/pipeline.js":488}],492:[function(t,s,u){var o=(function(r){var c=Object.prototype,l=c.hasOwnProperty,n=Object.defineProperty||function(k,M,O){k[M]=O.value},f=typeof Symbol=="function"?Symbol:{},h=f.iterator||"@@iterator",p=f.asyncIterator||"@@asyncIterator",g=f.toStringTag||"@@toStringTag";function v(k,M,O){return Object.defineProperty(k,M,{value:O,enumerable:!0,configurable:!0,writable:!0}),k[M]}try{v({},"")}catch{v=function(M,O,P){return M[O]=P}}function x(k,M,O,P){var H=M&&M.prototype instanceof S?M:S,et=Object.create(H.prototype),it=new R(P||[]);return n(et,"_invoke",{value:rt(k,O,it)}),et}function y(k,M,O){try{return{type:"normal",arg:k.call(M,O)}}catch(P){return{type:"throw",arg:P}}}r.wrap=x;var w={};function S(){}function E(){}function I(){}var D={};v(D,h,(function(){return this}));var Z=Object.getPrototypeOf,K=Z&&Z(Z(T([])));K&&K!==c&&l.call(K,h)&&(D=K);var z=I.prototype=S.prototype=Object.create(D);function W(k){["next","throw","return"].forEach((function(M){v(k,M,(function(O){return this._invoke(M,O)}))}))}function Q(k,M){var O;n(this,"_invoke",{value:function(P,H){function et(){return new M((function(it,pt){(function X(ut,G,U,st){var gt=y(k[ut],k,G);if(gt.type!=="throw"){var zt=gt.arg,St=zt.value;return St&&typeof St=="object"&&l.call(St,"__await")?M.resolve(St.__await).then((function(Bt){X("next",Bt,U,st)}),(function(Bt){X("throw",Bt,U,st)})):M.resolve(St).then((function(Bt){zt.value=Bt,U(zt)}),(function(Bt){return X("throw",Bt,U,st)}))}st(gt.arg)})(P,H,it,pt)}))}return O=O?O.then(et,et):et()}})}function rt(k,M,O){var P="suspendedStart";return function(H,et){if(P==="executing")throw new Error("Generator is already running");if(P==="completed"){if(H==="throw")throw et;return C()}for(O.method=H,O.arg=et;;){var it=O.delegate;if(it){var pt=tt(it,O);if(pt){if(pt===w)continue;return pt}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(P==="suspendedStart")throw P="completed",O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);P="executing";var X=y(k,M,O);if(X.type==="normal"){if(P=O.done?"completed":"suspendedYield",X.arg===w)continue;return{value:X.arg,done:O.done}}X.type==="throw"&&(P="completed",O.method="throw",O.arg=X.arg)}}}function tt(k,M){var O=M.method,P=k.iterator[O];if(P===void 0)return M.delegate=null,O==="throw"&&k.iterator.return&&(M.method="return",M.arg=void 0,tt(k,M),M.method==="throw")||O!=="return"&&(M.method="throw",M.arg=new TypeError("The iterator does not provide a '"+O+"' method")),w;var H=y(P,k.iterator,M.arg);if(H.type==="throw")return M.method="throw",M.arg=H.arg,M.delegate=null,w;var et=H.arg;return et?et.done?(M[k.resultName]=et.value,M.next=k.nextLoc,M.method!=="return"&&(M.method="next",M.arg=void 0),M.delegate=null,w):et:(M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,w)}function j(k){var M={tryLoc:k[0]};1 in k&&(M.catchLoc=k[1]),2 in k&&(M.finallyLoc=k[2],M.afterLoc=k[3]),this.tryEntries.push(M)}function F(k){var M=k.completion||{};M.type="normal",delete M.arg,k.completion=M}function R(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(j,this),this.reset(!0)}function T(k){if(k){var M=k[h];if(M)return M.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var O=-1,P=function H(){for(;++O<k.length;)if(l.call(k,O))return H.value=k[O],H.done=!1,H;return H.value=void 0,H.done=!0,H};return P.next=P}}return{next:C}}function C(){return{value:void 0,done:!0}}return E.prototype=I,n(z,"constructor",{value:I,configurable:!0}),n(I,"constructor",{value:E,configurable:!0}),E.displayName=v(I,g,"GeneratorFunction"),r.isGeneratorFunction=function(k){var M=typeof k=="function"&&k.constructor;return!!M&&(M===E||(M.displayName||M.name)==="GeneratorFunction")},r.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,I):(k.__proto__=I,v(k,g,"GeneratorFunction")),k.prototype=Object.create(z),k},r.awrap=function(k){return{__await:k}},W(Q.prototype),v(Q.prototype,p,(function(){return this})),r.AsyncIterator=Q,r.async=function(k,M,O,P,H){H===void 0&&(H=Promise);var et=new Q(x(k,M,O,P),H);return r.isGeneratorFunction(M)?et:et.next().then((function(it){return it.done?it.value:et.next()}))},W(z),v(z,g,"Generator"),v(z,h,(function(){return this})),v(z,"toString",(function(){return"[object Generator]"})),r.keys=function(k){var M=Object(k),O=[];for(var P in M)O.push(P);return O.reverse(),function H(){for(;O.length;){var et=O.pop();if(et in M)return H.value=et,H.done=!1,H}return H.done=!0,H}},r.values=T,R.prototype={constructor:R,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!k)for(var M in this)M.charAt(0)==="t"&&l.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var M=this;function O(X,ut){return et.type="throw",et.arg=k,M.next=X,ut&&(M.method="next",M.arg=void 0),!!ut}for(var P=this.tryEntries.length-1;P>=0;--P){var H=this.tryEntries[P],et=H.completion;if(H.tryLoc==="root")return O("end");if(H.tryLoc<=this.prev){var it=l.call(H,"catchLoc"),pt=l.call(H,"finallyLoc");if(it&&pt){if(this.prev<H.catchLoc)return O(H.catchLoc,!0);if(this.prev<H.finallyLoc)return O(H.finallyLoc)}else if(it){if(this.prev<H.catchLoc)return O(H.catchLoc,!0)}else{if(!pt)throw new Error("try statement without catch or finally");if(this.prev<H.finallyLoc)return O(H.finallyLoc)}}}},abrupt:function(k,M){for(var O=this.tryEntries.length-1;O>=0;--O){var P=this.tryEntries[O];if(P.tryLoc<=this.prev&&l.call(P,"finallyLoc")&&this.prev<P.finallyLoc){var H=P;break}}H&&(k==="break"||k==="continue")&&H.tryLoc<=M&&M<=H.finallyLoc&&(H=null);var et=H?H.completion:{};return et.type=k,et.arg=M,H?(this.method="next",this.next=H.finallyLoc,w):this.complete(et)},complete:function(k,M){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&M&&(this.next=M),w},finish:function(k){for(var M=this.tryEntries.length-1;M>=0;--M){var O=this.tryEntries[M];if(O.finallyLoc===k)return this.complete(O.completion,O.afterLoc),F(O),w}},catch:function(k){for(var M=this.tryEntries.length-1;M>=0;--M){var O=this.tryEntries[M];if(O.tryLoc===k){var P=O.completion;if(P.type==="throw"){var H=P.arg;F(O)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(k,M,O){return this.delegate={iterator:T(k),resultName:M,nextLoc:O},this.method==="next"&&(this.arg=void 0),w}},r})(typeof s=="object"?s.exports:{});try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},{}],493:[function(t,s,u){var o=t("buffer").Buffer,r=t("inherits"),c=t("hash-base"),l=new Array(16),n=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],g=[0,1518500249,1859775393,2400959708,2840853838],v=[1352829926,1548603684,1836072691,2053994217,0];function x(){c.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function y(Z,K){return Z<<K|Z>>>32-K}function w(Z,K,z,W,Q,rt,tt,j){return y(Z+(K^z^W)+rt+tt|0,j)+Q|0}function S(Z,K,z,W,Q,rt,tt,j){return y(Z+(K&z|~K&W)+rt+tt|0,j)+Q|0}function E(Z,K,z,W,Q,rt,tt,j){return y(Z+((K|~z)^W)+rt+tt|0,j)+Q|0}function I(Z,K,z,W,Q,rt,tt,j){return y(Z+(K&W|z&~W)+rt+tt|0,j)+Q|0}function D(Z,K,z,W,Q,rt,tt,j){return y(Z+(K^(z|~W))+rt+tt|0,j)+Q|0}r(x,c),x.prototype._update=function(){for(var Z=l,K=0;K<16;++K)Z[K]=this._block.readInt32LE(4*K);for(var z=0|this._a,W=0|this._b,Q=0|this._c,rt=0|this._d,tt=0|this._e,j=0|this._a,F=0|this._b,R=0|this._c,T=0|this._d,C=0|this._e,k=0;k<80;k+=1){var M,O;k<16?(M=w(z,W,Q,rt,tt,Z[n[k]],g[0],h[k]),O=D(j,F,R,T,C,Z[f[k]],v[0],p[k])):k<32?(M=S(z,W,Q,rt,tt,Z[n[k]],g[1],h[k]),O=I(j,F,R,T,C,Z[f[k]],v[1],p[k])):k<48?(M=E(z,W,Q,rt,tt,Z[n[k]],g[2],h[k]),O=E(j,F,R,T,C,Z[f[k]],v[2],p[k])):k<64?(M=I(z,W,Q,rt,tt,Z[n[k]],g[3],h[k]),O=S(j,F,R,T,C,Z[f[k]],v[3],p[k])):(M=D(z,W,Q,rt,tt,Z[n[k]],g[4],h[k]),O=w(j,F,R,T,C,Z[f[k]],v[4],p[k])),z=tt,tt=rt,rt=y(Q,10),Q=W,W=M,j=C,C=T,T=y(R,10),R=F,F=O}var P=this._b+Q+T|0;this._b=this._c+rt+C|0,this._c=this._d+tt+j|0,this._d=this._e+z+F|0,this._e=this._a+W+R|0,this._a=P},x.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var Z=o.alloc?o.alloc(20):new o(20);return Z.writeInt32LE(this._a,0),Z.writeInt32LE(this._b,4),Z.writeInt32LE(this._c,8),Z.writeInt32LE(this._d,12),Z.writeInt32LE(this._e,16),Z},s.exports=x},{buffer:220,"hash-base":425,inherits:440}],494:[function(t,s,u){var o=t("buffer"),r=o.Buffer;function c(n,f){for(var h in n)f[h]=n[h]}function l(n,f,h){return r(n,f,h)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?s.exports=o:(c(o,u),u.Buffer=l),l.prototype=Object.create(r.prototype),c(r,l),l.from=function(n,f,h){if(typeof n=="number")throw new TypeError("Argument must not be a number");return r(n,f,h)},l.alloc=function(n,f,h){if(typeof n!="number")throw new TypeError("Argument must be a number");var p=r(n);return f!==void 0?typeof h=="string"?p.fill(f,h):p.fill(f):p.fill(0),p},l.allocUnsafe=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return r(n)},l.allocUnsafeSlow=function(n){if(typeof n!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(n)}},{buffer:220}],495:[function(t,s,u){(function(o){(function(){var r,c=t("buffer"),l=c.Buffer,n={};for(r in c)c.hasOwnProperty(r)&&r!=="SlowBuffer"&&r!=="Buffer"&&(n[r]=c[r]);var f=n.Buffer={};for(r in l)l.hasOwnProperty(r)&&r!=="allocUnsafe"&&r!=="allocUnsafeSlow"&&(f[r]=l[r]);if(n.Buffer.prototype=l.prototype,f.from&&f.from!==Uint8Array.from||(f.from=function(h,p,g){if(typeof h=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof h);if(h&&h.length===void 0)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof h);return l(h,p,g)}),f.alloc||(f.alloc=function(h,p,g){if(typeof h!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof h);if(h<0||h>=2*(1<<30))throw new RangeError('The value "'+h+'" is invalid for option "size"');var v=l(h);return p&&p.length!==0?typeof g=="string"?v.fill(p,g):v.fill(p):v.fill(0),v}),!n.kStringMaxLength)try{n.kStringMaxLength=o.binding("buffer").kStringMaxLength}catch{}n.constants||(n.constants={MAX_LENGTH:n.kMaxLength},n.kStringMaxLength&&(n.constants.MAX_STRING_LENGTH=n.kStringMaxLength)),s.exports=n}).call(this)}).call(this,t("_process"))},{_process:467,buffer:220}],496:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0});const o=t("xmlchars/xml/1.0/ed5"),r=t("xmlchars/xml/1.1/ed2"),c=t("xmlchars/xmlns/1.0/ed3");var l=o.isS,n=o.isChar,f=o.isNameStartChar,h=o.isNameChar,p=o.S_LIST,g=o.NAME_RE,v=r.isChar,x=c.isNCNameStartChar,y=c.isNCNameChar,w=c.NC_NAME_RE;const S="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/2000/xmlns/",I={__proto__:null,xml:S,xmlns:E},D={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},Z=T=>T===34||T===39,K=[34,39],z=[...K,91,62],W=[...K,60,93],Q=[61,63,...p],rt=[...p,62,38,60];function tt(T,C,k){switch(C){case"xml":k!==S&&T.fail(`xml prefix must be bound to ${S}.`);break;case"xmlns":k!==E&&T.fail(`xmlns prefix must be bound to ${E}.`)}switch(k){case E:T.fail(C===""?`the default namespace may not be set to ${k}.`:`may not assign a prefix (even "xmlns") to the URI ${E}.`);break;case S:switch(C){case"xml":break;case"":T.fail(`the default namespace may not be set to ${k}.`);break;default:T.fail("may not assign the xml namespace to another prefix.")}}}const j=T=>w.test(T),F=T=>g.test(T);u.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const R={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};u.SaxesParser=class{constructor(T){this.opt=T??{},this.fragmentOpt=!!this.opt.fragment;const C=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,C){this.nameStartCheck=x,this.nameCheck=y,this.isName=j,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},I);const k=this.opt.additionalNamespaces;k!=null&&((function(M,O){for(const P of Object.keys(O))tt(M,P,O[P])})(this,k),Object.assign(this.ns,k))}else this.nameStartCheck=f,this.nameCheck=h,this.isName=F,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}get closed(){return this._closed}_init(){var T;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:C}=this;this.state=C?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=C,this.xmlDeclPossible=!C,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:k}=this.opt;if(k===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");k="1.0"}this.setXMLVersion(k),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(D),(T=this.readyHandler)===null||T===void 0||T.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(T,C){this[R[T]]=C}off(T){this[R[T]]=void 0}makeError(T){var C;let k=(C=this.fileName)!==null&&C!==void 0?C:"";return this.trackPosition&&(k.length>0&&(k+=":"),k+=`${this.line}:${this.column}`),k.length>0&&(k+=": "),new Error(k+T)}fail(T){const C=this.makeError(T),k=this.errorHandler;if(k===void 0)throw C;return k(C),this}write(T){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let C=!1;T===null?(C=!0,T=""):typeof T=="object"&&(T=T.toString()),this.carriedFromPrevious!==void 0&&(T=`${this.carriedFromPrevious}${T}`,this.carriedFromPrevious=void 0);let k=T.length;const M=T.charCodeAt(k-1);!C&&(M===13||M>=55296&&M<=56319)&&(this.carriedFromPrevious=T[k-1],k--,T=T.slice(0,k));const{stateTable:O}=this;for(this.chunk=T,this.i=0;this.i<k;)O[this.state].call(this);return this.chunkPosition+=k,C?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:T,i:C}=this;if(this.prevI=C,this.i=C+1,C>=T.length)return-1;const k=T.charCodeAt(C);if(this.column++,k<55296){if(k>=32||k===9)return k;switch(k){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return T.charCodeAt(C+1)===10&&(this.i=C+2),this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),k}}if(k>56319)return k>=57344&&k<=65533||this.fail("disallowed character."),k;const M=65536+1024*(k-55296)+(T.charCodeAt(C+1)-56320);return this.i=C+2,M>1114111&&this.fail("disallowed character."),M}getCode11(){const{chunk:T,i:C}=this;if(this.prevI=C,this.i=C+1,C>=T.length)return-1;const k=T.charCodeAt(C);if(this.column++,k<55296){if(k>31&&k<127||k>159&&k!==8232||k===9)return k;switch(k){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const O=T.charCodeAt(C+1);O!==10&&O!==133||(this.i=C+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,-2;default:return this.fail("disallowed character."),k}}if(k>56319)return k>=57344&&k<=65533||this.fail("disallowed character."),k;const M=65536+1024*(k-55296)+(T.charCodeAt(C+1)-56320);return this.i=C+2,M>1114111&&this.fail("disallowed character."),M}getCodeNorm(){const T=this.getCode();return T===-2?10:T}unget(){this.i=this.prevI,this.column--}captureTo(T){let{i:C}=this;const{chunk:k}=this;for(;;){const M=this.getCode(),O=M===-2,P=O?10:M;if(P===-1||T.includes(P))return this.text+=k.slice(C,this.prevI),P;O&&(this.text+=k.slice(C,this.prevI)+`
`,C=this.i)}}captureToChar(T){let{i:C}=this;const{chunk:k}=this;for(;;){let M=this.getCode();switch(M){case-2:this.text+=k.slice(C,this.prevI)+`
`,C=this.i,M=10;break;case-1:return this.text+=k.slice(C),!1}if(M===T)return this.text+=k.slice(C,this.prevI),!0}}captureNameChars(){const{chunk:T,i:C}=this;for(;;){const k=this.getCode();if(k===-1)return this.name+=T.slice(C),-1;if(!h(k))return this.name+=T.slice(C,this.prevI),k===-2?10:k}}skipSpaces(){for(;;){const T=this.getCodeNorm();if(T===-1||!l(T))return T}}setXMLVersion(T){this.currentXMLVersion=T,T==="1.0"?(this.isChar=n,this.getCode=this.getCode10):(this.isChar=v,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const T=this.i,C=this.skipSpaces();switch(this.prevI!==T&&(this.xmlDeclPossible=!1),C){case 60:if(this.state=15,this.text.length!==0)throw new Error("no-empty text at start");break;case-1:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var T;const C=this.captureTo(z);switch(C){case 62:(T=this.doctypeHandler)===null||T===void 0||T.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case-1:break;default:this.text+=String.fromCodePoint(C),C===91?this.state=4:Z(C)&&(this.state=3,this.q=C)}}sDoctypeQuote(){const T=this.q;this.captureToChar(T)&&(this.text+=String.fromCodePoint(T),this.q=null,this.state=2)}sDTD(){const T=this.captureTo(W);T!==-1&&(this.text+=String.fromCodePoint(T),T===93?this.state=2:T===60?this.state=6:Z(T)&&(this.state=5,this.q=T))}sDTDQuoted(){const T=this.q;this.captureToChar(T)&&(this.text+=String.fromCodePoint(T),this.state=4,this.q=null)}sDTDOpenWaka(){const T=this.getCodeNorm();switch(this.text+=String.fromCodePoint(T),T){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const T=String.fromCodePoint(this.getCodeNorm()),C=this.openWakaBang+=T;this.text+=T,C!=="-"&&(this.state=C==="--"?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const T=this.getCodeNorm();this.text+=String.fromCodePoint(T),this.state=T===45?10:8}sDTDCommentEnded(){const T=this.getCodeNorm();this.text+=String.fromCodePoint(T),T===62?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const T=this.getCodeNorm();this.text+=String.fromCodePoint(T),T===62&&(this.state=4)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:T}=this;const{chunk:C}=this;t:for(;;)switch(this.getCode()){case-2:this.entity+=C.slice(T,this.prevI)+`
`,T=this.i;break;case 59:{const{entityReturnState:k}=this,M=this.entity+C.slice(T,this.prevI);let O;this.state=k,M===""?(this.fail("empty entity name."),O="&;"):(O=this.parseEntity(M),this.entity=""),k===13&&this.textHandler===void 0||(this.text+=O);break t}case-1:this.entity+=C.slice(T);break t}}sOpenWaka(){const T=this.getCode();if(f(T))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(T){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var T;const C=this.getCodeNorm();C===45?(this.state=19,(T=this.commentHandler)===null||T===void 0||T.call(this,this.text),this.text=""):(this.text+="-"+String.fromCodePoint(C),this.state=17)}sCommentEnded(){const T=this.getCodeNorm();T!==62?(this.fail("malformed comment."),this.text+="--"+String.fromCodePoint(T),this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const T=this.getCodeNorm();T===93?this.state=22:(this.text+="]"+String.fromCodePoint(T),this.state=20)}sCDataEnding2(){var T;const C=this.getCodeNorm();switch(C){case 62:(T=this.cdataHandler)===null||T===void 0||T.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+="]]"+String.fromCodePoint(C),this.state=20}}sPIFirstChar(){const T=this.getCodeNorm();this.nameStartCheck(T)?(this.piTarget+=String.fromCodePoint(T),this.state=24):T===63||l(T)?(this.fail("processing instruction without a target."),this.state=T===63?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(T),this.state=24)}sPIRest(){const{chunk:T,i:C}=this;for(;;){const k=this.getCodeNorm();if(k===-1)return void(this.piTarget+=T.slice(C));if(!this.nameCheck(k)){this.piTarget+=T.slice(C,this.prevI);const M=k===63;M||l(k)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=M?33:27):this.state=M?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(k));break}}}sPIBody(){if(this.text.length===0){const T=this.getCodeNorm();T===63?this.state=26:l(T)||(this.text=String.fromCodePoint(T))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var T;const C=this.getCodeNorm();if(C===62){const{piTarget:k}=this;k.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(T=this.piHandler)===null||T===void 0||T.call(this,{target:k,body:this.text}),this.piTarget=this.text="",this.state=13}else C===63?this.text+="?":(this.text+="?"+String.fromCodePoint(C),this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const T=this.skipSpaces();T!==63?T!==-1&&(this.state=28,this.name=String.fromCodePoint(T)):this.state=33}sXMLDeclName(){const T=this.captureTo(Q);if(T===63)return this.state=33,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(l(T)||T===61){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail("expected one of "+this.xmlDeclExpects.join(", "))}this.state=T===61?30:29}}sXMLDeclEq(){const T=this.getCodeNorm();if(T===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(T)||(T!==61&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const T=this.getCodeNorm();if(T===63)return this.state=33,void this.fail("XML declaration is incomplete.");l(T)||(Z(T)?this.q=T:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const T=this.captureTo([this.q,63]);if(T===63)return this.state=33,this.text="",void this.fail("XML declaration is incomplete.");if(T===-1)return;const C=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const k=C;this.xmlDecl.version=k,/^1\.[0-9]+$/.test(k)?this.opt.forceXMLVersion||this.setXMLVersion(k):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(C)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=C;break;case"standalone":C!=="yes"&&C!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=C}this.name="",this.state=32}sXMLDeclSeparator(){const T=this.getCodeNorm();T!==63?(l(T)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=33}sXMLDeclEnding(){var T;this.getCodeNorm()===62?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(T=this.xmldeclHandler)===null||T===void 0||T.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var T;const C=this.captureNameChars();if(C===-1)return;const k=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=k.ns=Object.create(null)),(T=this.openTagStartHandler)===null||T===void 0||T.call(this,k),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),C){case 62:this.openTag();break;case 47:this.state=35;break;default:l(C)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){this.getCode()===62?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const T=this.skipSpaces();T!==-1&&(f(T)?(this.unget(),this.state=37):T===62?this.openTag():T===47?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const T=this.captureNameChars();T===61?this.state=39:l(T)?this.state=38:T===62?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):T!==-1&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const T=this.skipSpaces();switch(T){case-1:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",T===62?this.openTag():f(T)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const T=this.getCodeNorm();Z(T)?(this.q=T,this.state=40):l(T)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:T,chunk:C}=this;let{i:k}=this;for(;;)switch(this.getCode()){case T:return this.pushAttrib(this.name,this.text+C.slice(k,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=C.slice(k,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case-2:case 9:this.text+=C.slice(k,this.prevI)+" ",k=this.i;break;case 60:return this.text+=C.slice(k,this.prevI),void this.fail("disallowed character.");case-1:return void(this.text+=C.slice(k))}}sAttribValueClosed(){const T=this.getCodeNorm();l(T)?this.state=36:T===62?this.openTag():T===47?this.state=35:f(T)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const T=this.captureTo(rt);switch(T){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case-1:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",T===62?this.openTag():this.state=36}}sCloseTag(){const T=this.captureNameChars();T===62?this.closeTag():l(T)?this.state=44:T!==-1&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case-1:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:T,forbiddenState:C}=this;const{chunk:k,textHandler:M}=this;t:for(;;)switch(this.getCode()){case 60:if(this.state=15,M!==void 0){const{text:O}=this,P=k.slice(T,this.prevI);O.length!==0?(M(O+P),this.text=""):P.length!==0&&M(P)}C=0;break t;case 38:this.state=14,this.entityReturnState=13,M!==void 0&&(this.text+=k.slice(T,this.prevI)),C=0;break t;case 93:switch(C){case 0:C=1;break;case 1:C=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:C===2&&this.fail('the string "]]>" is disallowed in char data.'),C=0;break;case-2:M!==void 0&&(this.text+=k.slice(T,this.prevI)+`
`),T=this.i,C=0;break;case-1:M!==void 0&&(this.text+=k.slice(T));break t;default:C=0}this.forbiddenState=C}handleTextOutsideRoot(){let{i:T}=this;const{chunk:C,textHandler:k}=this;let M=!1;t:for(;;){const O=this.getCode();switch(O){case 60:if(this.state=15,k!==void 0){const{text:P}=this,H=C.slice(T,this.prevI);P.length!==0?(k(P+H),this.text=""):H.length!==0&&k(H)}break t;case 38:this.state=14,this.entityReturnState=13,k!==void 0&&(this.text+=C.slice(T,this.prevI)),M=!0;break t;case-2:k!==void 0&&(this.text+=C.slice(T,this.prevI)+`
`),T=this.i;break;case-1:k!==void 0&&(this.text+=C.slice(T));break t;default:l(O)||(M=!0)}}M&&(this.sawRoot||this.reportedTextBeforeRoot||(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(T,C){var k;const{prefix:M,local:O}=this.qname(T),P={name:T,prefix:M,local:O,value:C};if(this.attribList.push(P),(k=this.attributeHandler)===null||k===void 0||k.call(this,P),M==="xmlns"){const H=C.trim();this.currentXMLVersion==="1.0"&&H===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[O]=H,tt(this,O,H)}else if(T==="xmlns"){const H=C.trim();this.topNS[""]=H,tt(this,"",H)}}pushAttribPlain(T,C){var k;const M={name:T,value:C};this.attribList.push(M),(k=this.attributeHandler)===null||k===void 0||k.call(this,M)}end(){var T,C;this.sawRoot||this.fail("document must contain a root element.");const{tags:k}=this;for(;k.length>0;){const O=k.pop();this.fail("unclosed tag: "+O.name)}this.state!==0&&this.state!==13&&this.fail("unexpected end.");const{text:M}=this;return M.length!==0&&((T=this.textHandler)===null||T===void 0||T.call(this,M),this.text=""),this._closed=!0,(C=this.endHandler)===null||C===void 0||C.call(this),this._init(),this}resolve(T){var C,k;let M=this.topNS[T];if(M!==void 0)return M;const{tags:O}=this;for(let P=O.length-1;P>=0;P--)if(M=O[P].ns[T],M!==void 0)return M;return M=this.ns[T],M!==void 0?M:(k=(C=this.opt).resolvePrefix)===null||k===void 0?void 0:k.call(C,T)}qname(T){const C=T.indexOf(":");if(C===-1)return{prefix:"",local:T};const k=T.slice(C+1),M=T.slice(0,C);return(M===""||k===""||k.includes(":"))&&this.fail(`malformed name: ${T}.`),{prefix:M,local:k}}processAttribsNS(){var T;const{attribList:C}=this,k=this.tag;{const{prefix:P,local:H}=this.qname(k.name);k.prefix=P,k.local=H;const et=k.uri=(T=this.resolve(P))!==null&&T!==void 0?T:"";P!==""&&(P==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),et===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(P)}.`),k.uri=P))}if(C.length===0)return;const{attributes:M}=k,O=new Set;for(const P of C){const{name:H,prefix:et,local:it}=P;let pt,X;et===""?(pt=H==="xmlns"?E:"",X=H):(pt=this.resolve(et),pt===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(et)}.`),pt=et),X=`{${pt}}${it}`),O.has(X)&&this.fail(`duplicate attribute: ${X}.`),O.add(X),P.uri=pt,M[H]=P}this.attribList=[]}processAttribsPlain(){const{attribList:T}=this,C=this.tag.attributes;for(const{name:k,value:M}of T)C[k]!==void 0&&this.fail(`duplicate attribute: ${k}.`),C[k]=M;this.attribList=[]}openTag(){var T;this.processAttribs();const{tags:C}=this,k=this.tag;k.isSelfClosing=!1,(T=this.openTagHandler)===null||T===void 0||T.call(this,k),C.push(k),this.state=13,this.name=""}openSelfClosingTag(){var T,C,k;this.processAttribs();const{tags:M}=this,O=this.tag;O.isSelfClosing=!0,(T=this.openTagHandler)===null||T===void 0||T.call(this,O),(C=this.closeTagHandler)===null||C===void 0||C.call(this,O),(this.tag=(k=M[M.length-1])!==null&&k!==void 0?k:null)===null&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:T,name:C}=this;if(this.state=13,this.name="",C==="")return this.fail("weird empty close tag."),void(this.text+="</>");const k=this.closeTagHandler;let M=T.length;for(;M-- >0;){const O=this.tag=T.pop();if(this.topNS=O.ns,k?.(O),O.name===C)break;this.fail("unexpected close tag.")}M===0?this.closedRoot=!0:M<0&&(this.fail(`unmatched closing tag: ${C}.`),this.text+=`</${C}>`)}parseEntity(T){if(T[0]!=="#"){const k=this.ENTITIES[T];return k!==void 0?k:(this.fail(this.isName(T)?"undefined entity.":"disallowed character in entity name."),`&${T};`)}let C=NaN;return T[1]==="x"&&/^#x[0-9a-f]+$/i.test(T)?C=parseInt(T.slice(2),16):/^#[0-9]+$/.test(T)&&(C=parseInt(T.slice(1),10)),this.isChar(C)?String.fromCodePoint(C):(this.fail("malformed character entity."),`&${T};`)}}},{"xmlchars/xml/1.0/ed5":543,"xmlchars/xml/1.1/ed2":544,"xmlchars/xmlns/1.0/ed3":545}],497:[function(t,s,u){var o=t("safe-buffer").Buffer;function r(c,l){this._block=o.alloc(c),this._finalSize=l,this._blockSize=c,this._len=0}r.prototype.update=function(c,l){typeof c=="string"&&(l=l||"utf8",c=o.from(c,l));for(var n=this._block,f=this._blockSize,h=c.length,p=this._len,g=0;g<h;){for(var v=p%f,x=Math.min(h-g,f-v),y=0;y<x;y++)n[v+y]=c[g+y];g+=x,(p+=x)%f==0&&this._update(n)}return this._len+=h,this},r.prototype.digest=function(c){var l=this._len%this._blockSize;this._block[l]=128,this._block.fill(0,l+1),l>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var f=(4294967295&n)>>>0,h=(n-f)/4294967296;this._block.writeUInt32BE(h,this._blockSize-8),this._block.writeUInt32BE(f,this._blockSize-4)}this._update(this._block);var p=this._hash();return c?p.toString(c):p},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},s.exports=r},{"safe-buffer":494}],498:[function(t,s,u){var o=s.exports=function(r){r=r.toLowerCase();var c=o[r];if(!c)throw new Error(r+" is not supported (we accept pull requests)");return new c};o.sha=t("./sha"),o.sha1=t("./sha1"),o.sha224=t("./sha224"),o.sha256=t("./sha256"),o.sha384=t("./sha384"),o.sha512=t("./sha512")},{"./sha":499,"./sha1":500,"./sha224":501,"./sha256":502,"./sha384":503,"./sha512":504}],499:[function(t,s,u){var o=t("inherits"),r=t("./hash"),c=t("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],n=new Array(80);function f(){this.init(),this._w=n,r.call(this,64,56)}function h(g){return g<<30|g>>>2}function p(g,v,x,y){return g===0?v&x|~v&y:g===2?v&x|v&y|x&y:v^x^y}o(f,r),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},f.prototype._update=function(g){for(var v,x=this._w,y=0|this._a,w=0|this._b,S=0|this._c,E=0|this._d,I=0|this._e,D=0;D<16;++D)x[D]=g.readInt32BE(4*D);for(;D<80;++D)x[D]=x[D-3]^x[D-8]^x[D-14]^x[D-16];for(var Z=0;Z<80;++Z){var K=~~(Z/20),z=0|((v=y)<<5|v>>>27)+p(K,w,S,E)+I+x[Z]+l[K];I=E,E=S,S=h(w),w=y,y=z}this._a=y+this._a|0,this._b=w+this._b|0,this._c=S+this._c|0,this._d=E+this._d|0,this._e=I+this._e|0},f.prototype._hash=function(){var g=c.allocUnsafe(20);return g.writeInt32BE(0|this._a,0),g.writeInt32BE(0|this._b,4),g.writeInt32BE(0|this._c,8),g.writeInt32BE(0|this._d,12),g.writeInt32BE(0|this._e,16),g},s.exports=f},{"./hash":497,inherits:440,"safe-buffer":494}],500:[function(t,s,u){var o=t("inherits"),r=t("./hash"),c=t("safe-buffer").Buffer,l=[1518500249,1859775393,-1894007588,-899497514],n=new Array(80);function f(){this.init(),this._w=n,r.call(this,64,56)}function h(v){return v<<5|v>>>27}function p(v){return v<<30|v>>>2}function g(v,x,y,w){return v===0?x&y|~x&w:v===2?x&y|x&w|y&w:x^y^w}o(f,r),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},f.prototype._update=function(v){for(var x,y=this._w,w=0|this._a,S=0|this._b,E=0|this._c,I=0|this._d,D=0|this._e,Z=0;Z<16;++Z)y[Z]=v.readInt32BE(4*Z);for(;Z<80;++Z)y[Z]=(x=y[Z-3]^y[Z-8]^y[Z-14]^y[Z-16])<<1|x>>>31;for(var K=0;K<80;++K){var z=~~(K/20),W=h(w)+g(z,S,E,I)+D+y[K]+l[z]|0;D=I,I=E,E=p(S),S=w,w=W}this._a=w+this._a|0,this._b=S+this._b|0,this._c=E+this._c|0,this._d=I+this._d|0,this._e=D+this._e|0},f.prototype._hash=function(){var v=c.allocUnsafe(20);return v.writeInt32BE(0|this._a,0),v.writeInt32BE(0|this._b,4),v.writeInt32BE(0|this._c,8),v.writeInt32BE(0|this._d,12),v.writeInt32BE(0|this._e,16),v},s.exports=f},{"./hash":497,inherits:440,"safe-buffer":494}],501:[function(t,s,u){var o=t("inherits"),r=t("./sha256"),c=t("./hash"),l=t("safe-buffer").Buffer,n=new Array(64);function f(){this.init(),this._w=n,c.call(this,64,56)}o(f,r),f.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},f.prototype._hash=function(){var h=l.allocUnsafe(28);return h.writeInt32BE(this._a,0),h.writeInt32BE(this._b,4),h.writeInt32BE(this._c,8),h.writeInt32BE(this._d,12),h.writeInt32BE(this._e,16),h.writeInt32BE(this._f,20),h.writeInt32BE(this._g,24),h},s.exports=f},{"./hash":497,"./sha256":502,inherits:440,"safe-buffer":494}],502:[function(t,s,u){var o=t("inherits"),r=t("./hash"),c=t("safe-buffer").Buffer,l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=new Array(64);function f(){this.init(),this._w=n,r.call(this,64,56)}function h(y,w,S){return S^y&(w^S)}function p(y,w,S){return y&w|S&(y|w)}function g(y){return(y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10)}function v(y){return(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7)}function x(y){return(y>>>7|y<<25)^(y>>>18|y<<14)^y>>>3}o(f,r),f.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},f.prototype._update=function(y){for(var w,S=this._w,E=0|this._a,I=0|this._b,D=0|this._c,Z=0|this._d,K=0|this._e,z=0|this._f,W=0|this._g,Q=0|this._h,rt=0;rt<16;++rt)S[rt]=y.readInt32BE(4*rt);for(;rt<64;++rt)S[rt]=0|(((w=S[rt-2])>>>17|w<<15)^(w>>>19|w<<13)^w>>>10)+S[rt-7]+x(S[rt-15])+S[rt-16];for(var tt=0;tt<64;++tt){var j=Q+v(K)+h(K,z,W)+l[tt]+S[tt]|0,F=g(E)+p(E,I,D)|0;Q=W,W=z,z=K,K=Z+j|0,Z=D,D=I,I=E,E=j+F|0}this._a=E+this._a|0,this._b=I+this._b|0,this._c=D+this._c|0,this._d=Z+this._d|0,this._e=K+this._e|0,this._f=z+this._f|0,this._g=W+this._g|0,this._h=Q+this._h|0},f.prototype._hash=function(){var y=c.allocUnsafe(32);return y.writeInt32BE(this._a,0),y.writeInt32BE(this._b,4),y.writeInt32BE(this._c,8),y.writeInt32BE(this._d,12),y.writeInt32BE(this._e,16),y.writeInt32BE(this._f,20),y.writeInt32BE(this._g,24),y.writeInt32BE(this._h,28),y},s.exports=f},{"./hash":497,inherits:440,"safe-buffer":494}],503:[function(t,s,u){var o=t("inherits"),r=t("./sha512"),c=t("./hash"),l=t("safe-buffer").Buffer,n=new Array(160);function f(){this.init(),this._w=n,c.call(this,128,112)}o(f,r),f.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},f.prototype._hash=function(){var h=l.allocUnsafe(48);function p(g,v,x){h.writeInt32BE(g,x),h.writeInt32BE(v,x+4)}return p(this._ah,this._al,0),p(this._bh,this._bl,8),p(this._ch,this._cl,16),p(this._dh,this._dl,24),p(this._eh,this._el,32),p(this._fh,this._fl,40),h},s.exports=f},{"./hash":497,"./sha512":504,inherits:440,"safe-buffer":494}],504:[function(t,s,u){var o=t("inherits"),r=t("./hash"),c=t("safe-buffer").Buffer,l=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],n=new Array(160);function f(){this.init(),this._w=n,r.call(this,128,112)}function h(I,D,Z){return Z^I&(D^Z)}function p(I,D,Z){return I&D|Z&(I|D)}function g(I,D){return(I>>>28|D<<4)^(D>>>2|I<<30)^(D>>>7|I<<25)}function v(I,D){return(I>>>14|D<<18)^(I>>>18|D<<14)^(D>>>9|I<<23)}function x(I,D){return(I>>>1|D<<31)^(I>>>8|D<<24)^I>>>7}function y(I,D){return(I>>>1|D<<31)^(I>>>8|D<<24)^(I>>>7|D<<25)}function w(I,D){return(I>>>19|D<<13)^(D>>>29|I<<3)^I>>>6}function S(I,D){return(I>>>19|D<<13)^(D>>>29|I<<3)^(I>>>6|D<<26)}function E(I,D){return I>>>0<D>>>0?1:0}o(f,r),f.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},f.prototype._update=function(I){for(var D=this._w,Z=0|this._ah,K=0|this._bh,z=0|this._ch,W=0|this._dh,Q=0|this._eh,rt=0|this._fh,tt=0|this._gh,j=0|this._hh,F=0|this._al,R=0|this._bl,T=0|this._cl,C=0|this._dl,k=0|this._el,M=0|this._fl,O=0|this._gl,P=0|this._hl,H=0;H<32;H+=2)D[H]=I.readInt32BE(4*H),D[H+1]=I.readInt32BE(4*H+4);for(;H<160;H+=2){var et=D[H-30],it=D[H-30+1],pt=x(et,it),X=y(it,et),ut=w(et=D[H-4],it=D[H-4+1]),G=S(it,et),U=D[H-14],st=D[H-14+1],gt=D[H-32],zt=D[H-32+1],St=X+st|0,Bt=pt+U+E(St,X)|0;Bt=(Bt=Bt+ut+E(St=St+G|0,G)|0)+gt+E(St=St+zt|0,zt)|0,D[H]=Bt,D[H+1]=St}for(var ie=0;ie<160;ie+=2){Bt=D[ie],St=D[ie+1];var re=p(Z,K,z),Ct=p(F,R,T),Yt=g(Z,F),Qt=g(F,Z),Ht=v(Q,k),Jt=v(k,Q),ne=l[ie],ae=l[ie+1],me=h(Q,rt,tt),Le=h(k,M,O),Pe=P+Jt|0,Be=j+Ht+E(Pe,P)|0;Be=(Be=(Be=Be+me+E(Pe=Pe+Le|0,Le)|0)+ne+E(Pe=Pe+ae|0,ae)|0)+Bt+E(Pe=Pe+St|0,St)|0;var He=Qt+Ct|0,Je=Yt+re+E(He,Qt)|0;j=tt,P=O,tt=rt,O=M,rt=Q,M=k,Q=W+Be+E(k=C+Pe|0,C)|0,W=z,C=T,z=K,T=R,K=Z,R=F,Z=Be+Je+E(F=Pe+He|0,Pe)|0}this._al=this._al+F|0,this._bl=this._bl+R|0,this._cl=this._cl+T|0,this._dl=this._dl+C|0,this._el=this._el+k|0,this._fl=this._fl+M|0,this._gl=this._gl+O|0,this._hl=this._hl+P|0,this._ah=this._ah+Z+E(this._al,F)|0,this._bh=this._bh+K+E(this._bl,R)|0,this._ch=this._ch+z+E(this._cl,T)|0,this._dh=this._dh+W+E(this._dl,C)|0,this._eh=this._eh+Q+E(this._el,k)|0,this._fh=this._fh+rt+E(this._fl,M)|0,this._gh=this._gh+tt+E(this._gl,O)|0,this._hh=this._hh+j+E(this._hl,P)|0},f.prototype._hash=function(){var I=c.allocUnsafe(64);function D(Z,K,z){I.writeInt32BE(Z,z),I.writeInt32BE(K,z+4)}return D(this._ah,this._al,0),D(this._bh,this._bl,8),D(this._ch,this._cl,16),D(this._dh,this._dl,24),D(this._eh,this._el,32),D(this._fh,this._fl,40),D(this._gh,this._gl,48),D(this._hh,this._hl,56),I},s.exports=f},{"./hash":497,inherits:440,"safe-buffer":494}],505:[function(t,s,u){s.exports=r;var o=t("events").EventEmitter;function r(){o.call(this)}t("inherits")(r,o),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(c,l){var n=this;function f(w){c.writable&&c.write(w)===!1&&n.pause&&n.pause()}function h(){n.readable&&n.resume&&n.resume()}n.on("data",f),c.on("drain",h),c._isStdio||l&&l.end===!1||(n.on("end",g),n.on("close",v));var p=!1;function g(){p||(p=!0,c.end())}function v(){p||(p=!0,typeof c.destroy=="function"&&c.destroy())}function x(w){if(y(),o.listenerCount(this,"error")===0)throw w}function y(){n.removeListener("data",f),c.removeListener("drain",h),n.removeListener("end",g),n.removeListener("close",v),n.removeListener("error",x),c.removeListener("error",x),n.removeListener("end",y),n.removeListener("close",y),c.removeListener("close",y)}return n.on("error",x),c.on("error",x),n.on("end",y),n.on("close",y),c.on("close",y),c.emit("pipe",n),c}},{events:422,inherits:440,"readable-stream/duplex.js":507,"readable-stream/passthrough.js":516,"readable-stream/readable.js":517,"readable-stream/transform.js":518,"readable-stream/writable.js":519}],506:[function(t,s,u){var o={}.toString;s.exports=Array.isArray||function(r){return o.call(r)=="[object Array]"}},{}],507:[function(t,s,u){s.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":508}],508:[function(t,s,u){var o=t("process-nextick-args"),r=Object.keys||function(y){var w=[];for(var S in y)w.push(S);return w};s.exports=g;var c=Object.create(t("core-util-is"));c.inherits=t("inherits");var l=t("./_stream_readable"),n=t("./_stream_writable");c.inherits(g,l);for(var f=r(n.prototype),h=0;h<f.length;h++){var p=f[h];g.prototype[p]||(g.prototype[p]=n.prototype[p])}function g(y){if(!(this instanceof g))return new g(y);l.call(this,y),n.call(this,y),y&&y.readable===!1&&(this.readable=!1),y&&y.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,y&&y.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",v)}function v(){this.allowHalfOpen||this._writableState.ended||o.nextTick(x,this)}function x(y){y.end()}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=y,this._writableState.destroyed=y)}}),g.prototype._destroy=function(y,w){this.push(null),this.end(),o.nextTick(w,y)}},{"./_stream_readable":510,"./_stream_writable":512,"core-util-is":383,inherits:440,"process-nextick-args":466}],509:[function(t,s,u){s.exports=c;var o=t("./_stream_transform"),r=Object.create(t("core-util-is"));function c(l){if(!(this instanceof c))return new c(l);o.call(this,l)}r.inherits=t("inherits"),r.inherits(c,o),c.prototype._transform=function(l,n,f){f(null,l)}},{"./_stream_transform":511,"core-util-is":383,inherits:440}],510:[function(t,s,u){(function(o,r){(function(){var c=t("process-nextick-args");s.exports=Z;var l,n=t("isarray");Z.ReadableState=D,t("events").EventEmitter;var f=function(P,H){return P.listeners(H).length},h=t("./internal/streams/stream"),p=t("safe-buffer").Buffer,g=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},v=Object.create(t("core-util-is"));v.inherits=t("inherits");var x=t("util"),y=void 0;y=x&&x.debuglog?x.debuglog("stream"):function(){};var w,S=t("./internal/streams/BufferList"),E=t("./internal/streams/destroy");v.inherits(Z,h);var I=["error","close","destroy","pause","resume"];function D(P,H){P=P||{};var et=H instanceof(l=l||t("./_stream_duplex"));this.objectMode=!!P.objectMode,et&&(this.objectMode=this.objectMode||!!P.readableObjectMode);var it=P.highWaterMark,pt=P.readableHighWaterMark,X=this.objectMode?16:16384;this.highWaterMark=it||it===0?it:et&&(pt||pt===0)?pt:X,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new S,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=P.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,P.encoding&&(w||(w=t("string_decoder/").StringDecoder),this.decoder=new w(P.encoding),this.encoding=P.encoding)}function Z(P){if(l=l||t("./_stream_duplex"),!(this instanceof Z))return new Z(P);this._readableState=new D(P,this),this.readable=!0,P&&(typeof P.read=="function"&&(this._read=P.read),typeof P.destroy=="function"&&(this._destroy=P.destroy)),h.call(this)}function K(P,H,et,it,pt){var X,ut=P._readableState;return H===null?(ut.reading=!1,(function(G,U){if(!U.ended){if(U.decoder){var st=U.decoder.end();st&&st.length&&(U.buffer.push(st),U.length+=U.objectMode?1:st.length)}U.ended=!0,Q(G)}})(P,ut)):(pt||(X=(function(G,U){var st;gt=U,p.isBuffer(gt)||gt instanceof g||typeof U=="string"||U===void 0||G.objectMode||(st=new TypeError("Invalid non-string/buffer chunk"));var gt;return st})(ut,H)),X?P.emit("error",X):ut.objectMode||H&&H.length>0?(typeof H=="string"||ut.objectMode||Object.getPrototypeOf(H)===p.prototype||(H=(function(G){return p.from(G)})(H)),it?ut.endEmitted?P.emit("error",new Error("stream.unshift() after end event")):z(P,ut,H,!0):ut.ended?P.emit("error",new Error("stream.push() after EOF")):(ut.reading=!1,ut.decoder&&!et?(H=ut.decoder.write(H),ut.objectMode||H.length!==0?z(P,ut,H,!1):tt(P,ut)):z(P,ut,H,!1))):it||(ut.reading=!1)),(function(G){return!G.ended&&(G.needReadable||G.length<G.highWaterMark||G.length===0)})(ut)}function z(P,H,et,it){H.flowing&&H.length===0&&!H.sync?(P.emit("data",et),P.read(0)):(H.length+=H.objectMode?1:et.length,it?H.buffer.unshift(et):H.buffer.push(et),H.needReadable&&Q(P)),tt(P,H)}Object.defineProperty(Z.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(P){this._readableState&&(this._readableState.destroyed=P)}}),Z.prototype.destroy=E.destroy,Z.prototype._undestroy=E.undestroy,Z.prototype._destroy=function(P,H){this.push(null),H(P)},Z.prototype.push=function(P,H){var et,it=this._readableState;return it.objectMode?et=!0:typeof P=="string"&&((H=H||it.defaultEncoding)!==it.encoding&&(P=p.from(P,H),H=""),et=!0),K(this,P,H,!1,et)},Z.prototype.unshift=function(P){return K(this,P,null,!0,!1)},Z.prototype.isPaused=function(){return this._readableState.flowing===!1},Z.prototype.setEncoding=function(P){return w||(w=t("string_decoder/").StringDecoder),this._readableState.decoder=new w(P),this._readableState.encoding=P,this};function W(P,H){return P<=0||H.length===0&&H.ended?0:H.objectMode?1:P!=P?H.flowing&&H.length?H.buffer.head.data.length:H.length:(P>H.highWaterMark&&(H.highWaterMark=(function(et){return et>=8388608?et=8388608:(et--,et|=et>>>1,et|=et>>>2,et|=et>>>4,et|=et>>>8,et|=et>>>16,et++),et})(P)),P<=H.length?P:H.ended?H.length:(H.needReadable=!0,0))}function Q(P){var H=P._readableState;H.needReadable=!1,H.emittedReadable||(y("emitReadable",H.flowing),H.emittedReadable=!0,H.sync?c.nextTick(rt,P):rt(P))}function rt(P){y("emit readable"),P.emit("readable"),T(P)}function tt(P,H){H.readingMore||(H.readingMore=!0,c.nextTick(j,P,H))}function j(P,H){for(var et=H.length;!H.reading&&!H.flowing&&!H.ended&&H.length<H.highWaterMark&&(y("maybeReadMore read 0"),P.read(0),et!==H.length);)et=H.length;H.readingMore=!1}function F(P){y("readable nexttick read 0"),P.read(0)}function R(P,H){H.reading||(y("resume read 0"),P.read(0)),H.resumeScheduled=!1,H.awaitDrain=0,P.emit("resume"),T(P),H.flowing&&!H.reading&&P.read(0)}function T(P){var H=P._readableState;for(y("flow",H.flowing);H.flowing&&P.read()!==null;);}function C(P,H){return H.length===0?null:(H.objectMode?et=H.buffer.shift():!P||P>=H.length?(et=H.decoder?H.buffer.join(""):H.buffer.length===1?H.buffer.head.data:H.buffer.concat(H.length),H.buffer.clear()):et=(function(it,pt,X){var ut;return it<pt.head.data.length?(ut=pt.head.data.slice(0,it),pt.head.data=pt.head.data.slice(it)):ut=it===pt.head.data.length?pt.shift():X?(function(G,U){var st=U.head,gt=1,zt=st.data;for(G-=zt.length;st=st.next;){var St=st.data,Bt=G>St.length?St.length:G;if(Bt===St.length?zt+=St:zt+=St.slice(0,G),(G-=Bt)===0){Bt===St.length?(++gt,st.next?U.head=st.next:U.head=U.tail=null):(U.head=st,st.data=St.slice(Bt));break}++gt}return U.length-=gt,zt})(it,pt):(function(G,U){var st=p.allocUnsafe(G),gt=U.head,zt=1;for(gt.data.copy(st),G-=gt.data.length;gt=gt.next;){var St=gt.data,Bt=G>St.length?St.length:G;if(St.copy(st,st.length-G,0,Bt),(G-=Bt)===0){Bt===St.length?(++zt,gt.next?U.head=gt.next:U.head=U.tail=null):(U.head=gt,gt.data=St.slice(Bt));break}++zt}return U.length-=zt,st})(it,pt),ut})(P,H.buffer,H.decoder),et);var et}function k(P){var H=P._readableState;if(H.length>0)throw new Error('"endReadable()" called on non-empty stream');H.endEmitted||(H.ended=!0,c.nextTick(M,H,P))}function M(P,H){P.endEmitted||P.length!==0||(P.endEmitted=!0,H.readable=!1,H.emit("end"))}function O(P,H){for(var et=0,it=P.length;et<it;et++)if(P[et]===H)return et;return-1}Z.prototype.read=function(P){y("read",P),P=parseInt(P,10);var H=this._readableState,et=P;if(P!==0&&(H.emittedReadable=!1),P===0&&H.needReadable&&(H.length>=H.highWaterMark||H.ended))return y("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?k(this):Q(this),null;if((P=W(P,H))===0&&H.ended)return H.length===0&&k(this),null;var it,pt=H.needReadable;return y("need readable",pt),(H.length===0||H.length-P<H.highWaterMark)&&y("length less than watermark",pt=!0),H.ended||H.reading?y("reading or ended",pt=!1):pt&&(y("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(P=W(et,H))),(it=P>0?C(P,H):null)===null?(H.needReadable=!0,P=0):H.length-=P,H.length===0&&(H.ended||(H.needReadable=!0),et!==P&&H.ended&&k(this)),it!==null&&this.emit("data",it),it},Z.prototype._read=function(P){this.emit("error",new Error("_read() is not implemented"))},Z.prototype.pipe=function(P,H){var et=this,it=this._readableState;switch(it.pipesCount){case 0:it.pipes=P;break;case 1:it.pipes=[it.pipes,P];break;default:it.pipes.push(P)}it.pipesCount+=1,y("pipe count=%d opts=%j",it.pipesCount,H);var pt=(!H||H.end!==!1)&&P!==o.stdout&&P!==o.stderr?ut:ie;function X(re,Ct){y("onunpipe"),re===et&&Ct&&Ct.hasUnpiped===!1&&(Ct.hasUnpiped=!0,y("cleanup"),P.removeListener("close",St),P.removeListener("finish",Bt),P.removeListener("drain",G),P.removeListener("error",zt),P.removeListener("unpipe",X),et.removeListener("end",ut),et.removeListener("end",ie),et.removeListener("data",gt),U=!0,!it.awaitDrain||P._writableState&&!P._writableState.needDrain||G())}function ut(){y("onend"),P.end()}it.endEmitted?c.nextTick(pt):et.once("end",pt),P.on("unpipe",X);var G=(function(re){return function(){var Ct=re._readableState;y("pipeOnDrain",Ct.awaitDrain),Ct.awaitDrain&&Ct.awaitDrain--,Ct.awaitDrain===0&&f(re,"data")&&(Ct.flowing=!0,T(re))}})(et);P.on("drain",G);var U=!1,st=!1;function gt(re){y("ondata"),st=!1,P.write(re)!==!1||st||((it.pipesCount===1&&it.pipes===P||it.pipesCount>1&&O(it.pipes,P)!==-1)&&!U&&(y("false write response, pause",it.awaitDrain),it.awaitDrain++,st=!0),et.pause())}function zt(re){y("onerror",re),ie(),P.removeListener("error",zt),f(P,"error")===0&&P.emit("error",re)}function St(){P.removeListener("finish",Bt),ie()}function Bt(){y("onfinish"),P.removeListener("close",St),ie()}function ie(){y("unpipe"),et.unpipe(P)}return et.on("data",gt),(function(re,Ct,Yt){if(typeof re.prependListener=="function")return re.prependListener(Ct,Yt);re._events&&re._events[Ct]?n(re._events[Ct])?re._events[Ct].unshift(Yt):re._events[Ct]=[Yt,re._events[Ct]]:re.on(Ct,Yt)})(P,"error",zt),P.once("close",St),P.once("finish",Bt),P.emit("pipe",et),it.flowing||(y("pipe resume"),et.resume()),P},Z.prototype.unpipe=function(P){var H=this._readableState,et={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return P&&P!==H.pipes||(P||(P=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,P&&P.emit("unpipe",this,et)),this;if(!P){var it=H.pipes,pt=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var X=0;X<pt;X++)it[X].emit("unpipe",this,{hasUnpiped:!1});return this}var ut=O(H.pipes,P);return ut===-1||(H.pipes.splice(ut,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),P.emit("unpipe",this,et)),this},Z.prototype.on=function(P,H){var et=h.prototype.on.call(this,P,H);if(P==="data")this._readableState.flowing!==!1&&this.resume();else if(P==="readable"){var it=this._readableState;it.endEmitted||it.readableListening||(it.readableListening=it.needReadable=!0,it.emittedReadable=!1,it.reading?it.length&&Q(this):c.nextTick(F,this))}return et},Z.prototype.addListener=Z.prototype.on,Z.prototype.resume=function(){var P=this._readableState;return P.flowing||(y("resume"),P.flowing=!0,(function(H,et){et.resumeScheduled||(et.resumeScheduled=!0,c.nextTick(R,H,et))})(this,P)),this},Z.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Z.prototype.wrap=function(P){var H=this,et=this._readableState,it=!1;for(var pt in P.on("end",(function(){if(y("wrapped end"),et.decoder&&!et.ended){var ut=et.decoder.end();ut&&ut.length&&H.push(ut)}H.push(null)})),P.on("data",(function(ut){y("wrapped data"),et.decoder&&(ut=et.decoder.write(ut)),et.objectMode&&ut==null||(et.objectMode||ut&&ut.length)&&(H.push(ut)||(it=!0,P.pause()))})),P)this[pt]===void 0&&typeof P[pt]=="function"&&(this[pt]=(function(ut){return function(){return P[ut].apply(P,arguments)}})(pt));for(var X=0;X<I.length;X++)P.on(I[X],this.emit.bind(this,I[X]));return this._read=function(ut){y("wrapped _read",ut),it&&(it=!1,P.resume())},this},Object.defineProperty(Z.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Z._fromList=C}).call(this)}).call(this,t("_process"),typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./_stream_duplex":508,"./internal/streams/BufferList":513,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,events:422,inherits:440,isarray:506,"process-nextick-args":466,"safe-buffer":520,"string_decoder/":521,util:188}],511:[function(t,s,u){s.exports=l;var o=t("./_stream_duplex"),r=Object.create(t("core-util-is"));function c(h,p){var g=this._transformState;g.transforming=!1;var v=g.writecb;if(!v)return this.emit("error",new Error("write callback called multiple times"));g.writechunk=null,g.writecb=null,p!=null&&this.push(p),v(h);var x=this._readableState;x.reading=!1,(x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}function l(h){if(!(this instanceof l))return new l(h);o.call(this,h),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&(typeof h.transform=="function"&&(this._transform=h.transform),typeof h.flush=="function"&&(this._flush=h.flush)),this.on("prefinish",n)}function n(){var h=this;typeof this._flush=="function"?this._flush((function(p,g){f(h,p,g)})):f(this,null,null)}function f(h,p,g){if(p)return h.emit("error",p);if(g!=null&&h.push(g),h._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(h._transformState.transforming)throw new Error("Calling transform done when still transforming");return h.push(null)}r.inherits=t("inherits"),r.inherits(l,o),l.prototype.push=function(h,p){return this._transformState.needTransform=!1,o.prototype.push.call(this,h,p)},l.prototype._transform=function(h,p,g){throw new Error("_transform() is not implemented")},l.prototype._write=function(h,p,g){var v=this._transformState;if(v.writecb=g,v.writechunk=h,v.writeencoding=p,!v.transforming){var x=this._readableState;(v.needTransform||x.needReadable||x.length<x.highWaterMark)&&this._read(x.highWaterMark)}},l.prototype._read=function(h){var p=this._transformState;p.writechunk!==null&&p.writecb&&!p.transforming?(p.transforming=!0,this._transform(p.writechunk,p.writeencoding,p.afterTransform)):p.needTransform=!0},l.prototype._destroy=function(h,p){var g=this;o.prototype._destroy.call(this,h,(function(v){p(v),g.emit("close")}))}},{"./_stream_duplex":508,"core-util-is":383,inherits:440}],512:[function(t,s,u){(function(o,r,c){(function(){var l=t("process-nextick-args");function n(tt){var j=this;this.next=null,this.entry=null,this.finish=function(){(function(F,R,T){var C=F.entry;for(F.entry=null;C;){var k=C.callback;R.pendingcb--,k(T),C=C.next}R.corkedRequestsFree.next=F})(j,tt)}}s.exports=D;var f,h=!o.browser&&["v0.10","v0.9."].indexOf(o.version.slice(0,5))>-1?c:l.nextTick;D.WritableState=I;var p=Object.create(t("core-util-is"));p.inherits=t("inherits");var g={deprecate:t("util-deprecate")},v=t("./internal/streams/stream"),x=t("safe-buffer").Buffer,y=(r!==void 0?r:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},w,S=t("./internal/streams/destroy");function E(){}function I(tt,j){f=f||t("./_stream_duplex"),tt=tt||{};var F=j instanceof f;this.objectMode=!!tt.objectMode,F&&(this.objectMode=this.objectMode||!!tt.writableObjectMode);var R=tt.highWaterMark,T=tt.writableHighWaterMark,C=this.objectMode?16:16384;this.highWaterMark=R||R===0?R:F&&(T||T===0)?T:C,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var k=tt.decodeStrings===!1;this.decodeStrings=!k,this.defaultEncoding=tt.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(M){(function(O,P){var H=O._writableState,et=H.sync,it=H.writecb;if((function(X){X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0})(H),P)(function(X,ut,G,U,st){--ut.pendingcb,G?(l.nextTick(st,U),l.nextTick(rt,X,ut),X._writableState.errorEmitted=!0,X.emit("error",U)):(st(U),X._writableState.errorEmitted=!0,X.emit("error",U),rt(X,ut))})(O,H,et,P,it);else{var pt=W(H);pt||H.corked||H.bufferProcessing||!H.bufferedRequest||z(O,H),et?h(K,O,H,pt,it):K(O,H,pt,it)}})(j,M)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function D(tt){if(f=f||t("./_stream_duplex"),!(w.call(D,this)||this instanceof f))return new D(tt);this._writableState=new I(tt,this),this.writable=!0,tt&&(typeof tt.write=="function"&&(this._write=tt.write),typeof tt.writev=="function"&&(this._writev=tt.writev),typeof tt.destroy=="function"&&(this._destroy=tt.destroy),typeof tt.final=="function"&&(this._final=tt.final)),v.call(this)}function Z(tt,j,F,R,T,C,k){j.writelen=R,j.writecb=k,j.writing=!0,j.sync=!0,F?tt._writev(T,j.onwrite):tt._write(T,C,j.onwrite),j.sync=!1}function K(tt,j,F,R){F||(function(T,C){C.length===0&&C.needDrain&&(C.needDrain=!1,T.emit("drain"))})(tt,j),j.pendingcb--,R(),rt(tt,j)}function z(tt,j){j.bufferProcessing=!0;var F=j.bufferedRequest;if(tt._writev&&F&&F.next){var R=j.bufferedRequestCount,T=new Array(R),C=j.corkedRequestsFree;C.entry=F;for(var k=0,M=!0;F;)T[k]=F,F.isBuf||(M=!1),F=F.next,k+=1;T.allBuffers=M,Z(tt,j,!0,j.length,T,"",C.finish),j.pendingcb++,j.lastBufferedRequest=null,C.next?(j.corkedRequestsFree=C.next,C.next=null):j.corkedRequestsFree=new n(j),j.bufferedRequestCount=0}else{for(;F;){var O=F.chunk,P=F.encoding,H=F.callback;if(Z(tt,j,!1,j.objectMode?1:O.length,O,P,H),F=F.next,j.bufferedRequestCount--,j.writing)break}F===null&&(j.lastBufferedRequest=null)}j.bufferedRequest=F,j.bufferProcessing=!1}function W(tt){return tt.ending&&tt.length===0&&tt.bufferedRequest===null&&!tt.finished&&!tt.writing}function Q(tt,j){tt._final((function(F){j.pendingcb--,F&&tt.emit("error",F),j.prefinished=!0,tt.emit("prefinish"),rt(tt,j)}))}function rt(tt,j){var F=W(j);return F&&((function(R,T){T.prefinished||T.finalCalled||(typeof R._final=="function"?(T.pendingcb++,T.finalCalled=!0,l.nextTick(Q,R,T)):(T.prefinished=!0,R.emit("prefinish")))})(tt,j),j.pendingcb===0&&(j.finished=!0,tt.emit("finish"))),F}p.inherits(D,v),I.prototype.getBuffer=function(){for(var tt=this.bufferedRequest,j=[];tt;)j.push(tt),tt=tt.next;return j},(function(){try{Object.defineProperty(I.prototype,"buffer",{get:g.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(w=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(tt){return!!w.call(this,tt)||this===D&&tt&&tt._writableState instanceof I}})):w=function(tt){return tt instanceof this},D.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},D.prototype.write=function(tt,j,F){var R,T=this._writableState,C=!1,k=!T.objectMode&&(R=tt,x.isBuffer(R)||R instanceof y);return k&&!x.isBuffer(tt)&&(tt=(function(M){return x.from(M)})(tt)),typeof j=="function"&&(F=j,j=null),k?j="buffer":j||(j=T.defaultEncoding),typeof F!="function"&&(F=E),T.ended?(function(M,O){var P=new Error("write after end");M.emit("error",P),l.nextTick(O,P)})(this,F):(k||(function(M,O,P,H){var et=!0,it=!1;return P===null?it=new TypeError("May not write null values to stream"):typeof P=="string"||P===void 0||O.objectMode||(it=new TypeError("Invalid non-string/buffer chunk")),it&&(M.emit("error",it),l.nextTick(H,it),et=!1),et})(this,T,tt,F))&&(T.pendingcb++,C=(function(M,O,P,H,et,it){if(!P){var pt=(function(U,st,gt){return U.objectMode||U.decodeStrings===!1||typeof st!="string"||(st=x.from(st,gt)),st})(O,H,et);H!==pt&&(P=!0,et="buffer",H=pt)}var X=O.objectMode?1:H.length;O.length+=X;var ut=O.length<O.highWaterMark;if(ut||(O.needDrain=!0),O.writing||O.corked){var G=O.lastBufferedRequest;O.lastBufferedRequest={chunk:H,encoding:et,isBuf:P,callback:it,next:null},G?G.next=O.lastBufferedRequest:O.bufferedRequest=O.lastBufferedRequest,O.bufferedRequestCount+=1}else Z(M,O,!1,X,H,et,it);return ut})(this,T,k,tt,j,F)),C},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){var tt=this._writableState;tt.corked&&(tt.corked--,tt.writing||tt.corked||tt.bufferProcessing||!tt.bufferedRequest||z(this,tt))},D.prototype.setDefaultEncoding=function(tt){if(typeof tt=="string"&&(tt=tt.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((tt+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+tt);return this._writableState.defaultEncoding=tt,this},Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),D.prototype._write=function(tt,j,F){F(new Error("_write() is not implemented"))},D.prototype._writev=null,D.prototype.end=function(tt,j,F){var R=this._writableState;typeof tt=="function"?(F=tt,tt=null,j=null):typeof j=="function"&&(F=j,j=null),tt!=null&&this.write(tt,j),R.corked&&(R.corked=1,this.uncork()),R.ending||(function(T,C,k){C.ending=!0,rt(T,C),k&&(C.finished?l.nextTick(k):T.once("finish",k)),C.ended=!0,T.writable=!1})(this,R,F)},Object.defineProperty(D.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(tt){this._writableState&&(this._writableState.destroyed=tt)}}),D.prototype.destroy=S.destroy,D.prototype._undestroy=S.undestroy,D.prototype._destroy=function(tt,j){this.end(),j(tt)}}).call(this)}).call(this,t("_process"),typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{"./_stream_duplex":508,"./internal/streams/destroy":514,"./internal/streams/stream":515,_process:467,"core-util-is":383,inherits:440,"process-nextick-args":466,"safe-buffer":520,timers:523,"util-deprecate":524}],513:[function(t,s,u){var o=t("safe-buffer").Buffer,r=t("util");s.exports=(function(){function c(){(function(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}return c.prototype.push=function(l){var n={data:l,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},c.prototype.unshift=function(l){var n={data:l,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},c.prototype.shift=function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}},c.prototype.clear=function(){this.head=this.tail=null,this.length=0},c.prototype.join=function(l){if(this.length===0)return"";for(var n=this.head,f=""+n.data;n=n.next;)f+=l+n.data;return f},c.prototype.concat=function(l){if(this.length===0)return o.alloc(0);for(var n,f,h,p=o.allocUnsafe(l>>>0),g=this.head,v=0;g;)n=g.data,f=p,h=v,n.copy(f,h),v+=g.data.length,g=g.next;return p},c})(),r&&r.inspect&&r.inspect.custom&&(s.exports.prototype[r.inspect.custom]=function(){var c=r.inspect({length:this.length});return this.constructor.name+" "+c})},{"safe-buffer":520,util:188}],514:[function(t,s,u){var o=t("process-nextick-args");function r(c,l){c.emit("error",l)}s.exports={destroy:function(c,l){var n=this,f=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return f||h?(l?l(c):c&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,o.nextTick(r,this,c)):o.nextTick(r,this,c)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(c||null,(function(p){!l&&p?n._writableState?n._writableState.errorEmitted||(n._writableState.errorEmitted=!0,o.nextTick(r,n,p)):o.nextTick(r,n,p):l&&l(p)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":466}],515:[function(t,s,u){arguments[4][490][0].apply(u,arguments)},{dup:490,events:422}],516:[function(t,s,u){s.exports=t("./readable").PassThrough},{"./readable":517}],517:[function(t,s,u){(u=s.exports=t("./lib/_stream_readable.js")).Stream=u,u.Readable=u,u.Writable=t("./lib/_stream_writable.js"),u.Duplex=t("./lib/_stream_duplex.js"),u.Transform=t("./lib/_stream_transform.js"),u.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":508,"./lib/_stream_passthrough.js":509,"./lib/_stream_readable.js":510,"./lib/_stream_transform.js":511,"./lib/_stream_writable.js":512}],518:[function(t,s,u){s.exports=t("./readable").Transform},{"./readable":517}],519:[function(t,s,u){s.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":512}],520:[function(t,s,u){arguments[4][217][0].apply(u,arguments)},{buffer:220,dup:217}],521:[function(t,s,u){arguments[4][218][0].apply(u,arguments)},{dup:218,"safe-buffer":520}],522:[function(t,s,u){arguments[4][218][0].apply(u,arguments)},{dup:218,"safe-buffer":494}],523:[function(t,s,u){(function(o,r){(function(){var c=t("process/browser.js").nextTick,l=Function.prototype.apply,n=Array.prototype.slice,f={},h=0;function p(g,v){this._id=g,this._clearFn=v}u.setTimeout=function(){return new p(l.call(setTimeout,window,arguments),clearTimeout)},u.setInterval=function(){return new p(l.call(setInterval,window,arguments),clearInterval)},u.clearTimeout=u.clearInterval=function(g){g.close()},p.prototype.unref=p.prototype.ref=function(){},p.prototype.close=function(){this._clearFn.call(window,this._id)},u.enroll=function(g,v){clearTimeout(g._idleTimeoutId),g._idleTimeout=v},u.unenroll=function(g){clearTimeout(g._idleTimeoutId),g._idleTimeout=-1},u._unrefActive=u.active=function(g){clearTimeout(g._idleTimeoutId);var v=g._idleTimeout;v>=0&&(g._idleTimeoutId=setTimeout((function(){g._onTimeout&&g._onTimeout()}),v))},u.setImmediate=typeof o=="function"?o:function(g){var v=h++,x=!(arguments.length<2)&&n.call(arguments,1);return f[v]=!0,c((function(){f[v]&&(x?g.apply(null,x):g.call(null),u.clearImmediate(v))})),v},u.clearImmediate=typeof r=="function"?r:function(g){delete f[g]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":467,timers:523}],524:[function(t,s,u){(function(o){(function(){function r(c){try{if(!o.localStorage)return!1}catch{return!1}var l=o.localStorage[c];return l!=null&&String(l).toLowerCase()==="true"}s.exports=function(c,l){if(r("noDeprecation"))return c;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(l);r("traceDeprecation")?console.trace(l):console.warn(l),n=!0}return c.apply(this,arguments)}}}).call(this)}).call(this,typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],525:[function(t,s,u){typeof Object.create=="function"?s.exports=function(o,r){o.super_=r,o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})}:s.exports=function(o,r){o.super_=r;var c=function(){};c.prototype=r.prototype,o.prototype=new c,o.prototype.constructor=o}},{}],526:[function(t,s,u){s.exports=function(o){return o&&typeof o=="object"&&typeof o.copy=="function"&&typeof o.fill=="function"&&typeof o.readUInt8=="function"}},{}],527:[function(t,s,u){(function(o,r){(function(){var c=/%[sdj%]/g;u.format=function(T){if(!I(T)){for(var C=[],k=0;k<arguments.length;k++)C.push(f(arguments[k]));return C.join(" ")}k=1;for(var M=arguments,O=M.length,P=String(T).replace(c,(function(et){if(et==="%%")return"%";if(k>=O)return et;switch(et){case"%s":return String(M[k++]);case"%d":return Number(M[k++]);case"%j":try{return JSON.stringify(M[k++])}catch{return"[Circular]"}default:return et}})),H=M[k];k<O;H=M[++k])S(H)||!K(H)?P+=" "+H:P+=" "+f(H);return P},u.deprecate=function(T,C){if(D(r.process))return function(){return u.deprecate(T,C).apply(this,arguments)};if(o.noDeprecation===!0)return T;var k=!1;return function(){if(!k){if(o.throwDeprecation)throw new Error(C);o.traceDeprecation?console.trace(C):console.error(C),k=!0}return T.apply(this,arguments)}};var l,n={};function f(T,C){var k={seen:[],stylize:p};return arguments.length>=3&&(k.depth=arguments[2]),arguments.length>=4&&(k.colors=arguments[3]),w(C)?k.showHidden=C:C&&u._extend(k,C),D(k.showHidden)&&(k.showHidden=!1),D(k.depth)&&(k.depth=2),D(k.colors)&&(k.colors=!1),D(k.customInspect)&&(k.customInspect=!0),k.colors&&(k.stylize=h),g(k,T,k.depth)}function h(T,C){var k=f.styles[C];return k?"\x1B["+f.colors[k][0]+"m"+T+"\x1B["+f.colors[k][1]+"m":T}function p(T,C){return T}function g(T,C,k){if(T.customInspect&&C&&Q(C.inspect)&&C.inspect!==u.inspect&&(!C.constructor||C.constructor.prototype!==C)){var M=C.inspect(k,T);return I(M)||(M=g(T,M,k)),M}var O=(function(G,U){if(D(U))return G.stylize("undefined","undefined");if(I(U)){var st="'"+JSON.stringify(U).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return G.stylize(st,"string")}if(E(U))return G.stylize(""+U,"number");if(w(U))return G.stylize(""+U,"boolean");if(S(U))return G.stylize("null","null")})(T,C);if(O)return O;var P=Object.keys(C),H=(function(G){var U={};return G.forEach((function(st,gt){U[st]=!0})),U})(P);if(T.showHidden&&(P=Object.getOwnPropertyNames(C)),W(C)&&(P.indexOf("message")>=0||P.indexOf("description")>=0))return v(C);if(P.length===0){if(Q(C)){var et=C.name?": "+C.name:"";return T.stylize("[Function"+et+"]","special")}if(Z(C))return T.stylize(RegExp.prototype.toString.call(C),"regexp");if(z(C))return T.stylize(Date.prototype.toString.call(C),"date");if(W(C))return v(C)}var it,pt="",X=!1,ut=["{","}"];return y(C)&&(X=!0,ut=["[","]"]),Q(C)&&(pt=" [Function"+(C.name?": "+C.name:"")+"]"),Z(C)&&(pt=" "+RegExp.prototype.toString.call(C)),z(C)&&(pt=" "+Date.prototype.toUTCString.call(C)),W(C)&&(pt=" "+v(C)),P.length!==0||X&&C.length!=0?k<0?Z(C)?T.stylize(RegExp.prototype.toString.call(C),"regexp"):T.stylize("[Object]","special"):(T.seen.push(C),it=X?(function(G,U,st,gt,zt){for(var St=[],Bt=0,ie=U.length;Bt<ie;++Bt)R(U,String(Bt))?St.push(x(G,U,st,gt,String(Bt),!0)):St.push("");return zt.forEach((function(re){re.match(/^\d+$/)||St.push(x(G,U,st,gt,re,!0))})),St})(T,C,k,H,P):P.map((function(G){return x(T,C,k,H,G,X)})),T.seen.pop(),(function(G,U,st){return G.reduce((function(gt,zt){return zt.indexOf(`
`)>=0,gt+zt.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?st[0]+(U===""?"":U+`
 `)+" "+G.join(`,
  `)+" "+st[1]:st[0]+U+" "+G.join(", ")+" "+st[1]})(it,pt,ut)):ut[0]+pt+ut[1]}function v(T){return"["+Error.prototype.toString.call(T)+"]"}function x(T,C,k,M,O,P){var H,et,it;if((it=Object.getOwnPropertyDescriptor(C,O)||{value:C[O]}).get?et=it.set?T.stylize("[Getter/Setter]","special"):T.stylize("[Getter]","special"):it.set&&(et=T.stylize("[Setter]","special")),R(M,O)||(H="["+O+"]"),et||(T.seen.indexOf(it.value)<0?(et=S(k)?g(T,it.value,null):g(T,it.value,k-1)).indexOf(`
`)>-1&&(et=P?et.split(`
`).map((function(pt){return"  "+pt})).join(`
`).substr(2):`
`+et.split(`
`).map((function(pt){return"   "+pt})).join(`
`)):et=T.stylize("[Circular]","special")),D(H)){if(P&&O.match(/^\d+$/))return et;(H=JSON.stringify(""+O)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(H=H.substr(1,H.length-2),H=T.stylize(H,"name")):(H=H.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),H=T.stylize(H,"string"))}return H+": "+et}function y(T){return Array.isArray(T)}function w(T){return typeof T=="boolean"}function S(T){return T===null}function E(T){return typeof T=="number"}function I(T){return typeof T=="string"}function D(T){return T===void 0}function Z(T){return K(T)&&rt(T)==="[object RegExp]"}function K(T){return typeof T=="object"&&T!==null}function z(T){return K(T)&&rt(T)==="[object Date]"}function W(T){return K(T)&&(rt(T)==="[object Error]"||T instanceof Error)}function Q(T){return typeof T=="function"}function rt(T){return Object.prototype.toString.call(T)}function tt(T){return T<10?"0"+T.toString(10):T.toString(10)}u.debuglog=function(T){if(D(l)&&(l=o.env.NODE_DEBUG||""),T=T.toUpperCase(),!n[T])if(new RegExp("\\b"+T+"\\b","i").test(l)){var C=o.pid;n[T]=function(){var k=u.format.apply(u,arguments);console.error("%s %d: %s",T,C,k)}}else n[T]=function(){};return n[T]},u.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},u.isArray=y,u.isBoolean=w,u.isNull=S,u.isNullOrUndefined=function(T){return T==null},u.isNumber=E,u.isString=I,u.isSymbol=function(T){return typeof T=="symbol"},u.isUndefined=D,u.isRegExp=Z,u.isObject=K,u.isDate=z,u.isError=W,u.isFunction=Q,u.isPrimitive=function(T){return T===null||typeof T=="boolean"||typeof T=="number"||typeof T=="string"||typeof T=="symbol"||T===void 0},u.isBuffer=t("./support/isBuffer");var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function F(){var T=new Date,C=[tt(T.getHours()),tt(T.getMinutes()),tt(T.getSeconds())].join(":");return[T.getDate(),j[T.getMonth()],C].join(" ")}function R(T,C){return Object.prototype.hasOwnProperty.call(T,C)}u.log=function(){console.log("%s - %s",F(),u.format.apply(u,arguments))},u.inherits=t("inherits"),u._extend=function(T,C){if(!C||!K(C))return T;for(var k=Object.keys(C),M=k.length;M--;)T[k[M]]=C[k[M]];return T}}).call(this)}).call(this,t("_process"),typeof dr<"u"?dr:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":526,_process:467,inherits:525}],528:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),Object.defineProperty(u,"v1",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(u,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(u,"v4",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(u,"v5",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(u,"NIL",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(u,"version",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(u,"validate",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(u,"stringify",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(u,"parse",{enumerable:!0,get:function(){return g.default}});var o=v(t("./v1.js")),r=v(t("./v3.js")),c=v(t("./v4.js")),l=v(t("./v5.js")),n=v(t("./nil.js")),f=v(t("./version.js")),h=v(t("./validate.js")),p=v(t("./stringify.js")),g=v(t("./parse.js"));function v(x){return x&&x.__esModule?x:{default:x}}},{"./nil.js":530,"./parse.js":531,"./stringify.js":535,"./v1.js":536,"./v3.js":537,"./v4.js":539,"./v5.js":540,"./validate.js":541,"./version.js":542}],529:[function(t,s,u){function o(g){return 14+(g+64>>>9<<4)+1}function r(g,v){const x=(65535&g)+(65535&v);return(g>>16)+(v>>16)+(x>>16)<<16|65535&x}function c(g,v,x,y,w,S){return r((E=r(r(v,g),r(y,S)))<<(I=w)|E>>>32-I,x);var E,I}function l(g,v,x,y,w,S,E){return c(v&x|~v&y,g,v,w,S,E)}function n(g,v,x,y,w,S,E){return c(v&y|x&~y,g,v,w,S,E)}function f(g,v,x,y,w,S,E){return c(v^x^y,g,v,w,S,E)}function h(g,v,x,y,w,S,E){return c(x^(v|~y),g,v,w,S,E)}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var p=function(g){if(typeof g=="string"){const v=unescape(encodeURIComponent(g));g=new Uint8Array(v.length);for(let x=0;x<v.length;++x)g[x]=v.charCodeAt(x)}return(function(v){const x=[],y=32*v.length;for(let w=0;w<y;w+=8){const S=v[w>>5]>>>w%32&255,E=parseInt("0123456789abcdef".charAt(S>>>4&15)+"0123456789abcdef".charAt(15&S),16);x.push(E)}return x})((function(v,x){v[x>>5]|=128<<x%32,v[o(x)-1]=x;let y=1732584193,w=-271733879,S=-1732584194,E=271733878;for(let I=0;I<v.length;I+=16){const D=y,Z=w,K=S,z=E;y=l(y,w,S,E,v[I],7,-680876936),E=l(E,y,w,S,v[I+1],12,-389564586),S=l(S,E,y,w,v[I+2],17,606105819),w=l(w,S,E,y,v[I+3],22,-1044525330),y=l(y,w,S,E,v[I+4],7,-176418897),E=l(E,y,w,S,v[I+5],12,1200080426),S=l(S,E,y,w,v[I+6],17,-1473231341),w=l(w,S,E,y,v[I+7],22,-45705983),y=l(y,w,S,E,v[I+8],7,1770035416),E=l(E,y,w,S,v[I+9],12,-1958414417),S=l(S,E,y,w,v[I+10],17,-42063),w=l(w,S,E,y,v[I+11],22,-1990404162),y=l(y,w,S,E,v[I+12],7,1804603682),E=l(E,y,w,S,v[I+13],12,-40341101),S=l(S,E,y,w,v[I+14],17,-1502002290),w=l(w,S,E,y,v[I+15],22,1236535329),y=n(y,w,S,E,v[I+1],5,-165796510),E=n(E,y,w,S,v[I+6],9,-1069501632),S=n(S,E,y,w,v[I+11],14,643717713),w=n(w,S,E,y,v[I],20,-373897302),y=n(y,w,S,E,v[I+5],5,-701558691),E=n(E,y,w,S,v[I+10],9,38016083),S=n(S,E,y,w,v[I+15],14,-660478335),w=n(w,S,E,y,v[I+4],20,-405537848),y=n(y,w,S,E,v[I+9],5,568446438),E=n(E,y,w,S,v[I+14],9,-1019803690),S=n(S,E,y,w,v[I+3],14,-187363961),w=n(w,S,E,y,v[I+8],20,1163531501),y=n(y,w,S,E,v[I+13],5,-1444681467),E=n(E,y,w,S,v[I+2],9,-51403784),S=n(S,E,y,w,v[I+7],14,1735328473),w=n(w,S,E,y,v[I+12],20,-1926607734),y=f(y,w,S,E,v[I+5],4,-378558),E=f(E,y,w,S,v[I+8],11,-2022574463),S=f(S,E,y,w,v[I+11],16,1839030562),w=f(w,S,E,y,v[I+14],23,-35309556),y=f(y,w,S,E,v[I+1],4,-1530992060),E=f(E,y,w,S,v[I+4],11,1272893353),S=f(S,E,y,w,v[I+7],16,-155497632),w=f(w,S,E,y,v[I+10],23,-1094730640),y=f(y,w,S,E,v[I+13],4,681279174),E=f(E,y,w,S,v[I],11,-358537222),S=f(S,E,y,w,v[I+3],16,-722521979),w=f(w,S,E,y,v[I+6],23,76029189),y=f(y,w,S,E,v[I+9],4,-640364487),E=f(E,y,w,S,v[I+12],11,-421815835),S=f(S,E,y,w,v[I+15],16,530742520),w=f(w,S,E,y,v[I+2],23,-995338651),y=h(y,w,S,E,v[I],6,-198630844),E=h(E,y,w,S,v[I+7],10,1126891415),S=h(S,E,y,w,v[I+14],15,-1416354905),w=h(w,S,E,y,v[I+5],21,-57434055),y=h(y,w,S,E,v[I+12],6,1700485571),E=h(E,y,w,S,v[I+3],10,-1894986606),S=h(S,E,y,w,v[I+10],15,-1051523),w=h(w,S,E,y,v[I+1],21,-2054922799),y=h(y,w,S,E,v[I+8],6,1873313359),E=h(E,y,w,S,v[I+15],10,-30611744),S=h(S,E,y,w,v[I+6],15,-1560198380),w=h(w,S,E,y,v[I+13],21,1309151649),y=h(y,w,S,E,v[I+4],6,-145523070),E=h(E,y,w,S,v[I+11],10,-1120210379),S=h(S,E,y,w,v[I+2],15,718787259),w=h(w,S,E,y,v[I+9],21,-343485551),y=r(y,D),w=r(w,Z),S=r(S,K),E=r(E,z)}return[y,w,S,E]})((function(v){if(v.length===0)return[];const x=8*v.length,y=new Uint32Array(o(x));for(let w=0;w<x;w+=8)y[w>>5]|=(255&v[w/8])<<w%32;return y})(g),8*g.length))};u.default=p},{}],530:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,u.default="00000000-0000-0000-0000-000000000000"},{}],531:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var o,r=(o=t("./validate.js"))&&o.__esModule?o:{default:o},c=function(l){if(!(0,r.default)(l))throw TypeError("Invalid UUID");let n;const f=new Uint8Array(16);return f[0]=(n=parseInt(l.slice(0,8),16))>>>24,f[1]=n>>>16&255,f[2]=n>>>8&255,f[3]=255&n,f[4]=(n=parseInt(l.slice(9,13),16))>>>8,f[5]=255&n,f[6]=(n=parseInt(l.slice(14,18),16))>>>8,f[7]=255&n,f[8]=(n=parseInt(l.slice(19,23),16))>>>8,f[9]=255&n,f[10]=(n=parseInt(l.slice(24,36),16))/1099511627776&255,f[11]=n/4294967296&255,f[12]=n>>>24&255,f[13]=n>>>16&255,f[14]=n>>>8&255,f[15]=255&n,f};u.default=c},{"./validate.js":541}],532:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0,u.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],533:[function(t,s,u){let o;Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(){if(!o&&(o=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!o))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(r)};const r=new Uint8Array(16)},{}],534:[function(t,s,u){function o(l,n,f,h){switch(l){case 0:return n&f^~n&h;case 1:return n^f^h;case 2:return n&f^n&h^f&h;case 3:return n^f^h}}function r(l,n){return l<<n|l>>>32-n}Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var c=function(l){const n=[1518500249,1859775393,2400959708,3395469782],f=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof l=="string"){const v=unescape(encodeURIComponent(l));l=[];for(let x=0;x<v.length;++x)l.push(v.charCodeAt(x))}else Array.isArray(l)||(l=Array.prototype.slice.call(l));l.push(128);const h=l.length/4+2,p=Math.ceil(h/16),g=new Array(p);for(let v=0;v<p;++v){const x=new Uint32Array(16);for(let y=0;y<16;++y)x[y]=l[64*v+4*y]<<24|l[64*v+4*y+1]<<16|l[64*v+4*y+2]<<8|l[64*v+4*y+3];g[v]=x}g[p-1][14]=8*(l.length-1)/Math.pow(2,32),g[p-1][14]=Math.floor(g[p-1][14]),g[p-1][15]=8*(l.length-1)&4294967295;for(let v=0;v<p;++v){const x=new Uint32Array(80);for(let D=0;D<16;++D)x[D]=g[v][D];for(let D=16;D<80;++D)x[D]=r(x[D-3]^x[D-8]^x[D-14]^x[D-16],1);let y=f[0],w=f[1],S=f[2],E=f[3],I=f[4];for(let D=0;D<80;++D){const Z=Math.floor(D/20),K=r(y,5)+o(Z,w,S,E)+I+n[Z]+x[D]>>>0;I=E,E=S,S=r(w,30)>>>0,w=y,y=K}f[0]=f[0]+y>>>0,f[1]=f[1]+w>>>0,f[2]=f[2]+S>>>0,f[3]=f[3]+E>>>0,f[4]=f[4]+I>>>0}return[f[0]>>24&255,f[0]>>16&255,f[0]>>8&255,255&f[0],f[1]>>24&255,f[1]>>16&255,f[1]>>8&255,255&f[1],f[2]>>24&255,f[2]>>16&255,f[2]>>8&255,255&f[2],f[3]>>24&255,f[3]>>16&255,f[3]>>8&255,255&f[3],f[4]>>24&255,f[4]>>16&255,f[4]>>8&255,255&f[4]]};u.default=c},{}],535:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var o,r=(o=t("./validate.js"))&&o.__esModule?o:{default:o};const c=[];for(let n=0;n<256;++n)c.push((n+256).toString(16).substr(1));var l=function(n){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const h=(c[n[f+0]]+c[n[f+1]]+c[n[f+2]]+c[n[f+3]]+"-"+c[n[f+4]]+c[n[f+5]]+"-"+c[n[f+6]]+c[n[f+7]]+"-"+c[n[f+8]]+c[n[f+9]]+"-"+c[n[f+10]]+c[n[f+11]]+c[n[f+12]]+c[n[f+13]]+c[n[f+14]]+c[n[f+15]]).toLowerCase();if(!(0,r.default)(h))throw TypeError("Stringified UUID is invalid");return h};u.default=l},{"./validate.js":541}],536:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var o=c(t("./rng.js")),r=c(t("./stringify.js"));function c(g){return g&&g.__esModule?g:{default:g}}let l,n,f=0,h=0;var p=function(g,v,x){let y=v&&x||0;const w=v||new Array(16);let S=(g=g||{}).node||l,E=g.clockseq!==void 0?g.clockseq:n;if(S==null||E==null){const W=g.random||(g.rng||o.default)();S==null&&(S=l=[1|W[0],W[1],W[2],W[3],W[4],W[5]]),E==null&&(E=n=16383&(W[6]<<8|W[7]))}let I=g.msecs!==void 0?g.msecs:Date.now(),D=g.nsecs!==void 0?g.nsecs:h+1;const Z=I-f+(D-h)/1e4;if(Z<0&&g.clockseq===void 0&&(E=E+1&16383),(Z<0||I>f)&&g.nsecs===void 0&&(D=0),D>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=I,h=D,n=E,I+=122192928e5;const K=(1e4*(268435455&I)+D)%4294967296;w[y++]=K>>>24&255,w[y++]=K>>>16&255,w[y++]=K>>>8&255,w[y++]=255&K;const z=I/4294967296*1e4&268435455;w[y++]=z>>>8&255,w[y++]=255&z,w[y++]=z>>>24&15|16,w[y++]=z>>>16&255,w[y++]=E>>>8|128,w[y++]=255&E;for(let W=0;W<6;++W)w[y+W]=S[W];return v||(0,r.default)(w)};u.default=p},{"./rng.js":533,"./stringify.js":535}],537:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var o=c(t("./v35.js")),r=c(t("./md5.js"));function c(n){return n&&n.__esModule?n:{default:n}}var l=(0,o.default)("v3",48,r.default);u.default=l},{"./md5.js":529,"./v35.js":538}],538:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(f,h,p){function g(v,x,y,w){if(typeof v=="string"&&(v=(function(E){E=unescape(encodeURIComponent(E));const I=[];for(let D=0;D<E.length;++D)I.push(E.charCodeAt(D));return I})(v)),typeof x=="string"&&(x=(0,r.default)(x)),x.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let S=new Uint8Array(16+v.length);if(S.set(x),S.set(v,x.length),S=p(S),S[6]=15&S[6]|h,S[8]=63&S[8]|128,y){w=w||0;for(let E=0;E<16;++E)y[w+E]=S[E];return y}return(0,o.default)(S)}try{g.name=f}catch{}return g.DNS=l,g.URL=n,g},u.URL=u.DNS=void 0;var o=c(t("./stringify.js")),r=c(t("./parse.js"));function c(f){return f&&f.__esModule?f:{default:f}}const l="6ba7b810-9dad-11d1-80b4-00c04fd430c8";u.DNS=l;const n="6ba7b811-9dad-11d1-80b4-00c04fd430c8";u.URL=n},{"./parse.js":531,"./stringify.js":535}],539:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var o=c(t("./rng.js")),r=c(t("./stringify.js"));function c(n){return n&&n.__esModule?n:{default:n}}var l=function(n,f,h){const p=(n=n||{}).random||(n.rng||o.default)();if(p[6]=15&p[6]|64,p[8]=63&p[8]|128,f){h=h||0;for(let g=0;g<16;++g)f[h+g]=p[g];return f}return(0,r.default)(p)};u.default=l},{"./rng.js":533,"./stringify.js":535}],540:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var o=c(t("./v35.js")),r=c(t("./sha1.js"));function c(n){return n&&n.__esModule?n:{default:n}}var l=(0,o.default)("v5",80,r.default);u.default=l},{"./sha1.js":534,"./v35.js":538}],541:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var o,r=(o=t("./regex.js"))&&o.__esModule?o:{default:o},c=function(l){return typeof l=="string"&&r.default.test(l)};u.default=c},{"./regex.js":532}],542:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var o,r=(o=t("./validate.js"))&&o.__esModule?o:{default:o},c=function(l){if(!(0,r.default)(l))throw TypeError("Invalid UUID");return parseInt(l.substr(14,1),16)};u.default=c},{"./validate.js":541}],543:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.CHAR=`	
\r ---`,u.S=` 	\r
`,u.NAME_START_CHAR=":A-Z_a-z-----------",u.NAME_CHAR="-"+u.NAME_START_CHAR+".0-9--",u.CHAR_RE=new RegExp("^["+u.CHAR+"]$","u"),u.S_RE=new RegExp("^["+u.S+"]+$","u"),u.NAME_START_CHAR_RE=new RegExp("^["+u.NAME_START_CHAR+"]$","u"),u.NAME_CHAR_RE=new RegExp("^["+u.NAME_CHAR+"]$","u"),u.NAME_RE=new RegExp("^["+u.NAME_START_CHAR+"]["+u.NAME_CHAR+"]*$","u"),u.NMTOKEN_RE=new RegExp("^["+u.NAME_CHAR+"]+$","u");function o(r){return r>=65&&r<=90||r>=97&&r<=122||r===58||r===95||r===8204||r===8205||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}u.S_LIST=[32,10,13,9],u.isChar=function(r){return r>=32&&r<=55295||r===10||r===13||r===9||r>=57344&&r<=65533||r>=65536&&r<=1114111},u.isS=function(r){return r===32||r===10||r===13||r===9},u.isNameStartChar=o,u.isNameChar=function(r){return o(r)||r>=48&&r<=57||r===45||r===46||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}],544:[function(t,s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.CHAR="---",u.RESTRICTED_CHAR="-\b\v\f---",u.S=` 	\r
`,u.NAME_START_CHAR=":A-Z_a-z-----------",u.NAME_CHAR="-"+u.NAME_START_CHAR+".0-9--",u.CHAR_RE=new RegExp("^["+u.CHAR+"]$","u"),u.RESTRICTED_CHAR_RE=new RegExp("^["+u.RESTRICTED_CHAR+"]$","u"),u.S_RE=new RegExp("^["+u.S+"]+$","u"),u.NAME_START_CHAR_RE=new RegExp("^["+u.NAME_START_CHAR+"]$","u"),u.NAME_CHAR_RE=new RegExp("^["+u.NAME_CHAR+"]$","u"),u.NAME_RE=new RegExp("^["+u.NAME_START_CHAR+"]["+u.NAME_CHAR+"]*$","u"),u.NMTOKEN_RE=new RegExp("^["+u.NAME_CHAR+"]+$","u");function o(r){return r>=65&&r<=90||r>=97&&r<=122||r===58||r===95||r===8204||r===8205||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}u.S_LIST=[32,10,13,9],u.isChar=function(r){return r>=1&&r<=55295||r>=57344&&r<=65533||r>=65536&&r<=1114111},u.isRestrictedChar=function(r){return r>=1&&r<=8||r===11||r===12||r>=14&&r<=31||r>=127&&r<=132||r>=134&&r<=159},u.isCharAndNotRestricted=function(r){return r===9||r===10||r===13||r>31&&r<127||r===133||r>159&&r<=55295||r>=57344&&r<=65533||r>=65536&&r<=1114111},u.isS=function(r){return r===32||r===10||r===13||r===9},u.isNameStartChar=o,u.isNameChar=function(r){return o(r)||r>=48&&r<=57||r===45||r===46||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}],545:[function(t,s,u){function o(r){return r>=65&&r<=90||r===95||r>=97&&r<=122||r>=192&&r<=214||r>=216&&r<=246||r>=248&&r<=767||r>=880&&r<=893||r>=895&&r<=8191||r>=8204&&r<=8205||r>=8304&&r<=8591||r>=11264&&r<=12271||r>=12289&&r<=55295||r>=63744&&r<=64975||r>=65008&&r<=65533||r>=65536&&r<=983039}Object.defineProperty(u,"__esModule",{value:!0}),u.NC_NAME_START_CHAR="A-Z_a-z------------",u.NC_NAME_CHAR="-"+u.NC_NAME_START_CHAR+".0-9--",u.NC_NAME_START_CHAR_RE=new RegExp("^["+u.NC_NAME_START_CHAR+"]$","u"),u.NC_NAME_CHAR_RE=new RegExp("^["+u.NC_NAME_CHAR+"]$","u"),u.NC_NAME_RE=new RegExp("^["+u.NC_NAME_START_CHAR+"]["+u.NC_NAME_CHAR+"]*$","u"),u.isNCNameStartChar=o,u.isNCNameChar=function(r){return o(r)||r===45||r===46||r>=48&&r<=57||r===183||r>=768&&r<=879||r>=8255&&r<=8256}},{}]},{},[15])(15)}))})(Bg)),Bg.exports}var $4=V4();const W4=Jg($4);var j0={exports:{}},q4=j0.exports,i1;function G4(){return i1||(i1=1,(function(m,a){(function(t,s){s()})(q4,function(){function t(n,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n}function s(n,f,h){var p=new XMLHttpRequest;p.open("GET",n),p.responseType="blob",p.onload=function(){l(p.response,f,h)},p.onerror=function(){console.error("could not download file")},p.send()}function u(n){var f=new XMLHttpRequest;f.open("HEAD",n,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function o(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(f)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof dr=="object"&&dr.global===dr?dr:void 0,c=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(n,f,h){var p=r.URL||r.webkitURL,g=document.createElement("a");f=f||n.name||"download",g.download=f,g.rel="noopener",typeof n=="string"?(g.href=n,g.origin===location.origin?o(g):u(g.href)?s(n,f,h):o(g,g.target="_blank")):(g.href=p.createObjectURL(n),setTimeout(function(){p.revokeObjectURL(g.href)},4e4),setTimeout(function(){o(g)},0))}:"msSaveOrOpenBlob"in navigator?function(n,f,h){if(f=f||n.name||"download",typeof n!="string")navigator.msSaveOrOpenBlob(t(n,h),f);else if(u(n))s(n,f,h);else{var p=document.createElement("a");p.href=n,p.target="_blank",setTimeout(function(){o(p)})}}:function(n,f,h,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof n=="string")return s(n,f,h);var g=n.type==="application/octet-stream",v=/constructor/i.test(r.HTMLElement)||r.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||g&&v||c)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var E=y.result;E=x?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=E:location=E,p=null},y.readAsDataURL(n)}else{var w=r.URL||r.webkitURL,S=w.createObjectURL(n);p?p.location=S:location.href=S,p=null,setTimeout(function(){w.revokeObjectURL(S)},4e4)}});r.saveAs=l.saveAs=l,m.exports=l})})(j0)),j0.exports}var Z4=G4();Y0.register(H4);function X4(){return{exportToExcel:ot.useCallback(async(a,t={})=>{if(!a||a.length===0){alert("No data to export!");return}try{const s=String(t.moduleKey||"MODULE").toUpperCase(),u=String(t.moduleLabel||s),o=String(t.unit||"m"),r=!!t.lvibBreakdown,c=String(t.dataSheetName||"Daily Progress"),l=String(t.chartTitle||`Daily ${u} Progress`),n=String(t.chartSheetName||"Chart"),f=n===c?`${n} (Chart)`.slice(0,31):n.slice(0,31),h={};a.forEach(C=>{const k=C.date;if(!k)return;h[k]||(h[k]={date:k,plus_dc:0,minus_dc:0,total_cable:0,workers:0,subcontractor:C.subcontractor||"",lv_boxes:0,inv_boxes:0});const M=String(C.module_key||"").toUpperCase();if(r&&(M==="LVIB_LV"||M==="LVIB_INV")){const O=C.total_cable||0;M==="LVIB_LV"?h[k].lv_boxes+=O:h[k].inv_boxes+=O,h[k].total_cable+=O}else h[k].plus_dc+=C.plus_dc||0,h[k].minus_dc+=C.minus_dc||0,h[k].total_cable+=C.total_cable||0;h[k].workers+=C.workers||0});const p=Object.values(h).sort((C,k)=>new Date(C.date)-new Date(k.date)),g=p.map(C=>C.date),v=p.map(C=>C.total_cable),x=p.map(C=>C.lv_boxes||0),y=p.map(C=>C.inv_boxes||0),w=p.map(C=>C.workers),S=p.map(C=>C.subcontractor?C.subcontractor.slice(0,3).toUpperCase():"");let E=document.getElementById("exportChart");E||(E=document.createElement("canvas"),E.id="exportChart",E.width=800,E.height=400,E.style.display="none",document.body.appendChild(E));const I=E.getContext("2d"),D=new Y0(I,{type:"bar",data:{labels:g,datasets:[{label:r?"LV boxes":`${u} (${o})`,data:r?x:v,backgroundColor:r?"rgba(239, 68, 68, 0.75)":"rgba(54, 162, 235, 0.8)",borderColor:r?"rgba(185, 28, 28, 1)":"rgba(54, 162, 235, 1)",borderWidth:1},...r?[{label:"INV boxes",data:y,backgroundColor:"rgba(245, 158, 11, 0.75)",borderColor:"rgba(180, 83, 9, 1)",borderWidth:1}]:[]]},options:{responsive:!1,plugins:{title:{display:!0,text:l,font:{size:16}},legend:{display:!0},datalabels:{anchor:"end",align:"top",formatter:(C,k)=>{const M=w[k.dataIndex],O=S[k.dataIndex];return`${M}
${O}`},font:{size:10,weight:"bold"},color:"#333"}},scales:{y:{beginAtZero:!0,title:{display:!0,text:r?"Boxes":`Amount (${o})`}},x:{title:{display:!0,text:"Date"}}}}});await new Promise(C=>setTimeout(C,500));const Z=E.toDataURL("image/png");D.destroy();const K=new W4.Workbook;K.creator=`${u} Tracking System`,K.created=new Date;const z=K.addWorksheet(c.slice(0,31)),W=p.some(C=>(C.plus_dc||0)!==0||(C.minus_dc||0)!==0);z.columns=[{header:"Date",key:"date",width:12},...r?[{header:"LV Boxes",key:"lv_boxes",width:12},{header:"INV Boxes",key:"inv_boxes",width:12}]:W?[{header:`+DC Cable (${o})`,key:"plus_dc",width:15},{header:`-DC Cable (${o})`,key:"minus_dc",width:15}]:[],{header:r?"Total Boxes":`Amount of Work (${o})`,key:"total_cable",width:18},{header:"Workers",key:"workers",width:10},{header:"Subcontractor",key:"subcontractor",width:20}],z.getRow(1).font={bold:!0},z.getRow(1).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF4472C4"}},z.getRow(1).font={color:{argb:"FFFFFFFF"},bold:!0},p.forEach(C=>{const k={date:C.date,total_cable:Math.round(C.total_cable),workers:C.workers,subcontractor:C.subcontractor};r?(k.lv_boxes=Math.round(C.lv_boxes||0),k.inv_boxes=Math.round(C.inv_boxes||0)):W&&(k.plus_dc=Math.round(C.plus_dc),k.minus_dc=Math.round(C.minus_dc)),z.addRow(k)});const Q={date:"TOTAL",total_cable:p.reduce((C,k)=>C+k.total_cable,0),workers:"",subcontractor:""};r?(Q.lv_boxes=p.reduce((C,k)=>C+(k.lv_boxes||0),0),Q.inv_boxes=p.reduce((C,k)=>C+(k.inv_boxes||0),0)):W&&(Q.plus_dc=p.reduce((C,k)=>C+k.plus_dc,0),Q.minus_dc=p.reduce((C,k)=>C+k.minus_dc,0));const rt=z.addRow(Q);rt.font={bold:!0},rt.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFD9E1F2"}};const tt=K.addWorksheet(f),j=K.addImage({base64:Z,extension:"png"});tt.addImage(j,{tl:{col:0,row:0},ext:{width:800,height:400}});const F=await K.xlsx.writeBuffer(),R=new Blob([F],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),T=`${s}_Progress_${new Date().toISOString().split("T")[0]}.xlsx`;Z4.saveAs(R,T),console.log("Excel exported successfully!")}catch(s){console.error("Export failed:",s),alert("Failed to export Excel. Check console for details.")}},[])}}var L0={exports:{}};var Y4=L0.exports,s1;function K4(){return s1||(s1=1,(function(m,a){((t,s)=>{m.exports=s()})(Y4,function t(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},u,o=!s.document&&!!s.postMessage,r=s.IS_PAPA_WORKER||!1,c={},l=0,n={};function f(z){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(W){var Q=D(W);Q.chunkSize=parseInt(Q.chunkSize),W.step||W.chunk||(Q.chunkSize=null),this._handle=new x(Q),(this._handle.streamer=this)._config=Q}).call(this,z),this.parseChunk=function(W,Q){var rt=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<rt){let j=this._config.newline;j||(tt=this._config.quoteChar||'"',j=this._handle.guessLineEndings(W,tt)),W=[...W.split(j).slice(rt)].join(j)}this.isFirstChunk&&K(this._config.beforeFirstChunk)&&(tt=this._config.beforeFirstChunk(W))!==void 0&&(W=tt),this.isFirstChunk=!1,this._halted=!1;var rt=this._partialLine+W,tt=(this._partialLine="",this._handle.parse(rt,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(W=tt.meta.cursor,rt=(this._finished||(this._partialLine=rt.substring(W-this._baseIndex),this._baseIndex=W),tt&&tt.data&&(this._rowCount+=tt.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),r)s.postMessage({results:tt,workerId:n.WORKER_ID,finished:rt});else if(K(this._config.chunk)&&!Q){if(this._config.chunk(tt,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=tt=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(tt.data),this._completeResults.errors=this._completeResults.errors.concat(tt.errors),this._completeResults.meta=tt.meta),this._completed||!rt||!K(this._config.complete)||tt&&tt.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),rt||tt&&tt.meta.paused||this._nextChunk(),tt}this._halted=!0},this._sendError=function(W){K(this._config.error)?this._config.error(W):r&&this._config.error&&s.postMessage({workerId:n.WORKER_ID,error:W,finished:!1})}}function h(z){var W;(z=z||{}).chunkSize||(z.chunkSize=n.RemoteChunkSize),f.call(this,z),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(Q){this._input=Q,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(W=new XMLHttpRequest,this._config.withCredentials&&(W.withCredentials=this._config.withCredentials),o||(W.onload=Z(this._chunkLoaded,this),W.onerror=Z(this._chunkError,this)),W.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var Q,rt=this._config.downloadRequestHeaders;for(Q in rt)W.setRequestHeader(Q,rt[Q])}var tt;this._config.chunkSize&&(tt=this._start+this._config.chunkSize-1,W.setRequestHeader("Range","bytes="+this._start+"-"+tt));try{W.send(this._config.downloadRequestBody)}catch(j){this._chunkError(j.message)}o&&W.status===0&&this._chunkError()}},this._chunkLoaded=function(){W.readyState===4&&(W.status<200||400<=W.status?this._chunkError():(this._start+=this._config.chunkSize||W.responseText.length,this._finished=!this._config.chunkSize||this._start>=(Q=>(Q=Q.getResponseHeader("Content-Range"))!==null?parseInt(Q.substring(Q.lastIndexOf("/")+1)):-1)(W),this.parseChunk(W.responseText)))},this._chunkError=function(Q){Q=W.statusText||Q,this._sendError(new Error(Q))}}function p(z){(z=z||{}).chunkSize||(z.chunkSize=n.LocalChunkSize),f.call(this,z);var W,Q,rt=typeof FileReader<"u";this.stream=function(tt){this._input=tt,Q=tt.slice||tt.webkitSlice||tt.mozSlice,rt?((W=new FileReader).onload=Z(this._chunkLoaded,this),W.onerror=Z(this._chunkError,this)):W=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var tt=this._input,j=(this._config.chunkSize&&(j=Math.min(this._start+this._config.chunkSize,this._input.size),tt=Q.call(tt,this._start,j)),W.readAsText(tt,this._config.encoding));rt||this._chunkLoaded({target:{result:j}})},this._chunkLoaded=function(tt){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(tt.target.result)},this._chunkError=function(){this._sendError(W.error)}}function g(z){var W;f.call(this,z=z||{}),this.stream=function(Q){return W=Q,this._nextChunk()},this._nextChunk=function(){var Q,rt;if(!this._finished)return Q=this._config.chunkSize,W=Q?(rt=W.substring(0,Q),W.substring(Q)):(rt=W,""),this._finished=!W,this.parseChunk(rt)}}function v(z){f.call(this,z=z||{});var W=[],Q=!0,rt=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(tt){this._input=tt,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){rt&&W.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),W.length?this.parseChunk(W.shift()):Q=!0},this._streamData=Z(function(tt){try{W.push(typeof tt=="string"?tt:tt.toString(this._config.encoding)),Q&&(Q=!1,this._checkIsFinished(),this.parseChunk(W.shift()))}catch(j){this._streamError(j)}},this),this._streamError=Z(function(tt){this._streamCleanUp(),this._sendError(tt)},this),this._streamEnd=Z(function(){this._streamCleanUp(),rt=!0,this._streamData("")},this),this._streamCleanUp=Z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function x(z){var W,Q,rt,tt,j=Math.pow(2,53),F=-j,R=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,T=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,C=this,k=0,M=0,O=!1,P=!1,H=[],et={data:[],errors:[],meta:{}};function it(G){return z.skipEmptyLines==="greedy"?G.join("").trim()==="":G.length===1&&G[0].length===0}function pt(){if(et&&rt&&(ut("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+n.DefaultDelimiter+"'"),rt=!1),z.skipEmptyLines&&(et.data=et.data.filter(function(zt){return!it(zt)})),X()){let zt=function(St,Bt){K(z.transformHeader)&&(St=z.transformHeader(St,Bt)),H.push(St)};var gt=zt;if(et)if(Array.isArray(et.data[0])){for(var G=0;X()&&G<et.data.length;G++)et.data[G].forEach(zt);et.data.splice(0,1)}else et.data.forEach(zt)}function U(zt,St){for(var Bt=z.header?{}:[],ie=0;ie<zt.length;ie++){var re=ie,Ct=zt[ie],Ct=((Yt,Qt)=>(Ht=>(z.dynamicTypingFunction&&z.dynamicTyping[Ht]===void 0&&(z.dynamicTyping[Ht]=z.dynamicTypingFunction(Ht)),(z.dynamicTyping[Ht]||z.dynamicTyping)===!0))(Yt)?Qt==="true"||Qt==="TRUE"||Qt!=="false"&&Qt!=="FALSE"&&((Ht=>{if(R.test(Ht)&&(Ht=parseFloat(Ht),F<Ht&&Ht<j))return 1})(Qt)?parseFloat(Qt):T.test(Qt)?new Date(Qt):Qt===""?null:Qt):Qt)(re=z.header?ie>=H.length?"__parsed_extra":H[ie]:re,Ct=z.transform?z.transform(Ct,re):Ct);re==="__parsed_extra"?(Bt[re]=Bt[re]||[],Bt[re].push(Ct)):Bt[re]=Ct}return z.header&&(ie>H.length?ut("FieldMismatch","TooManyFields","Too many fields: expected "+H.length+" fields but parsed "+ie,M+St):ie<H.length&&ut("FieldMismatch","TooFewFields","Too few fields: expected "+H.length+" fields but parsed "+ie,M+St)),Bt}var st;et&&(z.header||z.dynamicTyping||z.transform)&&(st=1,!et.data.length||Array.isArray(et.data[0])?(et.data=et.data.map(U),st=et.data.length):et.data=U(et.data,0),z.header&&et.meta&&(et.meta.fields=H),M+=st)}function X(){return z.header&&H.length===0}function ut(G,U,st,gt){G={type:G,code:U,message:st},gt!==void 0&&(G.row=gt),et.errors.push(G)}K(z.step)&&(tt=z.step,z.step=function(G){et=G,X()?pt():(pt(),et.data.length!==0&&(k+=G.data.length,z.preview&&k>z.preview?Q.abort():(et.data=et.data[0],tt(et,C))))}),this.parse=function(G,U,st){var gt=z.quoteChar||'"',gt=(z.newline||(z.newline=this.guessLineEndings(G,gt)),rt=!1,z.delimiter?K(z.delimiter)&&(z.delimiter=z.delimiter(G),et.meta.delimiter=z.delimiter):((gt=((zt,St,Bt,ie,re)=>{var Ct,Yt,Qt,Ht;re=re||[",","	","|",";",n.RECORD_SEP,n.UNIT_SEP];for(var Jt=0;Jt<re.length;Jt++){for(var ne,ae=re[Jt],me=0,Le=0,Pe=0,Be=(Qt=void 0,new w({comments:ie,delimiter:ae,newline:St,preview:10}).parse(zt)),He=0;He<Be.data.length;He++)Bt&&it(Be.data[He])?Pe++:(ne=Be.data[He].length,Le+=ne,Qt===void 0?Qt=ne:0<ne&&(me+=Math.abs(ne-Qt),Qt=ne));0<Be.data.length&&(Le/=Be.data.length-Pe),(Yt===void 0||me<=Yt)&&(Ht===void 0||Ht<Le)&&1.99<Le&&(Yt=me,Ct=ae,Ht=Le)}return{successful:!!(z.delimiter=Ct),bestDelimiter:Ct}})(G,z.newline,z.skipEmptyLines,z.comments,z.delimitersToGuess)).successful?z.delimiter=gt.bestDelimiter:(rt=!0,z.delimiter=n.DefaultDelimiter),et.meta.delimiter=z.delimiter),D(z));return z.preview&&z.header&&gt.preview++,W=G,Q=new w(gt),et=Q.parse(W,U,st),pt(),O?{meta:{paused:!0}}:et||{meta:{paused:!1}}},this.paused=function(){return O},this.pause=function(){O=!0,Q.abort(),W=K(z.chunk)?"":W.substring(Q.getCharIndex())},this.resume=function(){C.streamer._halted?(O=!1,C.streamer.parseChunk(W,!0)):setTimeout(C.resume,3)},this.aborted=function(){return P},this.abort=function(){P=!0,Q.abort(),et.meta.aborted=!0,K(z.complete)&&z.complete(et),W=""},this.guessLineEndings=function(zt,gt){zt=zt.substring(0,1048576);var gt=new RegExp(y(gt)+"([^]*?)"+y(gt),"gm"),st=(zt=zt.replace(gt,"")).split("\r"),gt=zt.split(`
`),zt=1<gt.length&&gt[0].length<st[0].length;if(st.length===1||zt)return`
`;for(var St=0,Bt=0;Bt<st.length;Bt++)st[Bt][0]===`
`&&St++;return St>=st.length/2?`\r
`:"\r"}}function y(z){return z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function w(z){var W=(z=z||{}).delimiter,Q=z.newline,rt=z.comments,tt=z.step,j=z.preview,F=z.fastMode,R=null,T=!1,C=z.quoteChar==null?'"':z.quoteChar,k=C;if(z.escapeChar!==void 0&&(k=z.escapeChar),(typeof W!="string"||-1<n.BAD_DELIMITERS.indexOf(W))&&(W=","),rt===W)throw new Error("Comment character same as delimiter");rt===!0?rt="#":(typeof rt!="string"||-1<n.BAD_DELIMITERS.indexOf(rt))&&(rt=!1),Q!==`
`&&Q!=="\r"&&Q!==`\r
`&&(Q=`
`);var M=0,O=!1;this.parse=function(P,H,et){if(typeof P!="string")throw new Error("Input must be a string");var it=P.length,pt=W.length,X=Q.length,ut=rt.length,G=K(tt),U=[],st=[],gt=[],zt=M=0;if(!P)return me();if(F||F!==!1&&P.indexOf(C)===-1){for(var St=P.split(Q),Bt=0;Bt<St.length;Bt++){if(gt=St[Bt],M+=gt.length,Bt!==St.length-1)M+=Q.length;else if(et)return me();if(!rt||gt.substring(0,ut)!==rt){if(G){if(U=[],Ht(gt.split(W)),Le(),O)return me()}else Ht(gt.split(W));if(j&&j<=Bt)return U=U.slice(0,j),me(!0)}}return me()}for(var ie=P.indexOf(W,M),re=P.indexOf(Q,M),Ct=new RegExp(y(k)+y(C),"g"),Yt=P.indexOf(C,M);;)if(P[M]===C)for(Yt=M,M++;;){if((Yt=P.indexOf(C,Yt+1))===-1)return et||st.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:U.length,index:M}),ne();if(Yt===it-1)return ne(P.substring(M,Yt).replace(Ct,C));if(C===k&&P[Yt+1]===k)Yt++;else if(C===k||Yt===0||P[Yt-1]!==k){ie!==-1&&ie<Yt+1&&(ie=P.indexOf(W,Yt+1));var Qt=Jt((re=re!==-1&&re<Yt+1?P.indexOf(Q,Yt+1):re)===-1?ie:Math.min(ie,re));if(P.substr(Yt+1+Qt,pt)===W){gt.push(P.substring(M,Yt).replace(Ct,C)),P[M=Yt+1+Qt+pt]!==C&&(Yt=P.indexOf(C,M)),ie=P.indexOf(W,M),re=P.indexOf(Q,M);break}if(Qt=Jt(re),P.substring(Yt+1+Qt,Yt+1+Qt+X)===Q){if(gt.push(P.substring(M,Yt).replace(Ct,C)),ae(Yt+1+Qt+X),ie=P.indexOf(W,M),Yt=P.indexOf(C,M),G&&(Le(),O))return me();if(j&&U.length>=j)return me(!0);break}st.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:U.length,index:M}),Yt++}}else if(rt&&gt.length===0&&P.substring(M,M+ut)===rt){if(re===-1)return me();M=re+X,re=P.indexOf(Q,M),ie=P.indexOf(W,M)}else if(ie!==-1&&(ie<re||re===-1))gt.push(P.substring(M,ie)),M=ie+pt,ie=P.indexOf(W,M);else{if(re===-1)break;if(gt.push(P.substring(M,re)),ae(re+X),G&&(Le(),O))return me();if(j&&U.length>=j)return me(!0)}return ne();function Ht(Pe){U.push(Pe),zt=M}function Jt(Pe){var Be=0;return Be=Pe!==-1&&(Pe=P.substring(Yt+1,Pe))&&Pe.trim()===""?Pe.length:Be}function ne(Pe){return et||(Pe===void 0&&(Pe=P.substring(M)),gt.push(Pe),M=it,Ht(gt),G&&Le()),me()}function ae(Pe){M=Pe,Ht(gt),gt=[],re=P.indexOf(Q,M)}function me(Pe){if(z.header&&!H&&U.length&&!T){var Be=U[0],He=Object.create(null),Je=new Set(Be);let sn=!1;for(let un=0;un<Be.length;un++){let an=Be[un];if(He[an=K(z.transformHeader)?z.transformHeader(an,un):an]){let ge,Ve=He[an];for(;ge=an+"_"+Ve,Ve++,Je.has(ge););Je.add(ge),Be[un]=ge,He[an]++,sn=!0,(R=R===null?{}:R)[ge]=an}else He[an]=1,Be[un]=an;Je.add(an)}sn&&console.warn("Duplicate headers found and renamed."),T=!0}return{data:U,errors:st,meta:{delimiter:W,linebreak:Q,aborted:O,truncated:!!Pe,cursor:zt+(H||0),renamedHeaders:R}}}function Le(){tt(me()),U=[],st=[]}},this.abort=function(){O=!0},this.getCharIndex=function(){return M}}function S(z){var W=z.data,Q=c[W.workerId],rt=!1;if(W.error)Q.userError(W.error,W.file);else if(W.results&&W.results.data){var tt={abort:function(){rt=!0,E(W.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(K(Q.userStep)){for(var j=0;j<W.results.data.length&&(Q.userStep({data:W.results.data[j],errors:W.results.errors,meta:W.results.meta},tt),!rt);j++);delete W.results}else K(Q.userChunk)&&(Q.userChunk(W.results,tt,W.file),delete W.results)}W.finished&&!rt&&E(W.workerId,W.results)}function E(z,W){var Q=c[z];K(Q.userComplete)&&Q.userComplete(W),Q.terminate(),delete c[z]}function I(){throw new Error("Not implemented.")}function D(z){if(typeof z!="object"||z===null)return z;var W,Q=Array.isArray(z)?[]:{};for(W in z)Q[W]=D(z[W]);return Q}function Z(z,W){return function(){z.apply(W,arguments)}}function K(z){return typeof z=="function"}return n.parse=function(z,W){var Q=(W=W||{}).dynamicTyping||!1;if(K(Q)&&(W.dynamicTypingFunction=Q,Q={}),W.dynamicTyping=Q,W.transform=!!K(W.transform)&&W.transform,!W.worker||!n.WORKERS_SUPPORTED)return Q=null,n.NODE_STREAM_INPUT,typeof z=="string"?(z=(rt=>rt.charCodeAt(0)!==65279?rt:rt.slice(1))(z),Q=new(W.download?h:g)(W)):z.readable===!0&&K(z.read)&&K(z.on)?Q=new v(W):(s.File&&z instanceof File||z instanceof Object)&&(Q=new p(W)),Q.stream(z);(Q=(()=>{var rt;return!!n.WORKERS_SUPPORTED&&(rt=(()=>{var tt=s.URL||s.webkitURL||null,j=t.toString();return n.BLOB_URL||(n.BLOB_URL=tt.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",j,")();"],{type:"text/javascript"})))})(),(rt=new s.Worker(rt)).onmessage=S,rt.id=l++,c[rt.id]=rt)})()).userStep=W.step,Q.userChunk=W.chunk,Q.userComplete=W.complete,Q.userError=W.error,W.step=K(W.step),W.chunk=K(W.chunk),W.complete=K(W.complete),W.error=K(W.error),delete W.worker,Q.postMessage({input:z,config:W,workerId:Q.id})},n.unparse=function(z,W){var Q=!1,rt=!0,tt=",",j=`\r
`,F='"',R=F+F,T=!1,C=null,k=!1,M=((()=>{if(typeof W=="object"){if(typeof W.delimiter!="string"||n.BAD_DELIMITERS.filter(function(H){return W.delimiter.indexOf(H)!==-1}).length||(tt=W.delimiter),typeof W.quotes!="boolean"&&typeof W.quotes!="function"&&!Array.isArray(W.quotes)||(Q=W.quotes),typeof W.skipEmptyLines!="boolean"&&typeof W.skipEmptyLines!="string"||(T=W.skipEmptyLines),typeof W.newline=="string"&&(j=W.newline),typeof W.quoteChar=="string"&&(F=W.quoteChar),typeof W.header=="boolean"&&(rt=W.header),Array.isArray(W.columns)){if(W.columns.length===0)throw new Error("Option columns is empty");C=W.columns}W.escapeChar!==void 0&&(R=W.escapeChar+F),W.escapeFormulae instanceof RegExp?k=W.escapeFormulae:typeof W.escapeFormulae=="boolean"&&W.escapeFormulae&&(k=/^[=+\-@\t\r].*$/)}})(),new RegExp(y(F),"g"));if(typeof z=="string"&&(z=JSON.parse(z)),Array.isArray(z)){if(!z.length||Array.isArray(z[0]))return O(null,z,T);if(typeof z[0]=="object")return O(C||Object.keys(z[0]),z,T)}else if(typeof z=="object")return typeof z.data=="string"&&(z.data=JSON.parse(z.data)),Array.isArray(z.data)&&(z.fields||(z.fields=z.meta&&z.meta.fields||C),z.fields||(z.fields=Array.isArray(z.data[0])?z.fields:typeof z.data[0]=="object"?Object.keys(z.data[0]):[]),Array.isArray(z.data[0])||typeof z.data[0]=="object"||(z.data=[z.data])),O(z.fields||[],z.data||[],T);throw new Error("Unable to serialize unrecognized input");function O(H,et,it){var pt="",X=(typeof H=="string"&&(H=JSON.parse(H)),typeof et=="string"&&(et=JSON.parse(et)),Array.isArray(H)&&0<H.length),ut=!Array.isArray(et[0]);if(X&&rt){for(var G=0;G<H.length;G++)0<G&&(pt+=tt),pt+=P(H[G],G);0<et.length&&(pt+=j)}for(var U=0;U<et.length;U++){var st=(X?H:et[U]).length,gt=!1,zt=X?Object.keys(et[U]).length===0:et[U].length===0;if(it&&!X&&(gt=it==="greedy"?et[U].join("").trim()==="":et[U].length===1&&et[U][0].length===0),it==="greedy"&&X){for(var St=[],Bt=0;Bt<st;Bt++){var ie=ut?H[Bt]:Bt;St.push(et[U][ie])}gt=St.join("").trim()===""}if(!gt){for(var re=0;re<st;re++){0<re&&!zt&&(pt+=tt);var Ct=X&&ut?H[re]:re;pt+=P(et[U][Ct],re)}U<et.length-1&&(!it||0<st&&!zt)&&(pt+=j)}}return pt}function P(H,et){var it,pt;return H==null?"":H.constructor===Date?JSON.stringify(H).slice(1,25):(pt=!1,k&&typeof H=="string"&&k.test(H)&&(H="'"+H,pt=!0),it=H.toString().replace(M,R),(pt=pt||Q===!0||typeof Q=="function"&&Q(H,et)||Array.isArray(Q)&&Q[et]||((X,ut)=>{for(var G=0;G<ut.length;G++)if(-1<X.indexOf(ut[G]))return!0;return!1})(it,n.BAD_DELIMITERS)||-1<it.indexOf(tt)||it.charAt(0)===" "||it.charAt(it.length-1)===" ")?F+it+F:it)}},n.RECORD_SEP="",n.UNIT_SEP="",n.BYTE_ORDER_MARK="\uFEFF",n.BAD_DELIMITERS=["\r",`
`,'"',n.BYTE_ORDER_MARK],n.WORKERS_SUPPORTED=!o&&!!s.Worker,n.NODE_STREAM_INPUT=1,n.LocalChunkSize=10485760,n.RemoteChunkSize=5242880,n.DefaultDelimiter=",",n.Parser=w,n.ParserHandle=x,n.NetworkStreamer=h,n.FileStreamer=p,n.StringStreamer=g,n.ReadableStreamStreamer=v,s.jQuery&&((u=s.jQuery).fn.parse=function(z){var W=z.config||{},Q=[];return this.each(function(j){if(!(u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var F=0;F<this.files.length;F++)Q.push({file:this.files[F],inputElem:this,instanceConfig:u.extend({},W)})}),rt(),this;function rt(){if(Q.length===0)K(z.complete)&&z.complete();else{var j,F,R,T,C=Q[0];if(K(z.before)){var k=z.before(C.file,C.inputElem);if(typeof k=="object"){if(k.action==="abort")return j="AbortError",F=C.file,R=C.inputElem,T=k.reason,void(K(z.error)&&z.error({name:j},F,R,T));if(k.action==="skip")return void tt();typeof k.config=="object"&&(C.instanceConfig=u.extend(C.instanceConfig,k.config))}else if(k==="skip")return void tt()}var M=C.instanceConfig.complete;C.instanceConfig.complete=function(O){K(M)&&M(O,C.file,C.inputElem),tt()},n.parse(C.file,C.instanceConfig)}}function tt(){Q.splice(0,1),rt()}}),r&&(s.onmessage=function(z){z=z.data,n.WORKER_ID===void 0&&z&&(n.WORKER_ID=z.workerId),typeof z.input=="string"?s.postMessage({workerId:n.WORKER_ID,results:n.parse(z.input,z.config),finished:!0}):(s.File&&z.input instanceof File||z.input instanceof Object)&&(z=n.parse(z.input,z.config))&&s.postMessage({workerId:n.WORKER_ID,results:z,finished:!0})}),(h.prototype=Object.create(f.prototype)).constructor=h,(p.prototype=Object.create(f.prototype)).constructor=p,(g.prototype=Object.create(g.prototype)).constructor=g,(v.prototype=Object.create(f.prototype)).constructor=v,n})})(L0)),L0.exports}var Q4=K4();const o1=Jg(Q4);function mo(m){const a=[],t=s=>{if(!(!Array.isArray(s)||s.length===0)){if(s[0]&&typeof s[0].lat=="number"&&typeof s[0].lng=="number"){a.push(s);return}s.forEach(t)}};return t(m),a}function Ms(m){const a=(m||[]).filter(s=>Array.isArray(s)&&s.length===2&&Number.isFinite(s[0])&&Number.isFinite(s[1])).map(s=>[Math.min(s[0],s[1]),Math.max(s[0],s[1])]).filter(s=>s[1]>s[0]);if(a.length===0)return[];a.sort((s,u)=>s[0]-u[0]);const t=[a[0]];for(let s=1;s<a.length;s++){const u=a[s],o=t[t.length-1];u[0]<=o[1]+.01?o[1]=Math.max(o[1],u[1]):t.push(u)}return t}function Eu([m,a],t,s){let u=m;const o=[];for(const[r,c]of t)if(!(c<=u)&&(r>=a||(r>u&&o.push([u,Math.min(r,a)]),u=Math.max(u,c),u>=a)))break;return u<a&&o.push([u,a]),o.filter(r=>r[1]-r[0]>s)}function J4({L:m,map:a,bounds:t}){const s=a.latLngToLayerPoint(t.getNorthWest()),u=a.latLngToLayerPoint(t.getSouthEast()),o=Math.min(s.x,u.x),r=Math.max(s.x,u.x),c=Math.min(s.y,u.y),l=Math.max(s.y,u.y);return m.bounds(m.point(o,c),m.point(r,l))}function tS({L:m,map:a,lineLatLngs:t,pixelBounds:s}){const u=[];let o=[];for(let r=0;r<t.length-1;r++){const c=t[r],l=t[r+1];if(!c||!l)continue;const n=a.latLngToLayerPoint(c),f=a.latLngToLayerPoint(l),h=m.LineUtil?.clipSegment?.(n,f,s);if(h&&h.length===2){const p=a.layerPointToLatLng(h[0]),g=a.layerPointToLatLng(h[1]);if(o.length===0)o.push(p);else{const v=o[o.length-1];v&&(Math.abs(v.lat-p.lat)>1e-9||Math.abs(v.lng-p.lng)>1e-9)&&o.push(p)}o.push(g)}else o.length>=2&&u.push(o),o=[]}return o.length>=2&&u.push(o),u}function io({L:m,lineLatLngs:a}){const t=[],s=[0];for(let u=0;u<a.length-1;u++){const o=a[u],r=a[u+1],c=o&&r?m.latLng(o.lat,o.lng).distanceTo(m.latLng(r.lat,r.lng)):0;t.push(c),s.push(s[s.length-1]+c)}return{segMeters:t,cum:s}}function a1({map:m,lineLatLngs:a,cumData:t,targetLatLng:s}){const u=m.latLngToLayerPoint(s);let o={d2:1/0,along:0};for(let r=0;r<a.length-1;r++){const c=a[r],l=a[r+1];if(!c||!l)continue;const n=m.latLngToLayerPoint(c),f=m.latLngToLayerPoint(l),h=f.x-n.x,p=f.y-n.y,g=h*h+p*p;if(g<=1e-9)continue;const v=Math.max(0,Math.min(1,((u.x-n.x)*h+(u.y-n.y)*p)/g)),x=n.x+h*v,y=n.y+p*v,w=u.x-x,S=u.y-y,E=w*w+S*S;if(E<o.d2){const I=t.segMeters[r]||0;o={d2:E,along:(t.cum[r]||0)+I*v}}}return o.along}function Ia({lineLatLngs:m,cumData:a,startM:t,endM:s}){const u=Math.max(0,Math.min(t,s)),o=Math.max(0,Math.max(t,s)),r=[];if(!(o>u))return r;for(let c=0;c<m.length-1;c++){const l=a.cum[c]||0;if((a.cum[c+1]||0)<=u)continue;if(l>=o)break;const f=m[c],h=m[c+1],p=a.segMeters[c]||0;if(!f||!h||p<=1e-6)continue;const g=Math.max(0,Math.min(1,(u-l)/p)),v=Math.max(0,Math.min(1,(o-l)/p)),x=S=>[f.lat+(h.lat-f.lat)*S,f.lng+(h.lng-f.lng)*S],y=x(g),w=x(v);if(r.length===0)r.push(y);else{const S=r[r.length-1];(Math.abs(S[0]-y[0])>1e-9||Math.abs(S[1]-y[1])>1e-9)&&r.push(y)}r.push(w)}return r}function zf({L:m,map:a,bounds:t,lineLatLngs:s,minMeters:u=.5}){if(!a||!t||!Array.isArray(s)||s.length<2)return[];const o=J4({L:m,map:a,bounds:t}),r=io({L:m,lineLatLngs:s}),c=[];return tS({L:m,map:a,lineLatLngs:s,pixelBounds:o}).forEach(n=>{if(!n||n.length<2)return;const f=a1({map:a,lineLatLngs:s,cumData:r,targetLatLng:n[0]}),h=a1({map:a,lineLatLngs:s,cumData:r,targetLatLng:n[n.length-1]}),p=Math.min(f,h),g=Math.max(f,h);g-p>=u&&c.push([p,g])}),Ms(c)}Ce.TextLabel=Ce.CircleMarker.extend({options:{text:"",textStyle:"300",textColor:"rgba(255,255,255,0.65)",textStrokeColor:"rgba(0,0,0,0.6)",textStrokeWidthFactor:1,underline:!1,underlineColor:null,underlineWidthFactor:1,offsetX:0,offsetY:0,offsetXFactor:0,offsetYFactor:0,minFontSize:null,maxFontSize:null,bgColor:null,bgPaddingX:0,bgPaddingY:0,bgStrokeColor:null,bgStrokeWidth:0,bgCornerRadius:0,minTextZoom:null,minBgZoom:null,textColorNoBg:null,textBaseSize:10,refZoom:20,rotation:0,interactive:!1,radius:0},_updatePath:function(){if(!this._renderer||!this._renderer._ctx)return;const m=this._renderer._ctx,a=this._point,t=this._map;if(!t||!a)return;const s=t.getZoom(),u=typeof this.options.minTextZoom=="number"?this.options.minTextZoom:null;if(u!=null&&s<u)return;const o=Math.pow(2,s-this.options.refZoom);let r=this.options.textBaseSize*o;const c=typeof this.options.minFontSize=="number"?this.options.minFontSize:null,l=typeof this.options.maxFontSize=="number"?this.options.maxFontSize:null;if(c!=null&&(r=Math.max(c,r)),l!=null&&(r=Math.min(l,r)),r<1)return;m.save();const n=(this.options.rotation||0)*Math.PI/180;m.translate(a.x,a.y),m.rotate(n);const f=Number(this.options.offsetX)||0,h=Number(this.options.offsetY)||0,p=(Number(this.options.offsetXFactor)||0)*r,g=(Number(this.options.offsetYFactor)||0)*r;(f||h||p||g)&&m.translate(f+p,h+g),m.font=this.options.textStyle+" "+r+"px sans-serif";const v=typeof this.options.minBgZoom=="number"?this.options.minBgZoom:null,x=!!this.options.bgColor&&(v==null||s>=v),y=this.options.textColorNoBg;m.fillStyle=!x&&y?y:this.options.textColor,m.textAlign="center",m.textBaseline="middle";const w=String(this.options.text||""),S=w.includes(`
`)?w.split(/\n+/).filter(Boolean):[w],E=r*.2,I=r+E;if(x){let D=0,Z=r*.8,K=r*.25;for(const k of S){const M=m.measureText(k||"");D=Math.max(D,M.width||0),typeof M.actualBoundingBoxAscent=="number"&&(Z=Math.max(Z,M.actualBoundingBoxAscent)),typeof M.actualBoundingBoxDescent=="number"&&(K=Math.max(K,M.actualBoundingBoxDescent))}const z=D,W=S.length*I-E,Q=Number(this.options.bgPaddingX)||0,rt=Number(this.options.bgPaddingY)||0,tt=z+Q*2,j=W+rt*2,F=-tt/2,R=-j/2;m.save(),m.fillStyle=this.options.bgColor;const T=Math.max(0,Number(this.options.bgCornerRadius)||0);if(m.beginPath(),T>0){const k=Math.min(T,tt/2,j/2);m.moveTo(F+k,R),m.lineTo(F+tt-k,R),m.quadraticCurveTo(F+tt,R,F+tt,R+k),m.lineTo(F+tt,R+j-k),m.quadraticCurveTo(F+tt,R+j,F+tt-k,R+j),m.lineTo(F+k,R+j),m.quadraticCurveTo(F,R+j,F,R+j-k),m.lineTo(F,R+k),m.quadraticCurveTo(F,R,F+k,R)}else m.rect(F,R,tt,j);m.closePath(),m.fill();const C=Number(this.options.bgStrokeWidth)||0;C>0&&this.options.bgStrokeColor&&(m.lineWidth=C,m.strokeStyle=this.options.bgStrokeColor,m.stroke()),m.restore()}if(r>=10){const D=typeof this.options.textStrokeWidthFactor=="number"?this.options.textStrokeWidthFactor:1;if(m.lineWidth=Math.max(.55,r/18)*Math.max(.5,D),m.strokeStyle=this.options.textStrokeColor||"rgba(0,0,0,0.6)",S.length===1)m.strokeText(w,0,0);else{const K=-(S.length*I-E)/2+r/2;for(let z=0;z<S.length;z++){const W=S[z]||"",Q=K+z*I;m.strokeText(W,0,Q)}}}if(S.length===1)m.fillText(w,0,0);else{const Z=-(S.length*I-E)/2+r/2;for(let K=0;K<S.length;K++){const z=S[K]||"",W=Z+K*I;m.fillText(z,0,W)}}if(this.options.underline){const Z=m.measureText(S[S.length-1]||"").width||0,K=r*.55,z=this.options.underlineColor||m.fillStyle,W=typeof this.options.underlineWidthFactor=="number"?this.options.underlineWidthFactor:1;m.beginPath(),m.lineWidth=Math.max(1,r*.08)*Math.max(.6,W),m.strokeStyle=z,m.moveTo(-Z/2,K),m.lineTo(Z/2,K),m.stroke()}m.restore()}});Ce.textLabel=function(m,a){return new Ce.TextLabel(m,a)};const Oa=Ce.canvas({padding:.1});function eS(m){if(!m||m.length<2)return 0;let a=0,t=0;for(let s=0;s<m.length-1;s++){const u=m[s+1][0]-m[s][0],o=m[s+1][1]-m[s][1],r=Math.sqrt(u*u+o*o);r>a&&(a=r,t=Math.atan2(o,u)*180/Math.PI)}return t>90&&(t-=180),t<-90&&(t+=180),t}const Mn=m=>m?m.toString().replace(/\s+/g,"").toLowerCase().trim():"",nS=15,l1=30,ol="rgba(100,116,139,0.45)",go=1.05,A0=.001;function rS({name:m,counters:a=!0,moduleConfig:t,customLogic:s=null,customSidebar:u=null,customCounters:o=null,customFooter:r=null,customPanelLogic:c=null,customBoundaryLogic:l=null}){const[n,f]=ot.useState("Loading..."),h=t||{},p=m||h?.label||h?.key||"Module",[g,v]=ot.useState(null);ot.useEffect(()=>{let B=!1;const J=String(h?.autoGeojsonFolder||"").trim();if(!J){v(null);return}return(async()=>{try{const at=await fetch("/cew_public_manifest.json",{cache:"no-store"});if(!at.ok)return;const dt=(await at.json())?.folders?.[J]?.geojson;if(!Array.isArray(dt)||dt.length===0)return;const xt=mt=>{const vt=String(mt||"").toLowerCase();return vt.endsWith(".geojson")?vt.includes("string_text")?"string_text":vt.includes("inv_id")?"inv_id":vt.includes("lv_box")||vt.includes("inv_box")?"lv_box":vt.includes("boundry")||vt.includes("boundary")?"boundry":vt.startsWith("full")?"full":vt.replace(/\.geojson$/i,""):null},yt=mt=>mt==="boundry"?{color:"rgba(239, 68, 68, 0.7)",fillColor:"transparent",weight:1.2,fillOpacity:0,interactive:!1}:mt==="lv_box"?{color:"#eab308",fillColor:"#facc15",weight:3,fillOpacity:.6}:mt==="string_text"?{color:"#dc2626",fillColor:"#ef4444"}:mt==="inv_id"?{color:"#16a34a",fillColor:"#22c55e"}:{color:"rgba(255,255,255,0.55)",fillColor:"transparent"},ht=dt.map(mt=>{const vt=xt(mt);return vt?{url:`/${encodeURIComponent(J)}/${encodeURIComponent(mt)}`,name:vt,...yt(vt)}:null}).filter(Boolean);!B&&ht.length>0&&v(ht)}catch{}})(),()=>{B=!0}},[h?.autoGeojsonFolder]);const x=g||h?.geojsonFiles||[],y=a,w=String(h?.key||"").toUpperCase()==="LV",S=String(h?.key||"").toUpperCase()==="FIB",E=String(h?.key||"").toUpperCase()==="DC",I=String(h?.csvFormat||"").toLowerCase()==="mvf",D=String(h?.key||"").toUpperCase()==="MC4",Z=String(h?.key||"").toUpperCase()==="MVT",K=String(h?.key||"").toUpperCase()==="LVTT",z=String(h?.key||"").toUpperCase()==="PL",W=String(h?.key||"").toUpperCase()==="PTEP"||!!h?.earthingMode,Q=String(h?.key||"").toUpperCase()==="DCCT"||!!h?.dcctMode,rt=ot.useRef(Z);ot.useEffect(()=>{rt.current=Z},[Z]);const tt=ot.useRef(Q);ot.useEffect(()=>{tt.current=Q},[Q]);const j=String(h?.key||"").toUpperCase()==="TIP"||!!h?.tableCounters,F=String(h?.key||"").toUpperCase()==="LVIB"||!!h?.boxLabelsEnabled,R=String(h?.key||"").toUpperCase()==="DATP",T=String(h?.key||"").toUpperCase()==="MVFT",C=String(h?.key||"").toUpperCase()==="DCTT",k=ot.useRef(C);ot.useEffect(()=>{k.current=C},[C]);const[M,O]=ot.useState(()=>new Set),P=ot.useRef(M);ot.useEffect(()=>{P.current=M},[M]);const[H,et]=ot.useState(()=>new Set),it=ot.useRef(H);ot.useEffect(()=>{it.current=H},[H]);const[pt,X]=ot.useState(()=>({})),ut=R&&(x||[]).find(B=>String(B?.name||"").toLowerCase()==="trench")?.color||"#3b82f6",G=T&&(x||[]).find(B=>String(B?.name||"").toLowerCase()==="trench")?.color||"#3b82f6",U="#22c55e",st="#22c55e",gt=typeof h?.circuitsMultiplier=="number"&&Number.isFinite(h.circuitsMultiplier)?h.circuitsMultiplier:1,zt=["#dc2626","#2563eb","#d946ef","#f59e0b","#06b6d4","#8b5cf6","#f43f5e","#14b8a6","#ea580c","#7c3aed"],St=ot.useCallback(B=>{const J=String(B||"");if(!J)return"#94a3b8";const at=Fc.current?.[J];if(at)return at;let lt=0;for(let xt=0;xt<J.length;xt++)lt=lt*31+J.charCodeAt(xt)>>>0;const dt=zt[lt%zt.length];return Fc.current[J]=dt,dt},[]),Bt=!!h?.simpleCounters||w,ie=!!h?.stringTextToggle,[re,Ct]=ot.useState(!!h?.stringTextDefaultOn),Yt=ie?re?"always":"none":h?.stringTextVisibility||"always",[Qt,Ht]=ot.useState(()=>[]),Jt=ot.useRef(Qt);ot.useEffect(()=>{Jt.current=Qt},[Qt]);const ne=typeof h?.stringTextBaseSize=="number"?h.stringTextBaseSize:11,ae=h?.stringTextColor||"rgba(255,255,255,0.92)",me=h?.stringTextStyle||"300",Le=h?.stringTextStrokeColor||"rgba(0,0,0,0.6)",Pe=typeof h?.stringTextStrokeWidthFactor=="number"?h.stringTextStrokeWidthFactor:1,Be=typeof h?.stringTextMinZoom=="number"?h.stringTextMinZoom:18,He=typeof h?.stringTextMinFontSize=="number"?h.stringTextMinFontSize:null,Je=typeof h?.stringTextMaxFontSize=="number"?h.stringTextMaxFontSize:null,sn=typeof h?.stringTextRefZoom=="number"?h.stringTextRefZoom:20;ot.useEffect(()=>{const B=Ve.current;if(!B)return;const J=()=>{try{const lt=B.getBoundingClientRect().height,dt=`${Math.round(lt)}px`;document.documentElement.style.setProperty("--cewHeaderH",dt)}catch{}};J();let at=null;try{at=new ResizeObserver(()=>J()),at.observe(B)}catch{}return window.addEventListener("resize",J),()=>{window.removeEventListener("resize",J),at&&at.disconnect()}},[]);const un=ot.useRef(Yt),an=ot.useRef(ie);ot.useEffect(()=>{un.current=Yt,an.current=ie},[Yt,ie]),ot.useEffect(()=>{Ct(!!h?.stringTextDefaultOn)},[h]),ot.useEffect(()=>{typeof s=="function"&&s({moduleName:p,activeMode:h,mapRef:ge})},[s,p,h]),ot.useEffect(()=>{typeof c=="function"&&c({moduleName:p,activeMode:h,mapRef:ge})},[c,p,h]);const ge=ot.useRef(null),Ve=ot.useRef(null),[Ke,dn]=ot.useState(!1),ln=ot.useRef(null),$n=ot.useRef(null),hr=ot.useRef(null),Ye=ot.useRef(null),Xn=ot.useRef(null),Wn=ot.useRef(null),Cn=ot.useRef([]),br=ot.useRef(0),Ge=ot.useRef({}),Ln=ot.useRef(new Set),ir=ot.useRef(new Set),Zn=ot.useRef(null),cn=ot.useRef(null),Qn=ot.useRef(null),qn=ot.useRef([]),jn=ot.useRef(null),ue=ot.useRef([]),ye=ot.useRef(null),be=ot.useRef([]),Qe=ot.useRef(0),yn=ot.useRef({}),qe=ot.useRef({}),fn=B=>{const J=Mn(B);if(!J)return"";if(J==="css")return"css";const at=J.match(/^(ss|sub)(\d{1,2})$/i);if(!at)return J;const lt=String(at[1]||"").toLowerCase(),dt=String(parseInt(at[2],10)).padStart(2,"0");return`${lt}${dt}`},gn=B=>{const J=fn(B);if(J==="css")return!0;const at=J.match(/^(ss|sub)(\d{2})$/i);if(!at)return!1;const lt=parseInt(at[2],10);return Number.isFinite(lt)&&lt>=1&&lt<=6},wn=B=>{const J=fn(B);if(!gn(J))return 0;if(J==="css")return 9;const at=J.match(/^(ss|sub)(\d{2})$/i),lt=at?parseInt(at[2],10):0;return lt>=1&&lt<=3?6:lt>=4&&lt<=6?3:0},bn=(B,J)=>{const at=wn(B);return at?Math.max(0,Math.min(at,Number(J)||0)):0},[Sn,Fn]=ot.useState(()=>{try{const B=localStorage.getItem("cew:mvt:submode");return String(B||"").toLowerCase()==="testing"?"testing":"termination"}catch{return"termination"}}),pr=ot.useRef(Sn);ot.useEffect(()=>{pr.current=Sn;try{localStorage.setItem("cew:mvt:submode",String(Sn||"termination"))}catch{}},[Sn]);const Gn=ot.useRef({}),Nr=ot.useRef({}),Cr=ot.useRef(null),oi=ot.useRef([]),Kt=ot.useRef(0),we=ot.useRef(null),De=ot.useRef([]),$e=ot.useRef(0),Tn=ot.useRef({}),[Ze,Xe]=ot.useState(0),[vn,Dn]=ot.useState(()=>{try{const B=localStorage.getItem("cew:lvtt:submode");return String(B||"").toLowerCase()==="testing"?"testing":"termination"}catch{return"termination"}}),Bn=ot.useRef(vn);ot.useEffect(()=>{Bn.current=vn;try{localStorage.setItem("cew:lvtt:submode",String(vn||"termination"))}catch{}},[vn]);const[kn,xn]=ot.useState(()=>({})),En=ot.useRef(kn);ot.useEffect(()=>{En.current=kn||{}},[kn]);const Un=ot.useCallback(B=>{const J=Mn(B);if(!J)return"";const at=J.match(/^(ss|sub)(\d{1,2})$/i);if(!at)return"";const lt=String(at[1]||"").toLowerCase(),dt=parseInt(at[2],10);return!Number.isFinite(dt)||dt<=0?"":`${lt}${String(dt).padStart(2,"0")}`},[]),[Vn,Ar]=ot.useState(()=>({})),Vr=ot.useRef(Vn);ot.useEffect(()=>{Vr.current=Vn||{}},[Vn]),ot.useEffect(()=>{if(!K){Tn.current={},Xe(J=>J+1);return}let B=!1;return(async()=>{try{const J=["/LV_CABLE_PULLING _PROGRESS_TRACKING/lv_pulling.csv",encodeURI("/LV_CABLE_PULLING _PROGRESS_TRACKING/lv_pulling.csv"),"/LV_CABLE_PULLING%20_PROGRESS_TRACKING/lv_pulling.csv"];let at="",lt=null;for(const Rt of J)try{const qt=`${Rt}?v=${Date.now()}`,jt=await fetch(qt,{cache:"no-store"});if(jt&&jt.ok){at=await jt.text();break}lt=new Error(`HTTP ${jt?.status||"??"} for ${Rt}`)}catch(qt){lt=qt}if(!at)throw lt||new Error("Failed to load lv_pulling.csv");if(B)return;const yt=String(at||"").split(/\r?\n/).map(Rt=>String(Rt||"").trim()).filter(Boolean);if(yt.length<=1){Tn.current={},Xe(Rt=>Rt+1);return}const ht=String(yt[0]||""),mt=ht.includes("	")?"	":ht.includes(";")&&ht.split(";").length>ht.split(",").length?";":",",wt=ht.split(mt).map(Rt=>Rt.replace(/^\uFEFF/,"").trim().toLowerCase()).findIndex(Rt=>Rt==="id"||Rt==="name"||Rt==="key"),Nt={};for(let Rt=1;Rt<yt.length;Rt++){const qt=String(yt[Rt]||"").split(mt).map(_t=>String(_t||"").trim()),jt=wt>=0?qt[wt]:qt[0],Lt=String(jt||"").trim();if(!Lt)continue;const Tt=Lt.match(/^\s*TX\s*(\d+)\s*[-_ ]\s*INV\s*(\d+)\s*$/i)||Lt.match(/TX\s*(\d+).*INV\s*(\d+)/i);if(!Tt)continue;const Ot=parseInt(Tt[1],10),It=parseInt(Tt[2],10);if(!Number.isFinite(Ot)||!Number.isFinite(It)||Ot<=0||It<=0)continue;const Mt=Number(Nt[Ot]||0);Nt[Ot]=Math.max(Mt,It)}Tn.current=Nt,Xe(Rt=>Rt+1),console.log("[LVTT] loaded lv_pulling.csv TX max",Nt)}catch(J){if(B)return;console.warn("[LVTT] failed to load lv_pulling.csv for SUB counters",J),Tn.current={},Xe(at=>at+1)}})(),()=>{B=!0}},[K]);const[In,mr]=ot.useState(()=>({})),ps=ot.useRef(In);ot.useEffect(()=>{ps.current=In||{}},[In]);const di=ot.useRef({}),lr=ot.useRef([]),yr=ot.useRef(null),er=ot.useRef({}),[ai,wr]=ot.useState(()=>new Set),ns=ot.useRef(ai);ot.useEffect(()=>{ns.current=ai||new Set},[ai]);const[Or,kr]=ot.useState(null),ms=ot.useRef(Or);ot.useEffect(()=>{ms.current=Or},[Or]);const[wo,Vs]=ot.useState(()=>({total:0,passed:0,failed:0})),[li,vi]=ot.useState(!1),gs=ot.useRef(null),ao=ot.useRef(null),[Rr,rs]=ot.useState(null),bs=ot.useCallback(()=>{try{const B=yr.current;B&&B.clearLayers()}catch{}er.current={}},[]),xi=B=>{const J=String(B||"").trim().toLowerCase();return J==="passed"||J==="pass"?"passed":J==="failed"||J==="fail"?"failed":null},Nn=ot.useCallback(B=>{const J=String(B??"").replace(/^\uFEFF/,"").trim();if(!J)return"";const lt=J.replace(/\s+/g,"").replace(/^['\"]+|['\"]+$/g,"").toLowerCase(),dt=lt.match(/^tx(\d+)[_\-]?inv(\d+)[_\-]?str(\d+)$/i)||lt.match(/tx(\d+).*inv(\d+).*str(\d+)/i);return dt?`tx${dt[1]}-inv${dt[2]}-str${dt[3]}`:Mn(J)},[]),ci=(B,J)=>{const at=String(J||"").trim();return at||String(B||"").toUpperCase().replace(/TX(\d+)INV(\d+)STR(\d+)/i,"TX$1-INV$2-STR$3")},jr=ot.useCallback((B,J="import")=>{try{kr(null),bs();const at=String(B||"").replace(/^\uFEFF/,""),lt=o1.parse(at,{header:!1,skipEmptyLines:!0,delimiter:""}),dt=Array.isArray(lt?.data)?lt.data:[];if(dt.length<=1){mr({}),Vs({total:0,passed:0,failed:0}),di.current={},lr.current=[],vi(!0),gs.current=null;try{localStorage.removeItem("cew:dcct:test_results_submitted")}catch(Tt){}rs(null),Zo(Tt=>Tt+1);return}const yt=(Array.isArray(dt[0])?dt[0]:[]).map(Tt=>String(Tt??"").trim().toLowerCase()),ht=yt.findIndex(Tt=>Tt==="id"||Tt.includes("id")),mt=yt.findIndex(Tt=>Tt==="remark"||Tt.includes("remark")||Tt.includes("status")||Tt.includes("result")),vt=yt.findIndex(Tt=>Tt.includes("insulation")&&(Tt.includes("(-")||Tt.includes("-)"))),wt=yt.findIndex(Tt=>Tt.includes("insulation")&&(Tt.includes("(+)")||Tt.includes("+)"))),Nt={},Rt=[];for(let Tt=1;Tt<dt.length;Tt++){const Ot=Array.isArray(dt[Tt])?dt[Tt]:[];if(Ot.length===0)continue;const It=ht>=0?Ot[ht]:Ot[0],Mt=mt>=0?Ot[mt]:Ot[Ot.length-1],_t=vt>=0?Ot[vt]:Ot.length>=2?Ot[1]:"",Et=wt>=0?Ot[wt]:Ot.length>=3?Ot[2]:"",Pt=Nn(It),Dt=String(It||"").trim(),Ft=String(Mt||"").trim();if(!Pt)continue;Rt.push({originalId:Dt,idNorm:Pt});const Xt=String(Et??"").trim(),Wt=String(_t??"").trim(),Vt=xi(Ft),Zt=Nt[Pt];if(!Zt)Nt[Pt]={plus:Xt,minus:Wt,status:Vt,remarkRaw:Ft,originalId:Dt};else{const Ut={...Zt,plus:Zt.plus&&String(Zt.plus).trim()!==""?Zt.plus:Xt,minus:Zt.minus&&String(Zt.minus).trim()!==""?Zt.minus:Wt,status:Zt.status!=null?Zt.status:Vt,remarkRaw:Zt.remarkRaw&&String(Zt.remarkRaw).trim()!==""?Zt.remarkRaw:Ft};Nt[Pt]=Ut}}const qt={};let jt=0,Lt=0;Object.keys(Nt||{}).forEach(Tt=>{const Ot=xi(Nt[Tt]?.status||Nt[Tt]?.remarkRaw);Ot==="passed"?(qt[Tt]="passed",jt++):Ot==="failed"&&(qt[Tt]="failed",Lt++)}),mr(qt),di.current=Nt,lr.current=Rt,Vs({total:Object.keys(Nt||{}).length,passed:jt,failed:Lt}),vi(!0),gs.current=null;try{localStorage.removeItem("cew:dcct:test_results_submitted")}catch(Tt){}rs(null),Zo(Tt=>Tt+1)}catch(at){console.error("Error parsing imported DCCT CSV:",at)}},[bs,Nn]),Yf=ot.useCallback(()=>{if(!Q||!li)return;const B={risoById:{...di.current||{}},rows:Array.isArray(lr.current)?lr.current:[],updatedAt:Date.now(),source:"submit"};gs.current=B;try{localStorage.setItem("cew:dcct:test_results_submitted",JSON.stringify(B))}catch{}vi(!1)},[Q,li]),al=ot.useCallback(()=>{try{if(li)return;let B=gs.current;if(!B)try{const jt=localStorage.getItem("cew:dcct:test_results_submitted");jt&&(B=JSON.parse(jt))}catch(jt){}const J=B&&typeof B=="object"?B.risoById||{}:{},at=B&&typeof B=="object"&&Array.isArray(B.rows)?B.rows:[],lt=ns.current||new Set,xt=["ID,Insulation Resistance (-),Insulation Resistance (+),remark"],yt=new Set;if(at.length>0)for(const jt of at){const Lt=String(jt?.originalId||"").trim(),Tt=jt?.idNorm?String(jt.idNorm):Nn(Lt);if(!Tt)continue;yt.add(Tt);const Ot=J[Tt]||{},It=Lt||ci(Tt,Ot.originalId),Mt=Ot.minus!=null&&String(Ot.minus).trim()!==""?String(Ot.minus).trim():"0",_t=Ot.plus!=null&&String(Ot.plus).trim()!==""?String(Ot.plus).trim():"0",Et=xi(Ot.status||Ot.remarkRaw),Pt=Et==="passed"?"PASSED":Et==="failed"?"FAILED":"";xt.push(`${It},${Mt},${_t},${Pt}`)}const ht=new Set([...Object.keys(J),...lt]),vt=Array.from(ht).filter(jt=>!yt.has(jt)).sort((jt,Lt)=>{const Tt=Dt=>{const Ft=String(Dt).match(/tx(\d+)-inv(\d+)-str(\d+)/i);return Ft?[parseInt(Ft[1],10),parseInt(Ft[2],10),parseInt(Ft[3],10)]:[0,0,0]},[Ot,It,Mt]=Tt(jt),[_t,Et,Pt]=Tt(Lt);return Ot!==_t?Ot-_t:It!==Et?It-Et:Mt-Pt});for(const jt of vt){const Lt=J[jt]||{},Tt=ci(jt,Lt.originalId),Ot=Lt.minus!=null&&String(Lt.minus).trim()!==""?String(Lt.minus).trim():"0",It=Lt.plus!=null&&String(Lt.plus).trim()!==""?String(Lt.plus).trim():"0",Mt=xi(Lt.status||Lt.remarkRaw),_t=Mt==="passed"?"PASSED":Mt==="failed"?"FAILED":"";xt.push(`${Tt},${Ot},${It},${_t}`)}const wt=xt.join(`
`),Nt=new Blob([wt],{type:"text/csv;charset=utf-8;"}),Rt=URL.createObjectURL(Nt),qt=document.createElement("a");qt.href=Rt,qt.download=`dc_riso_export_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(qt),qt.click(),document.body.removeChild(qt),URL.revokeObjectURL(Rt)}catch(B){console.error("Error exporting DCCT CSV:",B)}},[li,Nn]),So=ot.useCallback(()=>{try{if(li)return;const B=ms.current;if(!B)return;let J=gs.current;if(!J)try{const Tt=localStorage.getItem("cew:dcct:test_results_submitted");Tt&&(J=JSON.parse(Tt))}catch(Tt){}const at=J&&typeof J=="object"?J.risoById||{}:{},lt=J&&typeof J=="object"&&Array.isArray(J.rows)?J.rows:[],dt=ns.current||new Set,xt=new Set;B==="not_tested"?dt.forEach(Tt=>{const Ot=Nn(Tt);Ot&&!Object.prototype.hasOwnProperty.call(at,Ot)&&xt.add(Ot)}):Object.keys(at||{}).forEach(Tt=>{const Ot=at[Tt]||{},It=xi(Ot.status||Ot.remarkRaw);It&&It===B&&xt.add(String(Tt))});const ht=["ID,Insulation Resistance (-),Insulation Resistance (+),remark"],mt=new Set;if(lt.length>0)for(const Tt of lt){const Ot=String(Tt?.originalId||"").trim(),It=Tt?.idNorm?String(Tt.idNorm):Nn(Ot);if(!It||!xt.has(It))continue;mt.add(It);const Mt=at[It]||{},_t=Ot||ci(It,Mt.originalId),Et=Mt.minus!=null&&String(Mt.minus).trim()!==""?String(Mt.minus).trim():"0",Pt=Mt.plus!=null&&String(Mt.plus).trim()!==""?String(Mt.plus).trim():"0",Dt=xi(Mt.status||Mt.remarkRaw),Ft=Dt==="passed"?"PASSED":Dt==="failed"?"FAILED":"";ht.push(`${_t},${Et},${Pt},${Ft}`)}const wt=Array.from(xt).filter(Tt=>!mt.has(Tt)).sort((Tt,Ot)=>{const It=Xt=>{const Wt=String(Xt).match(/tx(\d+)-inv(\d+)-str(\d+)/i);return Wt?[parseInt(Wt[1],10),parseInt(Wt[2],10),parseInt(Wt[3],10)]:[0,0,0]},[Mt,_t,Et]=It(Tt),[Pt,Dt,Ft]=It(Ot);return Mt!==Pt?Mt-Pt:_t!==Dt?_t-Dt:Et-Ft});for(const Tt of wt){const Ot=at[Tt]||{},It=ci(Tt,Ot.originalId),Mt=Ot.minus!=null&&String(Ot.minus).trim()!==""?String(Ot.minus).trim():"0",_t=Ot.plus!=null&&String(Ot.plus).trim()!==""?String(Ot.plus).trim():"0",Et=xi(Ot.status||Ot.remarkRaw),Pt=Et==="passed"?"PASSED":Et==="failed"?"FAILED":"";ht.push(`${It},${Mt},${_t},${Pt}`)}const Nt=ht.join(`
`),Rt=new Blob([Nt],{type:"text/csv;charset=utf-8;"}),qt=URL.createObjectURL(Rt),jt=document.createElement("a");jt.href=qt;const Lt=String(B).toLowerCase();jt.download=`dc_riso_${Lt}_export_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(jt),jt.click(),document.body.removeChild(jt),URL.revokeObjectURL(qt)}catch(B){console.error("Error exporting filtered DCCT CSV:",B)}},[li,Nn]);ot.useEffect(()=>{bs(),rs(null)},[h?.key,bs]),ot.useEffect(()=>{const B=it.current||H;!B||B.size===0||O(J=>{let at=!1;if(B.forEach(dt=>{J.has(dt)||(at=!0)}),!at)return J;const lt=new Set(J);return B.forEach(dt=>lt.add(dt)),lt})},[M,H]);const[Du,is]=ot.useState(null),[Bi,ss]=ot.useState(()=>({}));ot.useEffect(()=>{qe.current=Bi||{}},[Bi]);const[Xr,_i]=ot.useState(null),[To,Es]=ot.useState(null),[Jh,zi]=ot.useState(()=>({total:0,fromRows:0,toRows:0})),[Fi,pa]=ot.useState(!1),[$s,Kn]=ot.useState(null),Bc=ot.useRef($s);ot.useEffect(()=>{Bc.current=$s},[$s]);const Ii=ot.useRef({}),Ns=ot.useRef(null),Zl=ot.useRef(null),[Ui,Lr]=ot.useState(null),[Bu,La]=ot.useState(()=>({total:0,passed:0,failed:0})),[Co,ll]=ot.useState(!1),[Go,ma]=ot.useState(null),lo=ot.useRef(Go);ot.useEffect(()=>{lo.current=Go},[Go]);const Pa=ot.useRef(null),zu=ot.useRef(null),ga=ot.useRef(null),[tp,Da]=ot.useState(0),[Kf,cl]=ot.useState(0),[ep,Jd]=ot.useState(()=>({url:"",textLen:0,rawLines:0,filteredLines:0,keys:0})),[Fu,Zo]=ot.useState(0),[ul,zc]=ot.useState([]),[ba,Xl]=ot.useState(()=>new Set),Yl=ot.useRef(ba);ot.useRef(new Set);const[ya,Sm]=ot.useState(""),fl=ot.useRef(ya),os=ot.useRef({}),Fc=ot.useRef({}),Ba=ot.useRef({}),[dl,za]=ot.useState(()=>new Set),ko=ot.useRef(dl),[Kl,Uu]=ot.useState(()=>new Set),Qf=ot.useRef(Kl),Ws=ot.useRef({}),as=ot.useRef(null),As=ot.useRef(null),Uc=ot.useRef({}),qs=ot.useRef(null),[Hu,Mo]=ot.useState(()=>new Set),Ql=ot.useRef(Hu),va=ot.useRef({}),Jl=ot.useRef(new Set),tc=ot.useRef(0),Jf=ot.useRef({}),[xa,hl]=ot.useState(0),Hc=ot.useRef(new Map),[ys,co]=ot.useState([]),[ls,Vc]=ot.useState([]),Eo=ot.useRef(ys),pl=ot.useRef(ls),Gs=ot.useRef(null),wi=ot.useRef(null),[Xo,ec]=ot.useState(()=>new Set),$c=ot.useRef(Xo);ot.useEffect(()=>{Kn(null),ma(null)},[h?.key]),ot.useEffect(()=>{(!Z||String(Sn||"termination")!=="testing")&&Kn(null)},[Z,Sn]),ot.useEffect(()=>{(!K||String(vn||"termination")!=="testing")&&ma(null)},[K,vn]);const[Wc,qc]=ot.useState(0),[_a,Vu]=ot.useState(0),cs=ot.useRef(new Map);ot.useRef([]);const[Oi,Fa]=ot.useState("lvBox"),Yo=ot.useRef(Oi);ot.useEffect(()=>{Yo.current=Oi},[Oi]);const[ml,Ko]=ot.useState(new Set),[No,nc]=ot.useState(new Set),td=ot.useRef(ml),Hi=ot.useRef(No);ot.useEffect(()=>{td.current=ml},[ml]),ot.useEffect(()=>{Hi.current=No},[No]),ot.useEffect(()=>{if(F)try{wa.current&&wa.current.setStyle(wa.current.options.style),Va.current&&Va.current.setStyle(Va.current.options.style)}catch{}},[F,ml,No]);const[Ua,th]=ot.useState(0),[Ha,np]=ot.useState(0),wa=ot.useRef(null),Va=ot.useRef(null),rc=ot.useRef(new Map),[gl,Zs]=ot.useState(0),[vs,Qo]=ot.useState(0),[Rs,Si]=ot.useState(0),[ic,Ao]=ot.useState(0),[$a,$u]=ot.useState(!1),[uo,bl]=ot.useState(!1),Jo=ot.useRef(!1);ot.useEffect(()=>{Jo.current=!!uo},[uo]);const[Vi,ed]=ot.useState("date"),[$i,Sa]=ot.useState("desc"),[sr,sc]=ot.useState(null),Wa=ot.useRef(sr);ot.useEffect(()=>{Wa.current=sr,window.__historySelectedRecordId=sr},[sr]);const[$r,oc]=ot.useState([]),Wu=ot.useRef([]);ot.useEffect(()=>{Wu.current=$r,window.__editingPolygonIds=$r},[$r]);const[eh,b]=ot.useState(0);ot.useEffect(()=>{window.__setEditingAmountState=b},[]);const[N,$]=ot.useState({x:0,y:0}),[nt,ft]=ot.useState(!1),At=ot.useRef({x:0,y:0}),oe=ot.useRef(null),[ce,Ne]=ot.useState(z);ot.useEffect(()=>{z&&!ce&&Ne(!0)},[z,ce]);const Ue=(()=>{const B=localStorage.getItem("cew_notes");return B?JSON.parse(B):[]})(),[on,On]=ot.useState(()=>({past:[],present:Ue,future:[]})),Hn=on.present,Wi=on.past.length>0,Ti=on.future.length>0,xs=50,Mr="cew_pl_contractors",Tr="cew_pl_punches",nr=["#ef4444","#f97316","#eab308","#3b82f6","#8b5cf6","#ec4899","#06b6d4","#78716c"],ta="#22c55e",[Wr,ac]=ot.useState(()=>{try{const B=localStorage.getItem(Mr);return B?JSON.parse(B):[]}catch{return[]}}),[us,ea]=ot.useState(()=>{try{const B=localStorage.getItem(Tr);if(!B)return[];const J=JSON.parse(B);let at=0;return J.forEach(lt=>{lt.punchNumber&&(at=Math.max(at,lt.punchNumber))}),J.forEach(lt=>{lt.punchNumber||(at++,lt.punchNumber=at)}),J}catch{return[]}}),hi="punch_list_counter",[Xs,qa]=ot.useState(()=>{try{const B=localStorage.getItem(Tr);if(B){const J=JSON.parse(B);return Math.max(0,...J.map(lt=>lt.punchNumber||0))}return 0}catch{return 0}}),yl=ot.useRef(Xs);ot.useEffect(()=>{yl.current=Xs},[Xs]),ot.useEffect(()=>{try{localStorage.setItem(hi,String(Xs))}catch{}},[Xs]);const[Is,Ga]=ot.useState(null),Ro=ot.useRef(null);ot.useEffect(()=>{Ro.current=Is},[Is]);const[Ys,na]=ot.useState(!1),Za=ot.useRef(!1),[nd,Gc]=ot.useState(""),[Zc,Xc]=ot.useState(nr[0]),[vl,Ni]=ot.useState(!1),qu=ot.useRef(!1),[Io,Gu]=ot.useState(null),[rp,Yc]=ot.useState(""),[Ai,xl]=ot.useState(""),lc=ot.useCallback(()=>{const B=new Set(Wr.map(J=>J.color));return nr.find(J=>!B.has(J))||nr[0]},[Wr]);ot.useEffect(()=>{Ys&&!Io&&Xc(lc())},[Ys,Io,lc]),ot.useEffect(()=>{Za.current=Ys},[Ys]);const[_l,Zu]=ot.useState(null),[Xu,wl]=ot.useState(!1),[qi,Sl]=ot.useState(null),[ip,cc]=ot.useState(""),[Xa,Tl]=ot.useState(null),[Cl,kl]=ot.useState(null),[Ml,Ya]=ot.useState(""),[Yu,Kc]=ot.useState(null),sp=ot.useRef(null),Ku=ot.useRef({}),uc=ot.useRef(null),[_s,Qu]=ot.useState(new Set),El=ot.useRef(null);ot.useEffect(()=>{try{localStorage.setItem(Mr,JSON.stringify(Wr))}catch{}},[Wr]),ot.useEffect(()=>{try{localStorage.setItem(Tr,JSON.stringify(us))}catch{}},[us]);const Ju=ot.useCallback((B,J)=>{if(!B?.trim())return null;const lt={id:`contractor_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,name:B.trim().toUpperCase(),color:J||nr[0]};return ac(dt=>[...dt,lt]),lt},[]),rd=ot.useCallback(B=>{ac(J=>J.filter(at=>at.id!==B))},[]),nh=ot.useCallback((B,J,at)=>{ac(lt=>lt.map(dt=>dt.id===B?{...dt,name:(J?.trim()||dt.name).toUpperCase(),color:at||dt.color}:dt))},[]),Ka=ot.useCallback(B=>Wr.find(J=>J.id===B)||null,[Wr]),rh=ot.useCallback((B,J=null)=>{const at=Ro.current;if(!at)return null;const lt=yl.current+1;yl.current=lt,qa(lt);const dt={id:`punch_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,lat:B.lat,lng:B.lng,contractorId:at,text:"",photoDataUrl:null,photoName:"",tableId:J||null,createdAt:new Date().toISOString(),punchNumber:lt};return ea(xt=>[...xt,dt]),dt},[]),op=ot.useCallback((B,J)=>{ea(at=>at.map(lt=>lt.id===B?{...lt,lat:J.lat,lng:J.lng}:lt))},[]),Nl=ot.useCallback(()=>{if(_s.size===0)return;const B=_s.size;window.confirm(`Are you sure you want to delete ${B} selected punch item${B>1?"s":""}?`)&&(ea(J=>J.filter(at=>!_s.has(at.id))),qi&&_s.has(qi.id)&&Sl(null),Qu(new Set))},[_s,qi]),Tm=ot.useCallback(()=>{qi&&(ea(B=>B.map(J=>J.id===qi.id?{...J,text:ip,contractorId:Xa,photoDataUrl:Cl,photoName:Ml}:J)),Sl(null),cc(""),Tl(null),kl(null),Ya(""))},[qi,ip,Xa,Cl,Ml]),fc=ot.useCallback(B=>{window.confirm("Are you sure you want to delete this punch item?")&&(ea(J=>J.filter(at=>at.id!==B)),qi?.id===B&&Sl(null))},[qi]),ap=ot.useCallback(B=>{window.confirm("Are you sure you want to mark this punch as completed?")&&(ea(J=>J.map(at=>at.id===B?{...at,completed:!0,completedAt:new Date().toISOString()}:at)),qi?.id===B&&(Sl(null),cc(""),Tl(null),kl(null),Ya("")))},[qi]),lp=ot.useCallback(B=>{window.confirm("Are you sure you want to mark this punch as incomplete?")&&ea(J=>J.map(at=>at.id===B?{...at,completed:!1,completedAt:null}:at))},[]),[Ci,Oo]=ot.useState(null),id=ot.useCallback(B=>{if(!B)return;if(!B.type?.startsWith("image/")){alert("Please select an image file.");return}const J=1.5*1024*1024;if(B.size>J){alert("Image is too large. Please select an image under 1.5MB.");return}const at=new FileReader;at.onload=()=>{const lt=typeof at.result=="string"?at.result:null;lt&&(kl(lt),Ya(B.name||""))},at.readAsDataURL(B)},[]),si=60,dc=ot.useRef({past:[],future:[]}),Al=ot.useRef(!1),Rl=ot.useRef([]),[cp,sd]=ot.useState(0),Ta=ot.useRef({past:[],future:[]}),hc=ot.useRef(!1),tf=ot.useRef([]),[ih,ef]=ot.useState(0),fs=ot.useRef({past:[],future:[]}),Os=ot.useRef(!1),jo=ot.useRef([]),[sh,od]=ot.useState(0),fo=ot.useRef({actions:[],index:-1}),[ra,ui]=ot.useState(0),Qa=ot.useRef({actions:[],index:-1}),[pc,Yn]=ot.useState(0),Pr=(B,J)=>{if(B===J)return!0;if(!B||!J||B.length!==J.length)return!1;for(let at=0;at<B.length;at++)if(B[at]!==J[at])return!1;return!0},qr=B=>(Array.isArray(B)?B:[]).map(at=>({...at,coords:Array.isArray(at?.coords)?at.coords.map(lt=>Array.isArray(lt)?[...lt]:lt):at?.coords})),nf=(B,J,at)=>{const lt=B.current;lt.past=[...lt.past,J].slice(-si),lt.future=[],at(dt=>dt+1)},Ca=B=>{On(J=>{const at=typeof B=="function"?B(J.present):B;return at===J.present?J:{past:[...J.past,J.present].slice(-xs),present:at,future:[]}})},mc=()=>{On(B=>{if(B.past.length===0)return B;const J=B.past[B.past.length-1];return{past:B.past.slice(0,-1),present:J,future:[B.present,...B.future].slice(0,xs)}})},ad=()=>{On(B=>{if(B.future.length===0)return B;const J=B.future[0];return{past:[...B.past,B.present].slice(-xs),present:J,future:B.future.slice(1)}})},ld=ot.useCallback((B,J,at)=>{if(!B)return;const lt=fo.current;lt.actions=lt.actions.slice(0,lt.index+1),lt.actions.push({invNorm:B,prev:J,next:at}),lt.actions.length>si&&(lt.actions=lt.actions.slice(-si)),lt.index=lt.actions.length-1,ui(dt=>dt+1)},[]),Qc=ot.useCallback((B,J,at)=>{if(!B)return;const lt=Qa.current;lt.actions=lt.actions.slice(0,lt.index+1),lt.actions.push({stationNorm:B,prev:J,next:at}),lt.actions.length>si&&(lt.actions=lt.actions.slice(-si)),lt.index=lt.actions.length-1,Yn(dt=>dt+1)},[]),[gc,Yr]=ot.useState(new Set),[ka,Il]=ot.useState(null),[up,Ol]=ot.useState(""),[Cm,Ja]=ot.useState(""),[rf,Ma]=ot.useState(null),[js,zr]=ot.useState(""),cd=ot.useRef(null),Jc=ot.useRef({}),jl=ot.useRef(!1),sf=ot.useRef(!1),Ks=()=>new Date().toISOString().split("T")[0],of=`cew:lv:inv_completed:${Ks()}`,[ki,Lo]=ot.useState(()=>new Set),tu=ot.useRef(ki),Ll=ot.useRef({}),oh=ot.useRef({}),dp=ot.useRef(new Map),hp=ot.useRef({}),ah=ot.useRef([]),lh=ot.useRef(new Set),pp=ot.useRef(new Set),ch=ot.useRef(new Set),uh=ot.useRef(new Set),fh=ot.useRef(new Set),[Pl,mp]=ot.useState(()=>new Set),bc=ot.useRef(Pl);ot.useEffect(()=>{tu.current=ki},[ki]),ot.useEffect(()=>{if(!w)return;const B=oh.current||{},J=new Map,at=(lt,dt)=>{const xt=Math.floor(dt/A0),yt=Math.floor(lt/A0);return`${xt}:${yt}`};Object.keys(B).forEach(lt=>{const dt=B[lt];if(!dt)return;const xt=at(dt.lat,dt.lng),yt=J.get(xt);yt?yt.push(lt):J.set(xt,[lt])}),dp.current=J},[w,ki]),ot.useEffect(()=>{bc.current=Pl},[Pl]),ot.useEffect(()=>{if(!w)return;const B=bc.current||Pl;!B||B.size===0||Lo(J=>{let at=!1;if(B.forEach(dt=>{J.has(dt)||(at=!0)}),!at)return J;const lt=new Set(J);return B.forEach(dt=>lt.add(dt)),lt})},[w,ki,Pl]),ot.useEffect(()=>{if(w){try{const B=localStorage.getItem(of),J=B?JSON.parse(B):[];Array.isArray(J)?Lo(new Set(J.map(Mn))):Lo(new Set)}catch{Lo(new Set)}O(new Set(it.current||[]))}},[w,of]),ot.useEffect(()=>{if(w)try{localStorage.setItem(of,JSON.stringify(Array.from(ki)))}catch{}},[w,of,ki]);const[Ir,ud]=ot.useState("tabletotable"),ws=ot.useRef(Ir);ot.useEffect(()=>{ws.current=Ir},[Ir]);const gp=Ks(),fd=`cew:ptep:tabletotable:${gp}`,eu=`cew:ptep:parameter:${gp}`,dd=`cew:ptep:parameter_parts:${gp}`,[Qs,Po]=ot.useState(()=>new Set),af=ot.useRef(Qs),[bp,ng]=ot.useState(0),dh=ot.useRef({}),yc=ot.useRef({past:[],future:[]}),hd=ot.useRef([]),lf=ot.useRef(!1),[rg,pd]=ot.useState(0),[Do,Bo]=ot.useState(()=>[]),nu=ot.useRef(Do),hh=ot.useRef(null),ru=ot.useRef(null),[km,yp]=ot.useState(0),md=ot.useRef({}),ph=ot.useRef({}),Dl=ot.useRef({past:[],future:[]}),cf=ot.useRef([]),uf=ot.useRef(!1),[vb,vp]=ot.useState(0),gd=`datp_completed_parts_${String(h?.key||"DATP")}`,[Js,zo]=ot.useState(()=>[]),vc=ot.useRef(Js),iu=ot.useRef(null),[ig,su]=ot.useState(0),mh=ot.useRef({}),ff=ot.useRef({}),gh=ot.useRef(null),Bl=ot.useRef({past:[],future:[]}),ou=ot.useRef([]),df=ot.useRef(!1),[sg,zl]=ot.useState(0),bd=`mvft_completed_parts_${String(h?.key||"MVFT")}`,yd=`mvft_selected_parts_${String(h?.key||"MVFT")}`,[ia,Fo]=ot.useState(()=>[]),hf=ot.useRef(ia),xc=ot.useRef(null),[Uo,vd]=ot.useState(()=>[]),pf=ot.useRef(Uo),xd=ot.useRef(null),Mi=ot.useRef(null),[Ss,xp]=ot.useState(0),bh=ot.useRef({}),yh=ot.useRef({}),vh=ot.useRef(null),Ea=ot.useRef({past:[],future:[]}),mf=ot.useRef([]),_c=ot.useRef(!1),[og,_p]=ot.useState(0);ot.useEffect(()=>{af.current=Qs},[Qs]),ot.useEffect(()=>{nu.current=Do},[Do]),ot.useEffect(()=>{vc.current=Js},[Js]),ot.useEffect(()=>{if(!R||df.current)return;const B=JSON.stringify(Js||[]),J=JSON.stringify(ou.current||[]);B!==J&&(Bl.current.past=[...Bl.current.past,ou.current||[]].slice(-si),Bl.current.future=[],ou.current=Js||[],zl(at=>at+1))},[R,Js]),ot.useEffect(()=>{if(!T||_c.current)return;const B=JSON.stringify(ia||[]),J=JSON.stringify(mf.current||[]);B!==J&&(Ea.current.past=[...Ea.current.past,mf.current||[]].slice(-si),Ea.current.future=[],mf.current=ia||[],_p(at=>at+1))},[T,ia]),ot.useEffect(()=>{if(!W||lf.current)return;const B=Array.from(Qs||new Set).sort(),J=hd.current||[];JSON.stringify(B)!==JSON.stringify(J)&&(yc.current.past=[...yc.current.past,J].slice(-si),yc.current.future=[],hd.current=B,pd(at=>at+1))},[W,Qs]),ot.useEffect(()=>{if(!W||uf.current)return;const B=JSON.stringify(Do||[]),J=JSON.stringify(cf.current||[]);B!==J&&(Dl.current.past=[...Dl.current.past,cf.current||[]].slice(-si),Dl.current.future=[],cf.current=Do||[],vp(at=>at+1))},[W,Do]),ot.useEffect(()=>{hf.current=ia},[ia]),ot.useEffect(()=>{pf.current=Uo},[Uo]),ot.useEffect(()=>{if(W)try{const B=localStorage.getItem(fd),J=B?JSON.parse(B):[];Array.isArray(J)?Po(new Set(J)):Po(new Set)}catch{Po(new Set)}},[W,fd]),ot.useEffect(()=>{if(W){try{const B=localStorage.getItem(dd),J=B?JSON.parse(B):[];if(Array.isArray(J)){Bo(J),ru.current=null;return}Bo([])}catch{Bo([])}try{const B=localStorage.getItem(eu),J=B?JSON.parse(B):[];Array.isArray(J)&&J.length>0?ru.current=new Set(J.map(String)):ru.current=null}catch{ru.current=null}}},[W,dd,eu]),ot.useEffect(()=>{if(!W)return;const B=ru.current;if(!B||B.size===0)return;const J=md.current||{},at=[];B.forEach(lt=>{const dt=J[String(lt)];if(!dt||typeof dt.getLatLngs!="function")return;mo(dt.getLatLngs()).forEach((yt,ht)=>{if(!Array.isArray(yt)||yt.length<2)return;const mt=io({L:Ce,lineLatLngs:yt}),vt=mt?.cum?.[mt.cum.length-1]||0;if(!(vt>0))return;const wt=Ia({lineLatLngs:yt,cumData:mt,startM:0,endM:vt});!wt||wt.length<2||at.push({id:`${String(lt)}:${ht}:0.00-${vt.toFixed(2)}`,uid:String(lt),lineIndex:ht,startM:0,endM:vt,coords:wt,meters:vt})})}),at.length>0&&Bo(at),ru.current=null},[W,km]),ot.useEffect(()=>{if(!W)return;try{localStorage.setItem(fd,JSON.stringify(Array.from(Qs)))}catch{}const B=dh.current||{},J=ws.current==="tabletotable";Object.keys(B).forEach(at=>{const lt=B[at];if(lt&&typeof lt.setStyle=="function"){const dt=Qs.has(at);lt.setStyle({color:dt?"#22c55e":"#3b82f6",weight:2.2,opacity:J?1:0,dashArray:dt?null:"6 4",lineCap:"round",lineJoin:"round"}),lt.options&&(lt.options.interactive=J);try{lt._path&&(lt._path.style.pointerEvents=J?"auto":"none")}catch{}}})},[W,fd,Qs,Ir]),ot.useEffect(()=>{if(!W)return;try{localStorage.setItem(dd,JSON.stringify(Do||[]))}catch{}const B=md.current||{},J=ws.current==="parameter";Object.keys(B).forEach(at=>{const lt=B[at];if(lt&&typeof lt.setStyle=="function"){lt.setStyle({color:"#facc15",weight:1.5,opacity:J?1:0}),lt.options&&(lt.options.interactive=J);try{lt._path&&(lt._path.style.pointerEvents=J?"auto":"none")}catch{}}})},[W,dd,Do,Ir]),ot.useEffect(()=>{if(!W)return;const B=ge.current;if(B)try{hh.current||(hh.current=Ce.layerGroup().addTo(B));const J=hh.current;if(J.clearLayers(),ws.current!=="parameter")return;(nu.current||[]).forEach(lt=>{const dt=lt?.coords;if(!Array.isArray(dt)||dt.length<2)return;const xt=Ce.polyline(dt,{color:"#22c55e",weight:3,opacity:1,interactive:!1,pane:"ptepParameterSelectedPane"});J.addLayer(xt)})}catch{}},[W,Ir,Do]),ot.useEffect(()=>{if(!W)return;const B=ge.current;if(B)try{const J=B.getPane("ptepTableToTablePane"),at=B.getPane("ptepParameterPane");J&&(J.style.pointerEvents=Ir==="tabletotable"?"auto":"none",J.style.opacity=Ir==="tabletotable"?"1":"0"),at&&(at.style.pointerEvents=Ir==="parameter"?"auto":"none",at.style.opacity=Ir==="parameter"?"1":"0")}catch{}},[W,Ir]),ot.useEffect(()=>{if(R)try{const B=localStorage.getItem(gd),J=B?JSON.parse(B):[];Array.isArray(J)?zo(J):zo([])}catch{zo([])}},[R,gd]),ot.useEffect(()=>{if(R)try{localStorage.setItem(gd,JSON.stringify(Js||[]))}catch{}},[R,gd,Js]),ot.useEffect(()=>{if(T)try{const B=localStorage.getItem(bd),J=B?JSON.parse(B):[];vd(Array.isArray(J)?J:[])}catch{vd([])}},[T,bd]),ot.useEffect(()=>{if(T)try{const B=localStorage.getItem(yd),J=B?JSON.parse(B):[];Fo(Array.isArray(J)?J:[])}catch{Fo([])}},[T,yd]),ot.useEffect(()=>{if(T)try{localStorage.setItem(bd,JSON.stringify(Uo||[]))}catch{}},[T,bd,Uo]),ot.useEffect(()=>{if(T)try{localStorage.setItem(yd,JSON.stringify(ia||[]))}catch{}},[T,yd,ia]),ot.useEffect(()=>{if(!R)return;const B=ge.current;if(B)try{iu.current||(iu.current=Ce.layerGroup().addTo(B));const J=iu.current;J.clearLayers(),(vc.current||[]).forEach(lt=>{const dt=lt?.coords;if(!Array.isArray(dt)||dt.length<2)return;const xt=Ce.polyline(dt,{color:U,weight:2.5,opacity:1,interactive:!1,pane:"datpTrenchSelectedPane"});J.addLayer(xt)})}catch{}},[R,Js,U]),ot.useEffect(()=>{if(!T)return;const B=ge.current;if(B)try{xd.current||(xd.current=Ce.layerGroup({pane:"mvftTrenchCommittedPane"}).addTo(B)),xc.current||(xc.current=Ce.layerGroup({pane:"mvftTrenchSelectedPane"}).addTo(B));const J=xd.current,at=xc.current;J.clearLayers(),at.clearLayers(),(pf.current||[]).forEach(xt=>{if(!xt?.coords?.length)return;const yt=Ce.polyline(xt.coords,{color:"#00ff00",weight:2.2,opacity:1,interactive:!1,pane:"mvftTrenchCommittedPane"});J.addLayer(yt)}),(hf.current||[]).forEach(xt=>{if(!xt?.coords?.length)return;const yt=Ce.polyline(xt.coords,{color:"#00ff00",weight:2.2,opacity:1,interactive:!1,pane:"mvftTrenchSelectedPane"});at.addLayer(yt)})}catch{}},[T,ia,Uo,U]);const _d=ot.useMemo(()=>{const B=Js||[];let J=0;for(const at of B){const lt=Number(at?.meters);Number.isFinite(lt)&&lt>0&&(J+=lt)}return J},[Js]),wd=ot.useMemo(()=>{const B=ia||[];let J=0;for(const at of B){const lt=Number(at?.meters);Number.isFinite(lt)&&lt>0&&(J+=lt)}return J},[ia]),wp=ot.useMemo(()=>{const B=Uo||[];let J=0;for(const at of B){const lt=Number(at?.meters);Number.isFinite(lt)&&lt>0&&(J+=lt)}return J},[Uo]),Mm=ot.useMemo(()=>wd+wp,[wd,wp]),xh=ot.useMemo(()=>{const B=Do||[];let J=0;for(const at of B){const lt=Number(at?.meters);Number.isFinite(lt)&&lt>0&&(J+=lt)}return J},[Do]),Ri={NONE:null,MC4:"mc4",TERMINATED:"terminated"},[ji,Em]=ot.useState("mc4"),wc=ot.useRef(ji),Sp=ot.useRef("termination_panel");ot.useEffect(()=>{wc.current=ji,(ji==="termination_panel"||ji==="termination_inv")&&(Sp.current=ji)},[ji]);const[Sd,_h]=ot.useState(""),wh=ot.useRef(null),au=ot.useCallback(B=>{if(B){_h(B);try{wh.current&&clearTimeout(wh.current)}catch{}wh.current=setTimeout(()=>_h(""),2200)}},[]),Sh=Ks(),sa=`cew:mc4:panel_states:${Sh}`,Td=`cew:mc4:submitted_counts:${Sh}`,Th=`cew:mc4:inv_termination:${Sh}`,[Na,Ts]=ot.useState(()=>({})),gf=ot.useRef(Na),[Cd,bf]=ot.useState(null),[lu,Kr]=ot.useState(()=>({mc4:0,termination_panel:0,termination_inv:0})),yf=ot.useRef(lu),Ch=ot.useRef({}),[cu,Sc]=ot.useState(()=>({})),to=ot.useRef(cu),[Tc,vf]=ot.useState(null),kd=ot.useRef(null),Ls=ot.useRef({actions:[],index:-1}),[Tp,uu]=ot.useState(0),xf=ot.useRef(null);ot.useEffect(()=>{gf.current=Na},[Na]),ot.useEffect(()=>{yf.current=lu},[lu]),ot.useEffect(()=>{to.current=cu},[cu]);const[Li,Gi]=ot.useState(()=>{try{const B=localStorage.getItem("cew:dctt:submode");return String(B||"").toLowerCase()==="testing"?"testing":"termination"}catch{return"termination"}}),ds=ot.useRef(Li);ot.useEffect(()=>{ds.current=Li;try{localStorage.setItem("cew:dctt:submode",String(Li||"termination"))}catch{}},[Li]);const[Zi,Ps]=ot.useState("termination_panel"),Fr=ot.useRef(Zi);ot.useEffect(()=>{Fr.current=Zi},[Zi]);const[Nm,Cp]=ot.useState(""),Pi=ot.useRef(null),kh=ot.useCallback(B=>{if(B){Cp(B);try{Pi.current&&clearTimeout(Pi.current)}catch{}Pi.current=setTimeout(()=>Cp(""),2200)}},[]),_f=Ks(),Md=`cew:dctt:panel_states:${_f}`,ni=`cew:dctt:submitted_counts:${_f}`,Cs=`cew:dctt:inv_termination:${_f}`,[Xi,oa]=ot.useState(()=>({})),fu=ot.useRef(Xi),[Ed,kp]=ot.useState(null),[wf,Ds]=ot.useState(()=>({termination_panel:0,termination_inv:0})),Bs=ot.useRef(wf),Cc=ot.useRef({}),[Qr,Nd]=ot.useState(()=>({})),zs=ot.useRef(Qr),[Ho,Vo]=ot.useState(null),Mp=ot.useRef(null),tl=ot.useRef({actions:[],index:-1}),[$o,du]=ot.useState(0),el=ot.useRef(null),hu=ot.useRef({}),aa=ot.useRef(new Set),[nl,Sf]=ot.useState(()=>({})),Ep=ot.useRef(nl);ot.useEffect(()=>{Ep.current=nl||{}},[nl]);const Yi=ot.useRef({}),Aa=ot.useRef([]),[kc,Am]=ot.useState(()=>new Set),Rm=ot.useRef(kc);ot.useEffect(()=>{Rm.current=kc||new Set},[kc]);const[Tf,cr]=ot.useState(null),Ur=ot.useRef(Tf);ot.useEffect(()=>{Ur.current=Tf},[Tf]);const[vr,ur]=ot.useState(()=>({total:0,passed:0,failed:0})),[gr,Ki]=ot.useState(!1),eo=ot.useRef(null),pu=ot.useRef(null),[Qi,Fs]=ot.useState(null),pi=ot.useRef(Qi);ot.useEffect(()=>{pi.current=Qi},[Qi]);const Mc=ot.useRef(null),mu=ot.useRef({});ot.useEffect(()=>{fu.current=Xi},[Xi]),ot.useEffect(()=>{Bs.current=wf},[wf]),ot.useEffect(()=>{zs.current=Qr},[Qr]);const Mh=ot.useCallback(()=>{try{const B=Mc.current;B&&B.clearLayers()}catch{}mu.current={}},[]),Ei=B=>{const J=String(B||"").trim().toLowerCase();return J==="passed"||J==="pass"?"passed":J==="failed"||J==="fail"?"failed":null},no=ot.useCallback(B=>{const J=String(B??"").replace(/^\uFEFF/,"").trim();if(!J)return"";const lt=J.replace(/\s+/g,"").replace(/^['\"]+|['\"]+$/g,"").toLowerCase(),dt=lt.match(/^tx(\d+)[_\-]?inv(\d+)[_\-]?str(\d+)$/i)||lt.match(/tx(\d+).*inv(\d+).*str(\d+)/i);return dt?`tx${dt[1]}-inv${dt[2]}-str${dt[3]}`:Mn(J)},[]),rl=(B,J)=>{const at=String(J||"").trim();return at||String(B||"").toUpperCase().replace(/TX(\d+)INV(\d+)STR(\d+)/i,"TX$1-INV$2-STR$3")},Us=ot.useCallback((B,J="import")=>{try{cr(null),Mh();const at=String(B||"").replace(/^\uFEFF/,""),lt=o1.parse(at,{header:!1,skipEmptyLines:!0,delimiter:""});if(!lt.data||lt.data.length<2){if(console.warn("DCTT Testing CSV has no data rows"),Sf({}),Yi.current={},Aa.current=[],String(J||"")!=="csv_load"){Ki(!0),eo.current=null;try{localStorage.removeItem("cew:dctt:test_results_submitted")}catch(_t){}Fs(null),Zo(_t=>_t+1)}return}const xt=(lt.data[0]||[]).map(_t=>String(_t||"").trim().toLowerCase().replace(/[_\s\-]+/g,"")),yt=xt.findIndex(_t=>_t==="id"||_t==="stringid"||_t==="string"),ht=xt.findIndex(_t=>_t.includes("insulationresistance")&&(_t.includes("-")||_t.includes("minus")||_t.includes("("))),mt=xt.findIndex(_t=>_t.includes("insulationresistance")&&(_t.includes("+")||_t.includes("plus")||_t.includes("("))),vt=xt.findIndex(_t=>_t==="remark"||_t==="remarks"||_t==="status"||_t==="result"),wt=xt.length>ht&&ht>=0?ht+1:-1,Nt=ht>=0?ht:1,Rt=mt>=0?mt:wt>=0?wt:2,qt=vt>=0?vt:3,jt=yt>=0?yt:0,Lt={},Tt=[];for(let _t=1;_t<lt.data.length;_t++){const Et=lt.data[_t];if(!Et)continue;const Pt=String(Et[jt]??"").trim();if(!Pt)continue;const Dt=no(Pt);if(!Dt)continue;Tt.push({originalId:Pt,idNorm:Dt});const Ft=String(Et[qt]??"").trim(),Xt=String(Et[Nt]??"").trim(),Wt=String(Et[Rt]??"").trim();let Vt=Ei(Ft);if(!Vt){const Ut=parseFloat(Xt),$t=parseFloat(Wt);Number.isFinite(Ut)&&Number.isFinite($t)&&(Vt=Ut>0&&$t>0?"passed":"failed")}const Zt=Lt[Dt];Zt?Lt[Dt]={...Zt,plus:Zt.plus&&String(Zt.plus).trim()!==""?Zt.plus:Wt,minus:Zt.minus&&String(Zt.minus).trim()!==""?Zt.minus:Xt,status:Zt.status!=null?Zt.status:Vt,remarkRaw:Zt.remarkRaw&&String(Zt.remarkRaw).trim()!==""?Zt.remarkRaw:Ft}:Lt[Dt]={originalId:Pt,plus:Wt,minus:Xt,status:Vt,remarkRaw:Ft}}const Ot={};let It=0,Mt=0;if(Object.keys(Lt||{}).forEach(_t=>{const Et=Ei(Lt[_t]?.status||Lt[_t]?.remarkRaw);Et==="passed"?(Ot[_t]="passed",It++):Et==="failed"&&(Ot[_t]="failed",Mt++)}),Sf(Ot),Yi.current=Lt,Aa.current=Tt,ur({total:Object.keys(Lt||{}).length,passed:It,failed:Mt}),Fs(null),Zo(_t=>_t+1),String(J||"")!=="csv_load"){Ki(!0),eo.current=null;try{localStorage.removeItem("cew:dctt:test_results_submitted")}catch(_t){}}}catch(at){console.error("Error parsing DCTT Testing CSV:",at)}},[Mh,no]),Np=ot.useCallback(()=>{if(!C||String(ds.current||"termination")!=="testing"||!gr)return;const B={risoById:{...Yi.current||{}},rows:Array.isArray(Aa.current)?Aa.current:[],updatedAt:Date.now(),source:"submit"};eo.current=B;try{localStorage.setItem("cew:dctt:test_results_submitted",JSON.stringify(B))}catch{}Ki(!1)},[C,gr]),Eh=ot.useCallback(()=>{try{if(gr)return;let B=eo.current;if(!B)try{const Tt=localStorage.getItem("cew:dctt:test_results_submitted");Tt&&(B=JSON.parse(Tt))}catch(Tt){}const J=Yi.current||{},at=Array.isArray(Aa.current)?Aa.current:[],lt=B&&typeof B=="object"&&B.risoById&&typeof B.risoById=="object"?B.risoById||{}:J,dt=B&&typeof B=="object"&&Array.isArray(B.rows)&&B.rows.length>0?B.rows:at,xt=Rm.current||new Set,ht=["ID,Insulation Resistance (-),Insulation Resistance (+),remark"],mt=new Set;if(dt.length>0)for(const Tt of dt){const Ot=String(Tt?.originalId||"").trim(),It=Tt?.idNorm?String(Tt.idNorm):no(Ot);if(!It)continue;mt.add(It);const Mt=lt[It]||{},_t=Ot||rl(It,Mt.originalId),Et=Mt.minus!=null&&String(Mt.minus).trim()!==""?String(Mt.minus).trim():"0",Pt=Mt.plus!=null&&String(Mt.plus).trim()!==""?String(Mt.plus).trim():"0",Dt=Ei(Mt.status||Mt.remarkRaw),Ft=Dt==="passed"?"PASSED":Dt==="failed"?"FAILED":"";ht.push(`${_t},${Et},${Pt},${Ft}`)}const vt=new Set([...Object.keys(lt),...xt]),Nt=Array.from(vt).filter(Tt=>!mt.has(Tt)).sort((Tt,Ot)=>{const It=Xt=>{const Wt=String(Xt).match(/tx(\d+)-inv(\d+)-str(\d+)/i);return Wt?[parseInt(Wt[1],10),parseInt(Wt[2],10),parseInt(Wt[3],10)]:[0,0,0]},[Mt,_t,Et]=It(Tt),[Pt,Dt,Ft]=It(Ot);return Mt!==Pt?Mt-Pt:_t!==Dt?_t-Dt:Et-Ft});for(const Tt of Nt){const Ot=lt[Tt]||{},It=rl(Tt,Ot.originalId),Mt=Ot.minus!=null&&String(Ot.minus).trim()!==""?String(Ot.minus).trim():"0",_t=Ot.plus!=null&&String(Ot.plus).trim()!==""?String(Ot.plus).trim():"0",Et=Ei(Ot.status||Ot.remarkRaw),Pt=Et==="passed"?"PASSED":Et==="failed"?"FAILED":"";ht.push(`${It},${Mt},${_t},${Pt}`)}const Rt=ht.join(`
`),qt=new Blob([Rt],{type:"text/csv;charset=utf-8;"}),jt=URL.createObjectURL(qt),Lt=document.createElement("a");Lt.href=jt,Lt.download=`dctt_test_export_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(Lt),Lt.click(),document.body.removeChild(Lt),URL.revokeObjectURL(jt)}catch(B){console.error("Error exporting DCTT Testing CSV:",B)}},[gr,no]);ot.useEffect(()=>{if(!C)return;let B=!1;return(async()=>{try{try{const ht=localStorage.getItem("cew:dctt:test_results_submitted");if(ht){const mt=JSON.parse(ht),vt=mt?.risoById&&typeof mt.risoById=="object"?mt.risoById:{},wt={};Object.keys(vt||{}).forEach(Ot=>{const It=vt[Ot]||{},Mt=no(It?.originalId||Ot);Mt&&(wt[Mt]={...It,originalId:It?.originalId!=null?It.originalId:String(Ot||"").trim()})});const Rt=(Array.isArray(mt?.rows)?mt.rows:[]).map(Ot=>{const It=String(Ot?.originalId||"").trim(),Mt=no(It||Ot?.idNorm);return Mt?{originalId:It,idNorm:Mt}:null}).filter(Boolean),qt={};let jt=0,Lt=0;Object.keys(wt||{}).forEach(Ot=>{const It=Ei(wt[Ot]?.status||wt[Ot]?.remarkRaw);It==="passed"?(qt[Ot]="passed",jt++):It==="failed"&&(qt[Ot]="failed",Lt++)}),Yi.current=wt,Aa.current=Rt,Sf(qt),ur({total:Object.keys(wt||{}).length,passed:jt,failed:Lt});const Tt={...mt&&typeof mt=="object"?mt:{},risoById:wt,rows:Rt};eo.current=Tt;try{localStorage.setItem("cew:dctt:test_results_submitted",JSON.stringify(Tt))}catch(Ot){}Ki(!1),Fs(null),Zo(Ot=>Ot+1);return}}catch(ht){}const at=await fetch("/DC_TERMINATION_and_TESTING PROGRESS/dc_riso.csv");if(B)return;if(!at.ok){Yi.current={},Aa.current=[],Sf({}),ur({total:0,passed:0,failed:0});return}const lt=await at.text();if(B)return;Us(lt,"csv_load");const dt=Yi.current||{},xt=Array.isArray(Aa.current)?Aa.current:[],yt={risoById:{...dt||{}},rows:xt,updatedAt:Date.now(),source:"default"};eo.current=yt;try{localStorage.setItem("cew:dctt:test_results_submitted",JSON.stringify(yt))}catch(ht){}Ki(!1)}catch(J){console.error("Error loading DCTT Testing CSV:",J)}})(),()=>{B=!0}},[C,Us]),ot.useEffect(()=>{if(!C||String(ds.current||"termination")!=="testing")return;const B=J=>{gr&&(J.preventDefault(),J.returnValue="")};return window.addEventListener("beforeunload",B),()=>window.removeEventListener("beforeunload",B)},[C,gr]);const gu=ot.useCallback(B=>{const J=fu.current?.[B];return J&&typeof J=="object"?{left:J.left??null,right:J.right??null}:{left:null,right:null}},[]),Jr={NONE:null,TERMINATED:"terminated"};ot.useCallback(B=>B==null?Jr.TERMINATED:B===Jr.TERMINATED?Jr.NONE:B,[]),ot.useCallback(B=>B==null||B===Jr.TERMINATED?Jr.TERMINATED:B,[]);const bu=ot.useCallback((B,J)=>{B?.changes?.length&&oa(at=>{const lt={...at||{}};return B.changes.forEach(dt=>{if(!dt?.id||(aa.current||new Set).has(String(dt.id)))return;const yt=J==="undo"?dt.prev:dt.next;!yt||yt.left==null&&yt.right==null?delete lt[dt.id]:lt[dt.id]={left:yt.left??null,right:yt.right??null}}),lt})},[]),Wo=ot.useCallback(B=>{if(!B?.length)return;const J=tl.current,at=J.actions.slice(0,J.index+1);at.push({changes:B,ts:Date.now()}),J.actions=at.slice(-80),J.index=J.actions.length-1,du(lt=>lt+1)},[]),Ji=C&&tl.current.index>=0,Ec=C&&tl.current.index<tl.current.actions.length-1,yu=ot.useCallback(()=>{const B=tl.current;if(B.index<0)return;const J=B.actions[B.index];bu(J,"undo"),B.index-=1,du(at=>at+1)},[bu]),il=ot.useCallback(()=>{const B=tl.current;if(B.index>=B.actions.length-1)return;const J=B.actions[B.index+1];bu(J,"redo"),B.index+=1,du(at=>at+1)},[bu]),vu=ot.useCallback(B=>{const J=gf.current?.[B];return J&&typeof J=="object"?{left:J.left??null,right:J.right??null}:{left:null,right:null}},[]);ot.useCallback(B=>B==null?Ri.MC4:B===Ri.MC4?Ri.NONE:B,[]),ot.useCallback(B=>B??Ri.MC4,[]);const Cf=ot.useCallback((B,J)=>{B?.changes?.length&&Ts(at=>{const lt={...at||{}};return B.changes.forEach(dt=>{if(!dt?.id)return;const xt=J==="undo"?dt.prev:dt.next;!xt||xt.left==null&&xt.right==null?delete lt[dt.id]:lt[dt.id]={left:xt.left??null,right:xt.right??null}}),lt})},[]),kf=ot.useCallback(B=>{if(!B?.length)return;const J=Ls.current,at=J.actions.slice(0,J.index+1);at.push({changes:B,ts:Date.now()}),J.actions=at.slice(-80),J.index=J.actions.length-1,uu(lt=>lt+1)},[]),Ad=D&&Ls.current.index>=0,Ap=D&&Ls.current.index<Ls.current.actions.length-1,ho=ot.useCallback(()=>{const B=Ls.current;if(B.index<0)return;const J=B.actions[B.index];Cf(J,"undo"),B.index-=1,uu(at=>at+1)},[Cf]),Rp=ot.useCallback(()=>{const B=Ls.current;if(B.index>=B.actions.length-1)return;const J=B.actions[B.index+1];Cf(J,"redo"),B.index+=1,uu(at=>at+1)},[Cf]);ot.useEffect(()=>{dc.current={past:[],future:[]},Rl.current=Array.from(M||[]).sort(),sd(B=>B+1),Ta.current={past:[],future:[]},tf.current=Array.from(ki||[]).sort(),ef(B=>B+1),fs.current={past:[],future:[]},jo.current=qr(ys||[]),od(B=>B+1),fo.current={actions:[],index:-1},ui(B=>B+1),Qa.current={actions:[],index:-1},Yn(B=>B+1),tl.current={actions:[],index:-1},du(B=>B+1)},[h?.key]),ot.useEffect(()=>{if(Al.current)return;const B=Array.from(M||[]).sort(),J=Rl.current||[];Pr(J,B)||(nf(dc,J,sd),Rl.current=B)},[M]),ot.useEffect(()=>{if(!w||hc.current)return;const B=Array.from(ki||[]).sort(),J=tf.current||[];Pr(J,B)||(nf(Ta,J,ef),tf.current=B)},[w,ki]),ot.useEffect(()=>{if(!I||Os.current)return;const B=(ys||[]).map(at=>String(at?.id||"")).filter(Boolean),J=(jo.current||[]).map(at=>String(at?.id||"")).filter(Boolean);Pr(J,B)||(nf(fs,qr(jo.current||[]),od),jo.current=qr(ys||[]))},[I,ys]);const ts=B=>{try{queueMicrotask(()=>{B.current=!1})}catch{setTimeout(()=>{B.current=!1},0)}},Im=cp>=0&&dc.current.past.length>0,Om=cp>=0&&dc.current.future.length>0,jm=ot.useCallback(()=>{const B=dc.current;if(!B.past.length)return;const J=Array.from(P.current||[]).sort(),at=B.past[B.past.length-1]||[];B.past=B.past.slice(0,-1),B.future=[J,...B.future].slice(0,si),Al.current=!0,Rl.current=at,O(new Set(at)),sd(lt=>lt+1),ts(Al)},[O]),Fl=ot.useCallback(()=>{const B=dc.current;if(!B.future.length)return;const J=Array.from(P.current||[]).sort(),at=B.future[0]||[];B.future=B.future.slice(1),B.past=[...B.past,J].slice(-si),Al.current=!0,Rl.current=at,O(new Set(at)),sd(lt=>lt+1),ts(Al)},[O]),Nh=ih>=0&&Ta.current.past.length>0,Ip=ih>=0&&Ta.current.future.length>0,xu=ot.useCallback(()=>{const B=Ta.current;if(!B.past.length)return;const J=Array.from(tu.current||[]).sort(),at=B.past[B.past.length-1]||[];B.past=B.past.slice(0,-1),B.future=[J,...B.future].slice(0,si),hc.current=!0,tf.current=at,Lo(new Set(at)),ef(lt=>lt+1),ts(hc)},[Lo]),Op=ot.useCallback(()=>{const B=Ta.current;if(!B.future.length)return;const J=Array.from(tu.current||[]).sort(),at=B.future[0]||[];B.future=B.future.slice(1),B.past=[...B.past,J].slice(-si),hc.current=!0,tf.current=at,Lo(new Set(at)),ef(lt=>lt+1),ts(hc)},[Lo]),Lm=sh>=0&&fs.current.past.length>0,Pm=sh>=0&&fs.current.future.length>0,jp=ot.useCallback(()=>{const B=fs.current;if(!B.past.length)return;const J=qr(Eo.current||[]),at=B.past[B.past.length-1]||[];B.past=B.past.slice(0,-1),B.future=[J,...B.future].slice(0,si),Os.current=!0,jo.current=qr(at),co(qr(at)),od(lt=>lt+1),ts(Os)},[co]),Rd=ot.useCallback(()=>{const B=fs.current;if(!B.future.length)return;const J=qr(Eo.current||[]),at=B.future[0]||[];B.future=B.future.slice(1),B.past=[...B.past,J].slice(-si),Os.current=!0,jo.current=qr(at),co(qr(at)),od(lt=>lt+1),ts(Os)},[co]),Lp=K&&fo.current.index>=0,ag=K&&fo.current.index<fo.current.actions.length-1,Dm=ot.useCallback(()=>{const B=fo.current;if(B.index<0)return;const J=B.actions[B.index];B.index-=1,xn(at=>{const lt=at&&typeof at=="object"?{...at}:{};return lt[J.invNorm]=Math.max(0,Math.min(3,Number(J.prev??0))),lt}),ui(at=>at+1)},[xn]),Bm=ot.useCallback(()=>{const B=fo.current;if(B.index>=B.actions.length-1)return;const J=B.actions[B.index+1];B.index+=1,xn(at=>{const lt=at&&typeof at=="object"?{...at}:{};return lt[J.invNorm]=Math.max(0,Math.min(3,Number(J.next??0))),lt}),ui(at=>at+1)},[xn]),zm=Z&&Qa.current.index>=0,Fm=Z&&Qa.current.index<Qa.current.actions.length-1,_u=ot.useCallback(()=>{const B=Qa.current;if(B.index<0)return;const J=B.actions[B.index];B.index-=1,ss(at=>{const lt=at&&typeof at=="object"?{...at}:{};return lt[J.stationNorm]=bn(J.stationNorm,J.prev??0),lt}),Yn(at=>at+1)},[ss]),Id=ot.useCallback(()=>{const B=Qa.current;if(B.index>=B.actions.length-1)return;const J=B.actions[B.index+1];B.index+=1,ss(at=>{const lt=at&&typeof at=="object"?{...at}:{};return lt[J.stationNorm]=bn(J.stationNorm,J.next??0),lt}),Yn(at=>at+1)},[ss]),Um=W&&Ir==="tabletotable"&&yc.current.past.length>0,Hm=W&&Ir==="tabletotable"&&yc.current.future.length>0,Pp=ot.useCallback(()=>{const B=yc.current;if(!B.past.length)return;const J=Array.from(af.current||new Set).sort(),at=B.past[B.past.length-1]||[];B.past=B.past.slice(0,-1),B.future=[J,...B.future].slice(0,si),lf.current=!0,hd.current=at,Po(new Set(at)),pd(lt=>lt+1),setTimeout(()=>{lf.current=!1},0)},[Po]),Dp=ot.useCallback(()=>{const B=yc.current;if(!B.future.length)return;const J=Array.from(af.current||new Set).sort(),at=B.future[0]||[];B.future=B.future.slice(1),B.past=[...B.past,J].slice(-si),lf.current=!0,hd.current=at,Po(new Set(at)),pd(lt=>lt+1),setTimeout(()=>{lf.current=!1},0)},[Po]),Vm=W&&Ir==="parameter"&&Dl.current.past.length>0,$m=W&&Ir==="parameter"&&Dl.current.future.length>0,Od=ot.useCallback(()=>{const B=Dl.current;if(!B.past.length)return;const J=nu.current||[],at=B.past[B.past.length-1]||[];B.past=B.past.slice(0,-1),B.future=[J,...B.future].slice(0,si),uf.current=!0,cf.current=at,Bo(at),vp(lt=>lt+1),setTimeout(()=>{uf.current=!1},0)},[Bo]),Bp=ot.useCallback(()=>{const B=Dl.current;if(!B.future.length)return;const J=nu.current||[],at=B.future[0]||[];B.future=B.future.slice(1),B.past=[...B.past,J].slice(-si),uf.current=!0,cf.current=at,Bo(at),vp(lt=>lt+1),setTimeout(()=>{uf.current=!1},0)},[Bo]),Wm=R&&Bl.current.past.length>0,Hr=R&&Bl.current.future.length>0,Ah=ot.useCallback(()=>{const B=Bl.current;if(!B.past.length)return;const J=vc.current||[],at=B.past[B.past.length-1]||[];B.past=B.past.slice(0,-1),B.future=[J,...B.future].slice(0,si),df.current=!0,ou.current=at,zo(at),zl(lt=>lt+1),setTimeout(()=>{df.current=!1},0)},[zo]),qm=ot.useCallback(()=>{const B=Bl.current;if(!B.future.length)return;const J=vc.current||[],at=B.future[0]||[];B.future=B.future.slice(1),B.past=[...B.past,J].slice(-si),df.current=!0,ou.current=at,zo(at),zl(lt=>lt+1),setTimeout(()=>{df.current=!1},0)},[zo]),Gm=T&&Ea.current.past.length>0,lg=T&&Ea.current.future.length>0,Zm=ot.useCallback(()=>{const B=Ea.current;if(!B.past.length)return;const J=hf.current||[],at=B.past[B.past.length-1]||[];B.past=B.past.slice(0,-1),B.future=[J,...B.future].slice(0,si),_c.current=!0,mf.current=at,Fo(at),_p(lt=>lt+1),setTimeout(()=>{_c.current=!1},0)},[Fo]),Xm=ot.useCallback(()=>{const B=Ea.current;if(!B.future.length)return;const J=hf.current||[],at=B.future[0]||[];B.future=B.future.slice(1),B.past=[...B.past,J].slice(-si),_c.current=!0,mf.current=at,Fo(at),_p(lt=>lt+1),setTimeout(()=>{_c.current=!1},0)},[Fo]),Rh=ce?Wi:C?Ji:D?Ad:K?Lp:Z?zm:R?Wm:T?Gm:W?Ir==="tabletotable"?Um:Vm:w?Nh:I?Lm:Im,Mf=ce?Ti:C?Ec:D?Ap:K?ag:Z?Fm:R?Hr:T?lg:W?Ir==="tabletotable"?Hm:$m:w?Ip:I?Pm:Om,jd=ot.useCallback(()=>ce?void mc():C?void yu():D?void ho():K?void Dm():Z?void _u():R?void Ah():T?void Zm():W?void(ws.current==="tabletotable"?Pp():Od()):w?void xu():I?void jp():void jm(),[ce,mc,C,yu,D,ho,K,Dm,Z,_u,R,Ah,T,Zm,W,Pp,Od,w,xu,I,jp,jm]),Ef=ot.useCallback(()=>ce?void ad():C?void il():D?void Rp():K?void Bm():Z?void Id():R?void qm():T?void Xm():W?void(ws.current==="tabletotable"?Dp():Bp()):w?void Op():I?void Rd():void Fl(),[ce,ad,C,il,D,Rp,K,Bm,Z,Id,R,qm,T,Xm,W,Dp,Bp,w,Op,I,Rd,Fl]);ot.useEffect(()=>{if(D){try{const B=localStorage.getItem(sa),J=B?JSON.parse(B):{};Ts(J&&typeof J=="object"?J:{})}catch{Ts({})}Ls.current={actions:[],index:-1},uu(B=>B+1)}},[D,sa]),ot.useEffect(()=>{if(D)try{const B=localStorage.getItem(Td),J=B?JSON.parse(B):null,at={mc4:Math.max(0,Number(J?.mc4??0)||0),termination_panel:Math.max(0,Number(J?.termination_panel??J?.termination??0)||0),termination_inv:Math.max(0,Number(J?.termination_inv??0)||0)};Kr(at),yf.current=at}catch{const J={mc4:0,termination_panel:0,termination_inv:0};Kr(J),yf.current=J}},[D,Td]),ot.useEffect(()=>{if(D)try{const B=localStorage.getItem(Th),J=B?JSON.parse(B):{};J&&typeof J=="object"?(Sc(J),to.current=J):(Sc({}),to.current={})}catch{Sc({}),to.current={}}},[D,Th]),ot.useEffect(()=>{if(D)try{localStorage.setItem(Th,JSON.stringify(cu||{}))}catch{}},[D,Th,cu]),ot.useEffect(()=>{if(D)try{localStorage.setItem(sa,JSON.stringify(Na||{}))}catch{}},[D,sa,Na]),ot.useEffect(()=>{if(C){try{const B=localStorage.getItem(Md),J=B?JSON.parse(B):{};oa(J&&typeof J=="object"?J:{})}catch{oa({})}tl.current={actions:[],index:-1},du(B=>B+1)}},[C,Md]),ot.useEffect(()=>{if(C)try{const B=localStorage.getItem(ni),J=B?JSON.parse(B):null,at={termination_panel:Math.max(0,Number(J?.termination_panel??0)||0),termination_inv:Math.max(0,Number(J?.termination_inv??0)||0)};Ds(at),Bs.current=at}catch{const J={termination_panel:0,termination_inv:0};Ds(J),Bs.current=J}},[C,ni]),ot.useEffect(()=>{if(C)try{const B=localStorage.getItem(Cs),J=B?JSON.parse(B):{};J&&typeof J=="object"?(Nd(J),zs.current=J):(Nd({}),zs.current={})}catch{Nd({}),zs.current={}}},[C,Cs]),ot.useEffect(()=>{if(C)try{localStorage.setItem(Cs,JSON.stringify(Qr||{}))}catch{}},[C,Cs,Qr]),ot.useEffect(()=>{if(C)try{localStorage.setItem(Md,JSON.stringify(Xi||{}))}catch{}},[C,Md,Xi]);const wu=Ks(),la=`cew:${String(h?.key||"MVF").toLowerCase()}`,qo=`${la}:segments_completed:${wu}`,Nc=`${la}:trench_committed:${wu}`,Ih=`${la}:trench_parts_committed:${wu}`,Ld=`${la}:segments_done:${wu}`;ot.useEffect(()=>{Qf.current=Kl},[Kl]),ot.useEffect(()=>{Ql.current=Hu},[Hu]),ot.useEffect(()=>{$c.current=Xo},[Xo]),ot.useEffect(()=>{Yl.current=ba},[ba]),ot.useEffect(()=>{ko.current=dl},[dl]),ot.useEffect(()=>{fl.current=ya},[ya]),ot.useEffect(()=>{Eo.current=ys},[ys]),ot.useEffect(()=>{pl.current=ls},[ls]),ot.useEffect(()=>{if(I)try{const B=localStorage.getItem(qo),J=B?JSON.parse(B):[];Array.isArray(J)?Uu(new Set(J.map(String))):Uu(new Set)}catch{Uu(new Set)}},[I,qo]),ot.useEffect(()=>{if(I)try{const B=localStorage.getItem(Nc),J=B?JSON.parse(B):[];Array.isArray(J)?ec(new Set(J.map(String))):ec(new Set)}catch{ec(new Set)}},[I,Nc]),ot.useEffect(()=>{if(I)try{const B=localStorage.getItem(Ih),J=B?JSON.parse(B):[];Array.isArray(J)?Vc(J):Vc([])}catch{Vc([])}},[I,Ih]),ot.useEffect(()=>{if(I)try{const B=localStorage.getItem(Ld),J=B?JSON.parse(B):[];Array.isArray(J)?za(new Set(J.map(String))):za(new Set)}catch{za(new Set)}},[I,Ld]),ot.useEffect(()=>{if(I)try{localStorage.setItem(qo,JSON.stringify(Array.from(Kl)))}catch{}},[I,qo,Kl]),ot.useEffect(()=>{if(I)try{localStorage.setItem(Nc,JSON.stringify(Array.from(Xo)))}catch{}},[I,Nc,Xo]),ot.useEffect(()=>{if(I)try{localStorage.setItem(Ih,JSON.stringify(ls||[]))}catch{}},[I,Ih,ls]),ot.useEffect(()=>{if(I)try{localStorage.setItem(Ld,JSON.stringify(Array.from(dl)))}catch{}},[I,Ld,dl]),ot.useEffect(()=>{if(!I)return;const B={color:"rgba(255,255,255,0.85)",weight:1.25,fill:!1,fillOpacity:0},J=va.current||{};Object.keys(J).forEach(at=>{const lt=J[at];lt&&typeof lt.setStyle=="function"&&lt.setStyle(B)}),Jl.current=new Set},[I]),ot.useEffect(()=>{const B=ge.current;if(!B)return;if(!D){if(xf.current)try{xf.current.remove()}catch{}xf.current=null;return}let J=xf.current;if(!J){if(!B.getPane("mc4markers")){const mt=B.createPane("mc4markers");mt.style.pointerEvents="none",mt.style.zIndex="650"}J=Ce.layerGroup({pane:"mc4markers"}),xf.current=J,J.addTo(B)}J.clearLayers();const at=gf.current||{},lt=Ge.current||{},dt=B.getZoom(),yt=Math.max(1.5,Math.min(8,4*Math.pow(1.2,dt-20))),ht=(mt,vt)=>{const wt=vt===Ri.MC4,Nt=vt===Ri.TERMINATED;if(!wt&&!Nt)return null;const Rt=wt?"#0066cc":"#00aa00",qt=wt?"#004499":"#007700";return Ce.circleMarker(mt,{radius:yt,color:qt,weight:1.5,fillColor:Rt,fillOpacity:.9,opacity:1,interactive:!1,pane:"mc4markers"})};Object.keys(lt).forEach(mt=>{const vt=lt[mt];if(!vt.mc4Ends&&typeof vt.computeEnds=="function")try{const Rt=vt.computeEnds();Rt&&(vt.mc4Ends=Rt)}catch{}const wt=vt.mc4Ends;if(!wt?.leftPos||!wt?.rightPos)return;const Nt=at[mt]||{left:null,right:null};if(Nt.left){const Rt=ht(wt.leftPos,Nt.left);Rt&&J.addLayer(Rt)}if(Nt.right){const Rt=ht(wt.rightPos,Nt.right);Rt&&J.addLayer(Rt)}})},[D,Tp,Na]),ot.useEffect(()=>{if(!D)return;const B=ge.current;if(!B)return;const J=()=>{uu(at=>at+.001)};return B.on("zoomend",J),()=>{B.off("zoomend",J)}},[D]),ot.useEffect(()=>{const B=ge.current;if(!B)return;if(!C||Zi!=="termination_panel"){if(el.current)try{el.current.remove()}catch{}el.current=null;return}let J=el.current;if(!J){if(!B.getPane("dcttmarkers")){const mt=B.createPane("dcttmarkers");mt.style.pointerEvents="none",mt.style.zIndex="650"}J=Ce.layerGroup({pane:"dcttmarkers"}),el.current=J,J.addTo(B)}J.clearLayers();const at=fu.current||{},lt=Ge.current||{},dt=B.getZoom(),yt=Math.max(1.5,Math.min(8,4*Math.pow(1.2,dt-20))),ht=(mt,vt)=>vt==="terminated"?Ce.circleMarker(mt,{radius:yt,color:"#007700",weight:1.5,fillColor:"#00aa00",fillOpacity:.9,opacity:1,interactive:!1,pane:"dcttmarkers"}):null;Object.keys(lt).forEach(mt=>{const vt=lt[mt];if(!vt.mc4Ends&&typeof vt.computeEnds=="function")try{const Rt=vt.computeEnds();Rt&&(vt.mc4Ends=Rt)}catch{}const wt=vt.mc4Ends;if(!wt?.leftPos||!wt?.rightPos)return;const Nt=at[mt]||{left:null,right:null};if(Nt.left){const Rt=ht(wt.leftPos,Nt.left);Rt&&J.addLayer(Rt)}if(Nt.right){const Rt=ht(wt.rightPos,Nt.right);Rt&&J.addLayer(Rt)}})},[C,Zi,$o,Xi]),ot.useEffect(()=>{if(!C||Zi!=="termination_panel")return;const B=ge.current;if(!B)return;const J=()=>{du(at=>at+.001)};return B.on("zoomend",J),()=>{B.off("zoomend",J)}},[C,Zi]),ot.useEffect(()=>{if(!C)return;const B=Ge.current||{},J=fu.current||{},at=ol,lt=go,dt=sr?new Set($r):null;Object.keys(B).forEach(xt=>{if(dt&&dt.has(xt))return;const ht=B[xt]?.layer;if(!ht||typeof ht.setStyle!="function")return;const mt=J[xt],vt=mt?.left===Jr.TERMINATED||mt?.right===Jr.TERMINATED;try{ht.setStyle(vt?{color:"#22c55e",weight:1.5,fill:!1,fillOpacity:0}:{color:at,weight:lt,fill:!1,fillOpacity:0})}catch{}})},[C,Xi,$o,sr,$r]),ot.useEffect(()=>{if(!C||String(Zi||"termination_panel")!=="termination_panel"||ce)return;const B=ge.current;if(!B)return;const J=(dt,xt)=>{let yt=!1;for(let ht=0,mt=xt.length-1;ht<xt.length;mt=ht++){const vt=xt[ht].x,wt=xt[ht].y,Nt=xt[mt].x,Rt=xt[mt].y;wt>dt.y!=Rt>dt.y&&dt.x<(Nt-vt)*(dt.y-wt)/(Rt-wt+1e-12)+vt&&(yt=!yt)}return yt},at=dt=>{if(!dt||typeof dt.getLatLngs!="function")return null;let xt=dt.getLatLngs();for(;Array.isArray(xt)&&xt.length&&Array.isArray(xt[0]);)xt=xt[0];for(;Array.isArray(xt)&&xt.length&&Array.isArray(xt[0]);)xt=xt[0];const yt=Array.isArray(xt)?xt:null;if(!yt||yt.length<3)return null;const ht=yt.map(wt=>B.latLngToLayerPoint(wt)).filter(Boolean);if(ht.length<3)return null;const mt=ht[0],vt=ht[ht.length-1];return mt&&vt&&mt.x===vt.x&&mt.y===vt.y&&ht.pop(),ht},lt=dt=>{try{if(window.__historySelectedRecordId)return}catch{}if(!k.current||String(ds.current||"termination")==="testing"||Fr.current!=="termination_panel")return;const xt=dt?.latlng;if(!xt)return;const yt=B.latLngToLayerPoint(xt),ht=Ge.current||{};for(const[mt,vt]of Object.entries(ht)){if(!String(mt).startsWith("polygon_"))continue;const wt=vt?.layer;if(!wt||typeof wt.getBounds!="function")continue;try{const jt=wt.getBounds();if(!jt||!jt.isValid?.()||!jt.contains(xt))continue}catch{continue}const Nt=at(wt);if(!Nt||!J(yt,Nt))continue;const Rt=gu(mt),qt={left:Jr.TERMINATED,right:Jr.TERMINATED};oa(jt=>({...jt||{},[mt]:qt})),Wo([{id:mt,prev:Rt,next:qt}]);return}};return B.on("click",lt),()=>{B.off("click",lt)}},[C,Zi,ce]),ot.useEffect(()=>{if(!w)return;const B=Ll.current||{},J=h?.invIdTextStrokeColor||"rgba(0,0,0,0.88)",at=typeof h?.invIdTextStrokeWidthFactor=="number"?h.invIdTextStrokeWidthFactor:1.45,lt=h?.invIdTextBgColor||null,dt=h?.invIdTextBgStrokeColor||null,xt=typeof h?.invIdTextBgStrokeWidth=="number"?h.invIdTextBgStrokeWidth:0,yt=h?.invIdDoneTextColor||"rgba(11,18,32,0.98)",ht=h?.invIdDoneTextColorNoBg||"rgba(34,197,94,0.98)",mt=h?.invIdDoneBgColor||"rgba(34,197,94,0.92)",vt=h?.invIdDoneBgStrokeColor||"rgba(255,255,255,0.70)",wt=typeof h?.invIdDoneBgStrokeWidth=="number"?h.invIdDoneBgStrokeWidth:2;Object.keys(B).forEach(Nt=>{const Rt=B[Nt];if(!Rt)return;const qt=ki.has(Nt),jt=qt?yt:"rgba(255,255,255,0.98)",Lt=qt?ht:null,Tt=qt?mt:lt,Ot=qt?vt:dt,It=qt?wt:xt;let Mt=!1;Rt.options.textColor!==jt&&(Rt.options.textColor=jt,Mt=!0),Rt.options.textColorNoBg!==Lt&&(Rt.options.textColorNoBg=Lt,Mt=!0),Rt.options.bgColor!==Tt&&(Rt.options.bgColor=Tt,Mt=!0),Rt.options.bgStrokeColor!==Ot&&(Rt.options.bgStrokeColor=Ot,Mt=!0),Rt.options.bgStrokeWidth!==It&&(Rt.options.bgStrokeWidth=It,Mt=!0),Rt.options.textStrokeColor!==J&&(Rt.options.textStrokeColor=J,Mt=!0),Rt.options.textStrokeWidthFactor!==at&&(Rt.options.textStrokeWidthFactor=at,Mt=!0),Mt&&Rt.redraw?.()})},[w,ki,h?.invIdTextStrokeColor,h?.invIdTextStrokeWidthFactor,h?.invIdTextBgColor,h?.invIdTextBgStrokeColor,h?.invIdTextBgStrokeWidth,h?.invIdDoneTextColor,h?.invIdDoneTextColorNoBg,h?.invIdDoneBgColor,h?.invIdDoneBgStrokeColor,h?.invIdDoneBgStrokeWidth]);const Pd=ot.useMemo(()=>{if(!C)return new Set;const B=Qr||{},J=Cc.current||{},at=new Set;for(const[lt,dt]of Object.entries(B)){const xt=Math.max(0,Number(J[lt]??0)||0),yt=Math.max(0,Number(dt)||0);xt>0&&yt>=xt&&at.add(lt)}return at},[C,Qr]);ot.useEffect(()=>{if(!C)return;const B=hu.current||{},J="rgba(11,18,32,0.98)",at="rgba(34,197,94,0.92)",lt="rgba(255,255,255,0.70)",dt=2,xt=4,yt=2,ht=3;Object.keys(B).forEach(mt=>{const vt=B[mt];if(!vt)return;const wt=Pd.has(mt);let Nt=!1;wt?(vt.options.textColor!==J&&(vt.options.textColor=J,Nt=!0),vt.options.bgColor!==at&&(vt.options.bgColor=at,Nt=!0),vt.options.bgStrokeColor!==lt&&(vt.options.bgStrokeColor=lt,Nt=!0),vt.options.bgStrokeWidth!==dt&&(vt.options.bgStrokeWidth=dt,Nt=!0),vt.options.bgPaddingX!==xt&&(vt.options.bgPaddingX=xt,Nt=!0),vt.options.bgPaddingY!==yt&&(vt.options.bgPaddingY=yt,Nt=!0),vt.options.bgCornerRadius!==ht&&(vt.options.bgCornerRadius=ht,Nt=!0)):(vt.options.textColor!=="rgba(255,255,255,0.98)"&&(vt.options.textColor="rgba(255,255,255,0.98)",Nt=!0),vt.options.bgColor!=null&&(vt.options.bgColor=null,Nt=!0),vt.options.bgStrokeColor!=null&&(vt.options.bgStrokeColor=null,Nt=!0),vt.options.bgStrokeWidth!==0&&(vt.options.bgStrokeWidth=0,Nt=!0),vt.options.bgPaddingX!==0&&(vt.options.bgPaddingX=0,Nt=!0),vt.options.bgPaddingY!==0&&(vt.options.bgPaddingY=0,Nt=!0),vt.options.bgCornerRadius!==0&&(vt.options.bgCornerRadius=0,Nt=!0)),Nt&&vt.redraw?.()})},[C,Pd]),ot.useEffect(()=>{if(!w)return;const B=x?.find?.(xt=>xt?.name==="lv_box")?.color||"rgba(250,204,21,0.7)",J=Number(x?.find?.(xt=>xt?.name==="lv_box")?.weight)||2,at="rgba(34,197,94,0.95)",lt=Math.max(2.2,J),dt=hp.current||{};(ah.current||[]).forEach(xt=>{if(xt?.setStyle)try{xt.setStyle({color:B,weight:J,fill:!1,fillOpacity:0})}catch{}}),ki.forEach(xt=>{(dt[xt]||[]).forEach(ht=>{if(ht?.setStyle)try{ht.setStyle({color:at,weight:lt,fill:!1,fillOpacity:0})}catch{}})})},[w,ki,h]);const zp=B=>B?.noteDate||(B?.createdAt?new Date(B.createdAt).toISOString().split("T")[0]:Ks()),Ym=2500,cg=.12,Nf=.001,Oh=28,Km=24,Ul=ot.useRef(!0),Hl=ot.useRef(null),Vl=ot.useRef(null),Af=ot.useRef(null);ot.useEffect(()=>{const B=Yt;Ul.current=B==="always",Hl.current=null,Vl.current=null},[Yt,ie]);const Ac=ot.useRef([]),ks=ot.useRef(0),fi=ot.useRef(""),jh=ot.useRef(null),hn=ot.useCallback(()=>{!ge.current||!jn.current||(Qn.current&&cancelAnimationFrame(Qn.current),Qn.current=requestAnimationFrame(()=>{const B=ge.current,J=jn.current,at=B.getZoom(),lt=un.current,dt=an.current;if(lt==="none"){const Zt=Ac.current,Ut=ks.current;for(let $t=0;$t<Ut;$t++){const Gt=Zt[$t];Gt&&J.hasLayer(Gt)&&J.removeLayer(Gt)}try{ln.current?._clear?.()}catch{}ks.current=0,fi.current="",Rc();return}if(lt==="always"&&(Ul.current=!0),!Ul.current){const Zt=Ac.current,Ut=ks.current;for(let $t=0;$t<Ut;$t++){const Gt=Zt[$t];Gt&&J.hasLayer(Gt)&&J.removeLayer(Gt)}try{ln.current?._clear?.()}catch{}ks.current=0,fi.current="",Rc();return}if(at<(lt==="always"&&dt?0:Be))return;const yt=lt,ht=yt==="cursor"?Hl.current:null,mt=yt==="cursor"?Vl.current:null;if(yt==="cursor"&&(!ht||!mt)){const Zt=Ac.current,Ut=ks.current;for(let $t=0;$t<Ut;$t++){const Gt=Zt[$t];Gt&&J.hasLayer(Gt)&&J.removeLayer(Gt)}try{ln.current?._clear?.()}catch{}ks.current=0,fi.current="",Rc();return}const vt=ht||B.getBounds().pad(cg),wt=ht?`${at}|cursor|${Math.round(mt.x)},${Math.round(mt.y)}|${vt.getSouth().toFixed(6)},${vt.getWest().toFixed(6)},${vt.getNorth().toFixed(6)},${vt.getEast().toFixed(6)}`:`${at}|${vt.getSouth().toFixed(5)},${vt.getWest().toFixed(5)},${vt.getNorth().toFixed(5)},${vt.getEast().toFixed(5)}`;if(wt===fi.current)return;try{const Zt=ln.current;if(Zt){typeof Zt._clear=="function"&&Zt._clear();const Ut=Zt._ctx,$t=Zt._container;Ut&&$t&&Ut.clearRect(0,0,$t.width,$t.height)}}catch{}fi.current=wt;const Nt=[],Rt=jh.current;if(Rt&&Rt.size){const Zt=vt.getSouthWest(),Ut=vt.getNorthEast(),$t=Math.floor(Zt.lat/Nf),Gt=Math.floor(Ut.lat/Nf),se=Math.floor(Zt.lng/Nf),fe=Math.floor(Ut.lng/Nf);for(let bt=$t;bt<=Gt;bt++)for(let ve=se;ve<=fe;ve++){const je=Rt.get(`${bt}:${ve}`);je&&je.length&&Nt.push(...je)}Nt.sort((bt,ve)=>bt-ve)}const qt=qn.current,jt=Ac.current;let Lt=0;const Tt=ht?Km:Ym,Ot=Z?qe.current||{}:null,It=(()=>{if(!Z)return null;const Zt=yn.current||{},Ut=Gt=>{const se=String(Gt||"").trim(),fe=Mn(se);if(!fe)return[];const bt=[fe],ve=Oe=>String(Oe).padStart(2,"0"),je=fe.match(/^ss(\d{1,2})$/i),te=fe.match(/^sub(\d{1,2})$/i);if(je){const Oe=ve(je[1]);bt.push(`ss${Oe}`),bt.push(`sub${Oe}`)}if(te){const Oe=ve(te[1]);bt.push(`sub${Oe}`),bt.push(`ss${Oe}`)}return Array.from(new Set(bt))};return{statusOf:Gt=>{const se=Ut(Gt);let fe="",bt=null;for(const nn of se)if(Zt[nn]){fe=nn,bt=Zt[nn];break}const ve=bt&&typeof bt=="object"?bt:{},je=nn=>{const Fe=String(nn||"").trim().toUpperCase();return!Fe||Fe==="N/A"||Fe==="NA"?"N/A":Fe==="PASS"?"PASS":(Fe.startsWith("FAIL"),"FAIL")},te=je(ve?.L1?.status||ve?.L1),Oe=je(ve?.L2?.status||ve?.L2),Me=je(ve?.L3?.status||ve?.L3),Se=ve?.L1?.value!=null?String(ve.L1.value):"",he=ve?.L2?.value!=null?String(ve.L2.value):"",le=ve?.L3?.value!=null?String(ve.L3.value):"",Ee=!!bt&&(Se||he||le||te!=="N/A"||Oe!=="N/A"||Me!=="N/A");return{fromKey:fe,phases:{L1:{value:Se||"",status:te},L2:{value:he||"",status:Oe},L3:{value:le||"",status:Me}},hasTested:Ee,allPass:Ee&&te==="PASS"&&Oe==="PASS"&&Me==="PASS",anyFail:Ee&&(te==="FAIL"||Oe==="FAIL"||Me==="FAIL")}}}})(),Mt=Nt.length?Nt:null,_t=Mt?Mt.length:qt.length;let Et=null;if(ht){const Zt=Vl.current;if(Zt){const Ut=[],$t=Oh*Oh;for(let Gt=0;Gt<_t;Gt++){const se=Mt?Mt[Gt]:Gt,fe=qt[se];if(!fe||!vt.contains([fe.lat,fe.lng]))continue;const bt=B.latLngToContainerPoint([fe.lat,fe.lng]),ve=bt.x-Zt.x,je=bt.y-Zt.y,te=ve*ve+je*je;te<=$t&&Ut.push({idx:se,d2:te})}Ut.sort((Gt,se)=>Gt.d2-se.d2),Et=Ut.slice(0,Tt).map(Gt=>Gt.idx)}}const Pt=Et?Et.length:_t,Dt=Number(ne),Ft=Q?ps.current||{}:null;Q&&ms.current,Q&&ns.current;const Xt=Z?Bc.current:null,Wt=Zt=>{const Ut=String(Zt||"").match(/^(ss|sub)(\d{2})$/i);if(!Ut)return 0;const $t=parseInt(Ut[2],10);if(!Number.isFinite($t)||$t<=0)return 0;const Gt=Tn.current||{};return Math.max(0,Number(Gt?.[$t]??Gt?.[String($t)]??0)||0)};for(let Zt=0;Zt<Pt&&!(Lt>=Tt);Zt++){const Ut=Et?Et[Zt]:Mt?Mt[Zt]:Zt,$t=qt[Ut];if(!$t||!vt.contains([$t.lat,$t.lng]))continue;let Gt=$t.text,se=ae;if(Z){const Me=String($t.text||"").trim(),Se=fn(Me),he=String(pr.current||"termination");if(Se&&gn(Se)){if(Se==="css"&&he==="testing")se="rgba(255,255,255,0.98)";else if(he==="termination"&&Ot){const le=wn(Se),Ee=bn(Se,Ot[Se]??0);se=le>0&&Ee===le?"rgba(34,197,94,0.98)":"rgba(255,255,255,0.98)"}else if(he==="testing"&&It){const le=It.statusOf(Me);if(le?.hasTested?le?.allPass?se="rgba(34,197,94,0.98)":se="rgba(220,38,38,0.98)":se="rgba(148,163,184,0.98)",Xt){const Ee=String(le?.phases?.L1?.status||"N/A").trim().toUpperCase(),Ae=String(le?.phases?.L2?.status||"N/A").trim().toUpperCase(),We=String(le?.phases?.L3?.status||"N/A").trim().toUpperCase();(Xt==="passed"?Ee==="PASS"||Ae==="PASS"||We==="PASS":Xt==="failed"?Ee==="FAIL"||Ae==="FAIL"||We==="FAIL"||Ee==="FAILED"||Ae==="FAILED"||We==="FAILED":!Ee||Ee==="N/A"||!Ae||Ae==="N/A"||!We||We==="N/A")?se=Xt==="passed"?"rgba(34,197,94,0.98)":Xt==="failed"?"rgba(220,38,38,0.98)":"rgba(148,163,184,0.98)":se="rgba(148,163,184,0.18)"}}}}if(Q&&Ft){const Me=$t.stringId||Mn($t.text),Se=Ft[Me],he=Se==="passed"?"passed":Se==="failed"?"failed":"not_tested";he==="passed"?se="rgba(5,150,105,0.96)":he==="failed"?se="rgba(239,68,68,0.98)":se="rgba(255,255,255,0.98)"}if(C&&String(ds.current||"termination")==="testing"){const Me=$t.stringId||no($t.text),Se=(Yi.current||{})?.[Me]||null,he=Se&&Ei(Se.status||Se.remarkRaw)||null,le=he==="passed"?"passed":he==="failed"?"failed":"not_tested";le==="passed"?se="rgba(5,150,105,0.96)":le==="failed"?se="rgba(239,68,68,0.98)":se="rgba(255,255,255,0.98)";const Ee=Ur.current;Ee&&(le===Ee||(se="rgba(148,163,184,0.18)"))}if(K){const Me=String($t.text||"").trim(),Se=Un(Me);if(Se){const he=Wt(Se);if(he>0){const Ee=Number(Vr.current?.[Se]??0);se=Math.max(0,Math.min(he,Number.isFinite(Ee)?Ee:0))>=he?"rgba(34,197,94,0.98)":"rgba(255,255,255,0.98)"}else se="rgba(148,163,184,0.98)";!!Jo.current&&!!Wa.current&&!!fh.current?.has(Se)&&(se="rgba(11,18,32,0.98)")}}const fe=C&&String(ds.current||"termination")==="testing";let bt=jt[Lt];bt||(bt=Ce.textLabel([$t.lat,$t.lng],{text:Gt,renderer:ln.current||Oa,textBaseSize:ne,refZoom:sn,textStyle:me,textColor:se,textStrokeColor:Le,textStrokeWidthFactor:Pe,minFontSize:He,maxFontSize:Je,rotation:$t.angle||0,interactive:Z||K||fe,radius:Z||K||fe?22:0,bubblingMouseEvents:!1}),jt[Lt]=bt,Z&&(bt.on("click",Me=>{try{Me?.originalEvent&&(Me.originalEvent.stopImmediatePropagation?.(),Ce.DomEvent.stopPropagation(Me.originalEvent),Ce.DomEvent.preventDefault(Me.originalEvent))}catch{}const Se=String(pr.current||"termination"),he=String(bt._mvtStationLabel||"").trim(),le=String(bt._mvtStationNorm||"");if(!le)return;const Ee=Me?.originalEvent,Ae=Ee?.clientX??0,We=Ee?.clientY??0;if(Se==="termination"){if(!!bt._mvtLocked)return;const Fe=bn(le,qe.current?.[le]??0);_i({stationLabel:he||le,stationNorm:le,draft:Fe,x:Ae,y:We});return}if(Se==="testing"){const nn=yn.current||{},Fe=Mn(he||le),rn=[Fe],pn=tn=>String(tn).padStart(2,"0"),An=Fe.match(/^ss(\d{1,2})$/i),zn=Fe.match(/^sub(\d{1,2})$/i);if(An){const tn=pn(An[1]);rn.push(`ss${tn}`),rn.push(`sub${tn}`)}if(zn){const tn=pn(zn[1]);rn.push(`sub${tn}`),rn.push(`ss${tn}`)}let en="";for(const tn of rn)if(nn[tn]){en=tn;break}en||(en=rn.find(i=>/^sub\d{2}$/i.test(i))||rn[0]||""),is(null),Es({stationLabel:he||le,fromKey:en,x:Ae,y:We})}}),bt.on("mouseover",()=>{try{bt._mvtLocked||(B.getContainer().style.cursor="pointer")}catch{}}),bt.on("mouseout",()=>{try{B.getContainer().style.cursor=""}catch{}}),bt._mvtHandlersBound=!0),K&&(bt.on("click",Me=>{try{Me?.originalEvent&&(Me.originalEvent.stopImmediatePropagation?.(),Ce.DomEvent.stopPropagation(Me.originalEvent),Ce.DomEvent.preventDefault(Me.originalEvent))}catch{}if(String(Bn.current||"termination")!=="termination")return;const Se=String(bt._lvttSubNorm||""),he=Number(bt._lvttSubMax||0);if(!Se||!(he>0))return;const le=Number(Vr.current?.[Se]??0),Ee=Math.max(0,Math.min(he,Number.isFinite(le)?le:0)),Ae=Me?.originalEvent,We=Ae?.clientX??0,nn=Ae?.clientY??0;Lr({mode:"sub_termination",subId:String(bt._lvttSubId||""),subNorm:Se,max:he,draft:Ee,x:We,y:nn})}),bt.on("mouseover",()=>{try{B.getContainer().style.cursor="pointer"}catch{}}),bt.on("mouseout",()=>{try{B.getContainer().style.cursor=""}catch{}})));const ve=typeof bt.getLatLng=="function"?bt.getLatLng():null,je=[$t.lat,$t.lng];bt.setLatLng(je);let te=!!ht||ve&&(ve.lat!==$t.lat||ve.lng!==$t.lng);if(bt.options.text!==Gt&&(bt.options.text=Gt,te=!0),bt.options.textColor!==se&&(bt.options.textColor=se,te=!0),Z){const Me=String($t.text||"").trim();Mn(Me);{const Se=fn(Me);if(Se&&gn(Se)){const he=String(pr.current||"termination"),le=he==="termination",Ee=he==="testing";if(bt._mvtHandlersBound||(bt.on("click",Ae=>{try{Ae?.originalEvent&&(Ae.originalEvent.stopImmediatePropagation?.(),Ce.DomEvent.stopPropagation(Ae.originalEvent),Ce.DomEvent.preventDefault(Ae.originalEvent))}catch{}const We=String(pr.current||"termination"),nn=String(bt._mvtStationLabel||"").trim(),Fe=String(bt._mvtStationNorm||"");if(!Fe)return;const rn=Ae?.originalEvent,pn=rn?.clientX??0,An=rn?.clientY??0;if(We==="termination"){if(!!bt._mvtLocked)return;const en=bn(Fe,qe.current?.[Fe]??0);_i({stationLabel:nn||Fe,stationNorm:Fe,draft:en,x:pn,y:An});return}if(We==="testing"){const zn=yn.current||{},en=Mn(nn||Fe),tn=[en],i=V=>String(V).padStart(2,"0"),d=en.match(/^ss(\d{1,2})$/i),_=en.match(/^sub(\d{1,2})$/i);if(d){const V=i(d[1]);tn.push(`ss${V}`),tn.push(`sub${V}`)}if(_){const V=i(_[1]);tn.push(`sub${V}`),tn.push(`ss${V}`)}let A="";for(const V of tn)if(zn[V]){A=V;break}A||(A=tn.find(Y=>/^sub\d{2}$/i.test(Y))||tn[0]||""),is(null),Es({stationLabel:nn||Fe,fromKey:A,x:pn,y:An})}}),bt.on("mouseover",()=>{try{bt._mvtLocked||(B.getContainer().style.cursor="pointer")}catch{}}),bt.on("mouseout",()=>{try{B.getContainer().style.cursor=""}catch{}}),bt._mvtHandlersBound=!0),Se==="css"&&Ee){bt._mvtStationNorm="",bt._mvtStationLabel=Me,bt._mvtLocked=!1,bt.options.radius!==0&&(bt.options.radius=0,te=!0),bt.options.interactive!==!1&&(bt.options.interactive=!1,te=!0),bt.options.underline&&(bt.options.underline=!1,te=!0),bt.options.underlineColor&&(bt.options.underlineColor=null,te=!0),bt.options.textBaseSize!==Dt&&(bt.options.textBaseSize=Dt,te=!0);const Ae=historyHighlighted?"rgba(11,18,32,0.98)":"rgba(255,255,255,0.98)";bt.options.textColor!==Ae&&(bt.options.textColor=Ae,te=!0),historyHighlighted?(bt.options.bgColor!=="rgba(249,115,22,1)"&&(bt.options.bgColor="rgba(249,115,22,1)",te=!0),bt.options.bgPaddingX!==4&&(bt.options.bgPaddingX=4,te=!0),bt.options.bgPaddingY!==2&&(bt.options.bgPaddingY=2,te=!0),bt.options.bgCornerRadius!==3&&(bt.options.bgCornerRadius=3,te=!0)):(bt.options.bgColor!=null&&(bt.options.bgColor=null,te=!0),bt.options.bgPaddingX!==0&&(bt.options.bgPaddingX=0,te=!0),bt.options.bgPaddingY!==0&&(bt.options.bgPaddingY=0,te=!0),bt.options.bgCornerRadius!==0&&(bt.options.bgCornerRadius=0,te=!0))}else{const Ae=wn(Se),We=bn(Se,qe.current?.[Se]??0),nn=Ae>0&&We===Ae;let Fe=nn?"rgba(34,197,94,0.98)":"rgba(255,255,255,0.98)";if(Ee&&It){const zn=It.statusOf(Me);zn?.hasTested?zn?.allPass?Fe="rgba(34,197,94,0.98)":Fe="rgba(220,38,38,0.98)":Fe="rgba(148,163,184,0.98)"}const rn=!!Jo.current&&!!Wa.current&&!!ir.current?.has(Se),pn="rgba(249,115,22,1)",An="rgba(11,18,32,0.98)";bt._mvtStationNorm=Se,bt._mvtStationLabel=Me,bt._mvtLocked=nn,bt.options.radius!==(le||Ee?22:0)&&(bt.options.radius=le||Ee?22:0,te=!0),bt.options.interactive!==(le||Ee)&&(bt.options.interactive=le||Ee,te=!0),bt.options.textBaseSize!==Dt&&(bt.options.textBaseSize=Dt,te=!0),bt.options.underline!==(le||Ee)&&(bt.options.underline=le||Ee,te=!0),(le||Ee)&&bt.options.underlineColor!==bt.options.textColor&&(bt.options.underlineColor=bt.options.textColor,te=!0);{const zn=rn?An:Fe;bt.options.textColor!==zn&&(bt.options.textColor=zn,te=!0),(le||Ee)&&bt.options.underlineColor!==zn&&(bt.options.underlineColor=zn,te=!0),rn?(bt.options.bgColor!==pn&&(bt.options.bgColor=pn,te=!0),bt.options.bgPaddingX!==4&&(bt.options.bgPaddingX=4,te=!0),bt.options.bgPaddingY!==2&&(bt.options.bgPaddingY=2,te=!0),bt.options.bgCornerRadius!==3&&(bt.options.bgCornerRadius=3,te=!0)):(bt.options.bgColor!=null&&(bt.options.bgColor=null,te=!0),bt.options.bgPaddingX!==0&&(bt.options.bgPaddingX=0,te=!0),bt.options.bgPaddingY!==0&&(bt.options.bgPaddingY=0,te=!0),bt.options.bgCornerRadius!==0&&(bt.options.bgCornerRadius=0,te=!0))}}}else bt._mvtStationNorm="",bt._mvtStationLabel="",bt._mvtLocked=!1,bt.options.radius!==0&&(bt.options.radius=0,te=!0),bt.options.interactive!==!1&&(bt.options.interactive=!1,te=!0),bt.options.underline&&(bt.options.underline=!1,te=!0),bt.options.underlineColor&&(bt.options.underlineColor=null,te=!0),bt.options.textBaseSize!==ne&&(bt.options.textBaseSize=ne,te=!0),bt.options.bgColor!=null&&(bt.options.bgColor=null,te=!0),bt.options.bgPaddingX!==0&&(bt.options.bgPaddingX=0,te=!0),bt.options.bgPaddingY!==0&&(bt.options.bgPaddingY=0,te=!0),bt.options.bgCornerRadius!==0&&(bt.options.bgCornerRadius=0,te=!0)}}if(K){const Me=String($t.text||"").trim(),Se=Un(Me);if(Se){const he=Math.max(1,Number(ne)),le=Wt(Se),Ee=!!Jo.current&&!!Wa.current&&!!fh.current?.has(Se),Ae="rgba(249,115,22,1)",We="rgba(11,18,32,0.98)";bt._lvttSubNorm=Se,bt._lvttSubId=Me,bt._lvttSubMax=le,bt.options.interactive!==!0&&(bt.options.interactive=!0,te=!0),bt.options.radius!==22&&(bt.options.radius=22,te=!0),bt.options.underline!==!0&&(bt.options.underline=!0,te=!0),bt.options.textBaseSize!==he&&(bt.options.textBaseSize=he,te=!0),bt.options.underlineColor!==bt.options.textColor&&(bt.options.underlineColor=bt.options.textColor,te=!0),Ee?(bt.options.bgColor!==Ae&&(bt.options.bgColor=Ae,te=!0),bt.options.bgPaddingX!==4&&(bt.options.bgPaddingX=4,te=!0),bt.options.bgPaddingY!==2&&(bt.options.bgPaddingY=2,te=!0),bt.options.bgCornerRadius!==3&&(bt.options.bgCornerRadius=3,te=!0),bt.options.textColor!==We&&(bt.options.textColor=We,te=!0)):(bt.options.bgColor!=null&&(bt.options.bgColor=null,te=!0),bt.options.bgPaddingX!==0&&(bt.options.bgPaddingX=0,te=!0),bt.options.bgPaddingY!==0&&(bt.options.bgPaddingY=0,te=!0),bt.options.bgCornerRadius!==0&&(bt.options.bgCornerRadius=0,te=!0))}else bt._lvttSubNorm="",bt._lvttSubId="",bt._lvttSubMax=0,bt.options.underline&&(bt.options.underline=!1,te=!0),bt.options.underlineColor&&(bt.options.underlineColor=null,te=!0),bt.options.interactive!==!1&&(bt.options.interactive=!1,te=!0),bt.options.radius!==0&&(bt.options.radius=0,te=!0),bt.options.textBaseSize!==ne&&(bt.options.textBaseSize=ne,te=!0),bt.options.bgColor!=null&&(bt.options.bgColor=null,te=!0),bt.options.bgPaddingX!==0&&(bt.options.bgPaddingX=0,te=!0),bt.options.bgPaddingY!==0&&(bt.options.bgPaddingY=0,te=!0),bt.options.bgCornerRadius!==0&&(bt.options.bgCornerRadius=0,te=!0)}if(C&&String(ds.current||"termination")==="testing"){const Me=String($t.text||"").trim(),Se=$t.stringId||no(Me),he=String(pi.current?.idNorm||""),le=!!he&&he===String(Se||"");if(bt._dcttTestHandlersBound||(bt.on("click",Ee=>{try{Ee?.originalEvent&&(Ee.originalEvent.stopImmediatePropagation?.(),Ce.DomEvent.stopPropagation(Ee.originalEvent),Ce.DomEvent.preventDefault(Ee.originalEvent))}catch{}if(String(ds.current||"termination")!=="testing")return;const Ae=bt._dcttStringIdNorm;if(!Ae)return;const We=Ee?.originalEvent,nn=We?.clientX??0,Fe=We?.clientY??0,rn=Yi.current?.[Ae]||null,pn=rn!==null,An=rn?.plus!=null?String(rn.plus).trim():"",zn=rn?.minus!=null?String(rn.minus).trim():"",en=An||(pn?"999":"0"),tn=zn||(pn?"999":"0"),i=Ei(rn?.status||rn?.remarkRaw)||null,d=rl(Ae,rn?.originalId);Fs(_=>_&&_.idNorm===Ae?null:{idNorm:Ae,displayId:d,draftPlus:en,draftMinus:tn,draftStatus:i,x:nn,y:Fe})}),bt.on("mouseover",()=>{try{B.getContainer().style.cursor="pointer"}catch{}}),bt.on("mouseout",()=>{try{B.getContainer().style.cursor=""}catch{}}),bt._dcttTestHandlersBound=!0),bt._dcttStringIdNorm=Se,bt._dcttDisplayId=Me,bt.options.interactive!==!0&&(bt.options.interactive=!0,te=!0),bt.options.radius!==22&&(bt.options.radius=22,te=!0),bt.options.underline!==!0&&(bt.options.underline=!0,te=!0),bt.options.underlineColor!==bt.options.textColor&&(bt.options.underlineColor=bt.options.textColor,te=!0),bt.options.underlineWidthFactor!==(le?1.8:1)&&(bt.options.underlineWidthFactor=le?1.8:1,te=!0),le){bt.options.bgColor!=="rgba(11,18,32,0.85)"&&(bt.options.bgColor="rgba(11,18,32,0.85)",te=!0),bt.options.bgPaddingX!==4&&(bt.options.bgPaddingX=4,te=!0),bt.options.bgPaddingY!==2&&(bt.options.bgPaddingY=2,te=!0),bt.options.bgCornerRadius!==3&&(bt.options.bgCornerRadius=3,te=!0);const Ee=Math.max(.5,Number(Pe)||1)*1.35;bt.options.textStrokeWidthFactor!==Ee&&(bt.options.textStrokeWidthFactor=Ee,te=!0)}else{bt.options.bgColor!=null&&(bt.options.bgColor=null,te=!0),bt.options.bgPaddingX!==0&&(bt.options.bgPaddingX=0,te=!0),bt.options.bgPaddingY!==0&&(bt.options.bgPaddingY=0,te=!0),bt.options.bgCornerRadius!==0&&(bt.options.bgCornerRadius=0,te=!0);const Ee=Math.max(.5,Number(Pe)||1);bt.options.textStrokeWidthFactor!==Ee&&(bt.options.textStrokeWidthFactor=Ee,te=!0)}}else if(C){bt._dcttStringIdNorm="",bt._dcttDisplayId="",bt.options.underline&&(bt.options.underline=!1,te=!0),bt.options.underlineColor&&(bt.options.underlineColor=null,te=!0),bt.options.underlineWidthFactor!==1&&(bt.options.underlineWidthFactor=1,te=!0),bt.options.interactive!==!1&&(bt.options.interactive=!1,te=!0),bt.options.radius!==0&&(bt.options.radius=0,te=!0),bt.options.bgColor!=null&&(bt.options.bgColor=null,te=!0),bt.options.bgPaddingX!==0&&(bt.options.bgPaddingX=0,te=!0),bt.options.bgPaddingY!==0&&(bt.options.bgPaddingY=0,te=!0),bt.options.bgCornerRadius!==0&&(bt.options.bgCornerRadius=0,te=!0);const Me=Math.max(.5,Number(Pe)||1);bt.options.textStrokeWidthFactor!==Me&&(bt.options.textStrokeWidthFactor=Me,te=!0)}const Oe=$t.angle||0;bt.options.rotation!==Oe&&(bt.options.rotation=Oe,te=!0),J.hasLayer(bt)||J.addLayer(bt),te&&bt.redraw?.(),Lt++}Rc();const Vt=ks.current;for(let Zt=Lt;Zt<Vt;Zt++){const Ut=jt[Zt];Ut&&J.hasLayer(Ut)&&J.removeLayer(Ut)}ks.current=Lt}))},[Z,ne,ae,me,Le,Pe,Be,He,Je,sn]);ot.useEffect(()=>{Z&&(fi.current="",hn())},[Z,M,hn]),ot.useEffect(()=>{Z&&(fi.current="",hn())},[Z,Bi,hn]),ot.useEffect(()=>{Z&&(!ge.current||!jn.current||(fi.current="",hn()))},[Z,Kf,hn]);const Rc=ot.useCallback(()=>{const B=ye.current;if(!B)return;const J=be.current,at=Qe.current;for(let lt=0;lt<at;lt++){const dt=J[lt];dt&&B.hasLayer(dt)&&B.removeLayer(dt)}Qe.current=0},[]);ot.useEffect(()=>{Z&&(_i(null),Es(null),String(Sn||"termination")==="testing"&&Rc(),fi.current="",hn())},[Z,Sn,hn,Rc]),ot.useEffect(()=>{Q&&(!ge.current||!jn.current||(fi.current="",hn()))},[Q,Or,In,ai,hn]),ot.useEffect(()=>{C&&(!ge.current||!jn.current||(fi.current="",hn()))},[C,Li,nl,Tf,kc,hn]),ot.useEffect(()=>{C&&String(Li||"termination")==="testing"&&(!ge.current||!jn.current||(fi.current="",hn()))},[C,Li,Qi,hn]),ot.useEffect(()=>{Z||(_i(null),Es(null))},[Z]);const Su=ot.useCallback(()=>{Qn.current&&cancelAnimationFrame(Qn.current),Qn.current=null;const B=jn.current;if(!B)return;const J=Ac.current,at=ks.current;for(let lt=0;lt<at;lt++){const dt=J[lt];dt&&B.hasLayer(dt)&&B.removeLayer(dt)}try{ln.current?._clear?.()}catch{}ks.current=0,fi.current=""},[]),Rf=ot.useCallback(()=>{const B=Cr.current;if(!B)return;const J=oi.current,at=Kt.current;for(let lt=0;lt<at;lt++){const dt=J[lt];dt&&B.hasLayer(dt)&&B.removeLayer(dt)}Kt.current=0;try{hr.current?._clear?.()}catch{}},[]),Fp=ot.useCallback(()=>{const B=we.current;if(!B)return;const J=De.current,at=$e.current;for(let lt=0;lt<at;lt++){const dt=J[lt];dt&&B.hasLayer(dt)&&B.removeLayer(dt)}$e.current=0;try{Ye.current?._clear?.()}catch{}},[]);ot.useEffect(()=>{if(!Z){ss({});return}try{const B=localStorage.getItem("cew:mvt:termination_counts"),J=B?JSON.parse(B):{};if(J&&typeof J=="object"){const at={};for(const[lt,dt]of Object.entries(J||{})){const xt=fn(lt);if(!gn(xt))continue;const yt=bn(xt,dt);at[xt]=Math.max(Number(at[xt]||0),yt)}ss(at)}else ss({})}catch{ss({})}},[Z]),ot.useEffect(()=>{if(Z)try{localStorage.setItem("cew:mvt:termination_counts",JSON.stringify(Bi||{}))}catch{}},[Z,Bi]),ot.useEffect(()=>{if(!K){xn({});return}try{const B=localStorage.getItem("cew:lvtt:termination_counts"),J=B?JSON.parse(B):{};xn(J&&typeof J=="object"?J:{})}catch{xn({})}},[K]),ot.useEffect(()=>{if(K)try{localStorage.setItem("cew:lvtt:termination_counts",JSON.stringify(kn||{}))}catch{}},[K,kn]),ot.useEffect(()=>{if(!K){Ar({});return}try{const B=localStorage.getItem("cew:lvtt:sub_counts"),J=B?JSON.parse(B):{};Ar(J&&typeof J=="object"?J:{})}catch{Ar({})}},[K]),ot.useEffect(()=>{if(K)try{localStorage.setItem("cew:lvtt:sub_counts",JSON.stringify(Vn||{}))}catch{}},[K,Vn]),ot.useEffect(()=>{if(!Z){yn.current={},Ii.current={},Ns.current=null,pa(!1),is(null),Es(null),zi({total:0,fromRows:0,toRows:0});return}let B=!1;const J=["/MV_TERMINATION_PROGRESS_TRACKING/mv_circuits_test.csv","/MV_TERMINATION_PROGRESS_TRACKING/mv_circuit_test.csv","/MV_TERMINATION_PROGRESS_TRACKING/mv_circuit_tests.csv"],at=lt=>{const dt=String(lt||""),xt=dt.split(/\r?\n/),yt=xt.map(Ut=>Ut.trim()).filter(Boolean);if(yt.length<=1)return{byFrom:{},toByFrom:{},fromRows:0,toRows:0};const ht=String(yt[0]||""),mt=ht.includes(";")&&ht.split(";").length>ht.split(",").length?";":",",wt=ht.split(mt).map(Ut=>Ut.replace(/^\uFEFF/,"").trim()).map(Ut=>Ut.toLowerCase()),Nt=wt.findIndex(Ut=>Ut==="from"),Rt=wt.findIndex(Ut=>Ut==="phase"),qt=wt.findIndex(Ut=>Ut==="remarks"||Ut==="result"||Ut==="status"),jt=wt.findIndex(Ut=>Ut.includes("g")||Ut.includes("gohm")||Ut.includes("value")||Ut==="l1"||Ut==="l2"||Ut==="l3"),Lt=wt.findIndex(Ut=>Ut==="to"),Tt={},Ot={};let It=0,Mt=0;if(Rt>=0){const Ut=$t=>{const se=String($t||"").trim().toUpperCase();return se?se==="PASS"?"PASS":(se.startsWith("FAIL"),"failed"):"N/A"};for(let $t=1;$t<yt.length;$t++){const Gt=yt[$t].split(mt).map(he=>he.trim()),se=Nt>=0?Gt[Nt]:Gt[0],fe=Lt>=0?Gt[Lt]:Gt[1],bt=Rt>=0?Gt[Rt]:Gt[2],ve=qt>=0?Gt[qt]:Gt.length?Gt[Gt.length-1]:"",je=jt>=0?Gt[jt]:"",te=Mn(se),Oe=Mn(fe),Me=String(bt||"").trim().toUpperCase(),Se=Ut(ve);te&&(Me!=="L1"&&Me!=="L2"&&Me!=="L3"||(It+=1,Oe&&(Mt+=1),fe&&!Ot[te]&&(Ot[te]=String(fe||"").trim()),Tt[te]||(Tt[te]={}),Tt[te][Me]={value:je?`${je}`:"",status:Se}))}return{byFrom:Tt,toByFrom:Ot,fromRows:It,toRows:Mt}}const _t=wt.findIndex(Ut=>Ut==="l1"||Ut.startsWith("l1")),Et=wt.findIndex(Ut=>Ut==="l2"||Ut.startsWith("l2")),Pt=wt.findIndex(Ut=>Ut==="l3"||Ut.startsWith("l3")),Dt=Ut=>{const Gt=String(Ut||"").trim().toUpperCase();return Gt?Gt==="PASS"?"PASS":(Gt.startsWith("FAIL"),"failed"):"N/A"},Ft=Ut=>{const $t=Ut.toLowerCase();return wt.findIndex(Gt=>Gt.startsWith($t)&&(Gt.includes("remark")||Gt.includes("status")||Gt.includes("result")))},Xt=Ft("L1"),Wt=Ft("L2"),Vt=Ft("L3"),Zt=Ut=>{const $t=String(Ut||"").trim();if(!$t)return{L1:"N/A",L2:"N/A",L3:"N/A"};const Gt={},se=/(L[123])\s*[:=\-]?\s*(PASS|FAIL(?:ED)?|FAILED)/gi;let fe;for(;(fe=se.exec($t))!=null;)Gt[fe[1].toUpperCase()]=Dt(fe[2]);if(Gt.L1||Gt.L2||Gt.L3)return{L1:Gt.L1||"N/A",L2:Gt.L2||"N/A",L3:Gt.L3||"N/A"};const bt=$t.split(/[\s,;/|]+/).map(je=>je.trim()).filter(Boolean).map(je=>je.toUpperCase()).filter(je=>je==="PASS"||je==="FAIL"||je==="FAILED"||je==="FAILURE");if(bt.length>=3)return{L1:Dt(bt[0]),L2:Dt(bt[1]),L3:Dt(bt[2])};const ve=Dt($t);return{L1:ve,L2:ve,L3:ve}};for(let Ut=1;Ut<yt.length;Ut++){const $t=yt[Ut].split(mt).map(he=>he.trim()),Gt=Nt>=0?$t[Nt]:$t[0],se=Lt>=0?$t[Lt]:$t[1],fe=Mn(Gt),bt=Mn(se);if(!fe)continue;It+=1,bt&&(Mt+=1),se&&!Ot[fe]&&(Ot[fe]=String(se||"").trim()),Tt[fe]||(Tt[fe]={});const ve=qt>=0?$t[qt]:"",je=Zt(ve),te=he=>{const le=he>=0?$t[he]:"",Ee=String(le||"").trim();return Ee?`${Ee}`:""},Oe=Xt>=0?Dt($t[Xt]):je.L1,Me=Wt>=0?Dt($t[Wt]):je.L2,Se=Vt>=0?Dt($t[Vt]):je.L3;Tt[fe].L1={value:te(_t),status:Oe},Tt[fe].L2={value:te(Et),status:Me},Tt[fe].L3={value:te(Pt),status:Se}}return{byFrom:Tt,toByFrom:Ot,fromRows:It,toRows:Mt,_meta:{textLen:dt.length,rawLines:xt.length,filteredLines:yt.length,keys:Object.keys(Tt).length}}};try{const lt=localStorage.getItem("cew:mvt:test_results_submitted");if(lt){const dt=JSON.parse(lt);if(dt&&typeof dt=="object"&&dt.byFrom&&typeof dt.byFrom=="object")return yn.current=dt.byFrom||{},Ii.current=dt.toByFrom&&typeof dt.toByFrom=="object"?dt.toByFrom:{},Ns.current=dt,pa(!1),cl(xt=>xt+1),fi.current="",hn(),()=>{B=!0}}}catch{}return(async()=>{let lt="",dt="";for(const ht of J)try{const mt=`${ht}?v=${Date.now()}`,vt=await fetch(mt,{cache:"no-store"});if(vt&&vt.ok){lt=await vt.text(),dt=mt;break}}catch{}if(B)return;const xt=at(lt);yn.current=xt.byFrom||{},Ii.current=xt.toByFrom||{},Ns.current={byFrom:xt.byFrom||{},toByFrom:xt.toByFrom||{},updatedAt:new Date().toISOString(),source:"default"},pa(!1);try{const ht=xt?._meta||{};Jd({url:dt||"",textLen:Number(ht.textLen||0),rawLines:Number(ht.rawLines||0),filteredLines:Number(ht.filteredLines||0),keys:Number(ht.keys||0)})}catch{}const yt=(Number(xt.fromRows)+Number(xt.toRows))*3;zi({total:Number.isFinite(yt)?yt:0,fromRows:xt.fromRows||0,toRows:xt.toRows||0}),cl(ht=>ht+1);try{const ht=Object.keys(yn.current||{});console.log("[MVT CSV] loaded",{rows:ht.length,hasSub05:!!yn.current?.sub05,fromRows:xt.fromRows||0,toRows:xt.toRows||0}),yn.current?.sub05&&console.log("[MVT CSV] sub05",yn.current.sub05)}catch{}fi.current="",hn()})(),()=>{B=!0}},[Z,hn]);const Lh=ot.useCallback((B,J,at)=>{const lt=Mn(B),dt=String(J||"").trim().toUpperCase();if(!lt||dt!=="L1"&&dt!=="L2"&&dt!=="L3")return;const xt=yn.current||{};(!xt[lt]||typeof xt[lt]!="object")&&(xt[lt]={});const yt=xt[lt][dt]&&typeof xt[lt][dt]=="object"?xt[lt][dt]:{value:"",status:"N/A"},ht={value:yt?.value!=null?String(yt.value):"",status:yt?.status!=null?String(yt.status):"N/A",...at&&typeof at=="object"?at:{}},mt=String(ht.status||"").trim().toUpperCase();!mt||mt==="N/A"||mt==="NA"?ht.status="N/A":mt==="PASS"?ht.status="PASS":ht.status="failed",xt[lt][dt]=ht,yn.current=xt,pa(!0),cl(vt=>vt+1),fi.current="",hn()},[hn]),Dd=ot.useCallback(B=>{const lt=String(B||"").split(/\r?\n/).map(It=>It.trim()).filter(Boolean);if(lt.length<=1){alert("CSV looks empty or invalid.");return}const dt=String(lt[0]||""),xt=dt.includes(";")&&dt.split(";").length>dt.split(",").length?";":",",ht=dt.split(xt).map(It=>It.replace(/^\uFEFF/,"").trim()).map(It=>It.toLowerCase()),mt=ht.findIndex(It=>It==="from"),vt=ht.findIndex(It=>It==="phase"),wt=ht.findIndex(It=>It==="remarks"||It==="result"||It==="status"),Nt=ht.findIndex(It=>It.includes("g")||It.includes("gohm")||It.includes("value")||It==="l1"||It==="l2"||It==="l3"),Rt=ht.findIndex(It=>It==="to"),qt={},jt={};let Lt=0,Tt=0;const Ot=It=>{const _t=String(It||"").trim().toUpperCase();return!_t||_t==="N/A"||_t==="NA"?"N/A":_t==="PASS"?"PASS":(_t.startsWith("FAIL"),"failed")};if(vt>=0)for(let It=1;It<lt.length;It++){const Mt=lt[It].split(xt).map(Zt=>Zt.trim()),_t=mt>=0?Mt[mt]:Mt[0],Et=Rt>=0?Mt[Rt]:Mt[1],Pt=vt>=0?Mt[vt]:Mt[2],Dt=wt>=0?Mt[wt]:Mt.length?Mt[Mt.length-1]:"",Ft=Nt>=0?Mt[Nt]:"",Xt=Mn(_t),Wt=Mn(Et),Vt=String(Pt||"").trim().toUpperCase();Xt&&(Vt!=="L1"&&Vt!=="L2"&&Vt!=="L3"||(Lt+=1,Wt&&(Tt+=1),Et&&!jt[Xt]&&(jt[Xt]=String(Et||"").trim()),qt[Xt]||(qt[Xt]={}),qt[Xt][Vt]={value:Ft?`${Ft}`:"",status:Ot(Dt)}))}else{const It=ht.findIndex(Wt=>Wt==="l1"||Wt.startsWith("l1")),Mt=ht.findIndex(Wt=>Wt==="l2"||Wt.startsWith("l2")),_t=ht.findIndex(Wt=>Wt==="l3"||Wt.startsWith("l3")),Et=Wt=>{const Vt=Wt.toLowerCase();return ht.findIndex(Zt=>Zt.startsWith(Vt)&&(Zt.includes("remark")||Zt.includes("status")||Zt.includes("result")))},Pt=Et("L1"),Dt=Et("L2"),Ft=Et("L3"),Xt=(Wt,Vt)=>{const Zt=Vt>=0?Wt[Vt]:"",Ut=String(Zt||"").trim();return Ut?`${Ut}`:""};for(let Wt=1;Wt<lt.length;Wt++){const Vt=lt[Wt].split(xt).map(ve=>ve.trim()),Zt=mt>=0?Vt[mt]:Vt[0],Ut=Rt>=0?Vt[Rt]:Vt[1],$t=Mn(Zt),Gt=Mn(Ut);if(!$t)continue;Lt+=1,Gt&&(Tt+=1),Ut&&!jt[$t]&&(jt[$t]=String(Ut||"").trim()),qt[$t]||(qt[$t]={});const se=Pt>=0?Ot(Vt[Pt]):"N/A",fe=Dt>=0?Ot(Vt[Dt]):"N/A",bt=Ft>=0?Ot(Vt[Ft]):"N/A";qt[$t].L1={value:Xt(Vt,It),status:se},qt[$t].L2={value:Xt(Vt,Mt),status:fe},qt[$t].L3={value:Xt(Vt,_t),status:bt}}}yn.current=qt,Ii.current=jt,pa(!0),Es(null),zi({total:(Lt+Tt)*3,fromRows:Lt,toRows:Tt}),cl(It=>It+1),fi.current="",hn()},[hn]),Ph=ot.useCallback(()=>{const B=yn.current||{},J=Ii.current||{},at={byFrom:B,toByFrom:J,updatedAt:new Date().toISOString(),source:"user"};try{localStorage.setItem("cew:mvt:test_results_submitted",JSON.stringify(at))}catch{}Ns.current=at,pa(!1),Kn(null),cl(lt=>lt+1),fi.current="",hn(),alert("Test results submitted successfully!")},[hn]),ug=ot.useCallback(()=>{if(Fi){alert("Please submit test results before exporting.");return}const B=Ns.current;if(!B||!B.byFrom){alert("No submitted test results to export.");return}const J=B.byFrom||{},at=B.toByFrom||{},lt=["from,to,phase,L1 (G),remarks"],dt=Object.keys(J).sort(),xt=wt=>{const Nt=Mn(wt);if(Nt==="css")return"CSS";const Rt=Nt.match(/^(ss|sub)(\d{1,2})$/i);return Rt?`SUB${String(parseInt(Rt[2],10)).padStart(2,"0")}`:String(wt||"").toUpperCase()};dt.forEach(wt=>{const Nt=J[wt]||{},Rt=String(at[wt]||"").trim();["L1","L2","L3"].forEach(qt=>{const jt=Nt?.[qt]||{value:"",status:"N/A"},Lt=String(jt?.value||"").trim(),Tt=String(jt?.status||"N/A").trim();lt.push(`${xt(wt)},${Rt},${qt},${Lt},${Tt}`)})});const yt=lt.join(`
`),ht=new Blob([yt],{type:"text/csv;charset=utf-8;"}),mt=URL.createObjectURL(ht),vt=document.createElement("a");vt.href=mt,vt.download=`mv_circuits_test_export_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(vt),vt.click(),document.body.removeChild(vt),URL.revokeObjectURL(mt)},[Fi]),Qm=ot.useCallback(()=>{try{if(Fi)return;const B=Bc.current;if(!B)return;let J=Ns.current;if(!J)try{const jt=localStorage.getItem("cew:mvt:test_results_submitted");jt&&(J=JSON.parse(jt))}catch(jt){}const at=J&&typeof J=="object"?J.byFrom||{}:{},lt=J&&typeof J=="object"?J.toByFrom||{}:{},dt=jt=>{const Lt=String(jt||"").trim().toUpperCase();return Lt==="PASS"?"passed":Lt==="FAIL"||Lt==="FAILED"||Lt.startsWith("FAIL")?"failed":"not_tested"},xt=new Set;B==="not_tested"&&(ue.current||[]).forEach(Lt=>{const Tt=String(Lt?.stationLabel||Lt?.label||Lt?.text||"").trim(),Ot=fn(Tt);Ot&&gn(Ot)&&Ot!=="css"&&xt.add(Ot)});const yt=B==="not_tested"?Array.from(new Set([...Object.keys(at||{}),...Array.from(xt)])).sort():Object.keys(at||{}).sort(),ht=jt=>{const Tt=Mn(jt).match(/^(ss|sub)(\d{1,2})$/i);return Tt?`SUB${String(parseInt(Tt[2],10)).padStart(2,"0")}`:String(jt||"").toUpperCase()},mt=["from,to,phase,L1 (G),remarks"];yt.forEach(jt=>{const Lt=at?.[jt]||{},Tt=String(lt?.[jt]||"").trim();["L1","L2","L3"].forEach(Ot=>{const It=Lt?.[Ot]||{value:"",status:"N/A"},Mt=String(It?.value||"").trim(),_t=String(It?.status||"N/A").trim(),Et=dt(_t);B==="passed"&&Et!=="passed"||B==="failed"&&Et!=="failed"||B==="not_tested"&&Et!=="not_tested"||mt.push(`${ht(jt)},${Tt},${Ot},${Mt},${_t}`)})});const vt=mt.join(`
`),wt=new Blob([vt],{type:"text/csv;charset=utf-8;"}),Nt=URL.createObjectURL(wt),Rt=document.createElement("a");Rt.href=Nt;const qt=String(B).toLowerCase();Rt.download=`mv_circuits_test_${qt}_export_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(Rt),Rt.click(),document.body.removeChild(Rt),URL.revokeObjectURL(Nt)}catch(B){console.error("Error exporting filtered MVT CSV:",B)}},[Fi]),Ic=ot.useCallback(B=>{const J=B&&typeof B=="object"?B:{};let at=0,lt=0,dt=0;return Object.keys(J).forEach(xt=>{const yt=J?.[xt]||{};["L1","L2","L3"].forEach(ht=>{if(!yt||!Object.prototype.hasOwnProperty.call(yt,ht))return;at+=1;const mt=String(yt?.[ht]?.status||"N/A").trim().toUpperCase();mt==="PASS"?lt+=1:(mt==="FAILED"||mt==="FAIL")&&(dt+=1)})}),{total:at,passed:lt,failed:dt}},[]),fg=ot.useCallback(B=>{const lt=String(B||"").split(/\r?\n/).map(jt=>jt.trim()).filter(Boolean);if(lt.length<=1){Gn.current={},La({total:0,passed:0,failed:0}),ll(!0),Lr(null),Da(jt=>jt+1);return}const dt=String(lt[0]||""),xt=dt.includes(";")&&dt.split(";").length>dt.split(",").length?";":",",ht=dt.split(xt).map(jt=>jt.replace(/^\uFEFF/,"").trim()).map(jt=>jt.toLowerCase()),mt=ht.findIndex(jt=>jt==="ind_id"||jt==="inv_id"||jt==="id"),vt=ht.findIndex(jt=>jt==="phase"),wt=ht.findIndex(jt=>jt==="value"||jt.includes("g")||jt.includes("gohm")),Nt=ht.findIndex(jt=>jt==="remarks"||jt==="result"||jt==="status"),Rt=jt=>{const Tt=String(jt||"").trim().toUpperCase();return!Tt||Tt==="N/A"||Tt==="NA"?"N/A":Tt==="PASS"?"PASS":(Tt.startsWith("FAIL"),"FAILED")},qt={};for(let jt=1;jt<lt.length;jt++){const Lt=lt[jt].split(xt).map(Pt=>Pt.trim()),Tt=mt>=0?Lt[mt]:Lt[0],Ot=vt>=0?Lt[vt]:Lt[1],It=wt>=0?Lt[wt]:Lt[2],Mt=Nt>=0?Lt[Nt]:Lt.length>5?Lt[5]:"",_t=Mn(Tt),Et=String(Ot||"").trim().toUpperCase();_t&&(Et!=="L1"&&Et!=="L2"&&Et!=="L3"||(qt[_t]||(qt[_t]={}),qt[_t][Et]={value:It||"",status:Rt(Mt)}))}Gn.current=qt,Pa.current=null,ll(!0),Lr(null),La(Ic(qt)),Da(jt=>jt+1)},[Ic]),Up=ot.useCallback((B,J,at)=>{const lt=Mn(B),dt=String(J||"").trim().toUpperCase();if(!lt||dt!=="L1"&&dt!=="L2"&&dt!=="L3")return;const xt=Gn.current||{};xt[lt]||(xt[lt]={});const ht={...xt[lt]?.[dt]&&typeof xt[lt][dt]=="object"?xt[lt][dt]:{value:"",status:"N/A"},...at||{}},mt=String(ht.status||"N/A").trim().toUpperCase();mt==="PASS"?ht.status="PASS":mt==="FAIL"||mt==="FAILED"?ht.status="FAILED":ht.status="N/A",xt[lt][dt]=ht,Gn.current=xt,Pa.current=null,ll(!0),La(Ic(xt)),Da(vt=>vt+1)},[Ic]),Jm=ot.useCallback(()=>{const B=Gn.current||{},J={byInv:B,updatedAt:new Date().toISOString(),source:"user"};try{localStorage.setItem("cew:lvtt:test_results_submitted",JSON.stringify(J))}catch{}Pa.current=J,ll(!1),ma(null),La(Ic(B)),Da(at=>at+1),alert("Test results submitted successfully!")},[Ic]),Gr=ot.useCallback(()=>{if(Co){alert("Please submit test results before exporting.");return}const B=Pa.current,J=B&&B.byInv&&typeof B.byInv=="object"?B.byInv||{}:Gn.current||{};if(!J||Object.keys(J).length===0){alert("No test results to export.");return}const at=["ind_id,phase,value,remarks"],lt=Object.keys(J).sort((vt,wt)=>String(vt).localeCompare(String(wt),void 0,{numeric:!0,sensitivity:"base"})),dt=vt=>{const wt=Nr.current?.[Mn(vt)]||null,Nt=String(wt?.displayId||"").trim();return Nt||String(vt||"").toUpperCase()};lt.forEach(vt=>{const wt=J[vt]||{};["L1","L2","L3"].forEach(Nt=>{const Rt=wt?.[Nt]||{value:"",status:"N/A"},qt=String(Rt?.value||"").trim(),jt=String(Rt?.status||"N/A").trim();at.push(`${dt(vt)},${Nt},${qt},${jt}`)})});const xt=at.join(`
`),yt=new Blob([xt],{type:"text/csv;charset=utf-8;"}),ht=URL.createObjectURL(yt),mt=document.createElement("a");mt.href=ht,mt.download=`lv_testing_export_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(mt),mt.click(),document.body.removeChild(mt),URL.revokeObjectURL(ht)},[Co]),Hp=ot.useCallback(()=>{try{if(Co)return;const B=lo.current;if(!B)return;let J=Pa.current;if(!J)try{const qt=localStorage.getItem("cew:lvtt:test_results_submitted");qt&&(J=JSON.parse(qt))}catch(qt){}const at=J&&typeof J=="object"&&J.byInv&&typeof J.byInv=="object"?J.byInv||{}:Gn.current||{},lt=Object.keys(Nr.current||{}),dt=qt=>{const jt=String(qt||"").trim().toUpperCase();return jt==="PASS"?"passed":jt==="FAIL"||jt==="FAILED"||jt.startsWith("FAIL")?"failed":"not_tested"},xt=B==="not_tested"?Array.from(new Set([...Object.keys(at||{}),...lt])).sort((qt,jt)=>String(qt).localeCompare(String(jt),void 0,{numeric:!0,sensitivity:"base"})):Object.keys(at||{}).sort((qt,jt)=>String(qt).localeCompare(String(jt),void 0,{numeric:!0,sensitivity:"base"})),yt=qt=>{const jt=Nr.current?.[Mn(qt)]||null,Lt=String(jt?.displayId||"").trim();return Lt||String(qt||"").toUpperCase()},ht=["ind_id,phase,value,remarks"];if(xt.forEach(qt=>{const jt=at?.[qt]||{};["L1","L2","L3"].forEach(Lt=>{const Tt=jt?.[Lt]||{value:"",status:"N/A"},Ot=String(Tt?.value||"").trim(),It=String(Tt?.status||"N/A").trim(),Mt=dt(It);B==="passed"&&Mt!=="passed"||B==="failed"&&Mt!=="failed"||B==="not_tested"&&Mt!=="not_tested"||ht.push(`${yt(qt)},${Lt},${Ot},${It}`)})}),ht.length<=1){alert("No matching test results to export for the selected filter.");return}const mt=ht.join(`
`),vt=new Blob([mt],{type:"text/csv;charset=utf-8;"}),wt=URL.createObjectURL(vt),Nt=document.createElement("a");Nt.href=wt;const Rt=String(B).toLowerCase();Nt.download=`lv_testing_${Rt}_export_${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(Nt),Nt.click(),document.body.removeChild(Nt),URL.revokeObjectURL(wt)}catch(B){console.error("Error exporting filtered LVTT CSV:",B)}},[Co]);ot.useEffect(()=>{if(!K){Gn.current={},Nr.current={},Lr(null),La({total:0,passed:0,failed:0}),ll(!1),Pa.current=null,Da(lt=>lt+1),Rf();return}try{const lt=localStorage.getItem("cew:lvtt:test_results_submitted"),dt=lt?JSON.parse(lt):null;if(dt&&dt.byInv&&typeof dt.byInv=="object"){Gn.current=dt.byInv,Pa.current=dt,ll(!1),Lr(null),La(Ic(dt.byInv)),Da(xt=>xt+1);return}}catch{}let B=!1;const J=["/LV_TERMINATION_and_TESTING PROGRESS/lv_testing.csv","/LV_TERMINATION_and_TESTING PROGRESS/lv_test.csv"],at=lt=>{const yt=String(lt||"").split(/\r?\n/).map(_t=>_t.trim()).filter(Boolean);if(yt.length<=1)return{byInv:{},total:0,passed:0,failed:0};const ht=String(yt[0]||""),mt=ht.includes(";")&&ht.split(";").length>ht.split(",").length?";":",",wt=ht.split(mt).map(_t=>_t.replace(/^\uFEFF/,"").trim()).map(_t=>_t.toLowerCase()),Nt=wt.findIndex(_t=>_t==="ind_id"||_t==="inv_id"||_t==="id"),Rt=wt.findIndex(_t=>_t==="phase"),qt=wt.findIndex(_t=>_t==="value"||_t.includes("g")||_t.includes("gohm")),jt=wt.findIndex(_t=>_t==="remarks"||_t==="result"||_t==="status"),Lt=_t=>{const Pt=String(_t||"").trim().toUpperCase();return Pt?Pt==="PASS"?"PASS":(Pt.startsWith("FAIL"),"FAILED"):"N/A"},Tt={};let Ot=0,It=0,Mt=0;for(let _t=1;_t<yt.length;_t++){const Et=yt[_t].split(mt).map(Ut=>Ut.trim()),Pt=Nt>=0?Et[Nt]:Et[0],Dt=Rt>=0?Et[Rt]:Et[1],Ft=qt>=0?Et[qt]:Et[2],Xt=jt>=0?Et[jt]:Et.length>5?Et[5]:"",Wt=Mn(Pt),Vt=String(Dt||"").trim().toUpperCase();if(!Wt||Vt!=="L1"&&Vt!=="L2"&&Vt!=="L3")continue;Ot++;const Zt=Lt(Xt);Zt==="PASS"?It++:Mt++,Tt[Wt]||(Tt[Wt]={}),Tt[Wt][Vt]={value:Ft||"",status:Zt}}return{byInv:Tt,total:Ot,passed:It,failed:Mt}};return(async()=>{let lt="";for(const xt of J)try{const yt=`${xt}?v=${Date.now()}`,ht=await fetch(yt,{cache:"no-store"});if(ht&&ht.ok){lt=await ht.text();break}}catch{}if(B)return;const dt=at(lt);Gn.current=dt.byInv||{},La({total:dt.total||0,passed:dt.passed||0,failed:dt.failed||0}),ll(!1),Pa.current=null,Da(xt=>xt+1),console.log("[LVTT CSV] loaded",{inverters:Object.keys(Gn.current).length,passed:dt.passed,failed:dt.failed})})(),()=>{B=!0}},[K,Rf,Ic]),ot.useEffect(()=>{if(!K)return;const B=Ll.current||{};try{$n.current?._clear?.()}catch{}const J=(at,lt)=>{if(!lt||!at)return;const dt=String(lt._lvttDisplayId||"").trim()||String(lt._lvttRaw||"").trim()||String(at),xt=String(Bn.current||"termination"),yt=dt;let ht="rgba(255,255,255,0.98)";const mt=lo.current;if(xt==="termination")ht=Math.max(0,Math.min(3,Number(En.current?.[at]??0)))===3?"rgba(34,197,94,0.98)":"rgba(255,255,255,0.98)";else{const wt=Gn.current?.[at],Nt=String(wt?.L1?.status||"N/A").trim().toUpperCase(),Rt=String(wt?.L2?.status||"N/A").trim().toUpperCase(),qt=String(wt?.L3?.status||"N/A").trim().toUpperCase(),jt=Nt==="FAILED"||Rt==="FAILED"||qt==="FAILED"||Nt==="FAIL"||Rt==="FAIL"||qt==="FAIL";jt?ht="rgba(239,68,68,0.98)":Nt==="PASS"&&Rt==="PASS"&&qt==="PASS"&&(ht="rgba(34,197,94,0.98)"),mt&&((mt==="passed"?Nt==="PASS"||Rt==="PASS"||qt==="PASS":mt==="failed"?jt:Nt==="N/A"||Rt==="N/A"||qt==="N/A")?ht=mt==="passed"?"rgba(34,197,94,0.98)":mt==="failed"?"rgba(239,68,68,0.98)":"rgba(148,163,184,0.98)":ht="rgba(148,163,184,0.18)")}let vt=!1;lt.options.text!==yt&&(lt.options.text=yt,vt=!0),lt.options.textColor!==ht&&(lt.options.textColor=ht,vt=!0),lt.options.underline!==!0&&(lt.options.underline=!0,vt=!0),lt.options.underlineColor!==ht&&(lt.options.underlineColor=ht,vt=!0),lt._lvttLocked=xt==="termination"&&ht==="rgba(34,197,94,0.98)",vt&&lt.redraw?.()};Object.keys(B).forEach(at=>J(at,B[at]))},[K,vn,kn,Bu,Go]),ot.useEffect(()=>{Z&&String(pr.current||"termination")==="testing"&&(fi.current="",hn())},[Z,$s,hn]),ot.useEffect(()=>{K&&String(Bn.current||"termination")==="termination"&&(fi.current="",hn())},[K,Vn,Ze,hn]),ot.useEffect(()=>{if(!K||!Ke||!ge.current)return;const B=ge.current,J=lt=>{const dt=String(lt||"").match(/^(ss|sub)(\d{2})$/i);if(!dt)return 0;const xt=parseInt(dt[2],10);if(!Number.isFinite(xt)||xt<=0)return 0;const yt=Tn.current||{};return Math.max(0,Number(yt?.[xt]??yt?.[String(xt)]??0)||0)},at=lt=>{try{if(String(Bn.current||"termination")!=="termination")return;const dt=lt?.containerPoint;if(!dt)return;try{const jt=Nr.current||{},Lt=Object.keys(jt);if(Lt.length){let Tt=1/0;const Ot=26;for(const It of Lt){const Mt=jt[It];if(!Mt)continue;const _t=Number(Mt.lat),Et=Number(Mt.lng);if(!Number.isFinite(_t)||!Number.isFinite(Et))continue;const Dt=B.latLngToContainerPoint([_t,Et]).distanceTo(dt);Dt<Tt&&(Tt=Dt)}if(Tt<=Ot)return}}catch(jt){}const xt=qn.current||[];if(!xt.length)return;let yt=null,ht=1/0;const mt=28;for(let jt=0;jt<xt.length;jt++){const Lt=xt[jt],Tt=String(Lt?.text||"").trim();if(!Tt)continue;const Ot=Un(Tt);if(!Ot)continue;const It=J(Ot);if(!(It>0))continue;const Mt=Number(Lt?.lat),_t=Number(Lt?.lng);if(!Number.isFinite(Mt)||!Number.isFinite(_t))continue;const Pt=B.latLngToContainerPoint([Mt,_t]).distanceTo(dt);Pt<ht&&(ht=Pt,yt={raw:Tt,subNorm:Ot,maxInv:It})}if(!yt||!(ht<=mt))return;const vt=Number(Vr.current?.[yt.subNorm]??0),wt=Math.max(0,Math.min(yt.maxInv,Number.isFinite(vt)?vt:0)),Nt=lt?.originalEvent,Rt=Nt?.clientX??0,qt=Nt?.clientY??0;Lr({mode:"sub_termination",subId:String(yt.raw||""),subNorm:yt.subNorm,max:yt.maxInv,draft:wt,x:Rt,y:qt})}catch{}};return B.on("click",at),()=>{B.off("click",at)}},[K,Ke,Fu,Ze,Vn,vn,Un]),ot.useEffect(()=>{if(!Z||!Ke||!ge.current)return;const B=ge.current,J=dt=>{const xt=Mn(dt);if(!xt)return"";if(xt==="css")return"css";const yt=xt.match(/^(ss|sub)(\d{1,2})$/i);if(!yt)return"";const ht=String(yt[1]||"").toLowerCase(),mt=String(parseInt(yt[2],10)).padStart(2,"0");return`${ht}${mt}`},at=dt=>{const xt=J(dt);if(xt==="css")return!0;const yt=xt.match(/^(ss|sub)(\d{2})$/i);if(!yt)return!1;const ht=parseInt(yt[2],10);return Number.isFinite(ht)&&ht>=1&&ht<=6},lt=dt=>{try{if(ce||String(pr.current||"termination")!=="termination")return;const xt=dt?.containerPoint;if(!xt)return;const yt=qn.current||[];if(!yt.length)return;let ht=null,mt=1/0;const vt=28;for(let qt=0;qt<yt.length;qt++){const jt=yt[qt],Lt=String(jt?.text||"").trim();if(!Lt)continue;const Tt=J(Lt);if(!(Tt&&at(Tt)))continue;const Ot=wn(Tt);if(!(Ot>0))continue;const It=bn(Tt,qe.current?.[Tt]??0);if(Ot>0&&It===Ot)continue;const _t=Number(jt?.lat),Et=Number(jt?.lng);if(!Number.isFinite(_t)||!Number.isFinite(Et))continue;const Dt=B.latLngToContainerPoint([_t,Et]).distanceTo(xt);Dt<mt&&(mt=Dt,ht={stationLabel:Lt,stationNorm:Tt,cur:It})}if(!ht||!(mt<=vt))return;const wt=dt?.originalEvent,Nt=wt?.clientX??0,Rt=wt?.clientY??0;_i({stationLabel:String(ht.stationLabel||"").trim()||ht.stationNorm,stationNorm:ht.stationNorm,draft:ht.cur,x:Nt,y:Rt})}catch{}};return B.on("click",lt),()=>{B.off("click",lt)}},[Z,Ke,ce,Sn]),ot.useEffect(()=>{K&&Rf()},[K,vn,Rf]),ot.useEffect(()=>{K&&Fp()},[K,vn,Fp]),ot.useEffect(()=>{Ul.current=Yt==="always",Yt==="none"&&(Hl.current=null,Vl.current=null),hn()},[Yt,hn]),ot.useEffect(()=>{if(!ge.current||Yt!=="always")return;const B=ge.current.getContainer();if(!B)return;const J=()=>{fi.current="",hn()};return B.addEventListener("click",J,!0),()=>B.removeEventListener("click",J,!0)},[Yt,hn]);const{dailyLog:ti,addRecord:Ra,deleteRecord:t0}=ex(h?.key||"DC"),{exportToExcel:dg}=X4(),Dh=ot.useMemo(()=>{if(!C)return new Set;const B=new Set,J=String(_f||"");return(ti||[]).forEach(at=>{if(!at||String(at.date||"")!==J)return;const lt=at.selectedPolygonIds;!Array.isArray(lt)||lt.length===0||lt.forEach(dt=>{const xt=String(dt||"");xt&&B.add(xt)})}),B},[ti,C,_f]);ot.useEffect(()=>{aa.current=Dh},[Dh]),ot.useEffect(()=>{if(sr){const B=ti.find(J=>J.id===sr);B&&(oc([...B.selectedPolygonIds||[]]),b(B.total_cable||0),window.__editingAmount=B.total_cable||0)}else oc([]),b(0),window.__editingAmount=0},[sr,ti]),ot.useMemo(()=>{if(!sr||$r.length===0)return 0;if(w)return $r.reduce((B,J)=>{const at=pt[Mn(J)];return at?.plus?.length?B+at.plus.reduce((lt,dt)=>lt+dt,0):B},0);if(E){const B=new Set;$r.forEach(lt=>{const dt=Ge.current[lt];dt&&dt.stringId&&B.add(Mn(dt.stringId))});let J=0,at=0;return B.forEach(lt=>{const dt=pt[lt];dt&&(dt.plus&&dt.plus.length>0&&(J+=dt.plus.reduce((xt,yt)=>xt+yt,0)),dt.minus&&dt.minus.length>0&&(at+=dt.minus.reduce((xt,yt)=>xt+yt,0)))}),J+at}if(T){const B=new Set($r.map(at=>String(at)));return(pf.current||Uo||[]).reduce((at,lt)=>{const dt=String(lt?.id||"");if(!dt||!B.has(dt))return at;const xt=Number(lt?.meters);return at+(Number.isFinite(xt)?xt:0)},0)}return $r.length},[sr,$r,w,E,T,pt,Uo]),ot.useEffect(()=>{if(I){const dt=ge.current;if(!dt||(As.current||(As.current=Ce.layerGroup().addTo(dt)),As.current.clearLayers(),!sr))return;const xt=ti.find(Nt=>Nt.id===sr);if(!xt)return;const yt=xt.selectedPolygonIds||[];if(yt.length===0)return;const ht=new Set,mt=new Set;yt.forEach(Nt=>{String(Nt).startsWith("segment:")?ht.add(String(Nt).replace("segment:","")):mt.add(String(Nt))});const vt=Uc.current||{};ht.forEach(Nt=>{const Rt=vt[Nt];!Rt||!Array.isArray(Rt)||Rt.forEach(qt=>{if(!(!qt||typeof qt.getLatLngs!="function")){try{const jt=qt.getLatLngs(),Lt=Ce.polyline(jt,{color:"#f97316",weight:5,opacity:1});As.current.addLayer(Lt)}catch{}try{if(String(pr.current||"termination")==="termination"){const jt=Ac.current||[],Lt=ks.current||0;let Tt=null,Ot=1/0;for(let It=0;It<Lt;It++){const Mt=jt[It];if(!Mt||!Mt._mvtStationNorm)continue;const _t=distToLabelPx(Mt);_t<hitRadius&&_t<Ot&&(Ot=_t,Tt=Mt)}if(Tt){const It=String(Tt._mvtStationLabel||"").trim(),Mt=String(Tt._mvtStationNorm||""),_t=!!Tt._mvtLocked;if(Mt&&!_t){const Et=e?.clientX??0,Pt=e?.clientY??0,Dt=bn(Mt,qe.current?.[Mt]??0);_i({stationLabel:It||Mt,stationNorm:Mt,draft:Dt,x:Et,y:Pt}),cn.current=null;return}}}}catch{}}})}),(pl.current||[]).forEach(Nt=>{const Rt=String(Nt?.id||"");if(!mt.has(Rt))return;const qt=Nt?.coords;if(!(!qt||!Array.isArray(qt)||qt.length<2))try{const jt=qt.map(Tt=>[Tt[1],Tt[0]]),Lt=Ce.polyline(jt,{color:"#f97316",weight:4,opacity:1});As.current.addLayer(Lt)}catch{}});return}if(T){const dt=ge.current;if(!dt)return;Mi.current||(Mi.current=Ce.layerGroup({pane:"mvftHistoryHighlightPane"}).addTo(dt));const xt=Mi.current;if(xt.clearLayers(),!sr)return;const yt=ti.find(wt=>wt.id===sr);if(!yt)return;const ht=Array.isArray(yt.selectedPolygonIds)?yt.selectedPolygonIds.map(String):[];if(ht.length===0)return;const mt=new Set(ht);(pf.current||Uo||[]).forEach(wt=>{const Nt=String(wt?.id||"");if(!mt.has(Nt))return;const Rt=wt?.coords;if(!(!Array.isArray(Rt)||Rt.length<2))try{const qt=Ce.polyline(Rt,{color:"#f97316",weight:3.2,opacity:1,interactive:!1,pane:"mvftHistoryHighlightPane"});xt.addLayer(qt)}catch{}});return}if(D){const dt=Ll.current||{},xt=wt=>{const Nt=String(wt||"").toLowerCase();return Nt?/tx\s*\d+/.test(Nt)&&/inv\s*\d+/.test(Nt):!1},yt=sr?new Set($r.map(Mn).filter(xt)):new Set,ht=h?.invIdTextBgColor||null,mt=h?.invIdTextBgStrokeColor||null,vt=typeof h?.invIdTextBgStrokeWidth=="number"?h.invIdTextBgStrokeWidth:0;if(pp.current.forEach(wt=>{if(yt.has(wt))return;const Nt=dt[wt];Nt&&(Nt.options.textColor="rgba(255,255,255,0.98)",Nt.options.textColorNoBg=null,Nt.options.bgColor=ht,Nt.options.bgStrokeColor=mt,Nt.options.bgStrokeWidth=vt,Nt.redraw?.())}),!sr||yt.size===0)pp.current=new Set;else{const wt=h?.invIdHighlightTextColor||"rgba(255,255,255,0.98)",Nt=h?.invIdHighlightBgColor||"rgba(249, 115, 22, 1)",Rt=h?.invIdHighlightBgStrokeColor||"rgba(255,255,255,0.9)",qt=h?.invIdHighlightBgStrokeWidth||2.5;yt.forEach(jt=>{const Lt=dt[jt];Lt&&(Lt.options.textColor=wt,Lt.options.textColorNoBg=null,Lt.options.bgColor=Nt,Lt.options.bgStrokeColor=Rt,Lt.options.bgStrokeWidth=qt,Lt.redraw?.())}),pp.current=yt;return}}if(C){const dt=hu.current||{},xt=Ge.current||{},yt=jt=>{const Lt=String(jt||"").toLowerCase();return Lt?/tx\s*\d+/.test(Lt)&&/inv\s*\d+/.test(Lt):!1},ht=sr?new Set($r.map(Mn).filter(yt)):new Set,mt=sr?new Set($r.filter(jt=>!yt(jt))):new Set,vt=h?.invIdTextBgColor||null,wt=h?.invIdTextBgStrokeColor||null,Nt=typeof h?.invIdTextBgStrokeWidth=="number"?h.invIdTextBgStrokeWidth:0;ch.current.forEach(jt=>{if(ht.has(jt))return;const Lt=dt[jt];if(!Lt)return;const Tt=Pd?.has(jt);Lt.options.textColor=Tt?h?.invIdDoneTextColor||"rgba(34,197,94,1)":"rgba(255,255,255,0.98)",Lt.options.textColorNoBg=Tt&&h?.invIdDoneTextColorNoBg||null,Lt.options.bgColor=Tt?h?.invIdDoneBgColor||null:vt,Lt.options.bgStrokeColor=Tt?h?.invIdDoneBgStrokeColor||null:wt,Lt.options.bgStrokeWidth=Tt?h?.invIdDoneBgStrokeWidth||0:Nt,Lt.redraw?.()});const Rt=ol,qt=go;if(uh.current.forEach(jt=>{if(mt.has(jt))return;const Lt=xt[jt];if(Lt&&Lt.layer&&Lt.layer.setStyle){const Tt=fu.current?.[jt],Ot=Tt?.left===Jr.TERMINATED||Tt?.right===Jr.TERMINATED;Lt.layer.setStyle(Ot?{color:"#22c55e",weight:1.5,fill:!1,fillOpacity:0}:{color:Rt,weight:qt,fill:!1,fillOpacity:0})}}),!sr){ch.current=new Set,uh.current=new Set;return}if(ht.size>0){const jt=h?.invIdHighlightTextColor||"rgba(255,255,255,0.98)",Lt=h?.invIdHighlightBgColor||"rgba(249, 115, 22, 1)",Tt=h?.invIdHighlightBgStrokeColor||"rgba(255,255,255,0.9)",Ot=h?.invIdHighlightBgStrokeWidth||2.5;ht.forEach(It=>{const Mt=dt[It];Mt&&(Mt.options.textColor=jt,Mt.options.textColorNoBg=null,Mt.options.bgColor=Lt,Mt.options.bgStrokeColor=Tt,Mt.options.bgStrokeWidth=Ot,Mt.redraw?.())})}mt.size>0&&mt.forEach(jt=>{const Lt=xt[jt];Lt&&Lt.layer&&Lt.layer.setStyle&&Lt.layer.setStyle({color:"#f97316",weight:1.8,fill:!1,fillOpacity:0})}),ch.current=ht,uh.current=mt;return}if(w){const dt=Ll.current||{},xt=sr?new Set($r.map(Mn)):new Set,yt=h?.invIdTextBgColor||null,ht=h?.invIdTextBgStrokeColor||null,mt=typeof h?.invIdTextBgStrokeWidth=="number"?h.invIdTextBgStrokeWidth:0,vt=h?.invIdDoneTextColor||"rgba(11,18,32,0.98)",wt=h?.invIdDoneTextColorNoBg||"rgba(34,197,94,0.98)",Nt=h?.invIdDoneBgColor||"rgba(34,197,94,0.92)",Rt=h?.invIdDoneBgStrokeColor||"rgba(255,255,255,0.70)",qt=typeof h?.invIdDoneBgStrokeWidth=="number"?h.invIdDoneBgStrokeWidth:2;if(lh.current.forEach(It=>{if(xt.has(It))return;const Mt=dt[It];if(!Mt)return;const _t=tu.current?.has(It);Mt.options.textColor=_t?vt:"rgba(255,255,255,0.98)",Mt.options.textColorNoBg=_t?wt:null,Mt.options.bgColor=_t?Nt:yt,Mt.options.bgStrokeColor=_t?Rt:ht,Mt.options.bgStrokeWidth=_t?qt:mt,Mt.redraw?.()}),!sr||xt.size===0){lh.current=new Set;return}const jt=h?.invIdHighlightTextColor||"rgba(255,255,255,0.98)",Lt=h?.invIdHighlightBgColor||"rgba(249, 115, 22, 1)",Tt=h?.invIdHighlightBgStrokeColor||"rgba(255,255,255,0.9)",Ot=h?.invIdHighlightBgStrokeWidth||2.5;xt.forEach(It=>{const Mt=dt[It];Mt&&(Mt.options.textColor=jt,Mt.options.textColorNoBg=null,Mt.options.bgColor=Lt,Mt.options.bgStrokeColor=Tt,Mt.options.bgStrokeWidth=Ot,Mt.redraw?.())}),lh.current=xt;return}if(Z){const xt=!!Jo.current&&!!sr&&String(Sn||"termination")==="termination"?new Set($r.map(yt=>fn(yt)).filter(Boolean)):new Set;ir.current=xt;try{fi.current="",hn()}catch{}return}if(K){const xt=!!Jo.current&&!!sr?new Set($r.map(yt=>Un(yt)).filter(Boolean)):new Set;fh.current=xt;try{fi.current="",hn()}catch{}return}const B=Ge.current||{},J=new Set($r),at=ol,lt=go;if((!sr||$r.length===0)&&(Ln.current.forEach(dt=>{const xt=B[dt];if(xt&&xt.layer&&xt.layer.setStyle){const yt=(it.current||H).has(dt);xt.layer.setStyle(yt?{color:"#22c55e",weight:1.5,fill:!1,fillOpacity:0}:{color:at,weight:lt,fill:!1,fillOpacity:0})}}),!sr)){Ln.current=new Set;return}Ln.current.forEach(dt=>{if(!J.has(dt)){const xt=B[dt];if(xt&&xt.layer&&xt.layer.setStyle){const yt=(it.current||H).has(dt);xt.layer.setStyle(yt?{color:"#22c55e",weight:1.5,fill:!1,fillOpacity:0}:{color:at,weight:lt,fill:!1,fillOpacity:0})}}}),J.forEach(dt=>{const xt=B[dt];xt&&xt.layer&&xt.layer.setStyle&&xt.layer.setStyle({color:"#f97316",weight:1.8,fill:!1,fillOpacity:0})}),Ln.current=J},[sr,$r,H,w,D,C,I,T,ti,h,ki,Uo,Pd,Xi]),ot.useEffect(()=>{localStorage.setItem("cew_notes",JSON.stringify(Hn))},[Hn]),ot.useEffect(()=>{const B=new Set(Hn.map(J=>J.id));Yr(J=>new Set([...J].filter(at=>B.has(at)))),ka&&!B.has(ka.id)&&(Il(null),Ol(""),Ja(""),Ma(null),zr(""))},[Hn,ka]),ot.useEffect(()=>{if(!ge.current)return;const B=J=>String(J).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");Object.values(Jc.current).forEach(J=>J.remove()),Jc.current={},Hn.forEach(J=>{const at=gc.has(J.id),lt=Ce.divIcon({className:"custom-note-pin",html:`
          <div class="note-dot-hit ${at?"selected":""}">
            <div class="note-dot-core"></div>
          </div>
        `,iconSize:[28,28],iconAnchor:[14,14],popupAnchor:[0,-14]}),dt=Ce.marker([J.lat,J.lng],{icon:lt,interactive:!0,riseOnHover:!0}),xt=(J.text||"").trim(),yt=!!J.photoDataUrl;if(xt||yt){const ht=xt.replace(/\s+/g," "),vt=(ht.length>80?`${ht.slice(0,80)}`:ht)||(yt?"Photo attached":"");dt.bindTooltip(B(vt),{direction:"top",opacity:.98,className:"note-tooltip",offset:[0,-12],sticky:!1}),dt.on("mouseover",()=>dt.openTooltip()),dt.on("mouseout",()=>dt.closeTooltip())}dt.on("click",ht=>{try{const mt=ht?.originalEvent;mt&&(Ce.DomEvent.stopPropagation(mt),Ce.DomEvent.preventDefault(mt))}catch{}jl.current=!0,Il(J),Ol(J.text||""),Ja(zp(J)),Ma(J.photoDataUrl||null),zr(J.photoName||""),dt.closeTooltip?.(),setTimeout(()=>{jl.current=!1},200)}),dt.on("mousedown",ht=>{try{const mt=ht?.originalEvent;mt&&(Ce.DomEvent.stopPropagation(mt),Ce.DomEvent.preventDefault(mt))}catch{}}),dt.addTo(ge.current),Jc.current[J.id]=dt})},[Hn,gc,ce]);const Tu=ot.useRef({});ot.useEffect(()=>{if(!ge.current)return;if(!z){Object.values(Ku.current).forEach(lt=>lt.remove()),Ku.current={};return}const B=lt=>String(lt).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),J=(lt,dt)=>{try{const xt=lt.getBounds();if(!xt)return null;const yt=xt.getSouthWest(),ht=xt.getNorthEast(),mt=ht.lat-yt.lat,vt=ht.lng-yt.lng,wt=.15,Nt=yt.lat+mt*wt,Rt=ht.lat-mt*wt,qt=yt.lng+vt*wt,jt=ht.lng-vt*wt,Lt=It=>{const Mt=Math.sin(It)*1e4;return Mt-Math.floor(Mt)},Tt=Nt+Lt(dt)*(Rt-Nt),Ot=qt+Lt(dt*2+1)*(jt-qt);return{lat:Tt,lng:Ot}}catch{return null}},at={};Object.entries(Ge.current).forEach(([lt,dt])=>{if(dt?.layer?.feature?.properties?.tableId){const xt=dt.layer.feature.properties.tableId;at[xt]=dt.layer}}),Object.values(Ku.current).forEach(lt=>lt.remove()),Ku.current={},us.forEach((lt,dt)=>{const xt=Ka(lt.contractorId),yt=lt.completed?ta:xt?.color||"#888888";let ht=lt.lat,mt=lt.lng;if(lt.tableId&&lt.isoX!=null&&lt.isoY!=null&&lt.lat===0&&lt.lng===0)if(Tu.current[lt.id]){const Et=Tu.current[lt.id];ht=Et.lat,mt=Et.lng}else{const Et=at[lt.tableId];if(Et){let Pt=0;for(let Ft=0;Ft<lt.id.length;Ft++)Pt=(Pt<<5)-Pt+lt.id.charCodeAt(Ft),Pt=Pt&Pt;const Dt=J(Et,Pt);if(Dt)ht=Dt.lat,mt=Dt.lng,Tu.current[lt.id]=Dt;else try{const Ft=Et.getBounds().getCenter();ht=Ft.lat,mt=Ft.lng,Tu.current[lt.id]={lat:ht,lng:mt}}catch{return}}else return}if(!ht||!mt)return;const wt=_s.has(lt.id),Nt=qi?.id===lt.id,Rt=lt.punchNumber||dt+1,qt=Ce.divIcon({className:"custom-punch-pin",html:`
          <div class="punch-dot-hit ${wt?"selected":""} ${Nt?"editing":""}" style="--punch-color: ${yt};">
            <div class="punch-dot-core" style="background:${yt};${wt?"box-shadow: 0 0 0 4px rgba(255,255,255,0.6), 0 0 12px rgba(255,255,255,0.4);":""}"></div>
            <span class="punch-number">${Rt}</span>
          </div>
        `,iconSize:[18,18],iconAnchor:[9,9],popupAnchor:[0,-9]}),jt=Ce.marker([ht,mt],{icon:qt,interactive:!0,riseOnHover:!0,draggable:!1}),Lt=!!lt.text?.trim(),Tt=!!lt.photoDataUrl;if(Lt||Tt||xt||lt.tableId){let Et="";if(lt.tableId&&(Et+=`<span style="color:#fbbf24;font-size:10px">[${B(lt.tableId)}]</span> `),xt&&(Et+=`<strong style="color:${yt}">[${B(xt.name)}]</strong>`),Lt){const Pt=lt.text.replace(/\s+/g," ").trim(),Dt=Pt.length>60?`${Pt.slice(0,60)}`:Pt;Et+=(Et?" ":"")+B(Dt)}!Et&&Tt&&(Et="Fotoraf var"),Et&&(jt.bindTooltip(Et,{direction:"top",opacity:.98,className:"punch-tooltip",offset:[0,-9],sticky:!1}),jt.on("mouseover",()=>{El.current||jt.openTooltip()}),jt.on("mouseout",()=>jt.closeTooltip()))}let Ot=0,It=null,Mt=!1;const _t=150;jt.on("mousedown",Et=>{try{const Pt=Et?.originalEvent;if(Pt&&(Ce.DomEvent.stopPropagation(Pt),Ce.DomEvent.preventDefault(Pt)),Pt?.button!==0)return;Ot=Date.now(),It={x:Pt.clientX,y:Pt.clientY},Mt=!1;const Dt=setTimeout(()=>{It&&(Mt=!0,El.current={punchId:lt.id,marker:jt,startLatLng:jt.getLatLng()},jt.closeTooltip?.(),jt.getElement()?.classList.add("dragging"))},_t);jt._dragStartTimer=Dt}catch{}}),jt.on("click",Et=>{try{const Dt=Et?.originalEvent;Dt&&(Ce.DomEvent.stopPropagation(Dt),Ce.DomEvent.preventDefault(Dt))}catch{}if(jt._dragStartTimer&&(clearTimeout(jt._dragStartTimer),jt._dragStartTimer=null),Mt||El.current){Mt=!1;return}if(jl.current=!0,jt.closeTooltip?.(),Et?.originalEvent?.shiftKey)Qu(Dt=>{const Ft=new Set(Dt);return Ft.has(lt.id)?Ft.delete(lt.id):Ft.add(lt.id),Ft});else if(lt.tableId)Zu(lt.tableId),wl(!0);else{const Dt=Et?.originalEvent?.clientX||window.innerWidth/2,Ft=Et?.originalEvent?.clientY||window.innerHeight/2;Kc({x:Dt,y:Ft}),Sl(lt),cc(lt.text||""),Tl(lt.contractorId),kl(lt.photoDataUrl||null),Ya(lt.photoName||"")}setTimeout(()=>{jl.current=!1},200)}),jt.addTo(ge.current),Ku.current[lt.id]=jt})},[z,us,Wr,Ka,_s,qi]),ot.useEffect(()=>{if(!z)return;const B=at=>{if(!El.current)return;const{marker:lt}=El.current;if(!(!lt||!ge.current))try{const dt=ge.current.mouseEventToLatLng(at);lt.setLatLng(dt)}catch{}},J=at=>{if(!El.current)return;const{punchId:lt,marker:dt,startLatLng:xt}=El.current;try{dt.getElement()?.classList.remove("dragging");const yt=dt.getLatLng();(yt.lat!==xt.lat||yt.lng!==xt.lng)&&op(lt,yt)}catch{}El.current=null};return document.addEventListener("mousemove",B),document.addEventListener("mouseup",J),()=>{document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",J)}},[z,op]),ot.useEffect(()=>{const B=J=>{const at=document.activeElement;if(!(at&&(at.tagName==="INPUT"||at.tagName==="TEXTAREA"||at.isContentEditable))&&(J.ctrlKey||J.metaKey)){const dt=(J.key||"").toLowerCase(),xt=dt==="z"&&!J.shiftKey,yt=dt==="y"||dt==="z"&&J.shiftKey;if(xt){J.preventDefault(),jd();return}if(yt){J.preventDefault(),Ef();return}}if(J.key==="Escape"&&(Il(null),Ol(""),Ja(""),Ma(null),zr(""),z&&Qu(new Set)),J.key==="Delete"&&ce&&gc.size>0&&!z){const dt=new Set(gc);Ca(xt=>xt.filter(yt=>!dt.has(yt.id))),Yr(new Set)}J.key==="Delete"&&z&&ce&&_s.size>0&&(J.preventDefault(),Nl())};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[ce,gc,jd,Ef,Ca,z,_s,Nl]);const Bh=B=>{const J={id:`note_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,lat:B.lat,lng:B.lng,text:"",noteDate:Ks(),photoDataUrl:null,photoName:"",createdAt:new Date().toISOString()};Ca(at=>[...at,J])},e0=B=>{if(!B)return;if(!B.type?.startsWith("image/")){alert("Please select an image file.");return}const J=1.5*1024*1024;if(B.size>J){alert("Image is too large. Please select an image under 1.5MB.");return}const at=new FileReader;at.onload=()=>{const lt=typeof at.result=="string"?at.result:null;lt&&(Ma(lt),zr(B.name||""))},at.readAsDataURL(B)},n0=()=>{ka&&(Ca(B=>B.map(J=>J.id===ka.id?{...J,text:up,noteDate:Cm||zp(J),photoDataUrl:rf,photoName:js}:J)),Il(null),Ol(""),Ja(""),Ma(null),zr(""))},Vp=B=>{Ca(J=>J.filter(at=>at.id!==B)),Yr(J=>{const at=new Set(J);return at.delete(B),at}),Il(null),Ol(""),Ja(""),Ma(null),zr("")},$p=()=>{if(gc.size===0)return;const B=new Set(gc);Ca(J=>J.filter(at=>!B.has(at.id))),Yr(new Set)};ot.useEffect(()=>{const B=h?.csvPath,J=h?.csvFormat||"dc";B&&fetch(B).then(at=>at.text()).then(at=>{if(J==="mc4_strings"){try{const yt=at.split(/\r?\n/).filter(ht=>ht&&ht.trim());if(yt.length<=1)D&&bf(0),C&&kp(0);else{const ht=(yt[0]||"").toLowerCase(),vt=ht.includes("id")&&ht.includes("length")?1:0,wt=Math.max(0,yt.length-vt);D&&bf(wt),C&&kp(wt);const Nt={},Rt=/^(TX\d+)[-_\s]*INV\s*(\d+)[-_\s]*STR\s*(\d+)$/i;for(let qt=vt;qt<yt.length;qt++){const jt=yt[qt];if(!jt)continue;const Lt=jt.split(","),Tt=String(Lt?.[0]||"").trim();if(!Tt)continue;const Ot=Tt.match(Rt);if(!Ot)continue;const It=String(Ot[1]||"").replace(/\s+/g,"").toUpperCase(),Mt=String(Ot[2]||"").trim(),_t=parseInt(String(Ot[3]||"0"),10);if(!It||!Mt||!Number.isFinite(_t)||_t<=0)continue;const Et=`${It}-INV${Mt}`,Pt=Mn(Et),Dt=Number(Nt[Pt]||0)||0;_t>Dt&&(Nt[Pt]=_t)}D&&(Ch.current=Nt),C&&(Cc.current=Nt)}}catch{D&&(bf(null),Ch.current={}),C&&(kp(null),Cc.current={})}X({}),Zs(0),Qo(0),zc([]),Ws.current={},O(new Set(it.current||[])),Si(0),Ao(0);return}const lt={};if(J==="dc")at.split(/\r?\n/).slice(1).forEach(ht=>{const mt=ht.split(",");if(mt.length>=2){const vt=Mn(mt[0]),wt=mt[1].trim(),Nt=parseFloat(wt);vt&&!isNaN(Nt)&&(lt[vt]||(lt[vt]={plus:[],minus:[]}),wt.startsWith("-")||Nt<0?lt[vt].minus.push(Math.abs(Nt)):lt[vt].plus.push(Nt))}});else if(J==="lv"){const yt=at.split(/\r?\n/).filter(Boolean),ht=(yt[0]||"").split(/\t|,/).map(Nt=>Nt.trim().toLowerCase()),mt=ht.findIndex(Nt=>Nt==="id"||Nt==="inv_id"||Nt==="inv"),vt=ht.findIndex(Nt=>Nt==="length"||Nt==="len"||Nt==="meter"||Nt==="m"),wt=1;for(let Nt=wt;Nt<yt.length;Nt++){const Rt=yt[Nt];if(!Rt||!Rt.trim())continue;const qt=Rt.split(/\t|,/),jt=mt>=0?qt[mt]:qt[0],Lt=vt>=0?qt[vt]:qt.length>=2?qt[1]:qt[2],Tt=Mn(jt),Ot=parseFloat(String(Lt??"").trim());!Tt||isNaN(Ot)||(lt[Tt]||(lt[Tt]={plus:[],minus:[]}),lt[Tt].plus.push(Ot))}}else if(J==="mvf"){const yt=Tt=>{const Ot=String(Tt||"").trim();if(!Ot)return"";const It=Ot.toLowerCase();if(It==="css")return"CSS";const Mt=It.match(/^sub(\d{1,2})$/);if(Mt)return`SS${Mt[1].padStart(2,"0")}`;const _t=Ot.match(/^ss(\d{1,2})$/i);return _t?`SS${String(_t[1]).padStart(2,"0")}`:Ot.toUpperCase()},ht=at.split(/\r?\n/).filter(Boolean);if(ht.length<=1){X({}),Zs(0),Qo(0),zc([]),Ws.current={};return}const mt=(ht[0]||"").split(",").map(Tt=>Tt.trim().toLowerCase()),vt=mt.findIndex(Tt=>Tt==="from"),wt=mt.findIndex(Tt=>Tt==="to"),Nt=mt.findIndex(Tt=>Tt==="length"||Tt==="len"||Tt==="m"),Rt=[],qt={};for(let Tt=1;Tt<ht.length;Tt++){const Ot=ht[Tt];if(!Ot||!Ot.trim())continue;const It=Ot.split(","),Mt=vt>=0?It[vt]:It[0],_t=wt>=0?It[wt]:It[1],Et=Nt>=0?It[Nt]:It[2],Pt=parseFloat(String(Et??"").trim());if(isNaN(Pt))continue;const Dt=yt(Mt),Ft=yt(_t),Xt=`${Dt}-${Ft}`,Wt=Mn(Xt);Wt&&(lt[Wt]||(lt[Wt]={plus:[],minus:[]}),lt[Wt].plus.push(Pt),qt[Wt]=(qt[Wt]||0)+Pt,Rt.push({key:Wt,label:Xt,length:Pt}))}const jt=new Map;Rt.forEach(Tt=>{const Ot=jt.get(Tt.key);Ot?jt.set(Tt.key,{...Ot,length:(Ot.length||0)+(Tt.length||0)}):jt.set(Tt.key,{...Tt})});const Lt=Array.from(jt.values()).sort((Tt,Ot)=>{const It=String(Tt.label||"").toUpperCase().includes("CSS"),Mt=String(Ot.label||"").toUpperCase().includes("CSS");return It!==Mt?It?-1:1:String(Tt.label||"").localeCompare(String(Ot.label||""))});zc(Lt),Ws.current=qt}else if(J==="dcct_riso"){const yt=at.split(/\r?\n/).filter(It=>It&&It.trim());try{const It=localStorage.getItem("cew:dcct:test_results_submitted");if(It){const Mt=JSON.parse(It),_t=Mt?.risoById&&typeof Mt.risoById=="object"?Mt.risoById:{},Et={};Object.keys(_t||{}).forEach(Zt=>{const Ut=_t[Zt]||{},$t=Nn(Ut?.originalId||Zt);$t&&(Et[$t]={...Ut,originalId:Ut?.originalId!=null?Ut.originalId:String(Zt||"").trim()})});const Dt=(Array.isArray(Mt?.rows)?Mt.rows:[]).map(Zt=>{const Ut=String(Zt?.originalId||"").trim(),$t=Nn(Ut||Zt?.idNorm);return $t?{originalId:Ut,idNorm:$t}:null}).filter(Boolean);lr.current=Dt;const Ft={};let Xt=0,Wt=0;Object.keys(Et||{}).forEach(Zt=>{const Ut=xi(Et[Zt]?.status||Et[Zt]?.remarkRaw);Ut==="passed"?(Ft[Zt]="passed",Xt++):Ut==="failed"&&(Ft[Zt]="failed",Wt++)}),di.current=Et,mr(Ft),Vs({total:Object.keys(Et||{}).length,passed:Xt,failed:Wt});const Vt={...Mt&&typeof Mt=="object"?Mt:{},risoById:Et,rows:Dt};gs.current=Vt;try{localStorage.setItem("cew:dcct:test_results_submitted",JSON.stringify(Vt))}catch(Zt){}vi(!1),Zo(Zt=>Zt+1),X({}),Zs(0),Qo(0),zc([]),Ws.current={},O(new Set(it.current||[])),Si(0),Ao(0);return}}catch{}if(yt.length<=1){mr({}),Vs({total:0,passed:0,failed:0}),di.current={},lr.current=[],vi(!1),gs.current=null;return}const ht=(yt[0]||"").split(",").map(It=>It.trim().toLowerCase()),mt=ht.findIndex(It=>It==="id"),vt=ht.findIndex(It=>It==="remark"),wt=ht.findIndex(It=>It.includes("insulation")&&It.includes("(-")),Nt=ht.findIndex(It=>It.includes("insulation")&&It.includes("(+)")),Rt={},qt=[];for(let It=1;It<yt.length;It++){const Mt=yt[It];if(!Mt||!Mt.trim())continue;const _t=Mt.split(","),Et=mt>=0?_t[mt]:_t[0],Pt=vt>=0?_t[vt]:_t[_t.length-1],Dt=wt>=0?_t[wt]:_t.length>=2?_t[1]:"",Ft=Nt>=0?_t[Nt]:_t.length>=3?_t[2]:"",Xt=Nn(Et),Wt=String(Et||"").trim(),Vt=String(Pt||"").trim();if(!Xt)continue;qt.push({originalId:Wt,idNorm:Xt});const Zt=String(Ft??"").trim(),Ut=String(Dt??"").trim(),$t=xi(Vt),Gt=Rt[Xt];Gt?Rt[Xt]={...Gt,plus:Gt.plus&&String(Gt.plus).trim()!==""?Gt.plus:Zt,minus:Gt.minus&&String(Gt.minus).trim()!==""?Gt.minus:Ut,status:Gt.status!=null?Gt.status:$t,remarkRaw:Gt.remarkRaw&&String(Gt.remarkRaw).trim()!==""?Gt.remarkRaw:Vt}:Rt[Xt]={plus:Zt,minus:Ut,status:$t,remarkRaw:Vt,originalId:Wt}}const jt={};let Lt=0,Tt=0;Object.keys(Rt||{}).forEach(It=>{const Mt=xi(Rt[It]?.status||Rt[It]?.remarkRaw);Mt==="passed"?(jt[It]="passed",Lt++):Mt==="failed"&&(jt[It]="failed",Tt++)}),mr(jt),di.current=Rt,lr.current=qt,Vs({total:Object.keys(Rt||{}).length,passed:Lt,failed:Tt}),vi(!1);const Ot={risoById:{...Rt||{}},rows:Array.isArray(qt)?qt:[],updatedAt:Date.now(),source:"default"};gs.current=Ot;try{localStorage.setItem("cew:dcct:test_results_submitted",JSON.stringify(Ot))}catch{}X({}),Zs(0),Qo(0),zc([]),Ws.current={},O(new Set(it.current||[])),Si(0),Ao(0);return}X(lt);let dt=0,xt=0;Object.values(lt).forEach(yt=>{yt.plus&&(dt+=yt.plus.reduce((ht,mt)=>ht+mt,0)),yt.minus&&(xt+=yt.minus.reduce((ht,mt)=>ht+mt,0))}),Zs(dt),Qo(xt),O(new Set(it.current||[])),Si(0),Ao(0)}).catch(at=>console.error("CSV yklenemedi:",at))},[h]),ot.useEffect(()=>{if(h?.workUnitWeights){let lt=0;const dt=new Set;M.forEach(xt=>{const yt=Ge.current?.[xt],ht=String(yt?.dedupeKey||xt);dt.has(ht)||(dt.add(ht),lt+=Number(yt?.workUnits)||0)}),Si(lt),Ao(0);return}if(w){Si(0),Ao(0);return}let B=0,J=0;const at=new Set;M.forEach(lt=>{const dt=Ge.current[lt];dt&&dt.stringId&&at.add(Mn(dt.stringId))}),at.forEach(lt=>{const dt=pt[lt];dt&&(dt.plus&&dt.plus.length>0&&(B+=dt.plus.reduce((xt,yt)=>xt+yt,0)),dt.minus&&dt.minus.length>0&&(J+=dt.minus.reduce((xt,yt)=>xt+yt,0)))}),Si(B),Ao(J)},[w,M,pt,Fu]);const r0=ot.useRef(new Set);ot.useEffect(()=>{if(Q)return;const B=r0.current,J=M,at=new Set;J.forEach(lt=>{B.has(lt)||at.add(lt)}),B.forEach(lt=>{J.has(lt)||at.add(lt)}),at.forEach(lt=>{const dt=Ge.current[lt];if(dt&&dt.layer&&dt.layer.setStyle){const xt=J.has(lt),yt=!!z,ht=ol,mt=go;if(dt.layer.setStyle(xt?{color:"#22c55e",weight:2,fill:yt,fillOpacity:0}:{color:ht,weight:mt,fill:yt,fillOpacity:0}),z)try{dt.layer.options.interactive=!0}catch{}}}),r0.current=new Set(J)},[Q,z,M]),ot.useEffect(()=>{if(!Q)return;const B=ps.current||{},J=Ge.current||{},at={color:ol,weight:go,fill:!1,fillOpacity:0},lt=ms.current;try{Object.keys(J).forEach(dt=>{const xt=J[dt],yt=xt?.layer;if(!yt||typeof yt.setStyle!="function")return;const ht=Mn(xt?.stringId),mt=ht?B[ht]:null,vt=mt==="passed"?"passed":mt==="failed"?"failed":"not_tested";let wt=at.color,Nt=at.weight;vt==="passed"?(wt="rgba(5,150,105,0.96)",Nt=go):vt==="failed"&&(wt="rgba(239,68,68,0.98)",Nt=go);let Rt=1;lt&&(lt===vt?(Nt=1.85,Rt=1):(wt=at.color,Rt=.12,Nt=.5)),yt.setStyle({...at,color:wt,weight:Nt,opacity:Rt})})}catch{}},[Q,In,Or,Fu]),ot.useEffect(()=>{if(!C||String(ds.current||"termination")!=="testing")return;const B=Ep.current||{},J=Ge.current||{},at={color:ol,weight:go,fill:!1,fillOpacity:0},lt=Ur.current;try{Object.keys(J).forEach(dt=>{const xt=J[dt],yt=xt?.layer;if(!yt||typeof yt.setStyle!="function")return;const ht=Mn(xt?.stringId),mt=ht?B[ht]:null,vt=mt==="passed"?"passed":mt==="failed"?"failed":"not_tested";let wt=at.color,Nt=at.weight;vt==="passed"?(wt="rgba(5,150,105,0.96)",Nt=go):vt==="failed"&&(wt="rgba(239,68,68,0.98)",Nt=go);let Rt=1;lt&&(lt===vt?(Nt=1.85,Rt=1):(wt=at.color,Rt=.12,Nt=.5)),yt.setStyle({...at,color:wt,weight:Nt,opacity:Rt})})}catch{}},[C,Li,nl,Tf,Fu]),ot.useEffect(()=>{if(!C||String(ds.current||"termination")==="testing")return;const B=Ge.current||{},J={color:ol,weight:go,fill:!1,fillOpacity:0,opacity:1};try{Object.keys(B).forEach(at=>{const dt=B[at]?.layer;!dt||typeof dt.setStyle!="function"||dt.setStyle(J)})}catch{}},[C,Li]);const Wp=async()=>{if(!ge.current)return;if(f("Loading data..."),Cn.current.forEach(mt=>mt.remove()),Cn.current=[],Ge.current={},br.current=0,qn.current=[],ue.current=[],jh.current=null,Ac.current=[],ks.current=0,fi.current="",Ll.current={},jn.current){try{jn.current.remove()}catch{}jn.current=null}if(ye.current){try{ye.current.remove()}catch{}ye.current=null}if(be.current=[],Qe.current=0,Nr.current={},Cr.current){try{Cr.current.remove()}catch{}Cr.current=null}if(oi.current=[],Kt.current=0,we.current){try{we.current.remove()}catch{}we.current=null}De.current=[],$e.current=0;try{as.current?.clearLayers?.()}catch{}if(qs.current=null,va.current={},tc.current=0,Jf.current={},Hc.current=new Map,hl(0),Jl.current=new Set,Mo(new Set),co([]),mh.current={},ff.current={},su(0),iu.current){try{iu.current.remove()}catch{}iu.current=null}if(bh.current={},yh.current={},xp(0),xc.current){try{xc.current.remove()}catch{}xc.current=null}const B=Ce.latLngBounds();let J=0,at=0;const lt=[],dt={};for(const mt of x)try{const vt=await fetch(mt.url,{cache:"no-store"});if(!vt.ok){console.error("Error loading GeoJSON:",{url:mt.url,name:mt.name,status:vt.status});continue}const wt=vt.headers?.get?.("content-type")||"",Nt=await vt.text();let Rt=null;try{Rt=JSON.parse(Nt)}catch{console.error("Error loading GeoJSON:",{url:mt.url,name:mt.name,status:vt.status,contentType:wt,preview:String(Nt||"").slice(0,120)});continue}if(J+=Rt.features?.length||0,I&&mt.name==="mv_trench"&&Rt?.features?.length)try{const Wt=new Map,Vt=new Map,Zt=new Map,Ut=.001,$t=(fe,bt)=>`${fe.toFixed(6)},${bt.toFixed(6)}`,Gt=(fe,bt)=>{const ve=$t(fe,bt);if(!Wt.has(ve)){Wt.set(ve,{lat:fe,lng:bt});const je=Math.floor(fe/Ut),te=Math.floor(bt/Ut),Oe=`${je}:${te}`;Zt.has(Oe)||Zt.set(Oe,[]),Zt.get(Oe).push(ve)}return Vt.has(ve)||Vt.set(ve,[]),ve},se=(fe,bt)=>{const ve=Wt.get(fe),je=Wt.get(bt);if(!ve||!je)return;const te=Ce.latLng(ve.lat,ve.lng).distanceTo(Ce.latLng(je.lat,je.lng));Vt.get(fe).push({to:bt,w:te}),Vt.get(bt).push({to:fe,w:te})};for(const fe of Rt.features){const bt=fe?.geometry;if(!bt)continue;const ve=bt.type,je=te=>{if(!Array.isArray(te)||te.length<2)return;let Oe=null;for(const Me of te){const Se=Me?.[0],he=Me?.[1];if(typeof he!="number"||typeof Se!="number")continue;const le=Gt(he,Se);Oe&&Oe!==le&&se(Oe,le),Oe=le}};ve==="LineString"?je(bt.coordinates):ve==="MultiLineString"&&bt.coordinates?.forEach(je)}qs.current={nodes:Wt,adj:Vt,grid:Zt,gridSize:Ut}}catch(Wt){qs.current=null}if(mt.name==="string_text"){const Wt=Ce.layerGroup();if(jn.current=Wt,(Rt.features||[]).forEach(Vt=>{if(Vt.geometry?.type==="Point"&&Vt.properties?.text){const Zt=Vt.geometry.coordinates;if(!Zt||Zt.length<2)return;const Ut=Zt[1],$t=Zt[0],Gt=Q?Nn(Vt.properties.text):C?no(Vt.properties.text):Mn(Vt.properties.text);lt.push({id:Gt,lat:Ut,lng:$t}),dt[Gt]={lat:Ut,lng:$t,angle:Vt.properties.angle||0,text:Vt.properties.text},qn.current.push({lat:Ut,lng:$t,stringId:Gt,text:Vt.properties.text,angle:Vt.properties.angle||0}),B.extend([Ut,$t])}}),Q){const Vt=new Set;qn.current.forEach(Zt=>{Zt.stringId&&Vt.add(Zt.stringId)}),wr(Vt)}if(C){const Vt=new Set;qn.current.forEach(Zt=>{Zt.stringId&&Vt.add(Zt.stringId)}),Am(Vt)}if(Wt.addTo(ge.current),Cn.current.push(Wt),Z)try{const Vt=[],Zt=qn.current||[];for(let Ut=0;Ut<Zt.length;Ut++){const $t=Zt[Ut],Gt=String($t?.text||"").trim();if(!Gt)continue;const se=fn(Gt);!se||!gn(se)||Vt.push({lat:$t.lat,lng:$t.lng,stationKey:se,stationLabel:Gt})}ue.current=Vt}catch(Vt){ue.current=[]}if(Z){const Vt=Ce.layerGroup();ye.current=Vt,Vt.addTo(ge.current),Cn.current.push(Vt)}else ye.current=null;Cr.current=null,we.current=null;continue}if(mt.name==="full"){if(R||T){const Ut=Ce.geoJSON(Rt,{renderer:Oa,interactive:!1,bubblingMouseEvents:!1,style:()=>({color:ol,weight:go,fill:!1,fillOpacity:0})});if(Ut.addTo(ge.current),Cn.current.push(Ut),typeof Ut.getBounds=="function"){const $t=Ut.getBounds();$t?.isValid?.()&&B.extend($t)}continue}if(z&&(Rt?.features||[]).some($t=>$t?.geometry?.type==="LineString"))try{const $t=(Rt?.features||[]).filter(he=>he?.geometry?.type==="LineString"&&Array.isArray(he?.geometry?.coordinates)&&he.geometry.coordinates.length>=2),Gt=(he,le)=>{const Ee=(he||[]).filter(rn=>typeof rn=="number"&&Number.isFinite(rn));if(Ee.length===0)return 0;Ee.sort((rn,pn)=>rn-pn);const Ae=(Ee.length-1)*le,We=Math.floor(Ae),nn=Math.ceil(Ae);if(We===nn)return Ee[We];const Fe=Ae-We;return Ee[We]*(1-Fe)+Ee[nn]*Fe},se=he=>{const le=String(he||"").match(/plot([A-G])_(east|west)/i);if(!le)return"XX";const Ee=String(le[1]||"").toUpperCase(),Ae=String(le[2]||"").toLowerCase()==="east"?"E":"W";return`${Ee}${Ae}`},fe=he=>{let le=0,Ee=0;for(const nn of he||[]){const Fe=nn?.geometry?.coordinates;if(!Array.isArray(Fe)||Fe.length<2)continue;const rn=Fe[0],pn=Fe[Fe.length-1],An=Number(pn?.[0])-Number(rn?.[0]),zn=Number(pn?.[1])-Number(rn?.[1]);if(!Number.isFinite(An)||!Number.isFinite(zn))continue;const en=Math.hypot(An,zn);if(!Number.isFinite(en)||en<=0)continue;const i=(Math.atan2(zn,An)%Math.PI+Math.PI)%Math.PI;le+=Math.cos(2*i)*en,Ee+=Math.sin(2*i)*en}const Ae=.5*Math.atan2(Ee,le),We=Math.tan(Ae);return Number.isFinite(We)?We:0},bt=he=>{const le=Number(he?.[0]),Ee=Number(he?.[1]);return!Number.isFinite(le)||!Number.isFinite(Ee)?"":`${le.toFixed(9)},${Ee.toFixed(9)}`},ve=new Map;for(const he of $t){const le=String(he?.properties?.layer||"");le&&(ve.has(le)||ve.set(le,[]),ve.get(le).push(he))}const je=[],te=[];for(const[he,le]of ve.entries()){const Ee=new Map,Ae=new Array(le.length).fill(!1),We=new Array(le.length).fill(!1),nn=(Fe,rn)=>{if(!Fe)return;const pn=Ee.get(Fe);pn?pn.push(rn):Ee.set(Fe,[rn])};for(let Fe=0;Fe<le.length;Fe++){const rn=le[Fe]?.geometry?.coordinates,pn=rn?.[0],An=rn?.[rn.length-1];nn(bt(pn),Fe),nn(bt(An),Fe)}for(let Fe=0;Fe<le.length;Fe++){if(Ae[Fe]||We[Fe])continue;const rn=le[Fe]?.geometry?.coordinates,pn=rn?.[0],An=rn?.[rn.length-1],zn=bt(pn);let en=bt(An);if(!zn||!en){Ae[Fe]=!0;continue}const tn=[[pn[0],pn[1]],[An[0],An[1]]],i=[Fe];Ae[Fe]=!0;let d=le.length+5;for(;en!==zn&&d-- >0;){const _=Ee.get(en)||[];let A=-1,V=-1/0;const Y=tn[tn.length-2],ct=tn[tn.length-1],kt=Number(ct?.[0])-Number(Y?.[0]),ee=Number(ct?.[1])-Number(Y?.[1]),pe=Math.hypot(kt,ee)||1;for(const _n of _){if(Ae[_n]||We[_n])continue;const or=le[_n]?.geometry?.coordinates,xe=or?.[0],de=or?.[or.length-1],Te=bt(xe),ze=bt(de);if(!Te||!ze)continue;let Pn=null;if(Te===en)Pn=de;else if(ze===en)Pn=xe;else continue;const Er=Number(Pn?.[0])-Number(ct?.[0]),Rn=Number(Pn?.[1])-Number(ct?.[1]),Jn=Math.hypot(Er,Rn);if(!Number.isFinite(Jn)||Jn<=0)continue;const fr=(kt*Er+ee*Rn)/(pe*Jn);fr<-.99||fr>V&&(V=fr,A=_n)}if(A<0)break;const Re=le[A]?.geometry?.coordinates,Ie=Re?.[0],_e=Re?.[Re.length-1],ke=bt(Ie),mn=bt(_e);if(!ke||!mn)break;if(ke===en)tn.push([_e[0],_e[1]]),en=mn;else if(mn===en)tn.push([Ie[0],Ie[1]]),en=ke;else break;Ae[A]=!0,i.push(A)}if(en===zn&&tn.length>=4){const _=tn[0],A=tn[tn.length-1];(!A||A[0]!==_[0]||A[1]!==_[1])&&tn.push([_[0],_[1]]);let V=0,Y=0;const ct=Math.max(1,tn.length-1);for(let kt=0;kt<tn.length-1;kt++)V+=Number(tn[kt][0])||0,Y+=Number(tn[kt][1])||0;V/=ct,Y/=ct,je.push({type:"Feature",properties:{...le[Fe]?.properties||{},layer:he,__pl_cx:V,__pl_cy:Y},geometry:{type:"Polygon",coordinates:[tn]}})}else{for(const _ of i)Ae[_]=!1;We[Fe]=!0}}try{const rn=(V,Y)=>{const ct=Number(V),kt=Number(Y);return!Number.isFinite(ct)||!Number.isFinite(kt)?"":`${ct.toFixed(8)},${kt.toFixed(8)}`},pn=new Map,An=new Array(le.length),zn=(V,Y,ct)=>{if(!V)return;const kt=pn.get(V);kt?(kt.sx+=Y,kt.sy+=ct,kt.n+=1):pn.set(V,{sx:Y,sy:ct,n:1})};for(let V=0;V<le.length;V++){const Y=le[V]?.geometry?.coordinates;if(!Array.isArray(Y)||Y.length<2)continue;const ct=Y[0],kt=Y[Y.length-1],ee=Number(ct?.[0]),pe=Number(ct?.[1]),Re=Number(kt?.[0]),Ie=Number(kt?.[1]);if(!Number.isFinite(ee)||!Number.isFinite(pe)||!Number.isFinite(Re)||!Number.isFinite(Ie))continue;const _e=rn(ee,pe),ke=rn(Re,Ie);An[V]={aK:_e,bK:ke},zn(_e,ee,pe),zn(ke,Re,Ie)}const en=V=>{const Y=pn.get(V);return!Y||!Y.n?null:{x:Y.sx/Y.n,y:Y.sy/Y.n}},tn=(V,Y,ct)=>(Y.x-V.x)*(ct.y-V.y)-(Y.y-V.y)*(ct.x-V.x),i=V=>{const Y=(V||[]).filter(Boolean);if(Y.length<3)return[];Y.sort((ee,pe)=>ee.x===pe.x?ee.y-pe.y:ee.x-pe.x);const ct=[];for(const ee of Y){for(;ct.length>=2&&tn(ct[ct.length-2],ct[ct.length-1],ee)<=0;)ct.pop();ct.push(ee)}const kt=[];for(let ee=Y.length-1;ee>=0;ee--){const pe=Y[ee];for(;kt.length>=2&&tn(kt[kt.length-2],kt[kt.length-1],pe)<=0;)kt.pop();kt.push(pe)}return kt.pop(),ct.pop(),ct.concat(kt)},d=new Map,_=(V,Y)=>{if(!V)return;const ct=d.get(V);ct?ct.push(Y):d.set(V,[Y])};for(let V=0;V<le.length;V++){if(Ae[V])continue;const Y=An[V];!Y?.aK||!Y?.bK||(_(Y.aK,V),_(Y.bK,V))}const A=new Set;for(let V=0;V<le.length;V++){if(Ae[V]||A.has(V))continue;const Y=An[V];if(!Y?.aK||!Y?.bK)continue;const ct=[V],kt=[],ee=new Set;for(;ct.length;){const _n=ct.pop();if(_n==null||A.has(_n)||Ae[_n])continue;A.add(_n);const or=An[_n];if(!or?.aK||!or?.bK)continue;kt.push(_n),ee.add(or.aK),ee.add(or.bK);const xe=d.get(or.aK)||[],de=d.get(or.bK)||[];for(const Te of xe)!A.has(Te)&&!Ae[Te]&&ct.push(Te);for(const Te of de)!A.has(Te)&&!Ae[Te]&&ct.push(Te)}if(kt.length<3||kt.length>16)continue;const pe=Array.from(ee).map(en).filter(Boolean);if(pe.length<3)continue;const Re=i(pe);if(!Re||Re.length<3)continue;const Ie=Re.map(_n=>[_n.x,_n.y]);Ie.push([Ie[0][0],Ie[0][1]]);let _e=0,ke=0;const mn=Math.max(1,Ie.length-1);for(let _n=0;_n<Ie.length-1;_n++)_e+=Number(Ie[_n][0])||0,ke+=Number(Ie[_n][1])||0;_e/=mn,ke/=mn,je.push({type:"Feature",properties:{...le[kt[0]]?.properties||{},layer:he,__pl_cx:_e,__pl_cy:ke},geometry:{type:"Polygon",coordinates:[Ie]}});for(const _n of kt)Ae[_n]=!0}}catch(Fe){}for(let Fe=0;Fe<le.length;Fe++)Ae[Fe]||te.push({type:"Feature",properties:{...le[Fe]?.properties||{},layer:he,__pl_residualLine:!0},geometry:le[Fe]?.geometry})}const Oe=new Map;for(const he of je){const le=String(he?.properties?.layer||"");le&&(Oe.has(le)||Oe.set(le,[]),Oe.get(le).push(he))}const Me=20;for(const[he,le]of Oe.entries()){const Ee=se(he),Ae=ve.get(he)||[],We=fe(Ae),nn=le.map(en=>{const tn=Number(en?.properties?.__pl_cx),i=Number(en?.properties?.__pl_cy);if(!Number.isFinite(tn)||!Number.isFinite(i))return null;const d=i-We*tn,_=Ce.CRS.EPSG3857.latLngToPoint(Ce.latLng(i,tn),Me);return{feature:en,cx:tn,cy:i,b:d,sx:Number(_?.x)||0,sy:Number(_?.y)||0}}).filter(Boolean);if(nn.length===0)continue;nn.sort((en,tn)=>tn.b-en.b);const Fe=[];for(let en=1;en<nn.length;en++)Fe.push(nn[en-1].b-nn[en].b);const rn=Gt(Fe,.5),pn=Math.max(1e-6,rn*8),An=[];let zn=[nn[0]];for(let en=1;en<nn.length;en++)nn[en-1].b-nn[en].b>pn?(An.push(zn),zn=[nn[en]]):zn.push(nn[en]);An.push(zn),An.sort((en,tn)=>{const i=en.reduce((_,A)=>_+A.sy,0)/Math.max(1,en.length),d=tn.reduce((_,A)=>_+A.sy,0)/Math.max(1,tn.length);return i-d}),An.forEach((en,tn)=>{const i=/_east$/i.test(String(he||""));en.sort((d,_)=>i?d.sx-_.sx:_.sx-d.sx),en.forEach((d,_)=>{d.feature.properties.tableId=`${Ee}${tn+1}-${_+1}`,d.feature.properties.row=tn+1,d.feature.properties.col=_+1})})}for(const he of je)he?.properties&&(delete he.properties.__pl_cx,delete he.properties.__pl_cy);const Se=Math.max(50,Math.floor($t.length/8));je.length>=Se&&(Rt={...Rt,type:"FeatureCollection",features:[...je,...te]})}catch($t){}if(j){const Ut=h?.tableAreaThreshold||50,$t=he=>{try{let le=he;for(;Array.isArray(le)&&le.length>0&&Array.isArray(le[0])&&Array.isArray(le[0][0]);)le=le[0];if(!Array.isArray(le)||le.length<3)return 0;let Ee=0;for(let nn=0;nn<le.length-1;nn++)Ee+=le[nn][0]*le[nn+1][1]-le[nn+1][0]*le[nn][1];const Ae=le[0]?.[1]||50,We=Math.cos(Ae*Math.PI/180);return Math.abs(Ee)/2*111319.9*111319.9*We}catch{return 0}},Gt=he=>{try{let le=he;for(;Array.isArray(le)&&le.length>0&&Array.isArray(le[0])&&Array.isArray(le[0][0]);)le=le[0];if(!Array.isArray(le)||le.length<3)return null;let Ee=0,Ae=0;return le.forEach(We=>{Ee+=We[0],Ae+=We[1]}),[Ee/le.length,Ae/le.length]}catch{return null}},se=(Rt.features||[]).map((he,le)=>({idx:le,area:$t(he?.geometry?.coordinates),centroid:Gt(he?.geometry?.coordinates)})).filter(he=>he.centroid),fe=8e-5,bt=new Set,ve=[];for(let he=0;he<se.length;he++){if(bt.has(he))continue;const le=se[he];let Ee=1/0,Ae=-1;for(let We=he+1;We<se.length;We++){if(bt.has(We))continue;const nn=se[We],Fe=Math.sqrt(Math.pow(le.centroid[0]-nn.centroid[0],2)+Math.pow(le.centroid[1]-nn.centroid[1],2));Fe<Ee&&(Ee=Fe,Ae=We)}if(Ae>=0&&Ee<fe){bt.add(he),bt.add(Ae);const We=le.area+se[Ae].area;ve.push({idx1:se[he].idx,idx2:se[Ae].idx,area:We})}}let je=0,te=0;const Oe=Ut*2;ve.forEach(he=>{he.area<Oe?je++:te++}),se.length-bt.size>0&&se.forEach((he,le)=>{bt.has(le)||(he.area<Ut?je+=.5:te+=.5)}),qc(Math.round(je)),Vu(Math.round(te));const Se=new Map;ve.forEach(he=>{Se.set(he.idx1,he.idx2),Se.set(he.idx2,he.idx1)}),cs.current={featurePairs:Se,polygonPairs:new Map}}if(K){const Ut=Ce.geoJSON(Rt,{renderer:Oa,interactive:!1,style:()=>({color:ol,weight:go,fill:!1,fillOpacity:0})});Ut.addTo(ge.current),Cn.current.push(Ut),Ut.getBounds().isValid()&&B.extend(Ut.getBounds());continue}if(F){const Ut=Ce.geoJSON(Rt,{renderer:Oa,interactive:!1,style:()=>({color:ol,weight:go,fill:!1,fillOpacity:0})});Ut.addTo(ge.current),Cn.current.push(Ut),Ut.getBounds().isValid()&&B.extend(Ut.getBounds());continue}if(Z){const Ut=Ce.geoJSON(Rt,{renderer:Oa,interactive:!1,style:()=>({color:ol,weight:go,fill:!1,fillOpacity:0})});Ut.addTo(ge.current),Cn.current.push(Ut),Ut.getBounds().isValid()&&B.extend(Ut.getBounds());continue}let Wt=0;const Vt=new Map,Zt=Ce.geoJSON(Rt,{renderer:Oa,interactive:!0,style:()=>({color:ol,weight:go,fill:!!z,fillOpacity:0}),onEachFeature:(Ut,$t)=>{const Gt=Wt++,se=Ut?.geometry?.type,fe=se==="Polygon"||se==="MultiPolygon",bt=se==="LineString";if(!se||!fe&&!(bt&&!D))return;if(z&&bt){try{$t.options.interactive=!1}catch(je){}return}if(z&&fe){const je=String(Ut?.properties?.tableId||"");if(je)try{$t.bindTooltip(je,{permanent:!1,sticky:!0,direction:"top",opacity:.95,className:"punch-list-tooltip"}),$t.on("mouseover",()=>{try{$t.openTooltip()}catch(te){}}),$t.on("mouseout",()=>{try{$t.closeTooltip()}catch(te){}})}catch(te){}}const ve=`polygon_${br.current++}`;if($t._uniquePolygonId=ve,j&&Vt.set(Gt,ve),Ge.current[ve]={layer:$t,stringId:null,isSmallTable:!1},(D||C)&&fe){const je=Me=>{try{const Se=Me?.originalEvent||Me;Se&&(Ce.DomEvent.stopPropagation(Se),Ce.DomEvent.preventDefault(Se))}catch(Se){}},te=()=>{const Me=ge.current;if(!Me||typeof $t.getLatLngs!="function")return null;let Se=$t.getLatLngs();for(;Array.isArray(Se)&&Se.length&&Array.isArray(Se[0]);)Se=Se[0];for(;Array.isArray(Se)&&Se.length&&Array.isArray(Se[0]);)Se=Se[0];const he=Array.isArray(Se)?Se:null;if(!he||he.length<4)return null;const le=he.map(i=>Me.latLngToLayerPoint(i));let Ee=0,Ae=0;le.forEach(i=>{Ee+=i.x,Ae+=i.y}),Ee/=le.length,Ae/=le.length;const We=[],nn=le.length;for(let i=0;i<nn;i++){const d=le[i],_=le[(i+1)%nn];if(!d||!_)continue;const A=Math.hypot(_.x-d.x,_.y-d.y);We.push({p1:d,p2:_,len:A,center:{x:(d.x+_.x)/2,y:(d.y+_.y)/2}})}if(We.length<2)return null;We.sort((i,d)=>i.len-d.len);const Fe=We.slice(0,2);Fe.sort((i,d)=>i.center.x-d.center.x||i.center.y-d.center.y);const rn=.3,pn=i=>{const d=Ee-i.x,_=Ae-i.y;return{x:i.x+d*rn,y:i.y+_*rn}},An=pn(Fe[0].center),zn=pn(Fe[1].center),en=Me.layerPointToLatLng(Ce.point(An.x,An.y)),tn=Me.layerPointToLatLng(Ce.point(zn.x,zn.y));return{leftPos:en,rightPos:tn}};Ge.current[ve].computeEnds=te;const Oe=Me=>{const Se=ge.current,he=Ge.current?.[ve];if(!he.mc4Ends&&typeof he.computeEnds=="function")try{he.mc4Ends=he.computeEnds()}catch{}const le=he?.mc4Ends;if(!Se||!le?.leftPos||!le?.rightPos)return"left";const Ee=Se.latLngToLayerPoint(Me.latlng),Ae=Se.latLngToLayerPoint(le.leftPos),We=Se.latLngToLayerPoint(le.rightPos),nn=Math.hypot(Ee.x-Ae.x,Ee.y-Ae.y),Fe=Math.hypot(Ee.x-We.x,Ee.y-We.y);return nn<=Fe?"left":"right"};$t.on("click",Me=>{if(je(Me),ce)return;const Se=k.current,he=Se?Fr.current:wc.current,le=Se?kh:au,Ee=Se?gu:vu,Ae=Se?oa:Ts,We=Se?Wo:kf;if(!he){le("Please select a mode above.");return}if(he==="termination_inv")return;const nn=Ee(ve);if(Se){const An={left:Jr.TERMINATED,right:Jr.TERMINATED};Ae(zn=>({...zn||{},[ve]:An})),We([{id:ve,prev:nn,next:An}]);return}const Fe=Oe(Me);let rn=nn[Fe];if(he==="mc4")rn!=="terminated"&&(rn="mc4");else if(he==="termination_panel")if(rn==="mc4")rn="terminated";else if(rn==="terminated")rn="terminated";else{au("Some tables were not MC4-installed yet");return}else{au("Please select a mode above.");return}const pn={...nn,[Fe]:rn};Ae(An=>({...An||{},[ve]:pn})),We([{id:ve,prev:nn,next:pn}])}),$t.on("dblclick",Me=>{if(je(Me),ce)return;const Se=k.current;if((Se?Fr.current:wc.current)==="termination_inv")return;const le=Se?gu:vu,Ee=Se?oa:Ts,Ae=Se?Wo:kf,We=le(ve),nn=Se?{left:Jr.TERMINATED,right:Jr.TERMINATED}:{...We,[Oe(Me)]:Ri.TERMINATED};Ee(Fe=>({...Fe||{},[ve]:nn})),Ae([{id:ve,prev:We,next:nn}])}),$t.on("contextmenu",Me=>{if(je(Me),ce)return;const Se=k.current,he=Se?gu:vu,le=Se?oa:Ts,Ee=Se?Wo:kf;if(Se&&Fr.current==="termination_panel"&&(aa.current||new Set).has(ve)){kh("Submitted tables can only be removed from History.");return}const Ae=he(ve),We={left:null,right:null};le(nn=>{const Fe={...nn||{}};return delete Fe[ve],Fe}),Ee([{id:ve,prev:Ae,next:We}])});return}if(Q&&fe){$t.on("click",je=>{try{const en=je?.originalEvent;en&&(Ce.DomEvent.stop(en),en.stopImmediatePropagation?.())}catch(en){}if(ce)return;const te=$t._uniquePolygonId,Me=(te?Ge.current?.[te]:null)?.stringId||"",Se=Mn(Me);if(!Se)return;const he=je?.originalEvent,le=he?.clientX??0,Ee=he?.clientY??0,Ae=di.current?.[Se]||null,We=Ae!==null,nn=Ae?.plus!=null?String(Ae.plus).trim():"",Fe=Ae?.minus!=null?String(Ae.minus).trim():"",rn=nn||(We?"999":"0"),pn=Fe||(We?"999":"0"),An=xi(Ae?.status||Ae?.remarkRaw)||null,zn=ci(Se,Ae?.originalId);rs(en=>en&&en.idNorm===Se?null:{idNorm:Se,displayId:zn,draftPlus:rn,draftMinus:pn,draftStatus:An,x:le,y:Ee})});return}$t.on("click",je=>{try{const Oe=je?.originalEvent;Oe&&(Ce.DomEvent.stopPropagation(Oe),Ce.DomEvent.preventDefault(Oe))}catch(Oe){}if(sf.current=!0,k.current&&String(ds.current||"termination")==="testing")return;if(z){const Oe=$t.feature?.properties?.tableId;Oe&&(Zu(Oe),wl(!0));return}if(ce)return;const te=$t._uniquePolygonId;if(te&&k.current&&String(ds.current||"termination")!=="testing"&&Fr.current==="termination_panel"){const Oe=gu(te),Me={left:Jr.TERMINATED,right:Jr.TERMINATED};oa(Se=>({...Se||{},[te]:Me})),Wo([{id:te,prev:Oe,next:Me}]);return}if(te){if(window.__historySelectedRecordId){const le=window.__editingPolygonIds||[],Ee=Ge.current?.[te]||null;let Ae=[te];if(E&&Ee?.stringId){const rn=Mn(Ee.stringId);Ae=Object.keys(Ge.current||{}).filter(pn=>{const An=Ge.current?.[pn];return Mn(An?.stringId||"")===rn}),Ae.length===0&&(Ae=[te])}const We=new Set(le),nn=Ae.every(rn=>We.has(rn));let Fe;if(nn?(Ae.forEach(rn=>We.delete(rn)),Fe=Array.from(We)):(Ae.forEach(rn=>We.add(rn)),Fe=Array.from(We)),oc(Fe),Wu.current=Fe,window.__editingPolygonIds=Fe,E){const rn=new Set;Fe.forEach(zn=>{const en=Ge.current?.[zn];en?.stringId&&rn.add(Mn(en.stringId))});let pn=0,An=0;rn.forEach(zn=>{const en=pt[zn];en?.plus?.length&&(pn+=en.plus.reduce((tn,i)=>tn+i,0)),en?.minus?.length&&(An+=en.minus.reduce((tn,i)=>tn+i,0))}),b(pn+An)}else b(Fe.length);Ae.forEach(rn=>{const pn=Ge.current?.[rn];if(!(!pn?.layer||typeof pn.layer.setStyle!="function"))if(nn){const An=(it.current||H).has(rn);pn.layer.setStyle(An?{color:"#22c55e",weight:1.5,fill:!1,fillOpacity:0}:{color:"rgba(255,255,255,0.35)",weight:1.05,fill:!1,fillOpacity:0})}else pn.layer.setStyle({color:"#f97316",weight:1.8,fill:!1,fillOpacity:0})});return}const Me=it.current||new Set;if(Me.has(te))return;if(j){const le=cs.current?.polygonPairs?.get(te);if(Me.has(te)||le&&Me.has(le))return;O(Ae=>{const We=new Set(Ae);return We.has(te)?(We.delete(te),le&&We.delete(le)):(We.add(te),le&&We.add(le)),We});return}const he=Ge.current[te];if(he&&he.stringId&&he.isSmallTable){const le=[];if(Object.keys(Ge.current).forEach(Ae=>{const We=Ge.current[Ae];We&&We.stringId===he.stringId&&We.isSmallTable&&le.push(Ae)}),le.some(Ae=>Me.has(Ae)))return;O(Ae=>{const We=new Set(Ae);return le.length>0&&le.every(Fe=>We.has(Fe))?le.forEach(Fe=>We.delete(Fe)):le.forEach(Fe=>We.add(Fe)),We})}else O(le=>{const Ee=new Set(le);return Ee.has(te)?Ee.delete(te):Ee.add(te),Ee})}}),$t.on("contextmenu",je=>{try{const Oe=je?.originalEvent;Oe&&(Ce.DomEvent.stopPropagation(Oe),Ce.DomEvent.preventDefault(Oe))}catch(Oe){}if(ce)return;const te=$t._uniquePolygonId;if(te){const Oe=it.current||new Set;if(Oe.has(te))return;if(j&&cs.current?.polygonPairs){const he=cs.current.polygonPairs.get(te);if(Oe.has(te)||he&&Oe.has(he))return;O(Ee=>{const Ae=new Set(Ee);return Ae.delete(te),he&&Ae.delete(he),Ae});return}const Se=Ge.current[te];if(Se&&Se.stringId&&Se.isSmallTable){const he=[];if(Object.keys(Ge.current).forEach(Ee=>{const Ae=Ge.current[Ee];Ae&&Ae.stringId===Se.stringId&&Ae.isSmallTable&&he.push(Ee)}),he.some(Ee=>Oe.has(Ee)))return;O(Ee=>{const Ae=new Set(Ee);return he.forEach(We=>Ae.delete(We)),Ae})}else O(he=>{const le=new Set(he);return le.delete(te),le})}})}});if(j&&cs.current?.featurePairs){const Ut=new Map;cs.current.featurePairs.forEach(($t,Gt)=>{const se=Vt.get(Gt),fe=Vt.get($t);se&&fe&&(Ut.set(se,fe),Ut.set(fe,se))}),cs.current.polygonPairs=Ut,console.log("TIP: Built polygonPairs map with",Ut.size,"entries")}Zt.addTo(ge.current),Cn.current.push(Zt),Zt.getBounds().isValid()&&B.extend(Zt.getBounds());continue}if(F&&(mt.name==="lv_box"||mt.name==="inv_box")){const Wt=mt.name==="lv_box"?"lvBox":"invBox",Vt=Rt.features?.length||0;Wt==="lvBox"?th(Vt):np(Vt);const Zt=Ce.geoJSON(Rt,{renderer:Oa,interactive:!0,style:pn=>{const An=pn?.properties?.fid??pn?.properties?.FID??pn?.properties?.id??pn?.id,zn=`${Wt}_${String(An)}`;return(Wt==="lvBox"?td.current:Hi.current).has(zn)?{color:"#16a34a",weight:4,opacity:1,fill:!0,fillColor:"#22c55e",fillOpacity:.75}:{color:"#dc2626",weight:3.2,opacity:1,fill:!0,fillColor:"#ef4444",fillOpacity:.3}},onEachFeature:(pn,An)=>{const zn=pn?.properties?.fid??pn?.properties?.FID??pn?.properties?.id??pn?.id,en=zn!=null?String(zn):(()=>{try{const d=pn?.geometry?.coordinates,_=Array.isArray(d)?JSON.stringify(d).slice(0,160):"";return`geom_${_.length}_${_}`}catch{return"geom_unknown"}})(),tn=`${Wt}_${en}`;rc.current.set(tn,Wt),Ge.current[tn]={layer:An,boxType:Wt,polygonId:tn},An.on("click",i=>{try{i?.originalEvent&&(Ce.DomEvent.stopPropagation(i.originalEvent),Ce.DomEvent.preventDefault(i.originalEvent))}catch(V){}if(Yo.current!==Wt)return;const _=i?.originalEvent?.button===2;(Wt==="lvBox"?Ko:nc)(V=>{const Y=new Set(V);return _||Y.has(tn)?Y.delete(tn):Y.add(tn),Y}),Zt.resetStyle(An)})}});Wt==="lvBox"?wa.current=Zt:Va.current=Zt,Zt.addTo(ge.current),Cn.current.push(Zt),Zt.getBounds().isValid()&&B.extend(Zt.getBounds());const Ut=Wt==="lvBox"?"LV":"INV",$t=typeof h?.invIdTextScale=="number"?h.invIdTextScale:1,Gt=typeof h?.invIdTextBaseSize=="number"?h.invIdTextBaseSize:19,se=typeof h?.invIdTextRefZoom=="number"?h.invIdTextRefZoom:20,fe=h?.invIdTextStyle||"600",bt=typeof h?.invIdTextMinFontSize=="number"?h.invIdTextMinFontSize:null,ve=typeof h?.invIdTextMaxFontSize=="number"?h.invIdTextMaxFontSize:null,je=h?.invIdTextStrokeColor||"rgba(0,0,0,0.88)",te=typeof h?.invIdTextStrokeWidthFactor=="number"?h.invIdTextStrokeWidthFactor:1.45,Oe=h?.invIdTextBgColor||null,Me=typeof h?.invIdTextBgPaddingX=="number"?h.invIdTextBgPaddingX:0,Se=typeof h?.invIdTextBgPaddingY=="number"?h.invIdTextBgPaddingY:0,he=h?.invIdTextBgStrokeColor||null,le=typeof h?.invIdTextBgStrokeWidth=="number"?h.invIdTextBgStrokeWidth:0,Ee=typeof h?.invIdTextBgCornerRadius=="number"?h.invIdTextBgCornerRadius:0,Ae=typeof h?.invIdTextMinTextZoom=="number"?h.invIdTextMinTextZoom:null,We=typeof h?.invIdTextMinBgZoom=="number"?h.invIdTextMinBgZoom:null,nn=Gt*$t,Fe=22*$t;(Rt.features||[]).forEach(pn=>{if(!pn.geometry)return;let An=null;if(pn.geometry.type==="Polygon"&&pn.geometry.coordinates?.[0]){const en=pn.geometry.coordinates[0];let tn=0,i=0;en.forEach(([d,_])=>{tn+=_,i+=d}),An=[tn/en.length,i/en.length]}else if(pn.geometry.type==="MultiPolygon"&&pn.geometry.coordinates?.[0]?.[0]){const en=pn.geometry.coordinates[0][0];let tn=0,i=0;en.forEach(([d,_])=>{tn+=_,i+=d}),An=[tn/en.length,i/en.length]}if(!An)return;const zn=Ce.textLabel(An,{text:Ut,renderer:Oa,textBaseSize:nn,refZoom:se,textStyle:fe,textColor:"rgba(250,204,21,0.98)",textStrokeColor:je,textStrokeWidthFactor:te,minFontSize:bt,maxFontSize:ve,bgColor:Oe,bgPaddingX:Me,bgPaddingY:Se,bgStrokeColor:he,bgStrokeWidth:le,bgCornerRadius:Ee,minTextZoom:Ae,minBgZoom:We,interactive:!1,radius:Fe});zn.addTo(ge.current),Cn.current.push(zn)});continue}const qt=mt.name==="inv_id"&&(w||K||h?.invIdLabelMode),jt=(w||K)&&mt.name==="inv_id",Lt=I&&mt.name==="mv_trench",Tt=W&&mt.name==="earthing_tabletotable",Ot=W&&mt.name==="earthing_parameter",It=R&&mt.name==="trench",Mt=T&&mt.name==="trench",_t=(Z||K)&&(mt.name==="full"||mt.name==="subs"),Et=Tt?"ptepTableToTablePane":Ot?"ptepParameterPane":void 0,Pt=It?"datpTrenchPane":void 0,Dt=Mt?"mvftTrenchPane":void 0,Ft=Tt?Xn.current||Ce.svg({pane:"ptepTableToTablePane"}):Ot?Wn.current||Ce.svg({pane:"ptepParameterPane"}):It?gh.current||Ce.svg({pane:"datpTrenchPane"}):Mt?vh.current||Ce.svg({pane:"mvftTrenchPane"}):Oa,Xt=Ce.geoJSON(Rt,{pane:Et||Pt||Dt,renderer:Ft,interactive:!_t&&(jt||Lt||Tt||Ot||It||Mt),bubblingMouseEvents:!(Tt||Ot||It||Mt),style:Wt=>{if(mt.name==="boundry"||mt.name==="boundary")return{color:"rgba(239, 68, 68, 0.7)",weight:1.2,opacity:1,fill:!1,fillColor:"transparent",fillOpacity:0};if(W&&mt.name==="earthing_full"){const Vt=String(Wt?.properties?.layer||"").toLowerCase();return Vt==="boundry"||Vt==="boundary"?{color:"rgba(239, 68, 68, 0.7)",weight:1.2,opacity:1,fill:!1,fillColor:"transparent",fillOpacity:0}:{color:"rgba(255,255,255,0.26)",weight:.78,fill:!1,fillOpacity:0}}if(Ot)return{color:"#facc15",weight:1.5,opacity:ws.current==="parameter"?1:0,fill:!1,fillOpacity:0};if(Tt){const Vt=Wt?.properties?.handle??Wt?.properties?.fid??Wt?.properties?.FID??Wt?.properties?.id??Wt?.id,Zt=`tt_${String(Vt)}`,Ut=af.current?.has(Zt),$t=ws.current==="tabletotable";return{color:Ut?"#00ff00":"#3b82f6",weight:Ut?6:2.2,opacity:$t?1:0,dashArray:Ut?null:"6 4",lineCap:"round",lineJoin:"round",fill:!1,fillOpacity:0}}if(F&&(mt.name==="lv_box"||mt.name==="inv_box"))return{color:"#dc2626",weight:3.2,fill:!0,fillColor:"#ef4444",fillOpacity:.3};if(R){const Vt=mt.name?.toLowerCase();if(Vt==="boundry"||Vt==="boundary")return{color:"rgba(239, 68, 68, 0.7)",weight:1.2,opacity:1,fill:!1,fillColor:"transparent",fillOpacity:0};if(Vt==="trench")return{color:mt.color||ut,weight:Number(mt.weight)||1.8,opacity:1,fill:!1,fillOpacity:0};if(Vt==="full")return{color:"rgba(255,255,255,0.26)",weight:.78,fill:!1,fillOpacity:0}}if(T){const Vt=mt.name?.toLowerCase();if(Vt==="boundry"||Vt==="boundary")return{color:"rgba(239, 68, 68, 0.7)",weight:1.2,opacity:1,fill:!1,fillColor:"transparent",fillOpacity:0};if(Vt==="trench")return{color:mt.color||G,weight:Number(mt.weight)||1.5,opacity:1,lineCap:"round",lineJoin:"round",fill:!1,fillOpacity:0};if(Vt==="full")return{color:"rgba(255,255,255,0.55)",weight:.78,fill:!1,fillColor:"transparent",fillOpacity:0};if(Vt==="subs")return{color:"#94a3b8",weight:1.5,fill:!1,fillOpacity:0}}return mt.name==="lv_box"?{color:mt.color||"rgba(255,255,255,0.95)",weight:Number(mt.weight)||3.2,fill:!1,fillOpacity:0}:Lt?{color:"rgba(255,255,255,0.85)",weight:1.25,fill:!1,fillOpacity:0}:I&&mt.name==="subs"?{color:"rgba(236,72,153,0.95)",weight:2,dashArray:"8 8",fill:!1,fillOpacity:0}:qt?{color:"rgba(255,255,255,0.85)",weight:1.6,fill:!1,fillOpacity:0}:{color:"rgba(255,255,255,0.26)",weight:.78,fill:!1,fillOpacity:0}},pointToLayer:(Wt,Vt)=>{if(qt&&Wt.properties?.text){const Zt=Wt.properties.text,Ut=Mn(Zt),$t=w&&tu.current?.has(Ut),Gt=String(Zt).replace(/\s+/g,"");if(w)try{oh.current[Ut]=Vt}catch(pe){}const se=typeof h?.invIdTextScale=="number"?h.invIdTextScale:1,fe=typeof h?.invIdTextBaseSize=="number"?h.invIdTextBaseSize:19,bt=typeof h?.invIdTextRefZoom=="number"?h.invIdTextRefZoom:20,ve=h?.invIdTextStyle||"600",je=typeof h?.invIdTextMinFontSize=="number"?h.invIdTextMinFontSize:null,te=typeof h?.invIdTextMaxFontSize=="number"?h.invIdTextMaxFontSize:null,Oe=h?.invIdTextStrokeColor||"rgba(0,0,0,0.88)",Me=typeof h?.invIdTextStrokeWidthFactor=="number"?h.invIdTextStrokeWidthFactor:1.45,Se=h?.invIdTextBgColor||null,he=typeof h?.invIdTextBgPaddingX=="number"?h.invIdTextBgPaddingX:0,le=typeof h?.invIdTextBgPaddingY=="number"?h.invIdTextBgPaddingY:0,Ee=h?.invIdTextBgStrokeColor||null,Ae=typeof h?.invIdTextBgStrokeWidth=="number"?h.invIdTextBgStrokeWidth:0,We=typeof h?.invIdTextBgCornerRadius=="number"?h.invIdTextBgCornerRadius:0,nn=typeof h?.invIdTextMinTextZoom=="number"?h.invIdTextMinTextZoom:null,Fe=typeof h?.invIdTextMinBgZoom=="number"?h.invIdTextMinBgZoom:null,rn=h?.invIdDoneTextColor||"rgba(11,18,32,0.98)",pn=h?.invIdDoneTextColorNoBg||"rgba(34,197,94,0.98)",An=h?.invIdDoneBgColor||"rgba(34,197,94,0.92)",zn=h?.invIdDoneBgStrokeColor||"rgba(255,255,255,0.70)",en=typeof h?.invIdDoneBgStrokeWidth=="number"?h.invIdDoneBgStrokeWidth:2;let tn="rgba(255,255,255,0.98)",i=Se,d=Ee,_=Ae;if(K)if(String(Bn.current||"termination")==="termination")tn=Math.max(0,Math.min(3,Number(En.current?.[Ut]??0)))===3?"rgba(34,197,94,0.98)":"rgba(255,255,255,0.98)";else{const Re=Gn.current?.[Ut];if(Re){const Ie=Re.L1?.status||"N/A",_e=Re.L2?.status||"N/A",ke=Re.L3?.status||"N/A";Ie==="FAILED"||_e==="FAILED"||ke==="FAILED"?tn="rgba(239,68,68,0.98)":Ie==="PASS"&&_e==="PASS"&&ke==="PASS"&&(tn="rgba(34,197,94,0.98)")}}else $t&&(tn=rn,i=An,d=zn,_=en);const A=fe*se,V=22*se,Y=String(Bn.current||"termination"),ct=K?Math.max(0,Math.min(3,Number(En.current?.[Ut]??0))):0;let kt=Oa;K&&($n.current||($n.current=Ce.canvas({padding:.1})),kt=$n.current);const ee=Ce.textLabel(Vt,{text:Gt,renderer:kt,textBaseSize:A,refZoom:bt,textStyle:ve,textColor:tn,textColorNoBg:$t?pn:null,textStrokeColor:Oe,textStrokeWidthFactor:Me,minFontSize:je,maxFontSize:te,bgColor:i,bgPaddingX:he,bgPaddingY:le,bgStrokeColor:d,bgStrokeWidth:_,bgCornerRadius:We,minTextZoom:nn,minBgZoom:Fe,rotation:Wt.properties.angle||0,underline:K?!0:void 0,underlineColor:K?tn:void 0,underlineWidthFactor:K?1:void 0,interactive:w||K||D||C,radius:V});return D&&ee.on("click",pe=>{try{pe?.originalEvent&&(Ce.DomEvent.stopPropagation(pe.originalEvent),Ce.DomEvent.preventDefault(pe.originalEvent))}catch(xe){}const Re=String(wc.current||"mc4");if(Re!=="termination_inv"&&Re!=="termination_panel")return;const Ie=Mn(Gt),_e=Math.max(0,Number(Ch.current?.[Ie]??0)||0),ke=Math.max(0,Math.min(_e>0?_e:999999,Number(to.current?.[Ie]??0)||0)),mn=pe?.originalEvent,_n=mn?.clientX??0,or=mn?.clientY??0;vf({invId:Gt,invIdNorm:Ie,draft:ke,max:_e,x:_n,y:or})}),C&&ee.on("click",pe=>{try{pe?.originalEvent&&(Ce.DomEvent.stopPropagation(pe.originalEvent),Ce.DomEvent.preventDefault(pe.originalEvent))}catch(xe){}const Re=String(Fr.current||"termination_panel");if(Re!=="termination_inv"&&Re!=="termination_panel")return;const Ie=Mn(Gt),_e=Math.max(0,Number(Cc.current?.[Ie]??0)||0),ke=Math.max(0,Math.min(_e>0?_e:999999,Number(zs.current?.[Ie]??0)||0)),mn=pe?.originalEvent,_n=mn?.clientX??0,or=mn?.clientY??0;Vo({invId:Gt,invIdNorm:Ie,draft:ke,max:_e,x:_n,y:or})}),w&&ee.on("click",pe=>{try{pe?.originalEvent&&(Ce.DomEvent.stopPropagation(pe.originalEvent),Ce.DomEvent.preventDefault(pe.originalEvent))}catch(Re){}Lo(Re=>{const Ie=new Set(Re);if(Ie.has(Ut)){if((bc.current||new Set).has(Ut))return Re;Ie.delete(Ut)}else Ie.add(Ut);return Ie})}),K&&ee.on("click",pe=>{try{pe?.originalEvent&&(Ce.DomEvent.stopPropagation(pe.originalEvent),Ce.DomEvent.preventDefault(pe.originalEvent))}catch(Ie){}if(String(Bn.current||"termination")==="termination"){const Ie=Math.max(0,Math.min(3,Number(En.current?.[Ut]??0))),_e=pe?.originalEvent,ke=_e?.clientX??0,mn=_e?.clientY??0;Lr({mode:"termination",invId:Gt,invIdNorm:Ut,draft:Ie,x:ke,y:mn})}else{const Ie=pe?.originalEvent,_e=Ie?.clientX??0,ke=Ie?.clientY??0;Lr({mode:"testing",invId:Gt,invIdNorm:Ut,x:_e,y:ke})}}),K&&(ee._lvttInvNorm=Ut,ee._lvttDisplayId=Gt,ee._lvttRaw=Zt,ee._lvttLocked=!1,Nr.current[Ut]={lat:Vt.lat,lng:Vt.lng,angle:Wt.properties.angle||0,raw:Zt,displayId:Gt}),C&&(hu.current[Ut]=ee),Ll.current[Ut]=ee,ee}return Wt.properties?.text?(at++,Ce.textLabel(Vt,{text:Wt.properties.text,renderer:Oa,textBaseSize:12,refZoom:20,textStyle:"400",textColor:"rgba(255,255,255,0.85)",rotation:Wt.properties.angle||0})):Ce.circleMarker(Vt,{renderer:Oa,radius:2,color:"rgba(255,255,255,0.26)",weight:1,fillColor:"rgba(255,255,255,0.26)",fillOpacity:.65})},onEachFeature:(Wt,Vt)=>{if(w&&mt.name==="lv_box")try{const Zt=Wt?.geometry,Ut=Zt?.coordinates;let $t=0,Gt=0,se=0;const fe=bt=>{const ve=Number(bt?.[0]),je=Number(bt?.[1]);!Number.isFinite(je)||!Number.isFinite(ve)||($t+=je,Gt+=ve,se+=1)};if(Zt?.type==="LineString"&&Array.isArray(Ut)?Ut.forEach(fe):Zt?.type==="Polygon"&&Array.isArray(Ut)?(Ut[0]||[]).forEach(fe):Zt?.type==="MultiPolygon"&&Array.isArray(Ut)&&((Ut[0]||[])[0]||[]).forEach(fe),se>0){const bt=Ce.latLng($t/se,Gt/se),ve=(Ae,We)=>{const nn=Math.floor(We/A0),Fe=Math.floor(Ae/A0);return`${nn}:${Fe}`},je=dp.current||new Map,te=ve(bt.lat,bt.lng),[Oe,Me]=String(te).split(":"),Se=Number(Oe),he=Number(Me);let le=null,Ee=1/0;for(let Ae=-1;Ae<=1;Ae++)for(let We=-1;We<=1;We++){const nn=je.get(`${Se+Ae}:${he+We}`)||[];for(const Fe of nn){const rn=oh.current?.[Fe];if(!rn)continue;const pn=bt.distanceTo(rn);pn<Ee&&(Ee=pn,le=Fe)}}if(le&&Ee<60){const Ae=hp.current;Ae[le]||(Ae[le]=[]),Ae[le].push(Vt)}ah.current.push(Vt)}}catch(Zt){}if(Tt&&Vt&&typeof Vt.on=="function"){const Zt=Wt?.properties?.handle??Wt?.properties?.fid??Wt?.properties?.FID??Wt?.properties?.id??Wt?.id,Ut=`tt_${String(Zt)}`;Vt._ptepUniqueId=Ut,dh.current[Ut]=Vt,Vt.options&&(Vt.options.interactive=!0),Vt.on("click",$t=>{try{$t?.originalEvent&&(Ce.DomEvent.stopPropagation($t.originalEvent),Ce.DomEvent.preventDefault($t.originalEvent))}catch(se){}if(ce||ws.current!=="tabletotable")return;const Gt=$t?.originalEvent?.button===2;Po(se=>{const fe=new Set(se);return Gt||fe.has(Ut)?fe.delete(Ut):fe.add(Ut),fe})})}if(Ot&&Vt&&typeof Vt.on=="function"){const Zt=Wt?.properties?.handle??Wt?.properties?.fid??Wt?.properties?.id??Wt?.id,Ut=`param_${String(Zt)}`;Vt._ptepParamUniqueId=Ut,md.current[Ut]=Vt;try{const $t=Wt?.geometry;let Gt=0;const se=fe=>{if(!Array.isArray(fe)||fe.length<2)return;let bt=null;for(const ve of fe){const je=ve?.[0],te=ve?.[1];if(typeof te!="number"||typeof je!="number")continue;const Oe=Ce.latLng(te,je);bt&&(Gt+=bt.distanceTo(Oe)),bt=Oe}};$t?.type==="LineString"?se($t.coordinates):$t?.type==="MultiLineString"&&($t.coordinates||[]).forEach(se),ph.current[Ut]=Gt}catch($t){ph.current[Ut]=0}Vt.options&&(Vt.options.interactive=!0),Vt.on("click",$t=>{try{$t?.originalEvent&&(Ce.DomEvent.stopPropagation($t.originalEvent),Ce.DomEvent.preventDefault($t.originalEvent))}catch(se){}if(ce||ws.current!=="parameter")return;const Gt=$t?.originalEvent?.button===2;Bo(se=>{const fe=Array.isArray(se)?se:[];if(Gt)return fe.filter(te=>String(te?.uid||"")!==Ut);const bt=fe.filter(te=>String(te?.uid||"")!==Ut);let ve=!0;try{const te=mo(Vt.getLatLngs()),Oe=new Map;fe.forEach(Me=>{if(String(Me?.uid||"")!==Ut)return;const Se=Number(Me?.lineIndex),he=Number(Me?.startM),le=Number(Me?.endM);if(!Number.isFinite(Se)||!Number.isFinite(he)||!Number.isFinite(le))return;const Ee=Math.min(he,le),Ae=Math.max(he,le);Ae>Ee&&(Oe.has(Se)||Oe.set(Se,[]),Oe.get(Se).push([Ee,Ae]))}),te.forEach((Me,Se)=>{if(!Array.isArray(Me)||Me.length<2)return;const he=io({L:Ce,lineLatLngs:Me}),le=he?.cum?.[he.cum.length-1]||0;if(!(le>0))return;const Ee=Ms(Oe.get(Se)||[]);Ee.length===1&&Ee[0][0]<=.2&&Ee[0][1]>=le-.2||(ve=!1)})}catch(te){ve=!1}if(ve)return bt;const je=[];try{mo(Vt.getLatLngs()).forEach((Oe,Me)=>{if(!Array.isArray(Oe)||Oe.length<2)return;const Se=io({L:Ce,lineLatLngs:Oe}),he=Se?.cum?.[Se.cum.length-1]||0;if(!(he>0))return;const le=Ia({lineLatLngs:Oe,cumData:Se,startM:0,endM:he});!le||le.length<2||je.push({id:`${Ut}:${Me}:0.00-${he.toFixed(2)}`,uid:Ut,lineIndex:Me,startM:0,endM:he,coords:le,meters:he})})}catch(te){}return je.length>0?[...bt,...je]:bt})})}if(Lt&&Vt&&typeof Vt.on=="function"){const Zt=Wt?.properties?.fid,Ut=Zt!=null?String(Zt):`t_${tc.current++}`;Vt._mvfTrenchId=Ut,va.current[Ut]=Vt;try{const $t=Wt?.geometry;let Gt=0;const se=bt=>Number(bt).toFixed(6),fe=(bt,ve)=>{if(!Array.isArray(bt)||bt.length<2)return;let je=null,te=0;for(const Oe of bt){const Me=Oe?.[0],Se=Oe?.[1];if(typeof Se!="number"||typeof Me!="number")continue;const he=Ce.latLng(Se,Me);if(je){const le=je.distanceTo(he);Gt+=le;try{const Ee=`${se(je.lat)},${se(je.lng)}`,Ae=`${se(he.lat)},${se(he.lng)}`,We=`${Ee}|${Ae}`,nn=`${Ae}|${Ee}`,Fe=te,rn=te+le;te=rn;const pn={fid:String(Ut),lineIndex:Number(ve)||0,startM:Fe,endM:rn};Hc.current.set(We,pn),Hc.current.set(nn,pn)}catch(Ee){}}je=he}};$t?.type==="LineString"?fe($t.coordinates,0):$t?.type==="MultiLineString"&&($t.coordinates||[]).forEach((bt,ve)=>fe(bt,ve)),Jf.current[Ut]=Gt,hl(bt=>bt+Gt)}catch($t){}Vt.on("click",$t=>{try{$t?.originalEvent&&(Ce.DomEvent.stopPropagation($t.originalEvent),Ce.DomEvent.preventDefault($t.originalEvent))}catch(Gt){}})}if(It&&Vt&&typeof Vt.on=="function"){const Zt=Wt?.properties?.handle??Wt?.properties?.fid??Wt?.properties?.id??Wt?.id??`datp_${Math.random().toString(36).slice(2)}`,Ut=`datp_${String(Zt)}`;Vt._datpTrenchId=Ut,mh.current[Ut]=Vt;try{const $t=Wt?.geometry;let Gt=0;const se=fe=>{if(!Array.isArray(fe)||fe.length<2)return;let bt=null;for(const ve of fe){const je=ve?.[0],te=ve?.[1];if(typeof te!="number"||typeof je!="number")continue;const Oe=Ce.latLng(te,je);bt&&(Gt+=bt.distanceTo(Oe)),bt=Oe}};$t?.type==="LineString"?se($t.coordinates):$t?.type==="MultiLineString"&&($t.coordinates||[]).forEach(se),ff.current[Ut]=Gt,su(fe=>fe+Gt)}catch($t){ff.current[Ut]=0}Vt.options&&(Vt.options.interactive=!0),Vt.on("click",$t=>{try{$t?.originalEvent&&(Ce.DomEvent.stopPropagation($t.originalEvent),Ce.DomEvent.preventDefault($t.originalEvent))}catch(se){}if(ce)return;const Gt=$t?.originalEvent?.button===2;zo(se=>{const fe=Array.isArray(se)?se:[];if(Gt)return fe.filter(te=>String(te?.uid||"")!==Ut);const bt=fe.filter(te=>String(te?.uid||"")!==Ut);let ve=!0;try{const te=mo(Vt.getLatLngs()),Oe=new Map;fe.forEach(Me=>{if(String(Me?.uid||"")!==Ut)return;const Se=Number(Me?.lineIndex),he=Number(Me?.startM),le=Number(Me?.endM);if(!Number.isFinite(Se)||!Number.isFinite(he)||!Number.isFinite(le))return;const Ee=Math.min(he,le),Ae=Math.max(he,le);Ae>Ee&&(Oe.has(Se)||Oe.set(Se,[]),Oe.get(Se).push([Ee,Ae]))}),te.forEach((Me,Se)=>{if(!Array.isArray(Me)||Me.length<2)return;const he=io({L:Ce,lineLatLngs:Me}),le=he?.cum?.[he.cum.length-1]||0;if(!(le>0))return;const Ee=Ms(Oe.get(Se)||[]);Ee.length===1&&Ee[0][0]<=.2&&Ee[0][1]>=le-.2||(ve=!1)})}catch(te){ve=!1}if(ve)return bt;const je=[];try{mo(Vt.getLatLngs()).forEach((Oe,Me)=>{if(!Array.isArray(Oe)||Oe.length<2)return;const Se=io({L:Ce,lineLatLngs:Oe}),he=Se?.cum?.[Se.cum.length-1]||0;if(!(he>0))return;const le=Ia({lineLatLngs:Oe,cumData:Se,startM:0,endM:he});!le||le.length<2||je.push({id:`${Ut}:${Me}:0.00-${he.toFixed(2)}`,uid:Ut,lineIndex:Me,startM:0,endM:he,coords:le,meters:he})})}catch(te){}return je.length>0?[...bt,...je]:bt})})}if(Mt&&Vt&&typeof Vt.on=="function"){const Zt=Wt?.properties?.handle??Wt?.properties?.fid??Wt?.properties?.id??Wt?.id??`mvft_${Math.random().toString(36).slice(2)}`,Ut=`mvft_${String(Zt)}`;Vt._mvftTrenchId=Ut,bh.current[Ut]=Vt;try{const $t=Wt?.geometry;let Gt=0;const se=fe=>{if(!Array.isArray(fe)||fe.length<2)return;let bt=null;for(const ve of fe){const je=ve?.[0],te=ve?.[1];if(typeof te!="number"||typeof je!="number")continue;const Oe=Ce.latLng(te,je);bt&&(Gt+=bt.distanceTo(Oe)),bt=Oe}};$t?.type==="LineString"?se($t.coordinates):$t?.type==="MultiLineString"&&($t.coordinates||[]).forEach(se),yh.current[Ut]=Gt,xp(fe=>fe+Gt)}catch($t){yh.current[Ut]=0}Vt.options&&(Vt.options.interactive=!0),Vt.on("click",$t=>{try{$t?.originalEvent&&(Ce.DomEvent.stopPropagation($t.originalEvent),Ce.DomEvent.preventDefault($t.originalEvent))}catch(se){}if(_t||ce)return;const Gt=$t?.originalEvent?.button===2;Fo(se=>{const fe=Array.isArray(se)?se:[];if(Gt)return fe.filter(te=>String(te?.uid||"")!==Ut);const bt=fe.filter(te=>String(te?.uid||"")!==Ut);let ve=!0;try{const te=mo(Vt.getLatLngs()),Oe=new Map;fe.forEach(Me=>{if(String(Me?.uid||"")!==Ut)return;const Se=Number(Me?.lineIndex),he=Number(Me?.startM),le=Number(Me?.endM);if(!Number.isFinite(Se)||!Number.isFinite(he)||!Number.isFinite(le))return;const Ee=Math.min(he,le),Ae=Math.max(he,le);Ae>Ee&&(Oe.has(Se)||Oe.set(Se,[]),Oe.get(Se).push([Ee,Ae]))}),te.forEach((Me,Se)=>{if(!Array.isArray(Me)||Me.length<2)return;const he=io({L:Ce,lineLatLngs:Me}),le=he?.cum?.[he.cum.length-1]||0;if(!(le>0))return;const Ee=Ms(Oe.get(Se)||[]);Ee.length===1&&Ee[0][0]<=.2&&Ee[0][1]>=le-.2||(ve=!1)})}catch(te){ve=!1}if(ve)return bt;const je=[];try{mo(Vt.getLatLngs()).forEach((Oe,Me)=>{if(!Array.isArray(Oe)||Oe.length<2)return;const Se=io({L:Ce,lineLatLngs:Oe}),he=Se?.cum?.[Se.cum.length-1]||0;if(!(he>0))return;const le=Ia({lineLatLngs:Oe,cumData:Se,startM:0,endM:he});!le||le.length<2||je.push({id:`${Ut}:${Me}:0.00-${he.toFixed(2)}`,uid:Ut,lineIndex:Me,startM:0,endM:he,coords:le,meters:he})})}catch(te){}return je.length>0?[...bt,...je]:bt})})}if(Wt.properties?.text&&Wt.geometry.type!=="Point"){let Zt;typeof Vt.getBounds=="function"?Zt=Vt.getBounds().getCenter():typeof Vt.getLatLng=="function"&&(Zt=Vt.getLatLng());let Ut=0;if(Wt.geometry.type==="LineString"&&(Ut=eS(Wt.geometry.coordinates)),Zt){at++;const $t=Ce.textLabel(Zt,{text:Wt.properties.text,renderer:Oa,textBaseSize:20,refZoom:22,textStyle:"300",textColor:"rgba(255,255,255,0.9)",rotation:Ut});$t.addTo(ge.current),Cn.current.push($t)}}}}).addTo(ge.current);W&&mt.name==="earthing_tabletotable"&&Rt?.features?.length&&ng(Rt.features.length),W&&mt.name==="earthing_parameter"&&Rt?.features?.length&&setTimeout(()=>{let Wt=0;Object.values(ph.current).forEach(Vt=>{Wt+=Vt||0}),yp(Wt)},100),R&&mt.name==="trench"&&Rt?.features?.length&&setTimeout(()=>{let Wt=0;Object.values(ff.current).forEach(Vt=>{Wt+=Vt||0}),su(Wt)},100),Cn.current.push(Xt),Xt.getBounds().isValid()&&B.extend(Xt.getBounds())}catch(vt){console.error("Error loading GeoJSON:",vt)}if(B.isValid()&&ge.current.fitBounds(B,{padding:[20,20]}),D){const mt=Ge.current||{};let vt=0;Object.keys(mt).forEach(wt=>{const Nt=mt[wt];if(!Nt.mc4Ends&&typeof Nt.computeEnds=="function")try{const Rt=Nt.computeEnds();Rt&&(Nt.mc4Ends=Rt,vt++)}catch{}})}hn(),ge.current.off("zoomend moveend",hn),ge.current.on("zoomend moveend",hn);const xt=.001,yt=(()=>{const mt=new Map,vt=new Set;for(const wt of qn.current){if(!wt?.stringId||!Q&&vt.has(wt.stringId))continue;vt.add(wt.stringId);const Nt=Math.floor(wt.lat/xt),Rt=Math.floor(wt.lng/xt),qt=`${Nt}:${Rt}`;mt.has(qt)||mt.set(qt,[]),mt.get(qt).push({stringId:wt.stringId,latLng:Ce.latLng(wt.lat,wt.lng)})}return mt})();jh.current=(()=>{const mt=new Map;for(let vt=0;vt<qn.current.length;vt++){const wt=qn.current[vt];if(!wt)continue;const Nt=Math.floor(wt.lat/xt),Rt=Math.floor(wt.lng/xt),qt=`${Nt}:${Rt}`;mt.has(qt)||mt.set(qt,[]),mt.get(qt).push(vt)}return mt})();const ht=(mt,vt,wt)=>{let Nt=mt;if(wt){const Mt=vt.lat*Math.PI/180,_t=Math.max(.2,Math.cos(Mt)),Et=l1/111320,Pt=Et/_t,Dt=mt.getSouthWest(),Ft=mt.getNorthEast();Nt=Ce.latLngBounds([Dt.lat-Et,Dt.lng-Pt],[Ft.lat+Et,Ft.lng+Pt])}const Rt=Nt.getSouthWest(),qt=Nt.getNorthEast(),jt=Math.floor(Rt.lat/xt),Lt=Math.floor(qt.lat/xt),Tt=Math.floor(Rt.lng/xt),Ot=Math.floor(qt.lng/xt),It=[];for(let Mt=jt;Mt<=Lt;Mt++)for(let _t=Tt;_t<=Ot;_t++){const Et=`${Mt}:${_t}`,Pt=yt.get(Et);Pt&&Pt.length&&It.push(...Pt)}return It};setTimeout(()=>{const mt=new Set,vt=[];if(Cn.current.forEach(jt=>{jt.eachLayer&&jt.eachLayer(Lt=>{if(Lt.feature&&Lt.getBounds)try{const Tt=Lt._uniquePolygonId;if(!Tt||!Ge.current?.[Tt])return;const Ot=Lt.getBounds(),It=Ot.getCenter(),Mt=Lt.feature?.geometry,_t=Ot.getNorthWest().distanceTo(Ot.getNorthEast()),Et=Ot.getNorthWest().distanceTo(Ot.getSouthWest()),Pt=Math.sqrt(_t*_t+Et*Et),Dt=Pt<25,Ft=(()=>{try{const Xt=Ot.getSouthWest(),Wt=Ot.getNorthEast();return!Xt||!Wt?"":`${Xt.lat.toFixed(7)}:${Xt.lng.toFixed(7)}:${Wt.lat.toFixed(7)}:${Wt.lng.toFixed(7)}`}catch(Xt){return""}})();Tt&&Ge.current?.[Tt]&&(Ge.current[Tt].dedupeKey=Ft),vt.push({featureLayer:Lt,bounds:Ot,center:It,geometry:Mt,diag:Pt,isSmallTable:Dt,dedupeKey:Ft})}catch{}})}),vt.sort((jt,Lt)=>Lt.diag-jt.diag),h?.workUnitWeights&&vt.length)try{const jt=h.workUnitWeights,Lt=Number(jt?.long),Tt=Number(jt?.medium),Ot=Number(jt?.short);if(Number.isFinite(Lt)&&Number.isFinite(Tt)&&Number.isFinite(Ot)){const It=ge.current,Mt=Ft=>{if(!It||!Ft||typeof Ft.getLatLngs!="function")return 0;let Xt=Ft.getLatLngs();for(;Array.isArray(Xt)&&Xt.length&&Array.isArray(Xt[0]);)Xt=Xt[0];for(;Array.isArray(Xt)&&Xt.length&&Array.isArray(Xt[0]);)Xt=Xt[0];const Wt=Array.isArray(Xt)?Xt:null;if(!Wt||Wt.length<2)return 0;let Vt=0;for(let Zt=0;Zt<Wt.length-1;Zt++){const Ut=Wt[Zt],$t=Wt[Zt+1];if(!(!Ut||!$t))try{const Gt=Ce.latLng(Ut.lat,Ut.lng).distanceTo(Ce.latLng($t.lat,$t.lng));Number.isFinite(Gt)&&Gt>Vt&&(Vt=Gt)}catch(Gt){}}try{const Zt=Wt[0],Ut=Wt[Wt.length-1];if(Zt&&Ut){const $t=Ce.latLng(Zt.lat,Zt.lng).distanceTo(Ce.latLng(Ut.lat,Ut.lng));Number.isFinite($t)&&$t>Vt&&(Vt=$t)}}catch(Zt){}return Vt},_t=.1,Et=Ft=>Math.round(Ft/_t)*_t,Pt=new Map;vt.forEach(Ft=>{const Xt=Mt(Ft?.featureLayer);if(Ft.longestEdge=Xt,!(Xt>1))return;const Wt=Et(Xt);Pt.set(Wt,(Pt.get(Wt)||0)+1)});const Dt=Array.from(Pt.entries()).sort((Ft,Xt)=>Xt[1]-Ft[1]).slice(0,3).map(([Ft])=>Number(Ft)).filter(Ft=>Number.isFinite(Ft)&&Ft>0).sort((Ft,Xt)=>Xt-Ft);if(Dt.length===3){const Ft=new Map([[Dt[0],Lt],[Dt[1],Tt],[Dt[2],Ot]]),Xt=Zt=>{let Ut=Dt[0],$t=Math.abs(Zt-Dt[0]);for(let Gt=1;Gt<Dt.length;Gt++){const se=Math.abs(Zt-Dt[Gt]);se<$t&&(Ut=Dt[Gt],$t=se)}return Ut};let Wt=0;const Vt=new Set;vt.forEach(Zt=>{const Ut=Zt?.featureLayer?._uniquePolygonId;if(!Ut||!Ge.current?.[Ut])return;const $t=Number(Zt?.longestEdge)||0;if(!($t>0))return;const Gt=Xt($t),se=Number(Ft.get(Gt))||0;Ge.current[Ut].workUnits=se;const fe=String(Ge.current?.[Ut]?.dedupeKey||Ut);Vt.has(fe)||(Vt.add(fe),Wt+=se)}),Zs(Wt),Qo(0)}}}catch{}const wt=vt.length,Nt=80;let Rt=0;const qt=()=>{const jt=Math.min(Rt+Nt,wt);for(let Lt=Rt;Lt<jt;Lt++){const{featureLayer:Tt,bounds:Ot,center:It,isSmallTable:Mt}=vt[Lt],_t=[],Et=[],Pt=ht(Ot,It,Mt);for(const Ft of Pt){if(!Q&&!Mt&&mt.has(Ft.stringId))continue;const Xt=It.distanceTo(Ft.latLng);Ot.contains(Ft.latLng)?_t.push({stringId:Ft.stringId,dist:Xt}):Mt&&Xt<nS&&Et.push({stringId:Ft.stringId,dist:Xt})}let Dt=null;if(_t.length===1)Dt=_t[0].stringId;else if(_t.length>1)_t.sort((Ft,Xt)=>Ft.dist-Xt.dist),Dt=_t[0].stringId;else if(Mt&&Et.length>0)Et.sort((Ft,Xt)=>Ft.dist-Xt.dist),Dt=Et[0].stringId;else if(Mt){let Ft=null;for(const Xt of Pt){const Wt=It.distanceTo(Xt.latLng);Wt<l1&&(!Ft||Wt<Ft.dist)&&(Ft={stringId:Xt.stringId,dist:Wt})}Ft&&(Dt=Ft.stringId)}if(Dt){const Ft=Tt._uniquePolygonId;Ft&&Ge.current[Ft]&&(Ge.current[Ft].stringId=Dt,Ge.current[Ft].isSmallTable=Mt),!Q&&!Mt&&mt.add(Dt)}}if(Rt=jt,Rt<wt)f(`Matching strings... ${Math.round(Rt/wt*100)}%`),requestAnimationFrame(qt);else{const Lt=Object.keys(Ge.current).length,Tt=new Set(Object.values(Ge.current).map(Ot=>Ot.stringId).filter(Boolean)).size;console.log("Matched:",Lt,"polygons to",Tt,"unique string IDs"),Ht(lt),Zo(Ot=>Ot+1),f(`Ready: ${J} objects, ${at} labels, ${lt.length} selectable strings`)}};qt()},50)};ot.useEffect(()=>{if(!I)return;const B=ge.current,J=as.current;if(!B||!J)return;const at=qs.current;if(!at?.adj)return;(()=>{try{J.clearLayers()}catch{}Uc.current={}})();const dt=qn.current||[],xt=vt=>dt.find(wt=>wt?.stringId===vt)||null,yt=vt=>{if(!at?.nodes?.size)return null;const{nodes:wt,grid:Nt,gridSize:Rt}=at,qt=Math.floor(vt.lat/Rt),jt=Math.floor(vt.lng/Rt);let Lt=null,Tt=1/0;const Ot=It=>{for(let Mt=-It;Mt<=It;Mt++)for(let _t=-It;_t<=It;_t++){const Et=`${qt+Mt}:${jt+_t}`,Pt=Nt.get(Et);if(Pt)for(const Dt of Pt){const Ft=wt.get(Dt);if(!Ft)continue;const Xt=vt.distanceTo(Ce.latLng(Ft.lat,Ft.lng));Xt<Tt&&(Tt=Xt,Lt=Dt)}}};for(let It=0;It<=6&&(Ot(It),!(Lt&&Tt<250));It++);return Lt},ht=vt=>{const wt=ul.find(Vt=>Vt.key===vt);if(!wt?.label)return null;const[Nt,Rt]=wt.label.split("-"),qt=Mn(Nt),jt=Mn(Rt),Lt=xt(qt),Tt=xt(jt);if(!Lt||!Tt)return null;const Ot=Ce.latLng(Lt.lat,Lt.lng),It=Ce.latLng(Tt.lat,Tt.lng),Mt=yt(Ot),_t=yt(It);if(!Mt||!_t)return null;const Et=new Map([[Mt,0]]),Pt=new Map,Dt=new Set,Ft=()=>{let Vt=null,Zt=1/0;for(const[Ut,$t]of Et.entries())Dt.has(Ut)||$t<Zt&&(Zt=$t,Vt=Ut);return Vt};for(let Vt=0;Vt<2e4;Vt++){const Zt=Ft();if(!Zt||Zt===_t)break;Dt.add(Zt);const Ut=at.adj.get(Zt)||[],$t=Et.get(Zt)||0;for(const Gt of Ut){const se=$t+(Gt.w||0),fe=Et.get(Gt.to);(fe==null||se<fe)&&(Et.set(Gt.to,se),Pt.set(Gt.to,Zt))}}const Xt=[];let Wt=_t;if(!Pt.has(Wt)&&Wt!==Mt)return null;for(;Wt;){const Vt=at.nodes.get(Wt);if(Vt&&Xt.push([Vt.lat,Vt.lng]),Wt===Mt)break;Wt=Pt.get(Wt)}return Xt.reverse(),Xt.length>=2?Xt:null};Array.from(new Set([...Array.from(ba||[]).map(String),...Array.from(ko.current||[]).map(String)])).forEach(vt=>{const wt=ht(vt);if(!wt||wt.length<2)return;try{const Ot=Hc.current,It=_t=>Number(_t).toFixed(6),Mt=new Map;for(let _t=0;_t<wt.length-1;_t++){const Et=wt[_t],Pt=wt[_t+1];if(!Et||!Pt)continue;const Dt=`${It(Et[0])},${It(Et[1])}`,Ft=`${It(Pt[0])},${It(Pt[1])}`,Xt=Ot.get(`${Dt}|${Ft}`);if(!Xt)continue;const Wt=String(Xt.fid||""),Vt=Number(Xt.lineIndex)||0,Zt=Math.min(Number(Xt.startM)||0,Number(Xt.endM)||0),Ut=Math.max(Number(Xt.startM)||0,Number(Xt.endM)||0);if(!(Ut>Zt))continue;const $t=`${Wt}:${Vt}`;Mt.has($t)||Mt.set($t,[]),Mt.get($t).push([Zt,Ut])}for(const[_t,Et]of Mt.entries())Mt.set(_t,Ms(Et));Ba.current[vt]=Mt}catch{}let Nt=0;for(let Ot=0;Ot<wt.length-1;Ot++){const It=wt[Ot],Mt=wt[Ot+1];!It||!Mt||(Nt+=Ce.latLng(It[0],It[1]).distanceTo(Ce.latLng(Mt[0],Mt[1])))}const Rt=Number(Ws.current?.[vt])||0,qt=Nt>0?Rt/Nt:1;os.current[vt]=qt;try{St(vt)}catch{}const Lt=ko.current?.has?.(vt)?"#16a34a":St(vt),Tt=Ce.polyline(wt,{color:Lt,weight:4.6,opacity:.98,interactive:!0});Tt._mvfSegmentKey=vt,Uc.current[vt]||(Uc.current[vt]=[]),Uc.current[vt].push(Tt),Tt.on("contextmenu",Ot=>{try{Ot?.originalEvent&&(Ce.DomEvent.stopPropagation(Ot.originalEvent),Ce.DomEvent.preventDefault(Ot.originalEvent))}catch{}Xl(It=>{const Mt=new Set(It);return Mt.delete(vt),Mt})}),J.addLayer(Tt)})},[I,ba,ul,St,dl]),ot.useEffect(()=>{if(!Ke||!ge.current||Z||K||z&&!ce)return;const B=ge.current,J=B.getContainer(),at=ht=>{const mt=ht?.target;return mt?!!(mt.closest?.(".custom-note-pin")||mt.closest?.(".note-dot-hit")||mt.closest?.(".note-dot-core")||mt.closest?.(".custom-punch-pin")||mt.closest?.(".punch-dot-hit")||mt.closest?.(".punch-dot-core")):!1},lt=ht=>{ht.preventDefault()};J.addEventListener("contextmenu",lt);const dt=ht=>{if(ht.button!==0&&ht.button!==2||(z&&(qu.current=!!window.__cewHamburgerMenuOpen),ce&&at(ht)))return;jl.current=!1,sf.current=!1;let mt=null;try{if(!B||!B._loaded||!B._mapPane)return;mt=B.mouseEventToLatLng(ht)}catch{return}if(cn.current={start:mt,startPoint:{x:ht.clientX,y:ht.clientY},isRightClick:ht.button===2,isDrag:!1},z&&!ce)try{ht.preventDefault(),ht.stopPropagation()}catch{}try{B.dragging?.disable?.()}catch{}},xt=ht=>{if(!cn.current||C&&!ce&&String(ds.current||"termination")==="testing")return;const mt=ht.clientX-cn.current.startPoint.x,vt=ht.clientY-cn.current.startPoint.y;(Math.abs(mt)>5||Math.abs(vt)>5)&&(cn.current.isDrag=!0);let wt=null;try{if(!B||!B._loaded||!B._mapPane)return;wt=B.mouseEventToLatLng(ht)}catch{return}const Nt=Ce.latLngBounds(cn.current.start,wt);if(Zn.current)Zn.current.setBounds(Nt);else if(cn.current.isDrag){const Rt=cn.current.isRightClick,qt=ce?"#f97316":Rt?"#ef4444":"#3b82f6";Zn.current=Ce.rectangle(Nt,{color:qt,weight:2,fillColor:qt,fillOpacity:.2,dashArray:"5, 5",interactive:!1}).addTo(B)}},yt=ht=>{if(!cn.current)return;const mt=qu.current===!0,vt=Za.current===!0;if(qu.current=!1,mt||vt){if(vt&&na(!1),cn.current=null,Zn.current){try{Zn.current.remove()}catch{}Zn.current=null}try{B.dragging.enable()}catch{}return}try{B.dragging.enable()}catch{}const wt=cn.current.isDrag,Nt=cn.current.isRightClick,Rt=cn.current.start;if(z&&wt&&!ce)try{ht?.preventDefault?.(),ht?.stopPropagation?.()}catch{}if(Zn.current&&wt){const qt=Zn.current.getBounds();if(ce)if(z){const jt=us.filter(Lt=>{let Tt=Lt.lat,Ot=Lt.lng;if(Lt.tableId&&Lt.isoX!=null&&Lt.isoY!=null&&Lt.lat===0&&Lt.lng===0){const It=Tu.current?.[Lt.id];It&&(Tt=It.lat,Ot=It.lng)}return!Tt||!Ot?!1:qt.contains(Ce.latLng(Tt,Ot))});jt.length>0&&Qu(Lt=>{const Tt=new Set(Lt);return Nt?jt.forEach(Ot=>Tt.delete(Ot.id)):jt.forEach(Ot=>Tt.add(Ot.id)),Tt})}else{const jt=Hn.filter(Lt=>qt.contains(Ce.latLng(Lt.lat,Lt.lng)));jt.length>0&&Yr(Lt=>{const Tt=new Set(Lt);return Nt?jt.forEach(Ot=>Tt.delete(Ot.id)):jt.forEach(Ot=>Tt.add(Ot.id)),Tt})}else if(I){const jt=va.current||{},Lt=String(h?.key||"").toUpperCase()==="FIB";if(Nt)co(Tt=>{const Ot=Tt||[];if(Ot.length===0)return Ot;const It=new Map;Ot.forEach(_t=>{const Et=String(_t?.fid||""),Pt=Number(_t?.lineIndex);if(!Et||!Number.isFinite(Pt)||!Number.isFinite(Number(_t?.startM))||!Number.isFinite(Number(_t?.endM))){const Ft=`__raw__:${Math.random()}`;It.set(Ft,[_t]);return}const Dt=`${Et}:${Pt}`;It.has(Dt)||It.set(Dt,[]),It.get(Dt).push(_t)});const Mt=[];for(const[_t,Et]of It.entries()){if(_t.startsWith("__raw__")){Mt.push(...Et);continue}const[Pt,Dt]=_t.split(":"),Ft=Number(Dt),Xt=jt[Pt];if(!Xt||typeof Xt.getLatLngs!="function"){Mt.push(...Et);continue}const Vt=mo(Xt.getLatLngs())[Ft];if(!Vt||Vt.length<2){Mt.push(...Et);continue}const Zt=zf({L:Ce,map:B,bounds:qt,lineLatLngs:Vt,minMeters:.5});if(!Zt.length){Mt.push(...Et);continue}const Ut=Ms(Zt),$t=io({L:Ce,lineLatLngs:Vt});Et.forEach(Gt=>{const se=Number(Gt.startM),fe=Number(Gt.endM),bt=Math.min(se,fe),ve=Math.max(se,fe);Eu([bt,ve],Ut,.2).forEach(([te,Oe])=>{const Me=Ia({lineLatLngs:Vt,cumData:$t,startM:te,endM:Oe});if(!Me||Me.length<2)return;const Se=Gt?.segmentKey?`:seg:${String(Gt.segmentKey)}`:"";Mt.push({...Gt,id:`${Pt}:${Ft}:${te.toFixed(2)}-${Oe.toFixed(2)}${Se}`,lineIndex:Ft,startM:te,endM:Oe,coords:Me,meters:Math.max(0,Oe-te),metersMultiplier:typeof Gt?.metersMultiplier=="number"?Gt.metersMultiplier:Gt?.source==="segment"?1:gt})})})}return Mt});else{const Tt=String(fl.current||""),Ot=Lt?Tt:Tt||"__FREE__",It=ko.current||new Set;if((!Lt||Lt&&Ot&&Ot!=="__FREE__")&&!(Ot&&Ot!=="__FREE__"&&It.has(Ot))){const Mt=[],_t=Ot&&Ot!=="__FREE__"&&typeof os.current?.[Ot]=="number"?os.current[Ot]:gt,Et=new Set((pl.current||[]).filter(Vt=>String(Vt?.segmentKey||"")===String(Ot)).map(Vt=>String(Vt?.id||""))),Pt=Ot&&Ot!=="__FREE__"&&Ba.current?.[Ot]||null,Dt=(()=>{if(Lt||Ot!=="__FREE__")return null;const Vt=Array.from(ko.current||[]);if(Vt.length===0)return null;const Zt=new Map;Vt.forEach(Ut=>{const $t=Ba.current?.[String(Ut)];if($t)for(const[Gt,se]of $t.entries())Zt.has(Gt)||Zt.set(Gt,[]),Zt.get(Gt).push(...se)});for(const[Ut,$t]of Zt.entries())Zt.set(Ut,Ms($t));return Zt})(),Ft=(Vt,Zt)=>{const Ut=[];let $t=0,Gt=0;for(;$t<Vt.length&&Gt<Zt.length;){const se=Vt[$t],fe=Zt[Gt],bt=Math.max(se[0],fe[0]),ve=Math.min(se[1],fe[1]);ve>bt&&Ut.push([bt,ve]),se[1]<fe[1]?$t++:Gt++}return Ut},Xt=new Map,Wt=Vt=>{if(String(Vt?.segmentKey||"")!==String(Ot))return;const Zt=String(Vt?.fid||""),Ut=Number(Vt?.lineIndex),$t=Number(Vt?.startM),Gt=Number(Vt?.endM);if(!Zt||!Number.isFinite(Ut)||!Number.isFinite($t)||!Number.isFinite(Gt))return;const se=Math.min($t,Gt),fe=Math.max($t,Gt);if(!(fe>se))return;const bt=`${Zt}:${Ut}`;Xt.has(bt)||Xt.set(bt,[]),Xt.get(bt).push([se,fe])};(Eo.current||[]).forEach(Wt),(pl.current||[]).forEach(Wt);for(const[Vt,Zt]of Xt.entries())Xt.set(Vt,Ms(Zt));Object.keys(jt).forEach(Vt=>{const Zt=jt[Vt];if(!Zt||typeof Zt.getBounds!="function"||typeof Zt.getLatLngs!="function")return;try{const $t=Zt.getBounds();if(!$t||!qt.intersects($t))return}catch{return}mo(Zt.getLatLngs()).forEach(($t,Gt)=>{if(!$t||$t.length<2)return;const se=`${Vt}:${Gt}`;let fe=zf({L:Ce,map:B,bounds:qt,lineLatLngs:$t,minMeters:.5});if(!fe.length)return;if(Pt){const je=Pt.get(se)||[];if(!je.length||(fe=Ft(fe,je),!fe.length))return}if(Dt){const je=Dt.get(se)||[];if(je.length){const te=[];if(fe.forEach(Oe=>{const Me=Eu(Oe,je,.2);te.push(...Me)}),fe=Ms(te),!fe.length)return}}let bt=Xt.get(se)||[];const ve=io({L:Ce,lineLatLngs:$t});fe.forEach(([je,te])=>{const Oe=Eu([je,te],bt,.2);Oe.length&&(bt=Ms([...bt,...Oe]),Xt.set(se,bt),Oe.forEach(([Me,Se])=>{const he=`${Vt}:${Gt}:${Me.toFixed(2)}-${Se.toFixed(2)}:seg:${Ot}`;if(Et.has(he))return;const le=Ia({lineLatLngs:$t,cumData:ve,startM:Me,endM:Se});!le||le.length<2||Mt.push({id:he,fid:String(Vt),lineIndex:Gt,startM:Me,endM:Se,coords:le,meters:Math.max(0,Se-Me),metersMultiplier:_t,segmentKey:Ot,source:"box"})}))})})}),Mt.length>0&&co(Vt=>[...Vt||[],...Mt])}}}else if(D||C&&String(ds.current||"termination")!=="testing"){let jt=[];const Lt=Ge.current||{},Tt=ge.current,Ot=Dt=>{if(!Tt||!Dt||typeof Dt.getLatLngs!="function")return null;let Ft=Dt.getLatLngs();for(;Array.isArray(Ft)&&Ft.length&&Array.isArray(Ft[0]);)Ft=Ft[0];for(;Array.isArray(Ft)&&Ft.length&&Array.isArray(Ft[0]);)Ft=Ft[0];const Xt=Array.isArray(Ft)?Ft:null;if(!Xt||Xt.length<3)return null;const Wt=Xt.map(Ut=>Tt.latLngToLayerPoint(Ut)).filter(Boolean);if(Wt.length<3)return null;const Vt=Wt[0],Zt=Wt[Wt.length-1];return Vt&&Zt&&Vt.x===Zt.x&&Vt.y===Zt.y&&Wt.pop(),Wt},It=(()=>{if(!Tt)return null;const Dt=qt.getSouthWest(),Ft=qt.getNorthEast(),Xt=Ce.latLng(Ft.lat,Dt.lng),Wt=Ce.latLng(Dt.lat,Ft.lng);return[Tt.latLngToLayerPoint(Xt),Tt.latLngToLayerPoint(Ft),Tt.latLngToLayerPoint(Wt),Tt.latLngToLayerPoint(Dt)]})(),Mt=(Dt,Ft,Xt,Wt,Vt)=>Dt.x>=Ft&&Dt.x<=Xt&&Dt.y>=Wt&&Dt.y<=Vt,_t=(Dt,Ft)=>{let Xt=!1;for(let Wt=0,Vt=Ft.length-1;Wt<Ft.length;Vt=Wt++){const Zt=Ft[Wt].x,Ut=Ft[Wt].y,$t=Ft[Vt].x,Gt=Ft[Vt].y;Ut>Dt.y!=Gt>Dt.y&&Dt.x<($t-Zt)*(Dt.y-Ut)/(Gt-Ut+1e-12)+Zt&&(Xt=!Xt)}return Xt},Et=(Dt,Ft,Xt,Wt)=>{const Vt=(fe,bt,ve)=>(bt.y-fe.y)*(ve.x-bt.x)-(bt.x-fe.x)*(ve.y-bt.y),Zt=(fe,bt,ve)=>Math.min(fe.x,ve.x)<=bt.x&&bt.x<=Math.max(fe.x,ve.x)&&Math.min(fe.y,ve.y)<=bt.y&&bt.y<=Math.max(fe.y,ve.y),Ut=Vt(Dt,Ft,Xt),$t=Vt(Dt,Ft,Wt),Gt=Vt(Xt,Wt,Dt),se=Vt(Xt,Wt,Ft);return!!((Ut>0&&$t<0||Ut<0&&$t>0)&&(Gt>0&&se<0||Gt<0&&se>0)||Math.abs(Ut)<1e-9&&Zt(Dt,Xt,Ft)||Math.abs($t)<1e-9&&Zt(Dt,Wt,Ft)||Math.abs(Gt)<1e-9&&Zt(Xt,Dt,Wt)||Math.abs(se)<1e-9&&Zt(Xt,Ft,Wt))},Pt=Dt=>{if(!Tt||!It)return!1;const Ft=Ot(Dt);if(!Ft)return!1;const Xt=It.map(se=>se.x),Wt=It.map(se=>se.y),Vt=Math.min(...Xt),Zt=Math.max(...Xt),Ut=Math.min(...Wt),$t=Math.max(...Wt);if(Ft.some(se=>Mt(se,Vt,Zt,Ut,$t))||It.some(se=>_t(se,Ft)))return!0;const Gt=[[It[0],It[1]],[It[1],It[2]],[It[2],It[3]],[It[3],It[0]]];for(let se=0;se<Ft.length;se++){const fe=Ft[se],bt=Ft[(se+1)%Ft.length];for(let ve=0;ve<Gt.length;ve++){const[je,te]=Gt[ve];if(Et(fe,bt,je,te))return!0}}return!1};if(Object.keys(Lt).forEach(Dt=>{const Xt=Lt[Dt]?.layer;if(!(!Xt||typeof Xt.getBounds!="function"))try{Pt(Xt)&&jt.push(Dt)}catch{}}),jt.length>0){const Dt=C,Ft=Dt?Fr.current:wc.current,Xt=Dt?kh:au,Wt=Dt?gu:vu,Vt=Dt?oa:Ts,Zt=Dt?Wo:kf;if(Dt&&Nt){const Ut=aa.current||new Set;jt=jt.filter($t=>!Ut.has(String($t))),jt.length===0&&kh("Submitted tables can only be removed from History.")}if(!Ft)Xt("Please select a mode above.");else if(!(!Nt&&Ft==="termination_inv")){const Ut=jt.map($t=>{const Gt=Wt($t),se=Nt?{left:null,right:null}:Dt?{left:Jr.TERMINATED,right:Jr.TERMINATED}:(()=>{const fe=bt=>Ft==="mc4"?bt==="terminated"?"terminated":"mc4":Ft==="termination_panel"&&(bt==="mc4"||bt==="terminated")?"terminated":bt;return{left:fe(Gt.left),right:fe(Gt.right)}})();return{id:$t,prev:Gt,next:se}});if(!Nt&&!Dt&&Ft==="termination_panel"){let $t=0,Gt=0;Ut.forEach(se=>{const fe=se?.prev||{left:null,right:null},bt=se?.next||{left:null,right:null};fe.left==="mc4"&&bt.left==="terminated"&&($t+=1),fe.right==="mc4"&&bt.right==="terminated"&&($t+=1),fe.left==null&&bt.left==null&&(Gt+=1),fe.right==null&&bt.right==null&&(Gt+=1)}),($t===0&&Gt>0||Gt>0)&&au("Some tables were not MC4-installed yet")}Vt($t=>{const Gt={...$t||{}};return Ut.forEach(se=>{se?.id&&(Nt?delete Gt[se.id]:Gt[se.id]={left:se.next.left??null,right:se.next.right??null})}),Gt}),Zt(Ut)}}}else if(W){const Lt=ws.current==="parameter",Tt=ge.current;if(Lt){const Ot=md.current||{};Bo(Nt?It=>{const Mt=Array.isArray(It)?It:[];if(Mt.length===0)return Mt;const _t=new Map;Mt.forEach(Pt=>{const Dt=String(Pt?.uid||""),Ft=Number(Pt?.lineIndex),Xt=Number(Pt?.startM),Wt=Number(Pt?.endM);if(!Dt||!Number.isFinite(Ft)||!Number.isFinite(Xt)||!Number.isFinite(Wt)){const Zt=`__raw__:${Math.random()}`;_t.set(Zt,[Pt]);return}const Vt=`${Dt}:${Ft}`;_t.has(Vt)||_t.set(Vt,[]),_t.get(Vt).push(Pt)});const Et=[];for(const[Pt,Dt]of _t.entries()){if(Pt.startsWith("__raw__")){Et.push(...Dt);continue}const[Ft,Xt]=Pt.split(":"),Wt=Number(Xt),Vt=Ot[Ft];if(!Vt||typeof Vt.getLatLngs!="function"){Et.push(...Dt);continue}const Ut=mo(Vt.getLatLngs())[Wt];if(!Ut||Ut.length<2){Et.push(...Dt);continue}const $t=zf({L:Ce,map:Tt,bounds:qt,lineLatLngs:Ut,minMeters:.5});if(!$t.length){Et.push(...Dt);continue}const Gt=Ms($t),se=io({L:Ce,lineLatLngs:Ut});Dt.forEach(fe=>{const bt=Number(fe.startM),ve=Number(fe.endM),je=Math.min(bt,ve),te=Math.max(bt,ve);Eu([je,te],Gt,.2).forEach(([Me,Se])=>{const he=Ia({lineLatLngs:Ut,cumData:se,startM:Me,endM:Se});!he||he.length<2||Et.push({...fe,id:`${Ft}:${Wt}:${Me.toFixed(2)}-${Se.toFixed(2)}`,uid:Ft,lineIndex:Wt,startM:Me,endM:Se,coords:he,meters:Math.max(0,Se-Me)})})})}return Et}:It=>{const Mt=Array.isArray(It)?It:[],_t=[],Et=new Map;Mt.forEach(Pt=>{const Dt=String(Pt?.uid||""),Ft=Number(Pt?.lineIndex),Xt=Number(Pt?.startM),Wt=Number(Pt?.endM);if(!Dt||!Number.isFinite(Ft)||!Number.isFinite(Xt)||!Number.isFinite(Wt))return;const Vt=Math.min(Xt,Wt),Zt=Math.max(Xt,Wt);if(!(Zt>Vt))return;const Ut=`${Dt}:${Ft}`;Et.has(Ut)||Et.set(Ut,[]),Et.get(Ut).push([Vt,Zt])});for(const[Pt,Dt]of Et.entries())Et.set(Pt,Ms(Dt));return Object.keys(Ot).forEach(Pt=>{const Dt=Ot[Pt];if(!Dt||typeof Dt.getBounds!="function"||typeof Dt.getLatLngs!="function")return;try{const Xt=Dt.getBounds();if(!Xt||!qt.intersects(Xt))return}catch{return}mo(Dt.getLatLngs()).forEach((Xt,Wt)=>{if(!Xt||Xt.length<2)return;const Vt=`${Pt}:${Wt}`,Zt=zf({L:Ce,map:Tt,bounds:qt,lineLatLngs:Xt,minMeters:.5});if(!Zt.length)return;let Ut=Et.get(Vt)||[];const $t=io({L:Ce,lineLatLngs:Xt});Zt.forEach(([Gt,se])=>{const fe=Eu([Gt,se],Ut,.2);fe.length&&(Ut=Ms([...Ut,...fe]),Et.set(Vt,Ut),fe.forEach(([bt,ve])=>{const je=Ia({lineLatLngs:Xt,cumData:$t,startM:bt,endM:ve});!je||je.length<2||_t.push({id:`${Pt}:${Wt}:${bt.toFixed(2)}-${ve.toFixed(2)}`,uid:Pt,lineIndex:Wt,startM:bt,endM:ve,coords:je,meters:Math.max(0,ve-bt)})}))})})}),_t.length>0?[...Mt,..._t]:Mt})}else{const Ot=dh.current||{},It=[],Mt=_t=>{if(!_t||!Tt)return!1;try{const Et=_t.getBounds();if(!Et||!qt.intersects(Et))return!1;let Pt=null;if(typeof _t.getLatLngs=="function"&&(Pt=_t.getLatLngs()),!Pt)return!1;for(;Array.isArray(Pt)&&Pt.length&&Array.isArray(Pt[0])&&!Pt[0].lat;)Pt=Pt.flat();for(const Dt of Pt)if(Dt&&Dt.lat!=null&&Dt.lng!=null&&qt.contains(Dt))return!0;return!1}catch{return!1}};Object.keys(Ot).forEach(_t=>{const Et=Ot[_t];Et&&Mt(Et)&&It.push(_t)}),It.length>0&&Po(_t=>{const Et=new Set(_t);return Nt?It.forEach(Pt=>Et.delete(Pt)):It.forEach(Pt=>Et.add(Pt)),Et})}}else if(R){const jt=mh.current||{},Lt=ge.current;zo(Nt?Tt=>{const Ot=Array.isArray(Tt)?Tt:[];if(Ot.length===0)return Ot;const It=new Map;Ot.forEach(_t=>{const Et=String(_t?.uid||""),Pt=Number(_t?.lineIndex),Dt=Number(_t?.startM),Ft=Number(_t?.endM);if(!Et||!Number.isFinite(Pt)||!Number.isFinite(Dt)||!Number.isFinite(Ft)){const Wt=`__raw__:${Math.random()}`;It.set(Wt,[_t]);return}const Xt=`${Et}:${Pt}`;It.has(Xt)||It.set(Xt,[]),It.get(Xt).push(_t)});const Mt=[];for(const[_t,Et]of It.entries()){if(_t.startsWith("__raw__")){Mt.push(...Et);continue}const[Pt,Dt]=_t.split(":"),Ft=Number(Dt),Xt=jt[Pt];if(!Xt||typeof Xt.getLatLngs!="function"){Mt.push(...Et);continue}const Vt=mo(Xt.getLatLngs())[Ft];if(!Vt||Vt.length<2){Mt.push(...Et);continue}const Zt=zf({L:Ce,map:Lt,bounds:qt,lineLatLngs:Vt,minMeters:.5});if(!Zt.length){Mt.push(...Et);continue}const Ut=Ms(Zt),$t=io({L:Ce,lineLatLngs:Vt});Et.forEach(Gt=>{const se=Number(Gt.startM),fe=Number(Gt.endM),bt=Math.min(se,fe),ve=Math.max(se,fe);Eu([bt,ve],Ut,.2).forEach(([te,Oe])=>{const Me=Ia({lineLatLngs:Vt,cumData:$t,startM:te,endM:Oe});!Me||Me.length<2||Mt.push({...Gt,id:`${Pt}:${Ft}:${te.toFixed(2)}-${Oe.toFixed(2)}`,uid:Pt,lineIndex:Ft,startM:te,endM:Oe,coords:Me,meters:Math.max(0,Oe-te)})})})}return Mt}:Tt=>{const Ot=Array.isArray(Tt)?Tt:[],It=[],Mt=new Map;Ot.forEach(_t=>{const Et=String(_t?.uid||""),Pt=Number(_t?.lineIndex),Dt=Number(_t?.startM),Ft=Number(_t?.endM);if(!Et||!Number.isFinite(Pt)||!Number.isFinite(Dt)||!Number.isFinite(Ft))return;const Xt=Math.min(Dt,Ft),Wt=Math.max(Dt,Ft);if(!(Wt>Xt))return;const Vt=`${Et}:${Pt}`;Mt.has(Vt)||Mt.set(Vt,[]),Mt.get(Vt).push([Xt,Wt])});for(const[_t,Et]of Mt.entries())Mt.set(_t,Ms(Et));return Object.keys(jt).forEach(_t=>{const Et=jt[_t];if(!Et||typeof Et.getBounds!="function"||typeof Et.getLatLngs!="function")return;try{const Dt=Et.getBounds();if(!Dt||!qt.intersects(Dt))return}catch{return}mo(Et.getLatLngs()).forEach((Dt,Ft)=>{if(!Dt||Dt.length<2)return;const Xt=`${_t}:${Ft}`,Wt=zf({L:Ce,map:Lt,bounds:qt,lineLatLngs:Dt,minMeters:.5});if(!Wt.length)return;let Vt=Mt.get(Xt)||[];const Zt=io({L:Ce,lineLatLngs:Dt});Wt.forEach(([Ut,$t])=>{const Gt=Eu([Ut,$t],Vt,.2);Gt.length&&(Vt=Ms([...Vt,...Gt]),Mt.set(Xt,Vt),Gt.forEach(([se,fe])=>{const bt=Ia({lineLatLngs:Dt,cumData:Zt,startM:se,endM:fe});!bt||bt.length<2||It.push({id:`${_t}:${Ft}:${se.toFixed(2)}-${fe.toFixed(2)}`,uid:_t,lineIndex:Ft,startM:se,endM:fe,coords:bt,meters:Math.max(0,fe-se)})}))})})}),It.length>0?[...Ot,...It]:Ot})}else if(T){const jt=bh.current||{},Lt=ge.current;Fo(Nt?Tt=>{const Ot=Array.isArray(Tt)?Tt:[];if(Ot.length===0)return Ot;const It=new Map;Ot.forEach(_t=>{const Et=String(_t?.uid||""),Pt=Number(_t?.lineIndex),Dt=Number(_t?.startM),Ft=Number(_t?.endM);if(!Et||!Number.isFinite(Pt)||!Number.isFinite(Dt)||!Number.isFinite(Ft)){const Wt=`__raw__:${Math.random()}`;It.set(Wt,[_t]);return}const Xt=`${Et}:${Pt}`;It.has(Xt)||It.set(Xt,[]),It.get(Xt).push(_t)});const Mt=[];for(const[_t,Et]of It.entries()){if(_t.startsWith("__raw__")){Mt.push(...Et);continue}const[Pt,Dt]=_t.split(":"),Ft=Number(Dt),Xt=jt[Pt];if(!Xt||typeof Xt.getLatLngs!="function"){Mt.push(...Et);continue}const Vt=mo(Xt.getLatLngs())[Ft];if(!Vt||Vt.length<2){Mt.push(...Et);continue}const Zt=zf({L:Ce,map:Lt,bounds:qt,lineLatLngs:Vt,minMeters:.5});if(!Zt.length){Mt.push(...Et);continue}const Ut=Ms(Zt),$t=io({L:Ce,lineLatLngs:Vt});Et.forEach(Gt=>{const se=Number(Gt.startM),fe=Number(Gt.endM),bt=Math.min(se,fe),ve=Math.max(se,fe);Eu([bt,ve],Ut,.2).forEach(([te,Oe])=>{const Me=Ia({lineLatLngs:Vt,cumData:$t,startM:te,endM:Oe});!Me||Me.length<2||Mt.push({...Gt,id:`${Pt}:${Ft}:${te.toFixed(2)}-${Oe.toFixed(2)}`,uid:Pt,lineIndex:Ft,startM:te,endM:Oe,coords:Me,meters:Math.max(0,Oe-te)})})})}return Mt}:Tt=>{const Ot=Array.isArray(Tt)?Tt:[],It=[],Mt=new Map;Ot.forEach(_t=>{const Et=String(_t?.uid||""),Pt=Number(_t?.lineIndex),Dt=Number(_t?.startM),Ft=Number(_t?.endM);if(!Et||!Number.isFinite(Pt)||!Number.isFinite(Dt)||!Number.isFinite(Ft))return;const Xt=Math.min(Dt,Ft),Wt=Math.max(Dt,Ft);if(!(Wt>Xt))return;const Vt=`${Et}:${Pt}`;Mt.has(Vt)||Mt.set(Vt,[]),Mt.get(Vt).push([Xt,Wt])});for(const[_t,Et]of Mt.entries())Mt.set(_t,Ms(Et));return Object.keys(jt).forEach(_t=>{const Et=jt[_t];if(!Et||typeof Et.getBounds!="function"||typeof Et.getLatLngs!="function")return;try{const Dt=Et.getBounds();if(!Dt||!qt.intersects(Dt))return}catch{return}mo(Et.getLatLngs()).forEach((Dt,Ft)=>{if(!Dt||Dt.length<2)return;const Xt=`${_t}:${Ft}`,Wt=zf({L:Ce,map:Lt,bounds:qt,lineLatLngs:Dt,minMeters:.5});if(!Wt.length)return;let Vt=Mt.get(Xt)||[];const Zt=io({L:Ce,lineLatLngs:Dt});Wt.forEach(([Ut,$t])=>{const Gt=Eu([Ut,$t],Vt,.2);Gt.length&&(Vt=Ms([...Vt,...Gt]),Mt.set(Xt,Vt),Gt.forEach(([se,fe])=>{const bt=Ia({lineLatLngs:Dt,cumData:Zt,startM:se,endM:fe});!bt||bt.length<2||It.push({id:`${_t}:${Ft}:${se.toFixed(2)}-${fe.toFixed(2)}`,uid:_t,lineIndex:Ft,startM:se,endM:fe,coords:bt,meters:Math.max(0,fe-se)})}))})})}),It.length>0?[...Ot,...It]:Ot})}else if(w){const jt=Ll.current||{},Lt=[];Object.keys(jt).forEach(Tt=>{const Ot=jt[Tt];if(!Ot||typeof Ot.getLatLng!="function")return;const It=Ot.getLatLng();It&&qt.contains(It)&&Lt.push(Tt)}),Lt.length>0&&Lo(Tt=>{const Ot=new Set(Tt);if(Nt){const It=bc.current||new Set;Lt.forEach(Mt=>{It.has(Mt)||Ot.delete(Mt)})}else Lt.forEach(It=>Ot.add(It));return Ot})}else{const jt=ge.current,Lt=[],Tt=!!h?.workUnitWeights,Ot=(()=>{if(!Tt||!jt)return null;try{const Pt=qt.getSouthWest(),Dt=qt.getNorthEast(),Ft=Ce.latLng(Dt.lat,Pt.lng),Xt=Ce.latLng(Pt.lat,Dt.lng),Wt=[jt.latLngToLayerPoint(Ft),jt.latLngToLayerPoint(Dt),jt.latLngToLayerPoint(Xt),jt.latLngToLayerPoint(Pt)];if(Wt.some(bt=>!bt||!Number.isFinite(bt.x)||!Number.isFinite(bt.y)))return null;const Vt=Wt.map(bt=>bt.x),Zt=Wt.map(bt=>bt.y),Ut=Math.min(...Vt),$t=Math.max(...Vt),Gt=Math.min(...Zt),se=Math.max(...Zt),fe=[[Wt[0],Wt[1]],[Wt[1],Wt[2]],[Wt[2],Wt[3]],[Wt[3],Wt[0]]];return{rectPts:Wt,rectEdges:fe,minX:Ut,maxX:$t,minY:Gt,maxY:se}}catch{return null}})(),It=(Pt,Dt,Ft,Xt,Wt)=>Pt.x>=Dt&&Pt.x<=Ft&&Pt.y>=Xt&&Pt.y<=Wt,Mt=(Pt,Dt)=>{let Ft=!1;for(let Xt=0,Wt=Dt.length-1;Xt<Dt.length;Wt=Xt++){const Vt=Dt[Xt].x,Zt=Dt[Xt].y,Ut=Dt[Wt].x,$t=Dt[Wt].y;Zt>Pt.y!=$t>Pt.y&&Pt.x<(Ut-Vt)*(Pt.y-Zt)/($t-Zt+1e-12)+Vt&&(Ft=!Ft)}return Ft},_t=(Pt,Dt,Ft,Xt)=>{const Wt=(se,fe,bt)=>(fe.y-se.y)*(bt.x-fe.x)-(fe.x-se.x)*(bt.y-fe.y),Vt=(se,fe,bt)=>Math.min(se.x,bt.x)<=fe.x&&fe.x<=Math.max(se.x,bt.x)&&Math.min(se.y,bt.y)<=fe.y&&fe.y<=Math.max(se.y,bt.y),Zt=Wt(Pt,Dt,Ft),Ut=Wt(Pt,Dt,Xt),$t=Wt(Ft,Xt,Pt),Gt=Wt(Ft,Xt,Dt);return!!((Zt>0&&Ut<0||Zt<0&&Ut>0)&&($t>0&&Gt<0||$t<0&&Gt>0)||Math.abs(Zt)<1e-9&&Vt(Pt,Ft,Dt)||Math.abs(Ut)<1e-9&&Vt(Pt,Xt,Dt)||Math.abs($t)<1e-9&&Vt(Ft,Pt,Xt)||Math.abs(Gt)<1e-9&&Vt(Ft,Dt,Xt))},Et=Pt=>{if(!Tt||!Ot||!jt||!Pt)return!0;const Dt=Pt?.feature?.geometry?.type;if(Dt&&Dt!=="Polygon"&&Dt!=="MultiPolygon")return!1;const{rectPts:Ft,rectEdges:Xt,minX:Wt,maxX:Vt,minY:Zt,maxY:Ut}=Ot,$t=fe=>{const bt=[],ve=je=>{if(!(!Array.isArray(je)||je.length===0)){if(je.length&&je[0]&&typeof je[0].lat=="number"&&typeof je[0].lng=="number"){bt.push(je);return}je.forEach(ve)}};return ve(fe),bt};let Gt=null;try{if(typeof Pt.getLatLngs!="function")return!1;Gt=Pt.getLatLngs()}catch{return!1}const se=$t(Gt);for(let fe=0;fe<se.length;fe++){const bt=se[fe];if(!bt||bt.length<3)continue;const ve=bt.map(Oe=>jt.latLngToLayerPoint(Oe)).filter(Boolean);if(ve.length<3)continue;const je=ve[0],te=ve[ve.length-1];if(je&&te&&je.x===te.x&&je.y===te.y&&ve.pop(),!(ve.length<3)){if(ve.some(Oe=>It(Oe,Wt,Vt,Zt,Ut))||Ft.some(Oe=>Mt(Oe,ve)))return!0;for(let Oe=0;Oe<ve.length;Oe++){const Me=ve[Oe],Se=ve[(Oe+1)%ve.length];for(let he=0;he<Xt.length;he++){const[le,Ee]=Xt[he];if(_t(Me,Se,le,Ee))return!0}}}}return!1};if(Object.keys(Ge.current).forEach(Pt=>{const Dt=Ge.current[Pt],Ft=Dt?.layer;if(!Ft||typeof Ft.getBounds!="function")return;let Xt=null;try{Xt=Ft.getBounds()}catch{return}if(!(!Xt||!qt.intersects(Xt))&&!(Tt&&!Et(Ft))){if(F){const Wt=Yo.current;if(Dt?.boxType!==Wt)return}Lt.push(Pt)}}),F&&Lt.length>0){const Dt=Yo.current==="lvBox"?Ko:nc,Ft=Array.from(new Set(Lt));Dt(Xt=>{const Wt=new Set(Xt);return Nt?Ft.forEach(Vt=>Wt.delete(Vt)):Ft.forEach(Vt=>Wt.add(Vt)),Wt})}if(!F){const Pt=new Set;if(Lt.forEach(Dt=>{const Ft=Ge.current[Dt];Ft&&Ft.isSmallTable&&Ft.stringId?Object.keys(Ge.current).forEach(Xt=>{const Wt=Ge.current[Xt];Wt&&Wt.stringId===Ft.stringId&&Wt.isSmallTable&&Pt.add(Xt)}):Pt.add(Dt)}),j&&cs.current?.polygonPairs){const Dt=new Set;Pt.forEach(Ft=>{const Xt=cs.current.polygonPairs.get(Ft);Xt&&!Pt.has(Xt)&&Dt.add(Xt)}),Dt.forEach(Ft=>Pt.add(Ft)),console.log("[TIP Selection Box] directlySelectedIds:",Lt.length,"finalSelectedIds:",Pt.size,"partnersAdded:",Dt.size)}Pt.size>0&&O(Dt=>{const Ft=new Set(Dt);return Nt?Pt.forEach(Xt=>Ft.delete(Xt)):Pt.forEach(Xt=>Ft.add(Xt)),j&&console.log("[TIP Selection Box] prev.size:",Dt.size,"next.size:",Ft.size,"finalSelectedIds.size:",Pt.size),Ft})}}try{Zn.current.remove()}catch{}Zn.current=null}else if(!wt&&Nt)I&&((Ql.current?.size||0)>0&&Mo(new Set),(Eo.current?.length||0)>0&&co([]),(Yl.current?.size||0)>0&&Xl(new Set));else if(!wt&&!Nt&&ce)jl.current||(z?setTimeout(()=>{if(!sf.current){if(!Ro.current){const qt=document.createElement("div");qt.className="punch-warning-toast",qt.innerHTML=" Please select a contractor first!",document.body.appendChild(qt),setTimeout(()=>qt.remove(),2500);return}rh(Rt,null)}},10):Bh(Rt));else if(!wt&&!Nt&&!ce){const qt=B.latLngToLayerPoint(Rt),jt=10;if(C&&String(ds.current||"termination")==="testing"){try{const Lt=qn.current||[];let Tt=null,Ot=1/0;const It=120;for(let Mt=0;Mt<Lt.length;Mt++){const _t=Lt[Mt];if(!_t)continue;const Et=Ce.latLng(_t.lat,_t.lng),Pt=B.latLngToLayerPoint(Et),Dt=Pt.x-qt.x,Ft=Pt.y-qt.y,Xt=Math.sqrt(Dt*Dt+Ft*Ft);Xt<Ot&&(Ot=Xt,Tt=_t)}if(Tt&&Ot<=It){const Mt=String(Tt.text||"").trim(),_t=String(Tt.stringId||no(Mt)||"");if(_t){const Et=Yi.current?.[_t]||null,Pt=Et!==null,Dt=Et?.plus!=null?String(Et.plus).trim():"",Ft=Et?.minus!=null?String(Et.minus).trim():"",Xt=Dt||(Pt?"999":"0"),Wt=Ft||(Pt?"999":"0"),Vt=Ei(Et?.status||Et?.remarkRaw)||null,Zt=rl(_t,Et?.originalId||Mt);Fs(Ut=>Ut&&Ut.idNorm===_t?null:{idNorm:_t,displayId:Zt,draftPlus:Xt,draftMinus:Wt,draftStatus:Vt,x:ht?.clientX??0,y:ht?.clientY??0})}}}catch{}cn.current=null;return}if(z&&sf.current){cn.current=null;return}if(Z){const Lt=Ot=>{try{if(!Ot||typeof Ot.getLatLng!="function")return 1/0;const It=Ot.getLatLng(),Mt=B.latLngToLayerPoint(It);return Math.sqrt((Mt.x-qt.x)**2+(Mt.y-qt.y)**2)}catch{return 1/0}};try{const Ot=String(pr.current||"termination");if(Ot==="termination"){const It=ue.current||[];let Mt=null,_t=1/0;for(let Et=0;Et<It.length;Et++){const Pt=It[Et];if(!Pt)continue;const Dt=B.latLngToLayerPoint([Pt.lat,Pt.lng]),Ft=Math.sqrt((Dt.x-qt.x)**2+(Dt.y-qt.y)**2);Ft<120&&Ft<_t&&(_t=Ft,Mt=Pt)}if(Mt){const Et=String(Mt.stationLabel||"").trim(),Pt=fn(Et);if(Pt&&gn(Pt)){const Dt=wn(Pt),Ft=bn(Pt,qe.current?.[Pt]??0);if(!(Dt>0&&Ft>=Dt)){const Wt=ht?.clientX??0,Vt=ht?.clientY??0;_i({stationLabel:Et||Pt,stationNorm:Pt,draft:Ft,x:Wt,y:Vt}),cn.current=null;return}}}}if(Ot==="testing"){const It=ue.current||[];let Mt=null,_t=1/0;for(let Et=0;Et<It.length;Et++){const Pt=It[Et];if(!Pt)continue;const Dt=B.latLngToLayerPoint([Pt.lat,Pt.lng]),Ft=Math.sqrt((Dt.x-qt.x)**2+(Dt.y-qt.y)**2);Ft<120&&Ft<_t&&(_t=Ft,Mt=Pt)}if(Mt){const Et=String(Mt.stationLabel||"").trim(),Pt=yn.current||{},Dt=Mn(Et),Ft=[Dt],Xt=Gt=>String(Gt).padStart(2,"0"),Wt=Dt.match(/^ss(\d{1,2})$/i),Vt=Dt.match(/^sub(\d{1,2})$/i);if(Wt){const Gt=Xt(Wt[1]);Ft.push(`ss${Gt}`),Ft.push(`sub${Gt}`)}if(Vt){const Gt=Xt(Vt[1]);Ft.push(`sub${Gt}`),Ft.push(`ss${Gt}`)}let Zt="";for(const Gt of Ft)if(Pt[Gt]){Zt=Gt;break}Zt||(Zt=Ft.find(se=>/^sub\d{2}$/i.test(se))||Ft[0]||"");const Ut=ht?.clientX??0,$t=ht?.clientY??0;is(null),Es({stationLabel:Et,fromKey:Zt,x:Ut,y:$t}),cn.current=null;return}}}catch{}try{if(String(pr.current||"termination")==="testing"){const Ot=Ac.current||[],It=ks.current||0;let Mt=null,_t=1/0;for(let Et=0;Et<It;Et++){const Pt=Ot[Et];if(!Pt||!Pt._mvtStationNorm)continue;const Dt=Lt(Pt);Dt<120&&Dt<_t&&(_t=Dt,Mt=Pt)}if(Mt){const Et=String(Mt._mvtStationLabel||"").trim(),Pt=yn.current||{},Dt=Mn(Et),Ft=[Dt],Xt=Gt=>String(Gt).padStart(2,"0"),Wt=Dt.match(/^ss(\d{1,2})$/i),Vt=Dt.match(/^sub(\d{1,2})$/i);if(Wt){const Gt=Xt(Wt[1]);Ft.push(`ss${Gt}`),Ft.push(`sub${Gt}`)}if(Vt){const Gt=Xt(Vt[1]);Ft.push(`sub${Gt}`),Ft.push(`ss${Gt}`)}let Zt="";for(const Gt of Ft)if(Pt[Gt]){Zt=Gt;break}Zt||(Zt=Ft.find(se=>/^sub\d{2}$/i.test(se))||Ft[0]||"");const Ut=ht?.clientX??0,$t=ht?.clientY??0;is(null),Es({stationLabel:Et,fromKey:Zt,x:Ut,y:$t}),cn.current=null;return}}}catch{}try{const Ot=be.current||[],It=Qe.current||0;let Mt=null,_t=1/0;for(let Et=0;Et<It;Et++){const Pt=Ot[Et],Dt=Lt(Pt);Dt<120&&Dt<_t&&(_t=Dt,Mt=Pt)}if(Mt){const Et=String(Mt._mvtStationNorm||""),Pt=!!Mt._mvtLocked;if(Et&&!Pt){const Dt=wn(Et),Ft=bn(Et,qe.current?.[Et]??0),Xt=Dt?Math.min(Dt,Ft+1):Ft;Xt!==Ft&&(Qc(Et,Ft,Xt),ss(Wt=>{const Vt=Wt&&typeof Wt=="object"?{...Wt}:{};return Vt[Et]=Xt,Vt}))}cn.current=null;return}}catch{}}if(D){const Lt=Ge.current||{};let Tt=null;const Ot=(Mt,_t)=>{let Et=!1;for(let Pt=0,Dt=_t.length-1;Pt<_t.length;Dt=Pt++){const Ft=_t[Pt].x,Xt=_t[Pt].y,Wt=_t[Dt].x,Vt=_t[Dt].y;Xt>Mt.y!=Vt>Mt.y&&Mt.x<(Wt-Ft)*(Mt.y-Xt)/(Vt-Xt+1e-12)+Ft&&(Et=!Et)}return Et},It=Mt=>{if(!B||!Mt||typeof Mt.getLatLngs!="function")return null;let _t=Mt.getLatLngs();for(;Array.isArray(_t)&&_t.length&&Array.isArray(_t[0]);)_t=_t[0];for(;Array.isArray(_t)&&_t.length&&Array.isArray(_t[0]);)_t=_t[0];const Et=Array.isArray(_t)?_t:null;if(!Et||Et.length<3)return null;const Pt=Et.map(Xt=>B.latLngToLayerPoint(Xt)).filter(Boolean);if(Pt.length<3)return null;const Dt=Pt[0],Ft=Pt[Pt.length-1];return Dt&&Ft&&Dt.x===Ft.x&&Dt.y===Ft.y&&Pt.pop(),Pt};if(Object.keys(Lt).forEach(Mt=>{if(Tt)return;const Et=Lt[Mt]?.layer;if(!Et)return;const Pt=It(Et);Pt&&Ot(qt,Pt)&&(Tt=Mt)}),Tt){const Mt=wc.current;if(Mt==="termination_inv"){cn.current=null;return}const _t=Ft=>Mt==="mc4"?Ft==="terminated"?"terminated":"mc4":Mt==="termination_panel"?Ft==="mc4"||Ft==="terminated"?"terminated":Ft:Ft==null?"mc4":"terminated",Et=vu(Tt),Pt={left:_t(Et.left),right:_t(Et.right)},Dt=[{id:Tt,prev:Et,next:Pt}];if(Mt==="termination_panel"&&Pt.left===Et.left&&Pt.right===Et.right){cn.current=null;return}Ts(Ft=>{const Xt={...Ft||{}};return Xt[Tt]={left:Pt.left??null,right:Pt.right??null},Xt}),kf(Dt)}}else if(w){const Lt=Ll.current||{};let Tt=null,Ot=1/0;Object.keys(Lt).forEach(It=>{const Mt=Lt[It];if(!Mt||typeof Mt.getLatLng!="function")return;const _t=Mt.getLatLng(),Et=B.latLngToLayerPoint(_t),Pt=Math.sqrt((Et.x-qt.x)**2+(Et.y-qt.y)**2);Pt<jt&&Pt<Ot&&(Ot=Pt,Tt=It)}),Tt&&Lo(It=>{const Mt=new Set(It);return Mt.has(Tt)?Mt.delete(Tt):Mt.add(Tt),Mt})}else if(F){const Lt=Yo.current,Tt=Ge.current||{},Ot=(_t,Et)=>{let Pt=!1;for(let Dt=0,Ft=Et.length-1;Dt<Et.length;Ft=Dt++){const Xt=Et[Dt].x,Wt=Et[Dt].y,Vt=Et[Ft].x,Zt=Et[Ft].y;Wt>_t.y!=Zt>_t.y&&_t.x<(Vt-Xt)*(_t.y-Wt)/(Zt-Wt+1e-12)+Xt&&(Pt=!Pt)}return Pt},It=_t=>{if(!B||!_t||typeof _t.getLatLngs!="function")return null;let Et=_t.getLatLngs();const Pt=[],Dt=Zt=>{if(!(!Array.isArray(Zt)||Zt.length===0)){if(Zt[0]&&typeof Zt[0].lat=="number"&&typeof Zt[0].lng=="number"){Pt.push(Zt);return}Zt.forEach(Dt)}};if(Dt(Et),!Pt.length)return null;const Xt=Pt[0].map(Zt=>B.latLngToLayerPoint(Zt)).filter(Boolean);if(Xt.length<3)return null;const Wt=Xt[0],Vt=Xt[Xt.length-1];return Wt&&Vt&&Wt.x===Vt.x&&Wt.y===Vt.y&&Xt.pop(),Xt};let Mt=null;if(Object.keys(Tt).forEach(_t=>{if(Mt)return;const Et=Tt[_t];if(!Et?.layer||Et?.boxType!==Lt)return;const Pt=It(Et.layer);Pt&&Ot(qt,Pt)&&(Mt=_t)}),Mt){(Lt==="lvBox"?Ko:nc)(Pt=>{const Dt=new Set(Pt);return Nt||Dt.has(Mt)?Dt.delete(Mt):Dt.add(Mt),Dt});const Et=Lt==="lvBox"?wa:Va;try{Et.current&&Tt[Mt]?.layer&&Et.current.resetStyle(Tt[Mt].layer)}catch{}}}else if(I){const Lt=va.current||{},Tt=String(h?.key||"").toUpperCase()==="FIB",Ot=String(fl.current||""),It=Tt?Ot:Ot||"__FREE__",Mt=ko.current||new Set;if((!Tt||Tt&&It&&It!=="__FREE__")&&!(It&&It!=="__FREE__"&&Mt.has(It))){let _t=null,Et=1/0;const Pt=5;if(Object.keys(Lt).forEach(Dt=>{const Ft=Lt[Dt];if(!Ft||typeof Ft.getLatLngs!="function")return;mo(Ft.getLatLngs()).forEach((Wt,Vt)=>{if(!(!Wt||Wt.length<2))for(let Zt=0;Zt<Wt.length-1;Zt++){const Ut=B.latLngToLayerPoint(Wt[Zt]),$t=B.latLngToLayerPoint(Wt[Zt+1]),Gt=$t.x-Ut.x,se=$t.y-Ut.y,fe=Gt*Gt+se*se;let bt=0;fe>0&&(bt=Math.max(0,Math.min(1,((qt.x-Ut.x)*Gt+(qt.y-Ut.y)*se)/fe)));const ve=Ut.x+bt*Gt,je=Ut.y+bt*se,te=Math.sqrt((qt.x-ve)**2+(qt.y-je)**2);te<jt&&te<Et&&(Et=te,_t={fid:Dt,lineIndex:Vt,lineLL:Wt,segmentIndex:Zt,t:bt})}})}),_t){const{fid:Dt,lineIndex:Ft,lineLL:Xt}=_t,Wt=io({L:Ce,lineLatLngs:Xt}),Vt=Wt[Wt.length-1]||0;let Zt=0;for(let Gt=0;Gt<Xt.length-1;Gt++){const se=B.latLngToLayerPoint(Xt[Gt]),fe=B.latLngToLayerPoint(Xt[Gt+1]),bt=fe.x-se.x,ve=fe.y-se.y,je=bt*bt+ve*ve;let te=0;je>0&&(te=Math.max(0,Math.min(1,((qt.x-se.x)*bt+(qt.y-se.y)*ve)/je)));const Oe=se.x+te*bt,Me=se.y+te*ve;if(Math.sqrt((qt.x-Oe)**2+(qt.y-Me)**2)<jt+1){Zt=Wt[Gt]+te*(Wt[Gt+1]-Wt[Gt]);break}}const Ut=Math.max(0,Zt-Pt/2),$t=Math.min(Vt,Zt+Pt/2);if($t>Ut+.5){const Gt=It&&It!=="__FREE__"&&typeof os.current?.[It]=="number"?os.current[It]:gt,se=Ia({lineLatLngs:Xt,cumData:Wt,startM:Ut,endM:$t});if(se&&se.length>=2){const fe=`${Dt}:${Ft}:${Ut.toFixed(2)}-${$t.toFixed(2)}:seg:${It}`;new Set((pl.current||[]).filter(ve=>String(ve?.segmentKey||"")===String(It)).map(ve=>String(ve?.id||""))).has(fe)||co(ve=>(ve||[]).find(te=>te.id===fe)?ve:[...ve||[],{id:fe,fid:String(Dt),lineIndex:Ft,startM:Ut,endM:$t,coords:se,meters:Math.max(0,$t-Ut),metersMultiplier:Gt,segmentKey:It,source:"click"}])}}}}}else{const Lt=Ge.current||{};let Tt=null;const Ot=(Mt,_t)=>{let Et=!1;for(let Pt=0,Dt=_t.length-1;Pt<_t.length;Dt=Pt++){const Ft=_t[Pt].x,Xt=_t[Pt].y,Wt=_t[Dt].x,Vt=_t[Dt].y;Xt>Mt.y!=Vt>Mt.y&&Mt.x<(Wt-Ft)*(Mt.y-Xt)/(Vt-Xt+1e-12)+Ft&&(Et=!Et)}return Et},It=Mt=>{if(!B||!Mt||typeof Mt.getLatLngs!="function")return null;let _t=Mt.getLatLngs();for(;Array.isArray(_t)&&_t.length&&Array.isArray(_t[0]);)_t=_t[0];for(;Array.isArray(_t)&&_t.length&&Array.isArray(_t[0]);)_t=_t[0];const Et=Array.isArray(_t)?_t:null;if(!Et||Et.length<3)return null;const Pt=Et.map(Xt=>B.latLngToLayerPoint(Xt)).filter(Boolean);if(Pt.length<3)return null;const Dt=Pt[0],Ft=Pt[Pt.length-1];return Dt&&Ft&&Dt.x===Ft.x&&Dt.y===Ft.y&&Pt.pop(),Pt};if(Object.keys(Lt).forEach(Mt=>{if(Tt)return;const Et=Lt[Mt]?.layer;if(!Et)return;const Pt=It(Et);Pt&&Ot(qt,Pt)&&(Tt=Mt)}),Tt){if(!Q){const Mt=Ge.current[Tt],_t=new Set;Mt&&Mt.isSmallTable&&Mt.stringId?Object.keys(Ge.current).forEach(Et=>{const Pt=Ge.current[Et];Pt&&Pt.stringId===Mt.stringId&&Pt.isSmallTable&&_t.add(Et)}):_t.add(Tt),O(Et=>{const Pt=new Set(Et);return Array.from(_t).every(Ft=>Pt.has(Ft))?_t.forEach(Ft=>Pt.delete(Ft)):_t.forEach(Ft=>Pt.add(Ft)),Pt})}}else Q&&(kr(null),bs(),rs(null))}}cn.current=null};return J.addEventListener("mousedown",dt),window.addEventListener("mousemove",xt),window.addEventListener("mouseup",yt),()=>{J.removeEventListener("contextmenu",lt),J.removeEventListener("mousedown",dt),window.removeEventListener("mousemove",xt),window.removeEventListener("mouseup",yt);try{B.dragging.enable()}catch{}try{Zn.current&&Zn.current.remove()}catch{}Zn.current=null,cn.current=null}},[Ke,h?.key,w,I,D,Z,K,Q,Qt,ce,Hn]),ot.useEffect(()=>{ge.current=Ce.map("map",{zoomControl:!1,preferCanvas:!0,zoomAnimation:!1,markerZoomAnimation:!1,fadeAnimation:!1}),dn(!0);try{const J="ptepTableToTablePane";if(!ge.current.getPane(J)){const at=ge.current.createPane(J);at.style.zIndex="440",at.style.pointerEvents="auto"}Xn.current=Ce.svg({pane:J})}catch{Xn.current=null}try{const J="ptepParameterPane";if(!ge.current.getPane(J)){const at=ge.current.createPane(J);at.style.zIndex="435",at.style.pointerEvents="auto"}Wn.current=Ce.svg({pane:J})}catch{Wn.current=null}try{const J="ptepParameterSelectedPane";if(!ge.current.getPane(J)){const at=ge.current.createPane(J);at.style.zIndex="436",at.style.pointerEvents="none"}}catch{}try{const J="datpTrenchPane";if(!ge.current.getPane(J)){const at=ge.current.createPane(J);at.style.zIndex="437",at.style.pointerEvents="auto"}gh.current=Ce.svg({pane:J})}catch{gh.current=null}try{const J="datpTrenchSelectedPane";if(!ge.current.getPane(J)){const at=ge.current.createPane(J);at.style.zIndex="438",at.style.pointerEvents="none"}}catch{}try{const J="mvftTrenchPane";if(!ge.current.getPane(J)){const at=ge.current.createPane(J);at.style.zIndex="439",at.style.pointerEvents="auto"}vh.current=Ce.svg({pane:J})}catch{vh.current=null}try{const J="mvftTrenchCommittedPane";if(!ge.current.getPane(J)){const at=ge.current.createPane(J);at.style.zIndex="440",at.style.pointerEvents="none"}}catch{}try{const J="mvftTrenchSelectedPane";if(!ge.current.getPane(J)){const at=ge.current.createPane(J);at.style.zIndex="441",at.style.pointerEvents="none"}}catch{}try{const J="mvftHistoryHighlightPane";if(!ge.current.getPane(J)){const at=ge.current.createPane(J);at.style.zIndex="442",at.style.pointerEvents="none"}}catch{}try{const J="stringTextPane";if(!ge.current.getPane(J)){const at=ge.current.createPane(J);at.style.zIndex="450",at.style.pointerEvents="none"}ln.current=Ce.canvas({padding:.1,pane:J})}catch{ln.current=null}try{as.current&&as.current.remove(),as.current=Ce.layerGroup().addTo(ge.current)}catch{as.current=null}try{As.current&&As.current.remove(),As.current=Ce.layerGroup().addTo(ge.current)}catch{As.current=null}try{Gs.current&&Gs.current.remove(),Gs.current=Ce.layerGroup().addTo(ge.current)}catch{Gs.current=null}try{wi.current&&wi.current.remove(),wi.current=Ce.layerGroup().addTo(ge.current)}catch{wi.current=null}Wp();const B=J=>{if(tt.current&&(kr(null),bs()),!rt.current||String(pr.current||"termination")!=="testing")return;const at=ge.current;if(!at)return;const lt=ue.current||[];if(!lt.length)return;const dt=J?.originalEvent,xt=dt?.clientX??0,yt=dt?.clientY??0;let ht=J?.containerPoint;if(!ht&&dt&&typeof at.mouseEventToContainerPoint=="function")try{ht=at.mouseEventToContainerPoint(dt)}catch{ht=null}if(!ht)return;let mt=null,vt=1/0;for(let _t=0;_t<lt.length;_t++){const Et=lt[_t];if(!Et)continue;const Pt=at.latLngToContainerPoint([Et.lat,Et.lng]),Dt=Pt.x-ht.x,Ft=Pt.y-ht.y,Xt=Dt*Dt+Ft*Ft;Xt<vt&&(vt=Xt,mt=Et)}const wt=60;if(!mt||vt>wt*wt)return;const Nt=String(mt.stationLabel||"").trim()||String(mt.stationKey||"").trim(),Rt=fn(Nt);if(!Rt||Rt==="css")return;const qt=yn.current||{},jt=Mn(Nt||Rt),Lt=[jt],Tt=_t=>String(_t).padStart(2,"0"),Ot=jt.match(/^ss(\d{1,2})$/i),It=jt.match(/^sub(\d{1,2})$/i);if(Ot){const _t=Tt(Ot[1]);Lt.push(`ss${_t}`),Lt.push(`sub${_t}`)}if(It){const _t=Tt(It[1]);Lt.push(`sub${_t}`),Lt.push(`ss${_t}`)}let Mt="";for(const _t of Lt)if(qt[_t]){Mt=_t;break}Mt||(Mt=Lt.find(Et=>/^sub\d{2}$/i.test(Et))||Lt[0]||""),is(null),Es({stationLabel:Nt||Rt,fromKey:Mt,x:xt,y:yt})};try{ge.current.on("click",B)}catch{}return()=>{try{Qn.current&&cancelAnimationFrame(Qn.current),ge.current?.off("zoomend moveend",hn),ge.current?.off("click",B)}catch{}ge.current?.remove(),ge.current=null,dn(!1)}},[]),ot.useEffect(()=>{const B=ge.current;if(B)try{D?B.doubleClickZoom?.disable?.():B.doubleClickZoom?.enable?.()}catch{}},[D]),ot.useEffect(()=>{if(!I||!ge.current)return;const J=Gs.current,at=wi.current;if(!(!J||!at)){try{J.clearLayers()}catch{}try{at.clearLayers()}catch{}(ls||[]).forEach(lt=>{if(!lt?.coords||lt.coords.length<2)return;const dt=Ce.polyline(lt.coords,{color:"#16a34a",weight:6,opacity:1,interactive:!1});at.addLayer(dt)}),(ys||[]).forEach(lt=>{if(!lt?.coords||lt.coords.length<2)return;String(lt?.segmentKey||"");const dt=Ce.polyline(lt.coords,{color:"#00e676",weight:6.4,opacity:1,interactive:!0});dt._mvfTrenchPartId=lt.id,dt.on("contextmenu",xt=>{try{xt?.originalEvent&&(Ce.DomEvent.stopPropagation(xt.originalEvent),Ce.DomEvent.preventDefault(xt.originalEvent))}catch{}co(yt=>(yt||[]).filter(ht=>ht?.id!==lt.id))}),J.addLayer(dt)})}},[I,ys,ls]),ot.useEffect(()=>{ge.current&&Wp()},[h?.key,g]),ot.useEffect(()=>{F&&(wa.current&&wa.current.eachLayer(B=>{wa.current.resetStyle(B)}),Va.current&&Va.current.eachLayer(B=>{Va.current.resetStyle(B)}))},[F,ml,No]),ot.useEffect(()=>{if(!ge.current)return;const B=Yt;if(B!=="hover"&&B!=="cursor")return;const J=ge.current.getContainer();if(!J)return;const at=()=>{B==="hover"?(Ul.current=!0,hn()):(Ul.current=!1,Hl.current=null,Vl.current=null,Su(),hn())},lt=()=>{Ul.current=!1,Hl.current=null,Vl.current=null,Su(),hn()},dt=xt=>{B==="cursor"&&ge.current&&(Af.current||(Af.current=requestAnimationFrame(()=>{Af.current=null;const yt=ge.current;if(!yt)return;const ht=yt.mouseEventToContainerPoint(xt);Vl.current=ht;const mt=Oh,vt=yt.containerPointToLatLng([ht.x-mt,ht.y+mt]),wt=yt.containerPointToLatLng([ht.x+mt,ht.y-mt]);if(Hl.current=Ce.latLngBounds(vt,wt),!!h?.stringTextCursorRequiresPolygon){const Rt=yt.containerPointToLatLng(ht);let qt=!1;try{const jt=Object.values(Ge.current||{});for(let Lt=0;Lt<jt.length;Lt++){const Tt=jt[Lt]?.layer;if(!Tt||typeof Tt.getBounds!="function")continue;const Ot=Tt.getBounds();if(Ot&&Ot.contains(Rt)){qt=!0;break}}}catch{}if(Ul.current=qt,!qt){Hl.current=null,Su(),hn();return}}else Ul.current=!0;hn()})))};return J.addEventListener("mouseenter",at),J.addEventListener("mouseleave",lt),J.addEventListener("mousemove",dt),()=>{J.removeEventListener("mouseenter",at),J.removeEventListener("mouseleave",lt),J.removeEventListener("mousemove",dt),Af.current&&cancelAnimationFrame(Af.current),Af.current=null}},[h,Su,Yt,hn]);const i0="relative inline-flex h-12 w-12 items-center justify-center rounded-none border-2 text-slate-100 shadow-[0_5px_0_rgba(0,0,0,0.50)] transition-transform active:translate-y-[2px] active:shadow-[0_3px_0_rgba(0,0,0,0.50)] focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-400 disabled:opacity-50 disabled:cursor-not-allowed",s0="relative inline-flex h-9 w-9 items-center justify-center rounded-none border-2 text-slate-100 shadow-[0_4px_0_rgba(0,0,0,0.50)] transition-transform active:translate-y-[2px] active:shadow-[0_2px_0_rgba(0,0,0,0.50)] focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-400 disabled:opacity-50 disabled:cursor-not-allowed",ca=`${i0} bg-slate-800 border-slate-500 hover:bg-slate-700 hover:border-slate-400`,hg=`${i0} bg-red-600 border-red-300 text-white hover:bg-red-500`,$l=`${s0} bg-slate-800 border-slate-500 hover:bg-slate-700 hover:border-slate-400`,zh="relative inline-flex items-center justify-center rounded-none border-2 bg-slate-800 border-slate-500 text-slate-100 shadow-[0_4px_0_rgba(0,0,0,0.50)] transition-transform active:translate-y-[2px] active:shadow-[0_2px_0_rgba(0,0,0,0.50)] hover:bg-slate-700 hover:border-slate-400 focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-400 disabled:opacity-50 disabled:cursor-not-allowed",o0="h-6 w-6",Fh="h-5 w-5",xr="min-w-[140px] border-2 border-slate-700 bg-slate-800 py-2 px-2",_r="grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4 gap-y-1",ri="text-xs font-bold text-slate-200",ei="text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",If="text-xs font-bold text-emerald-400",Uh="text-xs font-bold text-emerald-400 tabular-nums whitespace-nowrap",ua=w?Array.from(ki).reduce((B,J)=>{const at=pt[Mn(J)];return at?.plus?.length?B+at.plus.reduce((lt,dt)=>lt+dt,0):B},0):0,Of=I?(ys||[]).reduce((B,J)=>{const at=String(J?.segmentKey||"");if(at&&ko.current?.has?.(at))return B;const lt=Number(J?.meters)||0,dt=typeof J?.metersMultiplier=="number"&&Number.isFinite(J.metersMultiplier)?J.metersMultiplier:gt;return B+lt*dt},0)+Array.from(ba).reduce((B,J)=>{const at=Number(Ws.current?.[J])||0;return B+at},0):0,a0=I?(ls||[]).reduce((B,J)=>{const at=String(J?.segmentKey||"");if(at&&ko.current?.has?.(at))return B;const lt=Number(J?.meters)||0,dt=typeof J?.metersMultiplier=="number"&&Number.isFinite(J.metersMultiplier)?J.metersMultiplier:gt;return B+lt*dt},0):0,l0=I?(ul||[]).reduce((B,J)=>dl.has(J.key)?B+(Number(J.length)||0):B,0):0,qp=Wc+_a,jf=j?Math.floor(M.size/2):0,ro=j?qp:R?15993:T?Ss:I||w||Bt?gl:gl+vs,Bd=j?jf:R?_d:T?Mm:w?ua:I?Of+a0+l0:Rs+ic,Lf=ro>0?Bd/ro*100:0,Wl=Math.max(0,gl-Rs),pg=Math.max(0,vs-ic),Gp=Math.max(0,ro-Bd),Cu=typeof h?.simpleCounterUnit=="string"?h.simpleCounterUnit:"m",Hh=B=>`${(Number(B)||0).toFixed(0)}${Cu?` ${Cu}`:""}`,ku=ot.useMemo(()=>{if(!D)return null;const B=Math.max(0,Number(h?.mc4TotalEnds??9517)||0),J=typeof Cd=="number"&&Number.isFinite(Cd)?Cd:Number(h?.mc4DefaultStrings)||0,at=Ge.current||{},lt=new Set,dt=new Set,xt=mt=>{if(!mt)return null;const vt=Number(mt.lat),wt=Number(mt.lng);return!Number.isFinite(vt)||!Number.isFinite(wt)?null:`${vt.toFixed(6)},${wt.toFixed(6)}`};Object.keys(Na||{}).forEach(mt=>{const vt=Na[mt]||{left:null,right:null},wt=at[mt];if(wt&&!wt.mc4Ends&&typeof wt.computeEnds=="function")try{const jt=wt.computeEnds();jt&&(wt.mc4Ends=jt)}catch{}const Nt=wt?.mc4Ends;if(!Nt?.leftPos||!Nt?.rightPos)return;const Rt=xt(Nt.leftPos),qt=xt(Nt.rightPos);Rt&&((vt.left===Ri.MC4||vt.left===Ri.TERMINATED)&&lt.add(Rt),vt.left===Ri.TERMINATED&&dt.add(Rt)),qt&&((vt.right===Ri.MC4||vt.right===Ri.TERMINATED)&&lt.add(qt),vt.right===Ri.TERMINATED&&dt.add(qt))});let yt=lt.size,ht=dt.size;return yt=Math.min(yt,B),ht=Math.min(ht,B),{totalStrings:J,totalEnds:B,mc4Completed:yt,terminatedCompleted:ht}},[D,Na,Tp,Cd]),Oc=ot.useMemo(()=>{if(!C)return null;const B=Math.max(0,Number(h?.dcttTotalEnds??9517)||0),J=typeof Ed=="number"&&Number.isFinite(Ed)?Ed:0,at=new Set,lt=Ge.current||{};Object.keys(Xi||{}).forEach(xt=>{const yt=Xi[xt]||{left:null,right:null};if(yt.left===Jr.TERMINATED||yt.right===Jr.TERMINATED){const ht=lt[xt],mt=String(ht?.dedupeKey||xt);at.add(mt)}});let dt=at.size*4;return dt=Math.min(dt,B),{totalStrings:J,totalEnds:B,terminatedCompleted:dt}},[C,Xi,$o,Ed]),mg=w?ki.size:I?ys?.length||0:W?Ir==="tabletotable"?Qs.size:Do?.length||0:D?Object.keys(Na||{}).length:h?.workUnitWeights?(()=>{const B=new Set;return(M||new Set).forEach(J=>{const at=Ge.current?.[J],lt=String(at?.dedupeKey||J);B.add(lt)}),B.size})():M.size,c0=Z?Math.max(0,Object.entries(Bi||{}).reduce((B,[J,at])=>B+bn(J,at),0)):0,u0=K&&String(vn||"termination")==="termination"?Math.max(0,Object.values(kn||{}).reduce((B,J)=>B+Math.max(0,Math.min(3,Number(J)||0)),0)):0,gg=`termination panel side, ${K&&String(vn||"termination")==="termination"?(()=>{try{const J=qn.current||[],at=new Set;let lt=0;const dt=Tn.current||{},xt=yt=>{const ht=String(yt||"").match(/^(ss|sub)(\d{2})$/i);if(!ht)return 0;const mt=parseInt(ht[2],10);return!Number.isFinite(mt)||mt<=0?0:Math.max(0,Number(dt?.[mt]??dt?.[String(mt)]??0)||0)};for(let yt=0;yt<J.length;yt++){const ht=String(J[yt]?.text||"").trim();if(!ht)continue;const mt=Un(ht);if(!mt||at.has(mt))continue;at.add(mt);const vt=xt(mt);if(!(vt>0))continue;const wt=Number(Vr.current?.[mt]??0),Nt=Math.max(0,Math.min(vt,Number.isFinite(wt)?wt:0));lt+=Nt}return Math.max(0,lt)*3}catch{return 0}})():0} termination inv. side`,zd=W?Ir==="tabletotable"?Qs.size:xh:0,Pf=W?Ir==="tabletotable"?"pcs":"m":"",ql=R?_d:0,f0="m",Fd=T?wd:0,Df="m",Ud=ot.useMemo(()=>{if(I)return Of;if(R)return ql;if(T)return Fd;if(W)return zd;if(D){const J=ku?.mc4Completed||0,at=yf.current||{mc4:0},lt=Number(at.mc4)||0;return Math.max(0,(Number(J)||0)-lt)}if(C){const J=String(Zi||Fr.current||"termination_panel"),at=(()=>{const yt=Qr||{};let ht=0;for(const[mt,vt]of Object.entries(yt)){const wt=Mn(mt),Nt=Math.max(0,Number(Cc.current?.[wt]??0)||0),Rt=Math.max(0,Number(vt)||0);ht+=Nt>0?Math.min(Nt,Rt):Rt}return ht})(),lt=J==="termination_panel"?Oc?.terminatedCompleted||0:at,dt=Bs.current||{termination_panel:0,termination_inv:0},xt=J==="termination_panel"?Number(dt.termination_panel)||0:Number(dt.termination_inv)||0;return Math.max(0,(Number(lt)||0)-xt)}if(w){const J=Pl||new Set;let at=0;return ki.forEach(lt=>{const dt=Mn(lt);if(J.has(dt))return;const xt=pt[dt];xt?.plus?.length&&(at+=xt.plus.reduce((yt,ht)=>yt+ht,0))}),at}const B=new Set;if(M.forEach(J=>{(it.current||H).has(J)||B.add(J)}),E){const J=new Set;B.forEach(dt=>{const xt=Ge.current[dt];xt&&xt.stringId&&J.add(Mn(xt.stringId))});let at=0,lt=0;return J.forEach(dt=>{const xt=pt[dt];xt&&(xt.plus&&xt.plus.length>0&&(at+=xt.plus.reduce((yt,ht)=>yt+ht,0)),xt.minus&&xt.minus.length>0&&(lt+=xt.minus.reduce((yt,ht)=>yt+ht,0)))}),at+lt}return B.size},[I,R,T,W,D,C,w,E,M,H,Of,ql,Fd,zd,ku,Oc,Qr,Zi,pt,ki,Pl]),Zp=I?Of:R?ql:T?Fd:W?zd:Ud,[Vh,$h]=ot.useState("");ot.useEffect(()=>{const B=h.linkPath;B&&fetch(B).then(J=>J.text()).then(J=>$h((J||"").trim())).catch(()=>$h(B))},[h.linkPath]);const Wh=o||(D&&ku?q.jsx("div",{className:"flex min-w-0 items-stretch gap-3 overflow-x-auto pb-1 justify-self-start",children:(()=>{const B=Number(ku.totalEnds)||0,J=Number(ku.mc4Completed)||0,at=Math.max(0,B-J),lt=B>0?(J/B*100).toFixed(1):"0.0";return q.jsx("div",{className:"min-w-[620px] border-2 border-slate-700 bg-slate-900/40 py-3 px-3",children:q.jsx("div",{className:"flex flex-col gap-2",children:q.jsxs("div",{className:"grid grid-cols-[170px_repeat(3,max-content)] items-center gap-x-3 gap-y-2",children:[q.jsx("div",{className:"text-xs font-bold text-blue-300",children:"MC4 Install:"}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:B})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:"text-xs font-bold text-blue-400",children:"Done"}),q.jsxs("span",{className:"text-xs font-bold text-blue-400 tabular-nums",children:[J," (",lt,"%)"]})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Remaining"}),q.jsx("span",{className:ei,children:at})]})})]})})})})()}):null)||(C&&Oc?q.jsx("div",{className:"flex min-w-0 items-stretch gap-3 overflow-x-auto pb-1 justify-self-start",children:(()=>{const B=Number(Oc.totalEnds)||0,J=Number(Oc.terminatedCompleted)||0,at=9517,lt=(()=>{const Gt=Qr||{};let se=0;for(const[fe,bt]of Object.entries(Gt)){const ve=Mn(fe),je=Math.max(0,Number(Cc.current?.[ve]??0)||0),te=Math.max(0,Number(bt)||0);se+=je>0?Math.min(je,te):te}return se})(),dt=Math.max(0,B-J),xt=Math.max(0,at-lt),yt=B>0?(J/B*100).toFixed(1):"0.0",ht=(lt/at*100).toFixed(1),mt=String(Li||"termination"),vt=mt==="termination",wt=mt==="testing",Nt=String(Zi||"termination_panel"),Rt=Nt==="termination_panel",qt=Nt==="termination_inv",jt=vt?If:"text-xs font-bold text-slate-500",Lt=vt?Uh:"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap",Tt=vt?"text-xs font-bold text-amber-400":"text-xs font-bold text-slate-500",Ot=vt?"text-xs font-bold text-amber-400 tabular-nums whitespace-nowrap":"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap",It=Yi.current||{},Mt=kc||new Set,_t=Mt.size;let Et=0,Pt=0,Dt=0;Mt.forEach(Gt=>{const se=It?.[Gt]||null;if(!se){Dt++;return}const fe=Ei(se?.status||se?.remarkRaw)||null;fe==="passed"?Et++:fe==="failed"&&Pt++});const Ft=_t>0?(Et/_t*100).toFixed(1):"0.0",Xt=wt?Tf:null,Wt="ring-2 ring-offset-1 ring-offset-slate-900",Vt=wt?"text-xs font-bold text-emerald-400":"text-xs font-bold text-slate-500",Zt=wt?"text-xs font-bold text-emerald-400 tabular-nums whitespace-nowrap":"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap",Ut=wt?"text-xs font-bold text-red-400":"text-xs font-bold text-slate-500",$t=wt?"text-xs font-bold text-red-400 tabular-nums whitespace-nowrap":"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap";return q.jsx("div",{className:"min-w-[820px] border-2 border-slate-700 bg-slate-900/40 py-2 px-3",children:q.jsxs("div",{className:"flex flex-col gap-1",children:[q.jsxs("div",{className:"grid grid-cols-[24px_200px_repeat(3,max-content)] items-center gap-x-2 gap-y-1",children:[q.jsx("button",{type:"button",onClick:()=>{vt||(Gi("termination"),cr(null))},className:`row-span-2 w-5 h-5 border-2 rounded flex items-center justify-center transition-colors justify-self-start self-center ${vt?"border-emerald-500 bg-emerald-500 text-white":"border-slate-500 bg-slate-800 hover:border-emerald-400"}`,title:"Select Cable Termination Mode","aria-pressed":vt,children:vt&&q.jsx("span",{className:"text-xs font-bold",children:""})}),q.jsx("div",{className:`text-[11px] font-bold cursor-pointer ${vt&&Rt?"text-emerald-300":vt?"text-emerald-400/60":"text-slate-500"}`,onClick:()=>{vt||Gi("termination"),Rt||Ps("termination_panel")},title:"Focus Panel Side termination",children:"Cable Termination Panel Side:"}),q.jsx("div",{className:xr,onClick:()=>{vt||Gi("termination"),Rt||Ps("termination_panel")},role:"button",tabIndex:0,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:B})]})}),q.jsx("div",{className:xr,onClick:()=>{vt||Gi("termination"),Rt||Ps("termination_panel")},role:"button",tabIndex:0,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:jt,children:"Done"}),q.jsxs("span",{className:Lt,children:[J," (",yt,"%)"]})]})}),q.jsx("div",{className:xr,onClick:()=>{vt||Gi("termination"),Rt||Ps("termination_panel")},role:"button",tabIndex:0,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Remaining"}),q.jsx("span",{className:ei,children:dt})]})}),q.jsx("div",{className:`text-[11px] font-bold cursor-pointer ${vt&&qt?"text-amber-300":vt?"text-amber-400/60":"text-slate-500"}`,onClick:()=>{vt||Gi("termination"),qt||Ps("termination_inv")},title:"Focus Inv. Side termination",children:"Cable Termination Inv. Side:"}),q.jsx("div",{className:xr,onClick:()=>{vt||Gi("termination"),qt||Ps("termination_inv")},role:"button",tabIndex:0,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:at})]})}),q.jsx("div",{className:xr,onClick:()=>{vt||Gi("termination"),qt||Ps("termination_inv")},role:"button",tabIndex:0,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:Tt,children:"Done"}),q.jsxs("span",{className:Ot,children:[lt," (",ht,"%)"]})]})}),q.jsx("div",{className:xr,onClick:()=>{vt||Gi("termination"),qt||Ps("termination_inv")},role:"button",tabIndex:0,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Remaining"}),q.jsx("span",{className:ei,children:xt})]})})]}),q.jsxs("div",{className:"grid grid-cols-[24px_200px_repeat(4,max-content)] items-center gap-x-2 gap-y-1 cursor-pointer",onClick:()=>{wt||Gi("testing")},children:[q.jsx("button",{type:"button",onClick:Gt=>{Gt.stopPropagation(),wt||Gi("testing")},className:`w-5 h-5 border-2 rounded flex items-center justify-center transition-colors ${wt?"border-sky-500 bg-sky-500 text-white":"border-slate-500 bg-slate-800 hover:border-sky-400"}`,title:"Select DC_TESTING","aria-pressed":wt,children:wt&&q.jsx("span",{className:"text-xs font-bold",children:""})}),q.jsx("div",{className:`text-[11px] font-bold ${wt?"text-sky-300":"text-sky-400/60"}`,children:"DC_TESTING:"}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:_t})]})}),q.jsx("div",{className:`${xr} transition-all ${Xt==="passed"?`border-emerald-500 bg-emerald-950/40 ${Wt} ring-emerald-500`:"hover:border-emerald-600"}`,role:"button",tabIndex:0,onClick:Gt=>{Gt.stopPropagation(),wt||Gi("testing"),cr(Xt==="passed"?null:"passed")},onKeyDown:Gt=>{Gt.key==="Enter"&&(Gt.stopPropagation(),wt||Gi("testing"),cr(Xt==="passed"?null:"passed"))},"aria-pressed":Xt==="passed",children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:`${Vt} underline decoration-1 underline-offset-2 hover:opacity-80 transition-opacity`,children:"Passed"}),q.jsxs("span",{className:Zt,children:[Et," (",Ft,"%)"]})]})}),q.jsx("div",{className:`${xr} transition-all ${Xt==="failed"?`border-red-500 bg-red-950/40 ${Wt} ring-red-500`:"hover:border-red-600"}`,role:"button",tabIndex:0,onClick:Gt=>{Gt.stopPropagation(),wt||Gi("testing"),cr(Xt==="failed"?null:"failed")},onKeyDown:Gt=>{Gt.key==="Enter"&&(Gt.stopPropagation(),wt||Gi("testing"),cr(Xt==="failed"?null:"failed"))},"aria-pressed":Xt==="failed",children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:`${Ut} underline decoration-1 underline-offset-2 hover:opacity-80 transition-opacity`,children:"Failed"}),q.jsx("span",{className:$t,children:Pt})]})}),q.jsx("div",{className:`${xr} transition-all ${Xt==="not_tested"?`border-white bg-slate-700/40 ${Wt} ring-white`:"hover:border-slate-500"}`,role:"button",tabIndex:0,onClick:Gt=>{Gt.stopPropagation(),wt||Gi("testing"),cr(Xt==="not_tested"?null:"not_tested")},onKeyDown:Gt=>{Gt.key==="Enter"&&(Gt.stopPropagation(),wt||Gi("testing"),cr(Xt==="not_tested"?null:"not_tested"))},"aria-pressed":Xt==="not_tested",children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:`${wt?"text-xs font-bold text-white":"text-xs font-bold text-slate-500"} underline decoration-1 underline-offset-2 hover:opacity-80 transition-opacity`,children:"Not Tested"}),q.jsx("span",{className:wt?"text-xs font-bold text-white tabular-nums whitespace-nowrap":"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap",children:Dt})]})})]})]})})})()}):null)||(Z?q.jsx("div",{className:"flex min-w-0 items-stretch gap-3 overflow-x-auto pb-1 justify-self-start",children:(()=>{const at=String(Sn||"termination"),lt=at==="termination",dt=at==="testing",xt=Math.max(0,Object.entries(Bi||{}).reduce((_t,[Et,Pt])=>_t+bn(Et,Pt),0)),yt=Math.max(0,36-xt),ht=(xt/36*100).toFixed(1);let mt=0,vt=0;try{const _t=yn.current||{};for(const Et of Object.values(_t))["L1","L2","L3"].forEach(Pt=>{const Dt=String(Et?.[Pt]?.status||Et?.[Pt]||"").trim().toUpperCase();!Dt||Dt==="N/A"||(Dt==="PASS"?mt+=1:vt+=1)})}catch{}const wt=Math.max(0,18-mt-vt),Nt=(mt/18*100).toFixed(1),Rt=dt?$s:null,qt="ring-2 ring-offset-1 ring-offset-slate-900",jt=lt?If:"text-xs font-bold text-slate-500",Lt=lt?Uh:"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap",Tt=dt?"text-xs font-bold text-emerald-400":"text-xs font-bold text-slate-500",Ot=dt?"text-xs font-bold text-emerald-400 tabular-nums whitespace-nowrap":"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap",It=dt?"text-xs font-bold text-red-400":"text-xs font-bold text-slate-500",Mt=dt?"text-xs font-bold text-red-400 tabular-nums whitespace-nowrap":"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap";return q.jsx("div",{className:"min-w-[820px] border-2 border-slate-700 bg-slate-900/40 py-3 px-3",children:q.jsxs("div",{className:"flex flex-col gap-2",children:[q.jsxs("div",{className:"grid grid-cols-[24px_170px_repeat(3,max-content)] items-center gap-x-3 gap-y-2 cursor-pointer",onClick:()=>{lt||Fn("termination")},children:[q.jsx("button",{type:"button",onClick:_t=>{_t.stopPropagation(),lt||Fn("termination")},className:`w-5 h-5 border-2 rounded flex items-center justify-center transition-colors ${lt?"border-emerald-500 bg-emerald-500 text-white":"border-slate-500 bg-slate-800 hover:border-emerald-400"}`,title:"Select MV_TERMINATION","aria-pressed":lt,children:lt&&q.jsx("span",{className:"text-xs font-bold",children:""})}),q.jsx("div",{className:`text-xs font-bold ${lt?"text-emerald-300":"text-emerald-400/60"}`,children:"MV_TERMINATION:"}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:36})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:jt,children:"Done"}),q.jsxs("span",{className:Lt,children:[xt," (",ht,"%)"]})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Remaining"}),q.jsx("span",{className:ei,children:yt})]})})]}),q.jsxs("div",{className:"grid grid-cols-[24px_170px_repeat(4,max-content)] items-center gap-x-3 gap-y-2 cursor-pointer",onClick:()=>{dt||Fn("testing")},children:[q.jsx("button",{type:"button",onClick:_t=>{_t.stopPropagation(),dt||Fn("testing")},className:`w-5 h-5 border-2 rounded flex items-center justify-center transition-colors ${dt?"border-sky-500 bg-sky-500 text-white":"border-slate-500 bg-slate-800 hover:border-sky-400"}`,title:"Select MV_TESTING","aria-pressed":dt,children:dt&&q.jsx("span",{className:"text-xs font-bold",children:""})}),q.jsx("div",{className:`text-xs font-bold ${dt?"text-sky-300":"text-sky-400/60"}`,children:"MV_TESTING:"}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:18})]})}),null,q.jsx("div",{className:`${xr} transition-all ${Rt==="passed"?`border-emerald-500 bg-emerald-950/40 ${qt} ring-emerald-500`:"hover:border-emerald-600"}`,role:"button",tabIndex:0,onClick:_t=>{_t.stopPropagation(),dt||Fn("testing"),Kn(Rt==="passed"?null:"passed")},onKeyDown:_t=>{_t.key==="Enter"&&(_t.stopPropagation(),dt||Fn("testing"),Kn(Rt==="passed"?null:"passed"))},"aria-pressed":Rt==="passed",children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:`${Tt} underline decoration-1 underline-offset-2 hover:opacity-80 transition-opacity`,children:"Passed"}),q.jsxs("span",{className:Ot,children:[mt," (",Nt,"%)"]})]})}),q.jsx("div",{className:`${xr} transition-all ${Rt==="failed"?`border-red-500 bg-red-950/40 ${qt} ring-red-500`:"hover:border-red-600"}`,role:"button",tabIndex:0,onClick:_t=>{_t.stopPropagation(),dt||Fn("testing"),Kn(Rt==="failed"?null:"failed")},onKeyDown:_t=>{_t.key==="Enter"&&(_t.stopPropagation(),dt||Fn("testing"),Kn(Rt==="failed"?null:"failed"))},"aria-pressed":Rt==="failed",children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:`${It} underline decoration-1 underline-offset-2 hover:opacity-80 transition-opacity`,children:"Failed"}),q.jsx("span",{className:Mt,children:vt})]})}),q.jsx("div",{className:`${xr} transition-all ${Rt==="not_tested"?`border-slate-400 bg-slate-700/40 ${qt} ring-slate-400`:"hover:border-slate-500"}`,role:"button",tabIndex:0,onClick:_t=>{_t.stopPropagation(),dt||Fn("testing"),Kn(Rt==="not_tested"?null:"not_tested")},onKeyDown:_t=>{_t.key==="Enter"&&(_t.stopPropagation(),dt||Fn("testing"),Kn(Rt==="not_tested"?null:"not_tested"))},"aria-pressed":Rt==="not_tested",children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:`${dt?"text-xs font-bold text-slate-400":"text-xs font-bold text-slate-500"} underline decoration-1 underline-offset-2 hover:opacity-80 transition-opacity`,children:"Not Tested"}),q.jsx("span",{className:dt?"text-xs font-bold text-slate-400 tabular-nums whitespace-nowrap":"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap",children:wt})]})})]})]})})})()}):null)||(K?q.jsx("div",{className:"flex min-w-0 items-stretch gap-3 overflow-x-auto pb-1 justify-self-start",children:(()=>{const B=Number(Bu?.total)||0,J=Number(Bu?.passed)||0,at=Number(Bu?.failed)||0,lt=Math.max(0,B-J-at),dt=String(vn||"termination"),xt=dt==="termination",yt=dt==="testing",ht=yt?Go:null,mt="ring-2 ring-offset-1 ring-offset-slate-900",vt=Math.max(0,Object.values(kn||{}).reduce((Et,Pt)=>{const Dt=Math.max(0,Math.min(3,Number(Pt)||0));return Et+Dt},0)),wt=Math.max(0,B-vt),Nt=B>0?(vt/B*100).toFixed(1):"0.0",Rt=B>0?(J/B*100).toFixed(1):"0.0",qt=xt?If:"text-xs font-bold text-slate-500",jt=xt?Uh:"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap",Lt=yt?"text-xs font-bold text-emerald-400":"text-xs font-bold text-slate-500",Tt=yt?"text-xs font-bold text-emerald-400 tabular-nums whitespace-nowrap":"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap",Ot=yt?"text-xs font-bold text-red-400":"text-xs font-bold text-slate-500",It=yt?"text-xs font-bold text-red-400 tabular-nums whitespace-nowrap":"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap",Mt=Et=>{const Pt=String(Et||"").match(/^(ss|sub)(\d{2})$/i);if(!Pt)return 0;const Dt=parseInt(Pt[2],10);if(!Number.isFinite(Dt)||Dt<=0)return 0;const Ft=Tn.current||{};return Math.max(0,Number(Ft?.[Dt]??Ft?.[String(Dt)]??0)||0)},_t=(()=>{const Pt=qn.current||[],Dt=new Set;let Ft=0;for(let Ut=0;Ut<Pt.length;Ut++){const $t=String(Pt[Ut]?.text||"").trim();if(!$t)continue;const Gt=Un($t);if(!Gt||Dt.has(Gt))continue;Dt.add(Gt);const se=Mt(Gt);if(!(se>0))continue;const fe=Number(Vr.current?.[Gt]??0),bt=Math.max(0,Math.min(se,Number.isFinite(fe)?fe:0));Ft+=bt}const Xt=462,Wt=Ft*3,Vt=Math.max(0,Xt-Wt),Zt=(Wt/Xt*100).toFixed(1);return{totalInv:Xt,doneInv:Wt,remInv:Vt,pct:Zt}})();return q.jsx("div",{className:"min-w-[820px] border-2 border-slate-700 bg-slate-900/40 py-2 px-3",children:q.jsxs("div",{className:"flex flex-col gap-1",children:[q.jsxs("div",{className:"grid grid-cols-[24px_190px_repeat(3,max-content)] items-center gap-x-2 gap-y-1",children:[q.jsx("button",{type:"button",onClick:()=>{xt||(Dn("termination"),Lr(null))},className:`row-span-2 w-5 h-5 border-2 rounded flex items-center justify-center transition-colors justify-self-start self-center ${xt?"border-emerald-500 bg-emerald-500 text-white":"border-slate-500 bg-slate-800 hover:border-emerald-400"}`,title:"Select LV_TERMINATION","aria-pressed":xt,children:xt&&q.jsx("span",{className:"text-xs font-bold",children:""})}),q.jsx("div",{className:`text-[11px] font-bold ${xt?"text-emerald-300":"text-emerald-400/60"}`,children:"LV Termination Panel Side:"}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:B})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:qt,children:"Done"}),q.jsxs("span",{className:jt,children:[vt," (",Nt,"%)"]})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Remaining"}),q.jsx("span",{className:ei,children:wt})]})}),q.jsx("div",{className:`text-[11px] font-bold ${xt?"text-amber-300":"text-amber-400/60"}`,children:"LV Termination Subs. Side:"}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:_t.totalInv})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:If,children:"Done"}),q.jsxs("span",{className:Uh,children:[_t.doneInv," (",_t.pct,"%)"]})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Remaining"}),q.jsx("span",{className:ei,children:_t.remInv})]})})]}),q.jsxs("div",{className:"grid grid-cols-[24px_190px_repeat(4,max-content)] items-center gap-x-2 gap-y-1 cursor-pointer",onClick:()=>{yt||(Dn("testing"),Lr(null))},children:[q.jsx("button",{type:"button",onClick:Et=>{Et.stopPropagation(),yt||(Dn("testing"),Lr(null))},className:`w-5 h-5 border-2 rounded flex items-center justify-center transition-colors ${yt?"border-sky-500 bg-sky-500 text-white":"border-slate-500 bg-slate-800 hover:border-sky-400"}`,title:"Select LV_TESTING","aria-pressed":yt,children:yt&&q.jsx("span",{className:"text-xs font-bold",children:""})}),q.jsx("div",{className:`text-[11px] font-bold ${yt?"text-sky-300":"text-sky-400/60"}`,children:"LV_TESTING:"}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:B})]})}),q.jsx("div",{className:`${xr} transition-all ${ht==="passed"?`border-emerald-500 bg-emerald-950/40 ${mt} ring-emerald-500`:"hover:border-emerald-600"}`,role:"button",tabIndex:0,onClick:Et=>{Et.stopPropagation(),yt||(Dn("testing"),Lr(null)),ma(ht==="passed"?null:"passed")},onKeyDown:Et=>{Et.key==="Enter"&&(Et.stopPropagation(),yt||(Dn("testing"),Lr(null)),ma(ht==="passed"?null:"passed"))},"aria-pressed":ht==="passed",children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:`${Lt} underline decoration-1 underline-offset-2 hover:opacity-80 transition-opacity`,children:"Passed"}),q.jsxs("span",{className:Tt,children:[J," (",Rt,"%)"]})]})}),q.jsx("div",{className:`${xr} transition-all ${ht==="failed"?`border-red-500 bg-red-950/40 ${mt} ring-red-500`:"hover:border-red-600"}`,role:"button",tabIndex:0,onClick:Et=>{Et.stopPropagation(),yt||(Dn("testing"),Lr(null)),ma(ht==="failed"?null:"failed")},onKeyDown:Et=>{Et.key==="Enter"&&(Et.stopPropagation(),yt||(Dn("testing"),Lr(null)),ma(ht==="failed"?null:"failed"))},"aria-pressed":ht==="failed",children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:`${Ot} underline decoration-1 underline-offset-2 hover:opacity-80 transition-opacity`,children:"Failed"}),q.jsx("span",{className:It,children:at})]})}),q.jsx("div",{className:`${xr} transition-all ${ht==="not_tested"?`border-slate-400 bg-slate-700/40 ${mt} ring-slate-400`:"hover:border-slate-500"}`,role:"button",tabIndex:0,onClick:Et=>{Et.stopPropagation(),yt||(Dn("testing"),Lr(null)),ma(ht==="not_tested"?null:"not_tested")},onKeyDown:Et=>{Et.key==="Enter"&&(Et.stopPropagation(),yt||(Dn("testing"),Lr(null)),ma(ht==="not_tested"?null:"not_tested"))},"aria-pressed":ht==="not_tested",children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:`${yt?"text-xs font-bold text-slate-400":"text-xs font-bold text-slate-500"} underline decoration-1 underline-offset-2 hover:opacity-80 transition-opacity`,children:"Not Tested"}),q.jsx("span",{className:yt?"text-xs font-bold text-slate-400 tabular-nums whitespace-nowrap":"text-xs font-bold text-slate-500 tabular-nums whitespace-nowrap",children:lt})]})})]})]})})})()}):Q?q.jsx("div",{className:"flex min-w-0 items-stretch gap-3 overflow-x-auto pb-1 justify-self-start",children:(()=>{const B=In||{},J=new Set(Object.keys(B)),at=ai||new Set,lt=J.size;let dt=0,xt=0;J.forEach(wt=>{const Nt=B[wt];Nt==="passed"?dt++:Nt==="failed"&&xt++});let yt=0;at.forEach(wt=>{J.has(wt)||yt++});const ht=Or,mt="cursor-pointer underline decoration-1 underline-offset-2 hover:opacity-80 transition-opacity",vt="ring-2 ring-offset-1 ring-offset-slate-900";return q.jsxs("div",{className:"flex items-center gap-3",children:[q.jsx("div",{className:"min-w-[120px] border-2 border-slate-700 bg-slate-800 py-3 px-3",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"Total"}),q.jsx("span",{className:"text-xs font-bold text-slate-200 tabular-nums",children:lt})]})}),q.jsx("div",{className:`min-w-[120px] border-2 py-3 px-3 transition-all ${ht==="passed"?"border-emerald-500 bg-emerald-950/40 "+vt+" ring-emerald-500":"border-slate-700 bg-slate-800 hover:border-emerald-600"}`,role:"button",tabIndex:0,onClick:()=>kr(ht==="passed"?null:"passed"),onKeyDown:wt=>wt.key==="Enter"&&kr(ht==="passed"?null:"passed"),"aria-pressed":ht==="passed",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:`text-xs font-bold text-emerald-400 ${mt}`,onClick:wt=>{wt.stopPropagation(),kr(ht==="passed"?null:"passed")},role:"presentation",tabIndex:-1,children:"Passed"}),q.jsx("span",{className:"text-xs font-bold text-emerald-400 tabular-nums",children:dt})]})}),q.jsx("div",{className:`min-w-[120px] border-2 py-3 px-3 transition-all ${ht==="failed"?"border-red-500 bg-red-950/40 "+vt+" ring-red-500":"border-slate-700 bg-slate-800 hover:border-red-600"}`,role:"button",tabIndex:0,onClick:()=>kr(ht==="failed"?null:"failed"),onKeyDown:wt=>wt.key==="Enter"&&kr(ht==="failed"?null:"failed"),"aria-pressed":ht==="failed",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:`text-xs font-bold text-red-400 ${mt}`,onClick:wt=>{wt.stopPropagation(),kr(ht==="failed"?null:"failed")},role:"presentation",tabIndex:-1,children:"Failed"}),q.jsx("span",{className:"text-xs font-bold text-red-400 tabular-nums",children:xt})]})}),q.jsx("div",{className:`min-w-[140px] border-2 py-3 px-3 transition-all ${ht==="not_tested"?"border-white bg-slate-700/40 "+vt+" ring-white":"border-slate-700 bg-slate-800 hover:border-slate-500"}`,role:"button",tabIndex:0,onClick:()=>kr(ht==="not_tested"?null:"not_tested"),onKeyDown:wt=>wt.key==="Enter"&&kr(ht==="not_tested"?null:"not_tested"),"aria-pressed":ht==="not_tested",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:`text-xs font-bold text-white ${mt}`,onClick:wt=>{wt.stopPropagation(),kr(ht==="not_tested"?null:"not_tested")},role:"presentation",tabIndex:-1,children:"Not Tested"}),q.jsx("span",{className:"text-xs font-bold text-white tabular-nums",children:yt})]})})]})})()}):null)||(z?q.jsx("div",{className:"flex min-w-0 items-stretch gap-3 overflow-x-auto pb-1 justify-self-start",children:(()=>{const B=us.length,J=us.filter(dt=>dt.completed).length,at=Math.max(0,B-J),lt=B>0?(J/B*100).toFixed(1):"0.0";return q.jsxs("div",{className:"flex items-center gap-3",children:[q.jsx("div",{className:"min-w-[120px] border-2 border-slate-700 bg-slate-800 py-3 px-3",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"Total"}),q.jsx("span",{className:"text-xs font-bold text-slate-200 tabular-nums",children:B})]})}),q.jsx("div",{className:"min-w-[160px] border-2 border-emerald-700/50 bg-emerald-900/20 py-3 px-3",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:"text-xs font-bold text-emerald-400",children:"Completed"}),q.jsxs("span",{className:"text-xs font-bold text-emerald-400 tabular-nums",children:[J," (",lt,"%)"]})]})}),q.jsx("div",{className:"min-w-[120px] border-2 border-slate-700 bg-slate-800 py-3 px-3",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:"text-xs font-bold text-amber-400",children:"Remaining"}),q.jsx("span",{className:"text-xs font-bold text-amber-400 tabular-nums",children:at})]})})]})})()}):null);return q.jsxs("div",{className:"app",children:[u,q.jsx("div",{ref:Ve,className:"sticky top-0 left-0 z-[1100] w-full min-h-[92px] border-b-2 border-slate-700 bg-slate-900 px-4 py-0 sm:px-6 relative flex items-center",children:q.jsxs("div",{className:"w-full",children:[q.jsxs("div",{className:"grid grid-cols-[1fr_auto] items-center gap-1",children:[y?Wh||q.jsx("div",{className:`flex min-w-0 gap-3 overflow-x-auto pb-1 justify-self-start ${F?"flex-col items-start gap-1":"items-center"}`,children:Bt?q.jsx(q.Fragment,{children:F?q.jsx("div",{className:"flex flex-col gap-2",children:(()=>{const B="grid grid-cols-[24px_140px_repeat(3,max-content)] items-center gap-x-2 gap-y-2 cursor-pointer",J=ml.size,at=Ua>0?(J/Ua*100).toFixed(1):"0.0",lt=Math.max(0,Ua-J),dt=No.size,xt=Ha>0?(dt/Ha*100).toFixed(1):"0.0",yt=Math.max(0,Ha-dt),ht="w-5 h-5 border-2 rounded flex items-center justify-center transition-colors";return q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:B,onClick:()=>{Oi!=="lvBox"&&Fa("lvBox")},children:[q.jsx("button",{type:"button",onClick:mt=>{mt.stopPropagation(),Oi!=="lvBox"&&Fa("lvBox")},className:`${ht} ${Oi==="lvBox"?"border-slate-200 bg-slate-200 text-slate-900":"border-slate-500 bg-slate-800 hover:border-slate-200"}`,title:"Select LV Box","aria-pressed":Oi==="lvBox",children:Oi==="lvBox"&&q.jsx("span",{className:"text-xs font-bold",children:""})}),q.jsx("div",{className:`text-xs font-bold ${Oi==="lvBox"?"text-white":"text-slate-500"}`,children:"LV Box:"}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:Ua})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Done"}),q.jsxs("span",{className:ei,children:[J," (",at,"%)"]})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Remaining"}),q.jsx("span",{className:ei,children:lt})]})})]}),q.jsxs("div",{className:B,onClick:()=>{Oi!=="invBox"&&Fa("invBox")},children:[q.jsx("button",{type:"button",onClick:mt=>{mt.stopPropagation(),Oi!=="invBox"&&Fa("invBox")},className:`${ht} ${Oi==="invBox"?"border-slate-200 bg-slate-200 text-slate-900":"border-slate-500 bg-slate-800 hover:border-slate-200"}`,title:"Select INV Box","aria-pressed":Oi==="invBox",children:Oi==="invBox"&&q.jsx("span",{className:"text-xs font-bold",children:""})}),q.jsx("div",{className:`text-xs font-bold ${Oi==="invBox"?"text-white":"text-slate-500"}`,children:"INV Box:"}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:Ha})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Done"}),q.jsxs("span",{className:ei,children:[dt," (",xt,"%)"]})]})}),q.jsx("div",{className:xr,children:q.jsxs("div",{className:_r,children:[q.jsx("span",{className:ri,children:"Remaining"}),q.jsx("span",{className:ei,children:yt})]})})]})]})})()}):j?q.jsxs(q.Fragment,{children:[q.jsx("div",{className:"min-w-[140px] border-2 border-slate-700 bg-slate-800 py-3 px-3 self-center",children:q.jsxs("div",{className:"flex flex-col gap-y-1",children:[q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:"text-xs font-bold text-slate-200",children:h?.smallTableLabel||"2V14"}),q.jsx("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:Wc})]}),q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:"text-xs font-bold text-slate-200",children:h?.bigTableLabel||"2V27"}),q.jsx("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:_a})]})]})}),q.jsxs("div",{className:"flex items-center gap-3 self-center",children:[q.jsx("div",{className:"min-w-[120px] border-2 border-slate-700 bg-slate-800 py-3 px-3",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"Total"}),q.jsx("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:qp})]})}),q.jsx("div",{className:"min-w-[180px] border-2 border-slate-700 bg-slate-800 py-3 px-3",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:"text-xs font-bold text-emerald-400",children:"Completed"}),q.jsxs("span",{className:"text-xs font-bold text-emerald-400 tabular-nums whitespace-nowrap",children:[jf,", ",Lf.toFixed(2),"%"]})]})}),q.jsx("div",{className:"min-w-[140px] border-2 border-slate-700 bg-slate-800 py-3 px-3",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4",children:[q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"Remaining"}),q.jsx("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:Gp})]})})]})]}):W?q.jsx(q.Fragment,{children:(()=>{const B=Ir==="tabletotable",J=Ir==="parameter",at=bp,lt=Qs.size,dt=Math.max(0,at-lt);at>0&&(lt/at*100).toFixed(2);const xt=km,yt=xh,ht=Math.max(0,xt-yt);xt>0&&(yt/xt*100).toFixed(2);const mt="w-[160px] border-2 border-slate-700 bg-slate-800 py-2 px-3";return q.jsx("div",{className:"min-w-[900px] border-2 border-slate-700 bg-slate-900/40 py-3 px-3",children:q.jsxs("div",{className:"flex flex-col gap-2",children:[q.jsxs("div",{className:"grid grid-cols-[24px_180px_160px_160px_160px] items-center gap-x-3 cursor-pointer",onClick:()=>{if(!B){ws.current="tabletotable",ud("tabletotable");try{const vt=ge.current;if(vt){const wt=vt.getPane("ptepTableToTablePane"),Nt=vt.getPane("ptepParameterPane");wt&&(wt.style.pointerEvents="auto"),Nt&&(Nt.style.pointerEvents="none")}}catch{}}},children:[q.jsx("button",{type:"button",onClick:vt=>{if(vt.stopPropagation(),!B){ws.current="tabletotable",ud("tabletotable");try{const wt=ge.current;if(wt){const Nt=wt.getPane("ptepTableToTablePane"),Rt=wt.getPane("ptepParameterPane");Nt&&(Nt.style.pointerEvents="auto"),Rt&&(Rt.style.pointerEvents="none")}}catch{}}},className:`w-5 h-5 border-2 rounded flex items-center justify-center transition-colors ${B?"border-white bg-white text-slate-900":"border-slate-500 bg-slate-800 hover:border-white"}`,title:"Select Table-to-Table mode",children:B&&q.jsx("span",{className:"text-xs font-bold",children:""})}),q.jsx("div",{className:`text-xs font-bold ${B?"text-white":"text-slate-500"}`,children:"Table-to-Table:"}),q.jsx("div",{className:mt,children:q.jsxs("div",{className:"flex justify-between items-center",children:[q.jsx("span",{className:ri,children:"Total"}),q.jsx("span",{className:ei,children:at})]})}),q.jsx("div",{className:mt,children:q.jsxs("div",{className:"flex justify-between items-center",children:[q.jsx("span",{className:B?"text-xs font-bold text-emerald-400":"text-xs font-bold text-slate-500",children:"Completed"}),q.jsx("span",{className:B?"text-xs font-bold text-emerald-400 tabular-nums":"text-xs font-bold text-slate-500 tabular-nums",children:lt})]})}),q.jsx("div",{className:mt,children:q.jsxs("div",{className:"flex justify-between items-center",children:[q.jsx("span",{className:ri,children:"Remaining"}),q.jsx("span",{className:ei,children:dt})]})})]}),q.jsxs("div",{className:"grid grid-cols-[24px_180px_160px_160px_160px] items-center gap-x-3 cursor-pointer",onClick:()=>{if(!J){ws.current="parameter",ud("parameter");try{const vt=ge.current;if(vt){const wt=vt.getPane("ptepTableToTablePane"),Nt=vt.getPane("ptepParameterPane");wt&&(wt.style.pointerEvents="none"),Nt&&(Nt.style.pointerEvents="auto")}}catch{}}},children:[q.jsx("button",{type:"button",onClick:vt=>{if(vt.stopPropagation(),!J){ws.current="parameter",ud("parameter");try{const wt=ge.current;if(wt){const Nt=wt.getPane("ptepTableToTablePane"),Rt=wt.getPane("ptepParameterPane");Nt&&(Nt.style.pointerEvents="none"),Rt&&(Rt.style.pointerEvents="auto")}}catch{}}},className:`w-5 h-5 border-2 rounded flex items-center justify-center transition-colors ${J?"border-amber-400 bg-amber-400 text-slate-900":"border-slate-500 bg-slate-800 hover:border-amber-400"}`,title:"Select Parameter-Earthing mode",children:J&&q.jsx("span",{className:"text-xs font-bold",children:""})}),q.jsx("div",{className:`text-xs font-bold ${J?"text-amber-400":"text-slate-500"}`,children:"Parameter-Earthing:"}),q.jsx("div",{className:mt,children:q.jsxs("div",{className:"flex justify-between items-center",children:[q.jsx("span",{className:ri,children:"Total"}),q.jsxs("span",{className:ei,children:[xt.toFixed(0)," m"]})]})}),q.jsx("div",{className:mt,children:q.jsxs("div",{className:"flex justify-between items-center",children:[q.jsx("span",{className:J?"text-xs font-bold text-emerald-400":"text-xs font-bold text-slate-500",children:"Completed"}),q.jsxs("span",{className:J?"text-xs font-bold text-emerald-400 tabular-nums":"text-xs font-bold text-slate-500 tabular-nums",children:[yt.toFixed(0)," m"]})]})}),q.jsx("div",{className:mt,children:q.jsxs("div",{className:"flex justify-between items-center",children:[q.jsx("span",{className:ri,children:"Remaining"}),q.jsxs("span",{className:ei,children:[ht.toFixed(0)," m"]})]})})]})]})})})()}):q.jsxs(q.Fragment,{children:[q.jsx("div",{className:"min-w-[180px] border-2 border-slate-700 bg-slate-800 py-3 px-2",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4 gap-y-2",children:[q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"Total"}),q.jsx("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:Hh(ro)})]})}),q.jsx("div",{className:"min-w-[220px] border-2 border-slate-700 bg-slate-800 py-3 px-2",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4 gap-y-2",children:[q.jsx("span",{className:"text-xs font-bold text-emerald-400",children:"Completed"}),q.jsxs("span",{className:"text-xs font-bold text-emerald-400 tabular-nums whitespace-nowrap",children:[Hh(Bd),", ",Lf.toFixed(2),"%"]})]})}),q.jsx("div",{className:"min-w-[180px] border-2 border-slate-700 bg-slate-800 py-3 px-2",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4 gap-y-2",children:[q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"Remaining"}),q.jsx("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:Hh(Gp)})]})})]})}):q.jsxs(q.Fragment,{children:[q.jsx("div",{className:"min-w-[220px] border-2 border-slate-700 bg-slate-800 py-3 px-2",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4 gap-y-2",children:[q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"+DC Cable"}),q.jsxs("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:[gl.toFixed(0)," m"]}),q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"-DC Cable"}),q.jsxs("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:[vs.toFixed(0)," m"]}),q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"Total"}),q.jsxs("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:[(gl+vs).toFixed(0)," m"]})]})}),q.jsx("div",{className:"min-w-[260px] border-2 border-slate-700 bg-slate-800 py-3 px-2",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4 gap-y-2",children:[q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"+DC Cable"}),q.jsxs("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:[Rs.toFixed(0)," m"]}),q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"-DC Cable"}),q.jsxs("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:[ic.toFixed(0)," m"]}),q.jsxs("span",{className:"text-xs font-bold text-emerald-400",children:["Completed (",Lf.toFixed(2),"%)"]}),q.jsxs("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:[Bd.toFixed(0)," m"]})]})}),q.jsx("div",{className:"min-w-[180px] border-2 border-slate-700 bg-slate-800 py-3 px-2",children:q.jsxs("div",{className:"grid w-full grid-cols-[max-content_max-content] items-center justify-between gap-x-4 gap-y-2",children:[q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"+DC Cable"}),q.jsxs("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:[Wl.toFixed(0)," m"]}),q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"-DC Cable"}),q.jsxs("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:[pg.toFixed(0)," m"]}),q.jsx("span",{className:"text-xs font-bold text-slate-200",children:"Remaining"}),q.jsxs("span",{className:"text-xs font-bold text-slate-200 tabular-nums whitespace-nowrap",children:[Gp.toFixed(0)," m"]})]})})]})}):q.jsx("div",{}),q.jsxs("div",{className:"flex flex-shrink-0 items-center gap-2 justify-self-end",children:[ce&&gc.size>0&&q.jsx("button",{onClick:$p,className:hg,title:"Delete Selected","aria-label":"Delete Selected",children:q.jsxs("svg",{className:o0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[q.jsx("path",{d:"M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"}),q.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),q.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),Z&&String(Sn||"termination")==="testing"&&$s?q.jsxs("button",{type:"button",onClick:Qm,disabled:Fi,className:`${zh} w-auto h-6 px-2 py-0 leading-none text-[10px] font-medium whitespace-nowrap`,title:Fi?"Submit first, then export selected":"Export selected test results (CSV)","aria-label":"Export Selected MV Test Results",children:["Export ",$s==="passed"?"Passed":$s==="failed"?"Failed":"Not Tested"]}):null,Q&&Or?q.jsxs("button",{type:"button",onClick:So,disabled:li,className:`${zh} w-auto h-6 px-2 py-0 leading-none text-[10px] font-medium whitespace-nowrap`,title:li?"Submit first, then export selected":"Export selected test results (CSV)","aria-label":"Export Selected Test Results",children:["Export ",Or==="passed"?"Passed":Or==="failed"?"Failed":"Not Tested"]}):null,K&&String(vn||"termination")==="testing"&&Go?q.jsxs("button",{type:"button",onClick:Hp,disabled:Co,className:`${zh} w-auto h-6 px-2 py-0 leading-none text-[10px] font-medium whitespace-nowrap`,title:Co?"Submit first, then export selected":"Export selected test results (CSV)","aria-label":"Export Selected LV Test Results",children:["Export ",Go==="passed"?"Passed":Go==="failed"?"Failed":"Not Tested"]}):null,q.jsx("div",{className:"mx-1 h-10 w-[2px] bg-slate-600"}),q.jsx("button",{onClick:()=>{jd()},disabled:!Rh,className:$l,title:"Undo (Ctrl+Z)","aria-label":"Undo",children:q.jsxs("svg",{className:Fh,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[q.jsx("path",{d:"M9 14l-4-4 4-4"}),q.jsx("path",{d:"M5 10h9a6 6 0 010 12h-1"})]})}),q.jsx("button",{onClick:()=>{Ef()},disabled:!Mf,className:$l,title:"Redo (Ctrl+Y / Ctrl+Shift+Z)","aria-label":"Redo",children:q.jsxs("svg",{className:Fh,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[q.jsx("path",{d:"M15 14l4-4-4-4"}),q.jsx("path",{d:"M19 10H10a6 6 0 000 12h1"})]})}),Q?q.jsxs(q.Fragment,{children:[q.jsx("button",{onClick:Yf,disabled:ce||!li,className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:li?"Submit (save) DC test results":"No changes to submit","aria-label":"Submit Test Results",children:"Submit"}),q.jsx("input",{ref:ao,type:"file",accept:".csv",style:{display:"none"},onChange:B=>{const J=B.target?.files?.[0];if(J){const at=new FileReader;at.onload=()=>{const lt=String(at.result||"");jr(lt,"import")},at.readAsText(J)}B.target&&(B.target.value="")}}),q.jsx("button",{onClick:()=>ao.current?.click(),className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:"Import Test Results (CSV)","aria-label":"Import Test Results",children:"Import Test Results"}),q.jsx("button",{onClick:al,className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:li?"Submit first, then export":"Export submitted test results (CSV)","aria-label":"Export Test Results",children:"Export Test Results"})]}):q.jsxs(q.Fragment,{children:[q.jsx("button",{onClick:()=>{if(Z&&String(Sn||"termination")==="testing"){Ph();return}if(K&&String(vn||"termination")==="testing"){Jm();return}if(C&&String(Li||"termination")==="testing"){Np();return}$u(!0)},disabled:C&&String(Li||"termination")==="testing"?ce||!gr:ce||(Z&&String(Sn||"termination")==="testing"?!Fi:!1)||(K&&String(vn||"termination")==="testing"?!Co:!1)||D&&!ji||C&&String(Li||"termination")!=="testing"&&!Zi||(C&&String(Li||"termination")!=="testing"?Zi==="termination_panel"?(Oc?.terminatedCompleted||0)===0:Object.keys(Qr||{}).filter(B=>Number(Qr[B])>0).length===0:I?ys.length===0&&ba.size===0:R?ql===0:T?Fd===0:W?Ir==="tabletotable"?Qs.size===0:xh===0:K?String(vn||"termination")==="testing"?!1:u0===0:Z?String(Sn||"termination")==="testing"?!1:c0===0:w?Zp===0:mg===0),className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:Z&&String(Sn||"termination")==="testing"?Fi?"Submit (save) MV test results":"No changes to submit":K&&String(vn||"termination")==="testing"?Co?"Submit (save) LV test results":"No changes to submit":C&&String(Li||"termination")==="testing"?gr?"Submit (save) DC test results":"No changes to submit":D&&!ji?"Select MC4 Install / Cable Termination Panel Side / Cable Termination Inv. Side first":"Submit Work","aria-label":Z&&String(Sn||"termination")==="testing"||K&&String(vn||"termination")==="testing"||C&&String(Li||"termination")==="testing"?"Submit Test Results":"Submit Work",children:"Submit"}),Z&&String(Sn||"termination")==="testing"?q.jsxs(q.Fragment,{children:[q.jsx("input",{ref:Zl,type:"file",accept:".csv",style:{display:"none"},onChange:B=>{const J=B.target?.files?.[0];if(J){const at=new FileReader;at.onload=()=>{const lt=String(at.result||"");Dd(lt)},at.readAsText(J)}B.target&&(B.target.value="")}}),q.jsx("button",{onClick:()=>Zl.current?.click(),className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:"Import Test Results (CSV)","aria-label":"Import Test Results",children:"Import Test Results"}),q.jsx("button",{onClick:ug,className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:Fi?"Submit first, then export":"Export submitted test results (CSV)","aria-label":"Export Test Results",children:"Export Test Results"})]}):C&&String(Li||"termination")==="testing"?q.jsxs(q.Fragment,{children:[q.jsx("input",{ref:pu,type:"file",accept:".csv",style:{display:"none"},onChange:B=>{const J=B.target?.files?.[0];if(J){const at=new FileReader;at.onload=()=>{const lt=String(at.result||"");Us(lt,"import")},at.readAsText(J)}B.target&&(B.target.value="")}}),q.jsx("button",{onClick:()=>pu.current?.click(),className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:"Import Test Results (CSV)","aria-label":"Import Test Results",children:q.jsxs("span",{className:"flex flex-col items-center leading-[1.05]",children:[q.jsx("span",{children:"Import"}),q.jsx("span",{children:"Test Results"})]})}),q.jsx("button",{onClick:Eh,className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:gr?"Submit first, then export":"Export submitted test results (CSV)","aria-label":"Export Test Results",children:q.jsxs("span",{className:"flex flex-col items-center leading-[1.05]",children:[q.jsx("span",{children:"Export"}),q.jsx("span",{children:"Test Results"})]})})]}):K&&String(vn||"termination")==="testing"?q.jsxs(q.Fragment,{children:[q.jsx("input",{ref:zu,type:"file",accept:".csv",style:{display:"none"},onChange:B=>{const J=B.target?.files?.[0];if(J){const at=new FileReader;at.onload=()=>{const lt=String(at.result||"");fg(lt)},at.readAsText(J)}B.target&&(B.target.value="")}}),q.jsx("button",{onClick:()=>zu.current?.click(),className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:"Import Test Results (CSV)","aria-label":"Import Test Results",children:q.jsxs("span",{className:"flex flex-col items-center leading-[1.05]",children:[q.jsx("span",{children:"Import"}),q.jsx("span",{children:"Test Results"})]})}),q.jsx("button",{onClick:Gr,className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:Co?"Submit first, then export":"Export submitted test results (CSV)","aria-label":"Export Test Results",children:q.jsxs("span",{className:"flex flex-col items-center leading-[1.05]",children:[q.jsx("span",{children:"Export"}),q.jsx("span",{children:"Test Results"})]})})]}):q.jsxs(q.Fragment,{children:[q.jsx("button",{onClick:()=>bl(!0),disabled:K&&String(vn||"termination")==="testing",className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:K&&String(vn||"termination")==="testing"?"History disabled in LV_TESTING":"History","aria-label":"History",children:"History"}),!K&&q.jsx("button",{onClick:()=>{const B=String(D?ji==="termination_panel"?"MC4_TERM_PANEL":ji==="termination_inv"?"MC4_TERM_INV":"MC4_INST":R?"DATP":T?"MVFT":W?Ir==="tabletotable"?"PTEP_TT":"PTEP_PARAM":Z?"MVT_TERM":K&&String(vn||"termination")==="termination"?"LVTT_TERM":h?.key||"").toUpperCase(),J=D?(ti||[]).filter(at=>String(at?.module_key||"").toUpperCase()===B):ti;dg(J,{moduleKey:B,moduleLabel:D?ji==="termination_panel"?"Cable Termination Panel Side":ji==="termination_inv"?"Cable Termination Inv. Side":"MC4 Installation":R?"DC&AC Trench":T?"MV&Fibre Trench":W?Ir==="tabletotable"?"Table-to-Table Earthing":"Parameter Earthing":Z||K&&String(vn||"termination")==="termination"?"Cable Termination":p,unit:D?"ends":R||T?"m":W?Ir==="tabletotable"?"pcs":"m":Z||K&&String(vn||"termination")==="termination"?"cables":"m",chartSheetName:R?"DC&AC Trench Progress":T?"MV&Fibre Trench Progress":Z||K&&String(vn||"termination")==="termination"?"Cable Termination":W?Ir==="tabletotable"?"Table-to-Table Earthing":"Parameter Earthing":void 0,chartTitle:R?"DC&AC Trench Progress":T?"MV&Fibre Trench Progress":Z||K&&String(vn||"termination")==="termination"?"Cable Termination":W?Ir==="tabletotable"?"Table-to-Table Earthing":"Parameter Earthing":void 0})},disabled:K&&String(vn||"termination")==="testing"||ti.length===0,className:`${ca} w-auto min-w-14 h-6 px-2 leading-none text-[11px] font-extrabold uppercase tracking-wide`,title:K&&String(vn||"termination")==="testing"?"Export disabled in LV_TESTING":"Export Excel","aria-label":"Export Excel",children:"Export"})]})]})]})]}),I&&ul.length>0&&q.jsxs("div",{className:"fixed left-3 sm:left-5 top-[190px] z-[1190] w-[220px] border border-slate-600 bg-slate-900/95 text-white shadow-[0_10px_26px_rgba(0,0,0,0.5)] rounded",children:[q.jsx("div",{className:"border-b border-slate-700 px-3 py-2",children:q.jsx("div",{className:"text-[10px] font-extrabold uppercase tracking-wide text-slate-300",children:S?"fibre cable route and length":"mv cable route and length"})}),q.jsx("div",{className:"max-h-[280px] overflow-y-auto p-2",children:ul.map(B=>{const J=ba.has(B.key);return q.jsxs("button",{type:"button",onClick:()=>{const at=String(B.key||"");Xl(lt=>{const dt=new Set(lt);return dt.has(at)?dt.delete(at):dt.add(at),dt}),za(lt=>{const dt=new Set(lt);return dt.has(at)?dt.delete(at):dt.add(at),dt})},className:`mb-1 flex w-full items-center justify-between rounded px-2 py-1.5 text-left text-[12px] transition-colors ${J?"bg-emerald-600 text-white font-semibold":"bg-slate-800 text-slate-300 hover:bg-slate-700"}`,title:J?`${B.label} (selected - click to unselect)`:`${B.label} (click to select)`,children:[q.jsx("span",{className:"min-w-0 truncate",children:B.label}),q.jsx("span",{className:"ml-2 tabular-nums text-[11px] opacity-80",children:gt>1?`${Math.round(Number(B.length||0)/gt)}*${gt}`:`${Math.round(Number(B.length||0))}`})]},B.key)})})]}),z?q.jsxs("div",{className:"fixed right-3 sm:right-5 top-[40%] -translate-y-1/2 z-[1090] flex flex-col items-end gap-4",children:[q.jsxs("button",{type:"button",onClick:()=>{Ne(B=>!B)},"aria-pressed":ce,"aria-label":ce?"Exit Punch Mode":"Punch Mode",title:ce?"Exit Punch Mode":"Punch Mode",className:"relative inline-flex h-8 items-center justify-center border-2 border-slate-700 bg-slate-900 px-3 text-[11px] font-extrabold uppercase tracking-wide text-white hover:bg-slate-800 focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-400",children:["Punch",q.jsx("svg",{className:`note-dot absolute -right-1 -top-1 ${ce?"h-3 w-3 note-dot--active":"h-2 w-2"}`,viewBox:"0 0 12 12","aria-hidden":"true",children:q.jsx("circle",{cx:"6",cy:"6",r:"4",fill:"#e23a3a",stroke:"#7a0f0f",strokeWidth:"2"})})]}),_s.size>0&&q.jsxs("div",{className:"inline-flex h-8 items-center gap-2 border-2 border-red-700 bg-red-900/80 px-3 text-[11px] font-extrabold uppercase tracking-wide text-red-200",children:[q.jsxs("span",{children:[_s.size," Selected"]}),q.jsx("button",{type:"button",onClick:()=>Nl(),className:"text-red-400 hover:text-white ml-1",title:"Delete Selected (Delete key)",children:""}),q.jsx("button",{type:"button",onClick:()=>Qu(new Set),className:"text-red-400 hover:text-white",title:"Clear Selection (Escape)",children:""})]}),q.jsxs("div",{className:"border-2 border-slate-700 bg-slate-900 px-4 py-3 shadow-[0_10px_26px_rgba(0,0,0,0.55)]",children:[q.jsx("div",{className:"text-base font-black uppercase tracking-wide text-white",children:"Legend"}),q.jsxs("div",{className:"mt-2 border-2 border-slate-700 bg-slate-800 px-3 py-2",children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 rounded-full border-2 border-emerald-300",style:{backgroundColor:ta},"aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-400",children:"Completed"})]}),Wr.length>0&&q.jsx("div",{className:"mt-2 pt-2 border-t border-slate-600",children:Wr.map(B=>q.jsxs("div",{className:"flex items-center gap-2 mt-1 first:mt-0",children:[q.jsx("span",{className:"h-3 w-3 rounded-full border border-white/40",style:{backgroundColor:B.color},"aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-slate-300",children:B.name})]},B.id))})]})]}),q.jsxs("button",{type:"button",id:"pl-contractor-btn",onClick:()=>na(B=>!B),className:"inline-flex h-8 min-w-[120px] items-center justify-between gap-2 border-2 border-slate-700 bg-slate-900 px-3 text-[11px] font-extrabold uppercase tracking-wide text-white hover:bg-slate-800 focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-400",children:[Is&&q.jsx("span",{className:"inline-block h-3 w-3 rounded-full border border-white/40 flex-shrink-0",style:{backgroundColor:Ka(Is)?.color||"#888"}}),q.jsx("span",{className:Is?"text-white":"text-amber-400",children:"Contractor"}),q.jsx("svg",{className:"h-3 w-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}):q.jsxs("div",{className:"fixed right-3 sm:right-5 top-[40%] -translate-y-1/2 z-[1090] flex flex-col items-end gap-2",children:[q.jsxs("div",{className:"border-2 border-slate-700 bg-slate-900 px-4 py-3 shadow-[0_10px_26px_rgba(0,0,0,0.55)]",children:[q.jsx("div",{className:"text-base font-black uppercase tracking-wide text-white",children:"Legend"}),q.jsx("div",{className:"mt-2 border-2 border-slate-700 bg-slate-800 px-3 py-2",children:D?q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-white bg-white","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-white",children:"Uncompleted"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 rounded-full border-2 border-blue-700 bg-blue-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-blue-400",children:"Completed MC4"})]})]}):W?q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("svg",{width:"24",height:"12","aria-hidden":"true",children:q.jsx("line",{x1:"0",y1:"6",x2:"24",y2:"6",stroke:"#3b82f6",strokeWidth:"2",strokeDasharray:"4 3"})}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-blue-400",children:"Table to Table"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("svg",{width:"24",height:"12","aria-hidden":"true",children:q.jsx("line",{x1:"0",y1:"6",x2:"24",y2:"6",stroke:"#facc15",strokeWidth:"2"})}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-yellow-400",children:"Parameter Earthing"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("svg",{width:"24",height:"12","aria-hidden":"true",children:q.jsx("line",{x1:"0",y1:"6",x2:"24",y2:"6",stroke:"#22c55e",strokeWidth:"2"})}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-400",children:"Completed"})]})]}):R?q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("svg",{width:"24",height:"12","aria-hidden":"true",children:q.jsx("line",{x1:"0",y1:"6",x2:"24",y2:"6",stroke:ut,strokeWidth:"2"})}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:ut},children:"Uncompleted"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("svg",{width:"24",height:"12","aria-hidden":"true",children:q.jsx("line",{x1:"0",y1:"6",x2:"24",y2:"6",stroke:U,strokeWidth:"2"})}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:U},children:"Completed"})]})]}):T?q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("svg",{width:"24",height:"12","aria-hidden":"true",children:q.jsx("line",{x1:"0",y1:"6",x2:"24",y2:"6",stroke:G,strokeWidth:"2"})}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:G},children:"Uncompleted"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("svg",{width:"24",height:"12","aria-hidden":"true",children:q.jsx("line",{x1:"0",y1:"6",x2:"24",y2:"6",stroke:st,strokeWidth:"2"})}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide",style:{color:st},children:"Completed"})]})]}):Q?q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-emerald-900 bg-emerald-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-300",children:"PASSED"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-red-900 bg-red-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-red-300",children:"FAILED"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-white bg-white","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-white",children:"NOT TESTED"})]})]}):C?q.jsx(q.Fragment,{children:String(Li||"termination")==="testing"?q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-emerald-900 bg-emerald-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-300",children:"PASSED"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-red-900 bg-red-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-red-300",children:"FAILED"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-white bg-white","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-white",children:"NOT TESTED"})]})]}):Zi==="termination_panel"?q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-white bg-white","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-white",children:"Uncompleted"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 rounded-full border-2 border-emerald-700 bg-emerald-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-400",children:"Completed"})]})]}):q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-white bg-white","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-white",children:"Uncompleted"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-emerald-300 bg-emerald-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-300",children:"Completed"})]})]})}):q.jsx(q.Fragment,{children:Z?q.jsx(q.Fragment,{children:String(Sn||"termination")==="termination"?q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-white bg-white","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-white",children:"Unterminated"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-emerald-300 bg-emerald-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-300",children:"Terminated"})]})]}):q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-emerald-300 bg-emerald-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-300",children:"PASSED"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-red-300 bg-red-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-red-300",children:"FAILED"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-white bg-white","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-white",children:"NOT TESTED"})]})]})}):K?q.jsx(q.Fragment,{children:String(vn||"termination")==="termination"?q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-white bg-white","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-white",children:"Uncompleted"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-emerald-300 bg-emerald-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-300",children:"Completed"})]})]}):q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-emerald-300 bg-emerald-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-300",children:"PASSED"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-red-300 bg-red-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-red-300",children:"FAILED"})]})]})}):F?q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-red-300 bg-red-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-red-300",children:"Uncompleted"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-emerald-300 bg-emerald-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-300",children:"Completed"})]})]}):q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-white bg-white","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-white",children:"Uncompleted"})]}),q.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[q.jsx("span",{className:"h-3 w-3 border-2 border-emerald-300 bg-emerald-500","aria-hidden":"true"}),q.jsx("span",{className:"text-[11px] font-bold uppercase tracking-wide text-emerald-300",children:"Completed"})]})]})})})]}),q.jsx("a",{href:Vh||h.linkPath,target:"_blank",rel:"noreferrer",className:"inline-flex h-6 items-center justify-center border-2 border-slate-700 bg-slate-900 px-2 text-[10px] font-extrabold uppercase tracking-wide text-white hover:bg-slate-800 focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-400",title:"Open Original DWG",children:"Original DWG"}),D&&Sd?q.jsx("div",{className:"mt-1 max-w-[220px] border border-amber-500/70 bg-amber-950/30 px-2 py-1 text-[10px] font-bold text-amber-200",children:Sd}):null,ie&&q.jsxs("button",{type:"button",onClick:()=>Ct(B=>!B),className:"inline-flex h-6 items-center justify-center border-2 border-slate-700 bg-slate-900 px-2 text-[10px] font-extrabold uppercase tracking-wide text-white hover:bg-slate-800 focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-400",title:"Toggle string text",children:["TEXT ",re?"ON":"OFF"]})]}),!z&&q.jsx("div",{className:"fixed right-3 sm:right-5 top-[20%] z-[1090] note-btn-wrap flex flex-col items-end gap-1",children:q.jsxs("button",{type:"button",onClick:()=>{Ne(B=>{const J=!B;return J||Yr(new Set),J})},"aria-pressed":ce,"aria-label":ce?"Exit Notes":"Notes",title:ce?"Exit Notes":"Notes",className:"relative inline-flex h-6 items-center justify-center border-2 border-slate-700 bg-slate-900 px-2 text-[10px] font-extrabold uppercase tracking-wide text-white hover:bg-slate-800 focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-400",children:["Note",q.jsx("svg",{className:`note-dot absolute -right-1 -top-1 ${ce?"h-3 w-3 note-dot--active":"h-2 w-2"}`,viewBox:"0 0 12 12","aria-hidden":"true",children:q.jsx("circle",{cx:"6",cy:"6",r:"4",fill:"#e23a3a",stroke:"#7a0f0f",strokeWidth:"2"})})]})})]})}),q.jsx("div",{className:"w-full border-0 bg-[#0b1220] py-2 text-center text-base font-black uppercase tracking-[0.22em] text-slate-200",children:p}),q.jsx("div",{className:"map-wrapper",children:q.jsx("div",{id:"map"})}),Z&&String(Sn||"termination")==="testing"&&To?q.jsxs("div",{style:{position:"fixed",left:Math.min(window.innerWidth-280,Math.max(8,(To.x||0)+10)),top:Math.min(window.innerHeight-220,Math.max(8,(To.y||0)+10)),zIndex:1400},className:"w-[260px] border-2 border-slate-700 bg-slate-900 px-3 py-3 shadow-[0_10px_26px_rgba(0,0,0,0.55)]",children:[q.jsxs("div",{className:"flex items-start justify-between gap-2",children:[q.jsxs("div",{className:"min-w-0",children:[q.jsx("div",{className:"text-[11px] font-black uppercase tracking-wide text-white",children:"MV TESTING"}),q.jsx("div",{className:"mt-1 text-sm font-extrabold text-slate-100 truncate",children:To.stationLabel||To.fromKey||"Substation"}),(()=>{const B=Mn(To.fromKey),J=String(Ii.current?.[B]||"").trim();return J?q.jsxs("div",{className:"mt-0.5 text-[11px] font-bold text-slate-300 truncate",children:["To: ",J]}):null})()]}),q.jsx("button",{type:"button",onClick:()=>Es(null),className:"inline-flex h-6 w-6 items-center justify-center border-2 border-slate-700 bg-slate-800 text-xs font-black text-white hover:bg-slate-700",title:"Close","aria-label":"Close",children:""})]}),q.jsx("div",{className:"mt-3 space-y-2",children:["L1","L2","L3"].map(B=>{const J=Mn(To.fromKey),at=yn.current?.[J]?.[B],lt=at&&typeof at=="object"?at:{value:"",status:"N/A"},xt=String(lt?.status||"N/A").trim().toUpperCase(),yt=String(lt?.value||"").trim(),ht=xt==="PASS",mt=!xt||xt==="N/A"||xt==="NA";return q.jsxs("div",{className:"flex items-center justify-between border border-slate-700 bg-slate-800 px-2 py-1.5",children:[q.jsx("span",{className:"text-[11px] font-black uppercase tracking-wide text-slate-200",children:B}),q.jsxs("span",{className:"ml-2 flex items-center gap-2",children:[q.jsx("input",{type:"text",value:yt,onChange:vt=>{Lh(J,B,{value:vt.target.value})},placeholder:"Value",className:`h-7 w-[110px] border border-slate-700 bg-slate-900 px-2 text-[12px] font-extrabold tabular-nums outline-none focus:border-amber-400 ${ht?"text-emerald-200":mt?"text-slate-200":"text-red-200"}`}),q.jsxs("select",{value:ht?"PASS":mt?"N/A":"failed",onChange:vt=>{const wt=String(vt.target.value||"N/A");Lh(J,B,{status:wt})},className:`h-7 w-[80px] border border-slate-700 bg-slate-900 px-2 text-[11px] font-black uppercase tracking-wide outline-none focus:border-amber-400 ${ht?"text-emerald-300":mt?"text-slate-300":"text-red-300"}`,"aria-label":`${B} status`,children:[q.jsx("option",{value:"N/A",children:"N/A"}),q.jsx("option",{value:"PASS",children:"PASS"}),q.jsx("option",{value:"failed",children:"FAIL"})]})]})]},B)})})]}):null,K&&Ui?q.jsxs("div",{style:{position:"fixed",left:Math.min(window.innerWidth-300,Math.max(8,(Ui.x||0)+10)),top:Math.min(window.innerHeight-320,Math.max(8,(Ui.y||0)+10)),zIndex:1400},className:"w-[280px] border-2 border-slate-700 bg-slate-900 px-3 py-3 shadow-[0_10px_26px_rgba(0,0,0,0.55)]",children:[q.jsxs("div",{className:"flex items-start justify-between gap-2",children:[q.jsxs("div",{className:"min-w-0",children:[q.jsx("div",{className:"text-[11px] font-black uppercase tracking-wide text-white",children:Ui.mode==="termination"||Ui.mode==="sub_termination"?"LV Termination":"LV Testing"}),q.jsx("div",{className:"mt-1 text-sm font-extrabold text-slate-100 truncate",children:Ui.mode==="sub_termination"?Ui.subId||"SUB":Ui.invId||"Inverter"})]}),q.jsx("button",{type:"button",onClick:()=>Lr(null),className:"inline-flex h-6 w-6 items-center justify-center border-2 border-slate-700 bg-slate-800 text-xs font-black text-white hover:bg-slate-700",title:"Close","aria-label":"Close",children:""})]}),Ui.mode==="termination"?(()=>{const B=String(Ui.invIdNorm||""),J=Math.max(0,Math.min(3,Number(kn?.[B]??0))),at=Math.max(0,Math.min(3,Number(Ui.draft??J))),lt=mt=>Lr(vt=>vt&&{...vt,draft:Math.max(0,Math.min(3,mt))}),dt=mt=>{try{const wt=ga.current?.value;if(wt==null||wt==="")return mt;const Nt=parseInt(String(wt),10);return Number.isFinite(Nt)?Math.max(0,Math.min(3,Nt)):mt}catch{return mt}},xt=mt=>{if(!B)return;const vt=Math.max(0,Math.min(3,Number(mt??0))),wt=Math.max(0,Math.min(3,Number(En.current?.[B]??0)));vt!==wt&&(ld(B,wt,vt),xn(Nt=>{const Rt=Nt&&typeof Nt=="object"?{...Nt}:{};return Rt[B]=vt,Rt}))},yt=(()=>{const mt=Nr.current||{};return Object.keys(mt).map(vt=>({norm:vt,display:String(mt[vt]?.displayId||mt[vt]?.raw||vt||"").trim()||String(vt)})).filter(vt=>vt.norm).sort((vt,wt)=>vt.display.localeCompare(wt.display,void 0,{numeric:!0,sensitivity:"base"}))})(),ht=mt=>{const vt=yt;if(!vt.length||!B)return;const wt={...En.current||{},[B]:Math.max(0,Math.min(3,Number(mt??at)||0))},Nt=vt.findIndex(jt=>jt.norm===B),Rt=Nt>=0?Nt:0;let qt=null;for(let jt=1;jt<=vt.length;jt++){const Lt=vt[(Rt+jt)%vt.length],Tt=Math.max(0,Math.min(3,Number(wt?.[Lt.norm]??0)));if(Tt!==3){qt={norm:Lt.norm,display:Lt.display,draft:Tt};break}}if(!qt){Lr(null);return}Lr(jt=>jt&&{...jt,mode:"termination",invId:qt.display,invIdNorm:qt.norm,draft:qt.draft})};return q.jsxs("div",{className:"mt-3",children:[q.jsx("div",{className:"border border-slate-700 bg-slate-800 px-2 py-2",children:q.jsx("div",{className:"mt-0 flex items-center justify-end gap-2",children:q.jsx("div",{className:"flex items-center gap-1",children:q.jsx("input",{ref:ga,type:"number",min:0,max:3,step:1,value:at,onKeyDown:mt=>{if(mt.key!=="Enter")return;try{mt.preventDefault(),mt.stopPropagation()}catch{}const vt=dt(at);xt(vt),Lr(null)},onChange:mt=>{const vt=mt.target.value;if(vt==="")return;const wt=Math.max(0,Math.min(3,parseInt(vt,10)));Number.isFinite(wt)&&lt(wt)},className:`w-14 h-8 border-2 bg-slate-900 px-2 text-center text-[13px] font-black tabular-nums outline-none ${at===3?"border-emerald-700 text-emerald-200":"border-red-700 text-red-200"}`,title:"Enter 0..3"})})})}),q.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[q.jsx("button",{type:"button",onClick:()=>{const mt=dt(at);xt(mt),ht(mt)},className:"flex-1 h-8 border-2 text-[11px] font-extrabold uppercase tracking-wide border-slate-700 bg-slate-900 text-slate-200 hover:bg-slate-800",title:"Apply and open next inverter",children:"Next"}),q.jsx("button",{type:"button",onClick:()=>{if(!B)return;const mt=dt(at);xt(mt),Lr(null)},className:"flex-1 h-8 border-2 text-[11px] font-extrabold uppercase tracking-wide border-emerald-700 bg-emerald-950/30 text-emerald-200 hover:bg-emerald-950/40",title:"Apply",children:"OK"})]})]})})():Ui.mode==="sub_termination"?(()=>{const J=String(Ui.subNorm||""),at=Math.max(0,Number(Ui.max??0)||0),lt=Number(Vr.current?.[J]??0),dt=Math.max(0,Math.min(at,Number.isFinite(lt)?lt:0)),xt=Math.max(0,Math.min(at,Number(Ui.draft??dt)||0)),yt=Rt=>Lr(qt=>qt&&{...qt,draft:Math.max(0,Math.min(at,Number(Rt)||0))}),ht=Rt=>{if(!J||!(at>0))return;const qt=Math.max(0,Math.min(at,Number(Rt??0)||0)),jt=Math.max(0,Math.min(at,Number(Vr.current?.[J]??0)||0));qt!==jt&&Ar(Lt=>{const Tt=Lt&&typeof Lt=="object"?{...Lt}:{};return Tt[J]=qt,Tt})},mt=xt,vt=at>0&&mt>=at,wt=mt*3,Nt=at*3;return q.jsxs("div",{className:"mt-3",children:[q.jsxs("div",{className:"border border-slate-700 bg-slate-800 px-2 py-2",children:[q.jsxs("div",{className:"flex items-center justify-between",children:[q.jsx("span",{className:"text-[11px] font-black uppercase tracking-wide text-slate-300",children:"Progress"}),q.jsxs("span",{className:`text-[11px] font-black uppercase tracking-wide ${vt?"text-emerald-300":"text-red-300"}`,children:[wt,"/",Nt]})]}),q.jsx("div",{className:"mt-2 flex items-center justify-end gap-2",children:q.jsx("input",{type:"number",min:0,max:at,step:1,value:xt,onKeyDown:Rt=>{if(Rt.key==="Enter"){try{Rt.preventDefault(),Rt.stopPropagation()}catch{}ht(xt),Lr(null)}},onChange:Rt=>{const qt=Rt.target.value;if(qt==="")return;const jt=Math.max(0,Math.min(at,parseInt(qt,10)));Number.isFinite(jt)&&yt(jt)},className:`w-20 h-8 border-2 bg-slate-900 px-2 text-center text-[13px] font-black tabular-nums outline-none ${vt?"border-emerald-700 text-emerald-200":"border-red-700 text-red-200"}`,title:`Enter 0..${at}`})})]}),q.jsx("div",{className:"mt-3 flex items-center gap-2",children:q.jsx("button",{type:"button",onClick:()=>{ht(xt),Lr(null)},className:"flex-1 h-8 border-2 border-emerald-700 bg-emerald-950/30 text-[11px] font-extrabold uppercase tracking-wide text-emerald-200 hover:bg-emerald-950/40",title:"Apply",children:"OK"})})]})})():q.jsx("div",{className:"mt-3 space-y-2",children:["L1","L2","L3"].map(B=>{const J=Mn(Ui.invIdNorm),at=Gn.current?.[J]?.[B],lt=at&&typeof at=="object"?at:{value:"",status:"N/A"},xt=String(lt?.status||"N/A").trim().toUpperCase(),yt=String(lt?.value||"").trim(),ht=xt==="PASS",mt=!xt||xt==="N/A"||xt==="NA";return q.jsxs("div",{className:"flex items-center justify-between border border-slate-700 bg-slate-800 px-2 py-1.5",children:[q.jsx("span",{className:"text-[11px] font-black uppercase tracking-wide text-slate-200",children:B}),q.jsxs("span",{className:"ml-2 flex items-center gap-2",children:[q.jsx("input",{type:"text",value:yt,onChange:vt=>{Up(J,B,{value:vt.target.value})},placeholder:"Value",className:`h-7 w-[110px] border border-slate-700 bg-slate-900 px-2 text-[12px] font-extrabold tabular-nums outline-none focus:border-amber-400 ${ht?"text-emerald-200":mt?"text-slate-200":"text-red-200"}`}),q.jsxs("select",{value:ht?"PASS":mt?"N/A":"failed",onChange:vt=>{const wt=String(vt.target.value||"N/A");Up(J,B,{status:wt})},className:`h-7 w-[80px] border border-slate-700 bg-slate-900 px-2 text-[11px] font-black uppercase tracking-wide outline-none focus:border-amber-400 ${ht?"text-emerald-300":mt?"text-slate-300":"text-red-300"}`,"aria-label":`${B} status`,children:[q.jsx("option",{value:"N/A",children:"N/A"}),q.jsx("option",{value:"PASS",children:"PASS"}),q.jsx("option",{value:"failed",children:"FAIL"})]})]})]},B)})})]}):null,Q&&Rr?q.jsxs("div",{style:{position:"fixed",left:Math.min(window.innerWidth-300,Math.max(8,(Rr.x||0)+10)),top:Math.min(window.innerHeight-240,Math.max(8,(Rr.y||0)+10)),zIndex:1400},className:"w-[280px] border-2 border-slate-700 bg-slate-900 px-3 py-3 shadow-[0_10px_26px_rgba(0,0,0,0.55)]",children:[q.jsxs("div",{className:"flex items-start justify-between gap-2",children:[q.jsxs("div",{className:"min-w-0",children:[q.jsx("div",{className:"text-[11px] font-black uppercase tracking-wide text-white",children:"DC Cable Testing"}),q.jsx("div",{className:"mt-1 text-sm font-extrabold text-slate-100 truncate",children:Rr.displayId||Rr.idNorm})]}),q.jsx("button",{type:"button",onClick:()=>rs(null),className:"inline-flex h-6 w-6 items-center justify-center border-2 border-slate-700 bg-slate-800 text-xs font-black text-white hover:bg-slate-700",title:"Close","aria-label":"Close",children:""})]}),q.jsxs("div",{className:"mt-3 space-y-2",children:[[{key:"plus",label:"Ins. Res (+)"},{key:"minus",label:"Ins. Res (-)"}].map(B=>{const J=B.key==="plus"?String(Rr.draftPlus??""):String(Rr.draftMinus??"");return B.key,Rr.draftStatus,q.jsxs("div",{className:"flex items-center justify-between border border-slate-700 bg-slate-800 px-2 py-1.5",children:[q.jsx("span",{className:"text-[11px] font-black uppercase tracking-wide text-slate-200",children:B.label}),q.jsx("input",{type:"text",value:J,onChange:at=>{const lt=at.target.value;rs(ht=>ht&&(B.key==="plus"?{...ht,draftPlus:lt}:{...ht,draftMinus:lt}));const dt=String(Rr.idNorm||"");if(!dt)return;const xt=di.current||{},yt=xt[dt]||{};xt[dt]={...yt,plus:B.key==="plus"?lt:yt.plus??"0",minus:B.key==="minus"?lt:yt.minus??"0",status:xi(yt.status||yt.remarkRaw)||null,remarkRaw:yt.remarkRaw||"",originalId:yt.originalId||ci(dt,"")},di.current=xt,vi(!0),gs.current=null;try{localStorage.removeItem("cew:dcct:test_results_submitted")}catch{}},className:"h-7 w-[110px] border border-slate-700 bg-slate-900 px-2 text-[12px] font-extrabold tabular-nums text-slate-200 outline-none focus:border-amber-400",placeholder:"Value"})]},B.key)}),q.jsxs("div",{className:"flex items-center justify-between border border-slate-700 bg-slate-800 px-2 py-1.5",children:[q.jsx("span",{className:"text-[11px] font-black uppercase tracking-wide text-slate-200",children:"Status"}),q.jsxs("select",{value:Rr.draftStatus==="passed"?"PASSED":Rr.draftStatus==="failed"?"FAILED":"",onChange:B=>{const J=String(B.target.value||""),at=J==="PASSED"?"passed":J==="FAILED"?"failed":null,lt=String(Rr.idNorm||"");if(!lt)return;rs(yt=>yt&&{...yt,draftStatus:at});const dt=di.current||{},xt=dt[lt]||{};dt[lt]={...xt,plus:xt.plus??"0",minus:xt.minus??"0",status:at,remarkRaw:at==="passed"?"PASSED":at==="failed"?"FAILED":"",originalId:xt.originalId||ci(lt,"")},di.current=dt,mr(yt=>{const ht={...yt||{}};return at==="passed"?ht[lt]="passed":at==="failed"?ht[lt]="failed":delete ht[lt],ht}),vi(!0),gs.current=null;try{localStorage.removeItem("cew:dcct:test_results_submitted")}catch{}Zo(yt=>yt+1)},className:`h-7 w-[140px] border border-slate-700 bg-slate-900 px-2 text-[11px] font-black uppercase tracking-wide outline-none focus:border-amber-400 ${Rr.draftStatus==="passed"?"text-emerald-300":Rr.draftStatus==="failed"?"text-red-300":"text-white"}`,"aria-label":"Status",children:[q.jsx("option",{value:"",children:"NOT TESTED"}),q.jsx("option",{value:"PASSED",children:"PASSED"}),q.jsx("option",{value:"FAILED",children:"FAILED"})]})]})]})]}):null,C&&Qi?q.jsxs("div",{style:{position:"fixed",left:Math.min(window.innerWidth-300,Math.max(8,(Qi.x||0)+10)),top:Math.min(window.innerHeight-240,Math.max(8,(Qi.y||0)+10)),zIndex:1400},className:"w-[280px] border-2 border-slate-700 bg-slate-900 px-3 py-3 shadow-[0_10px_26px_rgba(0,0,0,0.55)]",children:[q.jsxs("div",{className:"flex items-start justify-between gap-2",children:[q.jsxs("div",{className:"min-w-0",children:[q.jsx("div",{className:"text-[11px] font-black uppercase tracking-wide text-white",children:"DC Cable Testing"}),q.jsx("div",{className:"mt-1 text-sm font-extrabold text-slate-100 truncate",children:Qi.displayId||Qi.idNorm})]}),q.jsx("button",{type:"button",onClick:()=>Fs(null),className:"inline-flex h-6 w-6 items-center justify-center border-2 border-slate-700 bg-slate-800 text-xs font-black text-white hover:bg-slate-700",title:"Close","aria-label":"Close",children:""})]}),q.jsxs("div",{className:"mt-3 space-y-2",children:[[{key:"plus",label:"Ins. Res (+)"},{key:"minus",label:"Ins. Res (-)"}].map(B=>{const J=B.key==="plus"?String(Qi.draftPlus??""):String(Qi.draftMinus??"");return q.jsxs("div",{className:"flex items-center justify-between border border-slate-700 bg-slate-800 px-2 py-1.5",children:[q.jsx("span",{className:"text-[11px] font-black uppercase tracking-wide text-slate-200",children:B.label}),q.jsx("input",{type:"text",value:J,onChange:at=>{const lt=at.target.value;Fs(ht=>ht&&(B.key==="plus"?{...ht,draftPlus:lt}:{...ht,draftMinus:lt}));const dt=String(Qi.idNorm||"");if(!dt)return;const xt=Yi.current||{},yt=xt[dt]||{};xt[dt]={...yt,plus:B.key==="plus"?lt:yt.plus??"0",minus:B.key==="minus"?lt:yt.minus??"0",status:Ei(yt.status||yt.remarkRaw)||null,remarkRaw:yt.remarkRaw||"",originalId:yt.originalId||rl(dt,"")},Yi.current=xt,Ki(!0),eo.current=null;try{localStorage.removeItem("cew:dctt:test_results_submitted")}catch{}},className:"h-7 w-[110px] border border-slate-700 bg-slate-900 px-2 text-[12px] font-extrabold tabular-nums text-slate-200 outline-none focus:border-amber-400",placeholder:"Value"})]},B.key)}),q.jsxs("div",{className:"flex items-center justify-between border border-slate-700 bg-slate-800 px-2 py-1.5",children:[q.jsx("span",{className:"text-[11px] font-black uppercase tracking-wide text-slate-200",children:"Status"}),q.jsxs("select",{value:Qi.draftStatus==="passed"?"PASSED":Qi.draftStatus==="failed"?"FAILED":"",onChange:B=>{const J=String(B.target.value||""),at=J==="PASSED"?"passed":J==="FAILED"?"failed":null,lt=String(Qi.idNorm||"");if(!lt)return;Fs(yt=>yt&&{...yt,draftStatus:at});const dt=Yi.current||{},xt=dt[lt]||{};dt[lt]={...xt,plus:xt.plus??"0",minus:xt.minus??"0",status:at,remarkRaw:at==="passed"?"PASSED":at==="failed"?"FAILED":"",originalId:xt.originalId||rl(lt,"")},Yi.current=dt,Sf(yt=>{const ht={...yt||{}};return at==="passed"?ht[lt]="passed":at==="failed"?ht[lt]="failed":delete ht[lt],ht}),Ki(!0),eo.current=null;try{localStorage.removeItem("cew:dctt:test_results_submitted")}catch{}Zo(yt=>yt+1)},className:`h-7 w-[140px] border border-slate-700 bg-slate-900 px-2 text-[11px] font-black uppercase tracking-wide outline-none focus:border-amber-400 ${Qi.draftStatus==="passed"?"text-emerald-300":Qi.draftStatus==="failed"?"text-red-300":"text-white"}`,"aria-label":"Status",children:[q.jsx("option",{value:"",children:"NOT TESTED"}),q.jsx("option",{value:"PASSED",children:"PASSED"}),q.jsx("option",{value:"FAILED",children:"FAILED"})]})]})]})]}):null,D&&Tc?q.jsxs("div",{style:{position:"fixed",left:Math.min(window.innerWidth-320,Math.max(8,(Tc.x||0)+10)),top:Math.min(window.innerHeight-260,Math.max(8,(Tc.y||0)+10)),zIndex:1400},className:"w-[300px] border-2 border-slate-700 bg-slate-900 px-3 py-3 shadow-[0_10px_26px_rgba(0,0,0,0.55)]",children:[q.jsxs("div",{className:"flex items-start justify-between gap-2",children:[q.jsxs("div",{className:"min-w-0",children:[q.jsx("div",{className:"text-[11px] font-black uppercase tracking-wide text-white",children:"DC Cable Termination"}),q.jsx("div",{className:"mt-1 text-sm font-extrabold text-slate-100 truncate",children:Tc.invId||"Inverter"})]}),q.jsx("button",{type:"button",onClick:()=>vf(null),className:"inline-flex h-6 w-6 items-center justify-center border-2 border-slate-700 bg-slate-800 text-xs font-black text-white hover:bg-slate-700",title:"Close","aria-label":"Close",children:""})]}),(()=>{const B=Mn(Tc.invIdNorm||""),J=Math.max(0,Number(Tc.max??0)||0),at=Math.max(0,Number(cu?.[B]??0)||0),lt=Math.max(0,Math.min(J>0?J:999999,Number(Tc.draft??at)||0)),dt=J>0&&lt>=J,xt=ht=>vf(mt=>mt&&{...mt,draft:Math.max(0,Math.min(J>0?J:999999,Number(ht)||0))}),yt=ht=>{if(!B)return;const mt=Math.max(0,Math.min(J>0?J:999999,Number(ht??0)||0));Sc(vt=>{const wt=vt&&typeof vt=="object"?{...vt}:{};return wt[B]=mt,wt})};return q.jsxs("div",{className:"mt-3",children:[q.jsxs("div",{className:"border border-slate-700 bg-slate-800 px-2 py-2",children:[q.jsxs("div",{className:"flex items-center justify-between",children:[q.jsx("span",{className:"text-[11px] font-black uppercase tracking-wide text-slate-300",children:"Progress"}),q.jsxs("span",{className:`text-[11px] font-black uppercase tracking-wide ${dt?"text-emerald-300":"text-red-300"}`,children:[lt,"/",J||""]})]}),q.jsx("div",{className:"mt-2 flex items-center justify-end gap-2",children:q.jsx("input",{ref:kd,type:"number",min:0,max:J||void 0,step:1,value:lt,onFocus:ht=>{try{ht.target.select?.()}catch{}},onClick:ht=>{try{ht.target.select?.()}catch{}},onKeyDown:ht=>{if(ht.key==="Enter"){try{ht.preventDefault(),ht.stopPropagation()}catch{}yt(lt),vf(null)}},onChange:ht=>{const mt=ht.target.value;if(mt==="")return;const vt=parseInt(mt,10);Number.isFinite(vt)&&xt(vt)},className:`w-24 h-8 border-2 bg-slate-900 px-2 text-center text-[13px] font-black tabular-nums outline-none ${dt?"border-emerald-700 text-emerald-200":"border-red-700 text-red-200"}`,title:J>0?`Enter 0..${J}`:"Max not found in dc_strings.csv"})})]}),q.jsx("div",{className:"mt-3 flex items-center gap-2",children:q.jsx("button",{type:"button",onClick:()=>{yt(lt),vf(null)},className:"flex-1 h-8 border-2 border-emerald-700 bg-emerald-950/30 text-[11px] font-extrabold uppercase tracking-wide text-emerald-200 hover:bg-emerald-950/40",title:"Apply",children:"OK"})})]})})()]}):null,C&&Ho?q.jsxs("div",{style:{position:"fixed",left:Math.min(window.innerWidth-320,Math.max(8,(Ho.x||0)+10)),top:Math.min(window.innerHeight-260,Math.max(8,(Ho.y||0)+10)),zIndex:1400},className:"w-[300px] border-2 border-slate-700 bg-slate-900 px-3 py-3 shadow-[0_10px_26px_rgba(0,0,0,0.55)]",children:[q.jsxs("div",{className:"flex items-start justify-between gap-2",children:[q.jsxs("div",{className:"min-w-0",children:[q.jsx("div",{className:"text-[11px] font-black uppercase tracking-wide text-white",children:"DC Cable Termination"}),q.jsx("div",{className:"mt-1 text-sm font-extrabold text-slate-100 truncate",children:Ho.invId||"Inverter"})]}),q.jsx("button",{type:"button",onClick:()=>Vo(null),className:"inline-flex h-6 w-6 items-center justify-center border-2 border-slate-700 bg-slate-800 text-xs font-black text-white hover:bg-slate-700",title:"Close","aria-label":"Close",children:""})]}),(()=>{const B=Mn(Ho.invIdNorm||""),J=Math.max(0,Number(Ho.max??0)||0),at=Math.max(0,Number(Qr?.[B]??0)||0),lt=Math.max(0,Math.min(J>0?J:999999,Number(Ho.draft??at)||0)),dt=J>0&&lt>=J,xt=ht=>Vo(mt=>mt&&{...mt,draft:Math.max(0,Math.min(J>0?J:999999,Number(ht)||0))}),yt=ht=>{if(!B)return;const mt=Math.max(0,Math.min(J>0?J:999999,Number(ht??0)||0));Nd(vt=>{const wt=vt&&typeof vt=="object"?{...vt}:{};return wt[B]=mt,wt})};return q.jsxs("div",{className:"mt-3",children:[q.jsxs("div",{className:"border border-slate-700 bg-slate-800 px-2 py-2",children:[q.jsxs("div",{className:"flex items-center justify-between",children:[q.jsx("span",{className:"text-[11px] font-black uppercase tracking-wide text-slate-300",children:"Progress"}),q.jsxs("span",{className:`text-[11px] font-black uppercase tracking-wide ${dt?"text-emerald-300":"text-red-300"}`,children:[lt,"/",J||""]})]}),q.jsx("div",{className:"mt-2 flex items-center justify-end gap-2",children:q.jsx("input",{ref:Mp,type:"number",min:0,max:J||void 0,step:1,value:lt,onFocus:ht=>{try{ht.target.select?.()}catch{}},onClick:ht=>{try{ht.target.select?.()}catch{}},onKeyDown:ht=>{if(ht.key==="Enter"){try{ht.preventDefault(),ht.stopPropagation()}catch{}yt(lt),Vo(null)}},onChange:ht=>{const mt=ht.target.value;if(mt==="")return;const vt=parseInt(mt,10);Number.isFinite(vt)&&xt(vt)},className:`w-24 h-8 border-2 bg-slate-900 px-2 text-center text-[13px] font-black tabular-nums outline-none ${dt?"border-emerald-700 text-emerald-200":"border-red-700 text-red-200"}`,title:J>0?`Enter 0..${J}`:"Max not found in CSV"})})]}),q.jsx("div",{className:"mt-3 flex items-center gap-2",children:q.jsx("button",{type:"button",onClick:()=>{yt(lt),Vo(null)},className:"flex-1 h-8 border-2 border-emerald-700 bg-emerald-950/30 text-[11px] font-extrabold uppercase tracking-wide text-emerald-200 hover:bg-emerald-950/40",title:"Apply",children:"OK"})})]})})()]}):null,Z&&String(Sn||"termination")==="termination"&&Xr?q.jsxs("div",{style:{position:"fixed",left:Math.min(window.innerWidth-300,Math.max(8,(Xr.x||0)+10)),top:Math.min(window.innerHeight-220,Math.max(8,(Xr.y||0)+10)),zIndex:1400},className:"w-[280px] border-2 border-slate-700 bg-slate-900 px-3 py-3 shadow-[0_10px_26px_rgba(0,0,0,0.55)]",children:[q.jsxs("div",{className:"flex items-start justify-between gap-2",children:[q.jsxs("div",{className:"min-w-0",children:[q.jsx("div",{className:"text-[11px] font-black uppercase tracking-wide text-white",children:"Termination"}),q.jsx("div",{className:"mt-1 text-sm font-extrabold text-slate-100 truncate",children:Xr.stationLabel})]}),q.jsx("button",{type:"button",onClick:()=>_i(null),className:"inline-flex h-6 w-6 items-center justify-center border-2 border-slate-700 bg-slate-800 text-xs font-black text-white hover:bg-slate-700",title:"Close","aria-label":"Close",children:""})]}),(()=>{const B=String(Xr.stationNorm||""),J=wn(B),at=bn(B,Bi?.[B]??0),lt=bn(B,Xr.draft??at),dt=!!J&&at===J,xt=!!J&&lt>=J,yt=wt=>_i(Nt=>Nt&&{...Nt,draft:bn(B,wt)}),ht=wt=>{if(!B)return;const Nt=bn(B,wt??0),Rt=bn(B,qe.current?.[B]??0);Nt!==Rt&&(Qc(B,Rt,Nt),ss(qt=>{const jt=qt&&typeof qt=="object"?{...qt}:{};return jt[B]=Nt,jt}))},mt=(()=>{const Nt=fn(B).startsWith("ss")?"ss":"sub",Rt=qt=>({norm:`${Nt}${String(qt).padStart(2,"0")}`,label:`${Nt.toUpperCase()}${qt}`});return[Rt(1),Rt(2),Rt(3),Rt(4),Rt(5),Rt(6),{norm:"css",label:"CSS"}]})(),vt=()=>{const wt=mt;if(!wt.length||!B)return;const Nt={...qe.current||{},[B]:lt},Rt=wt.findIndex(Lt=>Lt.norm===B),qt=Rt>=0?Rt:0;let jt=null;for(let Lt=1;Lt<=wt.length;Lt++){const Tt=wt[(qt+Lt)%wt.length],Ot=bn(Tt.norm,Nt?.[Tt.norm]??0),It=wn(Tt.norm);if(!(It>0&&Ot===It)){jt={norm:Tt.norm,label:Tt.label,draft:Ot};break}}if(!jt){_i(null);return}_i(Lt=>Lt&&{...Lt,stationNorm:jt.norm,stationLabel:jt.label,draft:jt.draft})};return q.jsxs("div",{className:"mt-3",children:[q.jsxs("div",{className:"border border-slate-700 bg-slate-800 px-2 py-2",children:[dt?q.jsx("div",{className:"flex items-center justify-end",children:q.jsx("span",{className:"text-[11px] font-black uppercase tracking-wide text-emerald-300",children:"LOCKED"})}):null,q.jsxs("div",{className:"flex items-center justify-between",children:[q.jsx("span",{className:"text-[11px] font-black uppercase tracking-wide text-slate-300",children:"Progress"}),q.jsxs("span",{className:`text-[11px] font-black uppercase tracking-wide tabular-nums ${xt?"text-emerald-300":"text-slate-200"}`,children:[lt,"/",J]})]}),q.jsx("div",{className:"mt-2 flex items-center justify-end gap-2",children:q.jsx("div",{className:"flex items-center gap-1",children:q.jsx("input",{type:"number",min:0,max:J||0,step:1,value:lt,disabled:dt,onKeyDown:wt=>{if(wt.key==="Enter"){try{wt.preventDefault(),wt.stopPropagation()}catch{}dt||(ht(lt),_i(null))}},onChange:wt=>{const Nt=wt.target.value;if(Nt==="")return;const Rt=bn(B,parseInt(Nt,10));Number.isFinite(Rt)&&yt(Rt)},className:`w-14 h-8 border-2 bg-slate-900 px-2 text-center text-[13px] font-black tabular-nums outline-none ${dt?"border-slate-700 text-slate-500 cursor-not-allowed":J>0&&lt===J?"border-emerald-700 text-emerald-200":"border-red-700 text-red-200"}`,title:J?`Enter 0..${J}`:"Enter value"})})})]}),q.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[q.jsx("button",{type:"button",disabled:dt,onClick:()=>{dt||(ht(lt),vt())},className:`flex-1 h-8 border-2 text-[11px] font-extrabold uppercase tracking-wide ${dt?"border-slate-700 bg-slate-900/40 text-slate-500 cursor-not-allowed":"border-slate-700 bg-slate-900 text-slate-200 hover:bg-slate-800"}`,title:dt?J?`Locked at ${J}/${J}`:"Locked":"Apply and open next station",children:"Next"}),q.jsx("button",{type:"button",disabled:dt,onClick:()=>{B&&(ht(lt),_i(null))},className:`flex-1 h-8 border-2 text-[11px] font-extrabold uppercase tracking-wide ${dt?"border-slate-700 bg-slate-900/40 text-slate-500 cursor-not-allowed":"border-emerald-700 bg-emerald-950/30 text-emerald-200 hover:bg-emerald-950/40"}`,title:"Apply",children:"OK"})]})]})})()]}):null,r,ka&&q.jsx("div",{className:"note-popup-overlay",onClick:()=>{Il(null),Ol(""),Ja(""),Ma(null),zr("")},children:q.jsxs("div",{className:"note-popup",onClick:B=>B.stopPropagation(),children:[q.jsxs("div",{className:"note-popup-header",children:[q.jsxs("h3",{children:[q.jsxs("svg",{viewBox:"0 0 24 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[q.jsx("defs",{children:q.jsxs("linearGradient",{id:"popupPinGrad",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[q.jsx("stop",{offset:"0%",stopColor:"#f87171"}),q.jsx("stop",{offset:"100%",stopColor:"#dc2626"})]})}),q.jsx("path",{d:"M12 0C5.4 0 0 5.4 0 12c0 9 12 20 12 20s12-11 12-20c0-6.6-5.4-12-12-12z",fill:"url(#popupPinGrad)"}),q.jsx("circle",{cx:"12",cy:"11",r:"5",fill:"white",opacity:"0.9"}),q.jsx("circle",{cx:"12",cy:"11",r:"3",fill:"#dc2626"})]}),"Note"]}),q.jsx("button",{className:"note-close-btn",onClick:()=>{Il(null),Ol(""),Ja(""),Ma(null),zr("")},children:""})]}),q.jsxs("div",{className:"note-date-row",children:[q.jsx("label",{className:"note-date-label",children:"Date"}),q.jsx("input",{className:"note-date-input",type:"date",value:Cm,onChange:B=>Ja(B.target.value)})]}),q.jsxs("div",{className:"note-attachments",children:[q.jsx("input",{ref:cd,type:"file",accept:"image/*",style:{display:"none"},onChange:B=>{const J=B.target.files?.[0];e0(J),B.target.value=""}}),q.jsx("button",{className:"btn btn-photo-note",onClick:()=>cd.current?.click(),type:"button",children:" Add Photo"}),rf&&q.jsx("button",{className:"btn btn-remove-photo",onClick:()=>{Ma(null),zr("")},type:"button",children:"Remove"})]}),rf&&q.jsx("div",{className:"note-photo-preview",children:q.jsx("img",{src:rf,alt:js||"Note attachment"})}),q.jsx("textarea",{className:"note-textarea",value:up,onChange:B=>Ol(B.target.value),placeholder:"Write your note here...",autoFocus:!0}),q.jsxs("div",{className:"note-popup-actions",children:[q.jsx("button",{className:"btn btn-delete-note",onClick:()=>Vp(ka.id),children:" Delete"}),q.jsx("button",{className:"btn btn-save-note",onClick:n0,children:" Save"})]}),q.jsxs("div",{className:"note-popup-meta",children:["Lat: ",ka.lat.toFixed(6),", Lng: ",ka.lng.toFixed(6)]})]})}),z&&qi&&(()=>{let lt=(Yu?.x||window.innerWidth/2)+20,dt=(Yu?.y||window.innerHeight/2)-400/2;return lt+320>window.innerWidth-20&&(lt=(Yu?.x||window.innerWidth/2)-320-20),dt+400>window.innerHeight-20&&(dt=window.innerHeight-400-20),dt<20&&(dt=20),q.jsx("div",{className:"punch-popup-overlay",onClick:()=>{Sl(null),cc(""),Tl(null),kl(null),Ya(""),Kc(null)},children:q.jsxs("div",{className:"punch-popup-compact",onClick:xt=>xt.stopPropagation(),style:{left:lt,top:dt},children:[q.jsxs("div",{className:"punch-popup-header-compact punch-popup-draggable",onMouseDown:xt=>{xt.preventDefault();const yt=xt.clientX,ht=xt.clientY,mt=lt,vt=dt,wt=Rt=>{const qt=Rt.clientX-yt,jt=Rt.clientY-ht;Kc({x:mt+qt-20,y:vt+jt+160})},Nt=()=>{document.removeEventListener("mousemove",wt),document.removeEventListener("mouseup",Nt)};document.addEventListener("mousemove",wt),document.addEventListener("mouseup",Nt)},children:[q.jsxs("h3",{children:[q.jsx("span",{className:"inline-block h-3 w-3 rounded-full border border-white/40",style:{backgroundColor:Ka(Xa)?.color||"#888"}}),"Punch"]}),q.jsx("button",{className:"punch-close-btn-compact",onClick:()=>{Sl(null),cc(""),Tl(null),kl(null),Ya(""),Kc(null)},children:""})]}),q.jsx("div",{className:"punch-form-row-compact",children:q.jsxs("select",{className:"punch-select-compact",value:Xa||"",onChange:xt=>Tl(xt.target.value||null),children:[q.jsx("option",{value:"",children:"Contractor..."}),Wr.map(xt=>q.jsx("option",{value:xt.id,children:xt.name},xt.id))]})}),q.jsxs("div",{className:"punch-photo-section-compact",children:[q.jsx("input",{ref:sp,type:"file",accept:"image/*",style:{display:"none"},onChange:xt=>{const yt=xt.target.files?.[0];id(yt),xt.target.value=""}}),q.jsx("button",{className:"punch-btn-photo-compact",onClick:()=>sp.current?.click(),type:"button",children:""}),Cl&&q.jsx("button",{className:"punch-btn-remove-photo-compact",onClick:()=>{kl(null),Ya("")},type:"button",children:""})]}),Cl&&q.jsxs("div",{className:"punch-photo-preview-medium",onClick:xt=>{xt.stopPropagation();const yt=lt+280,ht=dt,mt=yt+350>window.innerWidth?lt-370:yt;Oo({url:Cl,name:Ml,x:mt,y:ht})},title:"Click to enlarge",children:[q.jsx("img",{src:Cl,alt:Ml||"Punch attachment",draggable:!1}),q.jsx("div",{className:"punch-photo-zoom-hint",children:" Click to enlarge"})]}),q.jsx("div",{className:"punch-form-row-compact",children:q.jsx("textarea",{className:"punch-textarea-compact",value:ip,onChange:xt=>cc(xt.target.value),placeholder:"Description...",autoFocus:!0})}),q.jsxs("div",{className:"punch-actions-compact",children:[q.jsx("button",{className:"punch-btn-delete-compact",onClick:()=>fc(qi.id),title:"Delete",children:""}),qi.completed?q.jsx("button",{className:"punch-btn-uncomplete-compact",onClick:()=>lp(qi.id),title:"Mark as uncompleted",children:""}):q.jsx("button",{className:"punch-btn-done-compact",onClick:()=>ap(qi.id),title:"Mark as completed",children:""}),q.jsx("button",{className:"punch-btn-save-compact",onClick:Tm,title:"Save",children:""})]}),qi.completed&&q.jsx("div",{className:"punch-completed-badge",children:" COMPLETED"})]})})})(),z&&Ci&&q.jsx("div",{className:"punch-lightbox-overlay",onClick:()=>Oo(null),children:q.jsxs("div",{className:"punch-lightbox",style:{left:Ci.x,top:Ci.y},onClick:B=>B.stopPropagation(),onMouseDown:B=>{if(B.preventDefault(),B.button===1){const ht=B.clientX,mt=B.clientY,vt=Ci.panX||0,wt=Ci.panY||0,Nt=qt=>{const jt=qt.clientX-ht,Lt=qt.clientY-mt;Oo(Tt=>({...Tt,panX:vt+jt,panY:wt+Lt}))},Rt=()=>{document.removeEventListener("mousemove",Nt),document.removeEventListener("mouseup",Rt)};document.addEventListener("mousemove",Nt),document.addEventListener("mouseup",Rt);return}const J=B.clientX,at=B.clientY,lt=Ci.x,dt=Ci.y,xt=ht=>{const mt=ht.clientX-J,vt=ht.clientY-at;Oo(wt=>({...wt,x:lt+mt,y:dt+vt}))},yt=()=>{document.removeEventListener("mousemove",xt),document.removeEventListener("mouseup",yt)};document.addEventListener("mousemove",xt),document.addEventListener("mouseup",yt)},onWheel:B=>{B.preventDefault(),B.stopPropagation();const J=B.deltaY>0?-.1:.1;Oo(at=>({...at,zoom:Math.min(3,Math.max(.5,(at.zoom||1)+J))}))},onContextMenu:B=>B.preventDefault(),children:[q.jsx("button",{className:"punch-lightbox-close",onClick:()=>Oo(null),children:""}),q.jsx("img",{src:Ci.url,alt:Ci.name||"Punch photo",draggable:!1,style:{transform:`scale(${Ci.zoom||1}) translate(${(Ci.panX||0)/(Ci.zoom||1)}px, ${(Ci.panY||0)/(Ci.zoom||1)}px)`}}),q.jsxs("div",{className:"punch-lightbox-zoom-hint",children:[" Scroll: Zoom (",Math.round((Ci.zoom||1)*100),"%) | Middle click + drag: Pan"]})]})}),z&&Ys&&!vl&&!Io&&(()=>{const J=document.getElementById("pl-contractor-btn")?.getBoundingClientRect(),at=J?J.bottom+4:300,lt=J?window.innerWidth-J.right:12;return q.jsx("div",{className:"contractor-dropdown-overlay",onClick:()=>na(!1),children:q.jsxs("div",{className:"contractor-dropdown-menu",style:{top:at,right:lt},onClick:dt=>dt.stopPropagation(),children:[Wr.length>0&&q.jsx("div",{className:"contractor-dropdown-list",children:Wr.map(dt=>q.jsxs("div",{className:`contractor-dropdown-item ${Is===dt.id?"selected":""}`,onClick:()=>{Ga(dt.id),na(!1)},children:[q.jsx("span",{className:"contractor-color-dot",style:{backgroundColor:dt.color}}),q.jsx("span",{className:"contractor-name",children:dt.name}),q.jsx("button",{type:"button",className:"contractor-dropdown-edit",title:"Edit",onClick:xt=>{xt.stopPropagation(),Gu(dt),Yc(dt.name),xl(dt.color)},children:""})]},dt.id))}),q.jsxs("div",{className:"contractor-dropdown-add",onClick:()=>{Ni(!0)},children:[q.jsx("span",{className:"contractor-add-icon",children:"+"}),q.jsx("span",{children:"Add Contractor"})]})]})})})(),z&&(vl||Io)&&q.jsx("div",{className:"contractor-modal-overlay",onClick:()=>{Ni(!1),Gu(null),Yc(""),xl(""),Gc("")},children:q.jsxs("div",{className:"contractor-modal",onClick:B=>B.stopPropagation(),children:[q.jsxs("div",{className:"contractor-modal-header",children:[q.jsxs("h3",{children:[" ",Io?"Edit Contractor":"Add Contractor"]}),q.jsx("button",{className:"contractor-modal-close",onClick:()=>{Ni(!1),Gu(null),Yc(""),xl(""),Gc("")},children:""})]}),Io&&q.jsxs("div",{className:"contractor-form-section compact",children:[q.jsx("input",{type:"text",className:"contractor-input compact",value:rp,onChange:B=>Yc(B.target.value),placeholder:"Contractor name",autoFocus:!0}),q.jsx("div",{className:"contractor-color-picker compact",children:nr.map(B=>{const J=Wr.some(at=>at.color===B&&at.id!==Io.id);return q.jsx("button",{type:"button",className:`contractor-color-option compact ${Ai===B?"selected":""} ${J?"disabled":""}`,style:{backgroundColor:B,opacity:J?.3:1},onClick:()=>!J&&xl(B),disabled:J,title:J?"This color is used by another contractor":""},B)})}),q.jsxs("div",{className:"contractor-form-actions",children:[q.jsx("button",{type:"button",className:"contractor-btn delete",onClick:()=>{window.confirm(`Are you sure you want to delete contractor "${Io.name}"?`)&&(rd(Io.id),Is===Io.id&&Ga(null),Gu(null),Yc(""),xl(""))},children:"Delete"}),q.jsx("button",{type:"button",className:"contractor-btn cancel",onClick:()=>{Gu(null),Yc(""),xl("")},children:"Cancel"}),q.jsx("button",{type:"button",className:"contractor-btn save",disabled:!rp.trim(),onClick:()=>{nh(Io.id,rp,Ai),Gu(null),Yc(""),xl("")},children:"Save"})]})]}),vl&&!Io&&q.jsxs("div",{className:"contractor-form-section compact",children:[q.jsx("input",{type:"text",className:"contractor-input compact",value:nd,onChange:B=>Gc(B.target.value),placeholder:"Contractor name",autoFocus:!0}),q.jsx("div",{className:"contractor-color-picker compact",children:nr.map(B=>{const J=Wr.some(at=>at.color===B);return q.jsx("button",{type:"button",className:`contractor-color-option compact ${Zc===B?"selected":""} ${J?"disabled":""}`,style:{backgroundColor:B,opacity:J?.3:1},onClick:()=>!J&&Xc(B),disabled:J,title:J?"This color is used by another contractor":""},B)})}),q.jsxs("div",{className:"contractor-form-actions",children:[q.jsx("button",{type:"button",className:"contractor-btn cancel",onClick:()=>{Ni(!1),Gc(""),Xc(lc())},children:"Cancel"}),q.jsx("button",{type:"button",className:"contractor-btn save",disabled:!nd.trim(),onClick:()=>{const B=Ju(nd,Zc);B&&(Ga(B.id),Gc(""),Xc(lc()),Ni(!1),na(!1))},children:"+ Add"})]})]})]})}),z&&Xu&&_l&&q.jsxs("div",{className:"fixed right-0 w-[380px] z-[1100] bg-slate-900 border-l-2 border-slate-700 shadow-2xl flex flex-col",style:{pointerEvents:"auto",top:"60px",height:"calc(100vh - 60px)"},children:[q.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800 flex-shrink-0",children:[q.jsxs("div",{className:"flex flex-col",children:[q.jsx("span",{className:"text-white font-bold text-sm uppercase tracking-wide",children:"Isometric"}),q.jsx("span",{className:"text-amber-400 font-mono text-base font-bold",children:_l})]}),q.jsxs("div",{className:"flex items-center gap-3",children:[q.jsxs("span",{className:"text-slate-400 text-[11px]",children:[us.filter(B=>B.tableId===_l).length," punch"]}),q.jsx("button",{type:"button",onClick:()=>{wl(!1),Zu(null)},className:"text-slate-400 hover:text-white text-xl font-bold leading-none",title:"Close",children:""})]})]}),q.jsx("div",{className:"px-3 py-2 border-b border-slate-700 bg-slate-800/50",children:q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("span",{className:"text-slate-400 text-[10px] uppercase",children:"Contractor:"}),q.jsxs("select",{className:"flex-1 border border-slate-600 bg-slate-800 px-2 py-1 text-[11px] text-white focus:outline-none focus:border-amber-400 rounded",value:Is||"",onChange:B=>Ga(B.target.value||null),children:[q.jsx("option",{value:"",children:"Select..."}),Wr.map(B=>q.jsx("option",{value:B.id,children:B.name},B.id))]}),Is&&q.jsx("span",{className:"w-4 h-4 rounded-full border border-white/40",style:{backgroundColor:Ka(Is)?.color||"#888"}})]})}),q.jsxs("div",{className:"flex-1 overflow-hidden p-3 flex flex-col gap-2",children:[q.jsxs("div",{className:"relative flex-1 border border-slate-600 rounded overflow-hidden bg-slate-800",style:{minHeight:"300px"},onWheel:B=>{B.preventDefault();const J=B.currentTarget,at=J.querySelector("[data-iso-inner]");if(!at)return;const lt=parseFloat(at.dataset.scale||"1"),dt=parseFloat(at.dataset.panX||"0"),xt=parseFloat(at.dataset.panY||"0"),yt=B.deltaY>0?.9:1.1,ht=Math.min(Math.max(lt*yt,.5),5),mt=J.getBoundingClientRect(),vt=B.clientX-mt.left,wt=B.clientY-mt.top,Nt=ht/lt,Rt=vt-(vt-dt)*Nt,qt=wt-(wt-xt)*Nt;at.dataset.scale=String(ht),at.dataset.panX=String(Rt),at.dataset.panY=String(qt),at.style.transform=`translate(${Rt}px, ${qt}px) scale(${ht})`},onMouseDown:B=>{if(B.button!==1)return;B.preventDefault();const at=B.currentTarget.querySelector("[data-iso-inner]");if(!at)return;const lt=B.clientX,dt=B.clientY,xt=parseFloat(at.dataset.panX||"0"),yt=parseFloat(at.dataset.panY||"0"),ht=vt=>{const wt=vt.clientX-lt,Nt=vt.clientY-dt,Rt=xt+wt,qt=yt+Nt,jt=parseFloat(at.dataset.scale||"1");at.dataset.panX=String(Rt),at.dataset.panY=String(qt),at.style.transform=`translate(${Rt}px, ${qt}px) scale(${jt})`},mt=()=>{document.removeEventListener("mousemove",ht),document.removeEventListener("mouseup",mt)};document.addEventListener("mousemove",ht),document.addEventListener("mouseup",mt)},onContextMenu:B=>B.preventDefault(),children:[q.jsx("button",{type:"button",onClick:()=>{const B=uc.current;B&&(B.dataset.scale="1",B.dataset.panX="0",B.dataset.panY="0",B.style.transform="translate(0px, 0px) scale(1)")},className:"absolute top-2 right-2 z-10 flex items-center justify-center w-7 h-7 bg-slate-700/80 hover:bg-slate-600 border border-slate-500 rounded transition-colors",title:"Fit to screen",children:q.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-300",children:q.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})}),q.jsxs("div",{ref:uc,"data-iso-inner":"true","data-scale":"1","data-pan-x":"0","data-pan-y":"0",className:"absolute inset-0 origin-top-left cursor-crosshair",style:{transform:"translate(0px, 0px) scale(1)"},onClick:B=>{if(B.button===1)return;const J=B.currentTarget,at=parseFloat(J.dataset.scale||"1"),lt=parseFloat(J.dataset.panX||"0"),dt=parseFloat(J.dataset.panY||"0"),xt=J.parentElement.getBoundingClientRect(),yt=B.clientX-xt.left,ht=B.clientY-xt.top,mt=(yt-lt)/at/xt.width*100,vt=(ht-dt)/at/xt.height*100;if(mt<0||mt>100||vt<0||vt>100)return;const wt=Ro.current;if(!wt){const qt=document.createElement("div");qt.className="punch-warning-toast",qt.innerHTML=" Please select a contractor first!",document.body.appendChild(qt),setTimeout(()=>qt.remove(),2500);return}const Nt=yl.current+1;yl.current=Nt,qa(Nt);const Rt={id:`punch_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,lat:0,lng:0,contractorId:wt,text:"",photoDataUrl:null,photoName:"",tableId:_l,isoX:mt,isoY:vt,createdAt:new Date().toISOString(),punchNumber:Nt};ea(qt=>[...qt,Rt])},children:[q.jsx("img",{src:"/PUNCH_LIST/photo/table.png",alt:"Table Isometric",className:"w-full h-full object-contain",draggable:!1,onError:B=>{console.error("Failed to load isometric image"),B.target.style.display="none"}}),us.filter(B=>B.tableId===_l&&B.isoX!=null&&B.isoY!=null).map(B=>{const J=Ka(B.contractorId),at=B.completed?ta:J?.color||"#888",lt=qi?.id===B.id;return q.jsxs("div",{className:`absolute w-3 h-3 -translate-x-1/2 -translate-y-1/2 cursor-pointer transition-transform ${lt?"scale-150 z-50":"hover:scale-150"}`,style:{left:`${B.isoX}%`,top:`${B.isoY}%`,...lt?{animation:"punch-editing-pulse 1s ease-in-out infinite"}:{}},title:`${J?.name||"No contractor"}: ${B.text||"(no description)"}${B.completed?"  COMPLETED":""}`,onClick:dt=>{dt.stopPropagation(),Sl(B),cc(B.text||""),Tl(B.contractorId),kl(B.photoDataUrl||null),Ya(B.photoName||"")},children:[q.jsx("div",{className:`w-full h-full rounded-full border shadow-md ${lt?"border-2 border-yellow-400":"border border-white"}`,style:{backgroundColor:at}}),B.completed&&q.jsx("span",{className:"absolute -top-1 -right-1 text-[8px] text-white font-bold",children:""})]},B.id)})]})]}),q.jsx("div",{className:"text-slate-500 text-[10px] text-center py-1",children:"Scroll to zoom  Middle-click drag to pan  Click to add punch"})]}),q.jsx("div",{className:"px-3 py-2 border-t border-slate-700 bg-slate-800",children:q.jsx("button",{type:"button",onClick:()=>{wl(!1),Zu(null)},className:"w-full border border-slate-600 bg-slate-700 px-3 py-2 text-[11px] font-bold uppercase text-white hover:bg-slate-600 rounded",children:"Close"})})]}),q.jsx(tx,{isOpen:$a,onClose:()=>$u(!1),onSubmit:B=>{const J=B.date,at=Hn.filter(yt=>(yt.noteDate||(yt.createdAt?new Date(yt.createdAt).toISOString().split("T")[0]:null))===J);if(I){const yt=Eo.current||[],ht=Yl.current||new Set;if(yt.length===0&&ht.size===0){alert("No selections to submit. Please select cable routes.");return}let mt=0;const vt=[],wt=[];if(yt.forEach(Rt=>{mt+=(Number(Rt?.meters)||0)*(gt||1),vt.push(String(Rt?.id||""))}),ht.forEach(Rt=>{const qt=Number(Ws.current?.[Rt])||0;mt+=qt,wt.push(`segment:${Rt}`)}),J&&yt.length>0){const Rt=`${la}:trench_parts_committed:${J}`;try{const qt=localStorage.getItem(Rt),jt=qt?JSON.parse(qt):[],Lt=Array.isArray(jt)?jt:[],Tt=new Set(Lt.map(It=>String(It?.id||""))),Ot=[...Lt];yt.forEach(It=>{const Mt=String(It?.id||"");if(!Mt||Tt.has(Mt))return;Tt.add(Mt);const _t=Array.isArray(It?.coords)?It.coords.map(Et=>[Number(Et?.[0]).toFixed?Number(Et[0].toFixed(6)):Et[0],Number(Et?.[1]).toFixed?Number(Et[1].toFixed(6)):Et[1]]):[];Ot.push({id:Mt,fid:String(It?.fid||""),lineIndex:Number.isFinite(Number(It?.lineIndex))?Number(It.lineIndex):null,startM:Number.isFinite(Number(It?.startM))?Number(It.startM):null,endM:Number.isFinite(Number(It?.endM))?Number(It.endM):null,source:It?.source||null,segmentKey:It?.segmentKey?String(It.segmentKey):null,metersMultiplier:typeof It?.metersMultiplier=="number"&&Number.isFinite(It.metersMultiplier)?It.metersMultiplier:null,coords:_t,meters:Number(It?.meters)||0})}),localStorage.setItem(Rt,JSON.stringify(Ot))}catch{}J===wu&&Vc(qt=>{const jt=qt||[],Lt=new Set(jt.map(Ot=>String(Ot?.id||""))),Tt=[...jt];return yt.forEach(Ot=>{const It=String(Ot?.id||"");!It||Lt.has(It)||(Lt.add(It),Tt.push(Ot))}),Tt})}const Nt={...B,total_cable:mt,notes:at,selectedPolygonIds:[...vt,...wt]};Ra(Nt),co([]),Xl(new Set),alert("Work submitted successfully!");return}if(w){const yt=bc.current||new Set,ht=new Set;if((tu.current||ki).forEach(wt=>{const Nt=Mn(wt);yt.has(Nt)||ht.add(Nt)}),ht.size===0){alert("No new selections to submit. Please select new areas.");return}let mt=0;ht.forEach(wt=>{const Nt=pt[Mn(wt)];Nt?.plus?.length&&(mt+=Nt.plus.reduce((Rt,qt)=>Rt+qt,0))});const vt={...B,total_cable:mt,notes:at,selectedPolygonIds:Array.from(ht)};Ra(vt),mp(wt=>{const Nt=new Set(wt);return ht.forEach(Rt=>Nt.add(Rt)),bc.current=Nt,Nt}),alert("Work submitted successfully!");return}if(D){const yt=gf.current||{},ht=wc.current||"mc4",mt=Object.keys(to.current||{}).filter(Nt=>(Number(to.current?.[Nt]??0)||0)>0),vt=Object.keys(yt).filter(Nt=>{const Rt=yt[Nt];return ht==="termination_panel"?Rt?.left===Ri.TERMINATED||Rt?.right===Ri.TERMINATED:Rt?.left===Ri.MC4||Rt?.right===Ri.MC4||Rt?.left===Ri.TERMINATED||Rt?.right===Ri.TERMINATED});try{const Nt=(()=>{const Tt=to.current||{};let Ot=0;for(const[It,Mt]of Object.entries(Tt)){const _t=Mn(It),Et=Math.max(0,Number(Ch.current?.[_t]??0)||0),Pt=Math.max(0,Number(Mt)||0);Ot+=Et>0?Math.min(Et,Pt):Pt}return Ot})(),Rt=ht==="termination_panel"?Number(ku?.terminatedCompleted)||0:ht==="termination_inv"?Nt:Number(ku?.mc4Completed)||0,Lt={...yf.current||{mc4:0,termination_panel:0,termination_inv:0},[ht==="termination_panel"?"termination_panel":ht==="termination_inv"?"termination_inv":"mc4"]:Rt};localStorage.setItem(Td,JSON.stringify(Lt)),Kr(Lt),yf.current=Lt}catch{}const wt={...B,notes:at,selectedPolygonIds:ht==="termination_inv"?mt:vt};Ra(wt),alert("Work submitted successfully!");return}if(C){const yt=fu.current||{},ht=Fr.current||"termination_panel",mt=Object.keys(zs.current||{}).filter(Nt=>(Number(zs.current?.[Nt]??0)||0)>0),vt=Object.keys(yt).filter(Nt=>{const Rt=yt[Nt];return Rt?.left===Jr.TERMINATED||Rt?.right===Jr.TERMINATED});try{const Nt=(()=>{const Tt=zs.current||{};let Ot=0;for(const[It,Mt]of Object.entries(Tt)){const _t=Mn(It),Et=Math.max(0,Number(Cc.current?.[_t]??0)||0),Pt=Math.max(0,Number(Mt)||0);Ot+=Et>0?Math.min(Et,Pt):Pt}return Ot})(),Rt=ht==="termination_panel"?Number(Oc?.terminatedCompleted)||0:Nt,Lt={...Bs.current||{termination_panel:0,termination_inv:0},[ht==="termination_panel"?"termination_panel":"termination_inv"]:Rt};localStorage.setItem(ni,JSON.stringify(Lt)),Ds(Lt),Bs.current=Lt}catch{}const wt={...B,notes:at,selectedPolygonIds:ht==="termination_inv"?mt:vt};if(Ra(wt),ht==="termination_panel"&&Array.isArray(vt)&&vt.length>0){const Nt=new Set(aa.current||[]);vt.forEach(Rt=>Nt.add(String(Rt))),aa.current=Nt}alert("Work submitted successfully!");return}if(R){const yt=vc.current||[];if(yt.length===0){alert("No selections to submit.");return}const ht=yt.reduce((wt,Nt)=>wt+(Nt?.meters||0),0),mt=yt.map(wt=>String(wt?.id||"")),vt={...B,total_cable:ht,notes:at,selectedPolygonIds:mt};Ra(vt),zo([]),alert("Work submitted successfully!");return}if(T){const yt=hf.current||[];if(yt.length===0){alert("No selections to submit.");return}const ht=yt.reduce((wt,Nt)=>wt+(Nt?.meters||0),0),mt=yt.map(wt=>String(wt?.id||"")),vt={...B,total_cable:ht,notes:at,selectedPolygonIds:mt};Ra(vt),vd(wt=>{const Nt=Array.isArray(wt)?wt:[],Rt=new Set(Nt.map(jt=>String(jt?.id||""))),qt=[...Nt];return yt.forEach(jt=>{const Lt=String(jt?.id||"");!Lt||Rt.has(Lt)||(Rt.add(Lt),qt.push(jt))}),qt}),Fo([]),alert("Work submitted successfully!");return}if(W){if((ws.current||"tabletotable")==="tabletotable"){const ht=af.current||new Set;if(ht.size===0){alert("No selections to submit.");return}const mt={...B,notes:at,selectedPolygonIds:Array.from(ht)};Ra(mt),Po(new Set)}else{const ht=nu.current||[];if(ht.length===0){alert("No selections to submit.");return}const mt=ht.reduce((Nt,Rt)=>Nt+(Rt?.meters||0),0),vt=ht.map(Nt=>String(Nt?.id||"")),wt={...B,total_cable:mt,notes:at,selectedPolygonIds:vt};Ra(wt),Bo([])}alert("Work submitted successfully!");return}if(Z){const yt=qe.current||{},ht=Object.entries(yt).map(([wt,Nt])=>{const Rt=fn(wt);return bn(Rt,Nt)>0?Rt:null}).filter(Boolean);if(ht.length===0){alert("No terminations to submit.");return}const mt=Object.entries(yt).reduce((wt,[Nt,Rt])=>wt+bn(Nt,Rt),0),vt={...B,total_cable:mt,notes:at,selectedPolygonIds:ht};Ra(vt),alert("Work submitted successfully!");return}if(K&&String(Bn.current||"termination")==="termination"){const yt=En.current||{},ht=Object.keys(yt).filter(wt=>(yt[wt]||0)>0);if(ht.length===0){alert("No terminations to submit.");return}const mt=Object.values(yt).reduce((wt,Nt)=>wt+Math.max(0,Math.min(3,Number(Nt)||0)),0),vt={...B,total_cable:mt,notes:at,selectedPolygonIds:ht};Ra(vt),alert("Work submitted successfully!");return}const lt=new Set;if(M.forEach(yt=>{it.current.has(yt)||lt.add(yt)}),lt.size===0){alert("No new selections to submit. Please select new areas.");return}let dt=0;if(E){const yt=new Set;lt.forEach(vt=>{const wt=Ge.current[vt];wt&&wt.stringId&&yt.add(Mn(wt.stringId))});let ht=0,mt=0;yt.forEach(vt=>{const wt=pt[vt];wt&&(wt.plus&&wt.plus.length>0&&(ht+=wt.plus.reduce((Nt,Rt)=>Nt+Rt,0)),wt.minus&&wt.minus.length>0&&(mt+=wt.minus.reduce((Nt,Rt)=>Nt+Rt,0)))}),dt=ht+mt}else dt=lt.size;const xt={...B,total_cable:dt,notes:at,selectedPolygonIds:Array.from(lt)};Ra(xt),et(yt=>{const ht=new Set(yt);return lt.forEach(mt=>ht.add(mt)),it.current=ht,ht}),alert("Work submitted successfully!")},moduleKey:D?ji==="termination_panel"?"MC4_TERM_PANEL":ji==="termination_inv"?"MC4_TERM_INV":"MC4_INST":C?Zi==="termination_panel"?"DCTT_TERM_PANEL":"DCTT_TERM_INV":R?"DATP":T?"MVFT":W?Ir==="tabletotable"?"PTEP_TT":"PTEP_PARAM":Z?"MVT_TERM":K&&String(vn||"termination")==="termination"?"LVTT_TERM":h?.key||"",moduleLabel:D?ji==="termination_panel"?"Cable Termination Panel Side":ji==="termination_inv"?"Cable Termination Inv. Side":"MC4 Installation":C?Zi==="termination_panel"?"DC Termination Panel Side":"DC Termination Inv. Side":R?"DC&AC Trench":T?"MV&Fibre Trench":W?Ir==="tabletotable"?"Table-to-Table Earthing":"Parameter Earthing":Z||K&&String(vn||"termination")==="termination"?"Cable Termination":p,workAmount:C?Zi==="termination_panel"?Oc?.terminatedCompleted||0:Object.values(Qr||{}).reduce((B,J)=>B+(Number(J)||0),0):R?ql:T?Fd:W?zd:Z?c0:K&&String(vn||"termination")==="termination"?u0:Zp,workUnit:D?ji==="termination_panel"||ji==="termination_inv"?"cables terminated":"mc4":C?"mc4 terminated":R?f0:T?Df:W?Pf:Z?"cables terminated":K&&String(vn||"termination")==="termination"?gg:h?.submitWorkUnit?String(h.submitWorkUnit):h?.workUnitWeights?"panels":"m"}),uo&&q.jsxs("div",{ref:oe,className:"history-panel",style:{transform:`translate(${N.x}px, ${N.y}px)`,cursor:nt?"grabbing":"default"},children:[q.jsxs("div",{className:"history-panel-header",style:{cursor:nt?"grabbing":"grab"},onMouseDown:B=>{B.target.closest("button")||(ft(!0),At.current={x:B.clientX-N.x,y:B.clientY-N.y})},onTouchStart:B=>{if(B.target.closest("button"))return;const J=B.touches[0];ft(!0),At.current={x:J.clientX-N.x,y:J.clientY-N.y}},children:[q.jsx("div",{className:"history-panel-title",children:" Work History"}),q.jsx("div",{className:"history-panel-actions",children:q.jsx("button",{className:"history-panel-close",onClick:()=>{bl(!1),sc(null)},children:""})})]}),nt&&q.jsx("div",{style:{position:"fixed",inset:0,zIndex:99999,cursor:"grabbing"},onMouseMove:B=>{$({x:B.clientX-At.current.x,y:B.clientY-At.current.y})},onMouseUp:()=>ft(!1),onTouchMove:B=>{const J=B.touches[0];$({x:J.clientX-At.current.x,y:J.clientY-At.current.y})},onTouchEnd:()=>ft(!1)}),q.jsxs("div",{className:"history-sort",children:[q.jsx("span",{children:"Sort:"}),q.jsxs("button",{className:`sort-btn ${Vi==="date"?"active":""}`,onClick:()=>{Vi==="date"?Sa(B=>B==="asc"?"desc":"asc"):(ed("date"),Sa("desc"))},children:["Date ",Vi==="date"&&($i==="desc"?"":"")]}),q.jsxs("button",{className:`sort-btn ${Vi==="workers"?"active":""}`,onClick:()=>{Vi==="workers"?Sa(B=>B==="asc"?"desc":"asc"):(ed("workers"),Sa("desc"))},children:["Workers ",Vi==="workers"&&($i==="desc"?"":"")]}),q.jsxs("button",{className:`sort-btn ${Vi==="amount"?"active":""}`,onClick:()=>{Vi==="amount"?Sa(B=>B==="asc"?"desc":"asc"):(ed("amount"),Sa("desc"))},children:["Amount ",Vi==="amount"&&($i==="desc"?"":"")]})]}),q.jsx("div",{className:"history-list",children:(()=>{const B=yt=>yt.noteDate||(yt.createdAt?new Date(yt.createdAt).toISOString().split("T")[0]:null),J={};Hn.forEach(yt=>{const ht=B(yt);ht&&(J[ht]||(J[ht]=[]),J[ht].push(yt))});const at={};ti.forEach(yt=>{const ht=yt.date;ht&&(at[ht]||(at[ht]=[]),at[ht].push(yt))});const lt=Array.from(new Set([...Object.keys(at),...Object.keys(J)])),dt=$i==="desc"?-1:1,xt=yt=>{const ht=at[yt]||[];return Vi==="workers"?ht.reduce((mt,vt)=>mt+(vt.workers||0),0):Vi==="amount"?ht.reduce((mt,vt)=>mt+(vt.total_cable||0),0):new Date(yt).getTime()};return lt.sort((yt,ht)=>dt*(xt(yt)-xt(ht))),lt.length===0?q.jsx("div",{className:"history-empty",children:"No work records or notes yet"}):lt.map(yt=>{const ht=[...at[yt]||[]],mt=[...J[yt]||[]].sort((wt,Nt)=>new Date(wt.createdAt)-new Date(Nt.createdAt)),vt=new Date(yt).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return q.jsxs("div",{className:"history-day",children:[q.jsx("div",{className:"history-day-header",children:q.jsx("span",{className:"history-day-date",children:vt})}),ht.map(wt=>{const Nt=sr===wt.id,Rt=wt.selectedPolygonIds||[];return q.jsxs("div",{className:`history-item ${Nt?"history-item-selected":""}`,onClick:()=>{sr===wt.id?sc(null):sc(wt.id)},children:[q.jsxs("div",{className:"history-item-header",children:[q.jsx("span",{className:"history-subcontractor",children:wt.subcontractor}),q.jsx("button",{className:"history-item-delete",onClick:qt=>{if(qt.stopPropagation(),window.confirm("Delete this record?")){if(w)mp(jt=>{const Lt=new Set(jt);return Rt.forEach(Tt=>Lt.delete(Mn(Tt))),bc.current=Lt,Lt}),Lo(jt=>{const Lt=new Set(jt);return Rt.forEach(Tt=>Lt.delete(Mn(Tt))),Lt});else if(I){Vc(Lt=>{const Tt=new Set(Rt);return Lt.filter(Ot=>!Tt.has(String(Ot?.id||"")))}),pl.current=(pl.current||[]).filter(Lt=>!Rt.includes(String(Lt?.id||"")));const jt=Rt.map(Lt=>String(Lt||"")).filter(Lt=>Lt.startsWith("segment:")).map(Lt=>Lt.replace("segment:","")).filter(Boolean);jt.length>0&&(za(Lt=>{const Tt=new Set(Lt);return jt.forEach(Ot=>Tt.delete(String(Ot))),Tt}),Xl(Lt=>{const Tt=new Set(Lt);return jt.forEach(Ot=>Tt.delete(String(Ot))),Tt}))}else if(T)vd(jt=>{const Lt=new Set(Rt.map(String));return(Array.isArray(jt)?jt:[]).filter(Ot=>!Lt.has(String(Ot?.id||"")))}),pf.current=(pf.current||[]).filter(jt=>!Rt.map(String).includes(String(jt?.id||"")));else if(C){const jt=Rt.map(Lt=>String(Lt||"")).filter(Lt=>!!Lt&&!!Ge.current?.[Lt]);if(jt.length>0){oa(Tt=>{const Ot={...Tt||{}};return jt.forEach(It=>{delete Ot[It]}),Ot});const Lt=new Set(aa.current||[]);jt.forEach(Tt=>Lt.delete(Tt)),aa.current=Lt}}else et(jt=>{const Lt=new Set(jt);return Rt.forEach(Tt=>Lt.delete(Tt)),Lt}),O(jt=>{const Lt=new Set(jt);return Rt.forEach(Tt=>Lt.delete(Tt)),Lt});t0(wt.id),sr===wt.id&&sc(null)}},title:"Delete record",children:""})]}),q.jsxs("div",{className:"history-item-stats",children:[q.jsx("div",{className:"stat",children:q.jsxs("span",{children:[wt.workers," workers"]})}),q.jsx("div",{className:"stat stat-total",children:q.jsxs("span",{children:[(wt.total_cable||0).toFixed(0)," ",wt.unit||"m"]})})]})]},wt.id)}),mt.length>0&&q.jsxs("div",{className:"history-day-section",children:[q.jsx("div",{className:"history-day-section-title",children:"Notes"}),q.jsx("div",{className:"history-notes",children:mt.map(wt=>{const Nt=wt.createdAt?new Date(wt.createdAt).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",Rt=!!wt.photoDataUrl;return q.jsxs("div",{className:"history-note",children:[q.jsxs("div",{className:"history-note-top",children:[q.jsx("span",{className:"history-note-time",children:Nt}),Rt&&q.jsx("span",{className:"history-note-photo",children:""})]}),q.jsx("div",{className:"history-note-text",children:wt.text||"(empty note)"})]},wt.id)})})]})]},yt)})})()})]})]})}function _o({name:m,counters:a=!1,customLogic:t=null,customSidebar:s=null,customCounters:u=null,customFooter:o=null,customPanelLogic:r=null,customBoundaryLogic:c=null,moduleConfig:l=null}={}){return function(){return q.jsx(rS,{name:m,counters:a,moduleConfig:l,customLogic:t,customSidebar:s,customCounters:u,customFooter:o,customPanelLogic:r,customBoundaryLogic:c})}}const c1={key:"DC",label:"DC CABLE PULLING PROGRESS TRACKING",csvFormat:"dc",csvPath:"/dc-cable-pulling-progress/dc_strings.csv",linkPath:"/dc-cable-pulling-progress/link",stringTextVisibility:"always",stringTextToggle:!1,stringTextDefaultOn:!0,geojsonFiles:[{url:"/dc-cable-pulling-progress/full.geojson",name:"full",color:"rgba(255,255,255,0.55)",fillColor:"transparent"},{url:"/dc-cable-pulling-progress/string_text.geojson",name:"string_text",color:"#dc2626",fillColor:"#ef4444"},{url:"/dc-cable-pulling-progress/inv_id.geojson",name:"inv_id",color:"#16a34a",fillColor:"#22c55e"},{url:"/dc-cable-pulling-progress/lv_box.geojson",name:"lv_box",color:"#eab308",fillColor:"#facc15",weight:3},{url:"/dc-cable-pulling-progress/boundry.geojson",name:"boundry",color:"rgba(239, 68, 68, 0.7)",fillColor:"transparent",weight:1.2,fillOpacity:0,interactive:!1}]},u1={key:"LV",label:"LV CABLE PULLING PROGRESS TRACKING",csvFormat:"lv",csvPath:"/LV_CABLE_PULLING _PROGRESS_TRACKING/lv_pulling.csv",linkPath:"/LV_CABLE_PULLING _PROGRESS_TRACKING/link",stringTextVisibility:"cursor",stringTextToggle:!0,stringTextDefaultOn:!1,invIdTextScale:.8,invIdTextBaseSize:12,invIdTextStyle:"600",invIdTextMinFontSize:7,invIdTextMaxFontSize:14,invIdTextRefZoom:20,invIdTextStrokeColor:"rgba(0,0,0,0.8)",invIdTextStrokeWidthFactor:1,invIdTextBgColor:null,invIdTextBgPaddingX:0,invIdTextBgPaddingY:0,invIdTextBgStrokeColor:null,invIdTextBgStrokeWidth:0,invIdTextBgCornerRadius:0,invIdDoneTextColor:"rgba(34,197,94,1)",invIdDoneTextColorNoBg:"rgba(34,197,94,1)",invIdDoneBgColor:null,invIdDoneBgStrokeColor:null,invIdDoneBgStrokeWidth:0,invIdHighlightTextColor:"rgba(249,115,22,1)",invIdHighlightBgColor:null,invIdHighlightBgStrokeColor:null,invIdHighlightBgStrokeWidth:0,invIdTextMinTextZoom:17,invIdTextMinBgZoom:99,geojsonFiles:[{url:"/LV_CABLE_PULLING _PROGRESS_TRACKING/full.geojson",name:"full",color:"rgba(100,116,139,0.45)",fillColor:"transparent"},{url:"/LV_CABLE_PULLING _PROGRESS_TRACKING/string_text.geojson",name:"string_text",color:"#dc2626",fillColor:"#ef4444"},{url:"/LV_CABLE_PULLING _PROGRESS_TRACKING/inv_id.geojson",name:"inv_id",color:"#16a34a",fillColor:"#22c55e"},{url:"/LV_CABLE_PULLING _PROGRESS_TRACKING/lv_box.geojson",name:"lv_box",color:"rgba(250,204,21,0.7)",fillColor:"transparent",weight:2,fillOpacity:0},{url:"/LV_CABLE_PULLING _PROGRESS_TRACKING/boundry.geojson",name:"boundry",color:"rgba(239, 68, 68, 0.7)",fillColor:"transparent",weight:1.2,fillOpacity:0,interactive:!1}]},f1={key:"MVF",label:"MV PULLING PROGRESS TRACKING",csvFormat:"mvf",csvPath:"/MV_PULLING_PROGRESS_TRACKING/mv_cable.csv",linkPath:"/MV_PULLING_PROGRESS_TRACKING/link",circuitsMultiplier:3,stringTextVisibility:"always",stringTextToggle:!0,stringTextDefaultOn:!0,simpleCounters:!0,stringTextColor:"rgba(250,204,21,0.65)",stringTextBaseSize:16,stringTextStyle:"400",stringTextStrokeColor:"rgba(0,0,0,0.6)",stringTextStrokeWidthFactor:1,stringTextMinZoom:0,stringTextMinFontSize:10,stringTextMaxFontSize:18,stringTextRefZoom:20,geojsonFiles:[{url:"/MV_PULLING_PROGRESS_TRACKING/full.geojson",name:"full",color:"#2563eb",fillColor:"#3b82f6"},{url:"/MV_PULLING_PROGRESS_TRACKING/mv_trench.geojson",name:"mv_trench",color:"#eab308",fillColor:"#facc15"},{url:"/MV_PULLING_PROGRESS_TRACKING/subs.geojson",name:"subs",color:"#94a3b8",fillColor:"#94a3b8"},{url:"/MV_PULLING_PROGRESS_TRACKING/subs_text.geojson",name:"string_text",color:"#dc2626",fillColor:"#ef4444"},{url:"/MV_PULLING_PROGRESS_TRACKING/boundry.geojson",name:"boundry",color:"rgba(239, 68, 68, 0.7)",fillColor:"transparent",weight:1.2,fillOpacity:0,interactive:!1}]},d1={key:"MVFT",label:"MV&FIBRE TRENCH PROGRESS",csvFormat:null,csvPath:null,linkPath:"/MV+FIBRE_TRENCH_PROGRESS_TRACKING/link",simpleCounters:!0,simpleCounterUnit:"m",submitWorkUnit:"m excavated",stringTextVisibility:"always",stringTextToggle:!0,stringTextDefaultOn:!0,stringTextColor:"rgba(250,204,21,0.60)",stringTextBaseSize:22,stringTextStyle:"400",stringTextStrokeColor:"rgba(0,0,0,0.85)",stringTextStrokeWidthFactor:1.2,stringTextMinZoom:0,stringTextMinFontSize:14,stringTextMaxFontSize:26,stringTextRefZoom:20,geojsonFiles:[{url:"/MV+FIBRE_TRENCH_PROGRESS_TRACKING/full.geojson",name:"full",color:"rgba(255,255,255,0.55)",fillColor:"transparent",interactive:!1},{url:"/MV+FIBRE_TRENCH_PROGRESS_TRACKING/mv_trench.geojson",name:"trench",color:"rgba(255,255,255,0.55)",fillColor:"rgba(255,255,255,0.55)",weight:1.5},{url:"/MV+FIBRE_TRENCH_PROGRESS_TRACKING/subs.geojson",name:"subs",color:"#94a3b8",fillColor:"#94a3b8"},{url:"/MV+FIBRE_TRENCH_PROGRESS_TRACKING/subs_text.geojson",name:"string_text",color:"#dc2626",fillColor:"#ef4444"},{url:"/MV+FIBRE_TRENCH_PROGRESS_TRACKING/boundry.geojson",name:"boundry",color:"rgba(239, 68, 68, 0.7)",fillColor:"transparent",weight:1.2,fillOpacity:0,interactive:!1}]},h1={key:"FIB",label:"FIBRE PULLING PROGRESS TRACKING",csvFormat:"mvf",csvPath:"/FIBRE_PULLING_PROGRESS_TRACKING/fibre_cable.csv",linkPath:"/FIBRE_PULLING_PROGRESS_TRACKING/link",circuitsMultiplier:1,simpleCounters:!0,stringTextVisibility:"always",stringTextToggle:!0,stringTextDefaultOn:!0,stringTextColor:"rgba(250,204,21,0.98)",stringTextBaseSize:22,stringTextStyle:"400",stringTextStrokeColor:"rgba(0,0,0,0.85)",stringTextStrokeWidthFactor:1.2,stringTextMinZoom:0,stringTextMinFontSize:14,stringTextMaxFontSize:26,stringTextRefZoom:20,geojsonFiles:[{url:"/FIBRE_PULLING_PROGRESS_TRACKING/full.geojson",name:"full",color:"#2563eb",fillColor:"#3b82f6"},{url:"/FIBRE_PULLING_PROGRESS_TRACKING/mv_trench.geojson",name:"mv_trench",color:"#eab308",fillColor:"#facc15"},{url:"/FIBRE_PULLING_PROGRESS_TRACKING/subs.geojson",name:"subs",color:"#94a3b8",fillColor:"#94a3b8"},{url:"/FIBRE_PULLING_PROGRESS_TRACKING/subs_text.geojson",name:"string_text",color:"#dc2626",fillColor:"#ef4444"},{url:"/FIBRE_PULLING_PROGRESS_TRACKING/boundry.geojson",name:"boundry",color:"rgba(239, 68, 68, 0.7)",fillColor:"transparent",weight:1.2,fillOpacity:0,interactive:!1}]},p1={key:"MC4",label:"MC4 Installation",csvFormat:"mc4_strings",csvPath:"/MC4_INSTALLATION_AND_DC_TERMINATION_PROGRESS_TRACKING/dc_strings.csv",linkPath:"/MC4_INSTALLATION_AND_DC_TERMINATION_PROGRESS_TRACKING/link",mc4TotalEnds:9517,mc4DefaultStrings:9056,invIdLabelMode:!0,invIdTextScale:.8,invIdTextBaseSize:12,invIdTextStyle:"600",invIdTextMinFontSize:7,invIdTextMaxFontSize:14,invIdTextRefZoom:20,invIdTextStrokeColor:"rgba(0,0,0,0.8)",invIdTextStrokeWidthFactor:1,invIdTextBgColor:null,invIdTextBgPaddingX:0,invIdTextBgPaddingY:0,invIdTextBgStrokeColor:null,invIdTextBgStrokeWidth:0,invIdTextBgCornerRadius:0,invIdDoneTextColor:"rgba(34,197,94,1)",invIdDoneTextColorNoBg:"rgba(34,197,94,1)",invIdDoneBgColor:null,invIdDoneBgStrokeColor:null,invIdDoneBgStrokeWidth:0,invIdHighlightTextColor:"rgba(249,115,22,1)",invIdHighlightBgColor:null,invIdHighlightBgStrokeColor:null,invIdHighlightBgStrokeWidth:0,invIdTextMinTextZoom:17,invIdTextMinBgZoom:99,stringTextVisibility:"always",stringTextToggle:!1,stringTextDefaultOn:!1,stringTextColor:"rgba(250,204,21,0.65)",stringTextBaseSize:22,stringTextStyle:"400",stringTextStrokeColor:"rgba(0,0,0,0.85)",stringTextStrokeWidthFactor:1.2,stringTextMinZoom:0,stringTextMinFontSize:14,stringTextMaxFontSize:26,stringTextRefZoom:20,geojsonFiles:[{url:"/MC4_INSTALLATION_AND_DC_TERMINATION_PROGRESS_TRACKING/full.geojson",name:"full",color:"#2563eb",fillColor:"#3b82f6"},{url:"/MC4_INSTALLATION_AND_DC_TERMINATION_PROGRESS_TRACKING/subs_text.geojson",name:"string_text",color:"#dc2626",fillColor:"#ef4444"},{url:"/MC4_INSTALLATION_AND_DC_TERMINATION_PROGRESS_TRACKING/subs.geojson",name:"subs",color:"#94a3b8",fillColor:"#94a3b8"},{url:"/MC4_INSTALLATION_AND_DC_TERMINATION_PROGRESS_TRACKING/inv_id.geojson",name:"inv_id",color:"#16a34a",fillColor:"#22c55e"},{url:"/MC4_INSTALLATION_AND_DC_TERMINATION_PROGRESS_TRACKING/lv_box.geojson",name:"lv_box",color:"#eab308",fillColor:"#facc15",weight:3,fillOpacity:.6},{url:"/MC4_INSTALLATION_AND_DC_TERMINATION_PROGRESS_TRACKING/boundry.geojson",name:"boundry",color:"rgba(239, 68, 68, 0.7)",fillColor:"transparent",weight:1.2,fillOpacity:0,interactive:!1}]},m1={key:"DCTT",label:"DC TERMINATION & TESTING PROGRESS",csvFormat:"mc4_strings",csvPath:"/MC4_INSTALLATION_AND_DC_TERMINATION_PROGRESS_TRACKING/dc_strings.csv",linkPath:"/DC_TERMINATION_and_TESTING PROGRESS/link",dcttTotalEnds:9517,invIdLabelMode:!0,invIdTextScale:.8,invIdTextBaseSize:12,invIdTextStyle:"600",invIdTextMinFontSize:7,invIdTextMaxFontSize:14,invIdTextRefZoom:20,invIdTextStrokeColor:"rgba(0,0,0,0.8)",invIdTextStrokeWidthFactor:1,invIdTextBgColor:null,invIdTextBgPaddingX:0,invIdTextBgPaddingY:0,invIdTextBgStrokeColor:null,invIdTextBgStrokeWidth:0,invIdTextBgCornerRadius:0,invIdDoneTextColor:"rgba(34,197,94,1)",invIdDoneTextColorNoBg:"rgba(34,197,94,1)",invIdDoneBgColor:null,invIdDoneBgStrokeColor:null,invIdDoneBgStrokeWidth:0,invIdHighlightTextColor:"rgba(249,115,22,1)",invIdHighlightBgColor:null,invIdHighlightBgStrokeColor:null,invIdHighlightBgStrokeWidth:0,invIdTextMinTextZoom:17,invIdTextMinBgZoom:99,stringTextVisibility:"always",stringTextToggle:!1,stringTextDefaultOn:!0,stringTextColor:"rgba(255,255,255,0.92)",stringTextBaseSize:11,stringTextStyle:"300",stringTextStrokeColor:"rgba(0,0,0,0.6)",stringTextStrokeWidthFactor:1,stringTextMinZoom:18,stringTextMinFontSize:null,stringTextMaxFontSize:null,stringTextRefZoom:20,geojsonFiles:[{url:"/DC_TERMINATION_and_TESTING PROGRESS/full_line.geojson",name:"full",color:"#2563eb",fillColor:"#3b82f6"},{url:"/DC_TERMINATION_and_TESTING PROGRESS/string_text.geojson",name:"string_text",color:"#dc2626",fillColor:"#ef4444"},{url:"/DC_TERMINATION_and_TESTING PROGRESS/inv_id.geojson",name:"inv_id",color:"#16a34a",fillColor:"#22c55e"},{url:"/DC_TERMINATION_and_TESTING PROGRESS/inv_box.geojson",name:"lv_box",color:"#eab308",fillColor:"#facc15",weight:3,fillOpacity:.6},{url:"/DC_TERMINATION_and_TESTING PROGRESS/boundry.geojson",name:"boundry",color:"rgba(239, 68, 68, 0.7)",fillColor:"transparent",weight:1.2,fillOpacity:0,interactive:!1}]},g1={key:"MVT",label:"MV Termination & Testing Progress",csvFormat:null,csvPath:null,linkPath:"/MV_TERMINATION_PROGRESS_TRACKING/link",simpleCounters:!0,stringTextVisibility:"always",stringTextToggle:!0,stringTextDefaultOn:!0,stringTextColor:"rgba(255,255,255,0.98)",stringTextBaseSize:22,stringTextStyle:"400",stringTextStrokeColor:"rgba(0,0,0,0.85)",stringTextStrokeWidthFactor:1.2,stringTextMinZoom:0,stringTextMinFontSize:14,stringTextMaxFontSize:26,stringTextRefZoom:20,geojsonFiles:[{url:"/MV_TERMINATION_PROGRESS_TRACKING/full.geojson",name:"full",color:"#2563eb",fillColor:"#3b82f6"},{url:"/MV_TERMINATION_PROGRESS_TRACKING/mv_trench.geojson",name:"mv_trench",color:"#eab308",fillColor:"#facc15"},{url:"/MV_TERMINATION_PROGRESS_TRACKING/subs.geojson",name:"subs",color:"#94a3b8",fillColor:"#94a3b8"},{url:"/MV_TERMINATION_PROGRESS_TRACKING/subs_text.geojson",name:"string_text",color:"#dc2626",fillColor:"#ef4444"},{url:"/MV_TERMINATION_PROGRESS_TRACKING/mv_text.geojson",name:"mv_text",color:"#22c55e",fillColor:"#22c55e"},{url:"/MV_TERMINATION_PROGRESS_TRACKING/arrow.geojson",name:"arrow",color:"#f97316",fillColor:"#fb923c"},{url:"/MV_TERMINATION_PROGRESS_TRACKING/boundry.geojson",name:"boundry",color:"rgba(239, 68, 68, 0.7)",fillColor:"transparent",weight:1.2,fillOpacity:0,interactive:!1}]},b1={key:"LVTT",label:"LV TERMINATION & TESTING PROGRESS",csvFormat:null,csvPath:"/LV_TERMINATION_and_TESTING PROGRESS/lv_testing.csv",linkPath:"/LV_TERMINATION_and_TESTING PROGRESS/link",simpleCounters:!0,stringTextVisibility:"always",stringTextToggle:!0,stringTextDefaultOn:!0,stringTextColor:"rgba(255,255,255,0.98)",stringTextBaseSize:22,stringTextStyle:"400",stringTextStrokeColor:"rgba(0,0,0,0.85)",stringTextStrokeWidthFactor:1.2,stringTextMinZoom:0,stringTextMinFontSize:14,stringTextMaxFontSize:26,stringTextRefZoom:20,invIdLabelMode:!0,invIdTextScale:.8,invIdTextBaseSize:12,invIdTextStyle:"600",invIdTextMinFontSize:7,invIdTextMaxFontSize:14,invIdTextRefZoom:20,invIdTextStrokeColor:"rgba(0,0,0,0.8)",invIdTextStrokeWidthFactor:1,invIdTextBgColor:null,invIdTextBgPaddingX:0,invIdTextBgPaddingY:0,invIdTextBgStrokeColor:null,invIdTextBgStrokeWidth:0,invIdTextBgCornerRadius:0,invIdDoneTextColor:"rgba(34,197,94,1)",invIdDoneTextColorNoBg:"rgba(34,197,94,1)",invIdDoneBgColor:null,invIdDoneBgStrokeColor:null,invIdDoneBgStrokeWidth:0,invIdHighlightTextColor:"rgba(249,115,22,1)",invIdHighlightBgColor:null,invIdHighlightBgStrokeColor:null,invIdHighlightBgStrokeWidth:0,invIdTextMinTextZoom:17,invIdTextMinBgZoom:99,geojsonFiles:[{url:"/LV_TERMINATION_and_TESTING PROGRESS/full.geojson",name:"full",color:"#2563eb",fillColor:"#3b82f6"},{url:"/LV_TERMINATION_and_TESTING PROGRESS/subs_text.geojson",name:"string_text",color:"#dc2626",fillColor:"#ef4444"},{url:"/LV_TERMINATION_and_TESTING PROGRESS/inv_id.geojson",name:"inv_id",color:"#16a34a",fillColor:"#22c55e"},{url:"/LV_TERMINATION_and_TESTING PROGRESS/inv_box.geojson",name:"lv_box",color:"#eab308",fillColor:"#facc15",weight:3,fillOpacity:.6},{url:"/LV_TERMINATION_and_TESTING PROGRESS/boundry.geojson",name:"boundry",color:"rgba(239, 68, 68, 0.7)",fillColor:"transparent",weight:1.2,fillOpacity:0,interactive:!1}]},y1={key:"DCCT",label:"DC CABLE TESTING PROGRESS",csvFormat:"dcct_riso",csvPath:"/DC_CABLE_TESTING_PROGRESS/dc_riso.csv",linkPath:"/DC_CABLE_TESTING_PROGRESS/link",simpleCounters:!1,dcctMode:!0,stringTextVisibility:"always",stringTextToggle:!1,stringTextDefaultOn:!0,stringTextColor:"rgba(255,255,255,0.92)",stringTextBaseSize:11,stringTextStyle:"300",stringTextStrokeColor:"rgba(0,0,0,0.6)",stringTextStrokeWidthFactor:1,stringTextMinZoom:18,stringTextMinFontSize:null,stringTextMaxFontSize:null,stringTextRefZoom:20,invIdLabelMode:!1,geojsonFiles:[{url:"/DC_CABLE_TESTING_PROGRESS/full.geojson",name:"full",color:"rgba(255,255,255,0.55)",fillColor:"transparent"},{url:"/DC_CABLE_TESTING_PROGRESS/string_text.geojson",name:"string_text",color:"#dc2626",fillColor:"#ef4444"},{url:"/DC_CABLE_TESTING_PROGRESS/inv_id.geojson",name:"inv_id",color:"#16a34a",fillColor:"#22c55e"},{url:"/DC_CABLE_TESTING_PROGRESS/lv_box.geojson",name:"lv_box",color:"#eab308",fillColor:"#facc15",weight:3,fillOpacity:.6},{url:"/DC_CABLE_TESTING_PROGRESS/boundry.geojson",name:"boundry",color:"rgba(239, 68, 68, 0.7)",fillColor:"transparent",weight:1.2,fillOpacity:0,interactive:!1}]},v1={key:"MIPT",label:"MODULE_INSTALLATION_PROGRES_TRACKING",csvFormat:null,csvPath:null,linkPath:"/MODULE_INSTALLATION_PROGRES_TRACKING/link",simpleCounters:!0,simpleCounterUnit:"",workUnitWeights:{long:27,medium:14,short:13},stringTextVisibility:"always",stringTextToggle:!0,stringTextDefaultOn:!0,stringTextColor:"rgba(255,255,255,0.98)",stringTextBaseSize:22,stringTextStyle:"400",stringTextStrokeColor:"rgba(0,0,0,0.85)",stringTextStrokeWidthFactor:1.2,stringTextMinZoom:0,stringTextMinFontSize:14,stringTextMaxFontSize:26,stringTextRefZoom:20,geojsonFiles:[{url:"/MODULE_INSTALLATION_PROGRES_TRACKING/full.geojson",name:"full",color:"#2563eb",fillColor:"#3b82f6"},{url:"/MODULE_INSTALLATION_PROGRES_TRACKING/string_text.geojson",name:"string_text",color:"#dc2626",fillColor:"#ef4444"},{url:"/MODULE_INSTALLATION_PROGRES_TRACKING/inv_id.geojson",name:"inv_id",color:"#16a34a",fillColor:"#22c55e"},{url:"/MODULE_INSTALLATION_PROGRES_TRACKING/inv_box.geojson",name:"lv_box",color:"#eab308",fillColor:"#facc15",weight:3,fillOpacity:.6}]},x1={key:"TIP",label:"TABLE_INSTALLATION_PROGRESS",csvFormat:null,csvPath:null,linkPath:"/TABLE_INSTALLATION_PROGRESS/link",simpleCounters:!0,simpleCounterUnit:"",tableCounters:!0,tableAreaThreshold:50,smallTableLabel:"2V14",bigTableLabel:"2V27",stringTextVisibility:"always",stringTextToggle:!1,stringTextDefaultOn:!1,stringTextColor:"rgba(255,255,255,0)",stringTextBaseSize:22,stringTextStyle:"400",stringTextStrokeColor:"rgba(0,0,0,0)",stringTextStrokeWidthFactor:1.2,stringTextMinZoom:0,stringTextMinFontSize:14,stringTextMaxFontSize:26,stringTextRefZoom:20,geojsonFiles:[{url:"/TABLE_INSTALLATION_PROGRESS/full.geojson",name:"full",color:"#2563eb",fillColor:"#3b82f6"},{url:"/TABLE_INSTALLATION_PROGRESS/inv_id.geojson",name:"inv_id",color:"#16a34a",fillColor:"#22c55e"},{url:"/TABLE_INSTALLATION_PROGRESS/inv_box.geojson",name:"lv_box",color:"#eab308",fillColor:"#facc15",weight:3,fillOpacity:.6}]},_1={key:"LVIB",label:"LV BOX & INV BOX INSTALLATION PROGRESS TRACKING",csvFormat:null,csvPath:null,linkPath:"/LV_BOX_INV_BOX_INSTALLATION_PROGRESS_TRACKING/link",simpleCounters:!0,simpleCounterUnit:"",boxLabelsEnabled:!0,lvBoxLabel:"LV",invBoxLabel:"INV",boxLabelTextBaseSize:6,boxLabelTextStyle:"400",boxLabelTextMinFontSize:4,boxLabelTextMaxFontSize:10,boxLabelTextRefZoom:20,boxLabelTextStrokeColor:"rgba(0,0,0,0.7)",boxLabelTextStrokeWidthFactor:.8,stringTextVisibility:"always",stringTextToggle:!0,stringTextDefaultOn:!0,stringTextColor:"rgba(250,204,21,0.98)",stringTextBaseSize:22,stringTextStyle:"400",stringTextStrokeColor:"rgba(0,0,0,0.85)",stringTextStrokeWidthFactor:1.2,stringTextMinZoom:0,stringTextMinFontSize:14,stringTextMaxFontSize:26,stringTextRefZoom:20,geojsonFiles:[{url:"/LV_BOX_INV_BOX_INSTALLATION_PROGRESS_TRACKING/full.geojson",name:"full",color:"#2563eb",fillColor:"#3b82f6"},{url:"/LV_BOX_INV_BOX_INSTALLATION_PROGRESS_TRACKING/inv_id.geojson",name:"inv_id",color:"#16a34a",fillColor:"#22c55e"},{url:"/LV_BOX_INV_BOX_INSTALLATION_PROGRESS_TRACKING/lv_box.geojson",name:"lv_box",color:"#dc2626",fillColor:"#ef4444",weight:3,fillOpacity:.6,boxLabel:"LV"},{url:"/LV_BOX_INV_BOX_INSTALLATION_PROGRESS_TRACKING/inv_box.geojson",name:"inv_box",color:"#dc2626",fillColor:"#ef4444",weight:3,fillOpacity:.6,boxLabel:"INV"}]},w1={key:"PTEP",label:"PARAMETER & TABLE EARTHING PROGRESS",csvFormat:null,csvPath:null,linkPath:"/PARAMETER_and_TABLE_EARTHING_PROGRESS/link",simpleCounters:!0,simpleCounterUnit:"",earthingMode:!0,stringTextVisibility:"always",stringTextToggle:!0,stringTextDefaultOn:!0,stringTextColor:"rgba(250,204,21,0.98)",stringTextBaseSize:22,stringTextStyle:"400",stringTextStrokeColor:"rgba(0,0,0,0.85)",stringTextStrokeWidthFactor:1.2,stringTextMinZoom:0,stringTextMinFontSize:14,stringTextMaxFontSize:26,stringTextRefZoom:20,geojsonFiles:[{url:"/PARAMETER_and_TABLE_EARTHING_PROGRESS/earthing_full.geojson",name:"earthing_full",color:"rgba(255,255,255,0.26)",fillColor:"transparent"},{url:"/PARAMETER_and_TABLE_EARTHING_PROGRESS/earthing_parameter.geojson",name:"earthing_parameter",color:"rgba(255,255,255,0.5)",fillColor:"transparent"},{url:"/PARAMETER_and_TABLE_EARTHING_PROGRESS/earthing_tabletotable.geojson",name:"earthing_tabletotable",color:"#ffffff",fillColor:"transparent"}]},S1={key:"DATP",label:"DC&AC TRENCH PROGRESS",csvFormat:null,csvPath:null,linkPath:"/DC_AC_TRENCH_PROGRESS/link",simpleCounters:!0,simpleCounterUnit:"m",submitWorkUnit:"m excavated",stringTextVisibility:"always",stringTextToggle:!1,stringTextDefaultOn:!0,stringTextMinZoom:18,geojsonFiles:[{url:"/DC_AC_TRENCH_PROGRESS/dc_trench_full_panels.geojson",name:"full",color:"#64748b",fillColor:"#475569",weight:1,fillOpacity:.2},{url:"/DC_AC_TRENCH_PROGRESS/dc_trench_boundry.geojson",name:"boundry",color:"#ef4444",fillColor:"transparent",weight:3},{url:"/DC_AC_TRENCH_PROGRESS/dc_trench_trench_line.geojson",name:"trench",color:"#3b82f6",fillColor:"#3b82f6",weight:2.5},{url:"/DC_AC_TRENCH_PROGRESS/dc_trench_text.geojson",name:"string_text",color:"#facc15",fillColor:"#facc15"}]},T1={key:"PL",label:"PUNCH LIST",basePath:"/PUNCH_LIST",csvFormat:null,csvPath:null,linkPath:"/PUNCH_LIST/link",simpleCounters:!0,simpleCounterUnit:"",stringTextVisibility:"always",stringTextToggle:!0,stringTextDefaultOn:!0,stringTextColor:"rgba(255,255,255,0.98)",stringTextBaseSize:22,stringTextStyle:"400",stringTextStrokeColor:"rgba(0,0,0,0.85)",stringTextStrokeWidthFactor:1.2,stringTextMinZoom:0,stringTextMinFontSize:14,stringTextMaxFontSize:26,stringTextRefZoom:20,geojsonFiles:[{url:"/PUNCH_LIST/full.geojson",name:"full",color:"#2563eb",fillColor:"#3b82f6"},{url:"/PUNCH_LIST/inv_id.geojson",name:"inv_id",color:"#16a34a",fillColor:"#22c55e"},{url:"/PUNCH_LIST/inv_box.geojson",name:"inv_box",color:"#eab308",fillColor:"#facc15",weight:3,fillOpacity:.6}]},iS=_o({name:c1.label,counters:!0,customLogic:null,moduleConfig:c1}),sS=_o({name:u1.label,counters:!0,customLogic:null,moduleConfig:u1}),oS=_o({name:f1.label,counters:!0,customLogic:null,moduleConfig:f1}),aS=_o({name:d1.label,counters:!0,customLogic:null,moduleConfig:d1}),lS=_o({name:h1.label,counters:!0,customLogic:null,moduleConfig:h1}),cS=_o({name:p1.label,counters:!0,customLogic:null,moduleConfig:p1}),uS=_o({name:g1.label,counters:!0,customLogic:null,moduleConfig:g1}),fS=_o({name:b1.label,counters:!0,customLogic:null,moduleConfig:b1}),dS=_o({name:y1.label,counters:!0,customLogic:null,moduleConfig:y1}),hS=_o({name:m1.label,counters:!0,customLogic:null,moduleConfig:m1}),pS=_o({name:v1.label,counters:!0,customLogic:null,moduleConfig:v1}),mS=_o({name:x1.label,counters:!0,customLogic:null,moduleConfig:x1}),gS=_o({name:_1.label,counters:!0,customLogic:null,moduleConfig:_1}),bS=_o({name:T1.label,counters:!0,customLogic:null,moduleConfig:T1}),yS=_o({name:w1.label,counters:!0,customLogic:null,moduleConfig:w1}),vS=_o({name:S1.label,counters:!0,customLogic:null,moduleConfig:S1}),zg={ITPs:{type:"category",label:"ITPs",fixed:!0,children:{"itp-civil":{type:"folder",label:"Civil",fixed:!0,publicPath:"/QAQC/ITPs/civil",children:{}},"itp-electrical":{type:"folder",label:"Electrical",fixed:!0,publicPath:"/QAQC/ITPs/electrical",children:{}},"itp-mechanical":{type:"folder",label:"Mechanical",fixed:!0,publicPath:"/QAQC/ITPs/mechanical",children:{}}}},Checklists:{type:"category",label:"Checklists",fixed:!0,children:{"cl-electrical":{type:"folder",label:"Electrical",fixed:!0,children:{"cl-dc-cable":{type:"folder",label:"DC Cable Laying & Termination",fixed:!0,allowMultiple:!0,publicPath:"/QAQC/Checklists/electrical/dc-cable",children:{}},"cl-earthing-foc":{type:"folder",label:"Earthing & FOC",fixed:!0,allowMultiple:!0,publicPath:"/QAQC/Checklists/electrical/earthing-foc",children:{}},"cl-inverter-lv":{type:"folder",label:"Installation Inverter & LV Boxes Installation",fixed:!0,allowMultiple:!0,publicPath:"/QAQC/Checklists/electrical/inverter-lv",children:{}}}},"cl-mechanical":{type:"folder",label:"Mechanical",fixed:!0,children:{"cl-module-installation":{type:"folder",label:"Module Installation",fixed:!0,allowMultiple:!0,publicPath:"/QAQC/Checklists/mechanical/module-installation",children:{}},"cl-mounting-structure":{type:"folder",label:"Mounting Structure Assembly",fixed:!0,allowMultiple:!0,publicPath:"/QAQC/Checklists/mechanical/mounting-structure-assembly",children:{}}}}}},NCRs:{type:"category",label:"NCRs",fixed:!0,isNCR:!0,allowMultiple:!0,publicPath:"/QAQC/NCRs",children:{}},ThirdParty:{type:"category",label:"Third Party",fixed:!0,children:{"tp-dnv":{type:"folder",label:"DNV",fixed:!0,allowMultiple:!0,publicPath:"/QAQC/ThirdParty/DNV",children:{}},"tp-cea":{type:"folder",label:"CEA",fixed:!0,allowMultiple:!0,publicPath:"/QAQC/ThirdParty/CEA",children:{}}}},Random:{type:"category",label:"Random",fixed:!0,allowFolderCreation:!0,allowMultiple:!0,children:{}}},xS={INCOMPLETE:{key:"incomplete",label:"Incomplete",color:"#ef4444",bgColor:"rgba(239,68,68,0.15)"},IN_PROGRESS:{key:"in_progress",label:"In Progress",color:"#f59e0b",bgColor:"rgba(245,158,11,0.15)"},COMPLETED:{key:"completed",label:"Completed",color:"#22c55e",bgColor:"rgba(34,197,94,0.15)"}},_S={OPEN:{key:"open",label:"Open",color:"#ef4444",bgColor:"rgba(239,68,68,0.15)"},IN_PROGRESS:{key:"in_progress",label:"In Progress",color:"#f59e0b",bgColor:"rgba(245,158,11,0.15)"},CLOSED:{key:"closed",label:"Closed",color:"#22c55e",bgColor:"rgba(34,197,94,0.15)"}};function tg(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const eg="cew-qaqc-metadata";function Lv(m){return JSON.parse(JSON.stringify(m))}function Pv(m,a){if(!m)return a;if(!a)return Lv(m);const t={...a};if(m.type&&(t.type=m.type),m.label){const s=a.labelOverride;t.label=s??a.label??m.label}if(m.fixed!==void 0&&(t.fixed=m.fixed),m.isNCR!==void 0&&(t.isNCR=m.isNCR),m.allowMultiple!==void 0&&(t.allowMultiple=m.allowMultiple),m.publicPath!==void 0&&(t.publicPath=m.publicPath),a.hidden!==void 0&&(t.hidden=a.hidden),m.children){t.children=t.children||{};for(const[s,u]of Object.entries(m.children))t.children[s]=Pv(u,t.children[s])}return t}function $0(){const m=localStorage.getItem(eg);if(console.log("[initializeMetadata] Existing data:",m?"found":"none"),m)try{const t=JSON.parse(m),s={...t,tree:{}};for(const[u,o]of Object.entries(zg))s.tree[u]=Pv(o,t.tree?.[u]);for(const[u,o]of Object.entries(t.tree||{}))u in zg||(s.tree[u]=o);return s.updatedAt=Date.now(),console.log("[initializeMetadata] Merged tree keys:",Object.keys(s.tree)),console.log("[initializeMetadata] ITPs children:",Object.keys(s.tree?.ITPs?.children||{})),oo(s),s}catch(t){console.error("Failed to parse QAQC metadata:",t)}const a={version:1,createdAt:Date.now(),updatedAt:Date.now(),tree:Lv(zg),publicFileStatuses:{}};return console.log("[initializeMetadata] Fresh init, tree keys:",Object.keys(a.tree)),oo(a),a}function wS(){return localStorage.removeItem(eg),$0()}function xo(){const m=localStorage.getItem(eg);if(!m)return $0();try{return JSON.parse(m)}catch{return $0()}}function oo(m){m.updatedAt=Date.now(),localStorage.setItem(eg,JSON.stringify(m))}function C1(m,a,t){const s=xo(),u=s.tree[m];if(console.log("[addDocument] Starting:",{categoryKey:m,folderPath:a,category:!!u}),!u)return console.log("[addDocument] Category not found:",m),null;let o=u;if(a&&a.length>0){console.log("[addDocument] Navigating path:",a);for(const c of a)if(console.log("[addDocument] Looking for child:",c,"in",Object.keys(o.children||{})),o.children&&o.children[c])o=o.children[c];else return console.log("[addDocument] Path not found at:",c),null}o.children||(o.children={});const r=tg();return o.children[r]={type:"document",label:t.name,fileId:t.fileId,fileName:t.fileName,fileType:t.fileType,fileSize:t.fileSize,uploadedAt:t.uploadedAt||Date.now(),status:u.isNCR?"open":"incomplete"},console.log("[addDocument] Document added with ID:",r),oo(s),r}function SS(m,a,t){const s=xo(),u=s.tree[m];if(!u||!u.children||!u.children[a])return!1;const o=u.children[a],r=o.fileId||null;return o.fileId=t.fileId,o.fileName=t.fileName,o.fileType=t.fileType,o.fileSize=t.fileSize,o.uploadedAt=t.uploadedAt||Date.now(),o.status||(o.status="incomplete"),oo(s),r}function TS(m,a){const t=xo(),s=t.tree[m];if(!s||!s.children||!s.children[a])return null;const u=s.children[a],o=u.fileId||null;return delete u.fileId,delete u.fileName,delete u.fileType,delete u.fileSize,delete u.uploadedAt,u.status=s.isNCR?"open":"incomplete",oo(t),o}function CS(m,a,t){const s=xo(),u=s.tree[m];if(!u)return null;let o=u;for(const c of a)if(o.children&&o.children[c])o=o.children[c];else return null;if(o.type!=="document")return null;const r=o.fileId||null;return o.fileId=t.fileId,o.fileName=t.fileName,o.fileType=t.fileType,o.fileSize=t.fileSize,o.uploadedAt=t.uploadedAt||Date.now(),o.label=t.name||o.label,o.status||(o.status=u.isNCR?"open":"incomplete"),oo(s),r}function kS(m,a,t){const s=xo(),u=s.tree[m];if(!u)return!1;let o=u;if(a&&a.length>0)for(const r of a)if(o.children&&o.children[r])o=o.children[r];else if(o[r])o=o[r];else return!1;return o.status=t,oo(s),!0}function MS(m,a){const t=xo();return t.publicFileStatuses||(t.publicFileStatuses={}),t.publicFileStatuses[m]=a,oo(t),!0}function ES(m,a){const t=xo(),s=t.tree[m];if(!s)return null;if(a.length===1){const u=a[0],o=s.children?.[u];if(o){const r=o.fileId;return delete s.children[u],oo(t),r}}else{let u=s;for(let c=0;c<a.length-1;c++)if(u.children&&u.children[a[c]])u=u.children[a[c]];else return null;const o=a[a.length-1],r=u.children?.[o];if(r){const c=r.fileId;return delete u.children[o],oo(t),c}}return null}function NS(m,a,t){const s=xo(),u=s.tree[m];if(console.log("[createFolder] Starting:",{categoryKey:m,parentPath:a,folderName:t,category:!!u}),!u)return console.log("[createFolder] Category not found:",m),null;let o=u;if(a&&a.length>0){console.log("[createFolder] Navigating path:",a);for(const c of a)if(console.log("[createFolder] Looking for child:",c,"in",Object.keys(o.children||{})),o.children&&o.children[c])o=o.children[c];else return console.log("[createFolder] Path not found at:",c),null}o.children||(o.children={});const r=tg();return o.children[r]={type:"folder",label:t,fixed:!1,userCreated:!0,allowMultiple:!0,allowFolderCreation:!0,children:{}},console.log("[createFolder] Folder created with ID:",r),oo(s),r}function AS(m){const a=xo(),t="custom-"+tg();return a.tree[t]={type:"category",label:m,fixed:!1,allowFolderCreation:!0,allowMultiple:!0,children:{}},oo(a),t}function RS(m,a){const t=xo(),s=t.tree?.[m];return s?(s.label=a,s.fixed&&(s.labelOverride=a),oo(t),!0):!1}function IS(m){const a=xo(),t=a.tree?.[m];if(!t)return[];if(t.fixed)return[];function s(o){const r=[];if(o.fileId&&r.push(o.fileId),o.children)for(const c of Object.values(o.children))r.push(...s(c));return r}const u=s(t);return delete a.tree[m],oo(a),u}function OS(m,a,t){const s=xo(),u=s.tree[m];if(!u)return!1;let o=u;for(const r of a)if(o.children&&o.children[r])o=o.children[r];else return!1;return o.label=t,o.fixed&&(o.labelOverride=t),oo(s),!0}function jS(m,a){const t=xo(),s=t.tree[m];if(!s)return[];function u(n){const f=[];if(n.fileId&&f.push(n.fileId),n.children)for(const h of Object.values(n.children))f.push(...u(h));return f}let o=s;for(let n=0;n<a.length-1;n++)if(o.children&&o.children[a[n]])o=o.children[a[n]];else return[];const r=a[a.length-1],c=o.children?.[r];if(!c)return[];const l=u(c);return c.fixed?(c.hidden=!0,c.children={},oo(t),l):(delete o.children[r],oo(t),l)}function LS(m,a={}){const t={overall:{total:0,done:0,inProgress:0}};for(const o of Object.keys(m.tree||{}))t[o]=t[o]||{total:0,done:0,inProgress:0};function s(o,r,c=!1){if(t[r]||(t[r]={total:0,done:0,inProgress:0}),o.type==="document"||o.type==="doc-slot")if(o.fileId){t[r].total++,t.overall.total++;const l=c?o.status==="closed":o.status==="completed",n=o.status==="in_progress";l?(t[r].done++,t.overall.done++):n&&(t[r].inProgress++,t.overall.inProgress++)}else o.type==="doc-slot"&&o.required&&(t[r].total++,t.overall.total++);if(o.children)for(const l of Object.values(o.children))s(l,r,c)}for(const[o,r]of Object.entries(m.tree))s(r,o,r.isNCR);const u=m.publicFileStatuses||{};for(const[o,r]of Object.entries(a)){t[o]||(t[o]={total:0,done:0,inProgress:0});for(const[c,l]of Object.entries(r))for(const n of l){const f=`${o}-${c}-${n.name}`,h=u[f]||"incomplete";t[o].total++,t.overall.total++,h==="completed"?(t[o].done++,t.overall.done++):h==="in_progress"&&(t[o].inProgress++,t.overall.inProgress++)}}for(const o of Object.keys(t)){const r=t[o];r.percentage=r.total>0?Math.round(r.done/r.total*100):0,r.inProgressPercentage=r.total>0?Math.round(r.inProgress/r.total*100):0,r.incompletePercentage=r.total>0?Math.round((r.total-r.done-r.inProgress)/r.total*100):0}return t}const PS="cew-qaqc-files",DS=1,Gf="files";let R0=null;function yb(){return R0||(R0=new Promise((m,a)=>{const t=indexedDB.open(PS,DS);t.onerror=()=>a(t.error),t.onsuccess=()=>m(t.result),t.onupgradeneeded=s=>{const u=s.target.result;u.objectStoreNames.contains(Gf)||u.createObjectStore(Gf,{keyPath:"id"})}}),R0)}async function BS(m,a){const t=await yb(),s=await a.arrayBuffer();return new Promise((u,o)=>{const r=t.transaction(Gf,"readwrite"),c=r.objectStore(Gf),l={id:m,name:a.name,type:a.type,size:a.size,data:s,uploadedAt:Date.now()};r.onabort=()=>o(r.error||new Error("IndexedDB transaction aborted")),r.onerror=()=>o(r.error||new Error("IndexedDB transaction failed"));const n=c.put(l);n.onsuccess=()=>u(l),n.onerror=()=>o(n.error)})}async function Dv(m){const a=await yb();return new Promise((t,s)=>{const r=a.transaction(Gf,"readonly").objectStore(Gf).get(m);r.onsuccess=()=>t(r.result||null),r.onerror=()=>s(r.error)})}async function rm(m){const a=await yb();return new Promise((t,s)=>{const r=a.transaction(Gf,"readwrite").objectStore(Gf).delete(m);r.onsuccess=()=>t(),r.onerror=()=>s(r.error)})}function zS(m,a){return new Blob([m],{type:a})}async function FS(m){const a=await Dv(m);if(!a)return null;const t=zS(a.data,a.type);return URL.createObjectURL(t)}typeof window<"u"&&(window.resetQAQCMetadata=()=>{const m=wS();console.log("[QAQC] Metadata reset to fresh state:",m),window.location.reload()},console.log("[QAQC] To reset metadata, run: window.resetQAQCMetadata()"));const US=({category:m})=>{const a={ITPs:q.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})}),Checklists:q.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),NCRs:q.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),ThirdParty:q.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})}),Random:q.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})})};return a[m]||a.Random},Bv=({type:m})=>{const a=m?.includes("pdf"),t=m?.startsWith("image/"),s=m?.includes("sheet")||m?.includes("excel"),u=m?.includes("word")||m?.includes("document");return a?q.jsx("span",{className:"text-red-400",children:"PDF"}):t?q.jsx("span",{className:"text-blue-400",children:"IMG"}):s?q.jsx("span",{className:"text-green-400",children:"XLS"}):u?q.jsx("span",{className:"text-blue-300",children:"DOC"}):q.jsx("span",{className:"text-slate-400",children:"FILE"})},zv=({status:m,isNCR:a,onChange:t,small:s=!1})=>{const u=a?_S:xS,o=Object.values(u).find(c=>c.key===m)||Object.values(u)[0],r=c=>{c.stopPropagation();const l=Object.keys(u),f=(l.findIndex(h=>u[h].key===m)+1)%l.length;t(u[l[f]].key)};return q.jsx("button",{onClick:r,className:`${s?"px-1.5 py-0.5 text-[9px]":"px-2 py-1 text-[10px]"} font-bold uppercase tracking-wide rounded-none cursor-pointer hover:opacity-80 transition-opacity`,style:{color:o.color,backgroundColor:o.bgColor,border:`1px solid ${o.color}40`},title:"Click to change status",children:o.label})},im=({label:m,done:a,total:t,percentage:s,color:u="#22c55e"})=>q.jsxs("div",{className:"mb-3",children:[q.jsxs("div",{className:"flex justify-between items-center mb-1",children:[q.jsx("span",{className:"text-[12px] font-normal text-slate-300",children:m}),q.jsxs("span",{className:"text-[12px] font-normal text-slate-200",children:[a,"/",t," (",s,"%)"]})]}),q.jsx("div",{className:"h-2 bg-slate-700 rounded-none overflow-hidden",children:q.jsx("div",{className:"h-full transition-all duration-300 rounded-none",style:{width:`${s}%`,backgroundColor:u}})})]}),Fg=({file:m,categoryKey:a,nodeKey:t,onStatusChange:s,metadata:u,depth:o=0})=>{const r=`${a}-${t}-${m.name}`,c=u?.publicFileStatuses?.[r]||"incomplete";return q.jsxs("div",{className:"flex items-center gap-2 py-1.5 px-2 hover:bg-slate-700/50 rounded cursor-pointer group",style:{marginLeft:`${(o+1)*20}px`},children:[q.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-[10px] font-bold",children:q.jsx(Bv,{type:m.type})}),q.jsx("span",{className:"flex-1 text-[12px] text-white",children:m.name}),q.jsx(zv,{status:c,isNCR:!1,onChange:l=>s(r,[],l,!0),small:!0}),q.jsx("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:q.jsx("a",{href:m.path,download:m.name,onClick:l=>l.stopPropagation(),className:"p-1 hover:bg-slate-600 rounded text-[10px] text-slate-300",title:"Download",children:""})})]})};function HS(){const[m,a]=ot.useState(()=>$0()),[t,s]=ot.useState("ITPs"),[u,o]=ot.useState(new Set),[r,c]=ot.useState(null),[l,n]=ot.useState(""),[f,h]=ot.useState(null),[p,g]=ot.useState(null),v=ot.useRef(null),x=ot.useRef(null),[y,w]=ot.useState(null),[S,E]=ot.useState(""),[I,D]=ot.useState(!1),[Z,K]=ot.useState(""),[z,W]=ot.useState(null),[Q,rt]=ot.useState(""),[tt,j]=ot.useState(null),F=ot.useMemo(()=>({ITPs:{"itp-civil":[{name:"civil.docx",path:"/QAQC/ITPs/civil/civil.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}],"itp-electrical":[{name:"electrical.docx",path:"/QAQC/ITPs/electrical/electrical.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}],"itp-mechanical":[{name:"mechanical.docx",path:"/QAQC/ITPs/mechanical/mechanical.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}]},Checklists:{"cl-dc-cable":[{name:"civil - Copy.docx",path:"/QAQC/Checklists/electrical/dc-cable/civil - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"electrical - Copy.docx",path:"/QAQC/Checklists/electrical/dc-cable/electrical - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical - Copy.docx",path:"/QAQC/Checklists/electrical/dc-cable/mechanical - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}],"cl-earthing-foc":[{name:"civil.docx",path:"/QAQC/Checklists/electrical/earthing-foc/civil.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"electrical.docx",path:"/QAQC/Checklists/electrical/earthing-foc/electrical.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical.docx",path:"/QAQC/Checklists/electrical/earthing-foc/mechanical.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}],"cl-inverter-lv":[{name:"civil - Copy (2).docx",path:"/QAQC/Checklists/electrical/inverter-lv/civil - Copy (2).docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"civil - Copy - Copy.docx",path:"/QAQC/Checklists/electrical/inverter-lv/civil - Copy - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"electrical - Copy (2).docx",path:"/QAQC/Checklists/electrical/inverter-lv/electrical - Copy (2).docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"electrical - Copy - Copy.docx",path:"/QAQC/Checklists/electrical/inverter-lv/electrical - Copy - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical - Copy (2).docx",path:"/QAQC/Checklists/electrical/inverter-lv/mechanical - Copy (2).docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical - Copy - Copy.docx",path:"/QAQC/Checklists/electrical/inverter-lv/mechanical - Copy - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}],"cl-module-installation":[{name:"civil - Copy (2).docx",path:"/QAQC/Checklists/mechanical/module-installation/civil - Copy (2).docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"civil - Copy - Copy.docx",path:"/QAQC/Checklists/mechanical/module-installation/civil - Copy - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"electrical - Copy (2).docx",path:"/QAQC/Checklists/mechanical/module-installation/electrical - Copy (2).docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"electrical - Copy - Copy.docx",path:"/QAQC/Checklists/mechanical/module-installation/electrical - Copy - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical - Copy (2).docx",path:"/QAQC/Checklists/mechanical/module-installation/mechanical - Copy (2).docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical - Copy - Copy.docx",path:"/QAQC/Checklists/mechanical/module-installation/mechanical - Copy - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}],"cl-mounting-structure":[{name:"civil - Copy.docx",path:"/QAQC/Checklists/mechanical/mounting-structure-assembly/civil - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"civil.docx",path:"/QAQC/Checklists/mechanical/mounting-structure-assembly/civil.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"electrical - Copy.docx",path:"/QAQC/Checklists/mechanical/mounting-structure-assembly/electrical - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical - Copy.docx",path:"/QAQC/Checklists/mechanical/mounting-structure-assembly/mechanical - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical.docx",path:"/QAQC/Checklists/mechanical/mounting-structure-assembly/mechanical.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}]},NCRs:{NCRs:[{name:"civil - Copy - Copy.docx",path:"/QAQC/NCRs/civil - Copy - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"electrical - Copy (2).docx",path:"/QAQC/NCRs/electrical - Copy (2).docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical - Copy (2).docx",path:"/QAQC/NCRs/mechanical - Copy (2).docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}]},ThirdParty:{"tp-dnv":[{name:"electrical - Copy (2).docx",path:"/QAQC/ThirdParty/DNV/electrical - Copy (2).docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical - Copy (2).docx",path:"/QAQC/ThirdParty/DNV/mechanical - Copy (2).docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical - Copy - Copy.docx",path:"/QAQC/ThirdParty/DNV/mechanical - Copy - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"mechanical - Copy.docx",path:"/QAQC/ThirdParty/DNV/mechanical - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}],"tp-cea":[{name:"civil - Copy (2).docx",path:"/QAQC/ThirdParty/CEA/civil - Copy (2).docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"civil - Copy - Copy.docx",path:"/QAQC/ThirdParty/CEA/civil - Copy - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"civil - Copy.docx",path:"/QAQC/ThirdParty/CEA/civil - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"civil.docx",path:"/QAQC/ThirdParty/CEA/civil.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{name:"electrical - Copy - Copy.docx",path:"/QAQC/ThirdParty/CEA/electrical - Copy - Copy.docx",type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}]}}),[]),R=ot.useMemo(()=>LS(m,F),[m,F]),T=ot.useCallback(()=>{const Ht=xo();a(Ht)},[]),C=ot.useCallback((Ht,Jt)=>{!Jt||Jt.length===0||o(ne=>{const ae=new Set(ne);for(let me=1;me<=Jt.length;me++){const Le=Jt.slice(0,me);ae.add(`${Ht}-${Le.join("-")}`)}return ae})},[]),k=ot.useCallback(Ht=>{o(Jt=>{const ne=new Set(Jt);if(ne.has(Ht)){ne.delete(Ht);for(const ae of Jt)ae.startsWith(Ht+"-")&&ne.delete(ae)}else ne.add(Ht);return ne})},[]),M=ot.useCallback(async Ht=>{const Jt=Ht.target.files?.[0],ne=x.current;if(console.log("[QAQC Upload] Starting upload:",{file:Jt?.name,target:ne}),!Jt||!ne){console.log("[QAQC Upload] No file or target, aborting");return}try{const ae=tg();await BS(ae,Jt),console.log("[QAQC Upload] File saved with ID:",ae);const me={fileId:ae,fileName:Jt.name,fileType:Jt.type,fileSize:Jt.size,uploadedAt:Date.now(),name:Jt.name};let Le=null,Pe=null;if(ne.type==="slot")console.log("[QAQC Upload] Updating slot:",ne.slotKey),Pe=SS(ne.category,ne.slotKey,me)||null;else if(ne.type==="folder")if(console.log("[QAQC Upload] Adding to folder:",ne.category,ne.path),Le=C1(ne.category,ne.path,me),console.log("[QAQC Upload] addDocument returned:",Le),Le){C(ne.category,ne.path);const Be=`${ne.category}-${ne.path.join("-")}`;o(He=>new Set([...He,Be])),c({categoryKey:ne.category,path:ne.path})}else console.error("[QAQC Upload] Failed to add document - path not found"),alert("Failed to add document to folder. Path may not exist.");else ne.type==="document"?(console.log("[QAQC Upload] Replacing document at path:",ne.category,ne.path),Pe=CS(ne.category,ne.path,me)||null):ne.type==="category"&&(console.log("[QAQC Upload] Adding to category root:",ne.category),Le=C1(ne.category,[],me),console.log("[QAQC Upload] addDocument returned:",Le));if(Pe&&Pe!==ae)try{await rm(Pe)}catch(Be){console.warn("[QAQC Upload] Failed to delete old file:",Pe,Be)}T(),console.log("[QAQC Upload] Metadata refreshed")}catch(ae){console.error("[QAQC Upload] Upload failed:",ae),alert("Failed to upload file: "+ae.message)}x.current=null,v.current&&(v.current.value="")},[T,C]),O=ot.useCallback((Ht,Jt)=>{const ne=URL.createObjectURL(Ht),ae=document.createElement("a");ae.href=ne,ae.download=Jt,document.body.appendChild(ae),ae.click(),ae.remove(),URL.revokeObjectURL(ne)},[]),P=ot.useCallback(async(Ht,Jt)=>{const ne=await Dv(Ht);if(!ne?.data)return!1;const ae=new Blob([ne.data],{type:ne.type||"application/octet-stream"});return O(ae,Jt||ne.name||"download"),!0},[O]),H=ot.useCallback(async(Ht,Jt)=>{const ae=xo().tree?.[Ht];if(!ae)return;let me=ae;for(const Je of Jt)if(me.children&&me.children[Je])me=me.children[Je];else return;const Le=[];function Pe(Je,sn){if(Je&&(Je.type==="document"&&Je.fileId&&Le.push({fileId:Je.fileId,fileName:Je.fileName||Je.label,path:sn}),Je.type==="doc-slot"&&Je.fileId&&Le.push({fileId:Je.fileId,fileName:Je.fileName||Je.label,path:sn}),Je.children))for(const[un,an]of Object.entries(Je.children))Pe(an,[...sn,an?.label||un])}if(Pe(me,[me?.label||"folder"]),Le.length===0){alert("No downloadable files in this folder.");return}if(Le.length===1){await P(Le[0].fileId,Le[0].fileName)||alert("File not found in storage.");return}const Be={folder:me?.label||"folder",category:Ht,exportedAt:new Date().toISOString(),files:Le.map(Je=>({fileId:Je.fileId,fileName:Je.fileName,path:Je.path}))},He=new Blob([JSON.stringify(Be,null,2)],{type:"application/json"});O(He,`${Ht}-${me?.label||"folder"}-manifest.json`)},[P,O]),et=ot.useCallback((Ht,Jt,ne,ae=!1)=>{ae?MS(Ht,ne):kS(Ht,Jt,ne),T()},[T]),it=ot.useCallback(async(Ht,Jt,ne=!1)=>{if(confirm(`Are you sure you want to delete this ${ne?"folder":"document"}?`))try{if(ne){const ae=jS(Ht,Jt);for(const me of ae)await rm(me)}else{const ae=ES(Ht,Jt);ae&&await rm(ae)}T()}catch(ae){console.error("Delete failed:",ae)}},[T]),pt=ot.useCallback(async(Ht,Jt,ne)=>{if(ne&&confirm("Remove this file from the slot?"))try{const ae=TS(Ht,Jt);ae&&await rm(ae),T()}catch(ae){console.error("Clear slot failed:",ae)}},[T]),X=ot.useCallback(async(Ht,Jt,ne)=>{try{const ae=await FS(Ht);ae&&(h({name:Jt,type:ne}),g(ae))}catch(ae){console.error("Preview failed:",ae)}},[]),ut=ot.useCallback(()=>{p&&URL.revokeObjectURL(p),h(null),g(null)},[p]),G=ot.useCallback(()=>{if(!y||!S.trim())return;const Ht=NS(y.category,y.path,S.trim());if(Ht){if(C(y.category,y.path),y.path.length>0){const ae=`${y.category}-${y.path.join("-")}`;o(me=>new Set([...me,ae]))}const Jt=[...y.path,Ht],ne=`${y.category}-${Jt.join("-")}`;o(ae=>new Set([...ae,ne])),c({categoryKey:y.category,path:Jt})}T(),w(null),E("")},[y,S,T,C]),U=ot.useCallback(()=>{if(!Z.trim())return;const Ht=AS(Z.trim());T(),s(Ht),D(!1),K("")},[Z,T]),st=ot.useCallback(Ht=>{const Jt=m?.tree?.[Ht];Jt&&(W({key:Ht,name:Jt.label,fixed:!!Jt.fixed}),rt(Jt.label||""))},[m]),gt=ot.useCallback(()=>{if(!z)return;const Ht=Q.trim();Ht&&(RS(z.key,Ht),T(),W(null),rt(""))},[z,Q,T]),zt=ot.useCallback(async()=>{if(!z||z.fixed||!confirm("Are you sure you want to delete this category and all its files?"))return;try{const Jt=IS(z.key);for(const ne of Jt)await rm(ne)}catch(Jt){console.error("Delete category failed:",Jt)}const Ht=xo();if(a(Ht),t===z.key){const Jt=Ht.tree?.ITPs?"ITPs":Object.keys(Ht.tree||{})[0];Jt&&s(Jt)}r?.categoryKey===z.key&&c(null),W(null),rt("")},[z,t,r]),St=ot.useCallback(Ht=>{!tt||!Ht.trim()||(OS(tt.categoryKey,tt.path,Ht.trim()),T(),j(null))},[tt,T]),Bt=ot.useCallback(Ht=>{x.current=Ht,v.current?.click()},[]),ie=l.trim().toLowerCase(),re=ot.useCallback(function Ht(Jt,ne,ae){if(!ie||(Jt?.label||"").toLowerCase().includes(ie)||(F?.[ae]?.[ne]||[]).some(Pe=>(Pe.name||"").toLowerCase().includes(ie)))return!0;if(Jt?.children){for(const[Pe,Be]of Object.entries(Jt.children))if(Ht(Be,Pe,ae))return!0}return!1},[F,ie]),Ct=(Ht,Jt,ne,ae,me=!1,Le=0)=>{if(Ht?.hidden)return null;const Pe=[...ne,Jt],Be=`${ae}-${Pe.join("-")}`,He=u.has(Be),Je=ie?!0:He,sn=Ht.type==="folder",un=Ht.type==="doc-slot",an=Ht.type==="document",ge=!!m?.tree?.[ae]?.allowFolderCreation,Ve=!!r&&r.categoryKey===ae&&r.path.join("-")===Pe.join("-"),Ke=F[ae]?.[Jt]||[],dn=Ke.length>0,$n=Ht.children&&Object.keys(Ht.children).length>0||dn,hr=an||un||sn&&(Ht.fixed||Ht.userCreated||$n||ge||ae==="Random");return ie&&!re(Ht,Jt,ae)||!hr?null:q.jsxs("div",{className:"select-none",children:[q.jsxs("div",{className:`flex items-center gap-2 py-1.5 px-2 rounded cursor-pointer group ${Ve?"bg-slate-700/70":"hover:bg-slate-700/50"}`,style:{marginLeft:`${Le*20}px`},onClick:()=>{sn&&(c({categoryKey:ae,path:Pe}),k(Be))},children:[sn&&q.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-slate-500",children:$n?Je?"":"":""}),sn?q.jsx("svg",{className:"w-4 h-4 text-amber-400",fill:"currentColor",viewBox:"0 0 20 20",children:q.jsx("path",{d:"M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"})}):q.jsx("span",{className:"w-4 h-4 flex items-center justify-center text-[10px] font-bold",children:q.jsx(Bv,{type:Ht.fileType})}),tt&&tt.categoryKey===ae&&tt.path.join("-")===Pe.join("-")?q.jsx("input",{type:"text",defaultValue:Ht.label,autoFocus:!0,className:"flex-1 bg-slate-700 border border-amber-500 rounded px-2 py-0.5 text-[12px] text-white focus:outline-none",onClick:Ye=>Ye.stopPropagation(),onKeyDown:Ye=>{Ye.key==="Enter"?St(Ye.target.value):Ye.key==="Escape"&&j(null)},onBlur:Ye=>St(Ye.target.value)}):q.jsxs("span",{className:`flex-1 text-[12px] ${Ht.fileId?"text-white":"text-slate-400"}`,onDoubleClick:Ye=>{sn&&!Ht.fixed&&ae==="Random"&&(Ye.stopPropagation(),j({categoryKey:ae,path:Pe,currentName:Ht.label}))},children:[Ht.label,un&&!Ht.fileId&&q.jsx("span",{className:"text-red-400 ml-1",children:"(required)"})]}),Ht.uploadedAt&&q.jsx("span",{className:"text-[9px] text-slate-500 mr-2",children:new Date(Ht.uploadedAt).toLocaleDateString()}),(un||an)&&Ht.fileId&&q.jsx(zv,{status:Ht.status||(me?"open":"incomplete"),isNCR:me,onChange:Ye=>et(ae,Pe,Ye),small:!0}),q.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[sn&&q.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),H(ae,Pe)},className:"p-1 hover:bg-slate-600 rounded text-[10px] text-slate-300",title:"Download",children:""}),(un||an)&&q.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),un?Bt({type:"slot",category:ae,slotKey:Jt}):an&&Bt({type:"document",category:ae,path:Pe})},className:"p-1 hover:bg-slate-600 rounded text-[10px] text-slate-300",title:Ht.fileId?"Replace":"Upload",children:Ht.fileId?"":""}),(un||an)&&Ht.fileId&&q.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),X(Ht.fileId,Ht.fileName,Ht.fileType)},className:"p-1 hover:bg-slate-600 rounded text-[10px] text-slate-300",title:"Preview",children:""}),sn&&q.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),j({categoryKey:ae,path:Pe,currentName:Ht.label})},className:"p-1 hover:bg-slate-600 rounded text-[10px] text-slate-300",title:"Rename",children:""}),un&&Ht.fileId&&q.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),pt(ae,Jt,Ht.fileId)},className:"p-1 hover:bg-red-600/50 rounded text-[10px] text-red-400",title:"Remove",children:""}),an&&q.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),it(ae,Pe,!1)},className:"p-1 hover:bg-red-600/50 rounded text-[10px] text-red-400",title:"Remove",children:""}),sn&&q.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),it(ae,Pe,sn)},className:"p-1 hover:bg-red-600/50 rounded text-[10px] text-red-400",title:"Delete",children:""})]})]}),sn&&Je&&$n&&q.jsxs("div",{className:"border-l-2 border-slate-600 ml-2",children:[Ke.map(Ye=>q.jsx(Fg,{file:Ye,categoryKey:ae,nodeKey:Jt,onStatusChange:et,metadata:m,depth:Le},Ye.path)),Object.entries(Ht.children||{}).map(([Ye,Xn])=>Ct(Xn,Ye,Pe,ae,me,Le+1))]})]},Jt)};if(!m||!R)return q.jsx("div",{className:"fixed inset-0 bg-slate-900 flex items-center justify-center",children:q.jsx("div",{className:"text-white",children:"Loading QA/QC Module..."})});const Yt=m.tree[t],Qt=Yt?.isNCR;return q.jsxs("div",{className:"fixed inset-0 bg-slate-900 flex flex-col",children:[q.jsxs("div",{className:"w-full border-0 bg-[#0b1220] py-3 text-center text-lg font-black uppercase tracking-[0.22em] text-slate-200 relative",children:[q.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 z-[1200]",children:q.jsx("button",{type:"button",onClick:()=>{window.dispatchEvent(new CustomEvent("toggleHamburgerMenu"))},"aria-label":"Mode",className:"inline-flex h-10 w-10 items-center justify-center border-2 border-slate-700 bg-slate-900 text-white hover:bg-slate-800 focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-400",children:q.jsxs("svg",{viewBox:"0 0 24 24",className:"h-6 w-6",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[q.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),q.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),q.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})})}),"QA / QC  Docs & Status"]}),q.jsx("input",{ref:v,type:"file",className:"hidden",onChange:M,accept:"*/*"}),q.jsxs("div",{className:"flex-1 flex overflow-hidden px-32",children:[q.jsxs("div",{className:"flex-1 flex flex-col min-w-0 border-r-2 border-slate-700",children:[q.jsx("div",{className:"flex-shrink-0 border-b-2 border-slate-700 bg-slate-900/80 overflow-x-auto",children:q.jsxs("div",{className:"flex items-center px-3 py-2 gap-1",children:[Object.entries(m.tree).map(([Ht,Jt])=>{const ne=R?.[Ht]||{done:0,total:0,percentage:0};return q.jsxs("div",{className:"relative flex-shrink-0 group",children:[q.jsxs("button",{type:"button",onClick:()=>s(Ht),className:`px-4 py-3 flex items-center gap-2 text-left transition-colors rounded-none ${t===Ht?"bg-amber-500/20 border border-amber-500 text-amber-400":"text-slate-300 hover:bg-slate-800 border border-transparent"}`,children:[q.jsx(US,{category:Ht}),q.jsxs("div",{children:[q.jsx("div",{className:"text-[13px] font-medium",children:Jt.label}),q.jsxs("div",{className:"text-[10px] text-slate-500",children:[ne.done,"/",ne.total," (",ne.percentage,"%)"]})]})]}),q.jsx("button",{type:"button",onClick:ae=>{ae.stopPropagation(),st(Ht)},className:`absolute top-1 right-1 h-4 w-4 flex items-center justify-center rounded text-[10px] transition-opacity ${t===Ht?"text-amber-300 opacity-100":"text-slate-400 opacity-0 group-hover:opacity-100"} hover:bg-slate-700`,title:"Edit category",children:""})]},Ht)}),q.jsx("button",{type:"button",onClick:()=>D(!0),className:"flex-shrink-0 px-4 py-3 flex items-center justify-center transition-colors rounded-none text-slate-400 hover:bg-slate-700 hover:text-white border border-dashed border-slate-600 hover:border-amber-500",title:"Add new category",children:q.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]})}),q.jsxs("div",{className:"p-4 border-b-2 border-slate-700 flex items-center gap-3",children:[q.jsx("div",{className:"flex-1 relative",children:q.jsx("input",{type:"text",value:l,onChange:Ht=>n(Ht.target.value),placeholder:"Search all categories...",className:"w-full bg-slate-800 border border-slate-600 rounded-none px-3 py-2 text-[12px] text-white placeholder-slate-500 focus:outline-none focus:border-amber-500"})}),q.jsx("button",{type:"button",onClick:()=>{const Ht=r?.categoryKey===t?r.path:[];Ht.length>0?Bt({type:"folder",category:t,path:Ht}):Bt({type:"category",category:t})},className:"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-500 text-white text-[10px] font-bold uppercase tracking-wide rounded-none",children:"+ Upload"}),q.jsx("button",{type:"button",onClick:()=>{const Ht=r?.categoryKey===t?r.path:[];w({category:t,path:Ht})},className:"px-3 py-1.5 bg-amber-600 hover:bg-amber-500 text-white text-[10px] font-bold uppercase tracking-wide rounded-none",children:"+ Folder"})]}),q.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:ie?q.jsx(q.Fragment,{children:Object.entries(m.tree||{}).map(([Ht,Jt])=>{const ne=!!Jt?.isNCR,ae=Object.entries(Jt?.children||{}),me=ae.some(([Be,He])=>re(He,Be,Ht)),Pe=(F?.[Ht]?.[Ht]||[]).filter(Be=>(Be.name||"").toLowerCase().includes(ie));return!me&&Pe.length===0?null:q.jsxs("div",{className:"mb-4",children:[q.jsx("div",{className:"text-[11px] font-bold text-amber-400 uppercase tracking-wide mb-2 px-2 py-1 bg-slate-700/30 rounded",children:Jt?.label||Ht}),Pe.map(Be=>q.jsx(Fg,{file:Be,categoryKey:Ht,nodeKey:Ht,onStatusChange:et,metadata:m,depth:-1},Be.path)),ae.map(([Be,He])=>Ct(He,Be,[],Ht,ne))]},Ht)})}):q.jsxs(q.Fragment,{children:[F[t]?.[t]?.map(Ht=>q.jsx(Fg,{file:Ht,categoryKey:t,nodeKey:t,onStatusChange:et,metadata:m,depth:-1},Ht.path)),Yt?.children&&Object.entries(Yt.children).map(([Ht,Jt])=>Ct(Jt,Ht,[],t,Qt)),(!Yt?.children||Object.keys(Yt.children).length===0)&&!F[t]?.[t]?.length&&q.jsx("div",{className:"text-center text-slate-500 text-[12px] py-8",children:t==="Random"?q.jsxs("div",{children:[q.jsx("p",{className:"mb-2",children:"No folders or documents yet."}),q.jsxs("p",{children:["Click ",q.jsx("span",{className:"text-amber-400 font-bold",children:'"+ Folder"'})," to create a folder or"," ",q.jsx("span",{className:"text-emerald-400 font-bold",children:'"+ Upload"'})," to add files."]})]}):'No documents yet. Click "Upload" to add documents.'})]})})]}),q.jsxs("div",{className:"w-72 flex-shrink-0 bg-slate-800/50 flex flex-col",children:[q.jsx("div",{className:"h-[78px] px-3 border-b-2 border-slate-700 flex items-center justify-center",children:q.jsx("h2",{className:"text-[16px] font-bold text-white text-center",children:"Overall Status"})}),q.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[q.jsxs("div",{className:"mb-5 p-4 bg-slate-700/50 rounded-none",children:[q.jsxs("div",{className:"flex justify-between items-center mb-3",children:[q.jsxs("div",{className:"text-center flex-1",children:[q.jsxs("div",{className:"text-[18px] font-medium text-emerald-400",children:[R.overall.percentage,"%"]}),q.jsx("div",{className:"mt-1 inline-block px-2 py-0.5 bg-slate-800/60 border border-slate-600/50 rounded-none text-[9px] text-slate-300",children:"Completed"})]}),q.jsxs("div",{className:"text-center flex-1",children:[q.jsxs("div",{className:"text-[18px] font-medium text-amber-400",children:[R.overall.inProgressPercentage,"%"]}),q.jsx("div",{className:"mt-1 inline-block px-2 py-0.5 bg-slate-800/60 border border-slate-600/50 rounded-none text-[9px] text-slate-300",children:"In Progress"})]}),q.jsxs("div",{className:"text-center flex-1",children:[q.jsxs("div",{className:"text-[18px] font-medium text-red-400",children:[R.overall.incompletePercentage,"%"]}),q.jsx("div",{className:"mt-1 inline-block px-2 py-0.5 bg-slate-800/60 border border-slate-600/50 rounded-none text-[9px] text-slate-300",children:"Incomplete"})]})]}),q.jsxs("div",{className:"text-center text-[10px] text-slate-400",children:[R.overall.done," completed, ",R.overall.inProgress," in progress,"," ",R.overall.total-R.overall.done-R.overall.inProgress," incomplete"]})]}),q.jsxs("div",{className:"p-3 bg-slate-700/30 rounded-none border border-slate-600/50",children:[q.jsx(im,{label:"ITPs",done:R.ITPs.done,total:R.ITPs.total,percentage:R.ITPs.percentage,color:"#22c55e"}),q.jsx(im,{label:"Checklists",done:R.Checklists.done,total:R.Checklists.total,percentage:R.Checklists.percentage,color:"#8b5cf6"}),q.jsx(im,{label:"NCR Closure",done:R.NCRs.done,total:R.NCRs.total,percentage:R.NCRs.percentage,color:"#f59e0b"}),q.jsx(im,{label:"Third Party",done:R.ThirdParty.done,total:R.ThirdParty.total,percentage:R.ThirdParty.percentage,color:"#ec4899"}),q.jsx(im,{label:"Random",done:R.Random.done,total:R.Random.total,percentage:R.Random.percentage,color:"#6366f1"})]})]})]}),y&&q.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>w(null),children:q.jsxs("div",{className:"bg-slate-800 border-2 border-slate-600 p-6 w-80",onClick:Ht=>Ht.stopPropagation(),children:[q.jsx("h3",{className:"text-[14px] font-bold text-white mb-4",children:"Create New Folder"}),q.jsx("input",{type:"text",value:S,onChange:Ht=>E(Ht.target.value),placeholder:"Folder name...",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-[12px] text-white placeholder-slate-500 focus:outline-none focus:border-amber-500 mb-4",autoFocus:!0,onKeyDown:Ht=>Ht.key==="Enter"&&G()}),q.jsxs("div",{className:"flex gap-2 justify-end",children:[q.jsx("button",{type:"button",onClick:()=>w(null),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white text-[11px] font-bold uppercase rounded",children:"Cancel"}),q.jsx("button",{type:"button",onClick:G,disabled:!S.trim(),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-600 disabled:cursor-not-allowed text-white text-[11px] font-bold uppercase rounded",children:"Create"})]})]})}),I&&q.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>D(!1),children:q.jsxs("div",{className:"bg-slate-800 border-2 border-slate-600 p-6 w-80",onClick:Ht=>Ht.stopPropagation(),children:[q.jsx("h3",{className:"text-[14px] font-bold text-white mb-4",children:"Create New Category"}),q.jsx("p",{className:"text-[11px] text-slate-400 mb-3",children:"This will add a new tab next to ITPs, Checklists, etc."}),q.jsx("input",{type:"text",value:Z,onChange:Ht=>K(Ht.target.value),placeholder:"Category name...",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-[12px] text-white placeholder-slate-500 focus:outline-none focus:border-amber-500 mb-4",autoFocus:!0,onKeyDown:Ht=>Ht.key==="Enter"&&U()}),q.jsxs("div",{className:"flex gap-2 justify-end",children:[q.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white text-[11px] font-bold uppercase rounded",children:"Cancel"}),q.jsx("button",{type:"button",onClick:U,disabled:!Z.trim(),className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-slate-600 disabled:cursor-not-allowed text-white text-[11px] font-bold uppercase rounded",children:"Create"})]})]})}),z&&q.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",onClick:()=>W(null),children:q.jsxs("div",{className:"bg-slate-800 border-2 border-slate-600 p-6 w-96",onClick:Ht=>Ht.stopPropagation(),children:[q.jsx("h3",{className:"text-[14px] font-bold text-white mb-4",children:"Edit Category"}),q.jsx("input",{type:"text",value:Q,onChange:Ht=>rt(Ht.target.value),placeholder:"Category name...",className:"w-full bg-slate-700 border border-slate-600 rounded px-3 py-2 text-[12px] text-white placeholder-slate-500 focus:outline-none focus:border-amber-500 mb-3",autoFocus:!0,onKeyDown:Ht=>Ht.key==="Enter"&&gt()}),z.fixed&&q.jsx("div",{className:"text-[11px] text-slate-400 mb-3",children:"This is a system category. You can rename it, but you cannot delete it."}),q.jsxs("div",{className:"flex items-center justify-between gap-2",children:[q.jsx("button",{type:"button",onClick:zt,disabled:z.fixed,className:"px-4 py-2 bg-red-600 hover:bg-red-500 disabled:bg-slate-600 disabled:cursor-not-allowed text-white text-[11px] font-bold uppercase rounded",children:"Delete"}),q.jsxs("div",{className:"flex gap-2",children:[q.jsx("button",{type:"button",onClick:()=>W(null),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white text-[11px] font-bold uppercase rounded",children:"Close"}),q.jsx("button",{type:"button",onClick:gt,disabled:!Q.trim(),className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 disabled:bg-slate-600 disabled:cursor-not-allowed text-white text-[11px] font-bold uppercase rounded",children:"Save"})]})]})]})}),f&&p&&q.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:ut,children:q.jsxs("div",{className:"bg-slate-800 border-2 border-slate-600 max-w-4xl max-h-[90vh] w-full m-4 flex flex-col",onClick:Ht=>Ht.stopPropagation(),children:[q.jsxs("div",{className:"p-4 border-b border-slate-600 flex items-center justify-between",children:[q.jsx("h3",{className:"text-[13px] font-bold text-white truncate",children:f.name}),q.jsxs("div",{className:"flex items-center gap-2",children:[q.jsx("a",{href:p,download:f.name,className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white text-[10px] font-bold uppercase rounded",children:"Download"}),q.jsx("button",{onClick:ut,className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white text-[10px] font-bold uppercase rounded",children:"Close"})]})]}),q.jsx("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center bg-slate-900/50",children:f.type?.includes("pdf")?q.jsx("iframe",{src:p,className:"w-full h-full min-h-[60vh]"}):f.type?.startsWith("image/")?q.jsx("img",{src:p,alt:f.name,className:"max-w-full max-h-[70vh] object-contain"}):q.jsxs("div",{className:"text-center text-slate-400",children:[q.jsx("p",{className:"text-[14px] mb-4",children:"Preview not available for this file type."}),q.jsx("a",{href:p,download:f.name,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white text-[11px] font-bold uppercase rounded inline-block",children:"Download File"})]})})]})})]})]})}const Zh={DC:{key:"DC",label:"DC Cable Pulling Progress",Component:iS},LV:{key:"LV",label:"LV Cable Pulling Progress",Component:sS},MVF:{key:"MVF",label:"MV Cable Pulling Progress",Component:oS},MVFT:{key:"MVFT",label:"MV&Fibre Trench Progress",Component:aS},FIB:{key:"FIB",label:"Fibre Pulling Progress",Component:lS},MC4:{key:"MC4",label:"MC4 Installation",Component:cS},MVT:{key:"MVT",label:"MV Termination & Testing Progress",Component:uS},LVTT:{key:"LVTT",label:"LV Termination & Testing Progress",Component:fS},DCCT:{key:"DCCT",label:"DC Cable Testing Progress",Component:dS},DCTT:{key:"DCTT",label:"DC Termination & Testing Progress",Component:hS},MIPT:{key:"MIPT",label:"Module Installation Progress",Component:pS},TIP:{key:"TIP",label:"Table Installation Progress",Component:mS},LVIB:{key:"LVIB",label:"LV Box & Inv Box Installation",Component:gS},PTEP:{key:"PTEP",label:"Parameter & Table Earthing",Component:yS},DATP:{key:"DATP",label:"DC&AC Trench Progress",Component:vS},PL:{key:"PL",label:"Punch List",Component:bS},QAQC:{key:"QAQC",label:"QA / QC  Docs & Status",Component:HS}};function VS(){const[m,a]=ot.useState(()=>{try{const f=new URLSearchParams(window.location.search).get("module");return f&&Zh[f]?f:"DC"}catch{return"DC"}}),[t,s]=ot.useState(!1),u=ot.useRef(null),o=ot.useRef(!1),r=n=>{const f=new URL(window.location.href);return f.searchParams.set("module",n),f.pathname+f.search+f.hash},c=(n,f)=>{n.metaKey||n.ctrlKey||n.shiftKey||n.altKey||(n.preventDefault(),a(f),s(!1))};ot.useEffect(()=>{if(!Zh[m])return;const n=new URL(window.location.href);n.searchParams.get("module")!==m&&(n.searchParams.set("module",m),window.history.replaceState({},"",n.pathname+n.search+n.hash))},[m]),ot.useEffect(()=>{o.current=t,window.__cewHamburgerMenuOpen=t},[t]),ot.useEffect(()=>{const n=()=>s(f=>!f);return window.addEventListener("toggleHamburgerMenu",n),()=>window.removeEventListener("toggleHamburgerMenu",n)},[]),ot.useEffect(()=>{const n=f=>{u.current&&(u.current.contains(f.target)||s(!1))};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const l=(Zh[m]||Zh.DC).Component;return q.jsxs(q.Fragment,{children:[q.jsx(l,{}),m!=="QAQC"&&q.jsx("div",{className:"fixed left-3 sm:left-5 top-[calc(var(--cewHeaderH,92px)+8px)] z-[1200]",ref:u,children:q.jsxs("div",{className:"relative",children:[q.jsx("button",{type:"button",onClick:()=>s(n=>!n),"aria-expanded":t,"aria-label":"Mode",className:"inline-flex h-10 w-10 items-center justify-center border-2 border-slate-700 bg-slate-900 text-white hover:bg-slate-800 focus:outline-none focus-visible:ring-4 focus-visible:ring-amber-400",children:q.jsxs("svg",{viewBox:"0 0 24 24",className:"h-6 w-6",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[q.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),q.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),q.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})}),t&&q.jsx("div",{className:"absolute left-0 mt-2 w-72 max-h-[70vh] overflow-y-auto border-2 border-slate-700 bg-slate-900 shadow-[0_10px_26px_rgba(0,0,0,0.55)]",children:Object.values(Zh).map(n=>q.jsx("a",{href:r(n.key),onClick:f=>c(f,n.key),className:`block w-full px-3 py-2.5 text-left text-[11px] font-medium tracking-wide ${m===n.key?"bg-amber-500 text-black":"bg-slate-900 text-slate-300 hover:bg-slate-800 hover:text-white"}`,children:n.label},n.key))})]})}),m==="QAQC"&&t&&q.jsx("div",{ref:u,className:"fixed left-3 top-[42px] z-[1300] w-72 max-h-[70vh] overflow-y-auto border-2 border-slate-700 bg-slate-900 shadow-[0_10px_26px_rgba(0,0,0,0.55)]",children:Object.values(Zh).map(n=>q.jsx("a",{href:r(n.key),onClick:f=>c(f,n.key),className:`block w-full px-3 py-2.5 text-left text-[11px] font-medium tracking-wide ${m===n.key?"bg-amber-500 text-black":"bg-slate-900 text-slate-300 hover:bg-slate-800 hover:text-white"}`,children:n.label},n.key))})]})}Yv.createRoot(document.getElementById("root")).render(q.jsx(ot.StrictMode,{children:q.jsx(VS,{})}));
